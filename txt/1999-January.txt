From oncley@atd.ucar.edu  Sat Jan  2 05:46:18 1999
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Fri, 1 Jan 1999 22:46:18 -0700 (MST)
Subject: .C
Message-ID: <199901020546.WAA09870@ale.atd.ucar.edu>

Happy 1999!

I've been celebrating the holidays by (finally) getting to the port of our 
S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
moment, there are two issues I'd appreciate advice on:

1. Is support for mode "single" data planned anytime soon in R?  A lot of
our NetCDF files contain "single" data and having to coerce into "double"
will increase the use of R memory drastically (and slow things down).

2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
contain the data attributes, which aren't known until the files are read.
Our S+ code defines a dummy variable for the data dimensions, which are 
redefined (calling "S_alloc") and set within the C code once they are known.
The appended example works in S+ using the pointers= argument in .C.  
Is there a way to do this in R?

Thanks...Steve Oncley
oncley@ucar.edu

C-code:

void inquire_varid(
  int *ncid_p,          /* NetCDF file id. File is left open  */
  int *var_id_p,        /* variable id */
  long **varlen,        /* Length of variable, along each dimension */
  long *ndims_r,        /* number of dimensions in variable */
			/* This argument is created automatically by S+'s
			   .C for pointers=T variables */
  char **vartype)       /* character string describing S object type */
{
...
  *varlen = dimval = (long *)S_alloc(ndims,sizeof(long));
...
}

S+ call:
	...
      vardims <- integer(0)             # Length of each dimension
      vartype <- ""                     # "integer","single","double" etc
      # get info about variable
      cdf <- .C("inquire_varid",
        cdfid = cdfid,
        varid = varid,
        vardims = vardims,
        vartype = vartype,pointers=c(F,F,T,F))
	...

P.S. I'm using R 0.64 under Redhat Linux 5.2.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan  2 07:47:53 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 2 Jan 1999 07:47:53 +0000 (GMT)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.05.9901020733370.1627-100000@auk.stats>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:

As people kept telling me, a `package' in R.

> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

Not `soon' from the responses to my requests.  I think you exaggerate
though: this can at most double the memory usage, and depending on the
machine and if you actually compute with the data (rather than move it
around) may have negliglible speed penalty. Remember too that anything done
with the data inside S-PLUS 3.x (and R, AFAIK) will make several
double-precision copies.

> 2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
> contain the data attributes, which aren't known until the files are read.
> Our S+ code defines a dummy variable for the data dimensions, which are 
> redefined (calling "S_alloc") and set within the C code once they are known.
> The appended example works in S+ using the pointers= argument in .C.  
> Is there a way to do this in R?

Actually, there is no longer a way to do this in S-PLUS: the pointers=
argument is not available in S-PLUS 5.x.  I think you need to re-think your
strategy: an alternative can be seen in the rpart code.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Jan  3 20:44:42 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 3 Jan 1999 12:44:42 -0800 (PST)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.03.9901031230270.11073-100000@wompom.biostat.washington.edu>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:
> 
> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

I don't think there's any immediate plan for genuine single precision
support.  I have written some code based on an idea of Peter Dalgaard's
to simplify porting of code that uses single precision. It uses a vector
of integers of class "single" to hold the data and defines various group
methods based on coercing back to double precision at the slightest
provocation. It's very preliminary at the moment, but you can get it at 
http://www.biostat.washington.edu/~thomas/single.tgz

This obviously wouldn't solve the time or memory problems, but only a few
people have time/memory problems that would be solved by single precision
support and it appears that none of them has the substantial amount of
spare time needed to implement it.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jan  4 00:20:25 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 4 Jan 1999 13:20:25 +1300 (NZDT)
Subject: .C
Message-ID: <199901040020.NAA21340@stat1.stat.auckland.ac.nz>

There is a possible solution to the "single" problem which I've been
thinking of introducing on the "next pass" through the memory
management code.  Since it is largely independent of the memory
management system I guess I should get to it rather sooner.

The solution is to introduce a new data type "single" (internally
SNGLSXP) which is identical to "double" (internally REALSXP) except
when it is passed through a .C or .Fortran call.  There the values
are copied to a genuine single precision array before being passed
to the foreign code.

As far as I know, the "single" type in S only exists for compatibility
with Old-S functions.  That's why there is no corresponding single
precision complex type -- Old-S did not have a complex type.
Would it be worth introducing a "singlecomplex" type to parallel the 
"single" real type?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan  4 14:42:38 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 4 Jan 1999 15:42:38 +0100 (CET)
Subject: Submissions to CRAN
Message-ID: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>


HAPPY NEW YEAR to all of you!

To clarify some questions in the recent thread on the timeslab
package (sorry that I couldn't participate in the discussion, but I
normally don't read my email on weekends):

*) Nobody should be able to download from the incoming section at our
site. That it was possible (again) was due to recursive link and some
lazy sysadmins which now have some more things they can try to make
better in the new year.

*) Please `announce' only packages that are really available somewhere
(and an incoming directory should not be considered such a
thing). This could either be

  -) your private server: nobody stops you from putting there whatever
     you want

  -) submissions to CRAN only after they have been moved by one of us,
     especially if it is a first submission. experience shows that
     first submissions very often need a little bit of `polishing' until
     they conform to CRAN standards, hence there are often time
     delays (and the already announced package cannot be found on CRAN).

*) I know that the packaging standards for CRAN may seem a little bit
pedantic, but only this way the `R INSTALL' interface can work without
troubles. Hence, the standards make life a little bit harder for
contributors, but we think it makes life much easier for the average
user (and these are the ones with less knowledge on how to fix
things).

*) On copyright for ports: This seems like a neverending discussion
and as I'm a mathematician and not a lawyer I can only contribute my
2(brand new Euro-)c:

Original code under GPL or similar: Port also GPL and you're done

`free redistribution for non-commercial use': I think it's OK to put
such things onto CRAN ... CD-vendors probably run into troubles.

The StatLib submission guidelines say that all code needs:

      A statement (which should also be part of the submission) that
      explicity gives permission to redistribute the software.  You
      can retain the copyright jsut so long as you clearly state that
      the software can be freely used for non-commercial purposes and can be
      freely distributed.
      If you are not the original author of the submission please make sure
      you obtain the original author's permission before submitting
      the software.

Now what exactly `redistribute' means (only original file or
derivatives) seems an open question to me ... and I think we never
settled this ...


In any case, asking the original author seems like a good first step
to me.


Feedback appreciated (please only to r-devel!!!),
Fritz

PS: After this thread is over we will make official CRAN submission
guidelines (with special emphasis on Statlib ports) and put something
in the FAQ.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jonathan.myles@mrc-bsu.cam.ac.uk  Tue Jan  5 11:31:10 1999
From: jonathan.myles@mrc-bsu.cam.ac.uk (Jonathan Myles)
Date: Tue, 5 Jan 1999 11:31:10 GMT
Subject: [R] Submissions to CRAN
In-Reply-To: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Mon, 4 Jan 1999 15:42:38 +0100 (CET))
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
Message-ID: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>


>  *) I know that the packaging standards for CRAN may seem a little bit
>   pedantic, but only this way the `R INSTALL' interface can work without
>   troubles. Hence, the standards make life a little bit harder for
>   contributors, but we think it makes life much easier for the average
>   user (and these are the ones with less knowledge on how to fix
>   things).

I'm sorry to be dim, but are the "packaging standards for CRAN" the same
thing as the "How can I create an R package" section of the FAQ? If not,
where are they?

Jonathan


-- 
Dr. Jonathan Myles         e-mail:jonathan.myles@mrc-bsu.cam.ac.uk
MRC Biostatistics Unit     Tel. 01223 330371
Institute of Public Health FAX  01223 330388
University Forvie Site
Robinson Way
CAMBRIDGE
CB2 2SR                   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jan  5 11:33:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 5 Jan 1999 12:33:18 +0100 (CET)
Subject: [R] Submissions to CRAN
In-Reply-To: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
 <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
Message-ID: <13969.63614.464999.987027@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 5 Jan 1999 11:31:10 GMT,
>>>>> Jonathan Myles (JM) wrote:

>> *) I know that the packaging standards for CRAN may seem a little bit
>> pedantic, but only this way the `R INSTALL' interface can work without
>> troubles. Hence, the standards make life a little bit harder for
>> contributors, but we think it makes life much easier for the average
>> user (and these are the ones with less knowledge on how to fix
>> things).

JM> I'm sorry to be dim, but are the "packaging standards for CRAN" the s=
ame
JM> thing as the "How can I create an R package" section of the FAQ? If n=
ot,
JM> where are they?

Yes, that's exactly what I meant ... sorr for using different
words. With standards I just meant file name conventions, dirs in a
package and all the other stuff that's mentioned in the FAQ or the
help(library) page ...

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Sat Jan  9 20:45:01 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Sat, 9 Jan 1999 15:45:01 -0500 (EST)
Subject: rnorm() with sd=0
Message-ID: <Pine.SUN.3.95.990109153854.8182A-100000@paca>


  Is there a compelling reason why

rnorm(1,mean=m,sd=0)

can't return m instead of NaN?

  The following (trivial) patch makes the change.

*** rnorm.c.orig	Sat Jan  9 15:39:41 1999
--- rnorm.c	Sat Jan  9 15:39:50 1999
***************
*** 35,43 ****
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma <= 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     }
!     return mu + sigma * snorm();
  }
--- 35,46 ----
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma < 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     } else
!     if (sigma==0.0)
!        return mu;
!     else 
!        return mu + sigma * snorm();
  }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 12 11:08:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 12 Jan 1999 11:08:13 +0000 (GMT)
Subject: [R] RH5.2 bundle
In-Reply-To: <Pine.LNX.3.95.990112083226.2868B-100000@mercury.quantex>
Message-ID: <Pine.GSO.4.05.9901121058350.5602-100000@auk.stats>

[I've changed my followup here as some of this is slightly sensitive.]

On Tue, 12 Jan 1999, John Logsdon wrote:

> The web is a very useful device - we can live for ages on the
> laser-printouts but even with a binder, these are not as convenient as a
> real book with examples.  I have in mind the excellent manual for GLIM
> (although rather big) which comes with the (commercial) product but is
> much more than a user manual. Robert and Ross's R Notes, Kurt's FAQ and
> others could form a basis.  The V&R notes, V&S on S(R) could be added and
> some extensive examples such as from Jim Lindsey's repeated measures
> library. I know code modification is seductive but there comes a time in
> any job where the Report just has to be written!

We have discussed an R version of the V&R book (don't know about `V&R
notes' etc -- did that mean our R complements) or including R in the base
version. At least for now it is not thought commercially viable, and there
is also the question of how this would be seen by MathSoft. Volume 1 of the
Third Edition of V&R will run on R virtually unchanged (a large number of
data() statements needed) where the capabilities exist in R (e.g. no nlme,
nls arima.mle etc, yet), and that is due out in July. We plan that Volume 2
will discuss R as one of several `S engines'.

A book about R would be great, but don't understimate the on-going effort
required: keeping our `R complements' current takes an appreciable amount
of time.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 15:15:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 16:15:00 +0100
Subject: Intro notes (1st pass, not for general circ.)
Message-ID: <x21zkz5hmz.fsf@blueberry.kubism.ku.dk>

I've just gotten through translating my notes for the course in basic
statistics for health researchers. I've placed a copy on

ftp://blueberry.kubism.ku.dk/priv/R-intro.tgz

This is essentially a translation of the Danish notes that I wrote
during the Autumn of 1997 for use with Rsept, i.e. roughly R v.50.
They lean heavily on the textbook, Altman: Practical Statistics for
Medical Research. Chapman and Hall, 1991.

For now, this is mainly for information purposes and not for further
redistribution. I haven't yet investigated the possibilities of
getting it published as a real book (ISBN, y'know), so I wouldn't know
what the copyright implications would be. Also, and maybe more
importantly, I haven't yet asked anyone for permission to use their
data in a publication of any sort. I wouldn't expect any problems in
that area (there is no direct reproduction), but one cannot be too
sure.

In their present state, the notes are full of errors; typos, language
and otherwise. I know that and I'm not particularly interested in
being told about them at the present stage, since I'll be going over
the entire stack with a red pencil anyway. General comments and
constructive criticism are welcome, though. 

A couple of important things have changed in the later versions of R,
and I'll be upgrading the student machines to the Win32 version of
0.63.1 (or .2, depending on availability), so the notes are actually
already out of date (the predict() examples are particularly bad).
[Slightly weird feeling to translate stuff you know is wrong, but I
needed to have the work processes separate, and also to have a common
base in Danish and English in order to maintain future parallel
versions.]

The current version (in both languages) also suffers from a haphazard
reversion of the anova and regression analysis sections [caused by
teacher scheduling problems in the Spring98 semester], which is not
really pedagogically sound and introduced a couple of sequencing
errors in the examples -- values geting used before they were
computed... I'll be putting them back in proper order.

I plan to make a proper R package "Rx" out of the extension functions
and example/exercise data. A preliminary version (functions and docs
only) is in ftp://blueberry.kubism.ku.dk/priv/Rx.tgz

The data sets are in ftp://blueberry.kubism.ku.dk/pub/*.txt

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 18:41:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 13:41:05 -0500
Subject: make docs
Message-ID: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>

I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)

Paul Gilbert
______

g77 -O2 -fPIC -c kmns.f -o kmns.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
Building system startup profile
You should `make docs' now ...
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[17] /home/res/gilp/R-versions/R-0.63.2 : which perl
/usr/bin/perl
[18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

This is perl, version 5.004_04 built for sun4-solaris

Copyright 1987-1997, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5.0 source kit.

[19] /home/res/gilp/R-versions/R-0.63.2 : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10[20]
[20]/home/res/gilp/R-versions/R-0.63.2 : make doc
`doc' is up to date.
[21] /home/res/gilp/R-versions/R-0.63.2 : make docs
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[22] /home/res/gilp/R-versions/R-0.63.2 :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan 13 19:01:55 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 13 Jan 1999 11:01:55 -0800 (PST)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.03.9901131100570.10137-100000@wompom.biostat.washington.edu>

On Wed, 13 Jan 1999, Paul Gilbert wrote:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> 
> Paul Gilbert
> ______
> 
> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'

I had this problem with Solaris make but it went away when I used GNU
make.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 13 19:06:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 13 Jan 1999 20:06:28 +0100 (CET)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
References: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <13980.61108.345749.14672@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> Paul Gilbert
> ______

> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'
> Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
> [17] /home/res/gilp/R-versions/R-0.63.2 : which perl
> /usr/bin/perl
> [18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

src/library/Makefile has */man/*.Rd wildcards.  You may  need GNU make
to build the docs.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 20:01:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 15:01:05 -0500
Subject: make docs
Message-ID: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>

How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
switch back because

PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi

works to conditionally set a variable in Sun make but not in gnu. Does anyone
know how to do an equivalent thing in gnu make?

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 21:44:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 22:44:50 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Wed, 13 Jan 1999 15:01:05 -0500
References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <x2pv8ic0fh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> switch back because
> 
> PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> 
> works to conditionally set a variable in Sun make but not in gnu. Does anyone
> know how to do an equivalent thing in gnu make?

PADI_HOME=$(shell if [ ....)

or something like that. 

I suspect, by the way, that the whole thing might be better written as 

PADI_HOME=$(shell ${PADI_HOME-$PWD})

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jan 14 00:56:06 1999
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 13 Jan 1999 19:56:06 -0500
Subject: make docs
Message-ID: <199901140057.BAA25116@hypatia.math.ethz.ch>


The following should do what you want (assuming I understand the problem)

 ifndef PADI_HOME
   PADI_HOME=$(shell pwd)
   # or PADI_HOME=${PWD}
 endif

GNU make even allows you determine the source of the value of the
variable - environment, command line, automatic variable, etc.
via the origin function

ifeq "$(orgin PADI_HOME)" "environment"
  # do something.
endif


I can't remember if Gmake guarantees that the 
execution of the shell will give a Bourne shell.
I presume it will use the current value of SHELL
and so the following
     PADI_HOME=$(shell ${PADI_HOME-$PWD})
may not be as robust as the internal gmake solutions.



Duncan


> Cc: R-devel <stat.math.ethz.ch!R-devel>
> References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
> From: Peter Dalgaard BSA <biostat.ku.dk!p.dalgaard>
> Date: 13 Jan 1999 22:44:50 +0100
> Lines: 23
> Sender: stat.math.ethz.ch!owner-r-devel
> Precedence: bulk
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> > switch back because
> > 
> > PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> > 
> > works to conditionally set a variable in Sun make but not in gnu. Does anyone
> > know how to do an equivalent thing in gnu make?
> 
> PADI_HOME=$(shell if [ ....)
> 
> or something like that. 
> 
> I suspect, by the way, that the whole thing might be better written as 
> 
> PADI_HOME=$(shell ${PADI_HOME-$PWD})
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 14 11:21:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Jan 1999 12:21:42 +0100
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
Message-ID: <199901141121.MAA08865@sophie.ethz.ch>

Just for the fun of it (actually in order to test some Fortran more
extensively), 
I've compiled and installed  g77, yesterday on our Solaris 2.5.1 machines.

After doing (in R's toplevel directory)
	make distclean
	./configure
now chooses  g77 (instead of Sun's f77 which was chosen before).
I now do
	make
	make check
	cd tests/Examples
and carefully compare  base-Ex.Rout  to an earlier version of base-Ex.Rout.
I've found the following problem

   Rg77> 0^-1
   [1] -Inf

instead of  {+}Inf  which was correctly returned before.

[[I also had  that "make compare" after g77's installation
  gave output of some differences, i.e., my g77 supposedly *does* have bugs.]]
--
Just to be sure:
Can some of you, particularly those for which 
	grep g77 config.cache
returns something, verify  that 

	0^-1 == Inf

and those who get something else report this (either to me or to R-devel)?

Thanks in advance.
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 14 14:53:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Jan 1999 09:53:14 -0500
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
References: <199901141121.MAA08865@sophie.ethz.ch>
Message-ID: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>

Martin

I get -Inf in Solaris 5.6 with g77.

Paul
______

[1] /home/res4/gilp : grep g77 R/config.cache
ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
[2] /home/res4/gilp : rm .RData
.RData: No such file or directory
[3] /home/res4/gilp : R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type "?contributors" for a list.

Type "demo()" for some demos, "help()" for on-line help, or
     "help.start()" for a HTML browser interface to help.
Type "q()" to quit R.

> 0^-1
[1] -Inf
> q()
Save workspace image? [y/n/c]: n
[4] /home/res4/gilp : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

[6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
GNU Fortran 0.5.23


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 14 15:53:23 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 14 Jan 1999 16:53:23 +0100 (CET)
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
In-Reply-To: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
References: <199901141121.MAA08865@sophie.ethz.ch>
 <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
Message-ID: <13982.4851.195927.799312@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> Martin
> I get -Inf in Solaris 5.6 with g77.

> Paul
> ______

> [1] /home/res4/gilp : grep g77 R/config.cache
> ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
> [2] /home/res4/gilp : rm .RData
> .RData: No such file or directory
> [3] /home/res4/gilp : R

> R : Copyright 1999, The R Development Core Team
> Version 0.63.2  (January 12, 1999)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type "?license" or "?licence" for distribution details.

> R is a collaborative project with many contributors.
> Type "?contributors" for a list.

> Type "demo()" for some demos, "help()" for on-line help, or
>      "help.start()" for a HTML browser interface to help.
> Type "q()" to quit R.

>> 0^-1
> [1] -Inf
>> q()
> Save workspace image? [y/n/c]: n
> [4] /home/res4/gilp : uname -a
> SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

> [6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
> GNU Fortran 0.5.23

Debian GNU/Linux 2.0,

hornik@pc87:~/src/apps/R/r-release$ g77 --version
egcs-2.90.29 980515 (egcs-1.0.3 release)

R> 0^-1
[1] Inf

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 15 17:15:34 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Jan 1999 17:15:34 +0000 (GMT)
Subject: Some outer() suggestions
Message-ID: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-342241519-916419809=:25543
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.GSO.3.96.990115171305.25543M@laplace>

I attach outer.tar.gz which contains outer() as extended for arrays, after
noting the suggestion made in the current help file for outer().  It also
has kronecker() and, to help with function matching, match.fun(). 
Documentation is also included.  Note that in the documentation for
match.fun() I suggest that this be used within functions such as apply(),
tapply() etc, and sweep().  Just a suggestion! 

I hope these are helpful.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


---559023410-342241519-916419809=:25543
Content-Type: APPLICATION/octet-stream; name="outer.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990115171534.25543N@laplace>
Content-Description: 

H4sICEJwnzYAA291dGVyLnRhcgDtWVtv2zgW7mv0KzguCtiF6rUdx9ltJw+Z
AQLMLLIDJB1MjLoPjMXYqmlRJaVc1tB/3++QtC620+ylaRe75kMiiefGcw4P
z2cueTadd2/ypHvx4rlGr9/rjYbDF71eb9A/Gtj/w4F9t2NE30aj4fFodDzq
HeJ7/3Bw3HvRezaLaiM3GddQGS1579NUP0qH+S/K6dlVHbpF9Q+/tpnPNZbr
+LMf3zD8m2axSlj77Pe/hSwSZiqSiJ2wsw4LVgHzI75h7dh0p3Ou+TQTmqg7
oGAbYyYyJ2ipIgEprbX8VqekFdIIK5BorCD2Q4OSrbbkgoqsjUTKtRFtk1+b
LM7yzPF3tuhJvF/LDiv/FWsbVptMpe2UG+htTVqtkFluPLLYsERljJcOxeSj
eo1ISVurZnjRdA/kBkXwzPHvXkTPo+HJ/T84PDyu9n9/ZPf/cDjY7/9vMCYJ
X4pVmQVFEEywl6RYndOnMoENu9FqWRUI7DzwYe8b4sgNn9WENKrHyVmHSLiM
uWnq4XqWL0WSGezwSZyJ5Qp8xerM6wiZmDFuoMoYEbFMsckUO3OlsNF10S3W
TF5PsfpZJZlWkt3NRTYXmjiM4BqryJMI74lK3pQLUNefxDQzEEOmkAwdpzSz
CuzKhfHqyCYSVW3mkDRoUZ+f8oRdC8aDsiZa6x1F63WrCMFfzqFy6DiZ1Ulu
tIhAFSjdUFQSpEt+X3QZuxBZrhEN6BNagxq1LVHM+hUig3J9KEE3CuvuBsEv
N17IOiLvYY77UsWD3cVSMqnUwnkrETybB7tcBspszuBhNotvRcIogd4xRS6/
i10xrzwTpCpGhJ0Dd0gjOUltNQZlOBGaZ4Isv8xnM2GIiNMfzMLJcTKVeYSM
iOFzDoVVjpocweYmcPp5msqHAsIja62MFyJs5JCdch/MnRApJVUwueUyF6vT
KtfXzq0HHLauDa2CYdl5ns2VXv2qEjgQMxcqn8VQhikjrMDVT/nsT2fwb65F
sQpOa4mx3hJVtlttWDiXd/zBOFvcbuBBLU8oEHB8ZhOTyHc6ex7PaGPkKREG
fnPIGB4uY2oQTRvSrrNYcGnUytkykXGy8DkDS4uCSMQ9X6ZSYBO/ZJfEzI09
SpH1naAqCfb1JfvtFlmisW+ZDYHTy9ktrFM6cN9wtPffHtV47efO5od6f/K+
ocpOQx3M+97l9b9+WF89Y+9P44nzv987Gm72/4Oj4b7//xaj3HJV738VsrFt
ZqktfY3WtdvtNvp/3383zvuqeb2iOW5QITR/aF91NmFDkkvZTu5tBx8vqdQY
UO3CD47I1YZ2i+oUjJEimWXzNlgtV8k0bqgdP6L2oaF2vFvtw5fVjutq8cEQ
+dRbFDJP0jRMi7QNp9I/L4lI/WND4NWa/Go930WMEIqKuKTVqOt22XbNiIKP
HQXMGmIahrpFE1PHmZzch1htUx5VzdYr9apFJN1TatvWBfh75+p+fP3h6/+z
YT8aT+G/3lG/hv+Obf0/7h3v6/83GA7/uX64xH6/2UMh1SrK0TWqG1dgalDP
dWrVSXFSnhPBPZu8UpNX7CGoYJ8X797adr6zEwBeFWi8XeWlFtuqrZDe+Iuz
FjxW4Ila5BzogJ7m63bTL8mELM5wfj0AT9TKP2efcwXk4fFZJXoSqcwUK2UB
Ipdlm25xDSDJJkQlU3Yhy/ebhpBvyTrnX899VQcmY9v9U7tuafzX08J1zijq
IjG0Wvd96xQqHFYNhBQWV3j2D3HIPtmAhWyBc8Y+fqQf+ugMqWY/IsAfLEHg
3ijEhENr4GSJHWTBb+X6u3kMYCHuU4sXeRZIwQnG3ama62iNjlClHkh5Ky2M
hBjnFeDAPyysgRMeIBTncWidtj7RyIm7PWcxLUKcamGEvrWY0kMZykEHrNa+
c2ddAdismyixvQn3A8B9+n0PiwZ0S2YIvf11pIL7naeh4DawWmiViOkCBFvA
6jyXWZzKeMpdavNrKfweBFQKCS8BXZ1i7Ryu0UIwoEVEZpvrB8+2wexF4I/f
vo2nPZL6nx1l0n3H+5/jHfc/h8f9/fn/DUYZ/38CAwICHmyhu4Mt4HXwEgdi
5A6oPMFBazESYJgWn/NYiyg4kBExNaEce7MBsoIDgm4y+rGHxwNH1YRaBJP6
IXsjI6KmuxJPOK4RjitCR6dSD5s2mhi/SJgfpXQyiBkkDFEZQ4YqOQjZKGSH
mMcsmI343OZSJTN4aOvYLangFw8kszbwso7v21EK0DVV8mTQ+RCCdRD2Ox8b
dnGch8u2fYXElITF/r3j8Su54rXX5jkdcFvoBnIrw/sYeqvt/+92/zMYjbbu
f45oKz2XQfXxf77/Xf9ftR4lBvhrWRjWTXPVktWAQMm5EwxcoYdYaDQR4xoa
qCnzXxzR7juhrwgJ3lVd//P3+j+rZZpTU2tvSuxdgYyJc7HpWAsCbGtMvg2D
nb1s2XM3HY4GX1dXQlZC8AhEWMOLjepRvK1ubJzOoOyfI2Xvsef8VtQuB/Ll
NYyH0ZVo15CbJZdSaI9UYrq6i+iiZtMOsJr479Tii3JZMHeKOTT3JqD5/NqW
yykcSN8z+AmSrh/QxS6quxgYDCEMZXwJmEHNL7QE5DeAD/wjSnd5ZClqd3rt
+/KXsqKGCmwePgELqvz10CBo3gQ+BQ1srmhxA84E66ObVpwL7FTOxLXm7Hcj
bnJp9V1m6NxNFk/h4Ms5f0DTf9Fll4JrKUL2q5on7I9YAhXRii9tHPp/+fPg
3wEfDutsAQ8T0yMzUy653gAUwbn/FZhOtf7bUXmsvWPnATKhOnzoFD3vnJwM
kXXndA30k1TTBVKCz/weo7ytyGmiTaAExP55XUjOyXt7MLIf+7Ef+/Efj38A
iJfMzAAqAAA=
---559023410-342241519-916419809=:25543--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NJOSEPHY@bentley.edu  Sat Jan 16 15:38:47 1999
From: NJOSEPHY@bentley.edu (Norm Josephy)
Date: Sat, 16 Jan 1999 10:38:47 -0500 (EST)
Subject: Core dump on sapply misuse
Message-ID: <01J6LT7685AQ000W0X@bentley.edu>

Developers:

I hope this is the appropriate place to post this request. 

I am getting a core dump in an application of sapply.  A 
simplified example is the following.  Because simplify=TRUE 
is the default for sapply and tapply, the following works

	x <- 1:5; sapply(x,list)

but the following dumps core with an access violation

	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
	
I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
and am also experiencing the 'impossible to access 
clipboard' problem with graphics under NT but not under 
Win95).

Could a gentler message be encoded (e.g. a check after the 
call to lapply) to inform the user that sapply (and tapply) 
is being abused?  A core dump seems a rather harsh caveat 
emptor.

Thank you

Norman Josephy
Department Of Mathematical Sciences
Bentley College
Waltham, MA

E-Mail:  NJOSEPHY@BENTLEY.EDU
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 13:26:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 14:26:18 +0100
Subject: Core dump on sapply misuse
In-Reply-To: Norm Josephy's message of Sat, 16 Jan 1999 10:38:47 -0500 (EST)
References: <01J6LT7685AQ000W0X@bentley.edu>
Message-ID: <x2n23i1151.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Developers:
> 
> I hope this is the appropriate place to post this request. 
> 
> I am getting a core dump in an application of sapply.  A 
> simplified example is the following.  Because simplify=TRUE 
> is the default for sapply and tapply, the following works
> 
> 	x <- 1:5; sapply(x,list)
> 
> but the following dumps core with an access violation
> 
> 	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
> 	
> I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
> and am also experiencing the 'impossible to access 
> clipboard' problem with graphics under NT but not under 
> Win95).

I believe that one got fixed in 0.63.2. My pre-0.63.3 snapshot gives

> x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
     [,1]        [,2]        [,3]        [,4]        [,5]       
[1,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"
[2,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"

The bug was in the printing of "odd objects". Whether the above is a
sane representation of

> dput(sapply(x,myf))
structure(list(1, 1, 2, 2, 3, 3, 4, 4, 5, 5), .Dim = c(2, 5),
.Dimnames = list(NULL, NULL))

may still be open for debate, but at least the core dump is gone.

An NT version of 0.63.2 will be out when Guido finds the time. As I
understand the situation, this could be rather soon, unless he also
tries to fix the clipboard problem...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 18:27:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 19:27:02 +0100
Subject: Other core dumps, with apologies
In-Reply-To: Norm Josephy's message of Sun, 17 Jan 1999 11:12:27 -0500 (EST)
References: <01J6N8O8BIHE0000VI@bentley.edu>
Message-ID: <x2emotzrex.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Sir:
> 
> I hope you do not mind me sending e-mail directly to you 
> rather than to the developer's list.  I wish to avoid 
> unnecessary traffic on the list when the issue I raise may 
> have already been fixed.

As a matter of principle: I *do* mind. One of the purposes of having a
list is that not everyone has the time to deal with questions at any
point in time. If you single out one person, you are in effect forcing
him either to write at least a polite reply explaining that he's busy
or impolitely ignore you...

But never mind: I'll just bounce you onto the list.

> There are two other places where I have induced a core dump.
> 
> x1 <- 1:10
> f1 <- cut(x,5); f2 <- cut(x,4); f3 <- cut(x,3)
> as.matrix(list(f1,f2,f3))
> ----------------------------------------------------
> 
> Just after start-up, as the first expression issued:
> 
> strwidth("abcd")
> -----------------------------------------------------
> 
> One other place: where the documentation says that f1:f2 
> works when f1,f2 are factors
> 
> f1 <- gl(3,2)
> f2 <- gl(2,3)
> f1:f2
> 
> It doesn't core dump, but it doesn't seem to do anything 
> useful either. Is the intent to create what 
> tapply(1:6,list(f1,f2)) creates?
> ------------------------------------------------------
> 
> I am starting this week to teach a 'graphical EDA using R' 
> course to undergrauate business students with very little 
> math or computer language experience.  I have been 
> intentionally 'abusing' R to look for places that my 
> students might inadvertenly stumble into. The focus on the 
> course is graphical exploration of data, and data 
> manipulation will be an important component of my students 
> learning experience.
> 
> If I may, a personal comment about tapply.  This may be just 
> something that I don't understand fully.  If this is just my 
> confusion, or it no longer happens in the latest version, 
> ignore my comments with my apologies.
> 
> The core dump situation I described in my previous post came 
> up in my attempt to 'generalize' the tapply function.  In 
> looking at ways to teach R, it seemed that tapply would 
> accept a list of factors if the function being applied 
> returned a scalar, or a single factor if the function being 
> applied returned a vector, but it core dumped if it was used 
> as
> 
> tapply(x,listOfFactors,vectorReturningFunction)
> 
> My naive solution was :
> 
> j <- tapply(x, listOfFactors) # get the product factor
> answer <- tapply(x,j,vectorReturningFunction)
> .... CODE TO GET THE LABELS RIGHT ....
> ansmat <- array(unlist(answer), dim=someStuff, 
>  dimnames=otherStuff))
>  
>  
> The 'flexibility' of being passed back different structures 
> (list, vector, matrix) depending upon the input structures 
> somewhat complicates the explanation of the functions' 
> usage.  Uniformly returning a properly labelled array, in my 
> naive way of looking at things, might have some merit.
> 
> Although I am not new to programming (started as an 
> undergraduate engineer in the early 60's) I am new to user 
> group lists on the Internet. I don't know what the proper 
> 'group etiquette' is on things like code bombing questions.
> 
> Thank you,
> 
> 
> Norm
> 
> Norman Josephy
> Department of Mathematical Sciences
> Bentley College
> Waltham, MA
> U.S.A.
> 
> E-Mail:  NJOSEPHY@BENTLEY.EDU
> 
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 18 13:53:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Jan 1999 14:53:24 +0100
Subject: Some outer() suggestions
In-Reply-To: <Pine.GSO.3.96.990115171305.25543K-101000@laplace> (message from
 Jonathan Rougier on Fri, 15 Jan 1999 17:15:34 +0000 (GMT))
References: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>
Message-ID: <199901181353.OAA04395@sophie.ethz.ch>

Thank you Jonathan, 
for your submitted suggestions.

to have a more generally working (and [dim]names preserving) "outer()"  has
been (some where low) on my todo list, for a while now.

----
Something for all R package / code writers :
	  --------------------------------
When writing  *.Rd files {aka man pages}:
Please use at least one \keyword{...} line at the end
(use a keyword from  R.../doc/KEYWORDS
  ... are these in the Windows version?)
These are important for several indices (and may become more important in
the future).

---
A few more remarks of (half) general interest:

- Concerning "kronecker",  couldn't we use

    %x%

  as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
  Does anyone see a reason against it?

- match.fun() [your new proposal]:

  Why should it give an error [stop()] instead of return NA or NULL or
  something like that when there's no function match ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Mon Jan 18 14:06:49 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Mon, 18 Jan 1999 14:06:49 +0000 (GMT)
Subject: Some outer() suggestions
In-Reply-To: <199901181353.OAA04395@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990118135942.29339A-100000@laplace>

Hi Martin,

On Mon, 18 Jan 1999, Martin Maechler wrote:

> - Concerning "kronecker",  couldn't we use
> 
>     %x%
> 
>   as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
>   Does anyone see a reason against it?

That's a good idea!

> - match.fun() [your new proposal]:
> 
>   Why should it give an error [stop()] instead of return NA or NULL or
>   something like that when there's no function match ?

There is no compelling reason: the rather brutal error is because I was
concerned to duplicate the procedure in apply().  Hence I used get()
directly, rather than checking for existence first.  But I agree that a
NULL return would be more flexible.  I'd be happy to rewrite.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 19 14:32:22 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Jan 1999 15:32:22 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901191432.PAA21802@sophie.ethz.ch>

There's a non-compatibility between R and S-plus
with the default argument of the
	 locator()
function.

R has		locator(n=1)
S-plus has	locator(n=500, type="n", noclick=F)

S's default is ``better'' I think, insofar as it means in 99% of the cases
	``user clicks <left> as many times as wanted
	  and then clicks <right> to end''

Ross Ihaka and his grad students are working on improving this interface, I
believe, however, I'd propose to just change

the default of n=1 to n=500 
(or another "large" integer in order to not copy S exactly).


Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 11:50:47 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 11:50:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-162216788-916833047=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

On my R installation (0.62.4) there is no dist() function, so I attach one
possibility.  It provides Euclidean distances only, but it does compute
dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
values; naturally dist(X, X) gives the full distance matrix of X.

Hope this is useful, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-162216788-916833047=:29339
Content-Type: APPLICATION/octet-stream; name="dist.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990120115047.29339I@laplace>
Content-Description: 

H4sICOC/pTYAA2Rpc3QudGFyAO1W32/bNhDua/VX3FIUkAbFkOw4A7rloSha
oHsp0L5YiFOAlmiFi0SpJBU7E/y/9470z1ZyU2DZ9uB7sEne8eN3xxPvMqHN
4OOzJ5UojqLLi4tnURQN4/HQ/l8M7TyyayNcu7wcx6PRb2O7Hg9HtPa0tJw0
2jCFR2Yli/5KVa8d6o/iWE8uRs6pePRP03wqyfD+4Y9zmDcyNaKS4E9CSALw
Wg/2ZEI2TA9KZpRY+pPgQCvm4JdCayFzPwkCONy7kYQwJp2qO1JJVS2+Rd6I
tAZpVfQZZCVZZILl/l23hXVhck2HZGVwXVQLrgboDc1uQgghU1V99e6mn3ty
TQR+frO6Z8U6fvc8NZXy/QkgXPB5CC9/fQmK134cggy6iTNjlE8YIZx9En/z
s4DA7g5sVwczXmh+7BJ2F5n0RFOUyweyTH0cYsyvY/SShgkNuzdRFhRc5ubW
t9fVSPGl4f4WYriDGN4EmCa/XEEn0Ebi4Lhem6r2z95jWpQ1M2JWcLBupVyf
9fglbZoUmPTESrKSa6KGPjlybiVxK8fziC7tlQ3UJjg4QscemUr7+ykyNO9A
+yHcJrl6Uqrvem1CBe6bwaP6zFw8drayPJJ2+osyztZbed5//bKd5DGS2fqf
PekZP6j/8fhyr/6PXP0fR+NT/f8XZEpfeEtZgJ/s1AhT8PZtkxYi40wCrTOZ
ctI1muXO0rUItMYKwfR2N1N5U3JpNJaeqTC8bCer9rV7k5dQzaGuBGoHq406
QbWszC1X4Fc1tR/0znTYr7xpxnWqhDVqvTf44jeGA26F79nCjJsF59KqHQYI
CdO0yjhSAiYzr0uVrAYA7+fbGQgN67YmJCwJlSweaOTZBuAceTKZNwVTUDNl
iDLhbnnsPNmeLbSXOvLZgGKGr2XDWw9PnWEgDjjueDDFIRf3XIbAOtA9fKi5
1NS9uS09VZvc+0DRXgjsDxi4ZsQBOEwNRE4Jctm68ig/ve/9DGEh0B1qXcSM
bsopqH1ZkSsbfNmUM6483Il9md5HsNFhjbmtVPsnJoa5xRv+WDW54IpUfMnK
uuCYazYl41fjEPAn8F6Ayw46gkHOGrxA3JpWSvGC2R7X8fVsJV83Qgq7lbk/
jrDeUpt5FUfB79is8mXtn7ucx9IaPH/+Apunbej21SE4i7XB+ghiescfFpXK
WqYUe1id6uJJTnKS/4l8BbYXpwQAEgAA
---559023410-162216788-916833047=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 11:53:48 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 12:53:48 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
References: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
Message-ID: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 11:50:47 +0000 (GMT),
>>>>> Jonathan Rougier (JR) wrote:

JR> On my R installation (0.62.4) there is no dist() function, so I attach one
JR> possibility.  It provides Euclidean distances only, but it does compute
JR> dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
JR> values; naturally dist(X, X) gives the full distance matrix of X.

dist is contained in the mva package which comes with (base) R. it
provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
`"binary"' distances both in matrix and triangular form.

I couldn't open the tar file you attached, so I couldn't check your
version.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 12:03:38 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
Subject: dist function suggestion
In-Reply-To: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.3.96.990120115916.29339J-100000@laplace>

On Wed, 20 Jan 1999, Friedrich Leisch wrote:

> dist is contained in the mva package which comes with (base) R. it
> provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> `"binary"' distances both in matrix and triangular form.

Thanks Fritz, but could I still make a general plea for a dist() that
takes one OR two matrices?  I often need to find dist(X, Y) as a
rectangular matrix (eg covariance calculations), and it is very
inefficient to use dist(rbind(X, Y))  and then discard most of it. 
Cheers, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:09:47 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:09:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <199901201309.NAA17441@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> cc: r-devel@stat.math.ethz.ch
> Subject: Re: dist function suggestion
> 
> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
> 
> > dist is contained in the mva package which comes with (base) R. it
> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> > `"binary"' distances both in matrix and triangular form.
> 
> Thanks Fritz, but could I still make a general plea for a dist() that
> takes one OR two matrices?  I often need to find dist(X, Y) as a
> rectangular matrix (eg covariance calculations), and it is very
> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

You will need to call it something else: dist is a clone of an S function,
and dist(X, "manhattan") is well-established usage.

I pointed out to R-core recently that "euclidian" will cause problems
for those who know how to spell it .... (-ean in my dictionaries, and
in S).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 13:22:45 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 14:22:45 +0100
Subject: dist(*, "euclidean") [was "dist function suggestion"]
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Wed, 20 Jan 1999 13:09:47 +0000 (GMT))
Message-ID: <199901201322.OAA04170@sophie.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
    >> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
    >> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> cc: r-devel@stat.math.ethz.ch
    >> Subject: Re: dist function suggestion
    >> 
    >> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
    >> 
    >> > dist is contained in the mva package which comes with (base) R. it
    >> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
    >> > `"binary"' distances both in matrix and triangular form.
    >> 
    >> Thanks Fritz, but could I still make a general plea for a dist() that
    >> takes one OR two matrices?  I often need to find dist(X, Y) as a
    >> rectangular matrix (eg covariance calculations), and it is very
    >> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

    BDR> You will need to call it something else: dist is a clone of an S
    BDR> function, and dist(X, "manhattan") is well-established usage.

one could still imagine an extra Y argument such that
	dist(X, Y=myY, method="euclidean")
and	dist(X, "euclidean", Y=myY)
would work
one could even make it such that
both
	dist(X, myY)
and	dist(X, "euclidean")
would work.  However, the extra hack for 	dist(X, Y)
may not be worth the pain.

    BDR> I pointed out to R-core recently that "euclidian" will cause
    BDR> problems for those who know how to spell it .... (-ean in my
    BDR> dictionaries, and in S).

Yes, thank you;  for me, I've considered this a bug report.
Hopefully nobody has currently code relying on the wrong spelling...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 13:24:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 14:24:43 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
References: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
Message-ID: <13989.55579.607229.939868@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 13:09:47 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
>> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
>> cc: r-devel@stat.math.ethz.ch
>> Subject: Re: dist function suggestion
>>=20
>> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
>>=20
>> > dist is contained in the mva package which comes with (base) R. it
>> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
>> > `"binary"' distances both in matrix and triangular form.
>>=20
>> Thanks Fritz, but could I still make a general plea for a dist() that
>> takes one OR two matrices?  I often need to find dist(X, Y) as a
>> rectangular matrix (eg covariance calculations), and it is very
>> inefficient to use dist(rbind(X, Y))  and then discard most of it.=20

PBR> You will need to call it something else: dist is a clone of an S fun=
ction,
PBR> and dist(X, "manhattan") is well-established usage.

well, I don't think we need to call it something different, it's just
that the y argument may not be the 2nd one ...=20



PBR> I pointed out to R-core recently that "euclidian" will cause problem=
s
PBR> for those who know how to spell it .... (-ean in my dictionaries, an=
d
PBR> in S).

fixed (now both are legal)

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:48:53 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:48:53 +0000 (GMT)
Subject: dist(*, "euclidean") [was "dist function suggestion"]
Message-ID: <199901201348.NAA17744@toucan.stats.ox.ac.uk>

>     BDR> You will need to call it something else: dist is a clone of an S
>     BDR> function, and dist(X, "manhattan") is well-established usage.
> 
> one could still imagine an extra Y argument such that
> 	dist(X, Y=myY, method="euclidean")
> and	dist(X, "euclidean", Y=myY)
> would work
> one could even make it such that
> both
> 	dist(X, myY)
> and	dist(X, "euclidean")
> would work.  However, the extra hack for 	dist(X, Y)

Um, I did think about that, but precisely what would be rules be?
For now the second argument can be anything coercable to a character
(why is match.arg not used?), or should be since ?pmatch says

       x: the values to be matched.

without mentioning mode, although the internal code has isString
(whatever precisely that is).  In particular, names fail in R but not
S, although as documented they should work in R but not S:

> pmatch(as.name("test"), "test")
Error in pmatch(x, table, duplicates.ok) : argument is not of mode character

So at present if the second argument is a character matrix it works.
And there is an as.matrix on X.  So what do you want Y to be?
numeric?  (At present I can have X as a data frame with factors, e.g.
dist(data.frame(factor(1:10)))!)  matrix?  ?

While I am at it

> X <- c(Inf, 0, 0)
> library(mva)
> dist(X)
Error: NAs in foreign function call (arg 1)

is confusing: the error message is caused by Infs too.  (I found this
when writing a version of dist to handle NAs as S's does: the bare code is
now an example in the V&R R complements.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 16:39:34 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 17:39:34 +0100
Subject: data frames with non-unique  row.names
Message-ID: <199901201639.RAA17204@sophie.ethz.ch>

In R and S, the general idea is that data.frames 
must have unique  row.names (aka dimnames(.)[[1]]).

Several observations / problems  (in R *and* S !).

	[Example code at the end]

1)
  Both in S and R,

	  data.frame(..)

  (and e.g., also  cbind(<data.frame>, ..)  which dispatches to data.frame())
  silently drops the whole row.names and replaces it by "1" "2" ...
  if the names would be non-unique.

 PROPOSITION 1:  I have the feeling I'd want to get a warning in that case.
		However, you may prove me wrong... 

2)
   Now, in S (but not in R),
   the  "row.names<-"  function
   gives an error if you try to assign non-unique row.names.

   This is as desired (and R should do the same).

   (== BUG REPORT for R )
   
3) However, I can still  (both in S-plus 3.4 & 5.0r2)
   do
	attr(dat, "row.names") <-  <nonunique character>
  
   and get a resulting data.frame  dat   with non-unique row.names.

 PROPOSITION 2:  I think I want to make sure that a(the same?) error message
		 as in "2)" is generated in this case.

	(this is relatively easily accomplished via R's 
	 SetAttrib() in src/main/attrib.c)

------------------------------------------------------------------
>>>> or am I completely wrong, and there should be a way you can
>>>> construct a data.frame with non-unique row.names ???
------------------------------------------------------------------


Here are the S/R examples: 

## 1)
    dat <- d0 <- matrix(1:12, 3,4)
    dimnames(dat) <- list(c("r","r","r.3"),paste.i("V",4))
    dat
    data.frame(dat)# silently drops the row.names --- S == R

## 2)
    ### Now duplicated row.names:
    dat2 <- data.frame(d0); dimnames(dat2)[2] <- list(paste.i("V",4))
    (d2 <- dat2)

    ## Here, S gives the proper error message "... duplicate names" :
    ## R 0.63.2 simply accepts it;
    row.names(dat2) <-c("s","s","s.3") ; dat2

## 3)

    ## can we trick it (in S)?
    (dat2 <- d2)
    attr(dat2, "row.names") <-c("r","r","r.3") ; dat2
    row.names(dat2)[duplicated(row.names(dat2))]
    ## yes, S-plus 3.4 / 5.0r2 are tricked!!

Comments / suggestions / oppinions are very welcome!
(if not the 2 mailing lists, I'll summarize to them )
---

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 17:04:04 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 12:04:04 -0500
Subject: pow__ii
Message-ID: <99Jan20.122558est.13449@mailgate.bank-banque-canada.ca>

> R code works but the shared objects built from fortran code do not find
> the appropriate libs with functions like  __pow_ii or __epx at runtime.

I used to have endless trouble with  __pow_ii which as I recall could be be
fixed by the correct incantation of the mix of compiler libraries and
LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
right. The problem is that pow_ii is not used by R itself, and so when your
fortran code does something like 4**2 (or using variables declared as integer)
then a call to pow_ii is generated and you need to find the correct library. I
eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
routine which is used by R itself, and I never had to worry about the libraries
again.

This also worked better with Splus, which can also be problematic in this
regard. I highly recommend this change to anyone distributing fortran code with
a package.

I'm not sure about __epx.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 17:06:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 18:06:33 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201648.RAA21726@biostat.ku.dk>
 (maechler@stat.math.ethz.ch)
Message-ID: <199901201706.SAA17261@sophie.ethz.ch>

(following up on myself:)

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In R and S, the general idea is that data.frames 
    MM> must have unique  row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems  (in R *and* S !).

	....

    MM> 2)
    MM> Now, in S (but not in R),
    MM> the  "row.names<-"  function
    MM> gives an error if you try to assign non-unique row.names.

    MM> This is as desired (and R should do the same).

    MM> (== BUG REPORT for R )

this is easily fixed in  data.frame.R  if one doesn't want to do the fix
for "3)" as well.
   
    MM> 3) However, I can still  (both in S-plus 3.4 & 5.0r2)
    MM> do
    MM> attr(dat, "row.names") <-  <nonunique character>
  
    MM> and get a resulting data.frame  dat   with non-unique row.names.

    MM> PROPOSITION 2:  I think I want to make sure that a(the same?)
    MM>    error message as in "2)" is generated in this case.

    MM> (this is relatively easily accomplished via R's 
    MM> SetAttrib() in src/main/attrib.c)

    MM> ------------------------------------------------------------------
    >>>>> or am I completely wrong, and there should be a way you can
    >>>>> construct a data.frame with non-unique row.names ???
    MM> ------------------------------------------------------------------

It seems I am wrong -- at least in the eyes of Mathsoft's  S-plus 5
writers:

	data.frame() in S-plus 5.0r2's  has a new argument

		dup.names.ok = F

which you can set to TRUE in order to construct data.frames with non-unique
row.names.

Note however that John Chamber's  S version 4 (which underlies S-plus 5)
does NOT have such an argument.

---
Currently,
I tend to conclude that we should follow S-plus 5 here,
and allow  non-unique row.names , however only via the low-level
	attr(. "row.names")
and not via  row.names(.) <- ...

Further: the 'dup.names.ok = FALSE' seems a good idea for data.frame()
	when you want to speed up constructing of huge data.frames...
	(e.g. when using  read.table(.) on large files !!).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 18:03:15 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 18:03:15 +0000 (GMT)
Subject: pow__ii
Message-ID: <199901201803.SAA24582@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:04:04 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Bodo Ahrens <Bodo.Ahrens@univie.ac.at>, R-devel 
<R-devel@stat.math.ethz.ch>
> Subject: pow__ii
> 
> > R code works but the shared objects built from fortran code do not find
> > the appropriate libs with functions like  __pow_ii or __epx at runtime.
> 
> I used to have endless trouble with  __pow_ii which as I recall could be be
> fixed by the correct incantation of the mix of compiler libraries and
> LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
> right. The problem is that pow_ii is not used by R itself, and so when your

Wait a minute. With SC4.2 installed on Solaris, __pow_ii is in
/opt/SUNWspro/lib/libF77.so.3, and if you followed the instructions
installing the compilers /opt/SUNWspro/lib/ will be in the library
search path, ahead of the system libraries.  And as R does call libF77,
__pow_ii is in a library it has already dlopen-ed, so it should always
be accessible.  Try ldd R.binary:

        libSM.so.6 =>    /usr/openwin/lib/libSM.so.6
        libICE.so.6 =>   /usr/openwin/lib/libICE.so.6
        libX11.so.4 =>   /usr/openwin/lib/libX11.so.4
        libsocket.so.1 =>        /usr/lib/libsocket.so.1
        libnsl.so.1 =>   /usr/lib/libnsl.so.1
        libz.so =>       /usr/local/lib/libz.so
        libdl.so.1 =>    /usr/lib/libdl.so.1
        libm.so.1 =>     /opt/SUNWspro/lib/libm.so.1
        libF77.so.3 =>   /opt/SUNWspro/lib/libF77.so.3
        libsunmath.so.1 =>       /opt/SUNWspro/lib/libsunmath.so.1
        libc.so.1 =>     /usr/lib/libc.so.1
        libXext.so.0 =>  /usr/openwin/lib/libXext.so.0
        libmp.so.2 =>    /usr/lib/libmp.so.2

(Solaris 2.6 aka SunOS 5.6).

I have just rebuilt R using the SC4.2 compilers and sent Bodo Ahrens
lots of detailed check information.  It works for me on several different
Solaris/compiler combinations.

> fortran code does something like 4**2 (or using variables declared as integer)
> then a call to pow_ii is generated and you need to find the correct library. I

Not on my system: you need n1**n2.

> eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
> 4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
> routine which is used by R itself, and I never had to worry about the 
libraries
> again.
> 
> This also worked better with Splus, which can also be problematic in this
> regard. I highly recommend this change to anyone distributing fortran code 
with
> a package.

Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
I have not seen problems with this since about 1995, and have just checked
this out:

toucan% cat test.f
      subroutine mypow(n1, n2, n3)
      n2 = n1**n3
      end
toucan% Splus COMPILE test.f
toucan% nm -g test.o
[Index]   Value      Size    Type  Bind  Other Shndx   Name

[8]     |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[7]     |         0|      28|FUNC |GLOB |0    |2      |mypow_

and this dyn.loads into S-PLUS 3.4 without error.

toucan% R SHLIB test.f
ld -G -o test.so test.o -L/usr/local/lib -lblas 

[It also works on a machine without libblas installed.]
toucan% nm -g test.so

test.so:

[Index]   Value      Size    Type  Bind  Other Shndx   Name

[21]    |     66252|       0|OBJT |GLOB |0    |6      |_DYNAMIC
[23]    |         0|       0|OBJT |GLOB |0    |ABS    |_PROCEDURE_LINKAGE_TABLE_
[20]    |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[22]    |     66332|       0|OBJT |GLOB |0    |7      |_edata
[18]    |     66332|       0|OBJT |GLOB |0    |8      |_end
[24]    |       716|       0|OBJT |GLOB |0    |5      |_etext
[19]    |       688|      28|FUNC |GLOB |0    |5      |mypow_

> dyn.load("./test.so")
> .Fortran("mypow", as.integer(4), integer(1), as.integer(3))
[[1]]
[1] 4

[[2]]
[1] 64

[[3]]
[1] 3

I suspect Paul like me remembers when this was a problem on SunOS4 with static
libraries, but I don't think it is a problem for S-PLUS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 18:32:28 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 13:32:28 -0500
Subject: pow__ii
References: <199901201803.SAA24582@toucan.stats.ox.ac.uk>
Message-ID: <99Jan20.135427est.13475@mailgate.bank-banque-canada.ca>

>Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
>I have not seen problems with this since about 1995,
...
>I suspect Paul like me remembers when this was a problem on SunOS4 with static
>libraries, but I don't think it is a problem for S-PLUS.

Well I do remember having these problems with dynamic libraries too, but 1995
would correspond to about the vintage of things which gave me so much trouble.
The S-Plus version would have been 3.3 and things may well have improved. I
haven't kept track of it much since I made the change to the fortran code, as it
has never again given me any trouble. I also have not been using SunPro.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 20:46:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 15:46:40 -0500
Subject: Rd files
Message-ID: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>

Friedrich

I've just been looking at the possibility of converting my html help to Rd
files. Could you please remind me of a few things (or point me to where they are
documented):

- Must there be separate .Rd files for each function or can they be combined
into one large file?

- Is the name{..} field used or is the name field picked up from the file name?
(Looking at the html result of a few tests it seems to be picked up from the
file name, but then what does name{..} do?

- Does this work in file systems with more restrictive (e.g.. 8.3) file names?
If so, how do I specify the function names?

- Is there a fixed set of legitimate headings or can I add things easily?

- Is there a fixed set of legitimate keywords or can I add anything?

- What was once called "details" in the S documentation appears to be called
"description" in the Rd files and what was called description (but was often
just about the same as the title) is gone in the Rd files. Is that right?

- R INSTALL  does not seem to report errors in Rd files that I know have syntax
problems. Is there a way to get error reports?

Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 21 08:22:43 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Jan 1999 08:22:43 +0000 (GMT)
Subject: Rd files
In-Reply-To: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9901210755500.1612-100000@auk.stats>

Paul,

I am replying about the differences in Windows vs Unix, as I modified the
help conversion for Windows.

On Wed, 20 Jan 1999, Paul Gilbert wrote:

> I've just been looking at the possibility of converting my html help to Rd
> files. Could you please remind me of a few things (or point me to where they are
> documented):
 
> - Is the name{..} field used or is the name field picked up from the file name?
> (Looking at the html result of a few tests it seems to be picked up from the
> file name, but then what does name{..} do?

This is used on Windows, and I am urging that it be used on Unix. It is not
currently used on Unix, and this has meant that several files had incorrect
or mis-formated name fields (especially in packages). Most but not all help
files have the name also in an alias field, and that does no harm.  There
are some quirks here: there are a few help files with phrases in the name
field (qraux.Rd, lm.summaries.Rd, ...) and a few that reply on the file
name to give an alias (?Random).  On the other hand, `Alias' appears as a
help entry because it is a file name and seems rather confusing (it
refers to .Alias but not alias).

> - Does this work in file systems with more restrictive (e.g.. 8.3) file names?
> If so, how do I specify the function names?

No such systems are in current use, BUT on Windows the file system may be
case-insensitive, and the programs certainly are. Thus having alias.Rd and
Alias.Rd (as in base) will not work; programs will use the one they find
first. For Windows I have changed these by renaming one of them to start
with z. The current Windows system can cope with arbitrary names for the
.Rd files, and it can generate re-mapped 8:3 names for the help, html and
R-ex files, but we do not use that remapping at present.

> - R INSTALL  does not seem to report errors in Rd files that I know have syntax
> problems. Is there a way to get error reports?

It will report some, but the conversion scripts are very tolerant and some
things are just mis-converted (item fields outside argument and value
fields, for one).  I find I do have to look at the output. Looking at the
help conversion to nroff (temporarily remove the /dev/null in line 108 of
build-help, in RHOME/lib/R/bin if you installed) will show a lot of
warnings/errors, many of which can be ignored, but many are also revealing.
As I cannot suppress these on Windows I get to see them, and have found
a lot of .Rd problems that way.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 21 15:07:48 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Jan 1999 10:07:48 -0500
Subject: Rd files
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca> <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
Message-ID: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>

Friedrich

Thanks for the clarifications and update.

>I'm currently starting (the long announced, but now it's real)
>re-write of Rdconv by making it module-oriented and using Text::Delim
>as extraction engine (as suggested by Doug quite some time ago).

So I guess I should wait to do my conversion.

PG> - Must there be separate .Rd files for each function or can they be combined

PG> into one large file?

>Yes, currently the idea is to have one Rd file per html/help file. I
>never thought about it though ... do many people want to be able to
>have all documentation in one big file?

I don't really care too much about this, I just wanted to make sure I understand
it. However,  it may not be too difficult allow a large .Rd file and have the
build decompose it using the /name{..}. I currently keep many functions in one
file along with their documentation separated by /*   */. I separate this into
the .R and .Rd files with an awk script. So the question for me is whether I
have to separate the .Rd file further or is the R build going to do it. I guess
I would prefer that the R build do it, as I think others may use it this way
too, but I think I can do it fairly easily.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 15:28:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 16:28:14 +0100 (CET)
Subject: Rd files
In-Reply-To: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
 <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
 <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <13991.18318.406913.164469@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 21 Jan 1999 10:07:48 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> Thanks for the clarifications and update.

>> I'm currently starting (the long announced, but now it's real)
>> re-write of Rdconv by making it module-oriented and using Text::Delim
>> as extraction engine (as suggested by Doug quite some time ago).

PG> So I guess I should wait to do my conversion.

Well, the Rd syntax should NOT change (maybe some additional features)
... so unless something doesn't work as expected the user shouldn't
notice too much of a difference ...


PG> - Must there be separate .Rd files for each function or can they be c=
ombined

PG> into one large file?

>> Yes, currently the idea is to have one Rd file per html/help file. I
>> never thought about it though ... do many people want to be able to
>> have all documentation in one big file?

PG> I don't really care too much about this, I just wanted to make sure I=
 understand
PG> it. However,  it may not be too difficult allow a large .Rd file and =
have the
PG> build decompose it using the /name{..}. I currently keep many functio=
ns in one
PG> file along with their documentation separated by /*   */. I separate =
this into
PG> the .R and .Rd files with an awk script. So the question for me is wh=
ether I
PG> have to separate the .Rd file further or is the R build going to do i=
t. I guess
PG> I would prefer that the R build do it, as I think others may use it t=
his way
PG> too, but I think I can do it fairly easily.

I'll put it on my Rd wish list ... but don't hold your breath waiting
for it.

.f

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 15:37:49 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 15:37:49 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211537.PAA27161@toucan.stats.ox.ac.uk>

> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > From Fritz Leisch

> >Yes, currently the idea is to have one Rd file per html/help file. I
> >never thought about it though ... do many people want to be able to
> >have all documentation in one big file?
> 
> I don't really care too much about this, I just wanted to make sure I 
understand
> it. However,  it may not be too difficult allow a large .Rd file and have the
> build decompose it using the /name{..}. I currently keep many functions in one
> file along with their documentation separated by /*   */. I separate this into
> the .R and .Rd files with an awk script. So the question for me is whether I
> have to separate the .Rd file further or is the R build going to do it. I 
guess
> I would prefer that the R build do it, as I think others may use it this way
> too, but I think I can do it fairly easily.

It's legal with S's files, and it is a great way to avoid file name
problems: just have one file with a simple name (and some of those
in lme and locfit cause problems to several tools: file names with "<" in
are somewhat unexpected!)  However, S has an end of section marker, and
it think that is needed for safety. (In S format, help for one object is
between .BG and .WR.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 21 15:53:32 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1999 09:53:32 -0600
Subject: Rd files
In-Reply-To: Prof Brian Ripley's message of "Thu, 21 Jan 1999 15:37:49 +0000 (GMT)"
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
Message-ID: <6rn23coc5f.fsf@verdi.stat.wisc.edu>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

  >> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
  >> Leisch

  >> >Yes, currently the idea is to have one Rd file per html/help
  >> file. I >never thought about it though ... do many people want to
  >> be able to >have all documentation in one big file?
  >> 
  >> I don't really care too much about this, I just wanted to make
  >> sure I understand
  >> it. However, it may not be too difficult allow a large .Rd file
  >> and have the build decompose it using the /name{..}. I currently
  >> keep many functions in one file along with their documentation
  >> separated by /* */. I separate this into the .R and .Rd files
  >> with an awk script. So the question for me is whether I have to
  >> separate the .Rd file further or is the R build going to do it. I
  >> guess I would prefer that the R build do it, as I think others
  >> may use it this way too, but I think I can do it fairly easily.

  BDR> It's legal with S's files, and it is a great way to avoid file
  BDR> name problems: just have one file with a simple name (and some
  BDR> of those in lme and locfit cause problems to several tools:
  BDR> file names with "<" in are somewhat unexpected!)  However, S
  BDR> has an end of section marker, and it think that is needed for
  BDR> safety. (In S format, help for one object is between .BG and
  BDR> .WR.)

The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
I hadn't realized that the others with "<" in them, like matrix<-.Rd,
also gave problems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 16:14:35 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 17:14:35 +0100 (CET)
Subject: Rd files
In-Reply-To: <6rn23coc5f.fsf@verdi.stat.wisc.edu>
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
 <6rn23coc5f.fsf@verdi.stat.wisc.edu>
Message-ID: <13991.21099.247265.757078@galadriel.ci.tuwien.ac.at>

>>>>> On 21 Jan 1999 09:53:32 -0600,
>>>>> Douglas Bates (DB) wrote:

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
>>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
>>> Leisch

>>> >Yes, currently the idea is to have one Rd file per html/help
>>> file. I >never thought about it though ... do many people want to
>>> be able to >have all documentation in one big file?
>>> 
>>> I don't really care too much about this, I just wanted to make
>>> sure I understand
>>> it. However, it may not be too difficult allow a large .Rd file
>>> and have the build decompose it using the /name{..}. I currently
>>> keep many functions in one file along with their documentation
>>> separated by /* */. I separate this into the .R and .Rd files
>>> with an awk script. So the question for me is whether I have to
>>> separate the .Rd file further or is the R build going to do it. I
>>> guess I would prefer that the R build do it, as I think others
>>> may use it this way too, but I think I can do it fairly easily.

BDR> It's legal with S's files, and it is a great way to avoid file
BDR> name problems: just have one file with a simple name (and some
BDR> of those in lme and locfit cause problems to several tools:
BDR> file names with "<" in are somewhat unexpected!)  However, S
BDR> has an end of section marker, and it think that is needed for
BDR> safety. (In S format, help for one object is between .BG and
BDR> .WR.)

DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
DB> also gave problems.

Does S also store the complete output in one file or is the output
split into different files? 

In the second case we'd simply move the problem from problematic input
names to problematic output names ...

Anyway, what we need is a safe method of seperating file names from
function names. As this is platform-dependent we might do the
following:

output filenames are passed through an OS-dependent safety checker,
which replaces special characters by some unique identifiers, the
mapping alias <-> file is done using an index file anyway. this would
work very much like the current 8.3 conversion, just that it leaves
most file names untouched.

adding another platform then just amounts to adding another function
which should be the cleanest way of doing it.

the one-input-file thing is trivial, so I'll plan to do it in any
case.

.f




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 16:23:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 16:23:56 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211623.QAA27325@toucan.stats.ox.ac.uk>


> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> 
> BDR> It's legal with S's files, and it is a great way to avoid file
> BDR> name problems: just have one file with a simple name (and some
> BDR> of those in lme and locfit cause problems to several tools:
> BDR> file names with "<" in are somewhat unexpected!)  However, S
> BDR> has an end of section marker, and it think that is needed for
> BDR> safety. (In S format, help for one object is between .BG and
> BDR> .WR.)
> 
> DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
> DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
> DB> also gave problems.
> 
> Does S also store the complete output in one file or is the output
> split into different files? 

In the cases where you want to do this, one. You can convert to Windows
help (one file per library) or to process to postscript (pipe to
stdout).  Standard S files are processed at display time, so there is
no output file per se, just a screen or printer.

> In the second case we'd simply move the problem from problematic input
> names to problematic output names ...

Yes, but it does not occur in my experience.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 21 17:15:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Jan 1999 18:15:04 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201639.RAA17204@sophie.ethz.ch> (message from Martin
 Maechler on Wed, 20 Jan 1999 17:39:34 +0100)
Message-ID: <199901211715.SAA03088@sophie.ethz.ch>

My conclusions from the (two !) reactions on my posting of yesterday:

    MM> In R and S, the general idea is that data.frames must have unique
    MM> row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems (in R *and* S !).

    MM> 	[Example code at the end]

    MM> 1) Both in S and R,

    MM> 	  data.frame(..)

    MM>   (and e.g., also cbind(<data.frame>, ..)  which dispatches to
    MM> data.frame()) silently drops the whole row.names and replaces it by
    MM> "1" "2" ...  if the names would be non-unique.

    MM>  PROPOSITION 1: I have the feeling I'd want to get a warning in
    MM> that case.  However, you may prove me wrong...

I'll introduce this warning.. in the current source, 
[if I still don't hear reasons against it..]

    MM> 2) Now, in S (but not in R), the "row.names<-" function gives an
    MM> error if you try to assign non-unique row.names.

    MM>    This is as desired (and R should do the same).

    MM>    (== BUG REPORT for R )

This is already in tomorrow's R-release patches
   
    MM> 3) However, I can still (both in S-plus 3.4 & 5.0r2) do attr(dat,
    MM> "row.names") <- <nonunique character>
  
    MM>    and get a resulting data.frame dat with non-unique row.names.

    MM>  PROPOSITION 2: I think I want to make sure that a(the same?) error
    MM> message as in "2)" is generated in this case.

no, we won't do this.
Apparently, S-plus 5.0 now even provides an explicit argument to
data.frame() allowing for non-unique  row.names
(in order to  bootstrap() or quickly read.table()  large data.frames).

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 08:08:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 09:08:50 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990121172536.29339O-100000@laplace> (message from
 Jonathan Rougier on Thu, 21 Jan 1999 17:29:42 +0000 (GMT))
Message-ID: <199901220808.JAA05768@sophie.ethz.ch>


>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> ...  By the way, I have `solve'
    JonR> methods for triangular matrices and variance matrices -- would
    JonR> you be interested?

	{ Jonathan, I hope it's okay if I CC this to R-devel;  
	  this must be of a wider interest }

Ye.e..s;  
for triangular ones, there's the 4 different ways of 
backsolve()/forwardsolve()..

Well, we (R core) have  discussed matrix classes months and years ago..
and haven't really started doing anything about it.

I think we then agreed to follow Splus'  Matrix library
and use class "Matrix"
(and classes inheriting from "Matrix", i.e.
	class == c("specialMatrix", "Matrix")
).

If we really go into this, then 
we'd probably want to use the SAME class names that S-plus' library(Matrix)
is using. 
Also, I remember that people (on the old R-testers list?) 
very much desired to have 1-column or 1-row matrices instead of vectors
when working within the "Matrix" class  [= behavior of  Octave/Matlab ?]

Other opinions / (code) contributions ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 22 10:14:49 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Jan 1999 10:14:49 +0000 (GMT)
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <199901220808.JAA05768@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1902445306-917000089=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi Martin,

I attach my versions of solve methods for triangular and variance
matrices.  The triangular method is a wrapper for backsolve() which
allows both a trans flag and a right flag (ie giving the four different
solves that you alluded to).  The variance method uses a cholesky
decomposition and then two triangular solves (one with the trans flag
set), as recommended by Golub and van Loan.  I have taken care with the
returning vector/matrix, as in the backsolve() patch!

I was not in on the previous Matrix class discussion.  I use them in
Splus, but from a purely aesthetic point of view I don't like the idea
that R would need a Matrix add-on.  I think I would rather see the
appropriate methods built into the base. 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1902445306-917000089=:29339
Content-Type: APPLICATION/octet-stream; name="solve.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990122101449.29339R@laplace>
Content-Description: 

H4sICMlMqDYAA3NvbHZlLnRhcgDtWHtv2zYQz7/hp7gkaCcNiiH5kT62rFg2
dNjQrUMbGwGaDqMl2uaiV0XKrqHqu+9ISrJk97ECaYYCPgQxJB7vxbvj/SSS
cMl6MuM0nuchzXovDm6dXM91z4bDA9d1+96or3+Hff2sadQfHbhnZ6O+Ozzz
vDN87w3x8cC9fVN2KReSZqgyiKj7j599kA/XPyrH1V4NjFPe4LbN/FIkts4f
vj+FWR77kiexNXbgwgGZ0VicP3Ug4/OFPH9qk4IcxooxzpKVNbbJIZ+BFXEh
eDy3Lmx8cXih1gNO51aMjywUDPQrKnoRRXVvkc/sO7K0Anj3zijQ26fUv9Gm
aRtqCYrdMN+/D0eGu8Ms0ZpX8WPPAfz3GneaBweCLEnPn762t55bco8awY1c
aTUmSDS3jsSlXdsjrY6dignXSvJ/H+pn0Pb5914Et67jE/U/8NxW/fcfqPof
uQN3X/93QNcxjVixnQUlIdeSy5AVL9UKsDc5VR1BwIrLBbTahSlmxZ8LOt+V
9KEeonbQkFPxXt00m+cRi6UoCFxzyaJiXBbjNGXZru5eWfNclMXzVJlJQ1gy
XyYZJLtc2pSyeLlI8jCAaz8JGEqHKTNGpolgwZOGW9tbFj8nTGx4kUeeRnko
eRqukVeZHDDhZ1yrL8jlgkHAZhRZwKeqwwiQCWhXazFwfe/b63twBedwUcIM
LTULV2VP75erBGYhnQugoUjwX5isQOICSsmVGkhm1RbV9jriiFUtmIZVYu+q
hFdsY6O1YjOHotloHJAuqxbe5q6E1meJ23oAv9a2oHJ0troMHPCTKM0lBk9Z
zuMlyzAajeHjsmdiJykP8bDN252MUOGjsMqozoBNqJruW2KGJUTSG4bhzrQC
pQ/5sc+jHMkAd0a5rLIYvdyctlDmxyrARJ1V65wVW+0VKLliQVMWqKOcdqWj
9l2TtBY0I2NCJcIsS6Idw9E1kjGaoTFzlEx9P8kCjFy41pFZ0jBnBRnHIb+p
M8eEp0qvtpEd3eGKrgWqlnkWC0LrMgC4XGA08W/KfJoL1mQdcqy1W4C3elU/
2gaay0WSFb9hXckFjeFFks8503UqGFPJWRgZ1yGPb4x5ZVlnXOtlb0nVmfpq
lbRXN4aXSip7S6M0ZJgPYzUyVPOC97g/cvTIcT6yv4PxKzN8/OAnIf68Vpwu
8UMqhEpYfDreZNAx0cOHb3lO3xk4I+eBTUh1b9uHSCeYASY3pxiEyhw8hh4h
J6CqcZao+sM3ui5TyjOhM+KP55emKLGNqqhjqPL5AjfhyzWsdI9RraViqeLa
KG81x0tb2/GsXcgOPp7rCiRbo0hVe2ZPu6rVclt85V6n3WwL265ouyXzWS1T
ncwNW68wPwuVr2uHhnM2zehXNe/sqUvdwvwS6O+/4L9+C//p+W84cAf7+e8O
qHv+HfQ30cirUCjNClk8lwtLo7485m9yZgU8siaId+DoHDwFl4RMUuv4d92t
IU4kCJwaM3aMaxPdfRfYqSf4ZJr0ZLdJQ0WosI0mYYu62JJH6pF3cOUJ7ODa
7oVYXSqN6LWSYbripNOTyWF3aV2hVh7ZuEmjQIS0pqtb668M/B3s1v/to79P
1n+/P/Q29a9wH9b/cNjf1/8dUBv/NePZx9Efzsxc8qVGODxGlARiHUUM68n/
ABysBZuWsg392mp3gd+kLP7cUahm3m2lDvAe60HTyj4THZZdCKc9N6ildr8a
aCc7wK0GTDjzrhYsq0fqCY7UmF1q/NsNmcJZjQcGP8XJBmzgfD5H/th5P26a
aNwwS/I46ACon9poS/VbJm7WqFShMG1CGzVOyhqhxCRQ+FZNtoJJoVjUDAwi
nwpMBIM2c6Gn30XtXhuxoxuLJNiINsN8C8H82Ao5bQ4sYCmLFdqBPG3ie2H2
ZWyGocSDFMXf1Z1ivDOp+I0DvyAOnmoXlohKniUUo+U9ejhwIE178PDs9JF3
y/il5fIWglGx3gYvIcfhOFtb0ZLa5KqFZDK8QWfW0HXtCs9gf7RJEHS/jwZc
SOsKrz99ebK3qXUaBH/1bdK5Put0PyZk4rVuqvp7wEQN/ypwCqzg4Ynqw4I6
B9/PM+qvyaTfbKxhZVvAiY6x/gghecRqcIG17D1Wlmt8Ud+rtEY4DdPGI8Nu
d7ire7jcY4s97WlPe7pb+hd2QJcuAB4AAA==
---559023410-1902445306-917000089=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 10:22:06 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 11:22:06 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace> (message from
 Jonathan Rougier on Fri, 22 Jan 1999 10:14:49 +0000 (GMT))
Message-ID: <199901221022.LAA14764@sophie.ethz.ch>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> I attach my versions of solve methods for triangular and variance
    JonR> matrices.  The triangular method is a wrapper for backsolve()
    JonR> which allows both a trans flag and a right flag (ie giving the
    JonR> four different solves that you alluded to).  The variance method
    JonR> uses a cholesky decomposition and then two triangular solves (one
    JonR> with the trans flag set), as recommended by Golub and van Loan.
    JonR> I have taken care with the returning vector/matrix, as in the
    JonR> backsolve() patch!

    JonR> I was not in on the previous Matrix class discussion.  I use them
    JonR> in Splus, but from a purely aesthetic point of view I don't like
    JonR> the idea that R would need a Matrix add-on.  I think I would
    JonR> rather see the appropriate methods built into the base.

I agree [at least as long as we only do small wrappers, etc..].
My point was that I want to use the same class() names as S+'s Matrix
library -- in those cases where do (+/-) the same.

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Mon Jan 25 23:24:44 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Mon, 25 Jan 1999 18:24:44 -0500 (EST)
Subject: segments() bug?
Message-ID: <Pine.SUN.3.95.990125181841.14827A-100000@paca>


  Is there a reason that segments()

function (x0, y0, x1, y1, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), xpd = FALSE) 
.Internal(segments(x0, y0, x1, y1, col = col, lty = lty, lwd = lwd, 
    xpd = xpd))

  has xpd=FALSE in the second line instead of xpd = par("xpd") ?

  Ben Bolker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan 26 01:01:43 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 26 Jan 1999 14:01:43 +1300 (NZDT)
Subject: segments() bug?
Message-ID: <199901260101.OAA01810@stat1.stat.auckland.ac.nz>

> From: Ben Bolker <ben@eno.Princeton.EDU>
> To: R development mailing list <R-devel@stat.math.ethz.ch>
> Subject: segments() bug?
> 
> Is there a reason that segments()
> has xpd=FALSE in the second line instead of xpd = par("xpd") ?

Historical reasons?  In fact this should be taken care of with a
... argument which passes additional "par" values.  I'm doing a pass
through the graphics at present and will fix it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 26 09:53:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Jan 1999 10:53:48 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901191432.PAA21802@sophie.ethz.ch> (message from Martin
 Maechler on Tue, 19 Jan 1999 15:32:22 +0100)
Message-ID: <199901260953.KAA15124@sophie.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> There's a non-compatibility between R and S-plus with the default
    MM> argument of the locator() function.

    MM> R      has locator(n=1)
    MM> S-plus has locator(n=500, type="n", noclick=F)

    MM> S's default is ``better'' I think, insofar as it means in 99% of
    MM> the cases ``user clicks <left> as many times as wanted and then
    MM> clicks <right> to end''

    MM> Ross Ihaka and his grad students are working on improving this
    MM> interface, I believe, however, I'd propose to just change

    MM> the default of n=1 to n=500 (or another "large" integer in order to
    MM> not copy S exactly).

I got 0 feedback..

What about the following new  locator()
which additionally adds a   `msg' argument 

The old behavior is got  by
	locator( *, msg="")  or  
	locator(*, msg=NULL) 

locator <- function(n = 512, 
                    msg = "Click left to locate points;  right to end") 
{
    do.msg <- is.character(msg) && nchar(msg) > 0
    if(do.msg) cat(msg,": ",sep="")
    z <- .Internal(locator(n))# n <= 0 gives error
    if(do.msg) cat("\n")
    x <- z[[1]]
    y <- z[[2]]
    if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
}


---
Would anyone not like the default of `msg' writing to the console?
I've often been startled by functions using locator() and not prompting
the user to do start clicking in the graphic window at all..

One could also use the new argument

 prompt =
   "Use the graphics window to locate points;\n click left to add, right to end"

Feedback welcome !!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 26 11:47:24 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Jan 1999 11:47:24 +0000 (GMT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901261147.LAA26972@toucan.stats.ox.ac.uk>

Martin,

I would much rather you fixed the lack of a type= argument first:
without that the use of n > 1 is not very much use as there can be no
feedback to the user.

S-PLUS devices give some feedback by changing the cursor: R devices I
have seen do not.


> Date: Tue, 26 Jan 1999 10:53:48 +0100
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-devel@stat.math.ethz.ch
> Subject: Re: locator(n=1) or  (n=500)  as S-plus ?
> 
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
>     MM> There's a non-compatibility between R and S-plus with the default
>     MM> argument of the locator() function.
> 
>     MM> R      has locator(n=1)
>     MM> S-plus has locator(n=500, type="n", noclick=F)
> 
>     MM> S's default is ``better'' I think, insofar as it means in 99% of
>     MM> the cases ``user clicks <left> as many times as wanted and then
>     MM> clicks <right> to end''
> 
>     MM> Ross Ihaka and his grad students are working on improving this
>     MM> interface, I believe, however, I'd propose to just change
> 
>     MM> the default of n=1 to n=500 (or another "large" integer in order to
>     MM> not copy S exactly).
> 
Why not 99999 or whatever?


> I got 0 feedback..
> 
> What about the following new  locator()
> which additionally adds a   `msg' argument 
> 
> The old behavior is got  by
> 	locator( *, msg="")  or  
> 	locator(*, msg=NULL) 
> 
> locator <- function(n = 512, 
>                     msg = "Click left to locate points;  right to end") 
> {
>     do.msg <- is.character(msg) && nchar(msg) > 0
>     if(do.msg) cat(msg,": ",sep="")
>     z <- .Internal(locator(n))# n <= 0 gives error
>     if(do.msg) cat("\n")
>     x <- z[[1]]
>     y <- z[[2]]
>     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
> }
> 
> 
> ---
> Would anyone not like the default of `msg' writing to the console?


Could you make sure it puts out a "\n" as well?  Unfinished lines
in the middle of output are a visual pain, and on line-buffered devices
may not appear at all.


> I've often been startled by functions using locator() and not prompting
> the user to do start clicking in the graphic window at all..

R misses one of S-PLUS's visual clues, of course.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moro@ibwk.baum.ethz.ch  Tue Jan 26 17:01:14 1999
From: moro@ibwk.baum.ethz.ch (moro)
Date: Tue, 26 Jan 1999 18:01:14 +0100
Subject: R and AIX
Message-ID: <36ADF4DA.FF9EC717@ibwk.baum.ethz.ch>

dear all,

we finally succeeded to compile R-0.63.2 to the end (on a RS/6000 with AIX 4.2.1)
setting the following flag in config.site:
 SHLIBLDFLAGS="-bM:S1L -bnoentry -bnogc -berok -lc -lm -lodm -lcfg" 
and using (AIX)make (not with gnu-make!)

It's not a good way, to get arround the loading Problem in AIX, but it works.

Any further suggestions?

Fabrizio Moro
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jan 28 06:59:24 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 28 Jan 1999 19:59:24 +1300 (NZDT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901260953.KAA15124@sophie.ethz.ch>
References: <199901191432.PAA21802@sophie.ethz.ch>
 <199901260953.KAA15124@sophie.ethz.ch>
Message-ID: <14000.2260.524484.238797@g.ihaka.slip.auckland.ac.nz>

Martin Maechler writes:
 > >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
 > 
 >     MM> There's a non-compatibility between R and S-plus with the default
 >     MM> argument of the locator() function.
 > 
 >     MM> R      has locator(n=1)
 >     MM> S-plus has locator(n=500, type="n", noclick=F)
 > 
 >     MM> S's default is ``better'' I think, insofar as it means in 99% of
 >     MM> the cases ``user clicks <left> as many times as wanted and then
 >     MM> clicks <right> to end''
 > 
 >     MM> Ross Ihaka and his grad students are working on improving this
 >     MM> interface, I believe, however, I'd propose to just change
 > 
 >     MM> the default of n=1 to n=500 (or another "large" integer in order to
 >     MM> not copy S exactly).
 > 
 > I got 0 feedback..
 > 
 > What about the following new  locator()
 > which additionally adds a   `msg' argument 
 > 
 > The old behavior is got  by
 > 	locator( *, msg="")  or  
 > 	locator(*, msg=NULL) 
 > 
 > locator <- function(n = 512, 
 >                     msg = "Click left to locate points;  right to end") 
 > {
 >     do.msg <- is.character(msg) && nchar(msg) > 0
 >     if(do.msg) cat(msg,": ",sep="")
 >     z <- .Internal(locator(n))# n <= 0 gives error
 >     if(do.msg) cat("\n")
 >     x <- z[[1]]
 >     y <- z[[2]]
 >     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
 > }
 > 
 > 
 > ---
 > Would anyone not like the default of `msg' writing to the console?
 > I've often been startled by functions using locator() and not prompting
 > the user to do start clicking in the graphic window at all..
 > 
 > One could also use the new argument
 > 
 >  prompt =
 >    "Use the graphics window to locate points;\n click left to add, right to end"
 > 

Sorry Martin, I missed this earlier.  I've got altogether too many
balls which I'm trying to keep in the air at present.

You proposal looks fine.  Another option would be to allow unlimited
points to be identified, and resize the array inside the C locator
function if necessary, but "500" is simpler and would cover almost all
cases.

I'm not sure about the message though.  The Macintosh only has one
button on its mouse -- input is terminated by typing a keystroke on
the keyboard.  Another option would be to use a call to the device
driver to retrieve an appropriate message for the device, of at least
to hide it in the C code where we could use #ifdef to select the
appropriate message.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 28 15:19:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 28 Jan 1999 10:19:20 -0500
Subject: R vs Splus 5
Message-ID: <99Jan28.102219est.13459@mailgate.bank-banque-canada.ca>

>I agree - they are both excellent software and where would R be without
>all the ported S+ libraries?

The recent exchange on R-help has reminded me of a problem which I am wondering
if anyone has thought about (or solved). One of my initial interests in R was to
have at least two sources for the platform on which my library/package runs.
This is always desireable, and some places even legally required (though not
here).

After installing and briefly trying Splus 5  I have discovered that there will
probably be a substantial porting effort in order to get my library working - at
least if I convert to the new classes and methods.  I am not inclined to do this
without some strategy for keeping things working in R. Has anyone thought about
how R will evolve relative to Splus 5?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 28 21:57:07 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 1999 22:57:07 +0100
Subject: rw0632
Message-ID: <x2pv7zdpsc.fsf@blueberry.kubism.ku.dk>

A couple of quibbles with Guidos new version:

Certain "upper-ascii" characters do not show on the command line
unless followed by a nonblank. One of those being the last(!) letter
of the Danish alphabet, "" (aring). Very peculiar.

On drives mounted from a Novell server, R refuses to overwrite
existing .RData and .RHistory files on shutdown. Works fine on real
hard drives.

One strange effect has been seen involving the console font suddenly
changing to a proportional one, and I also had a couple of GPFs, but I
don't think I can reproduce them (yet).

One of my colleagues also said that there was trouble with releasing
files under NT. He was writing SAS commands to a file and the running
SAS on it after closing it, but SAS couldn't open it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@atd.ucar.edu  Sat Jan  2 05:46:18 1999
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Fri, 1 Jan 1999 22:46:18 -0700 (MST)
Subject: .C
Message-ID: <199901020546.WAA09870@ale.atd.ucar.edu>

Happy 1999!

I've been celebrating the holidays by (finally) getting to the port of our 
S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
moment, there are two issues I'd appreciate advice on:

1. Is support for mode "single" data planned anytime soon in R?  A lot of
our NetCDF files contain "single" data and having to coerce into "double"
will increase the use of R memory drastically (and slow things down).

2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
contain the data attributes, which aren't known until the files are read.
Our S+ code defines a dummy variable for the data dimensions, which are 
redefined (calling "S_alloc") and set within the C code once they are known.
The appended example works in S+ using the pointers= argument in .C.  
Is there a way to do this in R?

Thanks...Steve Oncley
oncley@ucar.edu

C-code:

void inquire_varid(
  int *ncid_p,          /* NetCDF file id. File is left open  */
  int *var_id_p,        /* variable id */
  long **varlen,        /* Length of variable, along each dimension */
  long *ndims_r,        /* number of dimensions in variable */
			/* This argument is created automatically by S+'s
			   .C for pointers=T variables */
  char **vartype)       /* character string describing S object type */
{
...
  *varlen = dimval = (long *)S_alloc(ndims,sizeof(long));
...
}

S+ call:
	...
      vardims <- integer(0)             # Length of each dimension
      vartype <- ""                     # "integer","single","double" etc
      # get info about variable
      cdf <- .C("inquire_varid",
        cdfid = cdfid,
        varid = varid,
        vardims = vardims,
        vartype = vartype,pointers=c(F,F,T,F))
	...

P.S. I'm using R 0.64 under Redhat Linux 5.2.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan  2 07:47:53 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 2 Jan 1999 07:47:53 +0000 (GMT)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.05.9901020733370.1627-100000@auk.stats>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:

As people kept telling me, a `package' in R.

> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

Not `soon' from the responses to my requests.  I think you exaggerate
though: this can at most double the memory usage, and depending on the
machine and if you actually compute with the data (rather than move it
around) may have negliglible speed penalty. Remember too that anything done
with the data inside S-PLUS 3.x (and R, AFAIK) will make several
double-precision copies.

> 2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
> contain the data attributes, which aren't known until the files are read.
> Our S+ code defines a dummy variable for the data dimensions, which are 
> redefined (calling "S_alloc") and set within the C code once they are known.
> The appended example works in S+ using the pointers= argument in .C.  
> Is there a way to do this in R?

Actually, there is no longer a way to do this in S-PLUS: the pointers=
argument is not available in S-PLUS 5.x.  I think you need to re-think your
strategy: an alternative can be seen in the rpart code.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Jan  3 20:44:42 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 3 Jan 1999 12:44:42 -0800 (PST)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.03.9901031230270.11073-100000@wompom.biostat.washington.edu>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:
> 
> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

I don't think there's any immediate plan for genuine single precision
support.  I have written some code based on an idea of Peter Dalgaard's
to simplify porting of code that uses single precision. It uses a vector
of integers of class "single" to hold the data and defines various group
methods based on coercing back to double precision at the slightest
provocation. It's very preliminary at the moment, but you can get it at 
http://www.biostat.washington.edu/~thomas/single.tgz

This obviously wouldn't solve the time or memory problems, but only a few
people have time/memory problems that would be solved by single precision
support and it appears that none of them has the substantial amount of
spare time needed to implement it.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jan  4 00:20:25 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 4 Jan 1999 13:20:25 +1300 (NZDT)
Subject: .C
Message-ID: <199901040020.NAA21340@stat1.stat.auckland.ac.nz>

There is a possible solution to the "single" problem which I've been
thinking of introducing on the "next pass" through the memory
management code.  Since it is largely independent of the memory
management system I guess I should get to it rather sooner.

The solution is to introduce a new data type "single" (internally
SNGLSXP) which is identical to "double" (internally REALSXP) except
when it is passed through a .C or .Fortran call.  There the values
are copied to a genuine single precision array before being passed
to the foreign code.

As far as I know, the "single" type in S only exists for compatibility
with Old-S functions.  That's why there is no corresponding single
precision complex type -- Old-S did not have a complex type.
Would it be worth introducing a "singlecomplex" type to parallel the 
"single" real type?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan  4 14:42:38 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 4 Jan 1999 15:42:38 +0100 (CET)
Subject: Submissions to CRAN
Message-ID: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>


HAPPY NEW YEAR to all of you!

To clarify some questions in the recent thread on the timeslab
package (sorry that I couldn't participate in the discussion, but I
normally don't read my email on weekends):

*) Nobody should be able to download from the incoming section at our
site. That it was possible (again) was due to recursive link and some
lazy sysadmins which now have some more things they can try to make
better in the new year.

*) Please `announce' only packages that are really available somewhere
(and an incoming directory should not be considered such a
thing). This could either be

  -) your private server: nobody stops you from putting there whatever
     you want

  -) submissions to CRAN only after they have been moved by one of us,
     especially if it is a first submission. experience shows that
     first submissions very often need a little bit of `polishing' until
     they conform to CRAN standards, hence there are often time
     delays (and the already announced package cannot be found on CRAN).

*) I know that the packaging standards for CRAN may seem a little bit
pedantic, but only this way the `R INSTALL' interface can work without
troubles. Hence, the standards make life a little bit harder for
contributors, but we think it makes life much easier for the average
user (and these are the ones with less knowledge on how to fix
things).

*) On copyright for ports: This seems like a neverending discussion
and as I'm a mathematician and not a lawyer I can only contribute my
2(brand new Euro-)c:

Original code under GPL or similar: Port also GPL and you're done

`free redistribution for non-commercial use': I think it's OK to put
such things onto CRAN ... CD-vendors probably run into troubles.

The StatLib submission guidelines say that all code needs:

      A statement (which should also be part of the submission) that
      explicity gives permission to redistribute the software.  You
      can retain the copyright jsut so long as you clearly state that
      the software can be freely used for non-commercial purposes and can be
      freely distributed.
      If you are not the original author of the submission please make sure
      you obtain the original author's permission before submitting
      the software.

Now what exactly `redistribute' means (only original file or
derivatives) seems an open question to me ... and I think we never
settled this ...


In any case, asking the original author seems like a good first step
to me.


Feedback appreciated (please only to r-devel!!!),
Fritz

PS: After this thread is over we will make official CRAN submission
guidelines (with special emphasis on Statlib ports) and put something
in the FAQ.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jonathan.myles@mrc-bsu.cam.ac.uk  Tue Jan  5 11:31:10 1999
From: jonathan.myles@mrc-bsu.cam.ac.uk (Jonathan Myles)
Date: Tue, 5 Jan 1999 11:31:10 GMT
Subject: [R] Submissions to CRAN
In-Reply-To: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Mon, 4 Jan 1999 15:42:38 +0100 (CET))
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
Message-ID: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>


>  *) I know that the packaging standards for CRAN may seem a little bit
>   pedantic, but only this way the `R INSTALL' interface can work without
>   troubles. Hence, the standards make life a little bit harder for
>   contributors, but we think it makes life much easier for the average
>   user (and these are the ones with less knowledge on how to fix
>   things).

I'm sorry to be dim, but are the "packaging standards for CRAN" the same
thing as the "How can I create an R package" section of the FAQ? If not,
where are they?

Jonathan


-- 
Dr. Jonathan Myles         e-mail:jonathan.myles@mrc-bsu.cam.ac.uk
MRC Biostatistics Unit     Tel. 01223 330371
Institute of Public Health FAX  01223 330388
University Forvie Site
Robinson Way
CAMBRIDGE
CB2 2SR                   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jan  5 11:33:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 5 Jan 1999 12:33:18 +0100 (CET)
Subject: [R] Submissions to CRAN
In-Reply-To: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
 <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
Message-ID: <13969.63614.464999.987027@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 5 Jan 1999 11:31:10 GMT,
>>>>> Jonathan Myles (JM) wrote:

>> *) I know that the packaging standards for CRAN may seem a little bit
>> pedantic, but only this way the `R INSTALL' interface can work without
>> troubles. Hence, the standards make life a little bit harder for
>> contributors, but we think it makes life much easier for the average
>> user (and these are the ones with less knowledge on how to fix
>> things).

JM> I'm sorry to be dim, but are the "packaging standards for CRAN" the s=
ame
JM> thing as the "How can I create an R package" section of the FAQ? If n=
ot,
JM> where are they?

Yes, that's exactly what I meant ... sorr for using different
words. With standards I just meant file name conventions, dirs in a
package and all the other stuff that's mentioned in the FAQ or the
help(library) page ...

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Sat Jan  9 20:45:01 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Sat, 9 Jan 1999 15:45:01 -0500 (EST)
Subject: rnorm() with sd=0
Message-ID: <Pine.SUN.3.95.990109153854.8182A-100000@paca>


  Is there a compelling reason why

rnorm(1,mean=m,sd=0)

can't return m instead of NaN?

  The following (trivial) patch makes the change.

*** rnorm.c.orig	Sat Jan  9 15:39:41 1999
--- rnorm.c	Sat Jan  9 15:39:50 1999
***************
*** 35,43 ****
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma <= 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     }
!     return mu + sigma * snorm();
  }
--- 35,46 ----
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma < 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     } else
!     if (sigma==0.0)
!        return mu;
!     else 
!        return mu + sigma * snorm();
  }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 12 11:08:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 12 Jan 1999 11:08:13 +0000 (GMT)
Subject: [R] RH5.2 bundle
In-Reply-To: <Pine.LNX.3.95.990112083226.2868B-100000@mercury.quantex>
Message-ID: <Pine.GSO.4.05.9901121058350.5602-100000@auk.stats>

[I've changed my followup here as some of this is slightly sensitive.]

On Tue, 12 Jan 1999, John Logsdon wrote:

> The web is a very useful device - we can live for ages on the
> laser-printouts but even with a binder, these are not as convenient as a
> real book with examples.  I have in mind the excellent manual for GLIM
> (although rather big) which comes with the (commercial) product but is
> much more than a user manual. Robert and Ross's R Notes, Kurt's FAQ and
> others could form a basis.  The V&R notes, V&S on S(R) could be added and
> some extensive examples such as from Jim Lindsey's repeated measures
> library. I know code modification is seductive but there comes a time in
> any job where the Report just has to be written!

We have discussed an R version of the V&R book (don't know about `V&R
notes' etc -- did that mean our R complements) or including R in the base
version. At least for now it is not thought commercially viable, and there
is also the question of how this would be seen by MathSoft. Volume 1 of the
Third Edition of V&R will run on R virtually unchanged (a large number of
data() statements needed) where the capabilities exist in R (e.g. no nlme,
nls arima.mle etc, yet), and that is due out in July. We plan that Volume 2
will discuss R as one of several `S engines'.

A book about R would be great, but don't understimate the on-going effort
required: keeping our `R complements' current takes an appreciable amount
of time.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 15:15:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 16:15:00 +0100
Subject: Intro notes (1st pass, not for general circ.)
Message-ID: <x21zkz5hmz.fsf@blueberry.kubism.ku.dk>

I've just gotten through translating my notes for the course in basic
statistics for health researchers. I've placed a copy on

ftp://blueberry.kubism.ku.dk/priv/R-intro.tgz

This is essentially a translation of the Danish notes that I wrote
during the Autumn of 1997 for use with Rsept, i.e. roughly R v.50.
They lean heavily on the textbook, Altman: Practical Statistics for
Medical Research. Chapman and Hall, 1991.

For now, this is mainly for information purposes and not for further
redistribution. I haven't yet investigated the possibilities of
getting it published as a real book (ISBN, y'know), so I wouldn't know
what the copyright implications would be. Also, and maybe more
importantly, I haven't yet asked anyone for permission to use their
data in a publication of any sort. I wouldn't expect any problems in
that area (there is no direct reproduction), but one cannot be too
sure.

In their present state, the notes are full of errors; typos, language
and otherwise. I know that and I'm not particularly interested in
being told about them at the present stage, since I'll be going over
the entire stack with a red pencil anyway. General comments and
constructive criticism are welcome, though. 

A couple of important things have changed in the later versions of R,
and I'll be upgrading the student machines to the Win32 version of
0.63.1 (or .2, depending on availability), so the notes are actually
already out of date (the predict() examples are particularly bad).
[Slightly weird feeling to translate stuff you know is wrong, but I
needed to have the work processes separate, and also to have a common
base in Danish and English in order to maintain future parallel
versions.]

The current version (in both languages) also suffers from a haphazard
reversion of the anova and regression analysis sections [caused by
teacher scheduling problems in the Spring98 semester], which is not
really pedagogically sound and introduced a couple of sequencing
errors in the examples -- values geting used before they were
computed... I'll be putting them back in proper order.

I plan to make a proper R package "Rx" out of the extension functions
and example/exercise data. A preliminary version (functions and docs
only) is in ftp://blueberry.kubism.ku.dk/priv/Rx.tgz

The data sets are in ftp://blueberry.kubism.ku.dk/pub/*.txt

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 18:41:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 13:41:05 -0500
Subject: make docs
Message-ID: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>

I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)

Paul Gilbert
______

g77 -O2 -fPIC -c kmns.f -o kmns.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
Building system startup profile
You should `make docs' now ...
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[17] /home/res/gilp/R-versions/R-0.63.2 : which perl
/usr/bin/perl
[18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

This is perl, version 5.004_04 built for sun4-solaris

Copyright 1987-1997, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5.0 source kit.

[19] /home/res/gilp/R-versions/R-0.63.2 : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10[20]
[20]/home/res/gilp/R-versions/R-0.63.2 : make doc
`doc' is up to date.
[21] /home/res/gilp/R-versions/R-0.63.2 : make docs
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[22] /home/res/gilp/R-versions/R-0.63.2 :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan 13 19:01:55 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 13 Jan 1999 11:01:55 -0800 (PST)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.03.9901131100570.10137-100000@wompom.biostat.washington.edu>

On Wed, 13 Jan 1999, Paul Gilbert wrote:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> 
> Paul Gilbert
> ______
> 
> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'

I had this problem with Solaris make but it went away when I used GNU
make.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 13 19:06:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 13 Jan 1999 20:06:28 +0100 (CET)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
References: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <13980.61108.345749.14672@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> Paul Gilbert
> ______

> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'
> Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
> [17] /home/res/gilp/R-versions/R-0.63.2 : which perl
> /usr/bin/perl
> [18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

src/library/Makefile has */man/*.Rd wildcards.  You may  need GNU make
to build the docs.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 20:01:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 15:01:05 -0500
Subject: make docs
Message-ID: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>

How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
switch back because

PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi

works to conditionally set a variable in Sun make but not in gnu. Does anyone
know how to do an equivalent thing in gnu make?

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 21:44:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 22:44:50 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Wed, 13 Jan 1999 15:01:05 -0500
References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <x2pv8ic0fh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> switch back because
> 
> PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> 
> works to conditionally set a variable in Sun make but not in gnu. Does anyone
> know how to do an equivalent thing in gnu make?

PADI_HOME=$(shell if [ ....)

or something like that. 

I suspect, by the way, that the whole thing might be better written as 

PADI_HOME=$(shell ${PADI_HOME-$PWD})

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jan 14 00:56:06 1999
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 13 Jan 1999 19:56:06 -0500
Subject: make docs
Message-ID: <199901140057.BAA25116@hypatia.math.ethz.ch>


The following should do what you want (assuming I understand the problem)

 ifndef PADI_HOME
   PADI_HOME=$(shell pwd)
   # or PADI_HOME=${PWD}
 endif

GNU make even allows you determine the source of the value of the
variable - environment, command line, automatic variable, etc.
via the origin function

ifeq "$(orgin PADI_HOME)" "environment"
  # do something.
endif


I can't remember if Gmake guarantees that the 
execution of the shell will give a Bourne shell.
I presume it will use the current value of SHELL
and so the following
     PADI_HOME=$(shell ${PADI_HOME-$PWD})
may not be as robust as the internal gmake solutions.



Duncan


> Cc: R-devel <stat.math.ethz.ch!R-devel>
> References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
> From: Peter Dalgaard BSA <biostat.ku.dk!p.dalgaard>
> Date: 13 Jan 1999 22:44:50 +0100
> Lines: 23
> Sender: stat.math.ethz.ch!owner-r-devel
> Precedence: bulk
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> > switch back because
> > 
> > PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> > 
> > works to conditionally set a variable in Sun make but not in gnu. Does anyone
> > know how to do an equivalent thing in gnu make?
> 
> PADI_HOME=$(shell if [ ....)
> 
> or something like that. 
> 
> I suspect, by the way, that the whole thing might be better written as 
> 
> PADI_HOME=$(shell ${PADI_HOME-$PWD})
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 14 11:21:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Jan 1999 12:21:42 +0100
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
Message-ID: <199901141121.MAA08865@sophie.ethz.ch>

Just for the fun of it (actually in order to test some Fortran more
extensively), 
I've compiled and installed  g77, yesterday on our Solaris 2.5.1 machines.

After doing (in R's toplevel directory)
	make distclean
	./configure
now chooses  g77 (instead of Sun's f77 which was chosen before).
I now do
	make
	make check
	cd tests/Examples
and carefully compare  base-Ex.Rout  to an earlier version of base-Ex.Rout.
I've found the following problem

   Rg77> 0^-1
   [1] -Inf

instead of  {+}Inf  which was correctly returned before.

[[I also had  that "make compare" after g77's installation
  gave output of some differences, i.e., my g77 supposedly *does* have bugs.]]
--
Just to be sure:
Can some of you, particularly those for which 
	grep g77 config.cache
returns something, verify  that 

	0^-1 == Inf

and those who get something else report this (either to me or to R-devel)?

Thanks in advance.
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 14 14:53:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Jan 1999 09:53:14 -0500
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
References: <199901141121.MAA08865@sophie.ethz.ch>
Message-ID: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>

Martin

I get -Inf in Solaris 5.6 with g77.

Paul
______

[1] /home/res4/gilp : grep g77 R/config.cache
ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
[2] /home/res4/gilp : rm .RData
.RData: No such file or directory
[3] /home/res4/gilp : R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type "?contributors" for a list.

Type "demo()" for some demos, "help()" for on-line help, or
     "help.start()" for a HTML browser interface to help.
Type "q()" to quit R.

> 0^-1
[1] -Inf
> q()
Save workspace image? [y/n/c]: n
[4] /home/res4/gilp : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

[6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
GNU Fortran 0.5.23


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 14 15:53:23 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 14 Jan 1999 16:53:23 +0100 (CET)
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
In-Reply-To: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
References: <199901141121.MAA08865@sophie.ethz.ch>
 <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
Message-ID: <13982.4851.195927.799312@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> Martin
> I get -Inf in Solaris 5.6 with g77.

> Paul
> ______

> [1] /home/res4/gilp : grep g77 R/config.cache
> ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
> [2] /home/res4/gilp : rm .RData
> .RData: No such file or directory
> [3] /home/res4/gilp : R

> R : Copyright 1999, The R Development Core Team
> Version 0.63.2  (January 12, 1999)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type "?license" or "?licence" for distribution details.

> R is a collaborative project with many contributors.
> Type "?contributors" for a list.

> Type "demo()" for some demos, "help()" for on-line help, or
>      "help.start()" for a HTML browser interface to help.
> Type "q()" to quit R.

>> 0^-1
> [1] -Inf
>> q()
> Save workspace image? [y/n/c]: n
> [4] /home/res4/gilp : uname -a
> SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

> [6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
> GNU Fortran 0.5.23

Debian GNU/Linux 2.0,

hornik@pc87:~/src/apps/R/r-release$ g77 --version
egcs-2.90.29 980515 (egcs-1.0.3 release)

R> 0^-1
[1] Inf

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 15 17:15:34 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Jan 1999 17:15:34 +0000 (GMT)
Subject: Some outer() suggestions
Message-ID: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-342241519-916419809=:25543
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.GSO.3.96.990115171305.25543M@laplace>

I attach outer.tar.gz which contains outer() as extended for arrays, after
noting the suggestion made in the current help file for outer().  It also
has kronecker() and, to help with function matching, match.fun(). 
Documentation is also included.  Note that in the documentation for
match.fun() I suggest that this be used within functions such as apply(),
tapply() etc, and sweep().  Just a suggestion! 

I hope these are helpful.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


---559023410-342241519-916419809=:25543
Content-Type: APPLICATION/octet-stream; name="outer.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990115171534.25543N@laplace>
Content-Description: 

H4sICEJwnzYAA291dGVyLnRhcgDtWVtv2zgW7mv0KzguCtiF6rUdx9ltJw+Z
AQLMLLIDJB1MjLoPjMXYqmlRJaVc1tB/3++QtC620+ylaRe75kMiiefGcw4P
z2cueTadd2/ypHvx4rlGr9/rjYbDF71eb9A/Gtj/w4F9t2NE30aj4fFodDzq
HeJ7/3Bw3HvRezaLaiM3GddQGS1579NUP0qH+S/K6dlVHbpF9Q+/tpnPNZbr
+LMf3zD8m2axSlj77Pe/hSwSZiqSiJ2wsw4LVgHzI75h7dh0p3Ou+TQTmqg7
oGAbYyYyJ2ipIgEprbX8VqekFdIIK5BorCD2Q4OSrbbkgoqsjUTKtRFtk1+b
LM7yzPF3tuhJvF/LDiv/FWsbVptMpe2UG+htTVqtkFluPLLYsERljJcOxeSj
eo1ISVurZnjRdA/kBkXwzPHvXkTPo+HJ/T84PDyu9n9/ZPf/cDjY7/9vMCYJ
X4pVmQVFEEywl6RYndOnMoENu9FqWRUI7DzwYe8b4sgNn9WENKrHyVmHSLiM
uWnq4XqWL0WSGezwSZyJ5Qp8xerM6wiZmDFuoMoYEbFMsckUO3OlsNF10S3W
TF5PsfpZJZlWkt3NRTYXmjiM4BqryJMI74lK3pQLUNefxDQzEEOmkAwdpzSz
CuzKhfHqyCYSVW3mkDRoUZ+f8oRdC8aDsiZa6x1F63WrCMFfzqFy6DiZ1Ulu
tIhAFSjdUFQSpEt+X3QZuxBZrhEN6BNagxq1LVHM+hUig3J9KEE3CuvuBsEv
N17IOiLvYY77UsWD3cVSMqnUwnkrETybB7tcBspszuBhNotvRcIogd4xRS6/
i10xrzwTpCpGhJ0Dd0gjOUltNQZlOBGaZ4Isv8xnM2GIiNMfzMLJcTKVeYSM
iOFzDoVVjpocweYmcPp5msqHAsIja62MFyJs5JCdch/MnRApJVUwueUyF6vT
KtfXzq0HHLauDa2CYdl5ns2VXv2qEjgQMxcqn8VQhikjrMDVT/nsT2fwb65F
sQpOa4mx3hJVtlttWDiXd/zBOFvcbuBBLU8oEHB8ZhOTyHc6ex7PaGPkKREG
fnPIGB4uY2oQTRvSrrNYcGnUytkykXGy8DkDS4uCSMQ9X6ZSYBO/ZJfEzI09
SpH1naAqCfb1JfvtFlmisW+ZDYHTy9ktrFM6cN9wtPffHtV47efO5od6f/K+
ocpOQx3M+97l9b9+WF89Y+9P44nzv987Gm72/4Oj4b7//xaj3HJV738VsrFt
ZqktfY3WtdvtNvp/3383zvuqeb2iOW5QITR/aF91NmFDkkvZTu5tBx8vqdQY
UO3CD47I1YZ2i+oUjJEimWXzNlgtV8k0bqgdP6L2oaF2vFvtw5fVjutq8cEQ
+dRbFDJP0jRMi7QNp9I/L4lI/WND4NWa/Go930WMEIqKuKTVqOt22XbNiIKP
HQXMGmIahrpFE1PHmZzch1htUx5VzdYr9apFJN1TatvWBfh75+p+fP3h6/+z
YT8aT+G/3lG/hv+Obf0/7h3v6/83GA7/uX64xH6/2UMh1SrK0TWqG1dgalDP
dWrVSXFSnhPBPZu8UpNX7CGoYJ8X797adr6zEwBeFWi8XeWlFtuqrZDe+Iuz
FjxW4Ila5BzogJ7m63bTL8mELM5wfj0AT9TKP2efcwXk4fFZJXoSqcwUK2UB
Ipdlm25xDSDJJkQlU3Yhy/ebhpBvyTrnX899VQcmY9v9U7tuafzX08J1zijq
IjG0Wvd96xQqHFYNhBQWV3j2D3HIPtmAhWyBc8Y+fqQf+ugMqWY/IsAfLEHg
3ijEhENr4GSJHWTBb+X6u3kMYCHuU4sXeRZIwQnG3ama62iNjlClHkh5Ky2M
hBjnFeDAPyysgRMeIBTncWidtj7RyIm7PWcxLUKcamGEvrWY0kMZykEHrNa+
c2ddAdismyixvQn3A8B9+n0PiwZ0S2YIvf11pIL7naeh4DawWmiViOkCBFvA
6jyXWZzKeMpdavNrKfweBFQKCS8BXZ1i7Ryu0UIwoEVEZpvrB8+2wexF4I/f
vo2nPZL6nx1l0n3H+5/jHfc/h8f9/fn/DUYZ/38CAwICHmyhu4Mt4HXwEgdi
5A6oPMFBazESYJgWn/NYiyg4kBExNaEce7MBsoIDgm4y+rGHxwNH1YRaBJP6
IXsjI6KmuxJPOK4RjitCR6dSD5s2mhi/SJgfpXQyiBkkDFEZQ4YqOQjZKGSH
mMcsmI343OZSJTN4aOvYLangFw8kszbwso7v21EK0DVV8mTQ+RCCdRD2Ox8b
dnGch8u2fYXElITF/r3j8Su54rXX5jkdcFvoBnIrw/sYeqvt/+92/zMYjbbu
f45oKz2XQfXxf77/Xf9ftR4lBvhrWRjWTXPVktWAQMm5EwxcoYdYaDQR4xoa
qCnzXxzR7juhrwgJ3lVd//P3+j+rZZpTU2tvSuxdgYyJc7HpWAsCbGtMvg2D
nb1s2XM3HY4GX1dXQlZC8AhEWMOLjepRvK1ubJzOoOyfI2Xvsef8VtQuB/Ll
NYyH0ZVo15CbJZdSaI9UYrq6i+iiZtMOsJr479Tii3JZMHeKOTT3JqD5/NqW
yykcSN8z+AmSrh/QxS6quxgYDCEMZXwJmEHNL7QE5DeAD/wjSnd5ZClqd3rt
+/KXsqKGCmwePgELqvz10CBo3gQ+BQ1srmhxA84E66ObVpwL7FTOxLXm7Hcj
bnJp9V1m6NxNFk/h4Ms5f0DTf9Fll4JrKUL2q5on7I9YAhXRii9tHPp/+fPg
3wEfDutsAQ8T0yMzUy653gAUwbn/FZhOtf7bUXmsvWPnATKhOnzoFD3vnJwM
kXXndA30k1TTBVKCz/weo7ytyGmiTaAExP55XUjOyXt7MLIf+7Ef+/Efj38A
iJfMzAAqAAA=
---559023410-342241519-916419809=:25543--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NJOSEPHY@bentley.edu  Sat Jan 16 15:38:47 1999
From: NJOSEPHY@bentley.edu (Norm Josephy)
Date: Sat, 16 Jan 1999 10:38:47 -0500 (EST)
Subject: Core dump on sapply misuse
Message-ID: <01J6LT7685AQ000W0X@bentley.edu>

Developers:

I hope this is the appropriate place to post this request. 

I am getting a core dump in an application of sapply.  A 
simplified example is the following.  Because simplify=TRUE 
is the default for sapply and tapply, the following works

	x <- 1:5; sapply(x,list)

but the following dumps core with an access violation

	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
	
I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
and am also experiencing the 'impossible to access 
clipboard' problem with graphics under NT but not under 
Win95).

Could a gentler message be encoded (e.g. a check after the 
call to lapply) to inform the user that sapply (and tapply) 
is being abused?  A core dump seems a rather harsh caveat 
emptor.

Thank you

Norman Josephy
Department Of Mathematical Sciences
Bentley College
Waltham, MA

E-Mail:  NJOSEPHY@BENTLEY.EDU
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 13:26:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 14:26:18 +0100
Subject: Core dump on sapply misuse
In-Reply-To: Norm Josephy's message of Sat, 16 Jan 1999 10:38:47 -0500 (EST)
References: <01J6LT7685AQ000W0X@bentley.edu>
Message-ID: <x2n23i1151.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Developers:
> 
> I hope this is the appropriate place to post this request. 
> 
> I am getting a core dump in an application of sapply.  A 
> simplified example is the following.  Because simplify=TRUE 
> is the default for sapply and tapply, the following works
> 
> 	x <- 1:5; sapply(x,list)
> 
> but the following dumps core with an access violation
> 
> 	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
> 	
> I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
> and am also experiencing the 'impossible to access 
> clipboard' problem with graphics under NT but not under 
> Win95).

I believe that one got fixed in 0.63.2. My pre-0.63.3 snapshot gives

> x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
     [,1]        [,2]        [,3]        [,4]        [,5]       
[1,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"
[2,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"

The bug was in the printing of "odd objects". Whether the above is a
sane representation of

> dput(sapply(x,myf))
structure(list(1, 1, 2, 2, 3, 3, 4, 4, 5, 5), .Dim = c(2, 5),
.Dimnames = list(NULL, NULL))

may still be open for debate, but at least the core dump is gone.

An NT version of 0.63.2 will be out when Guido finds the time. As I
understand the situation, this could be rather soon, unless he also
tries to fix the clipboard problem...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 18:27:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 19:27:02 +0100
Subject: Other core dumps, with apologies
In-Reply-To: Norm Josephy's message of Sun, 17 Jan 1999 11:12:27 -0500 (EST)
References: <01J6N8O8BIHE0000VI@bentley.edu>
Message-ID: <x2emotzrex.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Sir:
> 
> I hope you do not mind me sending e-mail directly to you 
> rather than to the developer's list.  I wish to avoid 
> unnecessary traffic on the list when the issue I raise may 
> have already been fixed.

As a matter of principle: I *do* mind. One of the purposes of having a
list is that not everyone has the time to deal with questions at any
point in time. If you single out one person, you are in effect forcing
him either to write at least a polite reply explaining that he's busy
or impolitely ignore you...

But never mind: I'll just bounce you onto the list.

> There are two other places where I have induced a core dump.
> 
> x1 <- 1:10
> f1 <- cut(x,5); f2 <- cut(x,4); f3 <- cut(x,3)
> as.matrix(list(f1,f2,f3))
> ----------------------------------------------------
> 
> Just after start-up, as the first expression issued:
> 
> strwidth("abcd")
> -----------------------------------------------------
> 
> One other place: where the documentation says that f1:f2 
> works when f1,f2 are factors
> 
> f1 <- gl(3,2)
> f2 <- gl(2,3)
> f1:f2
> 
> It doesn't core dump, but it doesn't seem to do anything 
> useful either. Is the intent to create what 
> tapply(1:6,list(f1,f2)) creates?
> ------------------------------------------------------
> 
> I am starting this week to teach a 'graphical EDA using R' 
> course to undergrauate business students with very little 
> math or computer language experience.  I have been 
> intentionally 'abusing' R to look for places that my 
> students might inadvertenly stumble into. The focus on the 
> course is graphical exploration of data, and data 
> manipulation will be an important component of my students 
> learning experience.
> 
> If I may, a personal comment about tapply.  This may be just 
> something that I don't understand fully.  If this is just my 
> confusion, or it no longer happens in the latest version, 
> ignore my comments with my apologies.
> 
> The core dump situation I described in my previous post came 
> up in my attempt to 'generalize' the tapply function.  In 
> looking at ways to teach R, it seemed that tapply would 
> accept a list of factors if the function being applied 
> returned a scalar, or a single factor if the function being 
> applied returned a vector, but it core dumped if it was used 
> as
> 
> tapply(x,listOfFactors,vectorReturningFunction)
> 
> My naive solution was :
> 
> j <- tapply(x, listOfFactors) # get the product factor
> answer <- tapply(x,j,vectorReturningFunction)
> .... CODE TO GET THE LABELS RIGHT ....
> ansmat <- array(unlist(answer), dim=someStuff, 
>  dimnames=otherStuff))
>  
>  
> The 'flexibility' of being passed back different structures 
> (list, vector, matrix) depending upon the input structures 
> somewhat complicates the explanation of the functions' 
> usage.  Uniformly returning a properly labelled array, in my 
> naive way of looking at things, might have some merit.
> 
> Although I am not new to programming (started as an 
> undergraduate engineer in the early 60's) I am new to user 
> group lists on the Internet. I don't know what the proper 
> 'group etiquette' is on things like code bombing questions.
> 
> Thank you,
> 
> 
> Norm
> 
> Norman Josephy
> Department of Mathematical Sciences
> Bentley College
> Waltham, MA
> U.S.A.
> 
> E-Mail:  NJOSEPHY@BENTLEY.EDU
> 
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 18 13:53:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Jan 1999 14:53:24 +0100
Subject: Some outer() suggestions
In-Reply-To: <Pine.GSO.3.96.990115171305.25543K-101000@laplace> (message from
 Jonathan Rougier on Fri, 15 Jan 1999 17:15:34 +0000 (GMT))
References: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>
Message-ID: <199901181353.OAA04395@sophie.ethz.ch>

Thank you Jonathan, 
for your submitted suggestions.

to have a more generally working (and [dim]names preserving) "outer()"  has
been (some where low) on my todo list, for a while now.

----
Something for all R package / code writers :
	  --------------------------------
When writing  *.Rd files {aka man pages}:
Please use at least one \keyword{...} line at the end
(use a keyword from  R.../doc/KEYWORDS
  ... are these in the Windows version?)
These are important for several indices (and may become more important in
the future).

---
A few more remarks of (half) general interest:

- Concerning "kronecker",  couldn't we use

    %x%

  as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
  Does anyone see a reason against it?

- match.fun() [your new proposal]:

  Why should it give an error [stop()] instead of return NA or NULL or
  something like that when there's no function match ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Mon Jan 18 14:06:49 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Mon, 18 Jan 1999 14:06:49 +0000 (GMT)
Subject: Some outer() suggestions
In-Reply-To: <199901181353.OAA04395@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990118135942.29339A-100000@laplace>

Hi Martin,

On Mon, 18 Jan 1999, Martin Maechler wrote:

> - Concerning "kronecker",  couldn't we use
> 
>     %x%
> 
>   as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
>   Does anyone see a reason against it?

That's a good idea!

> - match.fun() [your new proposal]:
> 
>   Why should it give an error [stop()] instead of return NA or NULL or
>   something like that when there's no function match ?

There is no compelling reason: the rather brutal error is because I was
concerned to duplicate the procedure in apply().  Hence I used get()
directly, rather than checking for existence first.  But I agree that a
NULL return would be more flexible.  I'd be happy to rewrite.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 19 14:32:22 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Jan 1999 15:32:22 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901191432.PAA21802@sophie.ethz.ch>

There's a non-compatibility between R and S-plus
with the default argument of the
	 locator()
function.

R has		locator(n=1)
S-plus has	locator(n=500, type="n", noclick=F)

S's default is ``better'' I think, insofar as it means in 99% of the cases
	``user clicks <left> as many times as wanted
	  and then clicks <right> to end''

Ross Ihaka and his grad students are working on improving this interface, I
believe, however, I'd propose to just change

the default of n=1 to n=500 
(or another "large" integer in order to not copy S exactly).


Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 11:50:47 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 11:50:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-162216788-916833047=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

On my R installation (0.62.4) there is no dist() function, so I attach one
possibility.  It provides Euclidean distances only, but it does compute
dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
values; naturally dist(X, X) gives the full distance matrix of X.

Hope this is useful, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-162216788-916833047=:29339
Content-Type: APPLICATION/octet-stream; name="dist.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990120115047.29339I@laplace>
Content-Description: 

H4sICOC/pTYAA2Rpc3QudGFyAO1W32/bNhDua/VX3FIUkAbFkOw4A7rloSha
oHsp0L5YiFOAlmiFi0SpJBU7E/y/9470z1ZyU2DZ9uB7sEne8eN3xxPvMqHN
4OOzJ5UojqLLi4tnURQN4/HQ/l8M7TyyayNcu7wcx6PRb2O7Hg9HtPa0tJw0
2jCFR2Yli/5KVa8d6o/iWE8uRs6pePRP03wqyfD+4Y9zmDcyNaKS4E9CSALw
Wg/2ZEI2TA9KZpRY+pPgQCvm4JdCayFzPwkCONy7kYQwJp2qO1JJVS2+Rd6I
tAZpVfQZZCVZZILl/l23hXVhck2HZGVwXVQLrgboDc1uQgghU1V99e6mn3ty
TQR+frO6Z8U6fvc8NZXy/QkgXPB5CC9/fQmK134cggy6iTNjlE8YIZx9En/z
s4DA7g5sVwczXmh+7BJ2F5n0RFOUyweyTH0cYsyvY/SShgkNuzdRFhRc5ubW
t9fVSPGl4f4WYriDGN4EmCa/XEEn0Ebi4Lhem6r2z95jWpQ1M2JWcLBupVyf
9fglbZoUmPTESrKSa6KGPjlybiVxK8fziC7tlQ3UJjg4QscemUr7+ykyNO9A
+yHcJrl6Uqrvem1CBe6bwaP6zFw8drayPJJ2+osyztZbed5//bKd5DGS2fqf
PekZP6j/8fhyr/6PXP0fR+NT/f8XZEpfeEtZgJ/s1AhT8PZtkxYi40wCrTOZ
ctI1muXO0rUItMYKwfR2N1N5U3JpNJaeqTC8bCer9rV7k5dQzaGuBGoHq406
QbWszC1X4Fc1tR/0znTYr7xpxnWqhDVqvTf44jeGA26F79nCjJsF59KqHQYI
CdO0yjhSAiYzr0uVrAYA7+fbGQgN67YmJCwJlSweaOTZBuAceTKZNwVTUDNl
iDLhbnnsPNmeLbSXOvLZgGKGr2XDWw9PnWEgDjjueDDFIRf3XIbAOtA9fKi5
1NS9uS09VZvc+0DRXgjsDxi4ZsQBOEwNRE4Jctm68ig/ve/9DGEh0B1qXcSM
bsopqH1ZkSsbfNmUM6483Il9md5HsNFhjbmtVPsnJoa5xRv+WDW54IpUfMnK
uuCYazYl41fjEPAn8F6Ayw46gkHOGrxA3JpWSvGC2R7X8fVsJV83Qgq7lbk/
jrDeUpt5FUfB79is8mXtn7ucx9IaPH/+Apunbej21SE4i7XB+ghiescfFpXK
WqYUe1id6uJJTnKS/4l8BbYXpwQAEgAA
---559023410-162216788-916833047=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 11:53:48 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 12:53:48 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
References: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
Message-ID: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 11:50:47 +0000 (GMT),
>>>>> Jonathan Rougier (JR) wrote:

JR> On my R installation (0.62.4) there is no dist() function, so I attach one
JR> possibility.  It provides Euclidean distances only, but it does compute
JR> dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
JR> values; naturally dist(X, X) gives the full distance matrix of X.

dist is contained in the mva package which comes with (base) R. it
provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
`"binary"' distances both in matrix and triangular form.

I couldn't open the tar file you attached, so I couldn't check your
version.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 12:03:38 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
Subject: dist function suggestion
In-Reply-To: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.3.96.990120115916.29339J-100000@laplace>

On Wed, 20 Jan 1999, Friedrich Leisch wrote:

> dist is contained in the mva package which comes with (base) R. it
> provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> `"binary"' distances both in matrix and triangular form.

Thanks Fritz, but could I still make a general plea for a dist() that
takes one OR two matrices?  I often need to find dist(X, Y) as a
rectangular matrix (eg covariance calculations), and it is very
inefficient to use dist(rbind(X, Y))  and then discard most of it. 
Cheers, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:09:47 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:09:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <199901201309.NAA17441@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> cc: r-devel@stat.math.ethz.ch
> Subject: Re: dist function suggestion
> 
> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
> 
> > dist is contained in the mva package which comes with (base) R. it
> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> > `"binary"' distances both in matrix and triangular form.
> 
> Thanks Fritz, but could I still make a general plea for a dist() that
> takes one OR two matrices?  I often need to find dist(X, Y) as a
> rectangular matrix (eg covariance calculations), and it is very
> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

You will need to call it something else: dist is a clone of an S function,
and dist(X, "manhattan") is well-established usage.

I pointed out to R-core recently that "euclidian" will cause problems
for those who know how to spell it .... (-ean in my dictionaries, and
in S).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 13:22:45 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 14:22:45 +0100
Subject: dist(*, "euclidean") [was "dist function suggestion"]
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Wed, 20 Jan 1999 13:09:47 +0000 (GMT))
Message-ID: <199901201322.OAA04170@sophie.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
    >> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
    >> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> cc: r-devel@stat.math.ethz.ch
    >> Subject: Re: dist function suggestion
    >> 
    >> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
    >> 
    >> > dist is contained in the mva package which comes with (base) R. it
    >> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
    >> > `"binary"' distances both in matrix and triangular form.
    >> 
    >> Thanks Fritz, but could I still make a general plea for a dist() that
    >> takes one OR two matrices?  I often need to find dist(X, Y) as a
    >> rectangular matrix (eg covariance calculations), and it is very
    >> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

    BDR> You will need to call it something else: dist is a clone of an S
    BDR> function, and dist(X, "manhattan") is well-established usage.

one could still imagine an extra Y argument such that
	dist(X, Y=myY, method="euclidean")
and	dist(X, "euclidean", Y=myY)
would work
one could even make it such that
both
	dist(X, myY)
and	dist(X, "euclidean")
would work.  However, the extra hack for 	dist(X, Y)
may not be worth the pain.

    BDR> I pointed out to R-core recently that "euclidian" will cause
    BDR> problems for those who know how to spell it .... (-ean in my
    BDR> dictionaries, and in S).

Yes, thank you;  for me, I've considered this a bug report.
Hopefully nobody has currently code relying on the wrong spelling...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 13:24:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 14:24:43 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
References: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
Message-ID: <13989.55579.607229.939868@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 13:09:47 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
>> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
>> cc: r-devel@stat.math.ethz.ch
>> Subject: Re: dist function suggestion
>>=20
>> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
>>=20
>> > dist is contained in the mva package which comes with (base) R. it
>> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
>> > `"binary"' distances both in matrix and triangular form.
>>=20
>> Thanks Fritz, but could I still make a general plea for a dist() that
>> takes one OR two matrices?  I often need to find dist(X, Y) as a
>> rectangular matrix (eg covariance calculations), and it is very
>> inefficient to use dist(rbind(X, Y))  and then discard most of it.=20

PBR> You will need to call it something else: dist is a clone of an S fun=
ction,
PBR> and dist(X, "manhattan") is well-established usage.

well, I don't think we need to call it something different, it's just
that the y argument may not be the 2nd one ...=20



PBR> I pointed out to R-core recently that "euclidian" will cause problem=
s
PBR> for those who know how to spell it .... (-ean in my dictionaries, an=
d
PBR> in S).

fixed (now both are legal)

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:48:53 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:48:53 +0000 (GMT)
Subject: dist(*, "euclidean") [was "dist function suggestion"]
Message-ID: <199901201348.NAA17744@toucan.stats.ox.ac.uk>

>     BDR> You will need to call it something else: dist is a clone of an S
>     BDR> function, and dist(X, "manhattan") is well-established usage.
> 
> one could still imagine an extra Y argument such that
> 	dist(X, Y=myY, method="euclidean")
> and	dist(X, "euclidean", Y=myY)
> would work
> one could even make it such that
> both
> 	dist(X, myY)
> and	dist(X, "euclidean")
> would work.  However, the extra hack for 	dist(X, Y)

Um, I did think about that, but precisely what would be rules be?
For now the second argument can be anything coercable to a character
(why is match.arg not used?), or should be since ?pmatch says

       x: the values to be matched.

without mentioning mode, although the internal code has isString
(whatever precisely that is).  In particular, names fail in R but not
S, although as documented they should work in R but not S:

> pmatch(as.name("test"), "test")
Error in pmatch(x, table, duplicates.ok) : argument is not of mode character

So at present if the second argument is a character matrix it works.
And there is an as.matrix on X.  So what do you want Y to be?
numeric?  (At present I can have X as a data frame with factors, e.g.
dist(data.frame(factor(1:10)))!)  matrix?  ?

While I am at it

> X <- c(Inf, 0, 0)
> library(mva)
> dist(X)
Error: NAs in foreign function call (arg 1)

is confusing: the error message is caused by Infs too.  (I found this
when writing a version of dist to handle NAs as S's does: the bare code is
now an example in the V&R R complements.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 16:39:34 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 17:39:34 +0100
Subject: data frames with non-unique  row.names
Message-ID: <199901201639.RAA17204@sophie.ethz.ch>

In R and S, the general idea is that data.frames 
must have unique  row.names (aka dimnames(.)[[1]]).

Several observations / problems  (in R *and* S !).

	[Example code at the end]

1)
  Both in S and R,

	  data.frame(..)

  (and e.g., also  cbind(<data.frame>, ..)  which dispatches to data.frame())
  silently drops the whole row.names and replaces it by "1" "2" ...
  if the names would be non-unique.

 PROPOSITION 1:  I have the feeling I'd want to get a warning in that case.
		However, you may prove me wrong... 

2)
   Now, in S (but not in R),
   the  "row.names<-"  function
   gives an error if you try to assign non-unique row.names.

   This is as desired (and R should do the same).

   (== BUG REPORT for R )
   
3) However, I can still  (both in S-plus 3.4 & 5.0r2)
   do
	attr(dat, "row.names") <-  <nonunique character>
  
   and get a resulting data.frame  dat   with non-unique row.names.

 PROPOSITION 2:  I think I want to make sure that a(the same?) error message
		 as in "2)" is generated in this case.

	(this is relatively easily accomplished via R's 
	 SetAttrib() in src/main/attrib.c)

------------------------------------------------------------------
>>>> or am I completely wrong, and there should be a way you can
>>>> construct a data.frame with non-unique row.names ???
------------------------------------------------------------------


Here are the S/R examples: 

## 1)
    dat <- d0 <- matrix(1:12, 3,4)
    dimnames(dat) <- list(c("r","r","r.3"),paste.i("V",4))
    dat
    data.frame(dat)# silently drops the row.names --- S == R

## 2)
    ### Now duplicated row.names:
    dat2 <- data.frame(d0); dimnames(dat2)[2] <- list(paste.i("V",4))
    (d2 <- dat2)

    ## Here, S gives the proper error message "... duplicate names" :
    ## R 0.63.2 simply accepts it;
    row.names(dat2) <-c("s","s","s.3") ; dat2

## 3)

    ## can we trick it (in S)?
    (dat2 <- d2)
    attr(dat2, "row.names") <-c("r","r","r.3") ; dat2
    row.names(dat2)[duplicated(row.names(dat2))]
    ## yes, S-plus 3.4 / 5.0r2 are tricked!!

Comments / suggestions / oppinions are very welcome!
(if not the 2 mailing lists, I'll summarize to them )
---

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 17:04:04 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 12:04:04 -0500
Subject: pow__ii
Message-ID: <99Jan20.122558est.13449@mailgate.bank-banque-canada.ca>

> R code works but the shared objects built from fortran code do not find
> the appropriate libs with functions like  __pow_ii or __epx at runtime.

I used to have endless trouble with  __pow_ii which as I recall could be be
fixed by the correct incantation of the mix of compiler libraries and
LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
right. The problem is that pow_ii is not used by R itself, and so when your
fortran code does something like 4**2 (or using variables declared as integer)
then a call to pow_ii is generated and you need to find the correct library. I
eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
routine which is used by R itself, and I never had to worry about the libraries
again.

This also worked better with Splus, which can also be problematic in this
regard. I highly recommend this change to anyone distributing fortran code with
a package.

I'm not sure about __epx.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 17:06:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 18:06:33 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201648.RAA21726@biostat.ku.dk>
 (maechler@stat.math.ethz.ch)
Message-ID: <199901201706.SAA17261@sophie.ethz.ch>

(following up on myself:)

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In R and S, the general idea is that data.frames 
    MM> must have unique  row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems  (in R *and* S !).

	....

    MM> 2)
    MM> Now, in S (but not in R),
    MM> the  "row.names<-"  function
    MM> gives an error if you try to assign non-unique row.names.

    MM> This is as desired (and R should do the same).

    MM> (== BUG REPORT for R )

this is easily fixed in  data.frame.R  if one doesn't want to do the fix
for "3)" as well.
   
    MM> 3) However, I can still  (both in S-plus 3.4 & 5.0r2)
    MM> do
    MM> attr(dat, "row.names") <-  <nonunique character>
  
    MM> and get a resulting data.frame  dat   with non-unique row.names.

    MM> PROPOSITION 2:  I think I want to make sure that a(the same?)
    MM>    error message as in "2)" is generated in this case.

    MM> (this is relatively easily accomplished via R's 
    MM> SetAttrib() in src/main/attrib.c)

    MM> ------------------------------------------------------------------
    >>>>> or am I completely wrong, and there should be a way you can
    >>>>> construct a data.frame with non-unique row.names ???
    MM> ------------------------------------------------------------------

It seems I am wrong -- at least in the eyes of Mathsoft's  S-plus 5
writers:

	data.frame() in S-plus 5.0r2's  has a new argument

		dup.names.ok = F

which you can set to TRUE in order to construct data.frames with non-unique
row.names.

Note however that John Chamber's  S version 4 (which underlies S-plus 5)
does NOT have such an argument.

---
Currently,
I tend to conclude that we should follow S-plus 5 here,
and allow  non-unique row.names , however only via the low-level
	attr(. "row.names")
and not via  row.names(.) <- ...

Further: the 'dup.names.ok = FALSE' seems a good idea for data.frame()
	when you want to speed up constructing of huge data.frames...
	(e.g. when using  read.table(.) on large files !!).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 18:03:15 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 18:03:15 +0000 (GMT)
Subject: pow__ii
Message-ID: <199901201803.SAA24582@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:04:04 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Bodo Ahrens <Bodo.Ahrens@univie.ac.at>, R-devel 
<R-devel@stat.math.ethz.ch>
> Subject: pow__ii
> 
> > R code works but the shared objects built from fortran code do not find
> > the appropriate libs with functions like  __pow_ii or __epx at runtime.
> 
> I used to have endless trouble with  __pow_ii which as I recall could be be
> fixed by the correct incantation of the mix of compiler libraries and
> LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
> right. The problem is that pow_ii is not used by R itself, and so when your

Wait a minute. With SC4.2 installed on Solaris, __pow_ii is in
/opt/SUNWspro/lib/libF77.so.3, and if you followed the instructions
installing the compilers /opt/SUNWspro/lib/ will be in the library
search path, ahead of the system libraries.  And as R does call libF77,
__pow_ii is in a library it has already dlopen-ed, so it should always
be accessible.  Try ldd R.binary:

        libSM.so.6 =>    /usr/openwin/lib/libSM.so.6
        libICE.so.6 =>   /usr/openwin/lib/libICE.so.6
        libX11.so.4 =>   /usr/openwin/lib/libX11.so.4
        libsocket.so.1 =>        /usr/lib/libsocket.so.1
        libnsl.so.1 =>   /usr/lib/libnsl.so.1
        libz.so =>       /usr/local/lib/libz.so
        libdl.so.1 =>    /usr/lib/libdl.so.1
        libm.so.1 =>     /opt/SUNWspro/lib/libm.so.1
        libF77.so.3 =>   /opt/SUNWspro/lib/libF77.so.3
        libsunmath.so.1 =>       /opt/SUNWspro/lib/libsunmath.so.1
        libc.so.1 =>     /usr/lib/libc.so.1
        libXext.so.0 =>  /usr/openwin/lib/libXext.so.0
        libmp.so.2 =>    /usr/lib/libmp.so.2

(Solaris 2.6 aka SunOS 5.6).

I have just rebuilt R using the SC4.2 compilers and sent Bodo Ahrens
lots of detailed check information.  It works for me on several different
Solaris/compiler combinations.

> fortran code does something like 4**2 (or using variables declared as integer)
> then a call to pow_ii is generated and you need to find the correct library. I

Not on my system: you need n1**n2.

> eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
> 4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
> routine which is used by R itself, and I never had to worry about the 
libraries
> again.
> 
> This also worked better with Splus, which can also be problematic in this
> regard. I highly recommend this change to anyone distributing fortran code 
with
> a package.

Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
I have not seen problems with this since about 1995, and have just checked
this out:

toucan% cat test.f
      subroutine mypow(n1, n2, n3)
      n2 = n1**n3
      end
toucan% Splus COMPILE test.f
toucan% nm -g test.o
[Index]   Value      Size    Type  Bind  Other Shndx   Name

[8]     |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[7]     |         0|      28|FUNC |GLOB |0    |2      |mypow_

and this dyn.loads into S-PLUS 3.4 without error.

toucan% R SHLIB test.f
ld -G -o test.so test.o -L/usr/local/lib -lblas 

[It also works on a machine without libblas installed.]
toucan% nm -g test.so

test.so:

[Index]   Value      Size    Type  Bind  Other Shndx   Name

[21]    |     66252|       0|OBJT |GLOB |0    |6      |_DYNAMIC
[23]    |         0|       0|OBJT |GLOB |0    |ABS    |_PROCEDURE_LINKAGE_TABLE_
[20]    |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[22]    |     66332|       0|OBJT |GLOB |0    |7      |_edata
[18]    |     66332|       0|OBJT |GLOB |0    |8      |_end
[24]    |       716|       0|OBJT |GLOB |0    |5      |_etext
[19]    |       688|      28|FUNC |GLOB |0    |5      |mypow_

> dyn.load("./test.so")
> .Fortran("mypow", as.integer(4), integer(1), as.integer(3))
[[1]]
[1] 4

[[2]]
[1] 64

[[3]]
[1] 3

I suspect Paul like me remembers when this was a problem on SunOS4 with static
libraries, but I don't think it is a problem for S-PLUS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 18:32:28 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 13:32:28 -0500
Subject: pow__ii
References: <199901201803.SAA24582@toucan.stats.ox.ac.uk>
Message-ID: <99Jan20.135427est.13475@mailgate.bank-banque-canada.ca>

>Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
>I have not seen problems with this since about 1995,
...
>I suspect Paul like me remembers when this was a problem on SunOS4 with static
>libraries, but I don't think it is a problem for S-PLUS.

Well I do remember having these problems with dynamic libraries too, but 1995
would correspond to about the vintage of things which gave me so much trouble.
The S-Plus version would have been 3.3 and things may well have improved. I
haven't kept track of it much since I made the change to the fortran code, as it
has never again given me any trouble. I also have not been using SunPro.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 20:46:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 15:46:40 -0500
Subject: Rd files
Message-ID: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>

Friedrich

I've just been looking at the possibility of converting my html help to Rd
files. Could you please remind me of a few things (or point me to where they are
documented):

- Must there be separate .Rd files for each function or can they be combined
into one large file?

- Is the name{..} field used or is the name field picked up from the file name?
(Looking at the html result of a few tests it seems to be picked up from the
file name, but then what does name{..} do?

- Does this work in file systems with more restrictive (e.g.. 8.3) file names?
If so, how do I specify the function names?

- Is there a fixed set of legitimate headings or can I add things easily?

- Is there a fixed set of legitimate keywords or can I add anything?

- What was once called "details" in the S documentation appears to be called
"description" in the Rd files and what was called description (but was often
just about the same as the title) is gone in the Rd files. Is that right?

- R INSTALL  does not seem to report errors in Rd files that I know have syntax
problems. Is there a way to get error reports?

Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 21 08:22:43 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Jan 1999 08:22:43 +0000 (GMT)
Subject: Rd files
In-Reply-To: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9901210755500.1612-100000@auk.stats>

Paul,

I am replying about the differences in Windows vs Unix, as I modified the
help conversion for Windows.

On Wed, 20 Jan 1999, Paul Gilbert wrote:

> I've just been looking at the possibility of converting my html help to Rd
> files. Could you please remind me of a few things (or point me to where they are
> documented):
 
> - Is the name{..} field used or is the name field picked up from the file name?
> (Looking at the html result of a few tests it seems to be picked up from the
> file name, but then what does name{..} do?

This is used on Windows, and I am urging that it be used on Unix. It is not
currently used on Unix, and this has meant that several files had incorrect
or mis-formated name fields (especially in packages). Most but not all help
files have the name also in an alias field, and that does no harm.  There
are some quirks here: there are a few help files with phrases in the name
field (qraux.Rd, lm.summaries.Rd, ...) and a few that reply on the file
name to give an alias (?Random).  On the other hand, `Alias' appears as a
help entry because it is a file name and seems rather confusing (it
refers to .Alias but not alias).

> - Does this work in file systems with more restrictive (e.g.. 8.3) file names?
> If so, how do I specify the function names?

No such systems are in current use, BUT on Windows the file system may be
case-insensitive, and the programs certainly are. Thus having alias.Rd and
Alias.Rd (as in base) will not work; programs will use the one they find
first. For Windows I have changed these by renaming one of them to start
with z. The current Windows system can cope with arbitrary names for the
.Rd files, and it can generate re-mapped 8:3 names for the help, html and
R-ex files, but we do not use that remapping at present.

> - R INSTALL  does not seem to report errors in Rd files that I know have syntax
> problems. Is there a way to get error reports?

It will report some, but the conversion scripts are very tolerant and some
things are just mis-converted (item fields outside argument and value
fields, for one).  I find I do have to look at the output. Looking at the
help conversion to nroff (temporarily remove the /dev/null in line 108 of
build-help, in RHOME/lib/R/bin if you installed) will show a lot of
warnings/errors, many of which can be ignored, but many are also revealing.
As I cannot suppress these on Windows I get to see them, and have found
a lot of .Rd problems that way.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 21 15:07:48 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Jan 1999 10:07:48 -0500
Subject: Rd files
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca> <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
Message-ID: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>

Friedrich

Thanks for the clarifications and update.

>I'm currently starting (the long announced, but now it's real)
>re-write of Rdconv by making it module-oriented and using Text::Delim
>as extraction engine (as suggested by Doug quite some time ago).

So I guess I should wait to do my conversion.

PG> - Must there be separate .Rd files for each function or can they be combined

PG> into one large file?

>Yes, currently the idea is to have one Rd file per html/help file. I
>never thought about it though ... do many people want to be able to
>have all documentation in one big file?

I don't really care too much about this, I just wanted to make sure I understand
it. However,  it may not be too difficult allow a large .Rd file and have the
build decompose it using the /name{..}. I currently keep many functions in one
file along with their documentation separated by /*   */. I separate this into
the .R and .Rd files with an awk script. So the question for me is whether I
have to separate the .Rd file further or is the R build going to do it. I guess
I would prefer that the R build do it, as I think others may use it this way
too, but I think I can do it fairly easily.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 15:28:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 16:28:14 +0100 (CET)
Subject: Rd files
In-Reply-To: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
 <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
 <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <13991.18318.406913.164469@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 21 Jan 1999 10:07:48 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> Thanks for the clarifications and update.

>> I'm currently starting (the long announced, but now it's real)
>> re-write of Rdconv by making it module-oriented and using Text::Delim
>> as extraction engine (as suggested by Doug quite some time ago).

PG> So I guess I should wait to do my conversion.

Well, the Rd syntax should NOT change (maybe some additional features)
... so unless something doesn't work as expected the user shouldn't
notice too much of a difference ...


PG> - Must there be separate .Rd files for each function or can they be c=
ombined

PG> into one large file?

>> Yes, currently the idea is to have one Rd file per html/help file. I
>> never thought about it though ... do many people want to be able to
>> have all documentation in one big file?

PG> I don't really care too much about this, I just wanted to make sure I=
 understand
PG> it. However,  it may not be too difficult allow a large .Rd file and =
have the
PG> build decompose it using the /name{..}. I currently keep many functio=
ns in one
PG> file along with their documentation separated by /*   */. I separate =
this into
PG> the .R and .Rd files with an awk script. So the question for me is wh=
ether I
PG> have to separate the .Rd file further or is the R build going to do i=
t. I guess
PG> I would prefer that the R build do it, as I think others may use it t=
his way
PG> too, but I think I can do it fairly easily.

I'll put it on my Rd wish list ... but don't hold your breath waiting
for it.

.f

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 15:37:49 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 15:37:49 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211537.PAA27161@toucan.stats.ox.ac.uk>

> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > From Fritz Leisch

> >Yes, currently the idea is to have one Rd file per html/help file. I
> >never thought about it though ... do many people want to be able to
> >have all documentation in one big file?
> 
> I don't really care too much about this, I just wanted to make sure I 
understand
> it. However,  it may not be too difficult allow a large .Rd file and have the
> build decompose it using the /name{..}. I currently keep many functions in one
> file along with their documentation separated by /*   */. I separate this into
> the .R and .Rd files with an awk script. So the question for me is whether I
> have to separate the .Rd file further or is the R build going to do it. I 
guess
> I would prefer that the R build do it, as I think others may use it this way
> too, but I think I can do it fairly easily.

It's legal with S's files, and it is a great way to avoid file name
problems: just have one file with a simple name (and some of those
in lme and locfit cause problems to several tools: file names with "<" in
are somewhat unexpected!)  However, S has an end of section marker, and
it think that is needed for safety. (In S format, help for one object is
between .BG and .WR.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 21 15:53:32 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1999 09:53:32 -0600
Subject: Rd files
In-Reply-To: Prof Brian Ripley's message of "Thu, 21 Jan 1999 15:37:49 +0000 (GMT)"
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
Message-ID: <6rn23coc5f.fsf@verdi.stat.wisc.edu>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

  >> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
  >> Leisch

  >> >Yes, currently the idea is to have one Rd file per html/help
  >> file. I >never thought about it though ... do many people want to
  >> be able to >have all documentation in one big file?
  >> 
  >> I don't really care too much about this, I just wanted to make
  >> sure I understand
  >> it. However, it may not be too difficult allow a large .Rd file
  >> and have the build decompose it using the /name{..}. I currently
  >> keep many functions in one file along with their documentation
  >> separated by /* */. I separate this into the .R and .Rd files
  >> with an awk script. So the question for me is whether I have to
  >> separate the .Rd file further or is the R build going to do it. I
  >> guess I would prefer that the R build do it, as I think others
  >> may use it this way too, but I think I can do it fairly easily.

  BDR> It's legal with S's files, and it is a great way to avoid file
  BDR> name problems: just have one file with a simple name (and some
  BDR> of those in lme and locfit cause problems to several tools:
  BDR> file names with "<" in are somewhat unexpected!)  However, S
  BDR> has an end of section marker, and it think that is needed for
  BDR> safety. (In S format, help for one object is between .BG and
  BDR> .WR.)

The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
I hadn't realized that the others with "<" in them, like matrix<-.Rd,
also gave problems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 16:14:35 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 17:14:35 +0100 (CET)
Subject: Rd files
In-Reply-To: <6rn23coc5f.fsf@verdi.stat.wisc.edu>
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
 <6rn23coc5f.fsf@verdi.stat.wisc.edu>
Message-ID: <13991.21099.247265.757078@galadriel.ci.tuwien.ac.at>

>>>>> On 21 Jan 1999 09:53:32 -0600,
>>>>> Douglas Bates (DB) wrote:

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
>>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
>>> Leisch

>>> >Yes, currently the idea is to have one Rd file per html/help
>>> file. I >never thought about it though ... do many people want to
>>> be able to >have all documentation in one big file?
>>> 
>>> I don't really care too much about this, I just wanted to make
>>> sure I understand
>>> it. However, it may not be too difficult allow a large .Rd file
>>> and have the build decompose it using the /name{..}. I currently
>>> keep many functions in one file along with their documentation
>>> separated by /* */. I separate this into the .R and .Rd files
>>> with an awk script. So the question for me is whether I have to
>>> separate the .Rd file further or is the R build going to do it. I
>>> guess I would prefer that the R build do it, as I think others
>>> may use it this way too, but I think I can do it fairly easily.

BDR> It's legal with S's files, and it is a great way to avoid file
BDR> name problems: just have one file with a simple name (and some
BDR> of those in lme and locfit cause problems to several tools:
BDR> file names with "<" in are somewhat unexpected!)  However, S
BDR> has an end of section marker, and it think that is needed for
BDR> safety. (In S format, help for one object is between .BG and
BDR> .WR.)

DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
DB> also gave problems.

Does S also store the complete output in one file or is the output
split into different files? 

In the second case we'd simply move the problem from problematic input
names to problematic output names ...

Anyway, what we need is a safe method of seperating file names from
function names. As this is platform-dependent we might do the
following:

output filenames are passed through an OS-dependent safety checker,
which replaces special characters by some unique identifiers, the
mapping alias <-> file is done using an index file anyway. this would
work very much like the current 8.3 conversion, just that it leaves
most file names untouched.

adding another platform then just amounts to adding another function
which should be the cleanest way of doing it.

the one-input-file thing is trivial, so I'll plan to do it in any
case.

.f




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 16:23:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 16:23:56 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211623.QAA27325@toucan.stats.ox.ac.uk>


> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> 
> BDR> It's legal with S's files, and it is a great way to avoid file
> BDR> name problems: just have one file with a simple name (and some
> BDR> of those in lme and locfit cause problems to several tools:
> BDR> file names with "<" in are somewhat unexpected!)  However, S
> BDR> has an end of section marker, and it think that is needed for
> BDR> safety. (In S format, help for one object is between .BG and
> BDR> .WR.)
> 
> DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
> DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
> DB> also gave problems.
> 
> Does S also store the complete output in one file or is the output
> split into different files? 

In the cases where you want to do this, one. You can convert to Windows
help (one file per library) or to process to postscript (pipe to
stdout).  Standard S files are processed at display time, so there is
no output file per se, just a screen or printer.

> In the second case we'd simply move the problem from problematic input
> names to problematic output names ...

Yes, but it does not occur in my experience.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 21 17:15:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Jan 1999 18:15:04 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201639.RAA17204@sophie.ethz.ch> (message from Martin
 Maechler on Wed, 20 Jan 1999 17:39:34 +0100)
Message-ID: <199901211715.SAA03088@sophie.ethz.ch>

My conclusions from the (two !) reactions on my posting of yesterday:

    MM> In R and S, the general idea is that data.frames must have unique
    MM> row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems (in R *and* S !).

    MM> 	[Example code at the end]

    MM> 1) Both in S and R,

    MM> 	  data.frame(..)

    MM>   (and e.g., also cbind(<data.frame>, ..)  which dispatches to
    MM> data.frame()) silently drops the whole row.names and replaces it by
    MM> "1" "2" ...  if the names would be non-unique.

    MM>  PROPOSITION 1: I have the feeling I'd want to get a warning in
    MM> that case.  However, you may prove me wrong...

I'll introduce this warning.. in the current source, 
[if I still don't hear reasons against it..]

    MM> 2) Now, in S (but not in R), the "row.names<-" function gives an
    MM> error if you try to assign non-unique row.names.

    MM>    This is as desired (and R should do the same).

    MM>    (== BUG REPORT for R )

This is already in tomorrow's R-release patches
   
    MM> 3) However, I can still (both in S-plus 3.4 & 5.0r2) do attr(dat,
    MM> "row.names") <- <nonunique character>
  
    MM>    and get a resulting data.frame dat with non-unique row.names.

    MM>  PROPOSITION 2: I think I want to make sure that a(the same?) error
    MM> message as in "2)" is generated in this case.

no, we won't do this.
Apparently, S-plus 5.0 now even provides an explicit argument to
data.frame() allowing for non-unique  row.names
(in order to  bootstrap() or quickly read.table()  large data.frames).

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 08:08:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 09:08:50 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990121172536.29339O-100000@laplace> (message from
 Jonathan Rougier on Thu, 21 Jan 1999 17:29:42 +0000 (GMT))
Message-ID: <199901220808.JAA05768@sophie.ethz.ch>


>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> ...  By the way, I have `solve'
    JonR> methods for triangular matrices and variance matrices -- would
    JonR> you be interested?

	{ Jonathan, I hope it's okay if I CC this to R-devel;  
	  this must be of a wider interest }

Ye.e..s;  
for triangular ones, there's the 4 different ways of 
backsolve()/forwardsolve()..

Well, we (R core) have  discussed matrix classes months and years ago..
and haven't really started doing anything about it.

I think we then agreed to follow Splus'  Matrix library
and use class "Matrix"
(and classes inheriting from "Matrix", i.e.
	class == c("specialMatrix", "Matrix")
).

If we really go into this, then 
we'd probably want to use the SAME class names that S-plus' library(Matrix)
is using. 
Also, I remember that people (on the old R-testers list?) 
very much desired to have 1-column or 1-row matrices instead of vectors
when working within the "Matrix" class  [= behavior of  Octave/Matlab ?]

Other opinions / (code) contributions ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 22 10:14:49 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Jan 1999 10:14:49 +0000 (GMT)
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <199901220808.JAA05768@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1902445306-917000089=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi Martin,

I attach my versions of solve methods for triangular and variance
matrices.  The triangular method is a wrapper for backsolve() which
allows both a trans flag and a right flag (ie giving the four different
solves that you alluded to).  The variance method uses a cholesky
decomposition and then two triangular solves (one with the trans flag
set), as recommended by Golub and van Loan.  I have taken care with the
returning vector/matrix, as in the backsolve() patch!

I was not in on the previous Matrix class discussion.  I use them in
Splus, but from a purely aesthetic point of view I don't like the idea
that R would need a Matrix add-on.  I think I would rather see the
appropriate methods built into the base. 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1902445306-917000089=:29339
Content-Type: APPLICATION/octet-stream; name="solve.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990122101449.29339R@laplace>
Content-Description: 

H4sICMlMqDYAA3NvbHZlLnRhcgDtWHtv2zYQz7/hp7gkaCcNiiH5kT62rFg2
dNjQrUMbGwGaDqMl2uaiV0XKrqHqu+9ISrJk97ECaYYCPgQxJB7vxbvj/SSS
cMl6MuM0nuchzXovDm6dXM91z4bDA9d1+96or3+Hff2sadQfHbhnZ6O+Ozzz
vDN87w3x8cC9fVN2KReSZqgyiKj7j599kA/XPyrH1V4NjFPe4LbN/FIkts4f
vj+FWR77kiexNXbgwgGZ0VicP3Ug4/OFPH9qk4IcxooxzpKVNbbJIZ+BFXEh
eDy3Lmx8cXih1gNO51aMjywUDPQrKnoRRXVvkc/sO7K0Anj3zijQ26fUv9Gm
aRtqCYrdMN+/D0eGu8Ms0ZpX8WPPAfz3GneaBweCLEnPn762t55bco8awY1c
aTUmSDS3jsSlXdsjrY6dignXSvJ/H+pn0Pb5914Et67jE/U/8NxW/fcfqPof
uQN3X/93QNcxjVixnQUlIdeSy5AVL9UKsDc5VR1BwIrLBbTahSlmxZ8LOt+V
9KEeonbQkFPxXt00m+cRi6UoCFxzyaJiXBbjNGXZru5eWfNclMXzVJlJQ1gy
XyYZJLtc2pSyeLlI8jCAaz8JGEqHKTNGpolgwZOGW9tbFj8nTGx4kUeeRnko
eRqukVeZHDDhZ1yrL8jlgkHAZhRZwKeqwwiQCWhXazFwfe/b63twBedwUcIM
LTULV2VP75erBGYhnQugoUjwX5isQOICSsmVGkhm1RbV9jriiFUtmIZVYu+q
hFdsY6O1YjOHotloHJAuqxbe5q6E1meJ23oAv9a2oHJ0troMHPCTKM0lBk9Z
zuMlyzAajeHjsmdiJykP8bDN252MUOGjsMqozoBNqJruW2KGJUTSG4bhzrQC
pQ/5sc+jHMkAd0a5rLIYvdyctlDmxyrARJ1V65wVW+0VKLliQVMWqKOcdqWj
9l2TtBY0I2NCJcIsS6Idw9E1kjGaoTFzlEx9P8kCjFy41pFZ0jBnBRnHIb+p
M8eEp0qvtpEd3eGKrgWqlnkWC0LrMgC4XGA08W/KfJoL1mQdcqy1W4C3elU/
2gaay0WSFb9hXckFjeFFks8503UqGFPJWRgZ1yGPb4x5ZVlnXOtlb0nVmfpq
lbRXN4aXSip7S6M0ZJgPYzUyVPOC97g/cvTIcT6yv4PxKzN8/OAnIf68Vpwu
8UMqhEpYfDreZNAx0cOHb3lO3xk4I+eBTUh1b9uHSCeYASY3pxiEyhw8hh4h
J6CqcZao+sM3ui5TyjOhM+KP55emKLGNqqhjqPL5AjfhyzWsdI9RraViqeLa
KG81x0tb2/GsXcgOPp7rCiRbo0hVe2ZPu6rVclt85V6n3WwL265ouyXzWS1T
ncwNW68wPwuVr2uHhnM2zehXNe/sqUvdwvwS6O+/4L9+C//p+W84cAf7+e8O
qHv+HfQ30cirUCjNClk8lwtLo7485m9yZgU8siaId+DoHDwFl4RMUuv4d92t
IU4kCJwaM3aMaxPdfRfYqSf4ZJr0ZLdJQ0WosI0mYYu62JJH6pF3cOUJ7ODa
7oVYXSqN6LWSYbripNOTyWF3aV2hVh7ZuEmjQIS0pqtb668M/B3s1v/to79P
1n+/P/Q29a9wH9b/cNjf1/8dUBv/NePZx9Efzsxc8qVGODxGlARiHUUM68n/
ABysBZuWsg392mp3gd+kLP7cUahm3m2lDvAe60HTyj4THZZdCKc9N6ildr8a
aCc7wK0GTDjzrhYsq0fqCY7UmF1q/NsNmcJZjQcGP8XJBmzgfD5H/th5P26a
aNwwS/I46ACon9poS/VbJm7WqFShMG1CGzVOyhqhxCRQ+FZNtoJJoVjUDAwi
nwpMBIM2c6Gn30XtXhuxoxuLJNiINsN8C8H82Ao5bQ4sYCmLFdqBPG3ie2H2
ZWyGocSDFMXf1Z1ivDOp+I0DvyAOnmoXlohKniUUo+U9ejhwIE178PDs9JF3
y/il5fIWglGx3gYvIcfhOFtb0ZLa5KqFZDK8QWfW0HXtCs9gf7RJEHS/jwZc
SOsKrz99ebK3qXUaBH/1bdK5Put0PyZk4rVuqvp7wEQN/ypwCqzg4Ynqw4I6
B9/PM+qvyaTfbKxhZVvAiY6x/gghecRqcIG17D1Wlmt8Ud+rtEY4DdPGI8Nu
d7ire7jcY4s97WlPe7pb+hd2QJcuAB4AAA==
---559023410-1902445306-917000089=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 10:22:06 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 11:22:06 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace> (message from
 Jonathan Rougier on Fri, 22 Jan 1999 10:14:49 +0000 (GMT))
Message-ID: <199901221022.LAA14764@sophie.ethz.ch>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> I attach my versions of solve methods for triangular and variance
    JonR> matrices.  The triangular method is a wrapper for backsolve()
    JonR> which allows both a trans flag and a right flag (ie giving the
    JonR> four different solves that you alluded to).  The variance method
    JonR> uses a cholesky decomposition and then two triangular solves (one
    JonR> with the trans flag set), as recommended by Golub and van Loan.
    JonR> I have taken care with the returning vector/matrix, as in the
    JonR> backsolve() patch!

    JonR> I was not in on the previous Matrix class discussion.  I use them
    JonR> in Splus, but from a purely aesthetic point of view I don't like
    JonR> the idea that R would need a Matrix add-on.  I think I would
    JonR> rather see the appropriate methods built into the base.

I agree [at least as long as we only do small wrappers, etc..].
My point was that I want to use the same class() names as S+'s Matrix
library -- in those cases where do (+/-) the same.

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Mon Jan 25 23:24:44 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Mon, 25 Jan 1999 18:24:44 -0500 (EST)
Subject: segments() bug?
Message-ID: <Pine.SUN.3.95.990125181841.14827A-100000@paca>


  Is there a reason that segments()

function (x0, y0, x1, y1, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), xpd = FALSE) 
.Internal(segments(x0, y0, x1, y1, col = col, lty = lty, lwd = lwd, 
    xpd = xpd))

  has xpd=FALSE in the second line instead of xpd = par("xpd") ?

  Ben Bolker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan 26 01:01:43 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 26 Jan 1999 14:01:43 +1300 (NZDT)
Subject: segments() bug?
Message-ID: <199901260101.OAA01810@stat1.stat.auckland.ac.nz>

> From: Ben Bolker <ben@eno.Princeton.EDU>
> To: R development mailing list <R-devel@stat.math.ethz.ch>
> Subject: segments() bug?
> 
> Is there a reason that segments()
> has xpd=FALSE in the second line instead of xpd = par("xpd") ?

Historical reasons?  In fact this should be taken care of with a
... argument which passes additional "par" values.  I'm doing a pass
through the graphics at present and will fix it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 26 09:53:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Jan 1999 10:53:48 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901191432.PAA21802@sophie.ethz.ch> (message from Martin
 Maechler on Tue, 19 Jan 1999 15:32:22 +0100)
Message-ID: <199901260953.KAA15124@sophie.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> There's a non-compatibility between R and S-plus with the default
    MM> argument of the locator() function.

    MM> R      has locator(n=1)
    MM> S-plus has locator(n=500, type="n", noclick=F)

    MM> S's default is ``better'' I think, insofar as it means in 99% of
    MM> the cases ``user clicks <left> as many times as wanted and then
    MM> clicks <right> to end''

    MM> Ross Ihaka and his grad students are working on improving this
    MM> interface, I believe, however, I'd propose to just change

    MM> the default of n=1 to n=500 (or another "large" integer in order to
    MM> not copy S exactly).

I got 0 feedback..

What about the following new  locator()
which additionally adds a   `msg' argument 

The old behavior is got  by
	locator( *, msg="")  or  
	locator(*, msg=NULL) 

locator <- function(n = 512, 
                    msg = "Click left to locate points;  right to end") 
{
    do.msg <- is.character(msg) && nchar(msg) > 0
    if(do.msg) cat(msg,": ",sep="")
    z <- .Internal(locator(n))# n <= 0 gives error
    if(do.msg) cat("\n")
    x <- z[[1]]
    y <- z[[2]]
    if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
}


---
Would anyone not like the default of `msg' writing to the console?
I've often been startled by functions using locator() and not prompting
the user to do start clicking in the graphic window at all..

One could also use the new argument

 prompt =
   "Use the graphics window to locate points;\n click left to add, right to end"

Feedback welcome !!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 26 11:47:24 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Jan 1999 11:47:24 +0000 (GMT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901261147.LAA26972@toucan.stats.ox.ac.uk>

Martin,

I would much rather you fixed the lack of a type= argument first:
without that the use of n > 1 is not very much use as there can be no
feedback to the user.

S-PLUS devices give some feedback by changing the cursor: R devices I
have seen do not.


> Date: Tue, 26 Jan 1999 10:53:48 +0100
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-devel@stat.math.ethz.ch
> Subject: Re: locator(n=1) or  (n=500)  as S-plus ?
> 
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
>     MM> There's a non-compatibility between R and S-plus with the default
>     MM> argument of the locator() function.
> 
>     MM> R      has locator(n=1)
>     MM> S-plus has locator(n=500, type="n", noclick=F)
> 
>     MM> S's default is ``better'' I think, insofar as it means in 99% of
>     MM> the cases ``user clicks <left> as many times as wanted and then
>     MM> clicks <right> to end''
> 
>     MM> Ross Ihaka and his grad students are working on improving this
>     MM> interface, I believe, however, I'd propose to just change
> 
>     MM> the default of n=1 to n=500 (or another "large" integer in order to
>     MM> not copy S exactly).
> 
Why not 99999 or whatever?


> I got 0 feedback..
> 
> What about the following new  locator()
> which additionally adds a   `msg' argument 
> 
> The old behavior is got  by
> 	locator( *, msg="")  or  
> 	locator(*, msg=NULL) 
> 
> locator <- function(n = 512, 
>                     msg = "Click left to locate points;  right to end") 
> {
>     do.msg <- is.character(msg) && nchar(msg) > 0
>     if(do.msg) cat(msg,": ",sep="")
>     z <- .Internal(locator(n))# n <= 0 gives error
>     if(do.msg) cat("\n")
>     x <- z[[1]]
>     y <- z[[2]]
>     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
> }
> 
> 
> ---
> Would anyone not like the default of `msg' writing to the console?


Could you make sure it puts out a "\n" as well?  Unfinished lines
in the middle of output are a visual pain, and on line-buffered devices
may not appear at all.


> I've often been startled by functions using locator() and not prompting
> the user to do start clicking in the graphic window at all..

R misses one of S-PLUS's visual clues, of course.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moro@ibwk.baum.ethz.ch  Tue Jan 26 17:01:14 1999
From: moro@ibwk.baum.ethz.ch (moro)
Date: Tue, 26 Jan 1999 18:01:14 +0100
Subject: R and AIX
Message-ID: <36ADF4DA.FF9EC717@ibwk.baum.ethz.ch>

dear all,

we finally succeeded to compile R-0.63.2 to the end (on a RS/6000 with AIX 4.2.1)
setting the following flag in config.site:
 SHLIBLDFLAGS="-bM:S1L -bnoentry -bnogc -berok -lc -lm -lodm -lcfg" 
and using (AIX)make (not with gnu-make!)

It's not a good way, to get arround the loading Problem in AIX, but it works.

Any further suggestions?

Fabrizio Moro
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jan 28 06:59:24 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 28 Jan 1999 19:59:24 +1300 (NZDT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901260953.KAA15124@sophie.ethz.ch>
References: <199901191432.PAA21802@sophie.ethz.ch>
 <199901260953.KAA15124@sophie.ethz.ch>
Message-ID: <14000.2260.524484.238797@g.ihaka.slip.auckland.ac.nz>

Martin Maechler writes:
 > >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
 > 
 >     MM> There's a non-compatibility between R and S-plus with the default
 >     MM> argument of the locator() function.
 > 
 >     MM> R      has locator(n=1)
 >     MM> S-plus has locator(n=500, type="n", noclick=F)
 > 
 >     MM> S's default is ``better'' I think, insofar as it means in 99% of
 >     MM> the cases ``user clicks <left> as many times as wanted and then
 >     MM> clicks <right> to end''
 > 
 >     MM> Ross Ihaka and his grad students are working on improving this
 >     MM> interface, I believe, however, I'd propose to just change
 > 
 >     MM> the default of n=1 to n=500 (or another "large" integer in order to
 >     MM> not copy S exactly).
 > 
 > I got 0 feedback..
 > 
 > What about the following new  locator()
 > which additionally adds a   `msg' argument 
 > 
 > The old behavior is got  by
 > 	locator( *, msg="")  or  
 > 	locator(*, msg=NULL) 
 > 
 > locator <- function(n = 512, 
 >                     msg = "Click left to locate points;  right to end") 
 > {
 >     do.msg <- is.character(msg) && nchar(msg) > 0
 >     if(do.msg) cat(msg,": ",sep="")
 >     z <- .Internal(locator(n))# n <= 0 gives error
 >     if(do.msg) cat("\n")
 >     x <- z[[1]]
 >     y <- z[[2]]
 >     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
 > }
 > 
 > 
 > ---
 > Would anyone not like the default of `msg' writing to the console?
 > I've often been startled by functions using locator() and not prompting
 > the user to do start clicking in the graphic window at all..
 > 
 > One could also use the new argument
 > 
 >  prompt =
 >    "Use the graphics window to locate points;\n click left to add, right to end"
 > 

Sorry Martin, I missed this earlier.  I've got altogether too many
balls which I'm trying to keep in the air at present.

You proposal looks fine.  Another option would be to allow unlimited
points to be identified, and resize the array inside the C locator
function if necessary, but "500" is simpler and would cover almost all
cases.

I'm not sure about the message though.  The Macintosh only has one
button on its mouse -- input is terminated by typing a keystroke on
the keyboard.  Another option would be to use a call to the device
driver to retrieve an appropriate message for the device, of at least
to hide it in the C code where we could use #ifdef to select the
appropriate message.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 28 15:19:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 28 Jan 1999 10:19:20 -0500
Subject: R vs Splus 5
Message-ID: <99Jan28.102219est.13459@mailgate.bank-banque-canada.ca>

>I agree - they are both excellent software and where would R be without
>all the ported S+ libraries?

The recent exchange on R-help has reminded me of a problem which I am wondering
if anyone has thought about (or solved). One of my initial interests in R was to
have at least two sources for the platform on which my library/package runs.
This is always desireable, and some places even legally required (though not
here).

After installing and briefly trying Splus 5  I have discovered that there will
probably be a substantial porting effort in order to get my library working - at
least if I convert to the new classes and methods.  I am not inclined to do this
without some strategy for keeping things working in R. Has anyone thought about
how R will evolve relative to Splus 5?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 28 21:57:07 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 1999 22:57:07 +0100
Subject: rw0632
Message-ID: <x2pv7zdpsc.fsf@blueberry.kubism.ku.dk>

A couple of quibbles with Guidos new version:

Certain "upper-ascii" characters do not show on the command line
unless followed by a nonblank. One of those being the last(!) letter
of the Danish alphabet, "" (aring). Very peculiar.

On drives mounted from a Novell server, R refuses to overwrite
existing .RData and .RHistory files on shutdown. Works fine on real
hard drives.

One strange effect has been seen involving the console font suddenly
changing to a proportional one, and I also had a couple of GPFs, but I
don't think I can reproduce them (yet).

One of my colleagues also said that there was trouble with releasing
files under NT. He was writing SAS commands to a file and the running
SAS on it after closing it, but SAS couldn't open it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@atd.ucar.edu  Sat Jan  2 05:46:18 1999
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Fri, 1 Jan 1999 22:46:18 -0700 (MST)
Subject: .C
Message-ID: <199901020546.WAA09870@ale.atd.ucar.edu>

Happy 1999!

I've been celebrating the holidays by (finally) getting to the port of our 
S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
moment, there are two issues I'd appreciate advice on:

1. Is support for mode "single" data planned anytime soon in R?  A lot of
our NetCDF files contain "single" data and having to coerce into "double"
will increase the use of R memory drastically (and slow things down).

2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
contain the data attributes, which aren't known until the files are read.
Our S+ code defines a dummy variable for the data dimensions, which are 
redefined (calling "S_alloc") and set within the C code once they are known.
The appended example works in S+ using the pointers= argument in .C.  
Is there a way to do this in R?

Thanks...Steve Oncley
oncley@ucar.edu

C-code:

void inquire_varid(
  int *ncid_p,          /* NetCDF file id. File is left open  */
  int *var_id_p,        /* variable id */
  long **varlen,        /* Length of variable, along each dimension */
  long *ndims_r,        /* number of dimensions in variable */
			/* This argument is created automatically by S+'s
			   .C for pointers=T variables */
  char **vartype)       /* character string describing S object type */
{
...
  *varlen = dimval = (long *)S_alloc(ndims,sizeof(long));
...
}

S+ call:
	...
      vardims <- integer(0)             # Length of each dimension
      vartype <- ""                     # "integer","single","double" etc
      # get info about variable
      cdf <- .C("inquire_varid",
        cdfid = cdfid,
        varid = varid,
        vardims = vardims,
        vartype = vartype,pointers=c(F,F,T,F))
	...

P.S. I'm using R 0.64 under Redhat Linux 5.2.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jan  2 07:47:53 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 2 Jan 1999 07:47:53 +0000 (GMT)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.05.9901020733370.1627-100000@auk.stats>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:

As people kept telling me, a `package' in R.

> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

Not `soon' from the responses to my requests.  I think you exaggerate
though: this can at most double the memory usage, and depending on the
machine and if you actually compute with the data (rather than move it
around) may have negliglible speed penalty. Remember too that anything done
with the data inside S-PLUS 3.x (and R, AFAIK) will make several
double-precision copies.

> 2. Is there support for "pointer to pointer" arguments to .C?  NetCDF files
> contain the data attributes, which aren't known until the files are read.
> Our S+ code defines a dummy variable for the data dimensions, which are 
> redefined (calling "S_alloc") and set within the C code once they are known.
> The appended example works in S+ using the pointers= argument in .C.  
> Is there a way to do this in R?

Actually, there is no longer a way to do this in S-PLUS: the pointers=
argument is not available in S-PLUS 5.x.  I think you need to re-think your
strategy: an alternative can be seen in the rpart code.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sun Jan  3 20:44:42 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sun, 3 Jan 1999 12:44:42 -0800 (PST)
Subject: .C
In-Reply-To: <199901020546.WAA09870@ale.atd.ucar.edu>
Message-ID: <Pine.GSO.4.03.9901031230270.11073-100000@wompom.biostat.washington.edu>

On Fri, 1 Jan 1999, Steve Oncley wrote:

> Happy 1999!
> 
> I've been celebrating the holidays by (finally) getting to the port of our 
> S+ NetCDF routines to R, which I'm trying to make into a library.  At the 
> moment, there are two issues I'd appreciate advice on:
> 
> 1. Is support for mode "single" data planned anytime soon in R?  A lot of
> our NetCDF files contain "single" data and having to coerce into "double"
> will increase the use of R memory drastically (and slow things down).

I don't think there's any immediate plan for genuine single precision
support.  I have written some code based on an idea of Peter Dalgaard's
to simplify porting of code that uses single precision. It uses a vector
of integers of class "single" to hold the data and defines various group
methods based on coercing back to double precision at the slightest
provocation. It's very preliminary at the moment, but you can get it at 
http://www.biostat.washington.edu/~thomas/single.tgz

This obviously wouldn't solve the time or memory problems, but only a few
people have time/memory problems that would be solved by single precision
support and it appears that none of them has the substantial amount of
spare time needed to implement it.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jan  4 00:20:25 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 4 Jan 1999 13:20:25 +1300 (NZDT)
Subject: .C
Message-ID: <199901040020.NAA21340@stat1.stat.auckland.ac.nz>

There is a possible solution to the "single" problem which I've been
thinking of introducing on the "next pass" through the memory
management code.  Since it is largely independent of the memory
management system I guess I should get to it rather sooner.

The solution is to introduce a new data type "single" (internally
SNGLSXP) which is identical to "double" (internally REALSXP) except
when it is passed through a .C or .Fortran call.  There the values
are copied to a genuine single precision array before being passed
to the foreign code.

As far as I know, the "single" type in S only exists for compatibility
with Old-S functions.  That's why there is no corresponding single
precision complex type -- Old-S did not have a complex type.
Would it be worth introducing a "singlecomplex" type to parallel the 
"single" real type?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan  4 14:42:38 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 4 Jan 1999 15:42:38 +0100 (CET)
Subject: Submissions to CRAN
Message-ID: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>


HAPPY NEW YEAR to all of you!

To clarify some questions in the recent thread on the timeslab
package (sorry that I couldn't participate in the discussion, but I
normally don't read my email on weekends):

*) Nobody should be able to download from the incoming section at our
site. That it was possible (again) was due to recursive link and some
lazy sysadmins which now have some more things they can try to make
better in the new year.

*) Please `announce' only packages that are really available somewhere
(and an incoming directory should not be considered such a
thing). This could either be

  -) your private server: nobody stops you from putting there whatever
     you want

  -) submissions to CRAN only after they have been moved by one of us,
     especially if it is a first submission. experience shows that
     first submissions very often need a little bit of `polishing' until
     they conform to CRAN standards, hence there are often time
     delays (and the already announced package cannot be found on CRAN).

*) I know that the packaging standards for CRAN may seem a little bit
pedantic, but only this way the `R INSTALL' interface can work without
troubles. Hence, the standards make life a little bit harder for
contributors, but we think it makes life much easier for the average
user (and these are the ones with less knowledge on how to fix
things).

*) On copyright for ports: This seems like a neverending discussion
and as I'm a mathematician and not a lawyer I can only contribute my
2(brand new Euro-)c:

Original code under GPL or similar: Port also GPL and you're done

`free redistribution for non-commercial use': I think it's OK to put
such things onto CRAN ... CD-vendors probably run into troubles.

The StatLib submission guidelines say that all code needs:

      A statement (which should also be part of the submission) that
      explicity gives permission to redistribute the software.  You
      can retain the copyright jsut so long as you clearly state that
      the software can be freely used for non-commercial purposes and can be
      freely distributed.
      If you are not the original author of the submission please make sure
      you obtain the original author's permission before submitting
      the software.

Now what exactly `redistribute' means (only original file or
derivatives) seems an open question to me ... and I think we never
settled this ...


In any case, asking the original author seems like a good first step
to me.


Feedback appreciated (please only to r-devel!!!),
Fritz

PS: After this thread is over we will make official CRAN submission
guidelines (with special emphasis on Statlib ports) and put something
in the FAQ.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jonathan.myles@mrc-bsu.cam.ac.uk  Tue Jan  5 11:31:10 1999
From: jonathan.myles@mrc-bsu.cam.ac.uk (Jonathan Myles)
Date: Tue, 5 Jan 1999 11:31:10 GMT
Subject: [R] Submissions to CRAN
In-Reply-To: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Mon, 4 Jan 1999 15:42:38 +0100 (CET))
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
Message-ID: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>


>  *) I know that the packaging standards for CRAN may seem a little bit
>   pedantic, but only this way the `R INSTALL' interface can work without
>   troubles. Hence, the standards make life a little bit harder for
>   contributors, but we think it makes life much easier for the average
>   user (and these are the ones with less knowledge on how to fix
>   things).

I'm sorry to be dim, but are the "packaging standards for CRAN" the same
thing as the "How can I create an R package" section of the FAQ? If not,
where are they?

Jonathan


-- 
Dr. Jonathan Myles         e-mail:jonathan.myles@mrc-bsu.cam.ac.uk
MRC Biostatistics Unit     Tel. 01223 330371
Institute of Public Health FAX  01223 330388
University Forvie Site
Robinson Way
CAMBRIDGE
CB2 2SR                   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jan  5 11:33:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 5 Jan 1999 12:33:18 +0100 (CET)
Subject: [R] Submissions to CRAN
In-Reply-To: <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
References: <13968.54110.875286.934700@galadriel.ci.tuwien.ac.at>
 <199901051131.LAA05774@genin.mrc-bsu.cam.ac.uk>
Message-ID: <13969.63614.464999.987027@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 5 Jan 1999 11:31:10 GMT,
>>>>> Jonathan Myles (JM) wrote:

>> *) I know that the packaging standards for CRAN may seem a little bit
>> pedantic, but only this way the `R INSTALL' interface can work without
>> troubles. Hence, the standards make life a little bit harder for
>> contributors, but we think it makes life much easier for the average
>> user (and these are the ones with less knowledge on how to fix
>> things).

JM> I'm sorry to be dim, but are the "packaging standards for CRAN" the s=
ame
JM> thing as the "How can I create an R package" section of the FAQ? If n=
ot,
JM> where are they?

Yes, that's exactly what I meant ... sorr for using different
words. With standards I just meant file name conventions, dirs in a
package and all the other stuff that's mentioned in the FAQ or the
help(library) page ...

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Sat Jan  9 20:45:01 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Sat, 9 Jan 1999 15:45:01 -0500 (EST)
Subject: rnorm() with sd=0
Message-ID: <Pine.SUN.3.95.990109153854.8182A-100000@paca>


  Is there a compelling reason why

rnorm(1,mean=m,sd=0)

can't return m instead of NaN?

  The following (trivial) patch makes the change.

*** rnorm.c.orig	Sat Jan  9 15:39:41 1999
--- rnorm.c	Sat Jan  9 15:39:50 1999
***************
*** 35,43 ****
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma <= 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     }
!     return mu + sigma * snorm();
  }
--- 35,46 ----
  #ifdef IEEE_754
          !finite(mu) || !finite(sigma) ||
  #endif
! 	sigma < 0.0) {
  	ML_ERROR(ME_DOMAIN);
  	return ML_NAN; 
!     } else
!     if (sigma==0.0)
!        return mu;
!     else 
!        return mu + sigma * snorm();
  }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 12 11:08:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 12 Jan 1999 11:08:13 +0000 (GMT)
Subject: [R] RH5.2 bundle
In-Reply-To: <Pine.LNX.3.95.990112083226.2868B-100000@mercury.quantex>
Message-ID: <Pine.GSO.4.05.9901121058350.5602-100000@auk.stats>

[I've changed my followup here as some of this is slightly sensitive.]

On Tue, 12 Jan 1999, John Logsdon wrote:

> The web is a very useful device - we can live for ages on the
> laser-printouts but even with a binder, these are not as convenient as a
> real book with examples.  I have in mind the excellent manual for GLIM
> (although rather big) which comes with the (commercial) product but is
> much more than a user manual. Robert and Ross's R Notes, Kurt's FAQ and
> others could form a basis.  The V&R notes, V&S on S(R) could be added and
> some extensive examples such as from Jim Lindsey's repeated measures
> library. I know code modification is seductive but there comes a time in
> any job where the Report just has to be written!

We have discussed an R version of the V&R book (don't know about `V&R
notes' etc -- did that mean our R complements) or including R in the base
version. At least for now it is not thought commercially viable, and there
is also the question of how this would be seen by MathSoft. Volume 1 of the
Third Edition of V&R will run on R virtually unchanged (a large number of
data() statements needed) where the capabilities exist in R (e.g. no nlme,
nls arima.mle etc, yet), and that is due out in July. We plan that Volume 2
will discuss R as one of several `S engines'.

A book about R would be great, but don't understimate the on-going effort
required: keeping our `R complements' current takes an appreciable amount
of time.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 15:15:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 16:15:00 +0100
Subject: Intro notes (1st pass, not for general circ.)
Message-ID: <x21zkz5hmz.fsf@blueberry.kubism.ku.dk>

I've just gotten through translating my notes for the course in basic
statistics for health researchers. I've placed a copy on

ftp://blueberry.kubism.ku.dk/priv/R-intro.tgz

This is essentially a translation of the Danish notes that I wrote
during the Autumn of 1997 for use with Rsept, i.e. roughly R v.50.
They lean heavily on the textbook, Altman: Practical Statistics for
Medical Research. Chapman and Hall, 1991.

For now, this is mainly for information purposes and not for further
redistribution. I haven't yet investigated the possibilities of
getting it published as a real book (ISBN, y'know), so I wouldn't know
what the copyright implications would be. Also, and maybe more
importantly, I haven't yet asked anyone for permission to use their
data in a publication of any sort. I wouldn't expect any problems in
that area (there is no direct reproduction), but one cannot be too
sure.

In their present state, the notes are full of errors; typos, language
and otherwise. I know that and I'm not particularly interested in
being told about them at the present stage, since I'll be going over
the entire stack with a red pencil anyway. General comments and
constructive criticism are welcome, though. 

A couple of important things have changed in the later versions of R,
and I'll be upgrading the student machines to the Win32 version of
0.63.1 (or .2, depending on availability), so the notes are actually
already out of date (the predict() examples are particularly bad).
[Slightly weird feeling to translate stuff you know is wrong, but I
needed to have the work processes separate, and also to have a common
base in Danish and English in order to maintain future parallel
versions.]

The current version (in both languages) also suffers from a haphazard
reversion of the anova and regression analysis sections [caused by
teacher scheduling problems in the Spring98 semester], which is not
really pedagogically sound and introduced a couple of sequencing
errors in the examples -- values geting used before they were
computed... I'll be putting them back in proper order.

I plan to make a proper R package "Rx" out of the extension functions
and example/exercise data. A preliminary version (functions and docs
only) is in ftp://blueberry.kubism.ku.dk/priv/Rx.tgz

The data sets are in ftp://blueberry.kubism.ku.dk/pub/*.txt

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 18:41:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 13:41:05 -0500
Subject: make docs
Message-ID: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>

I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)

Paul Gilbert
______

g77 -O2 -fPIC -c kmns.f -o kmns.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
Building system startup profile
You should `make docs' now ...
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[17] /home/res/gilp/R-versions/R-0.63.2 : which perl
/usr/bin/perl
[18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

This is perl, version 5.004_04 built for sun4-solaris

Copyright 1987-1997, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5.0 source kit.

[19] /home/res/gilp/R-versions/R-0.63.2 : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10[20]
[20]/home/res/gilp/R-versions/R-0.63.2 : make doc
`doc' is up to date.
[21] /home/res/gilp/R-versions/R-0.63.2 : make docs
make: Fatal error: Don't know how to make target `*/man/*.Rd'
Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
[22] /home/res/gilp/R-versions/R-0.63.2 :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan 13 19:01:55 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 13 Jan 1999 11:01:55 -0800 (PST)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.03.9901131100570.10137-100000@wompom.biostat.washington.edu>

On Wed, 13 Jan 1999, Paul Gilbert wrote:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> 
> Paul Gilbert
> ______
> 
> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'

I had this problem with Solaris make but it went away when I used GNU
make.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 13 19:06:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 13 Jan 1999 20:06:28 +0100 (CET)
Subject: make docs
In-Reply-To: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
References: <99Jan13.135926est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <13980.61108.345749.14672@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I'm having trouble with make at the documentation. (R 0.63.2 on Solaris)
> Paul Gilbert
> ______

> g77 -O2 -fPIC -c kmns.f -o kmns.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> mkdir ../../../../library/mva/libs
> mkdir ../../../library/stepfun
> mkdir ../../../library/stepfun/R
> Building system startup profile
> You should `make docs' now ...
> make: Fatal error: Don't know how to make target `*/man/*.Rd'
> Current working directory /home/res4/gilp/R-versions/R-0.63.2/src/library
> [17] /home/res/gilp/R-versions/R-0.63.2 : which perl
> /usr/bin/perl
> [18] /home/res/gilp/R-versions/R-0.63.2 : perl --version

src/library/Makefile has */man/*.Rd wildcards.  You may  need GNU make
to build the docs.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 13 20:01:05 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Jan 1999 15:01:05 -0500
Subject: make docs
Message-ID: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>

How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
switch back because

PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi

works to conditionally set a variable in Sun make but not in gnu. Does anyone
know how to do an equivalent thing in gnu make?

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 13 21:44:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jan 1999 22:44:50 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Wed, 13 Jan 1999 15:01:05 -0500
References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <x2pv8ic0fh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> switch back because
> 
> PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> 
> works to conditionally set a variable in Sun make but not in gnu. Does anyone
> know how to do an equivalent thing in gnu make?

PADI_HOME=$(shell if [ ....)

or something like that. 

I suspect, by the way, that the whole thing might be better written as 

PADI_HOME=$(shell ${PADI_HOME-$PWD})

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Jan 14 00:56:06 1999
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 13 Jan 1999 19:56:06 -0500
Subject: make docs
Message-ID: <199901140057.BAA25116@hypatia.math.ethz.ch>


The following should do what you want (assuming I understand the problem)

 ifndef PADI_HOME
   PADI_HOME=$(shell pwd)
   # or PADI_HOME=${PWD}
 endif

GNU make even allows you determine the source of the value of the
variable - environment, command line, automatic variable, etc.
via the origin function

ifeq "$(orgin PADI_HOME)" "environment"
  # do something.
endif


I can't remember if Gmake guarantees that the 
execution of the shell will give a Bourne shell.
I presume it will use the current value of SHELL
and so the following
     PADI_HOME=$(shell ${PADI_HOME-$PWD})
may not be as robust as the internal gmake solutions.



Duncan


> Cc: R-devel <stat.math.ethz.ch!R-devel>
> References: <99Jan13.151923est.13454@mailgate.bank-banque-canada.ca>
> From: Peter Dalgaard BSA <biostat.ku.dk!p.dalgaard>
> Date: 13 Jan 1999 22:44:50 +0100
> Lines: 23
> Sender: stat.math.ethz.ch!owner-r-devel
> Precedence: bulk
> 
> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > How quickly I forget. Thanks everyone for reminding me about gnu make. I had to
> > switch back because
> > 
> > PADI_HOME:sh = if [ $PADI_HOME ] ; then echo $PADI_HOME; else echo $PWD ; fi
> > 
> > works to conditionally set a variable in Sun make but not in gnu. Does anyone
> > know how to do an equivalent thing in gnu make?
> 
> PADI_HOME=$(shell if [ ....)
> 
> or something like that. 
> 
> I suspect, by the way, that the whole thing might be better written as 
> 
> PADI_HOME=$(shell ${PADI_HOME-$PWD})
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 14 11:21:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Jan 1999 12:21:42 +0100
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
Message-ID: <199901141121.MAA08865@sophie.ethz.ch>

Just for the fun of it (actually in order to test some Fortran more
extensively), 
I've compiled and installed  g77, yesterday on our Solaris 2.5.1 machines.

After doing (in R's toplevel directory)
	make distclean
	./configure
now chooses  g77 (instead of Sun's f77 which was chosen before).
I now do
	make
	make check
	cd tests/Examples
and carefully compare  base-Ex.Rout  to an earlier version of base-Ex.Rout.
I've found the following problem

   Rg77> 0^-1
   [1] -Inf

instead of  {+}Inf  which was correctly returned before.

[[I also had  that "make compare" after g77's installation
  gave output of some differences, i.e., my g77 supposedly *does* have bugs.]]
--
Just to be sure:
Can some of you, particularly those for which 
	grep g77 config.cache
returns something, verify  that 

	0^-1 == Inf

and those who get something else report this (either to me or to R-devel)?

Thanks in advance.
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 14 14:53:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Jan 1999 09:53:14 -0500
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
References: <199901141121.MAA08865@sophie.ethz.ch>
Message-ID: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>

Martin

I get -Inf in Solaris 5.6 with g77.

Paul
______

[1] /home/res4/gilp : grep g77 R/config.cache
ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
[2] /home/res4/gilp : rm .RData
.RData: No such file or directory
[3] /home/res4/gilp : R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type "?contributors" for a list.

Type "demo()" for some demos, "help()" for on-line help, or
     "help.start()" for a HTML browser interface to help.
Type "q()" to quit R.

> 0^-1
[1] -Inf
> q()
Save workspace image? [y/n/c]: n
[4] /home/res4/gilp : uname -a
SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

[6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
GNU Fortran 0.5.23


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 14 15:53:23 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 14 Jan 1999 16:53:23 +0100 (CET)
Subject: 0 ^ -1 == Inf  ??   [g77 bug on Solaris 2.5 ??]
In-Reply-To: <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
References: <199901141121.MAA08865@sophie.ethz.ch>
 <99Jan14.101158est.13462@mailgate.bank-banque-canada.ca>
Message-ID: <13982.4851.195927.799312@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> Martin
> I get -Inf in Solaris 5.6 with g77.

> Paul
> ______

> [1] /home/res4/gilp : grep g77 R/config.cache
> ac_cv_path_F77=${ac_cv_path_F77='/home/res/public/gnu/sun5.6/bin/g77'}
> [2] /home/res4/gilp : rm .RData
> .RData: No such file or directory
> [3] /home/res4/gilp : R

> R : Copyright 1999, The R Development Core Team
> Version 0.63.2  (January 12, 1999)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type "?license" or "?licence" for distribution details.

> R is a collaborative project with many contributors.
> Type "?contributors" for a list.

> Type "demo()" for some demos, "help()" for on-line help, or
>      "help.start()" for a HTML browser interface to help.
> Type "q()" to quit R.

>> 0^-1
> [1] -Inf
>> q()
> Save workspace image? [y/n/c]: n
> [4] /home/res4/gilp : uname -a
> SunOS res98540 5.6 Generic_105181-03 sun4u sparc SUNW,Ultra-5_10

> [6] /home/res4/gilp : /home/res/public/gnu/sun5.6/bin/g77 --version
> GNU Fortran 0.5.23

Debian GNU/Linux 2.0,

hornik@pc87:~/src/apps/R/r-release$ g77 --version
egcs-2.90.29 980515 (egcs-1.0.3 release)

R> 0^-1
[1] Inf

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 15 17:15:34 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Jan 1999 17:15:34 +0000 (GMT)
Subject: Some outer() suggestions
Message-ID: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-342241519-916419809=:25543
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.GSO.3.96.990115171305.25543M@laplace>

I attach outer.tar.gz which contains outer() as extended for arrays, after
noting the suggestion made in the current help file for outer().  It also
has kronecker() and, to help with function matching, match.fun(). 
Documentation is also included.  Note that in the documentation for
match.fun() I suggest that this be used within functions such as apply(),
tapply() etc, and sweep().  Just a suggestion! 

I hope these are helpful.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


---559023410-342241519-916419809=:25543
Content-Type: APPLICATION/octet-stream; name="outer.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990115171534.25543N@laplace>
Content-Description: 

H4sICEJwnzYAA291dGVyLnRhcgDtWVtv2zgW7mv0KzguCtiF6rUdx9ltJw+Z
AQLMLLIDJB1MjLoPjMXYqmlRJaVc1tB/3++QtC620+ylaRe75kMiiefGcw4P
z2cueTadd2/ypHvx4rlGr9/rjYbDF71eb9A/Gtj/w4F9t2NE30aj4fFodDzq
HeJ7/3Bw3HvRezaLaiM3GddQGS1579NUP0qH+S/K6dlVHbpF9Q+/tpnPNZbr
+LMf3zD8m2axSlj77Pe/hSwSZiqSiJ2wsw4LVgHzI75h7dh0p3Ou+TQTmqg7
oGAbYyYyJ2ipIgEprbX8VqekFdIIK5BorCD2Q4OSrbbkgoqsjUTKtRFtk1+b
LM7yzPF3tuhJvF/LDiv/FWsbVptMpe2UG+htTVqtkFluPLLYsERljJcOxeSj
eo1ISVurZnjRdA/kBkXwzPHvXkTPo+HJ/T84PDyu9n9/ZPf/cDjY7/9vMCYJ
X4pVmQVFEEywl6RYndOnMoENu9FqWRUI7DzwYe8b4sgNn9WENKrHyVmHSLiM
uWnq4XqWL0WSGezwSZyJ5Qp8xerM6wiZmDFuoMoYEbFMsckUO3OlsNF10S3W
TF5PsfpZJZlWkt3NRTYXmjiM4BqryJMI74lK3pQLUNefxDQzEEOmkAwdpzSz
CuzKhfHqyCYSVW3mkDRoUZ+f8oRdC8aDsiZa6x1F63WrCMFfzqFy6DiZ1Ulu
tIhAFSjdUFQSpEt+X3QZuxBZrhEN6BNagxq1LVHM+hUig3J9KEE3CuvuBsEv
N17IOiLvYY77UsWD3cVSMqnUwnkrETybB7tcBspszuBhNotvRcIogd4xRS6/
i10xrzwTpCpGhJ0Dd0gjOUltNQZlOBGaZ4Isv8xnM2GIiNMfzMLJcTKVeYSM
iOFzDoVVjpocweYmcPp5msqHAsIja62MFyJs5JCdch/MnRApJVUwueUyF6vT
KtfXzq0HHLauDa2CYdl5ns2VXv2qEjgQMxcqn8VQhikjrMDVT/nsT2fwb65F
sQpOa4mx3hJVtlttWDiXd/zBOFvcbuBBLU8oEHB8ZhOTyHc6ex7PaGPkKREG
fnPIGB4uY2oQTRvSrrNYcGnUytkykXGy8DkDS4uCSMQ9X6ZSYBO/ZJfEzI09
SpH1naAqCfb1JfvtFlmisW+ZDYHTy9ktrFM6cN9wtPffHtV47efO5od6f/K+
ocpOQx3M+97l9b9+WF89Y+9P44nzv987Gm72/4Oj4b7//xaj3HJV738VsrFt
ZqktfY3WtdvtNvp/3383zvuqeb2iOW5QITR/aF91NmFDkkvZTu5tBx8vqdQY
UO3CD47I1YZ2i+oUjJEimWXzNlgtV8k0bqgdP6L2oaF2vFvtw5fVjutq8cEQ
+dRbFDJP0jRMi7QNp9I/L4lI/WND4NWa/Go930WMEIqKuKTVqOt22XbNiIKP
HQXMGmIahrpFE1PHmZzch1htUx5VzdYr9apFJN1TatvWBfh75+p+fP3h6/+z
YT8aT+G/3lG/hv+Obf0/7h3v6/83GA7/uX64xH6/2UMh1SrK0TWqG1dgalDP
dWrVSXFSnhPBPZu8UpNX7CGoYJ8X797adr6zEwBeFWi8XeWlFtuqrZDe+Iuz
FjxW4Ila5BzogJ7m63bTL8mELM5wfj0AT9TKP2efcwXk4fFZJXoSqcwUK2UB
Ipdlm25xDSDJJkQlU3Yhy/ebhpBvyTrnX899VQcmY9v9U7tuafzX08J1zijq
IjG0Wvd96xQqHFYNhBQWV3j2D3HIPtmAhWyBc8Y+fqQf+ugMqWY/IsAfLEHg
3ijEhENr4GSJHWTBb+X6u3kMYCHuU4sXeRZIwQnG3ama62iNjlClHkh5Ky2M
hBjnFeDAPyysgRMeIBTncWidtj7RyIm7PWcxLUKcamGEvrWY0kMZykEHrNa+
c2ddAdismyixvQn3A8B9+n0PiwZ0S2YIvf11pIL7naeh4DawWmiViOkCBFvA
6jyXWZzKeMpdavNrKfweBFQKCS8BXZ1i7Ryu0UIwoEVEZpvrB8+2wexF4I/f
vo2nPZL6nx1l0n3H+5/jHfc/h8f9/fn/DUYZ/38CAwICHmyhu4Mt4HXwEgdi
5A6oPMFBazESYJgWn/NYiyg4kBExNaEce7MBsoIDgm4y+rGHxwNH1YRaBJP6
IXsjI6KmuxJPOK4RjitCR6dSD5s2mhi/SJgfpXQyiBkkDFEZQ4YqOQjZKGSH
mMcsmI343OZSJTN4aOvYLangFw8kszbwso7v21EK0DVV8mTQ+RCCdRD2Ox8b
dnGch8u2fYXElITF/r3j8Su54rXX5jkdcFvoBnIrw/sYeqvt/+92/zMYjbbu
f45oKz2XQfXxf77/Xf9ftR4lBvhrWRjWTXPVktWAQMm5EwxcoYdYaDQR4xoa
qCnzXxzR7juhrwgJ3lVd//P3+j+rZZpTU2tvSuxdgYyJc7HpWAsCbGtMvg2D
nb1s2XM3HY4GX1dXQlZC8AhEWMOLjepRvK1ubJzOoOyfI2Xvsef8VtQuB/Ll
NYyH0ZVo15CbJZdSaI9UYrq6i+iiZtMOsJr479Tii3JZMHeKOTT3JqD5/NqW
yykcSN8z+AmSrh/QxS6quxgYDCEMZXwJmEHNL7QE5DeAD/wjSnd5ZClqd3rt
+/KXsqKGCmwePgELqvz10CBo3gQ+BQ1srmhxA84E66ObVpwL7FTOxLXm7Hcj
bnJp9V1m6NxNFk/h4Ms5f0DTf9Fll4JrKUL2q5on7I9YAhXRii9tHPp/+fPg
3wEfDutsAQ8T0yMzUy653gAUwbn/FZhOtf7bUXmsvWPnATKhOnzoFD3vnJwM
kXXndA30k1TTBVKCz/weo7ytyGmiTaAExP55XUjOyXt7MLIf+7Ef+/Efj38A
iJfMzAAqAAA=
---559023410-342241519-916419809=:25543--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NJOSEPHY@bentley.edu  Sat Jan 16 15:38:47 1999
From: NJOSEPHY@bentley.edu (Norm Josephy)
Date: Sat, 16 Jan 1999 10:38:47 -0500 (EST)
Subject: Core dump on sapply misuse
Message-ID: <01J6LT7685AQ000W0X@bentley.edu>

Developers:

I hope this is the appropriate place to post this request. 

I am getting a core dump in an application of sapply.  A 
simplified example is the following.  Because simplify=TRUE 
is the default for sapply and tapply, the following works

	x <- 1:5; sapply(x,list)

but the following dumps core with an access violation

	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
	
I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
and am also experiencing the 'impossible to access 
clipboard' problem with graphics under NT but not under 
Win95).

Could a gentler message be encoded (e.g. a check after the 
call to lapply) to inform the user that sapply (and tapply) 
is being abused?  A core dump seems a rather harsh caveat 
emptor.

Thank you

Norman Josephy
Department Of Mathematical Sciences
Bentley College
Waltham, MA

E-Mail:  NJOSEPHY@BENTLEY.EDU
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 13:26:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 14:26:18 +0100
Subject: Core dump on sapply misuse
In-Reply-To: Norm Josephy's message of Sat, 16 Jan 1999 10:38:47 -0500 (EST)
References: <01J6LT7685AQ000W0X@bentley.edu>
Message-ID: <x2n23i1151.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Developers:
> 
> I hope this is the appropriate place to post this request. 
> 
> I am getting a core dump in an application of sapply.  A 
> simplified example is the following.  Because simplify=TRUE 
> is the default for sapply and tapply, the following works
> 
> 	x <- 1:5; sapply(x,list)
> 
> but the following dumps core with an access violation
> 
> 	x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
> 	
> I am running R version 0.63.1 under Windows NT 4.00 (p.s. 
> and am also experiencing the 'impossible to access 
> clipboard' problem with graphics under NT but not under 
> Win95).

I believe that one got fixed in 0.63.2. My pre-0.63.3 snapshot gives

> x <- 1:5; myf <- function(x) list(x,x); sapply(x,myf)
     [,1]        [,2]        [,3]        [,4]        [,5]       
[1,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"
[2,] "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1" "Numeric,1"

The bug was in the printing of "odd objects". Whether the above is a
sane representation of

> dput(sapply(x,myf))
structure(list(1, 1, 2, 2, 3, 3, 4, 4, 5, 5), .Dim = c(2, 5),
.Dimnames = list(NULL, NULL))

may still be open for debate, but at least the core dump is gone.

An NT version of 0.63.2 will be out when Guido finds the time. As I
understand the situation, this could be rather soon, unless he also
tries to fix the clipboard problem...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 17 18:27:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1999 19:27:02 +0100
Subject: Other core dumps, with apologies
In-Reply-To: Norm Josephy's message of Sun, 17 Jan 1999 11:12:27 -0500 (EST)
References: <01J6N8O8BIHE0000VI@bentley.edu>
Message-ID: <x2emotzrex.fsf@blueberry.kubism.ku.dk>

Norm Josephy <NJOSEPHY@bentley.edu> writes:

> Sir:
> 
> I hope you do not mind me sending e-mail directly to you 
> rather than to the developer's list.  I wish to avoid 
> unnecessary traffic on the list when the issue I raise may 
> have already been fixed.

As a matter of principle: I *do* mind. One of the purposes of having a
list is that not everyone has the time to deal with questions at any
point in time. If you single out one person, you are in effect forcing
him either to write at least a polite reply explaining that he's busy
or impolitely ignore you...

But never mind: I'll just bounce you onto the list.

> There are two other places where I have induced a core dump.
> 
> x1 <- 1:10
> f1 <- cut(x,5); f2 <- cut(x,4); f3 <- cut(x,3)
> as.matrix(list(f1,f2,f3))
> ----------------------------------------------------
> 
> Just after start-up, as the first expression issued:
> 
> strwidth("abcd")
> -----------------------------------------------------
> 
> One other place: where the documentation says that f1:f2 
> works when f1,f2 are factors
> 
> f1 <- gl(3,2)
> f2 <- gl(2,3)
> f1:f2
> 
> It doesn't core dump, but it doesn't seem to do anything 
> useful either. Is the intent to create what 
> tapply(1:6,list(f1,f2)) creates?
> ------------------------------------------------------
> 
> I am starting this week to teach a 'graphical EDA using R' 
> course to undergrauate business students with very little 
> math or computer language experience.  I have been 
> intentionally 'abusing' R to look for places that my 
> students might inadvertenly stumble into. The focus on the 
> course is graphical exploration of data, and data 
> manipulation will be an important component of my students 
> learning experience.
> 
> If I may, a personal comment about tapply.  This may be just 
> something that I don't understand fully.  If this is just my 
> confusion, or it no longer happens in the latest version, 
> ignore my comments with my apologies.
> 
> The core dump situation I described in my previous post came 
> up in my attempt to 'generalize' the tapply function.  In 
> looking at ways to teach R, it seemed that tapply would 
> accept a list of factors if the function being applied 
> returned a scalar, or a single factor if the function being 
> applied returned a vector, but it core dumped if it was used 
> as
> 
> tapply(x,listOfFactors,vectorReturningFunction)
> 
> My naive solution was :
> 
> j <- tapply(x, listOfFactors) # get the product factor
> answer <- tapply(x,j,vectorReturningFunction)
> .... CODE TO GET THE LABELS RIGHT ....
> ansmat <- array(unlist(answer), dim=someStuff, 
>  dimnames=otherStuff))
>  
>  
> The 'flexibility' of being passed back different structures 
> (list, vector, matrix) depending upon the input structures 
> somewhat complicates the explanation of the functions' 
> usage.  Uniformly returning a properly labelled array, in my 
> naive way of looking at things, might have some merit.
> 
> Although I am not new to programming (started as an 
> undergraduate engineer in the early 60's) I am new to user 
> group lists on the Internet. I don't know what the proper 
> 'group etiquette' is on things like code bombing questions.
> 
> Thank you,
> 
> 
> Norm
> 
> Norman Josephy
> Department of Mathematical Sciences
> Bentley College
> Waltham, MA
> U.S.A.
> 
> E-Mail:  NJOSEPHY@BENTLEY.EDU
> 
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 18 13:53:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Jan 1999 14:53:24 +0100
Subject: Some outer() suggestions
In-Reply-To: <Pine.GSO.3.96.990115171305.25543K-101000@laplace> (message from
 Jonathan Rougier on Fri, 15 Jan 1999 17:15:34 +0000 (GMT))
References: <Pine.GSO.3.96.990115171305.25543K-101000@laplace>
Message-ID: <199901181353.OAA04395@sophie.ethz.ch>

Thank you Jonathan, 
for your submitted suggestions.

to have a more generally working (and [dim]names preserving) "outer()"  has
been (some where low) on my todo list, for a while now.

----
Something for all R package / code writers :
	  --------------------------------
When writing  *.Rd files {aka man pages}:
Please use at least one \keyword{...} line at the end
(use a keyword from  R.../doc/KEYWORDS
  ... are these in the Windows version?)
These are important for several indices (and may become more important in
the future).

---
A few more remarks of (half) general interest:

- Concerning "kronecker",  couldn't we use

    %x%

  as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
  Does anyone see a reason against it?

- match.fun() [your new proposal]:

  Why should it give an error [stop()] instead of return NA or NULL or
  something like that when there's no function match ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Mon Jan 18 14:06:49 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Mon, 18 Jan 1999 14:06:49 +0000 (GMT)
Subject: Some outer() suggestions
In-Reply-To: <199901181353.OAA04395@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990118135942.29339A-100000@laplace>

Hi Martin,

On Mon, 18 Jan 1999, Martin Maechler wrote:

> - Concerning "kronecker",  couldn't we use
> 
>     %x%
> 
>   as an .Alias for the kronecker product (instead of "%kr%" which you proposed)
>   Does anyone see a reason against it?

That's a good idea!

> - match.fun() [your new proposal]:
> 
>   Why should it give an error [stop()] instead of return NA or NULL or
>   something like that when there's no function match ?

There is no compelling reason: the rather brutal error is because I was
concerned to duplicate the procedure in apply().  Hence I used get()
directly, rather than checking for existence first.  But I agree that a
NULL return would be more flexible.  I'd be happy to rewrite.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 19 14:32:22 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Jan 1999 15:32:22 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901191432.PAA21802@sophie.ethz.ch>

There's a non-compatibility between R and S-plus
with the default argument of the
	 locator()
function.

R has		locator(n=1)
S-plus has	locator(n=500, type="n", noclick=F)

S's default is ``better'' I think, insofar as it means in 99% of the cases
	``user clicks <left> as many times as wanted
	  and then clicks <right> to end''

Ross Ihaka and his grad students are working on improving this interface, I
believe, however, I'd propose to just change

the default of n=1 to n=500 
(or another "large" integer in order to not copy S exactly).


Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 11:50:47 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 11:50:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-162216788-916833047=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

On my R installation (0.62.4) there is no dist() function, so I attach one
possibility.  It provides Euclidean distances only, but it does compute
dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
values; naturally dist(X, X) gives the full distance matrix of X.

Hope this is useful, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-162216788-916833047=:29339
Content-Type: APPLICATION/octet-stream; name="dist.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990120115047.29339I@laplace>
Content-Description: 

H4sICOC/pTYAA2Rpc3QudGFyAO1W32/bNhDua/VX3FIUkAbFkOw4A7rloSha
oHsp0L5YiFOAlmiFi0SpJBU7E/y/9470z1ZyU2DZ9uB7sEne8eN3xxPvMqHN
4OOzJ5UojqLLi4tnURQN4/HQ/l8M7TyyayNcu7wcx6PRb2O7Hg9HtPa0tJw0
2jCFR2Yli/5KVa8d6o/iWE8uRs6pePRP03wqyfD+4Y9zmDcyNaKS4E9CSALw
Wg/2ZEI2TA9KZpRY+pPgQCvm4JdCayFzPwkCONy7kYQwJp2qO1JJVS2+Rd6I
tAZpVfQZZCVZZILl/l23hXVhck2HZGVwXVQLrgboDc1uQgghU1V99e6mn3ty
TQR+frO6Z8U6fvc8NZXy/QkgXPB5CC9/fQmK134cggy6iTNjlE8YIZx9En/z
s4DA7g5sVwczXmh+7BJ2F5n0RFOUyweyTH0cYsyvY/SShgkNuzdRFhRc5ubW
t9fVSPGl4f4WYriDGN4EmCa/XEEn0Ebi4Lhem6r2z95jWpQ1M2JWcLBupVyf
9fglbZoUmPTESrKSa6KGPjlybiVxK8fziC7tlQ3UJjg4QscemUr7+ykyNO9A
+yHcJrl6Uqrvem1CBe6bwaP6zFw8drayPJJ2+osyztZbed5//bKd5DGS2fqf
PekZP6j/8fhyr/6PXP0fR+NT/f8XZEpfeEtZgJ/s1AhT8PZtkxYi40wCrTOZ
ctI1muXO0rUItMYKwfR2N1N5U3JpNJaeqTC8bCer9rV7k5dQzaGuBGoHq406
QbWszC1X4Fc1tR/0znTYr7xpxnWqhDVqvTf44jeGA26F79nCjJsF59KqHQYI
CdO0yjhSAiYzr0uVrAYA7+fbGQgN67YmJCwJlSweaOTZBuAceTKZNwVTUDNl
iDLhbnnsPNmeLbSXOvLZgGKGr2XDWw9PnWEgDjjueDDFIRf3XIbAOtA9fKi5
1NS9uS09VZvc+0DRXgjsDxi4ZsQBOEwNRE4Jctm68ig/ve/9DGEh0B1qXcSM
bsopqH1ZkSsbfNmUM6483Il9md5HsNFhjbmtVPsnJoa5xRv+WDW54IpUfMnK
uuCYazYl41fjEPAn8F6Ayw46gkHOGrxA3JpWSvGC2R7X8fVsJV83Qgq7lbk/
jrDeUpt5FUfB79is8mXtn7ucx9IaPH/+Apunbej21SE4i7XB+ghiescfFpXK
WqYUe1id6uJJTnKS/4l8BbYXpwQAEgAA
---559023410-162216788-916833047=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 11:53:48 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 12:53:48 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
References: <Pine.GSO.3.96.990120113952.29339H-101000@laplace>
Message-ID: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 11:50:47 +0000 (GMT),
>>>>> Jonathan Rougier (JR) wrote:

JR> On my R installation (0.62.4) there is no dist() function, so I attach one
JR> possibility.  It provides Euclidean distances only, but it does compute
JR> dist(X, Y) as a matrix, as well as dist(X) as a vector of lower-triangular
JR> values; naturally dist(X, X) gives the full distance matrix of X.

dist is contained in the mva package which comes with (base) R. it
provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
`"binary"' distances both in matrix and triangular form.

I couldn't open the tar file you attached, so I couldn't check your
version.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 20 12:03:38 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
Subject: dist function suggestion
In-Reply-To: <13989.50124.504879.10553@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.3.96.990120115916.29339J-100000@laplace>

On Wed, 20 Jan 1999, Friedrich Leisch wrote:

> dist is contained in the mva package which comes with (base) R. it
> provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> `"binary"' distances both in matrix and triangular form.

Thanks Fritz, but could I still make a general plea for a dist() that
takes one OR two matrices?  I often need to find dist(X, Y) as a
rectangular matrix (eg covariance calculations), and it is very
inefficient to use dist(rbind(X, Y))  and then discard most of it. 
Cheers, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:09:47 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:09:47 +0000 (GMT)
Subject: dist function suggestion
Message-ID: <199901201309.NAA17441@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> cc: r-devel@stat.math.ethz.ch
> Subject: Re: dist function suggestion
> 
> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
> 
> > dist is contained in the mva package which comes with (base) R. it
> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
> > `"binary"' distances both in matrix and triangular form.
> 
> Thanks Fritz, but could I still make a general plea for a dist() that
> takes one OR two matrices?  I often need to find dist(X, Y) as a
> rectangular matrix (eg covariance calculations), and it is very
> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

You will need to call it something else: dist is a clone of an S function,
and dist(X, "manhattan") is well-established usage.

I pointed out to R-core recently that "euclidian" will cause problems
for those who know how to spell it .... (-ean in my dictionaries, and
in S).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 13:22:45 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 14:22:45 +0100
Subject: dist(*, "euclidean") [was "dist function suggestion"]
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Wed, 20 Jan 1999 13:09:47 +0000 (GMT))
Message-ID: <199901201322.OAA04170@sophie.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
    >> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
    >> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> cc: r-devel@stat.math.ethz.ch
    >> Subject: Re: dist function suggestion
    >> 
    >> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
    >> 
    >> > dist is contained in the mva package which comes with (base) R. it
    >> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
    >> > `"binary"' distances both in matrix and triangular form.
    >> 
    >> Thanks Fritz, but could I still make a general plea for a dist() that
    >> takes one OR two matrices?  I often need to find dist(X, Y) as a
    >> rectangular matrix (eg covariance calculations), and it is very
    >> inefficient to use dist(rbind(X, Y))  and then discard most of it. 

    BDR> You will need to call it something else: dist is a clone of an S
    BDR> function, and dist(X, "manhattan") is well-established usage.

one could still imagine an extra Y argument such that
	dist(X, Y=myY, method="euclidean")
and	dist(X, "euclidean", Y=myY)
would work
one could even make it such that
both
	dist(X, myY)
and	dist(X, "euclidean")
would work.  However, the extra hack for 	dist(X, Y)
may not be worth the pain.

    BDR> I pointed out to R-core recently that "euclidian" will cause
    BDR> problems for those who know how to spell it .... (-ean in my
    BDR> dictionaries, and in S).

Yes, thank you;  for me, I've considered this a bug report.
Hopefully nobody has currently code relying on the wrong spelling...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 20 13:24:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Jan 1999 14:24:43 +0100 (CET)
Subject: dist function suggestion
In-Reply-To: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
References: <199901201309.NAA17441@toucan.stats.ox.ac.uk>
Message-ID: <13989.55579.607229.939868@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 20 Jan 1999 13:09:47 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Wed, 20 Jan 1999 12:03:38 +0000 (GMT)
>> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>> To: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
>> cc: r-devel@stat.math.ethz.ch
>> Subject: Re: dist function suggestion
>>=20
>> On Wed, 20 Jan 1999, Friedrich Leisch wrote:
>>=20
>> > dist is contained in the mva package which comes with (base) R. it
>> > provides `"euclidian"', `"maximum"', `"manhattan"', `"canberra"' and
>> > `"binary"' distances both in matrix and triangular form.
>>=20
>> Thanks Fritz, but could I still make a general plea for a dist() that
>> takes one OR two matrices?  I often need to find dist(X, Y) as a
>> rectangular matrix (eg covariance calculations), and it is very
>> inefficient to use dist(rbind(X, Y))  and then discard most of it.=20

PBR> You will need to call it something else: dist is a clone of an S fun=
ction,
PBR> and dist(X, "manhattan") is well-established usage.

well, I don't think we need to call it something different, it's just
that the y argument may not be the 2nd one ...=20



PBR> I pointed out to R-core recently that "euclidian" will cause problem=
s
PBR> for those who know how to spell it .... (-ean in my dictionaries, an=
d
PBR> in S).

fixed (now both are legal)

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 13:48:53 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 13:48:53 +0000 (GMT)
Subject: dist(*, "euclidean") [was "dist function suggestion"]
Message-ID: <199901201348.NAA17744@toucan.stats.ox.ac.uk>

>     BDR> You will need to call it something else: dist is a clone of an S
>     BDR> function, and dist(X, "manhattan") is well-established usage.
> 
> one could still imagine an extra Y argument such that
> 	dist(X, Y=myY, method="euclidean")
> and	dist(X, "euclidean", Y=myY)
> would work
> one could even make it such that
> both
> 	dist(X, myY)
> and	dist(X, "euclidean")
> would work.  However, the extra hack for 	dist(X, Y)

Um, I did think about that, but precisely what would be rules be?
For now the second argument can be anything coercable to a character
(why is match.arg not used?), or should be since ?pmatch says

       x: the values to be matched.

without mentioning mode, although the internal code has isString
(whatever precisely that is).  In particular, names fail in R but not
S, although as documented they should work in R but not S:

> pmatch(as.name("test"), "test")
Error in pmatch(x, table, duplicates.ok) : argument is not of mode character

So at present if the second argument is a character matrix it works.
And there is an as.matrix on X.  So what do you want Y to be?
numeric?  (At present I can have X as a data frame with factors, e.g.
dist(data.frame(factor(1:10)))!)  matrix?  ?

While I am at it

> X <- c(Inf, 0, 0)
> library(mva)
> dist(X)
Error: NAs in foreign function call (arg 1)

is confusing: the error message is caused by Infs too.  (I found this
when writing a version of dist to handle NAs as S's does: the bare code is
now an example in the V&R R complements.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 16:39:34 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 17:39:34 +0100
Subject: data frames with non-unique  row.names
Message-ID: <199901201639.RAA17204@sophie.ethz.ch>

In R and S, the general idea is that data.frames 
must have unique  row.names (aka dimnames(.)[[1]]).

Several observations / problems  (in R *and* S !).

	[Example code at the end]

1)
  Both in S and R,

	  data.frame(..)

  (and e.g., also  cbind(<data.frame>, ..)  which dispatches to data.frame())
  silently drops the whole row.names and replaces it by "1" "2" ...
  if the names would be non-unique.

 PROPOSITION 1:  I have the feeling I'd want to get a warning in that case.
		However, you may prove me wrong... 

2)
   Now, in S (but not in R),
   the  "row.names<-"  function
   gives an error if you try to assign non-unique row.names.

   This is as desired (and R should do the same).

   (== BUG REPORT for R )
   
3) However, I can still  (both in S-plus 3.4 & 5.0r2)
   do
	attr(dat, "row.names") <-  <nonunique character>
  
   and get a resulting data.frame  dat   with non-unique row.names.

 PROPOSITION 2:  I think I want to make sure that a(the same?) error message
		 as in "2)" is generated in this case.

	(this is relatively easily accomplished via R's 
	 SetAttrib() in src/main/attrib.c)

------------------------------------------------------------------
>>>> or am I completely wrong, and there should be a way you can
>>>> construct a data.frame with non-unique row.names ???
------------------------------------------------------------------


Here are the S/R examples: 

## 1)
    dat <- d0 <- matrix(1:12, 3,4)
    dimnames(dat) <- list(c("r","r","r.3"),paste.i("V",4))
    dat
    data.frame(dat)# silently drops the row.names --- S == R

## 2)
    ### Now duplicated row.names:
    dat2 <- data.frame(d0); dimnames(dat2)[2] <- list(paste.i("V",4))
    (d2 <- dat2)

    ## Here, S gives the proper error message "... duplicate names" :
    ## R 0.63.2 simply accepts it;
    row.names(dat2) <-c("s","s","s.3") ; dat2

## 3)

    ## can we trick it (in S)?
    (dat2 <- d2)
    attr(dat2, "row.names") <-c("r","r","r.3") ; dat2
    row.names(dat2)[duplicated(row.names(dat2))]
    ## yes, S-plus 3.4 / 5.0r2 are tricked!!

Comments / suggestions / oppinions are very welcome!
(if not the 2 mailing lists, I'll summarize to them )
---

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 17:04:04 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 12:04:04 -0500
Subject: pow__ii
Message-ID: <99Jan20.122558est.13449@mailgate.bank-banque-canada.ca>

> R code works but the shared objects built from fortran code do not find
> the appropriate libs with functions like  __pow_ii or __epx at runtime.

I used to have endless trouble with  __pow_ii which as I recall could be be
fixed by the correct incantation of the mix of compiler libraries and
LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
right. The problem is that pow_ii is not used by R itself, and so when your
fortran code does something like 4**2 (or using variables declared as integer)
then a call to pow_ii is generated and you need to find the correct library. I
eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
routine which is used by R itself, and I never had to worry about the libraries
again.

This also worked better with Splus, which can also be problematic in this
regard. I highly recommend this change to anyone distributing fortran code with
a package.

I'm not sure about __epx.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 20 17:06:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Jan 1999 18:06:33 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201648.RAA21726@biostat.ku.dk>
 (maechler@stat.math.ethz.ch)
Message-ID: <199901201706.SAA17261@sophie.ethz.ch>

(following up on myself:)

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In R and S, the general idea is that data.frames 
    MM> must have unique  row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems  (in R *and* S !).

	....

    MM> 2)
    MM> Now, in S (but not in R),
    MM> the  "row.names<-"  function
    MM> gives an error if you try to assign non-unique row.names.

    MM> This is as desired (and R should do the same).

    MM> (== BUG REPORT for R )

this is easily fixed in  data.frame.R  if one doesn't want to do the fix
for "3)" as well.
   
    MM> 3) However, I can still  (both in S-plus 3.4 & 5.0r2)
    MM> do
    MM> attr(dat, "row.names") <-  <nonunique character>
  
    MM> and get a resulting data.frame  dat   with non-unique row.names.

    MM> PROPOSITION 2:  I think I want to make sure that a(the same?)
    MM>    error message as in "2)" is generated in this case.

    MM> (this is relatively easily accomplished via R's 
    MM> SetAttrib() in src/main/attrib.c)

    MM> ------------------------------------------------------------------
    >>>>> or am I completely wrong, and there should be a way you can
    >>>>> construct a data.frame with non-unique row.names ???
    MM> ------------------------------------------------------------------

It seems I am wrong -- at least in the eyes of Mathsoft's  S-plus 5
writers:

	data.frame() in S-plus 5.0r2's  has a new argument

		dup.names.ok = F

which you can set to TRUE in order to construct data.frames with non-unique
row.names.

Note however that John Chamber's  S version 4 (which underlies S-plus 5)
does NOT have such an argument.

---
Currently,
I tend to conclude that we should follow S-plus 5 here,
and allow  non-unique row.names , however only via the low-level
	attr(. "row.names")
and not via  row.names(.) <- ...

Further: the 'dup.names.ok = FALSE' seems a good idea for data.frame()
	when you want to speed up constructing of huge data.frames...
	(e.g. when using  read.table(.) on large files !!).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jan 20 18:03:15 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 20 Jan 1999 18:03:15 +0000 (GMT)
Subject: pow__ii
Message-ID: <199901201803.SAA24582@toucan.stats.ox.ac.uk>


> Date: Wed, 20 Jan 1999 12:04:04 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Bodo Ahrens <Bodo.Ahrens@univie.ac.at>, R-devel 
<R-devel@stat.math.ethz.ch>
> Subject: pow__ii
> 
> > R code works but the shared objects built from fortran code do not find
> > the appropriate libs with functions like  __pow_ii or __epx at runtime.
> 
> I used to have endless trouble with  __pow_ii which as I recall could be be
> fixed by the correct incantation of the mix of compiler libraries and
> LD_LIBRARY_PATH. It seemed to be extremely sensitive and never easy to get
> right. The problem is that pow_ii is not used by R itself, and so when your

Wait a minute. With SC4.2 installed on Solaris, __pow_ii is in
/opt/SUNWspro/lib/libF77.so.3, and if you followed the instructions
installing the compilers /opt/SUNWspro/lib/ will be in the library
search path, ahead of the system libraries.  And as R does call libF77,
__pow_ii is in a library it has already dlopen-ed, so it should always
be accessible.  Try ldd R.binary:

        libSM.so.6 =>    /usr/openwin/lib/libSM.so.6
        libICE.so.6 =>   /usr/openwin/lib/libICE.so.6
        libX11.so.4 =>   /usr/openwin/lib/libX11.so.4
        libsocket.so.1 =>        /usr/lib/libsocket.so.1
        libnsl.so.1 =>   /usr/lib/libnsl.so.1
        libz.so =>       /usr/local/lib/libz.so
        libdl.so.1 =>    /usr/lib/libdl.so.1
        libm.so.1 =>     /opt/SUNWspro/lib/libm.so.1
        libF77.so.3 =>   /opt/SUNWspro/lib/libF77.so.3
        libsunmath.so.1 =>       /opt/SUNWspro/lib/libsunmath.so.1
        libc.so.1 =>     /usr/lib/libc.so.1
        libXext.so.0 =>  /usr/openwin/lib/libXext.so.0
        libmp.so.2 =>    /usr/lib/libmp.so.2

(Solaris 2.6 aka SunOS 5.6).

I have just rebuilt R using the SC4.2 compilers and sent Bodo Ahrens
lots of detailed check information.  It works for me on several different
Solaris/compiler combinations.

> fortran code does something like 4**2 (or using variables declared as integer)
> then a call to pow_ii is generated and you need to find the correct library. I

Not on my system: you need n1**n2.

> eventually fixed the problem by changing the fortran code to 4.0D0**2 (or
> 4.0D0**2.0D0 ? and declared variables as double). This generates  calls to a
> routine which is used by R itself, and I never had to worry about the 
libraries
> again.
> 
> This also worked better with Splus, which can also be problematic in this
> regard. I highly recommend this change to anyone distributing fortran code 
with
> a package.

Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
I have not seen problems with this since about 1995, and have just checked
this out:

toucan% cat test.f
      subroutine mypow(n1, n2, n3)
      n2 = n1**n3
      end
toucan% Splus COMPILE test.f
toucan% nm -g test.o
[Index]   Value      Size    Type  Bind  Other Shndx   Name

[8]     |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[7]     |         0|      28|FUNC |GLOB |0    |2      |mypow_

and this dyn.loads into S-PLUS 3.4 without error.

toucan% R SHLIB test.f
ld -G -o test.so test.o -L/usr/local/lib -lblas 

[It also works on a machine without libblas installed.]
toucan% nm -g test.so

test.so:

[Index]   Value      Size    Type  Bind  Other Shndx   Name

[21]    |     66252|       0|OBJT |GLOB |0    |6      |_DYNAMIC
[23]    |         0|       0|OBJT |GLOB |0    |ABS    |_PROCEDURE_LINKAGE_TABLE_
[20]    |         0|       0|NOTY |GLOB |0    |UNDEF  |__pow_ii
[22]    |     66332|       0|OBJT |GLOB |0    |7      |_edata
[18]    |     66332|       0|OBJT |GLOB |0    |8      |_end
[24]    |       716|       0|OBJT |GLOB |0    |5      |_etext
[19]    |       688|      28|FUNC |GLOB |0    |5      |mypow_

> dyn.load("./test.so")
> .Fortran("mypow", as.integer(4), integer(1), as.integer(3))
[[1]]
[1] 4

[[2]]
[1] 64

[[3]]
[1] 3

I suspect Paul like me remembers when this was a problem on SunOS4 with static
libraries, but I don't think it is a problem for S-PLUS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 18:32:28 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 13:32:28 -0500
Subject: pow__ii
References: <199901201803.SAA24582@toucan.stats.ox.ac.uk>
Message-ID: <99Jan20.135427est.13475@mailgate.bank-banque-canada.ca>

>Current Solaris versions of S-PLUS even check up LD_LIBRARY_PATH for you.
>I have not seen problems with this since about 1995,
...
>I suspect Paul like me remembers when this was a problem on SunOS4 with static
>libraries, but I don't think it is a problem for S-PLUS.

Well I do remember having these problems with dynamic libraries too, but 1995
would correspond to about the vintage of things which gave me so much trouble.
The S-Plus version would have been 3.3 and things may well have improved. I
haven't kept track of it much since I made the change to the fortran code, as it
has never again given me any trouble. I also have not been using SunPro.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 20 20:46:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Jan 1999 15:46:40 -0500
Subject: Rd files
Message-ID: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>

Friedrich

I've just been looking at the possibility of converting my html help to Rd
files. Could you please remind me of a few things (or point me to where they are
documented):

- Must there be separate .Rd files for each function or can they be combined
into one large file?

- Is the name{..} field used or is the name field picked up from the file name?
(Looking at the html result of a few tests it seems to be picked up from the
file name, but then what does name{..} do?

- Does this work in file systems with more restrictive (e.g.. 8.3) file names?
If so, how do I specify the function names?

- Is there a fixed set of legitimate headings or can I add things easily?

- Is there a fixed set of legitimate keywords or can I add anything?

- What was once called "details" in the S documentation appears to be called
"description" in the Rd files and what was called description (but was often
just about the same as the title) is gone in the Rd files. Is that right?

- R INSTALL  does not seem to report errors in Rd files that I know have syntax
problems. Is there a way to get error reports?

Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 21 08:22:43 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Jan 1999 08:22:43 +0000 (GMT)
Subject: Rd files
In-Reply-To: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9901210755500.1612-100000@auk.stats>

Paul,

I am replying about the differences in Windows vs Unix, as I modified the
help conversion for Windows.

On Wed, 20 Jan 1999, Paul Gilbert wrote:

> I've just been looking at the possibility of converting my html help to Rd
> files. Could you please remind me of a few things (or point me to where they are
> documented):
 
> - Is the name{..} field used or is the name field picked up from the file name?
> (Looking at the html result of a few tests it seems to be picked up from the
> file name, but then what does name{..} do?

This is used on Windows, and I am urging that it be used on Unix. It is not
currently used on Unix, and this has meant that several files had incorrect
or mis-formated name fields (especially in packages). Most but not all help
files have the name also in an alias field, and that does no harm.  There
are some quirks here: there are a few help files with phrases in the name
field (qraux.Rd, lm.summaries.Rd, ...) and a few that reply on the file
name to give an alias (?Random).  On the other hand, `Alias' appears as a
help entry because it is a file name and seems rather confusing (it
refers to .Alias but not alias).

> - Does this work in file systems with more restrictive (e.g.. 8.3) file names?
> If so, how do I specify the function names?

No such systems are in current use, BUT on Windows the file system may be
case-insensitive, and the programs certainly are. Thus having alias.Rd and
Alias.Rd (as in base) will not work; programs will use the one they find
first. For Windows I have changed these by renaming one of them to start
with z. The current Windows system can cope with arbitrary names for the
.Rd files, and it can generate re-mapped 8:3 names for the help, html and
R-ex files, but we do not use that remapping at present.

> - R INSTALL  does not seem to report errors in Rd files that I know have syntax
> problems. Is there a way to get error reports?

It will report some, but the conversion scripts are very tolerant and some
things are just mis-converted (item fields outside argument and value
fields, for one).  I find I do have to look at the output. Looking at the
help conversion to nroff (temporarily remove the /dev/null in line 108 of
build-help, in RHOME/lib/R/bin if you installed) will show a lot of
warnings/errors, many of which can be ignored, but many are also revealing.
As I cannot suppress these on Windows I get to see them, and have found
a lot of .Rd problems that way.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 21 15:07:48 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Jan 1999 10:07:48 -0500
Subject: Rd files
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca> <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
Message-ID: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>

Friedrich

Thanks for the clarifications and update.

>I'm currently starting (the long announced, but now it's real)
>re-write of Rdconv by making it module-oriented and using Text::Delim
>as extraction engine (as suggested by Doug quite some time ago).

So I guess I should wait to do my conversion.

PG> - Must there be separate .Rd files for each function or can they be combined

PG> into one large file?

>Yes, currently the idea is to have one Rd file per html/help file. I
>never thought about it though ... do many people want to be able to
>have all documentation in one big file?

I don't really care too much about this, I just wanted to make sure I understand
it. However,  it may not be too difficult allow a large .Rd file and have the
build decompose it using the /name{..}. I currently keep many functions in one
file along with their documentation separated by /*   */. I separate this into
the .R and .Rd files with an awk script. So the question for me is whether I
have to separate the .Rd file further or is the R build going to do it. I guess
I would prefer that the R build do it, as I think others may use it this way
too, but I think I can do it fairly easily.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 15:28:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 16:28:14 +0100 (CET)
Subject: Rd files
In-Reply-To: <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
References: <99Jan20.160839est.13457@mailgate.bank-banque-canada.ca>
 <13990.63406.547337.590199@galadriel.ci.tuwien.ac.at>
 <99Jan21.103020est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <13991.18318.406913.164469@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 21 Jan 1999 10:07:48 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> Thanks for the clarifications and update.

>> I'm currently starting (the long announced, but now it's real)
>> re-write of Rdconv by making it module-oriented and using Text::Delim
>> as extraction engine (as suggested by Doug quite some time ago).

PG> So I guess I should wait to do my conversion.

Well, the Rd syntax should NOT change (maybe some additional features)
... so unless something doesn't work as expected the user shouldn't
notice too much of a difference ...


PG> - Must there be separate .Rd files for each function or can they be c=
ombined

PG> into one large file?

>> Yes, currently the idea is to have one Rd file per html/help file. I
>> never thought about it though ... do many people want to be able to
>> have all documentation in one big file?

PG> I don't really care too much about this, I just wanted to make sure I=
 understand
PG> it. However,  it may not be too difficult allow a large .Rd file and =
have the
PG> build decompose it using the /name{..}. I currently keep many functio=
ns in one
PG> file along with their documentation separated by /*   */. I separate =
this into
PG> the .R and .Rd files with an awk script. So the question for me is wh=
ether I
PG> have to separate the .Rd file further or is the R build going to do i=
t. I guess
PG> I would prefer that the R build do it, as I think others may use it t=
his way
PG> too, but I think I can do it fairly easily.

I'll put it on my Rd wish list ... but don't hold your breath waiting
for it.

.f

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 15:37:49 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 15:37:49 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211537.PAA27161@toucan.stats.ox.ac.uk>

> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > From Fritz Leisch

> >Yes, currently the idea is to have one Rd file per html/help file. I
> >never thought about it though ... do many people want to be able to
> >have all documentation in one big file?
> 
> I don't really care too much about this, I just wanted to make sure I 
understand
> it. However,  it may not be too difficult allow a large .Rd file and have the
> build decompose it using the /name{..}. I currently keep many functions in one
> file along with their documentation separated by /*   */. I separate this into
> the .R and .Rd files with an awk script. So the question for me is whether I
> have to separate the .Rd file further or is the R build going to do it. I 
guess
> I would prefer that the R build do it, as I think others may use it this way
> too, but I think I can do it fairly easily.

It's legal with S's files, and it is a great way to avoid file name
problems: just have one file with a simple name (and some of those
in lme and locfit cause problems to several tools: file names with "<" in
are somewhat unexpected!)  However, S has an end of section marker, and
it think that is needed for safety. (In S format, help for one object is
between .BG and .WR.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 21 15:53:32 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1999 09:53:32 -0600
Subject: Rd files
In-Reply-To: Prof Brian Ripley's message of "Thu, 21 Jan 1999 15:37:49 +0000 (GMT)"
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
Message-ID: <6rn23coc5f.fsf@verdi.stat.wisc.edu>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

  >> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
  >> Leisch

  >> >Yes, currently the idea is to have one Rd file per html/help
  >> file. I >never thought about it though ... do many people want to
  >> be able to >have all documentation in one big file?
  >> 
  >> I don't really care too much about this, I just wanted to make
  >> sure I understand
  >> it. However, it may not be too difficult allow a large .Rd file
  >> and have the build decompose it using the /name{..}. I currently
  >> keep many functions in one file along with their documentation
  >> separated by /* */. I separate this into the .R and .Rd files
  >> with an awk script. So the question for me is whether I have to
  >> separate the .Rd file further or is the R build going to do it. I
  >> guess I would prefer that the R build do it, as I think others
  >> may use it this way too, but I think I can do it fairly easily.

  BDR> It's legal with S's files, and it is a great way to avoid file
  BDR> name problems: just have one file with a simple name (and some
  BDR> of those in lme and locfit cause problems to several tools:
  BDR> file names with "<" in are somewhat unexpected!)  However, S
  BDR> has an end of section marker, and it think that is needed for
  BDR> safety. (In S format, help for one object is between .BG and
  BDR> .WR.)

The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
I hadn't realized that the others with "<" in them, like matrix<-.Rd,
also gave problems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 21 16:14:35 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Jan 1999 17:14:35 +0100 (CET)
Subject: Rd files
In-Reply-To: <6rn23coc5f.fsf@verdi.stat.wisc.edu>
References: <199901211537.PAA27161@toucan.stats.ox.ac.uk>
 <6rn23coc5f.fsf@verdi.stat.wisc.edu>
Message-ID: <13991.21099.247265.757078@galadriel.ci.tuwien.ac.at>

>>>>> On 21 Jan 1999 09:53:32 -0600,
>>>>> Douglas Bates (DB) wrote:

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
>>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca> > From Fritz
>>> Leisch

>>> >Yes, currently the idea is to have one Rd file per html/help
>>> file. I >never thought about it though ... do many people want to
>>> be able to >have all documentation in one big file?
>>> 
>>> I don't really care too much about this, I just wanted to make
>>> sure I understand
>>> it. However, it may not be too difficult allow a large .Rd file
>>> and have the build decompose it using the /name{..}. I currently
>>> keep many functions in one file along with their documentation
>>> separated by /* */. I separate this into the .R and .Rd files
>>> with an awk script. So the question for me is whether I have to
>>> separate the .Rd file further or is the R build going to do it. I
>>> guess I would prefer that the R build do it, as I think others
>>> may use it this way too, but I think I can do it fairly easily.

BDR> It's legal with S's files, and it is a great way to avoid file
BDR> name problems: just have one file with a simple name (and some
BDR> of those in lme and locfit cause problems to several tools:
BDR> file names with "<" in are somewhat unexpected!)  However, S
BDR> has an end of section marker, and it think that is needed for
BDR> safety. (In S format, help for one object is between .BG and
BDR> .WR.)

DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
DB> also gave problems.

Does S also store the complete output in one file or is the output
split into different files? 

In the second case we'd simply move the problem from problematic input
names to problematic output names ...

Anyway, what we need is a safe method of seperating file names from
function names. As this is platform-dependent we might do the
following:

output filenames are passed through an OS-dependent safety checker,
which replaces special characters by some unique identifiers, the
mapping alias <-> file is done using an index file anyway. this would
work very much like the current 8.3 conversion, just that it leaves
most file names untouched.

adding another platform then just amounts to adding another function
which should be the cleanest way of doing it.

the one-input-file thing is trivial, so I'll plan to do it in any
case.

.f




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jan 21 16:23:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Jan 1999 16:23:56 +0000 (GMT)
Subject: Rd files
Message-ID: <199901211623.QAA27325@toucan.stats.ox.ac.uk>


> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> 
> BDR> It's legal with S's files, and it is a great way to avoid file
> BDR> name problems: just have one file with a simple name (and some
> BDR> of those in lme and locfit cause problems to several tools:
> BDR> file names with "<" in are somewhat unexpected!)  However, S
> BDR> has an end of section marker, and it think that is needed for
> BDR> safety. (In S format, help for one object is between .BG and
> BDR> .WR.)
> 
> DB> The .Rd file name in lme that always gives me trouble is [.pdMat.Rd.
> DB> I hadn't realized that the others with "<" in them, like matrix<-.Rd,
> DB> also gave problems.
> 
> Does S also store the complete output in one file or is the output
> split into different files? 

In the cases where you want to do this, one. You can convert to Windows
help (one file per library) or to process to postscript (pipe to
stdout).  Standard S files are processed at display time, so there is
no output file per se, just a screen or printer.

> In the second case we'd simply move the problem from problematic input
> names to problematic output names ...

Yes, but it does not occur in my experience.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 21 17:15:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Jan 1999 18:15:04 +0100
Subject: data frames with non-unique  row.names (PR#98)
In-Reply-To: <199901201639.RAA17204@sophie.ethz.ch> (message from Martin
 Maechler on Wed, 20 Jan 1999 17:39:34 +0100)
Message-ID: <199901211715.SAA03088@sophie.ethz.ch>

My conclusions from the (two !) reactions on my posting of yesterday:

    MM> In R and S, the general idea is that data.frames must have unique
    MM> row.names (aka dimnames(.)[[1]]).

    MM> Several observations / problems (in R *and* S !).

    MM> 	[Example code at the end]

    MM> 1) Both in S and R,

    MM> 	  data.frame(..)

    MM>   (and e.g., also cbind(<data.frame>, ..)  which dispatches to
    MM> data.frame()) silently drops the whole row.names and replaces it by
    MM> "1" "2" ...  if the names would be non-unique.

    MM>  PROPOSITION 1: I have the feeling I'd want to get a warning in
    MM> that case.  However, you may prove me wrong...

I'll introduce this warning.. in the current source, 
[if I still don't hear reasons against it..]

    MM> 2) Now, in S (but not in R), the "row.names<-" function gives an
    MM> error if you try to assign non-unique row.names.

    MM>    This is as desired (and R should do the same).

    MM>    (== BUG REPORT for R )

This is already in tomorrow's R-release patches
   
    MM> 3) However, I can still (both in S-plus 3.4 & 5.0r2) do attr(dat,
    MM> "row.names") <- <nonunique character>
  
    MM>    and get a resulting data.frame dat with non-unique row.names.

    MM>  PROPOSITION 2: I think I want to make sure that a(the same?) error
    MM> message as in "2)" is generated in this case.

no, we won't do this.
Apparently, S-plus 5.0 now even provides an explicit argument to
data.frame() allowing for non-unique  row.names
(in order to  bootstrap() or quickly read.table()  large data.frames).

---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 08:08:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 09:08:50 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990121172536.29339O-100000@laplace> (message from
 Jonathan Rougier on Thu, 21 Jan 1999 17:29:42 +0000 (GMT))
Message-ID: <199901220808.JAA05768@sophie.ethz.ch>


>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> ...  By the way, I have `solve'
    JonR> methods for triangular matrices and variance matrices -- would
    JonR> you be interested?

	{ Jonathan, I hope it's okay if I CC this to R-devel;  
	  this must be of a wider interest }

Ye.e..s;  
for triangular ones, there's the 4 different ways of 
backsolve()/forwardsolve()..

Well, we (R core) have  discussed matrix classes months and years ago..
and haven't really started doing anything about it.

I think we then agreed to follow Splus'  Matrix library
and use class "Matrix"
(and classes inheriting from "Matrix", i.e.
	class == c("specialMatrix", "Matrix")
).

If we really go into this, then 
we'd probably want to use the SAME class names that S-plus' library(Matrix)
is using. 
Also, I remember that people (on the old R-testers list?) 
very much desired to have 1-column or 1-row matrices instead of vectors
when working within the "Matrix" class  [= behavior of  Octave/Matlab ?]

Other opinions / (code) contributions ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jan 22 10:14:49 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Jan 1999 10:14:49 +0000 (GMT)
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <199901220808.JAA05768@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1902445306-917000089=:29339
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hi Martin,

I attach my versions of solve methods for triangular and variance
matrices.  The triangular method is a wrapper for backsolve() which
allows both a trans flag and a right flag (ie giving the four different
solves that you alluded to).  The variance method uses a cholesky
decomposition and then two triangular solves (one with the trans flag
set), as recommended by Golub and van Loan.  I have taken care with the
returning vector/matrix, as in the backsolve() patch!

I was not in on the previous Matrix class discussion.  I use them in
Splus, but from a purely aesthetic point of view I don't like the idea
that R would need a Matrix add-on.  I think I would rather see the
appropriate methods built into the base. 

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1902445306-917000089=:29339
Content-Type: APPLICATION/octet-stream; name="solve.tar.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990122101449.29339R@laplace>
Content-Description: 

H4sICMlMqDYAA3NvbHZlLnRhcgDtWHtv2zYQz7/hp7gkaCcNiiH5kT62rFg2
dNjQrUMbGwGaDqMl2uaiV0XKrqHqu+9ISrJk97ECaYYCPgQxJB7vxbvj/SSS
cMl6MuM0nuchzXovDm6dXM91z4bDA9d1+96or3+Hff2sadQfHbhnZ6O+Ozzz
vDN87w3x8cC9fVN2KReSZqgyiKj7j599kA/XPyrH1V4NjFPe4LbN/FIkts4f
vj+FWR77kiexNXbgwgGZ0VicP3Ug4/OFPH9qk4IcxooxzpKVNbbJIZ+BFXEh
eDy3Lmx8cXih1gNO51aMjywUDPQrKnoRRXVvkc/sO7K0Anj3zijQ26fUv9Gm
aRtqCYrdMN+/D0eGu8Ms0ZpX8WPPAfz3GneaBweCLEnPn762t55bco8awY1c
aTUmSDS3jsSlXdsjrY6dignXSvJ/H+pn0Pb5914Et67jE/U/8NxW/fcfqPof
uQN3X/93QNcxjVixnQUlIdeSy5AVL9UKsDc5VR1BwIrLBbTahSlmxZ8LOt+V
9KEeonbQkFPxXt00m+cRi6UoCFxzyaJiXBbjNGXZru5eWfNclMXzVJlJQ1gy
XyYZJLtc2pSyeLlI8jCAaz8JGEqHKTNGpolgwZOGW9tbFj8nTGx4kUeeRnko
eRqukVeZHDDhZ1yrL8jlgkHAZhRZwKeqwwiQCWhXazFwfe/b63twBedwUcIM
LTULV2VP75erBGYhnQugoUjwX5isQOICSsmVGkhm1RbV9jriiFUtmIZVYu+q
hFdsY6O1YjOHotloHJAuqxbe5q6E1meJ23oAv9a2oHJ0troMHPCTKM0lBk9Z
zuMlyzAajeHjsmdiJykP8bDN252MUOGjsMqozoBNqJruW2KGJUTSG4bhzrQC
pQ/5sc+jHMkAd0a5rLIYvdyctlDmxyrARJ1V65wVW+0VKLliQVMWqKOcdqWj
9l2TtBY0I2NCJcIsS6Idw9E1kjGaoTFzlEx9P8kCjFy41pFZ0jBnBRnHIb+p
M8eEp0qvtpEd3eGKrgWqlnkWC0LrMgC4XGA08W/KfJoL1mQdcqy1W4C3elU/
2gaay0WSFb9hXckFjeFFks8503UqGFPJWRgZ1yGPb4x5ZVlnXOtlb0nVmfpq
lbRXN4aXSip7S6M0ZJgPYzUyVPOC97g/cvTIcT6yv4PxKzN8/OAnIf68Vpwu
8UMqhEpYfDreZNAx0cOHb3lO3xk4I+eBTUh1b9uHSCeYASY3pxiEyhw8hh4h
J6CqcZao+sM3ui5TyjOhM+KP55emKLGNqqhjqPL5AjfhyzWsdI9RraViqeLa
KG81x0tb2/GsXcgOPp7rCiRbo0hVe2ZPu6rVclt85V6n3WwL265ouyXzWS1T
ncwNW68wPwuVr2uHhnM2zehXNe/sqUvdwvwS6O+/4L9+C//p+W84cAf7+e8O
qHv+HfQ30cirUCjNClk8lwtLo7485m9yZgU8siaId+DoHDwFl4RMUuv4d92t
IU4kCJwaM3aMaxPdfRfYqSf4ZJr0ZLdJQ0WosI0mYYu62JJH6pF3cOUJ7ODa
7oVYXSqN6LWSYbripNOTyWF3aV2hVh7ZuEmjQIS0pqtb668M/B3s1v/to79P
1n+/P/Q29a9wH9b/cNjf1/8dUBv/NePZx9Efzsxc8qVGODxGlARiHUUM68n/
ABysBZuWsg392mp3gd+kLP7cUahm3m2lDvAe60HTyj4THZZdCKc9N6ildr8a
aCc7wK0GTDjzrhYsq0fqCY7UmF1q/NsNmcJZjQcGP8XJBmzgfD5H/th5P26a
aNwwS/I46ACon9poS/VbJm7WqFShMG1CGzVOyhqhxCRQ+FZNtoJJoVjUDAwi
nwpMBIM2c6Gn30XtXhuxoxuLJNiINsN8C8H82Ao5bQ4sYCmLFdqBPG3ie2H2
ZWyGocSDFMXf1Z1ivDOp+I0DvyAOnmoXlohKniUUo+U9ejhwIE178PDs9JF3
y/il5fIWglGx3gYvIcfhOFtb0ZLa5KqFZDK8QWfW0HXtCs9gf7RJEHS/jwZc
SOsKrz99ebK3qXUaBH/1bdK5Put0PyZk4rVuqvp7wEQN/ypwCqzg4Ynqw4I6
B9/PM+qvyaTfbKxhZVvAiY6x/gghecRqcIG17D1Wlmt8Ud+rtEY4DdPGI8Nu
d7ire7jcY4s97WlPe7pb+hd2QJcuAB4AAA==
---559023410-1902445306-917000089=:29339--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 22 10:22:06 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Jan 1999 11:22:06 +0100
Subject: backsolve... --> class()es for special matrices ?
In-Reply-To: <Pine.GSO.3.96.990122100434.29339Q-101000@laplace> (message from
 Jonathan Rougier on Fri, 22 Jan 1999 10:14:49 +0000 (GMT))
Message-ID: <199901221022.LAA14764@sophie.ethz.ch>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> I attach my versions of solve methods for triangular and variance
    JonR> matrices.  The triangular method is a wrapper for backsolve()
    JonR> which allows both a trans flag and a right flag (ie giving the
    JonR> four different solves that you alluded to).  The variance method
    JonR> uses a cholesky decomposition and then two triangular solves (one
    JonR> with the trans flag set), as recommended by Golub and van Loan.
    JonR> I have taken care with the returning vector/matrix, as in the
    JonR> backsolve() patch!

    JonR> I was not in on the previous Matrix class discussion.  I use them
    JonR> in Splus, but from a purely aesthetic point of view I don't like
    JonR> the idea that R would need a Matrix add-on.  I think I would
    JonR> rather see the appropriate methods built into the base.

I agree [at least as long as we only do small wrappers, etc..].
My point was that I want to use the same class() names as S+'s Matrix
library -- in those cases where do (+/-) the same.

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Mon Jan 25 23:24:44 1999
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Mon, 25 Jan 1999 18:24:44 -0500 (EST)
Subject: segments() bug?
Message-ID: <Pine.SUN.3.95.990125181841.14827A-100000@paca>


  Is there a reason that segments()

function (x0, y0, x1, y1, col = par("fg"), lty = par("lty"), 
    lwd = par("lwd"), xpd = FALSE) 
.Internal(segments(x0, y0, x1, y1, col = col, lty = lty, lwd = lwd, 
    xpd = xpd))

  has xpd=FALSE in the second line instead of xpd = par("xpd") ?

  Ben Bolker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan 26 01:01:43 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 26 Jan 1999 14:01:43 +1300 (NZDT)
Subject: segments() bug?
Message-ID: <199901260101.OAA01810@stat1.stat.auckland.ac.nz>

> From: Ben Bolker <ben@eno.Princeton.EDU>
> To: R development mailing list <R-devel@stat.math.ethz.ch>
> Subject: segments() bug?
> 
> Is there a reason that segments()
> has xpd=FALSE in the second line instead of xpd = par("xpd") ?

Historical reasons?  In fact this should be taken care of with a
... argument which passes additional "par" values.  I'm doing a pass
through the graphics at present and will fix it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 26 09:53:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Jan 1999 10:53:48 +0100
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901191432.PAA21802@sophie.ethz.ch> (message from Martin
 Maechler on Tue, 19 Jan 1999 15:32:22 +0100)
Message-ID: <199901260953.KAA15124@sophie.ethz.ch>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> There's a non-compatibility between R and S-plus with the default
    MM> argument of the locator() function.

    MM> R      has locator(n=1)
    MM> S-plus has locator(n=500, type="n", noclick=F)

    MM> S's default is ``better'' I think, insofar as it means in 99% of
    MM> the cases ``user clicks <left> as many times as wanted and then
    MM> clicks <right> to end''

    MM> Ross Ihaka and his grad students are working on improving this
    MM> interface, I believe, however, I'd propose to just change

    MM> the default of n=1 to n=500 (or another "large" integer in order to
    MM> not copy S exactly).

I got 0 feedback..

What about the following new  locator()
which additionally adds a   `msg' argument 

The old behavior is got  by
	locator( *, msg="")  or  
	locator(*, msg=NULL) 

locator <- function(n = 512, 
                    msg = "Click left to locate points;  right to end") 
{
    do.msg <- is.character(msg) && nchar(msg) > 0
    if(do.msg) cat(msg,": ",sep="")
    z <- .Internal(locator(n))# n <= 0 gives error
    if(do.msg) cat("\n")
    x <- z[[1]]
    y <- z[[2]]
    if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
}


---
Would anyone not like the default of `msg' writing to the console?
I've often been startled by functions using locator() and not prompting
the user to do start clicking in the graphic window at all..

One could also use the new argument

 prompt =
   "Use the graphics window to locate points;\n click left to add, right to end"

Feedback welcome !!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jan 26 11:47:24 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Jan 1999 11:47:24 +0000 (GMT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
Message-ID: <199901261147.LAA26972@toucan.stats.ox.ac.uk>

Martin,

I would much rather you fixed the lack of a type= argument first:
without that the use of n > 1 is not very much use as there can be no
feedback to the user.

S-PLUS devices give some feedback by changing the cursor: R devices I
have seen do not.


> Date: Tue, 26 Jan 1999 10:53:48 +0100
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-devel@stat.math.ethz.ch
> Subject: Re: locator(n=1) or  (n=500)  as S-plus ?
> 
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
>     MM> There's a non-compatibility between R and S-plus with the default
>     MM> argument of the locator() function.
> 
>     MM> R      has locator(n=1)
>     MM> S-plus has locator(n=500, type="n", noclick=F)
> 
>     MM> S's default is ``better'' I think, insofar as it means in 99% of
>     MM> the cases ``user clicks <left> as many times as wanted and then
>     MM> clicks <right> to end''
> 
>     MM> Ross Ihaka and his grad students are working on improving this
>     MM> interface, I believe, however, I'd propose to just change
> 
>     MM> the default of n=1 to n=500 (or another "large" integer in order to
>     MM> not copy S exactly).
> 
Why not 99999 or whatever?


> I got 0 feedback..
> 
> What about the following new  locator()
> which additionally adds a   `msg' argument 
> 
> The old behavior is got  by
> 	locator( *, msg="")  or  
> 	locator(*, msg=NULL) 
> 
> locator <- function(n = 512, 
>                     msg = "Click left to locate points;  right to end") 
> {
>     do.msg <- is.character(msg) && nchar(msg) > 0
>     if(do.msg) cat(msg,": ",sep="")
>     z <- .Internal(locator(n))# n <= 0 gives error
>     if(do.msg) cat("\n")
>     x <- z[[1]]
>     y <- z[[2]]
>     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
> }
> 
> 
> ---
> Would anyone not like the default of `msg' writing to the console?


Could you make sure it puts out a "\n" as well?  Unfinished lines
in the middle of output are a visual pain, and on line-buffered devices
may not appear at all.


> I've often been startled by functions using locator() and not prompting
> the user to do start clicking in the graphic window at all..

R misses one of S-PLUS's visual clues, of course.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moro@ibwk.baum.ethz.ch  Tue Jan 26 17:01:14 1999
From: moro@ibwk.baum.ethz.ch (moro)
Date: Tue, 26 Jan 1999 18:01:14 +0100
Subject: R and AIX
Message-ID: <36ADF4DA.FF9EC717@ibwk.baum.ethz.ch>

dear all,

we finally succeeded to compile R-0.63.2 to the end (on a RS/6000 with AIX 4.2.1)
setting the following flag in config.site:
 SHLIBLDFLAGS="-bM:S1L -bnoentry -bnogc -berok -lc -lm -lodm -lcfg" 
and using (AIX)make (not with gnu-make!)

It's not a good way, to get arround the loading Problem in AIX, but it works.

Any further suggestions?

Fabrizio Moro
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jan 28 06:59:24 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 28 Jan 1999 19:59:24 +1300 (NZDT)
Subject: locator(n=1) or  (n=500)  as S-plus ?
In-Reply-To: <199901260953.KAA15124@sophie.ethz.ch>
References: <199901191432.PAA21802@sophie.ethz.ch>
 <199901260953.KAA15124@sophie.ethz.ch>
Message-ID: <14000.2260.524484.238797@g.ihaka.slip.auckland.ac.nz>

Martin Maechler writes:
 > >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
 > 
 >     MM> There's a non-compatibility between R and S-plus with the default
 >     MM> argument of the locator() function.
 > 
 >     MM> R      has locator(n=1)
 >     MM> S-plus has locator(n=500, type="n", noclick=F)
 > 
 >     MM> S's default is ``better'' I think, insofar as it means in 99% of
 >     MM> the cases ``user clicks <left> as many times as wanted and then
 >     MM> clicks <right> to end''
 > 
 >     MM> Ross Ihaka and his grad students are working on improving this
 >     MM> interface, I believe, however, I'd propose to just change
 > 
 >     MM> the default of n=1 to n=500 (or another "large" integer in order to
 >     MM> not copy S exactly).
 > 
 > I got 0 feedback..
 > 
 > What about the following new  locator()
 > which additionally adds a   `msg' argument 
 > 
 > The old behavior is got  by
 > 	locator( *, msg="")  or  
 > 	locator(*, msg=NULL) 
 > 
 > locator <- function(n = 512, 
 >                     msg = "Click left to locate points;  right to end") 
 > {
 >     do.msg <- is.character(msg) && nchar(msg) > 0
 >     if(do.msg) cat(msg,": ",sep="")
 >     z <- .Internal(locator(n))# n <= 0 gives error
 >     if(do.msg) cat("\n")
 >     x <- z[[1]]
 >     y <- z[[2]]
 >     if((n <- z[[3]]) > 0) list(x=x[1:n], y=y[1:n]) 
 > }
 > 
 > 
 > ---
 > Would anyone not like the default of `msg' writing to the console?
 > I've often been startled by functions using locator() and not prompting
 > the user to do start clicking in the graphic window at all..
 > 
 > One could also use the new argument
 > 
 >  prompt =
 >    "Use the graphics window to locate points;\n click left to add, right to end"
 > 

Sorry Martin, I missed this earlier.  I've got altogether too many
balls which I'm trying to keep in the air at present.

You proposal looks fine.  Another option would be to allow unlimited
points to be identified, and resize the array inside the C locator
function if necessary, but "500" is simpler and would cover almost all
cases.

I'm not sure about the message though.  The Macintosh only has one
button on its mouse -- input is terminated by typing a keystroke on
the keyboard.  Another option would be to use a call to the device
driver to retrieve an appropriate message for the device, of at least
to hide it in the C code where we could use #ifdef to select the
appropriate message.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 28 15:19:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 28 Jan 1999 10:19:20 -0500
Subject: R vs Splus 5
Message-ID: <99Jan28.102219est.13459@mailgate.bank-banque-canada.ca>

>I agree - they are both excellent software and where would R be without
>all the ported S+ libraries?

The recent exchange on R-help has reminded me of a problem which I am wondering
if anyone has thought about (or solved). One of my initial interests in R was to
have at least two sources for the platform on which my library/package runs.
This is always desireable, and some places even legally required (though not
here).

After installing and briefly trying Splus 5  I have discovered that there will
probably be a substantial porting effort in order to get my library working - at
least if I convert to the new classes and methods.  I am not inclined to do this
without some strategy for keeping things working in R. Has anyone thought about
how R will evolve relative to Splus 5?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 28 21:57:07 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 1999 22:57:07 +0100
Subject: rw0632
Message-ID: <x2pv7zdpsc.fsf@blueberry.kubism.ku.dk>

A couple of quibbles with Guidos new version:

Certain "upper-ascii" characters do not show on the command line
unless followed by a nonblank. One of those being the last(!) letter
of the Danish alphabet, "" (aring). Very peculiar.

On drives mounted from a Novell server, R refuses to overwrite
existing .RData and .RHistory files on shutdown. Works fine on real
hard drives.

One strange effect has been seen involving the console font suddenly
changing to a proportional one, and I also had a couple of GPFs, but I
don't think I can reproduce them (yet).

One of my colleagues also said that there was trouble with releasing
files under NT. He was writing SAS commands to a file and the running
SAS on it after closing it, but SAS couldn't open it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

