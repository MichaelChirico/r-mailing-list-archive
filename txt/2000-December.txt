From Kurt.Hornik@ci.tuwien.ac.at  Fri Dec  1 08:05:03 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 1 Dec 2000 09:05:03 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <14887.23471.959713.364415@mithrandir.hornik.net>

>>>>> Robert King writes:

> On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:
>> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> 
>> > I don't want to re-invent the wheel, and I'm trying to code up something
>> > that does a Nelder-Mead simplex method to minimise a non-linear objective
>> > function.  (I'm porting something I originally wrote in matlab, using the 
>> > optimisation toolbox funciton fmins).
>> 
>> optim(method="Nelder-Mead")
 
> Thanks.  Perhaps I should just learn to spell like the OED :-) 

>> Now how did this not come up in a search: perhaps because of the way you
>> spell optimization?  I have
 
>> which shows we probably need to find a way to check variant spellings.
>> 
>> (BTW: just in case anyone tells me the British spell with an `ise', the
>> Oxford English Dictionary does not.)

> I guess this means I should change the spelling of the
> parameterisation in the gld package functions.  What do people think
> of adding extra arguments to functions to take account of different
> spellings like this:

> example.fn _ function(parameterisation="fing",parameterization=NULL)
> {
> if (is.null(parameterization)) {parameterization_parameterisation}
> else {parameterisation_parameterization}
> print(parameterisation)
> }

> Is there a better way?

Well, first of all use `<-' rather than `_'.

We've discussed the spelling issue on r-core in some detail.  You may
notice that e.g. there are both license() and licence().  [There is a
more important issue in gray versus grey, I guess.]

I personally think that there is nothing that says that argument names
must have any meaning in any language and hence one may spell them in
any way we want.  But more realistically, in the above case I'd rather
have

	exampleFn <- function(param = "fing", ...)

which will make everyone happy.

The real issue I see is how people can find documentation if they use
different spelling, and I think we need a fuzzy grep which allows near
matches for that purpose.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Dec  1 19:47:32 2000
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 1 Dec 2000 20:47:32 +0100 (MET)
Subject: [Rd] bug in outer() (PR#755)
Message-ID: <200012011947.UAA24188@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.1.1
OS: nt4.0
Submission from: (NULL) (144.81.31.148)


sim3pl <- function(theta,i) {
p2 <- p3pl(theta,i)
p1 <- runif(1)
temp <- response(p1,p2)
return(p1)
}

when calling outer(theta,items,sim3pl), where 

theta = rnorm(100,m,s)

and 

items = seq(1:nvar)

runif(1) is only called once (instead of 100*nvar times),
even though if calling sim3pl manually, it is working ok.

best regards,
Matthias von Davier

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec  1 20:23:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 1 Dec 2000 12:23:23 -0800 (PST)
Subject: [Rd] bug in outer() (PR#755)
In-Reply-To: <200012011947.UAA24188@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0012011221320.10738-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 mvondavier@ets.org wrote:

> 
> sim3pl <- function(theta,i) {
> p2 <- p3pl(theta,i)
> p1 <- runif(1)
> temp <- response(p1,p2)
> return(p1)
> }
> 
> when calling outer(theta,items,sim3pl), where 
> 
> theta = rnorm(100,m,s)
> 
> and 
> 
> items = seq(1:nvar)
> 
> runif(1) is only called once (instead of 100*nvar times),
> even though if calling sim3pl manually, it is working ok.

It's not a bug. That's what's supposed to happen.

outer(a,b,f) calls f() once, with two very long vectors as arguments. It
only works on vectorised functions.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Dec  2 09:17:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Dec 2000 10:17:28 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <14886.47422.630186.442419@mithrandir.hornik.net>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <14886.47422.630186.442419@mithrandir.hornik.net>
Message-ID: <14888.48680.586997.442553@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
    >>> I don't want to re-invent the wheel, and I'm trying to code up something
    >>> that does a Nelder-Mead simplex method to minimise a non-linear objective
    >>> function.  (I'm porting something I originally wrote in matlab, using the 
    >>> optimisation toolbox funciton fmins).
    >>> 
    >>> Is there already something available to do this included in R?
    >>> Do people have suggestions on the best way to do this?

    >> optim(method="Nelder-Mead")

    >> Now how did this not come up in a search: perhaps because of the way you
    >> spell optimization?  I have

    >>> help.search("optimisation")
    >> No help files found with name or title matching `optimisation'
    >>> help.search("optimization")
    >> Help files with name or title matching `optimization':

    >> partition(multiv)          Partitioning by Iterative Optimization 
    >> lmeScale(nlme)             Scale for lme Optimization
    >> portfolio.optim(tseries)   Portfolio Optimization
    >> optim(base)                General-purpose Optimization
    >> optimize(base)             One Dimensional Optimization

    >> which shows we probably need to find a way to check variant spellings.

    KH> I am not sure how easy it would be to use different dicitionaries.  But
    KH> a fuzzy grep which also returns near matches should be good enough for
    KH> what we need.  Not that I have such a beast readily available, though.

Good idea!

I have had `agrep' [ = approximate grep ], a main program in C,
which is quite smart,
but the COPYRIGHT is

>> This material was developed by Sun Wu and Udi Manber
>> at the University of Arizona, Department of Computer Science.
>> Permission is granted to copy this software, to redistribute it
>> on a nonprofit basis, and to use it for any purpose, subject to
>> the following restrictions and understandings.
>> 
>> 1. Any copy made of this software must include this copyright notice
>> in full.
>> 
>> 2. All materials developed as a consequence of the use of this
>> software shall duly acknowledge such use, in accordance with the usual
>> standards of acknowledging credit in academic research.
>> 
>> 3. The authors have made no warranty or representation that the
>> operation of this software will be error-free or suitable for any
>> application, and they are under under no obligation to provide any
>> services, by way of maintenance, update, or otherwise.  The software
>> is an experimental prototype offered on an as-is basis.
>> 
>> 4. Redistribution for profit requires the express, written permission
>> of the authors.

(which is from 1992 or so)
and I vague remember having had difficulties contacting the authors...

Anyone else knowing about developments with "agrep"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Sat Dec  2 09:43:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Sat, 2 Dec 2000 03:43:44 -0600 (CST)
Subject: [Rd] Optimisation methods
In-Reply-To: <14888.48680.586997.442553@gargle.gargle.HOWL> from Martin Maechler at "Dec 2, 2000 10:17:28 am"
Message-ID: <200012020943.DAA00145@goose.stat.umn.edu>

Martin Maechler wrote:
> ....
> >> is an experimental prototype offered on an as-is basis.
> >> 
> >> 4. Redistribution for profit requires the express, written permission
> >> of the authors.
> 
> (which is from 1992 or so)
> and I vague remember having had difficulties contacting the authors...
> 
> Anyone else knowing about developments with "agrep"


I believe it is now available as part of Glimpse, http://webglimpse.org/

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Dec  3 08:14:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 3 Dec 2000 09:14:01 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <200012020943.DAA00145@goose.stat.umn.edu>
References: <14888.48680.586997.442553@gargle.gargle.HOWL>
 <200012020943.DAA00145@goose.stat.umn.edu>
Message-ID: <14890.201.594509.178337@mithrandir.hornik.net>

>>>>> Luke Tierney writes:

> Martin Maechler wrote:
>> ....
>> >> is an experimental prototype offered on an as-is basis.
>> >> 
>> >> 4. Redistribution for profit requires the express, written permission
>> >> of the authors.
>> 
>> (which is from 1992 or so)
>> and I vague remember having had difficulties contacting the authors...
>> 
>> Anyone else knowing about developments with "agrep"


> I believe it is now available as part of Glimpse,
> http://webglimpse.org/

I seem to recall that too.

On my TODO list for 1.2.1 now, unless someone else feels like taking
this up?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec  3 22:19:16 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 3 Dec 2000 23:19:16 +0100 (MET)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
Message-ID: <200012032219.XAA29932@pubhealth.ku.dk>

A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
(Rdll2010.zip) for Win2k from CRAN.
(I have used the same version of R from WinNT4 *and* Win2k for some
time.)

Now I tried to produce a bitmap, but R crashes (WinNT4):
 bmp("bitmap.bmp")
 plot(1:10)
 dev.off() ## crash!

That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I cannot test on Win2k, because I removed Win2k from my box in the last
week. 
The Rdll2010 reports the same version as the original R.dll (15 Aug
2000). That's not intended, I think?

Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec  4 01:54:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Dec 2000 02:54:05 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: Kurt Hornik's message of "Fri, 1 Dec 2000 09:05:03 +0100"
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats> <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au> <14887.23471.959713.364415@mithrandir.hornik.net>
Message-ID: <x2bsutgddu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> I personally think that there is nothing that says that argument names
> must have any meaning in any language and hence one may spell them in
> any way we want.  But more realistically, in the above case I'd rather
> have
> 
> 	exampleFn <- function(param = "fing", ...)
> 
> which will make everyone happy.

Not me, but "param.style=" might. (I think the above indicates that
"fing" is a parameter, not a paramete?ri[sz]ation.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec  4 06:51:11 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 4 Dec 2000 08:51:11 +0200
Subject: [Rd] R-plus Java API
Message-ID: <002b01c05dbe$9689da40$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello, I am new to r-plus package and I wanted to know if there is java =
api to the r-plus language, or jni wrapper?

Thank you very much
Regards,
Moshe

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, I am new to r-plus package and I =
wanted to=20
know if there is java api to the r-plus language, or jni =
wrapper?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_0028_01C05DCF.59EF6AD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec  4 07:40:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 4 Dec 2000 07:40:52 +0000 (GMT)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
In-Reply-To: <200012032219.XAA29932@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012040733340.637-100000@auk.stats>

On Sun, 3 Dec 2000 ligges@statistik.uni-dortmund.de wrote:

> A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
> (Rdll2010.zip) for Win2k from CRAN.
> (I have used the same version of R from WinNT4 *and* Win2k for some
> time.)
> 
> Now I tried to produce a bitmap, but R crashes (WinNT4):
>  bmp("bitmap.bmp")
>  plot(1:10)
>  dev.off() ## crash!
> 
> That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I think I know why: the same thing happened to me testing the pre-release
of 1.2.0 about a week ago, which I tracked down to a problem with R.dll and
Rbitmap.dll using different malloc's but the same free.

> I cannot test on Win2k, because I removed Win2k from my box in the last
> week. 

Please revert to the original R.dll for now.  The problem will go away (at
least on NT4, and the fix is still there) when rw1020 is released in a
couple of weeks or so.

> The Rdll2010 reports the same version as the original R.dll (15 Aug
> 2000). That's not intended, I think?

Yes, it was.  The version of R (as distinct from the build) is unchanged.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec  4 13:54:01 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 4 Dec 2000 13:54:01 -0000
Subject: R: [Rd] Optimisation methods
Message-ID: <00a901c05df9$b4b059f0$0a00a8c0@bellview>

Maybe the String::Approx perl (under GPL and artistic license) module could
serve that pourpose ?

http://search.cpan.org/search?dist=String-Approx

Hope that helps.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Luke Tierney <luke@goose.stat.umn.edu>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: domenica 3 dicembre 2000 10.19
Oggetto: Re: [Rd] Optimisation methods


>>>>>> Luke Tierney writes:
>
>> Martin Maechler wrote:
>>> ....
>>> >> is an experimental prototype offered on an as-is basis.
>>> >>
>>> >> 4. Redistribution for profit requires the express, written permission
>>> >> of the authors.
>>>
>>> (which is from 1992 or so)
>>> and I vague remember having had difficulties contacting the authors...
>>>
>>> Anyone else knowing about developments with "agrep"
>
>
>> I believe it is now available as part of Glimpse,
>> http://webglimpse.org/
>
>I seem to recall that too.
>
>On my TODO list for 1.2.1 now, unless someone else feels like taking
>this up?
>
>-k
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 14:12:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 14:12:21 +0000 (GMT)
Subject: R: [Rd] Optimisation methods
Message-ID: <200012041412.OAA17328@toucan.stats.ox.ac.uk>


> From: "Federico Spinazzi" <spinazzi@databankgroup.it>
> Date: Mon, 4 Dec 2000 13:54:01 -0000
> 
> Maybe the String::Approx perl (under GPL and artistic license) module could
> serve that pourpose ?
> 
> http://search.cpan.org/search?dist=String-Approx
> 
> Hope that helps.

Thanks. Unfortunately we are not currently requiring perl at run time,
but apparently that module uses C, not perl, internally.

> Federico Spinazzi
> spinazzi@databankgroup.it
> Databank S.P.A
> Via Spartaco, 19, ITALY
> Tel. + 39 02 55002251
> 
> -----Messaggio originale-----
> Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
> A: Luke Tierney <luke@goose.stat.umn.edu>
> Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
> Data: domenica 3 dicembre 2000 10.19
> Oggetto: Re: [Rd] Optimisation methods
> 
> 
> >>>>>> Luke Tierney writes:
> >
> >> Martin Maechler wrote:
> >>> ....
> >>> >> is an experimental prototype offered on an as-is basis.
> >>> >>
> >>> >> 4. Redistribution for profit requires the express, written permission
> >>> >> of the authors.
> >>>
> >>> (which is from 1992 or so)
> >>> and I vague remember having had difficulties contacting the authors...
> >>>
> >>> Anyone else knowing about developments with "agrep"
> >
> >
> >> I believe it is now available as part of Glimpse,
> >> http://webglimpse.org/
> >
> >I seem to recall that too.
> >
> >On my TODO list for 1.2.1 now, unless someone else feels like taking
> >this up?
> >
> >-k
> >-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-
> >r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >Send "info", "help", or "[un]subscribe"
> >(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Mon Dec  4 16:29:56 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041629.RAA08869@pubhealth.ku.dk>


Here's a simple example:

  > x <- rnorm(20)
  > y <- 1 + 10*x + rnorm(20)
  > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
  Error in length(x) == l : comparison (1) is possible only for vector types

The problem seems to be in this section of the code for plot.formula:

  if (!missing(subset)) {
    s <- eval(m$subset, data, parent.frame())
    l <- nrow(data)
    dosub <- function(x) if (length(x) == l) 
      x[s]
    else x
    dots <- lapply(dots, dosub)
  }

Sorry, no time this morning to attempt a fix myself, but I thought it
best to get this in before 1.2 is released.


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 16:57:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 16:57:53 +0000 (GMT)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041657.QAA17759@toucan.stats.ox.ac.uk>


> From: presnell@stat.ufl.edu
> Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Bug in plot.formula (PR#757)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Here's a simple example:
> 
>   > x <- rnorm(20)
>   > y <- 1 + 10*x + rnorm(20)
>   > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
>   Error in length(x) == l : comparison (1) is possible only for vector types
> 
> The problem seems to be in this section of the code for plot.formula:
> 
>   if (!missing(subset)) {
>     s <- eval(m$subset, data, parent.frame())
>     l <- nrow(data)
>     dosub <- function(x) if (length(x) == l) 
>       x[s]
>     else x
>     dots <- lapply(dots, dosub)
>   }
> 
> Sorry, no time this morning to attempt a fix myself, but I thought it
> best to get this in before 1.2 is released.

1.2 gives another error message, but the problem is using subset and
supplying a data argument.  Try

plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out", data=data.frame(x,y))

I *think* it should be l <- nrow(mf), but the function's author might
like to confirm the intention.

> 
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Mon Dec  4 17:14:03 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Mon, 4 Dec 2000 11:14:03 -0600 (CST)
Subject: [Rd] device drivers
Message-ID: <200012041714.LAA18450@goose.stat.umn.edu>

Unless you are maintaining a device driver for R, you can ignore this
note.

If you are, two issues have come up: the need to make sure there is a
slot available for a device before allocating it and, on unix at
least, the need to turn off interrupts during device initialization.

Currently typical device driver code starts the device something like this:

	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
	...
	addDevice(dd);
	initDisplayList(dd);

To address these two problems in a device driver for R 1.2 this should
be changed to

    R_CheckDeviceAvailable();
    BEGIN_SUSPEND_INTERRUPTS {
	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
        ...
	addDevice(dd);
	initDisplayList(dd);
    } END_SUSPEND_INTERRUPTS;

[Better yet, in case this changes before release, have a look at the
corresponding section of do_PS in the released sources.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Tue Dec  5 00:26:51 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Tue, 5 Dec 2000 01:26:51 +0100 (MET)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
Message-ID: <200012050026.BAA10701@pubhealth.ku.dk>


Seems to be a day for finding peculiar little things.  There is an
inconsistency in the behavior of lm vis a vis glm:

 > x <- rnorm(15)
 > y <- 1 + 10*x + rnorm(15)
 > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
 > xyz <- data.frame(x,y,z)
 > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
 > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
 > zz <- z[1:10]
 > xx <- rnorm(10)
 > predict(fit.lm,data.frame(x=xx,z=zz))
 Error in model.frame.default(formula, data, xlev = xlev) : 
 	  factor z has new level(s) C
 > predict(fit.glm,data.frame(x=xx,z=zz))
 	   1          2          3          4          5          6 
   2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
 	   7          8          9         10 
  -9.132206  11.440242 -16.054621  -3.017842 


This happens because of the line

  mf$drop.unused.levels <- TRUE

in lm and the lack of same in glm.  I'm reporting this as a bug, but
perhaps the difference is intentional?

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brett Presnell
Department of Statistics
University of Florida


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec  5 07:51:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Dec 2000 07:51:16 +0000 (GMT)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <200012050026.BAA10701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>

On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:

> 
> Seems to be a day for finding peculiar little things.  There is an
> inconsistency in the behavior of lm vis a vis glm:
> 
>  > x <- rnorm(15)
>  > y <- 1 + 10*x + rnorm(15)
>  > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
>  > xyz <- data.frame(x,y,z)
>  > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
>  > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
>  > zz <- z[1:10]
>  > xx <- rnorm(10)
>  > predict(fit.lm,data.frame(x=xx,z=zz))
>  Error in model.frame.default(formula, data, xlev = xlev) : 
>  	  factor z has new level(s) C
>  > predict(fit.glm,data.frame(x=xx,z=zz))
>  	   1          2          3          4          5          6 
>    2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
>  	   7          8          9         10 
>   -9.132206  11.440242 -16.054621  -3.017842 
> 
> 
> This happens because of the line
> 
>   mf$drop.unused.levels <- TRUE
> 
> in lm and the lack of same in glm.  I'm reporting this as a bug, but
> perhaps the difference is intentional?

No, as the glm code is not protected from user error as the lm code is. I
am not sure it is bug (it's not documented to happen) and probably there
are several related occurrences in other modelling functions, but it would
be a desirable addition and I will change it for glm (at least).


> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -- 
> Brett Presnell
> Department of Statistics
> University of Florida
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 11:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 12:35:52 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: jerome@stat.ubc.ca's message of "Tue, 28 Nov 2000 20:42:55 +0100 (MET)"
References: <200011281942.UAA17414@pubhealth.ku.dk>
Message-ID: <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>

jerome@stat.ubc.ca writes:

> Bug Description:
> 
> Problem with the function pf() when the non-centrality
> parameter is large. Here is a sample command. You should
> see a smooth line from 0 to about 55, and then the values
> of pf() go crazy from 55 to 100.
> ############################
> ncp <- seq(0,100,length=200)
> plot(ncp,pf(5,7,2,ncp=ncp))
> ############################

Confirmed. I see it on Solaris as well. This looks like trouble for
power calculations...

I wouldn't be surprised if it were related to this FIXME inside
pbeta_raw (src/nmath/pbeta.c):

     else {
        /*___ FIXME ___:  This takes forever (or ends wrongly)
          when (one or) both p & q  are huge
        */

Another "interesting" display is 

plot(ncp,pf(2,7,3,ncp=ncp))

Apparently, this relates mainly to cases with small denominator DF,
but even 

plot(ncp,log(pf(5,7,200,ncp=ncp)))

looks odd. Judging from the plots, it looks as if a loop is terminated
prematurely (discontinuous jumps suggesting that there's a change to
using a different number of iterations).

On the other hand, ncp= ca.55 seems to "mark the spot" for quite
widely different DFs and the spot where that number is important could
be in pnbeta.c, at

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));

which becomes nonzero when ncp=54. This might indicate that the fault
is in this section of code:

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
    a0 = a + x0;
    lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
    temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
    gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
    if (a0 > a)
        q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
    else
        q = exp(-c);

(This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
which would seem to be the same thing?)

Any numerical analysts on the line? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 13:59:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 14:59:39 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 12:35:52 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> is in this section of code:
> 
>     x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
>     a0 = a + x0;
>     lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
>     temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
>     gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
>     if (a0 > a)
>         q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
>     else
>         q = exp(-c);
> 
> (This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
> which would seem to be the same thing?)
> 
> Any numerical analysts on the line? 

Heh. This one goes right back to AS R84 (1990). The whole business of
calculating x0 like that is to avoid calculating a bunch of terms that
are practically zero when the noncentrality parameter is zero, and the
paper details what changes to the FORTRAN are needed to initialize the
recurrence relation for successive terms in mid-sequence. However it
forgets to say that the starting point for XJ also needs to be
changed.... 

A simple fix is to replace j=0 with j=x0, but there are a couple of
other things that might require a touchup - in particular, the whole
thing is based on single precision, so the cutoff induces an error
estimated as pnorm(-5) < 3e-7. Also, one should probably ensure that
the max iteration count is kept constant.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 15:01:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 16:01:09 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 14:59:39 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk> <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itoyoqtl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Heh. This one goes right back to AS R84 (1990). The whole business of
> calculating x0 like that is to avoid calculating a bunch of terms that
> are practically zero when the noncentrality parameter is zero, and the
                                                           ^^^^
Whoops. Read: "large"

> paper details what changes to the FORTRAN are needed to initialize the
> recurrence relation for successive terms in mid-sequence. However it
> forgets to say that the starting point for XJ also needs to be
> changed.... 

I have now committed a fix to appear in R v. 1.2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Dec  5 18:34:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 5 Dec 2000 19:34:51 +0100 (MET)
Subject: [Rd] print buglet with small options(width = ) (PR#759)
Message-ID: <200012051834.TAA21397@pubhealth.ku.dk>

This is in R 1.1.1 and "R-devel" :

 > options(width = 10) ; pi
 [1]
 [1] 3.141593

Note the extra "[1]".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Dec  5 18:39:39 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 5 Dec 2000 19:39:39 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#760)
Message-ID: <200012051839.TAA21437@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Dec  5 19:50:07 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 5 Dec 2000 14:50:07 -0500
Subject: [Rd] print buglet with small options(width = ) (PR#759)
In-Reply-To: <200012051834.TAA21397@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Tue, Dec 05, 2000 at 07:34:51PM +0100
References: <200012051834.TAA21397@pubhealth.ku.dk>
Message-ID: <20001205145007.J21159@jimmy.harvard.edu>

Found and fixed; I'll commit after make check has its way

On Tue, Dec 05, 2000 at 07:34:51PM +0100, maechler@stat.math.ethz.ch wrote:
> This is in R 1.1.1 and "R-devel" :
> 
>  > options(width = 10) ; pi
>  [1]
>  [1] 3.141593
> 
> Note the extra "[1]".
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Dec  6 09:12:11 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 6 Dec 2000 10:12:11 +0100 (MET)
Subject: [Rd] write.table
Message-ID: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>


Good morning, 

suppose the following:

m <- round(matrix(rnorm(16), ncol=4), 3)
a <- rev(c(0.01, 0.025, 0.05, 0.1))
rownames(m) <- a
colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
m
      0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
0.1       1.034  -0.119  -1.213   0.619
0.05      0.035   1.074   0.525   1.671
0.025    -1.687   0.960   0.324  -0.170
0.01      0.906   1.642   0.557  -2.224

and now write.table says:

write.table(m)
"X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
"0.1" "1.034" "-0.119" "-1.213" "0.619"
"0.05" "0.035" "1.074" "0.525" "1.671"
"0.025" "-1.687" "0.96" "0.324" "-0.17"
"0.01" "0.906" "1.642" "0.557" "-2.224"

If one writes 'm' into a file and reads it using read.table:

read.table("dummy")
      X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
0.1        1.034   -0.119   -1.213    0.619
0.05       0.035    1.074    0.525    1.671
0.025     -1.687    0.960    0.324   -0.170
0.01       0.906    1.642    0.557   -2.224

the colnames are incorrect. Do I miss something?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec  6 09:23:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 09:23:32 +0000 (GMT)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>

On Wed, 6 Dec 2000, Torsten Hothorn wrote:

> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
> "0.1" "1.034" "-0.119" "-1.213" "0.619"
> "0.05" "0.035" "1.074" "0.525" "1.671"
> "0.025" "-1.687" "0.96" "0.324" "-0.17"
> "0.01" "0.906" "1.642" "0.557" "-2.224"
> 
> If one writes 'm' into a file and reads it using read.table:
> 
> read.table("dummy")
>       X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
> 0.1        1.034   -0.119   -1.213    0.619
> 0.05       0.035    1.074    0.525    1.671
> 0.025     -1.687    0.960    0.324   -0.170
> 0.01       0.906    1.642    0.557   -2.224
> 
> the colnames are incorrect. Do I miss something?

Yes.  write.table converts to a data frame. Try

x <- data.frame(m, check.names=FALSE)
write.table(x)

to give it a data frame in the first place.  The help says:

       x: the object to be written, typically a data frame.  If not, it
          is attempted to create one from it.

and the names get converted during that process to valid names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From detlef.steuer@unibw-hamburg.de  Wed Dec  6 09:55:52 2000
From: detlef.steuer@unibw-hamburg.de (detlef.steuer@unibw-hamburg.de)
Date: Wed, 06 Dec 2000 10:55:52 +0100 (CET)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <XFMail.001206105552.detlef.steuer@unibw-hamburg.de>

Hi Thorsten!

On 06-Dec-00 Torsten Hothorn wrote:
> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"

You can see write.table is the "bad guy" here, already giving incorrect
colnames. If you use write.table(as.data.frame(m)) everything is working fine.

cu
Detlef

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 10:05:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Dec 2000 11:05:32 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 09:23:32 +0000 (GMT)"
References: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>
Message-ID: <x2y9xtg903.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> and the names get converted during that process to valid names.
                                                     ^^^^^^^^^^^

Just to pick a nit: Could we make a habit of distinguishing between
"names" and "identifiers"? The latter being the syntactical term in
the R language, briefly the names that you don't need to use get() to
access. "123" and "Height in cm" are valid names, but not valid
identifiers.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Dec  6 10:13:31 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 10:13:31 +0000 (GMT)
Subject: [Rd] write.table
Message-ID: <200012061013.KAA02654@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 06 Dec 2000 11:05:32 +0100
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > and the names get converted during that process to valid names.
>                                                      ^^^^^^^^^^^
> 
> Just to pick a nit: Could we make a habit of distinguishing between
> "names" and "identifiers"? The latter being the syntactical term in
> the R language, briefly the names that you don't need to use get() to
> access. "123" and "Height in cm" are valid names, but not valid
> identifiers.

The argument is called `check.names', and has description

check.names: if `TRUE' then the names of the variables in the data
          frame are checked to ensure that they are valid variable
          names.  If necessary they are adjusted (by `make.names') so
          that they are.

So `make.names' should be renamed as `make.identifiers'.  That is
described as

make.names               package:base               R Documentation

Make Legal R Names Out of Strings

Description:

     Make legal R names out of every `names[i]' string. Invalid
     characters are translated to `"."'.


More plausibly, you are proposing a new distinction ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Dec  6 19:16:00 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 06 Dec 2000 11:16:00 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
Message-ID: <871yvlicnj.fsf@jeeves.blindglobe.net>

After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
anonymous CVS), I'm unable to get it to work, i.e.:

rossini 94 > /usr/local/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-12-06)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(nlme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
  undefined symbol: dqrdca_
Error in library(nlme) : .First.lib failed
> 

Thoughts?  Changes I should look for?  Or is it just broken?  I don't
see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
copies to verify corruption of my local copy of the archive), but...

rossini 95 > /usr/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(nlme)
Loading required package: nls 
> 

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 23:58:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 00:58:27 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
References: <200011280525.GAA06952@pubhealth.ku.dk>
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Wed Dec  6 23:56:56 2000
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Wed, 6 Dec 2000 18:56:56 -0500 (EST)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
References: <200012050026.BAA10701@pubhealth.ku.dk>
 <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
Message-ID: <14894.53832.544699.253589@flounder.stat.ufl.edu>


In message <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats> you write:
> On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:
> > 
> > This happens because of the line
> > 
> >   mf$drop.unused.levels <- TRUE
> > 
> > in lm and the lack of same in glm.  I'm reporting this as a bug, but
> > perhaps the difference is intentional?
> 
> No, as the glm code is not protected from user error as the lm code is. I
> am not sure it is bug (it's not documented to happen) and probably there
> are several related occurrences in other modelling functions, but it would
> be a desirable addition and I will change it for glm (at least).

Seeing the same topic come up on the Snews list prompted me to revisit
this. I will preface by admitting that it is not an big issue one way
or the other, since the "problem" is easy enough to work around
(although the poster on the Snews list apparently felt otherwise).

It is handy to fit a model to a data subset selected by the levels of
a factor z, and then to use the fit for prediction with new data which
of course does not include levels of z other than those used in the
fit (that's exactly what I was doing when I noticed the inconsistency
between lm and glm).

However, this is not always quite as easy as it might otherwise be
because:

1. lm (and now glm) removes the unused levels from the factor, and

2. predict.lm and predict.glm (or more precisely model.frame.default)
   check levels() for factors in newdata against those used in the
   fit,

3. as opposed to checking the levels ACTUALLY USED in the newdata.

Of course it is not difficult to remove the unused levels from the
factors in newdata, but it would be convenient if predict would do
this automatically, or at least if there was an option to do so.

So, am I missing something obvious, or would this be a good thing to
do?

-- 
Brett Presnell
Department of Statistics
University of Florida
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012070615.HAA29351@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 760 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 741 *
Subject: match() is not correct for "close numerics"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 21 Nov 2000 16:15:23 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 743 *
Subject: Re: [Rd] How do you construct a function from a list?
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 22 Nov 2000 12:57:19 GMT
* PR# 748 *
Subject: Problem with NAs using chisq.test()
From: kjetikj@astro.uio.no
Date: Sun, 26 Nov 2000 21:21:22 +0100 (MET)
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
* PR# 749 *
Subject: (NA || x) and (NA && y)  {another "bug" }
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 09:25:38 +0100
* PR# 753 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 752 *
Subject: non-centrality parameter in pf()
From: Jerome Asselin <jerome@stat.ubc.ca>
Date: Tue, 28 Nov 2000 11:43:06 -0800 (PST)
* PR# 755 *
Subject: bug in outer()
From: mvondavier@ets.org
Date: Fri, 1 Dec 2000 20:47:30 +0100 (MET)
* PR# 754 *
Subject: means in arima0
From: arto.luoma@uta.fi
Date: Thu, 30 Nov 2000 14:02:55 +0100 (MET)
* PR# 757 *
Subject: Bug in plot.formula
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 11:29:36 -0500 (EST)
* PR# 756 *
Subject: crash using bmp() on windows with Rdll2010
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Sun, 03 Dec 2000 23:19:58 +0100
* PR# 759 *
Subject: print buglet with small options(width = )
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 5 Dec 2000 19:34:57 +0100
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 13:22:25 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 14:22:25 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 10:13:31 +0000 (GMT)"
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk>
Message-ID: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > Just to pick a nit: Could we make a habit of distinguishing between
> > "names" and "identifiers"? The latter being the syntactical term in
> > the R language, briefly the names that you don't need to use get() to
> > access. "123" and "Height in cm" are valid names, but not valid
> > identifiers.
> 
> The argument is called `check.names', and has description
> 
> check.names: if `TRUE' then the names of the variables in the data
>           frame are checked to ensure that they are valid variable
>           names.  If necessary they are adjusted (by `make.names') so
>           that they are.
> 
> So `make.names' should be renamed as `make.identifiers'.  That is
> described as
> 
> make.names               package:base               R Documentation
> 
> Make Legal R Names Out of Strings
> 
> Description:
> 
>      Make legal R names out of every `names[i]' string. Invalid
>      characters are translated to `"."'.
> 
> 
> More plausibly, you are proposing a new distinction ....

Hmm. The current distinction would seem to be between "names" and
"legal R names" or "valid variable names", of which certainly the
latter is misleading since you can easily have variables with weird
names like "[<-". But you're probably right that we are to some extent
stuck with existing terminology, here and elsewhere. I think I would
want to push a convention of using "R names" for the syntactical
entities, then.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Dec  7 13:54:32 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 7 Dec 2000 08:54:32 -0500
Subject: [Rd] write.table
In-Reply-To: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Dec 07, 2000 at 02:22:25PM +0100
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <20001207085432.J25921@jimmy.harvard.edu>

If anyone does find the time to delve into the naming of columns, one
thing that would be pretty nice is if the I() operator was stripped. 
It, and possibly some other special operators, probably shouldn't be
propagate. They really are about handling rather than naming and this
causes some minor annoyances when complex objects are put into dataframes.
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Dec  7 14:23:02 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 7 Dec 2000 09:23:02 -0500 (EST)
Subject: [Rd] write.table
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <200012071423.JAA23196@jessie.research.bell-labs.com>

> Cc: p.dalgaard@biostat.ku.dk, r-devel@stat.math.ethz.ch
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 07 Dec 2000 14:22:25 +0100
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > Just to pick a nit: Could we make a habit of distinguishing between
> > > "names" and "identifiers"? The latter being the syntactical term in
> > > the R language, briefly the names that you don't need to use get() to
> > > access. "123" and "Height in cm" are valid names, but not valid
> > > identifiers.
> > 
> > The argument is called `check.names', and has description
> > 
> > check.names: if `TRUE' then the names of the variables in the data
> >           frame are checked to ensure that they are valid variable
> >           names.  If necessary they are adjusted (by `make.names') so
> >           that they are.
> > 
> > So `make.names' should be renamed as `make.identifiers'.  That is
> > described as
> > 
> > make.names               package:base               R Documentation
> > 
> > Make Legal R Names Out of Strings
> > 
> > Description:
> > 
> >      Make legal R names out of every `names[i]' string. Invalid
> >      characters are translated to `"."'.
> > 
> > 
> > More plausibly, you are proposing a new distinction ....
> 
> Hmm. The current distinction would seem to be between "names" and
> "legal R names" or "valid variable names", of which certainly the
> latter is misleading since you can easily have variables with weird
> names like "[<-". But you're probably right that we are to some extent
> stuck with existing terminology, here and elsewhere. I think I would
> want to push a convention of using "R names" for the syntactical
> entities, then.  
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

The original S language authors shoulder the blame here, if there
maybe was a way to make the distinctions clearer by choosing
terminology better.  Being stuck with a vague use of `name', let me
suggest something roughly as follows.

(By the way, should this be on the FAQ?  I didn't see it there.)

The term `name' is used in four different (but related) ways in the
language:

1.  A `syntactic name' is a string the parser interprets as this type
    of expression.  It consists of letters, numbers, and the dot
    character and starts with a letter or the dot.

2.  An `object name' is a string associated with an object that is
    assigned in an expression either by having the object name on the
    left of an assignment operation or as an argument to the `assign'
    function.  It is usually a syntactic name as well, but can be any
    non-empty string if it is quoted (and it's always quoted in the
    call to `assign').

3.  An `argument name' is what appears to the left of the equals sign
    when supplying an argument in a function call (for example,
    `f(trim=.5)').  Argument names are also usually syntactic names,
    but again can be anything if they are quoted.

4. A `file name' is a string identifying a file in the operating
   system for reading, writing, etc.  It really has nothing much to do
   with names in the language, but it's traditional to call these
   strings file `names'.

I'd slightly discourage using the term "R name" because there is
nothing really R-dependent here.

There are some more details one can mention, such as that
non-syntactic argument names are usually only going to be matched by
"..." since the parser requires syntactic names for formal arguments.
But such details probably will only confuse if put in the FAQ.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Dec  7 15:18:29 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Dec 2000 10:18:29 -0500
Subject: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A2FAA45.6CBA4942@bank-banque-canada.ca>

Peter

I noticed with the original problem that there was a difference between R 1.1.1
and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
since you get

>> polyeval(1:5,polyroot(1:5))
>[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
>[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

and with my snapshot I get
> polyeval(1:5,polyroot(1:5))
[1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
[3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i

I expect you probably know more about the change than I do, but though I would warn
you anyway.

Polynomial root solutions can be notoriously ill conditioned, but the problem in the
bug report does not seem too bad. (At least the answer does not change much  with
small coefficient perturbations.)  One of the things I noticed in the bug report
problem was that polyroot did not seem to be giving complex conjugate pairs.
(Although, perhaps I did not look closely enough.) In your example it is not too bad
but does starts to show up:

print(polyroot(11:1), digits=12)
 [1]  0.953246161338+0.725110449959i -0.884658051302+0.959966734829i
 [3] -0.884658773085-0.959966532398i  0.953246339786-0.725110604788i
 [5]  0.442765752789+1.173740513854i -1.264630746148+0.357262003979i
 [7] -0.246722911623-1.262885538489i  0.442765716343-1.173740954848i
 [9] -0.246722399601+1.262885188965i -1.264631088498-0.357261261065i
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Dec  7 15:52:59 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 7 Dec 2000 16:52:59 +0100 (MET)
Subject: [Rd] Minor error in ?read.table (PR#761)
Message-ID: <200012071552.QAA17553@pubhealth.ku.dk>

The parameters to read.table include "strip.write", but this is
documented as "skip.white" in the help file.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 16:33:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 17:33:22 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: Paul Gilbert's message of "Thu, 07 Dec 2000 10:18:29 -0500"
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk> <3A2FAA45.6CBA4942@bank-banque-canada.ca>
Message-ID: <x2lmts5gz1.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Peter
> 
> I noticed with the original problem that there was a difference between R 1.1.1
> and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
> since you get
> 
> >> polyeval(1:5,polyroot(1:5))
> >[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
> >[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
> 
> and with my snapshot I get
> > polyeval(1:5,polyroot(1:5))
> [1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
> [3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i
> 
> I expect you probably know more about the change than I do, but though I would warn
> you anyway.

Hm? With the current version, I'm still getting

>  polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
>

> version
         _                           
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    12                          
day      07                          
language R                           

However, my 1.1.1 is different:

> polyeval(1:5,polyroot(1:5))
[1] 1.110223e-16-3.669889e-16i 0.000000e+00-6.722053e-16i
[3] 0.000000e+00-5.759824e-16i 6.661338e-16-4.592409e-16i
> polyeval(1:10,polyroot(1:10))
[1] -2.815017e-08-3.472720e-09i -2.815014e-08-3.472730e-09i
[3]  3.468454e+04-3.084396e+04i  5.016033e+04-6.107187e+04i
[5]  2.728165e+04+3.719825e+04i -3.455245e+04-4.233822e+03i
[7] -9.016302e+04+5.754516e+04i -7.508538e+04-7.772126e+04i
[9]  3.560675e+04+6.973712e+04i
> polyeval(1:9,polyroot(1:9))
[1] 1.127987e-13+7.833802e-13i 1.130207e-13+7.832323e-13i
[3] 1.127987e-13+7.838768e-13i 1.117995e-13+7.844319e-13i
[5] 5.270229e-13+8.071365e-13i 2.582379e-13+7.174489e-13i
[7] 1.179057e-13+6.123224e-13i 1.865175e-13+6.731772e-13i


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Dec  7 18:38:51 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 7 Dec 2000 19:38:51 +0100
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: <871yvlicnj.fsf@jeeves.blindglobe.net>
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
Message-ID: <14895.55611.916434.302780@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
> anonymous CVS), I'm unable to get it to work, i.e.:

> rossini 94 > /usr/local/bin/R

> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-12-06)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.

> R is a collaborative project with many contributors.
> Type `contributors()' for more information.

> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.

>> library(nlme)
> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
>   undefined symbol: dqrdca_
> Error in library(nlme) : .First.lib failed
>> 

> Thoughts?  Changes I should look for?  Or is it just broken?  I don't
> see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
> copies to verify corruption of my local copy of the archive), but...

R 1.2.0 will need a new version of nlme which should be made available
shortly.

I assume you did not reinstall the version under 1.2.0?  :-)  Well this
would not even compile right now.  A quick fix I think is to copy files
S_compat.{c,h} from the 1.1.1 distribution to nlme/src, change
	#include <S_compat.h>
in S_compat.c to
	#include "S_compat.h"
and rebuild.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Dec  7 18:49:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 07 Dec 2000 10:49:09 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: Kurt Hornik's message of "Thu, 7 Dec 2000 19:38:51 +0100"
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
 <14895.55611.916434.302780@mithrandir.hornik.net>
Message-ID: <87lmtskqxm.fsf@jeeves.blindglobe.net>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

    KH> R 1.2.0 will need a new version of nlme which should be made
    KH> available shortly.

I have it, thanks VERY much to Doug, and it "appears" to be giving
reasonable results for our data.  I'll know a bit more by the end of
next week, since we'll be using it mixed with R 1.1.1 for exploratory
simulations (power sims, so we "know" the truth).

    KH> I assume you did not reinstall the version under 1.2.0?  :-)

I did reinstall, and it did compile.  There might be some left-over
files from the update.  I'll have to check if I'm removing
non-pertinent files on upgrade.

    KH> Well this would not even compile right now.  A quick fix I
    KH> think is to copy files S_compat.{c,h} from the 1.1.1
    KH> distribution to nlme/src, change #include <S_compat.h> in
    KH> S_compat.c to #include "S_compat.h" and rebuild.

For what it's worth:

I did the first, not the second (changing the include), and it still
didn't work (the quick fix).  I'll not try the second, unless the sims
barf in my face.

Thanks!

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec  7 19:48:05 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Dec 2000 13:48:05 -0600
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: rossini@blindglobe.net's message of "07 Dec 2000 10:49:09 -0800"
References: <871yvlicnj.fsf@jeeves.blindglobe.net> <14895.55611.916434.302780@mithrandir.hornik.net> <87lmtskqxm.fsf@jeeves.blindglobe.net>
Message-ID: <6rn1e8hv2i.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

>     KH> Well this would not even compile right now.  A quick fix I
>     KH> think is to copy files S_compat.{c,h} from the 1.1.1
>     KH> distribution to nlme/src, change #include <S_compat.h> in
>     KH> S_compat.c to #include "S_compat.h" and rebuild.
> 
> For what it's worth:
> 
> I did the first, not the second (changing the include), and it still
> didn't work (the quick fix).  I'll not try the second, unless the sims
> barf in my face.

You would need to do both.  There are some .Fortran calls in the R
sources that require one of the routines that used to be in S_compat.c

I am currently testing nlme_3.1-8.  It will be on CRAN by the time
R-1.2.0 is released.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spoon@hilbert.maths.utas.edu.au  Fri Dec  8 07:29:51 2000
From: spoon@hilbert.maths.utas.edu.au (spoon@hilbert.maths.utas.edu.au)
Date: Fri, 8 Dec 2000 08:29:51 +0100 (MET)
Subject: [Rd] nmath bug (PR#762)
Message-ID: <200012080729.IAA20144@pubhealth.ku.dk>

Hi,
	I've been playing with the standalone math library (R.1.1.1,
Redhat 7 i386), and have detected a problem with rpois.


Basically, the rejection step in rpois can result in an infinite loop.
The simplest thing I can come up with that reproduces the problem is
the following.


#include <stdio.h>
#include <math.h>
#include <time.h>

#define MATHLIB_STANDALONE
#include "Mathlib.h"

int main() {
  double d;

  set_seed(976259805U,2968367341U);

  for(long k=0; k<10; k++) {
    for(long k=0; k<10000; k++) d = rpois(4500);
    for(long k=0; k<250000; k++) d = rpois(100);
    printf(".");
    fflush(stdout);
  }
}

Fro me this prints 3 dots and then hangs.

I realize calling rpois with means this large is probably not the
wisest thing to do, nevertheless, I still consider the infinite loop
to be a bug, hence this report.

Sorry that I cannot give a simpler example than this, its taken me
quite a while to get this far, and as my debugging efforts were going
nowhere, I thought it better to throw it out to the wider community.

Simon




-- 
*****************************************************************
*  Simon Wotherspoon                               _--_|\       *
*  Maths Dept, University of Tasmania             /  Aus \      *
*  Tasmania, Australia                            \_.--._/      *
*  spoon@hilbert.maths.utas.edu.au                      v       *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec  8 10:38:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Dec 2000 11:38:29 +0100
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: spoon@hilbert.maths.utas.edu.au's message of "Fri, 8 Dec 2000 08:29:51 +0100 (MET)"
References: <200012080729.IAA20144@pubhealth.ku.dk>
Message-ID: <x23dfzp596.fsf@blueberry.kubism.ku.dk>

spoon@hilbert.maths.utas.edu.au writes:

> Hi,
> 	I've been playing with the standalone math library (R.1.1.1,
> Redhat 7 i386), and have detected a problem with rpois.
> 
> 
> Basically, the rejection step in rpois can result in an infinite loop.
> The simplest thing I can come up with that reproduces the problem is
> the following.

Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
that are known to affect rpois...

In order to get something that has a decent chance of working you
should probably use a *very* recent gcc from the rawhide distribution,
and try a snapshot of 1.2.0. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Dec  8 13:22:17 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 08 Dec 2000 14:22:17 +0100 (CET)
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: <x23dfzp596.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.001208142217.plummer@iarc.fr>

On 08-Dec-00 Peter Dalgaard BSA wrote:
> spoon@hilbert.maths.utas.edu.au writes:
> 
>> Hi,
>>      I've been playing with the standalone math library (R.1.1.1,
>> Redhat 7 i386), and have detected a problem with rpois.
>> 
>> 
>> Basically, the rejection step in rpois can result in an infinite loop.
>> The simplest thing I can come up with that reproduces the problem is
>> the following.
> 
> Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
> that are known to affect rpois...
> 
> In order to get something that has a decent chance of working you
> should probably use a *very* recent gcc from the rawhide distribution,
> and try a snapshot of 1.2.0.

To be precise, you will need gcc-2.96-65 from the rawhide distribution.
However, this does not seem to have been released yet: I just checked on
ftp.redhat.com and the latest release is -64.

For details see
http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=21423

Alternatively you can install gcc-2.95 (the latest *stable* compiler from
the gcc development team), which does not suffer from this bug.  If you want
to do this, look in the directory bin/linux/redhat/7.x/DIY/ on CRAN for
some tips.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Dec  8 23:47:24 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 08 Dec 2000 15:47:24 -0800
Subject: [Rd] LME and cat()
Message-ID: <87d7f2fpbn.fsf@jeeves.blindglobe.net>

(please keep sebastian cc'd)

Doug -

we are managing to trigger, both on R 1.1.1 and R 1.2.0 (proper
versions of NLME), the following:

>  warnings(model1)
Warning message:
Singular precision matrix in level -1, block 1 Error in cat(list(...), file, sep, fill, labels, append) : 
	argument 2 not yet handled by cat
> 

suggesting either an "inappropriate" use of cat(), or a problem with
how we are running lme().   Thoughts, suggestions?  We can provide
sample code to create this warning again, if needed.

(Estimates are still "looking right", but we'd like verification that
something's not broken...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec 11 07:34:58 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 11 Dec 2000 09:34:58 +0200
Subject: [Rd] Examples C++ to R
Message-ID: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello all=20

I am new to R and I wanted to know how I can call R functions from c/c++ =
and Java classes?

If you can be detailed in this answer I will be very glad.

Thank you
Regards,
Moshe

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello all </FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I am new to R and I wanted to know how =
I can call R=20
functions from c/c++ and Java classes?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>If you can be detailed in this answer I =
will be=20
very glad.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_003C_01C06355.A09C4620--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 11 08:05:45 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 11 Dec 2000 08:05:45 +0000 (GMT)
Subject: [Rd] Examples C++ to R
In-Reply-To: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>
Message-ID: <Pine.GSO.4.05.10012110801480.22103-100000@auk.stats>

On Mon, 11 Dec 2000, Moshe Recanati <moshe@i-impact.com> wrote:

> Hello all 
> 
> I am new to R and I wanted to know how I can call R functions from c/c++ and Java classes?
> 
> If you can be detailed in this answer I will be very glad.

If you can be detailed in the question, it would help!  Which OS, for
example?  Your message seemed to be in a Windows character set, so
I will guess Windows.  There is a DCOM interface on Windows, and if you
look on CRAN under Software->Other->Non-standard you will find the software
and examples.   Alternatively, the embedding interface that uses
is described, with examples, in src/gnuwin32/front-ends in the R
source distribution.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 11 12:51:23 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 11 Dec 2000 13:51:23 +0100 (MET)
Subject: [Rd] configure and f2c
Message-ID: <Pine.LNX.4.21.0012111347090.1405-100000@artemis.imbe.med.uni-erlangen.de>


In R-devel Dec 11 03:03, configure means (on SuSE 6.4):

checking for f2c... f2c
checking for f_open in -lf2c... no
checking for d_sin in -lF77... no
configure: warning: I found f2c but not libf2c, or libF77 and libI77

which worked fine for me with R-devel from Dec 6th. 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hanspeter_wuermli@swissre.com  Mon Dec 11 13:04:50 2000
From: hanspeter_wuermli@swissre.com (hanspeter_wuermli@swissre.com)
Date: Mon, 11 Dec 2000 14:04:50 +0100 (MET)
Subject: [Rd] Problem with DLL in Windows NT (PR#763)
Message-ID: <200012111304.OAA13836@pubhealth.ku.dk>

Full_Name: Hans Peter Wrmli
Version: 1.0.0 or latest
OS: NT4.0
Submission from: (NULL) (193.134.170.35)


I used R for some time and loading a library worked fine. I received a new PC a
few days ago and cannot remember whether I had used the program that doesn't
work anymore, because library "integrate" cannot be loaded. Since I installed
the latest version (1.1.1? the one copying files into rw1011) together with the
replacement R.dll, the error appeared. Going back to 1.0.0 doesn't help.

When I type: > require(integrate)

a error message popup window appears:

"Rgui.exe - Entry Point Not Found
The procedure entry point REAL could not be located in the dynamic link library
R.dll"

R error message:

"Loading required package: integrate 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"D:\data\WUH\R\rw1000/library/integrate/libs/integrate.dll":
  LoadLibrary failure"

I am grateful for help (but not desperate as I run Linux at home).

Hans Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Dec 11 14:20:47 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 11 Dec 2000 09:20:47 -0500 (EST)
Subject: [Rd] "S4"-style methods and classes in R
Message-ID: <200012111420.JAA00341@jessie.research.bell-labs.com>

A preliminary version of an R package for classes and methods is
available from the omegahat web site:

	  http://www.omegahat.org/RSMethods/index.html

Documentation and source for download are available from this page.

The goal is to support an API that would provide compatible facilities
for defining classes and methods in R and S-Plus.  For the moment, the
"API" is roughly taken from "Programming with Data", particularly
section 1.6.

A revised version of that section is available, from the web page
above, modified a bit for R use.

This is a preliminary version;  comments and suggestions on any aspect
would be much appreciated, before going more "public" with it.

The current version is all written in the S language, for
flexibility.  Key portions (method dispatch at the least) will be
implemented in C later on for efficiency.

Regards,
 John Chambers

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Dec 11 18:49:11 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 11 Dec 2000 10:49:11 -0800
Subject: [Rd] row.names, rownames; colnames, no col.names?
Message-ID: <87d7eyvlnc.fsf@jeeves.blindglobe.net>


There's a bit of a symmetry issue, which may or may not be important
(led to 15 seconds of confusion until I got my bearings straight): 

row.names, rownames; colnames, no col.names? 

I _NOW_ realize the difference between row.names and rownames, but
is there any reason not to have col.names for re-naming columns in a
data.frame? 

(if there is, I don't particular need to know it, but it might make a
nice FAQ).

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Mon Dec 11 23:15:37 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 12 Dec 2000 00:15:37 +0100 (MET)
Subject: [Rd] qqline (PR#764)
Message-ID: <200012112315.AAA19537@pubhealth.ku.dk>

I think qqline does not do exactly what it is advertised to do ("`qqline'
adds a line to a normal quantile-quantile plot which passes through the
first and third quartiles.").  Consider the graph:

tmp <- qnorm(ppoints(10))
qqnorm(tmp)
qqline(tmp)

The line (which I expected go through all the points), has a slightly
shallower slope than does the points plotted by qqnorm.  I think the
problem is that qqline bases its line on the relationship between the
quartiles in the data and the large sample expected quartiles for a normal
distribution; qqnorm bases its plot on the relationship between the
quantiles in the data and an approximation to the (finite-sample) expected
quantiles for a normal distribution.  In qqnorm, the x-coordinates of the
first and third quartiles of the data vector ('tmp' in this case) are not
qnorm(c(0.25,0.75)) (as qqline does), but rather something like
quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say "something like"
because it is exactly right when the quartiles fall on data points, and an
approximation otherwise.

The following definition for qqline reflects this point:

function (y, ...)
{
  y <- y[!is.na(y)]
  n <- length(y)
    y <- quantile(y, c(0.25, 0.75))
    x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    slope <- diff(y)/diff(x)
    int <- y[1] - slope * x[1]
    abline(int, slope, ...)
}

I'm not sure it makes very much of a difference, though, for looking at
real data, instead of something like expected quantiles.

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, package:MASS, package:logspline, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 11 22:25:34 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 11 Dec 2000 23:25:34 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <14901.21598.772009.161277@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 

> row.names, rownames; colnames, no col.names? 

> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 

> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Re col.names, certainly not for 1.2.0.

I am personally not a big fan of advertising row.names, as I think it is
too close to the rownames of the matrix interpretation of data frames.
This is why R has abstract functions case.names() and variable.names(),
which would be my preference.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 11 23:35:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Dec 2000 00:35:12 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: rossini@blindglobe.net's message of "11 Dec 2000 10:49:11 -0800"
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <x2wvd6r0pb.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 
> 
> row.names, rownames; colnames, no col.names? 
> 
> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 
> 
> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Well, plain names()<- will do fine, colnames()<- will as well. Data
frames have an attribute called "row.names", and hence it makes sense
to have an extractor function of the same name, but there is no
"col.names" attribute. (However, why we chose to have "rownames" and
"colnames" without dots escapes me for the moments. They go back to
before we had the data frame code, and I suspect it is mostly a
historical accident.) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Tue Dec 12 07:28:43 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Tue, 12 Dec 2000 08:28:43 +0100 (MET)
Subject: [Rd] r-sync down?
Message-ID: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>


torsten@www:/raid/home/torsten > ping rsync.r-project.org
PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
--- franz.stat.wisc.edu ping statistics ---
12 packets transmitted, 0 packets received, 100% packet loss


Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 08:28:39 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 09:28:39 +0100
Subject: [Rd] r-sync down?
In-Reply-To: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
References: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14901.57783.254413.981422@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> torsten@www:/raid/home/torsten > ping rsync.r-project.org
    Torsten> PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
    Torsten> --- franz.stat.wisc.edu ping statistics ---
    Torsten> 12 packets transmitted, 0 packets received, 100% packet loss

No, it's fine, it's there, it's just that
somewhere on the Wisconsin network  ping requests are "filtered":

(From a Linux machine): 

 lynne{maechler}438> ping rsync.r-project.org
 PING franz.stat.wisc.edu (128.105.174.95) from 129.132.58.30 : 56(84) bytes of data.
 From 144.92.128.166: Packet filtered
 From 144.92.128.166: Packet filtered

and traceroute subsequently reveals 
....
  17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  133.563 ms ...
  18  r-macc.net.wisc.edu (144.92.128.129)            121.881 ms ...
  19  144.92.128.166 (144.92.128.166)                 124.458 ms ...
  20  e2-1.foundry1.cs.wisc.edu (128.105.4.246)       124.151 ms ...
  21  franz.stat.wisc.edu (128.105.174.95)            124.922 ms ...

ie. "rsync.r-project.org" is there (it's franz..)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 14:24:56 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 15:24:56 +0100
Subject: [Rd] qqline (PR#764)
In-Reply-To: <200012112315.AAA19537@pubhealth.ku.dk>
References: <200012112315.AAA19537@pubhealth.ku.dk>
Message-ID: <14902.13624.652864.269495@gargle.gargle.HOWL>

>>>>> "Setzer" == Setzer Woodrow <Setzer.Woodrow@epamail.epa.gov> writes:

    Setzer> I think qqline does not do exactly what it is advertised to do
    Setzer> ("`qqline' adds a line to a normal quantile-quantile plot which
    Setzer> passes through the first and third quartiles.").  

yes, the above may not be clear enough.

    Setzer> Consider the graph:

    Setzer> tmp <- qnorm(ppoints(10))
    Setzer> qqnorm(tmp)
    Setzer> qqline(tmp)

    Setzer> The line (which I expected go through all the points), has a
    Setzer> slightly shallower slope than does the points plotted by
    Setzer> qqnorm.  I think the problem is that qqline bases its line on
    Setzer> the relationship between the quartiles in the data and the
    Setzer> large sample expected quartiles for a normal distribution;
    Setzer> qqnorm bases its plot on the relationship between the quantiles
    Setzer> in the data and an approximation to the (finite-sample)
    Setzer> expected quantiles for a normal distribution.  In qqnorm, the
    Setzer> x-coordinates of the first and third quartiles of the data
    Setzer> vector ('tmp' in this case) are not qnorm(c(0.25,0.75)) (as
    Setzer> qqline does), but rather something like
    Setzer> quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say
    Setzer> "something like" because it is exactly right when the quartiles
    Setzer> fall on data points, and an approximation otherwise.

good analysis!

    Setzer> The following definition for qqline reflects this point:

    Setzer> function (y, ...)
    Setzer> {
    Setzer> y <- y[!is.na(y)]
    Setzer> n <- length(y)
    Setzer> y <- quantile(y, c(0.25, 0.75))
    Setzer> x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    Setzer> slope <- diff(y)/diff(x)
    Setzer> int <- y[1] - slope * x[1]
    Setzer> abline(int, slope, ...)
    Setzer> }

    Setzer> I'm not sure it makes very much of a difference, though, for
    Setzer> looking at real data, instead of something like expected
    Setzer> quantiles.

The Development Version of R (R 1.2 in a few days) has

 function (y, ...) 
 {
     y <- quantile(y[!is.na(y)], c(0.25, 0.75))
     x <- qnorm(c(0.25, 0.75))
     slope <- diff(y)/diff(x)
     int <- y[1] - slope * x[1]
     abline(int, slope, ...)
 }

which I think *does* what you suggest it should do.

HOWEVER I was quite a bit astonished to see 
that the slope is still too small (for small sample sizes only).

 par(mfrow=c(2,2))
 for(n in 9:12){ x <- qnorm(ppoints(n));qqnorm(x,main=paste("n=",n));qqline(x) }

But I think we are now doing what Tukey defined in his EDA book(s)
and what the other S engines do as well.
 {as a matter of fact, R should also return the (int, slope) vector !}

Note that you can also play with the " a = " argument of ppoints,
it's not directly clear to me which value is "optimal" for the above purpose...

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Dec 12 20:35:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Dec 2000 14:35:34 -0600
Subject: [Rd] An SPSS save file for testing
Message-ID: <6rk8958jjd.fsf@franz.stat.wisc.edu>

Saikat DebRoy is working on a revised "foreign" package (currently in
the src/contrib/Devel area on CRAN) that will include the ability to
read the SPSS save format.  Since we don't use SPSS we don't have easy
access to a sample data set and have been using PSPP (see
http://pspp.stat.wisc.edu/) to generate test data.  It would be more
realistic to have a small, redistributable SPSS saved dataset if
someone would be willing to contribute same.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec 14 15:55:55 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Dec 2000 09:55:55 -0600
Subject: [Rd] An SPSS save file for testing
In-Reply-To: Douglas Bates's message of "12 Dec 2000 14:35:34 -0600"
References: <6rk8958jjd.fsf@franz.stat.wisc.edu>
Message-ID: <6rg0jr2e0k.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@cs.wisc.edu> writes:

> Saikat DebRoy is working on a revised "foreign" package (currently in
> the src/contrib/Devel area on CRAN) that will include the ability to
> read the SPSS save format.  Since we don't use SPSS we don't have easy
> access to a sample data set and have been using PSPP (see
> http://pspp.stat.wisc.edu/) to generate test data.  It would be more
> realistic to have a small, redistributable SPSS saved dataset if
> someone would be willing to contribute same.

Thanks to all those who volunteered to provide us with test data.  We
now have enough data sets for the tests.  The new foreign library has
been uploaded to CRAN.  If you use
 R CMD check foreign
it will run the specific tests in the test directory and check that it
can read the different formats.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:06:58 2000
From: viktorm@pdf.com (viktorm@pdf.com)
Date: Fri, 15 Dec 2000 00:06:58 +0100 (MET)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
Message-ID: <200012142306.AAA24559@pubhealth.ku.dk>

Full_Name: Viktor Moravetski
Version: Version 1.2.0 (2000-12-13)
OS: Win-NT 4.0 SP5
Submission from: (NULL) (209.128.81.199)


I've started R (v.1.20) with command:
rgui --vsize 450M --nsize 40M

Then at the command prompt:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6   41943040 1120
Vcells 3469306 26.5   58982400  450

>df <- data.frame(x=1:30000,y=2,z=3)
>merge(df,df)
Error: vector memory exhausted (limit reached?)


In S-Plus it worked fine, no problems. 
It looks like that "R" cannot merge dataframes with 
more than 30K rows. It has enough memory, so what limit 
was reached and what should I do?

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Dec 14 23:28:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Dec 2000 17:28:43 -0600
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: viktorm@pdf.com's message of "Fri, 15 Dec 2000 00:06:58 +0100 (MET)"
References: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>

>>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:

  viktorm> Full_Name: Viktor Moravetski
  viktorm> Version: Version 1.2.0 (2000-12-13)
  viktorm> OS: Win-NT 4.0 SP5
  viktorm> Submission from: (NULL) (209.128.81.199)


  viktorm> I've started R (v.1.20) with command:
  viktorm> rgui --vsize 450M --nsize 40M

  viktorm> Then at the command prompt:
  >> gc()
  viktorm>           used (Mb) gc trigger (Mb)
  viktorm> Ncells  358534  9.6   41943040 1120
  viktorm> Vcells 3469306 26.5   58982400  450

  >> df <- data.frame(x=1:30000,y=2,z=3)
  >> merge(df,df)
  viktorm> Error: vector memory exhausted (limit reached?)

Do you really need such a large number of Ncells ? I think not. Try
starting R without specifying --nsize (and maybe even --vsize). In
1.2.0, R would  automatically allocate more memory if the intial value
is not enough. But (as far as I know) it would not decrease the amount
of memory below the initial amount.

  viktorm> In S-Plus it worked fine, no problems. 
  viktorm> It looks like that "R" cannot merge dataframes with 
  viktorm> more than 30K rows. It has enough memory, so what limit 
  viktorm> was reached and what should I do?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:54:23 2000
From: viktorm@pdf.com (Viktor Moravetski)
Date: Thu, 14 Dec 2000 15:54:23 -0800
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>
Message-ID: <3A395DAF.C4262ADC@pdf.com>

Hi Saikat,
Yes, I don't need to specify nsize and vsize for version 1.2.0. 
But error is the same, even if start R with default parameters. 
It grows in memory and then gives an error. 
See output below:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6     597831 16.0
Vcells 3330352 25.5    3736477 28.6
> df <- data.frame(x=1:30000,y=2,z=3)
> merge(df,df)
Error: cannot allocate vector of size 3515625 Kb
> 


Saikat DebRoy wrote:
> 
> >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> 
>   viktorm> Full_Name: Viktor Moravetski
>   viktorm> Version: Version 1.2.0 (2000-12-13)
>   viktorm> OS: Win-NT 4.0 SP5
>   viktorm> Submission from: (NULL) (209.128.81.199)
> 
>   viktorm> I've started R (v.1.20) with command:
>   viktorm> rgui --vsize 450M --nsize 40M
> 
>   viktorm> Then at the command prompt:
>   >> gc()
>   viktorm>           used (Mb) gc trigger (Mb)
>   viktorm> Ncells  358534  9.6   41943040 1120
>   viktorm> Vcells 3469306 26.5   58982400  450
> 
>   >> df <- data.frame(x=1:30000,y=2,z=3)
>   >> merge(df,df)
>   viktorm> Error: vector memory exhausted (limit reached?)
> 
> Do you really need such a large number of Ncells ? I think not. Try
> starting R without specifying --nsize (and maybe even --vsize). In
> 1.2.0, R would  automatically allocate more memory if the intial value
> is not enough. But (as far as I know) it would not decrease the amount
> of memory below the initial amount.
> 
>   viktorm> In S-Plus it worked fine, no problems.
>   viktorm> It looks like that "R" cannot merge dataframes with
>   viktorm> more than 30K rows. It has enough memory, so what limit
>   viktorm> was reached and what should I do?

--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 00:10:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 01:10:53 +0100
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: Viktor Moravetski's message of "Thu, 14 Dec 2000 15:54:23 -0800"
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu> <3A395DAF.C4262ADC@pdf.com>
Message-ID: <x2wvd21r3m.fsf@blueberry.kubism.ku.dk>

Viktor Moravetski <viktorm@pdf.com> writes:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb

I think you're just experiencing the fact that the merge() function in
R is not implemented very efficiently (to say the least). For many
practical purposes, this can be worked around using e.g. match().

Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 00:05:17 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Dec 2000 16:05:17 -0800 (PST)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <3A395DAF.C4262ADC@pdf.com>
Message-ID: <Pine.GSO.4.21.0012141600080.7665-100000@atlas.biostat.washington.edu>

On Thu, 14 Dec 2000, Viktor Moravetski wrote:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb
					^^^^^^^^^^!!

This is the problem. A merge of n rows takes n^2 space, because each row
of the first data frame is compared to  each row of the second.  You are
trying to allocate 3.5Gb, which is almost certainly more memory than you
have. This is (30000^2)*4

	-thomas

	

> > 
> 
> 
> Saikat DebRoy wrote:
> > 
> > >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> > 
> >   viktorm> Full_Name: Viktor Moravetski
> >   viktorm> Version: Version 1.2.0 (2000-12-13)
> >   viktorm> OS: Win-NT 4.0 SP5
> >   viktorm> Submission from: (NULL) (209.128.81.199)
> > 
> >   viktorm> I've started R (v.1.20) with command:
> >   viktorm> rgui --vsize 450M --nsize 40M
> > 
> >   viktorm> Then at the command prompt:
> >   >> gc()
> >   viktorm>           used (Mb) gc trigger (Mb)
> >   viktorm> Ncells  358534  9.6   41943040 1120
> >   viktorm> Vcells 3469306 26.5   58982400  450
> > 
> >   >> df <- data.frame(x=1:30000,y=2,z=3)
> >   >> merge(df,df)
> >   viktorm> Error: vector memory exhausted (limit reached?)
> > 
> > Do you really need such a large number of Ncells ? I think not. Try
> > starting R without specifying --nsize (and maybe even --vsize). In
> > 1.2.0, R would  automatically allocate more memory if the intial value
> > is not enough. But (as far as I know) it would not decrease the amount
> > of memory below the initial amount.
> > 
> >   viktorm> In S-Plus it worked fine, no problems.
> >   viktorm> It looks like that "R" cannot merge dataframes with
> >   viktorm> more than 30K rows. It has enough memory, so what limit
> >   viktorm> was reached and what should I do?
> 
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 07:41:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 15 Dec 2000 07:41:05 +0000 (GMT)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012150730310.22653-100000@auk.stats>

On Fri, 15 Dec 2000 viktorm@pdf.com wrote:

> Full_Name: Viktor Moravetski
> Version: Version 1.2.0 (2000-12-13)
> OS: Win-NT 4.0 SP5
> Submission from: (NULL) (209.128.81.199)
> 
> 
> I've started R (v.1.20) with command:
> rgui --vsize 450M --nsize 40M

Um.  Whats `v.1.20' and where did you get that from?  In particular how did
you compile it and which run-time are you using? You clearly have not read
the documentation on the command-line flags for version 1.2.0, or even the
top item in NEWS.

> Then at the command prompt:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6   41943040 1120
> Vcells 3469306 26.5   58982400  450
> 
> >df <- data.frame(x=1:30000,y=2,z=3)
> >merge(df,df)
> Error: vector memory exhausted (limit reached?)
> 
> 
> In S-Plus it worked fine, no problems. 
> It looks like that "R" cannot merge dataframes with 
> more than 30K rows. It has enough memory, so what limit 
> was reached and what should I do?

How do you know it has enough memory: it has just told you it has not?
I think you are using an unreleased version and not reading the
documentation on the changes.  The CHANGES file says

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

and NEWS says (first item)

    o   There is a new memory management system using a generational
        garbage collector.  This improves performance, sometimes
        marginally but sometimes by double or more.  The workspace is
        no longer statically sized and both the vector heap and the
        number of nodes can grow as needed.  (They can shrink again,
        but never below the initially allocated sizes.)  See ?Memory
        for a longer description, including the new command-line
        options to manage the settings.


Beyond that, R's merge uses a flexible but memory-intensive algorithm. If
you want to do merges on this scale we recommend that you use one of the
RDBMS interfaces to a tool optimized for the job.


I really don't understand why you filed a bug report on your lack of
reading of documentation: please see the section on reporting bugs in the
FAQ.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Fri Dec 15 14:20:53 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Fri, 15 Dec 2000 14:20:53 -0000
Subject: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <080901c066a2$3be28550$0a00a8c0@bellview>

Hy you all,
Short version:
I think I have some code that could be interesting to make the R
architecture evolve towards better thread support, easier memory management,
better user interface programming (progress bar, logs), powerful debugging
without recompiling (hach!)

some years ago I start learning C with an ambitious project: write a C
library for multivariate data analysis.
On the route I learned C quite well and I discovered the power of scripting
languages nad finally the S language.

I wanted to write programs to perform routinely done exploratory data
analysis, using gnuplot as the graphic driver.

One of the my bigger concern has ever be memory management and reentrancy of
my code, possibly avoiding using OS support (such as thread local storage on
windows); I tried to allow for custom allocator in the library, supporting
ANSI functions as a ready option ...

I also have always used DOS (djgpp) and windows so I hated (and probably
strongly dislike) autoconf and the like: I tried to follow the advice not to
include to many #ifdef/#else/#endif in my code and to prefer to configure my
libraries at run-time.

Dealing with long calculations, I also wanted to make she/he let know where
the program is (it terms of time and or percentage achieved). I wanted to
deal with user cancellation requests and the rollback (free memory, close
files) associated with it.

Moreover I had to encapsulate logs, warning, errors and debugging
informations into specific interfaces so that my code could be used in
GUI-based application as well in console mode or in COM components (here
comes UNICODE!).

Now I have (thread safe, customizable: ALL, some UNICODE compatible):
- an interface to memory management, usable with multiple threads, allowing
to define and manipulate memory spaces (clean the space of the thread just
stopped by user request), with customizable allocators;
- an interface to debug information, based on Fred Fish DBUG library used in
mysql (it allows to trace the execution of the code, to print selected
information, ...);
- an mprintf function to format messages in malloc'ed string (I have tested
also the UNICODE version) stolen from mktclapp from www.hwaci.com; this
maybe similar to R_printf;
- interfaces to errors, warnings, and log messages, with customizable
callbacks to send the content of the massages every where you can send a
char * or a wchar_t *; I followed the discussion on error handling on the
gsl mailing list and tried to implement the ideas in
http://t8web.lanl.gov/people/jungman/except.pdf I found quite interesting;

I would like to help with this code, if considered interesting.

Best regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Fri Dec 15 15:12:06 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Fri, 15 Dec 2000 16:12:06 +0100 (MET)
Subject: [Rd] R1.2.0 (PR#766)
Message-ID: <200012151512.QAA08186@pubhealth.ku.dk>

Here are a few comments on the new release (1.2.0), most about R CMD
check. I have managed to install and check my libraries only making one
change to a C function (see point 1) and one to an R function because
of the way formulae now look for their data. That is the good news. Of
course, more extensive checks are liable to find further problems.

1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
not accessible to us mortals. Those few lines need to be moved into
one of the accessible header files.

3. Makefiles in pkg/src are no longer read properly. This creates a
big problem for me in library development.

3. DESCRIPTION has to have licence mis-spelled as license for the
check to work.

4. check produces unasked for tex output (that I would like to be able
to shut off) then an error that linktocpage is undefined.

5. check always produces an error message at the end:
Attempt to free unreferenced scalar during global destruction.
I am not sure if this is a reference to Chernobyl but I do not
understand it.

Other requests about the library check:
1. I would very much prefer that the check directory remain within the
library directory instead of parallel as pkg.Rcheck to avoid
proliferation of directories at that level.

2. Why can't check detect that the help pages are up-to-date
(i.e. from a previous check) instead of redoing them every time?
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 15 15:35:06 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 15 Dec 2000 16:35:06 +0100
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
References: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 15 Dec 2000 16:12:06 +0100 (MET),
>>>>> james lindsey (jl) wrote:

  > Here are a few comments on the new release (1.2.0), most about R CMD
  > check. I have managed to install and check my libraries only making one
  > change to a C function (see point 1) and one to an R function because
  > of the way formulae now look for their data. That is the good news. Of
  > course, more extensive checks are liable to find further problems.

  > 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
  > not accessible to us mortals. Those few lines need to be moved into
  > one of the accessible header files.

  > 3. Makefiles in pkg/src are no longer read properly. This creates a
  > big problem for me in library development.

what do you mean by ``not read properly''? if a makefile exists it
should be used, actually `R CMD check' only uses the Makefile during a
call to `R CMD INSTALL', so do you mean that INSTALL is broken (which
would be bad news indeed)?


  > 3. DESCRIPTION has to have licence mis-spelled as license for the
  > check to work.

hmm, that field had that name (with that spelling) for quite some time
now. I think things get complicated if we allow for different
spellings of variables for different observations (I basically build a
dataframe from all DESCRIPTION files) ... but I'll leave that for
native English speakers to decide.

  > 4. check produces unasked for tex output (that I would like to be able
  > to shut off) then an error that linktocpage is undefined.

option --no-latex supresses the latex part.


  > 5. check always produces an error message at the end:
  > Attempt to free unreferenced scalar during global destruction.
  > I am not sure if this is a reference to Chernobyl but I do not
  > understand it.

I get no error message: which version pf perl on which platform are
you using?

  > Other requests about the library check:
  > 1. I would very much prefer that the check directory remain within the
  > library directory instead of parallel as pkg.Rcheck to avoid
  > proliferation of directories at that level.

use option --outdir to change the default

  > 2. Why can't check detect that the help pages are up-to-date
  > (i.e. from a previous check) instead of redoing them every time?

use option --no-clean for not removing the old files.


the defaults are set to do ALL check FROM SCRATCH because that is the
safest thing to do (meaning you can trust the results and don't miss
any checks offered), but you can turn off most of the checks using
command line options.

hope this helps,
fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 15:37:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Dec 2000 15:37:06 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012151526050.9947-100000@toucan.stats>

On Fri, 15 Dec 2000 james.lindsey@luc.ac.be wrote:

> Here are a few comments on the new release (1.2.0), most about R CMD
> check. I have managed to install and check my libraries only making one
> change to a C function (see point 1) and one to an R function because
> of the way formulae now look for their data. That is the good news. Of
> course, more extensive checks are liable to find further problems.
> 
> 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
> not accessible to us mortals. Those few lines need to be moved into
> one of the accessible header files.

You could just use the calls that are documented, in R-exts, that is
F77_CALL and F77_NAME!  F77_SYMBOL has not been documented as
a user entry point since at least 1.0.0, and has never been part of the
API.  Only one of the 82 packages on CRAN was using it.

> 3. Makefiles in pkg/src are no longer read properly. This creates a
> big problem for me in library development.

Having Makefiles in packages causes users a lot of problems, but as far as
I know they still work (and so still break things as we found with
polymars last week).  Again, the preferred mechanisms have been in 
R-exts for a year or so.

> 3. DESCRIPTION has to have licence mis-spelled as license for the
> check to work.

Actually, as `License:'

> 4. check produces unasked for tex output (that I would like to be able
> to shut off) then an error that linktocpage is undefined.

It was asked for as it is a default option. Looks like your tex setup is
broken.

> 5. check always produces an error message at the end:
> Attempt to free unreferenced scalar during global destruction.
> I am not sure if this is a reference to Chernobyl but I do not
> understand it.

Is your Perl up to date?

> Other requests about the library check:
> 1. I would very much prefer that the check directory remain within the
> library directory instead of parallel as pkg.Rcheck to avoid
> proliferation of directories at that level.
> 
> 2. Why can't check detect that the help pages are up-to-date
> (i.e. from a previous check) instead of redoing them every time?

By default, it does a clean install.  You can use --no-clean,
documented as one of the options.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Dec 15 16:15:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Dec 2000 11:15:18 -0500
Subject: [Rd] R1.2.0 (PR#766)
References: <200012151512.QAA08186@pubhealth.ku.dk> <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
Message-ID: <3A3A4396.5AF55E95@bank-banque-canada.ca>

>... but I'll leave that for native English speakers to decide.

I think we would be better off to let a non-native English speaker decide. My Shorter
OED (possibly a special version for the colonies) gives both spelling. In french it
is Licence.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 16:54:51 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 17:54:51 +0100 (MET)
Subject: [Rd] R install doesn't set permissions (PR#767)
Message-ID: <200012151654.RAA09267@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 6.2/i386
Submission from: (NULL) (148.88.0.10)



Just did a straightforward ./configure/make/make install of R-1.2.0
and it seems that it doesn't set permissions on the R_HOME directory
properly (or at all!).

[root@chinstrap R-1.2.0]# make install
mkdir /usr/local/lib/R

 hence /usr/local/lib/R gets permissions from whatever root's 
default is - in my case rwx------, and users cant start R.

 Fix it after installation with:

 chmod -R 755 /usr/local/lib/R

 To fix the installer? Maybe use the install program from the 
fileutils package?

Baz


 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 18:12:30 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 19:12:30 +0100 (MET)
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
Message-ID: <200012151812.TAA09528@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 7.0/i386
Submission from: (NULL) (148.88.0.11)



Compiling R 1.2.0 from source on a RH7.0 machine I get:

../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
/root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
/root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'

 - it installed fine on another RH7.0 machine earlier, so I check the
glibc version, and sure enough, this one hasn't been updated. It was

glibc-2.1.92-14

 upgrading to:

glibc-2.2-5

 using the Redhat 'up2date' utility, has fixed it.

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 18:50:29 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 15 Dec 2000 19:50:29 +0100 (MET)
Subject: [Rd] fourfoldplot (PR#769)
Message-ID: <200012151850.TAA09617@pubhealth.ku.dk>


Two bugs:

1() a single 2x2 matrix without dimnames won't plot

> b<-matrix(c(1,1,1,1),2) 
> fourfoldplot(b)
Error in array(x, dim = c(dim(x), 1), dimnames = c(dimnames(x),
list(Strata = NULL))) : 
        length of dimnames must match that of dims
> dimnames(b)<-list(c("a","b"),c("c","d"))
> fourfoldplot(b)
>

(2) conf.level breaks if there are zeroes (unless conf.level=0)

> b[1,1]<-0
> fourfoldplot(b)
Error in if (any(f == 0)) f <- f + 10^(-6) : 
        missing value where logical needed
> fourfoldplot(b,conf.level=0)
>



> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    3.0                         
year     2000                        
month    12                          
day      15                          
language R                           


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 20:07:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 21:07:19 +0100
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
In-Reply-To: B.Rowlingson@lancaster.ac.uk's message of "Fri, 15 Dec 2000 19:12:30 +0100 (MET)"
References: <200012151812.TAA09528@pubhealth.ku.dk>
Message-ID: <x2k891ih3c.fsf@blueberry.kubism.ku.dk>

B.Rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.2.0
> OS: Redhat 7.0/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> 
> Compiling R 1.2.0 from source on a RH7.0 machine I get:
> 
> ../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
> /root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
> /root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'
> 
>  - it installed fine on another RH7.0 machine earlier, so I check the
> glibc version, and sure enough, this one hasn't been updated. It was
> 
> glibc-2.1.92-14
> 
>  upgrading to:
> 
> glibc-2.2-5
> 
>  using the Redhat 'up2date' utility, has fixed it.
> 
> Baz
> 

Be careful!! Stock RH7.0 is unsupported because of the compiler
situation. You should get gcc-2.96-65 or later from the Rawhide
distribution or you will build an R that doesn't pass the regression
tests, and has at least one serious bug in random number generation.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Dec 16 19:03:09 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 16 Dec 2000 20:03:09 +0100 (MET)
Subject: [Rd] two minor 1.2.0 install problems (PR#770)
Message-ID: <200012161903.UAA11860@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


two minor problems building R-1.2.0 under linuxppc.  neither of these two
problems
is difficult to get around, but they do make the build/install process fail:

1) when making DVI or PDF manuals, doc/manual/refman.tex tries to input
base-pkg.tex
at line 43.  this file does not exist in the R tree and is not part of tetex 
(at least not tetex-1.0.6).


2) after "make R" (or during "make all"), both "make docs" and "make test" refer
to
bin/Rcmd, a script which which sets up

   R_CMD="${R_HOME}/bin/Rcmd"

unfortunately, with R-1.1.1 installed, R_HOME points to the installed 1.1.1 bin
directory, and 1.1.1 does not have Rcmd.  so a reinstall of 1.2.0 will work,
but
an upgrade from 1.1.1 will fail (as will a new install, i think).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Sun Dec 17 08:12:25 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Sun, 17 Dec 2000 10:12:25 +0200
Subject: [Rd] Example of calling R from Java
Message-ID: <00a901c06801$170455f0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello,

I downloaded the R for Java interface. I read about calling R =
scripts/methods from java, but I can't find any detailed example about =
this.

I need an example of how to use this.

For example how to load data object (i.e. of colt) to r , run anova =
function and get the results - all from java!!!

Thank you very very much
Regards,
Moshe
i-impact

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I downloaded the R for Java interface. =
I read about=20
calling R scripts/methods from java, but I can't find any detailed =
example about=20
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I need an example of how to use =
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>For example how to load data object =
(i.e. of colt)=20
to r&nbsp;, run anova function and get the results - all from=20
java!!!</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>i-impact</FONT></DIV></BODY></HTML>

------=_NextPart_000_00A6_01C06811.DA794FD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Mon Dec 18 08:27:58 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Mon, 18 Dec 2000 09:27:58 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012180827.JAA16557@pubhealth.ku.dk>

R1.2.0 with Linux RH5.2

I do not believe that the problems below are new to 1.2 but I only
cover this sort of thing once a year in my course and some of that
happened to be last Friday so too late to report for 1.2. I see that
one or two things that I was going to report have been corrected.
I like the fact that interactions now show : instead of .

Here is some output with comments inserted.


R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Notice contrasts for below:

> options(contrasts=c("contr.treatment","contr.poly"))
> data <- read.table("tmp.dat",skip=6,head=T)
> data
   Freq Reg66 Reg71
1   118    CC    CC
2    14    LY    CC
3     8    WM    CC
4    12    GL    CC
5    12    CC    LY
6  2127    LY    LY
7    69    WM    LY
8   110    GL    LY
9     7    CC    WM
10   86    LY    WM
11 2548    WM    WM
12   88    GL    WM
13   23    CC    GL
14  130    LY    GL
15  107    WM    GL
16 7712    GL    GL
> attach(data)
> wt <- codes(Reg66)!=codes(Reg71)
> print(z <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(z2 <- glm(Freq~Reg66+Reg71,family=poisson,weight=wt))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson, weights = wt) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.4615       2.1242       2.0096       1.7236       2.4555       2.0847  
    Reg71WM  
     1.9140  

Degrees of Freedom: 11 Total (i.e. Null);  5 Residual
Null Deviance:	    486.2 
Residual Deviance: 4.367 	AIC: 82.7 
> z2$fit
          1           2           3           4           5           6 
 118.100000   11.836037    8.891541   13.272421   12.758205 2127.100000 
          7           8           9          10          11          12 
  71.505458  106.736339   10.756661   80.252100 2548.100000   89.991240 
         13          14          15          16 
  18.485138  137.911862  103.603001 7712.100000 

First problem: with diagonal values weighted out in a transition
matrix (mover-stayer model), glm wrongly estimates the diagonals to be
the observed plus 0.1. This was correct in 90.1 a year ago but already
wrong in 1.0.1. I don't have any versions in between installed.

> # correct values from GLIM4
> #   unit   observed    fitted   residual
> #     (1)       118     1.586      0.000
> #      2         14    11.836      0.629
> #      3          8     8.892     -0.299
> #      4         12    13.272     -0.349
> #      5         12    12.758     -0.212
> #     (6)      2127    95.185      0.000
> #      7         69    71.505     -0.296
> #      8        110   106.736      0.316
> #      9          7    10.757     -1.145
> #     10         86    80.252      0.642
> #    (11)      2548    60.287      0.000
> #     12         88    89.991     -0.210
> #     13         23    18.485      1.050
> #     14        130   137.912     -0.674
> #     15        107   103.603      0.334
> #    (16)      7712   154.648      0.000
> # and from R90.1 (wrong in R1.0.1)
> #> z2$fit
> #         1          2          3          4          5          6          7 
> #  1.586454  11.836037   8.891541  13.272421  12.758205  95.184992  71.505458 
> #         8          9         10         11         12         13         14 
> #106.736339  10.756661  80.252100  60.287479  89.991240  18.485138 137.911862 
> #        15         16 
> #103.603001 154.648406 
> 

Second problem: the man page for factors states that the levels are
sorted, but gl does not do this. It keeps them in the order of the
labels. This is inconsistent with everything else, confusing for
students, and liable to induce errors in data analysis. In the example
below, it is not too important because the baseline category is the
same in the two cases but that will not generally be the case.

As an addition comment, I would strongly recommend that, if labels can
be coerced to numeric, they be ordered, not sorted. This is because
the order is very confusing if there are more than 9: for example, the
sorted 10 comes near the beginning and not at the end.

> reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(za <- glm(Freq~reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
     0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 

Third problem: if mean value contrasts are used, the level names are
not attached to the variable name, but simply the number of the
category. This rightly drives students mad and is simply
uninterpretable if the levels have been sorted. It takes a great deal
of extreme care to try to find out to what the numbers refer.

> options(contrasts=c("contr.sum","contr.poly"))
> 
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(zb <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)       Reg661       Reg662       Reg663       Reg711       Reg712  
     5.3638      -2.3575       1.5448       0.3325      -2.3930       1.5667  
     Reg713  
     0.3315  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> 

Additional comment: I recommend that the aic functions for poisson and
binomial have the explicit calculation of the log density replaced by
the corresponding d function with the log option. This will avoid the
production of NAs in certain cases of zeroes in tables.
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec 18 10:12:55 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 18 Dec 2000 10:12:55 -0000
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <005701c068db$17287db0$0a00a8c0@bellview>

Well, I think the better solution would be to put them on the web: I tried
to open two web pages but I forget the possword every time :-(.

I see 2 quick solutions:
- send the files via e-mail
- put the files on CRAN (where?);
However I can do these in 2-3 days only (I have sources home).

Regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Luke Tierney <luke@muskrat.stat.umn.edu>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Data: venerd 15 dicembre 2000 19.25
Oggetto: Re: [Rd] Some libraries and ideas for a 'librarified' R


>Sounds interesting.  Is the code available to look at?
>
>Thanks
>
>luke
>
>Federico Spinazzi wrote:


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 18 11:06:36 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Dec 2000 12:06:36 +0100
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
In-Reply-To: <005701c068db$17287db0$0a00a8c0@bellview>
References: <005701c068db$17287db0$0a00a8c0@bellview>
Message-ID: <14909.61372.915270.684729@mithrandir.hornik.net>

>>>>> Federico Spinazzi writes:

> Well, I think the better solution would be to put them on the web: I
> tried to open two web pages but I forget the possword every time :-(.

> I see 2 quick solutions:
> - send the files via e-mail
> - put the files on CRAN (where?);

See the FAQ:

   To "submit" to CRAN, simply upload to
`ftp://cran.r-project.org/incoming/' and send an email to
<wwwadmin@cran.r-project.org>.

     *Note:*  It is very important that you indicate the copyright
     (license) information (GPL, BSD, Artistic, ...)  in your
     submission.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Dec 18 11:08:32 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 18 Dec 2000 12:08:32 +0100
Subject: [Rd] 2nd Int. Workshop on Distributed Statistical Computing
Message-ID: <14909.61488.264699.820497@celeborn.at>


DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universitt Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  Robert Gentleman		Harvard University
  Stefano Iacus			Universit degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Torsten Hothorn		Universitt Erlangen
  Kurt Hornik			Technische Universitt Wien  
  Timothy Keitt			State University of New York, Stony Brook
  Friedrich Leisch		Technische Universitt Wien
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mchler		ETH Zurich
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universitt Wien
  Brian Ripley			University of Oxford
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Mon Dec 18 12:46:04 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181246.NAA21203@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: R-1.2.0
OS: RH7/i386
Submission from: (NULL) (148.88.0.11)


demo(is.things) fails with:

> is.ALL(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"
In addition: Warning message: 
is.nan() applied to non-(list or vector) in: fn(obj) 

 - this seems to be because it is calling:

> is.na.POSIXlt(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"

 is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
NULL's in the documentation for the POSIX{l,c}t functions. It seems that
errors in these functions cause 'stop()' calls rather than returning NA's.

Barry



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec 18 13:38:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 18 Dec 2000 13:38:04 +0000 (GMT)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181338.NAA13654@toucan.stats.ox.ac.uk>


> From: B.Rowlingson@lancaster.ac.uk
> Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] demo(is.things) fails (PR#772)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Barry Rowlingson
> Version: R-1.2.0
> OS: RH7/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> demo(is.things) fails with:
> 
> > is.ALL(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> In addition: Warning message: 
> is.nan() applied to non-(list or vector) in: fn(obj) 
> 
>  - this seems to be because it is calling:
> 
> > is.na.POSIXlt(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> 
>  is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
> NULL's in the documentation for the POSIX{l,c}t functions. It seems that
> errors in these functions cause 'stop()' calls rather than returning NA's.

That's a *method* for is.na which should not be called directly by users.
It should only be called with an argument inheriting from class POSIXlt.

I have no idea why anyone wrote a demo to call methods directly, but after
four years it looks like it needs updating.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 15:06:59 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 18 Dec 2000 16:06:59 +0100 (MET)
Subject: [Rd] INSTALL should have info on make check (PR#773)
Message-ID: <200012181506.QAA23575@pubhealth.ku.dk>

B.Rowlingson@lancaster.ac.uk drew my attention to the fact that INSTALL
has no information that it might be a good idea to run "make check"
and that it might be a bad sign to have it fail. (Filing as bug report
to prevent us forgetting this indefinitely...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 15:45:59 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Dec 2000 10:45:59 -0500
Subject: [Rd] 1.2.0 segfault
Message-ID: <3A3E3136.C34407@bank-banque-canada.ca>

I'm a novice with gdb but the following is the result of a segfault problem I've been
having with 1.2.0.  If there is something else I should do to get more useful
information at this point, then someone please let me know.

Paul Gilbert
______

[5] /home/mfa5/gilp/zzot : R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa/gilp/R/bin/R.bin

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(curve)
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) dsecurvature.function.testsA()
Undefined command: "dsecurvature".  Try "help".
(gdb) continue
Continuing.

> dsecurvature.function.testsA()
Random number generator tests ...ok
DSE curvature test A 1 ... completed
DSE curvature test A 2 ...
Program received signal SIGSEGV, Segmentation fault.
0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
1551      CLASS_GET_FREE_NODE(node_class, s);
(gdb) bactrace
Undefined command: "bactrace".  Try "help".
(gdb) backtrace
#0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
#1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
#2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
#3  0x55518 in Rf_duplicate (s=0xc63468) at duplicate.c:133
#4  0x5b958 in do_set (call=0xb72804, op=0x1c6304, args=0xb727cc, rho=0x499a38)
    at eval.c:1012
#5  0x5a114 in Rf_eval (e=0xb72804, rho=0x499a38) at eval.c:317
#6  0x5b300 in do_begin (call=0xb739ac, op=0x1c6294, args=0xb72820,
    rho=0x499a38) at eval.c:803
#7  0x5a114 in Rf_eval (e=0xb739ac, rho=0x499a38) at eval.c:317
#8  0x5a730 in Rf_applyClosure (call=0x49a264, op=0x904f24, arglist=0x4bb21c,
    rho=0x4bb3c0, suppliedenv=0x49a210) at eval.c:501
#9  0x7d770 in applyMethod (call=0x49a264, op=0x904f24, args=0x4bb21c,
    rho=0x4bb3c0, newrho=0x49a210) at objects.c:117
#10 0x7dbd4 in Rf_usemethod (generic=0xefffbdc8 "l", obj=0xbd11a4,
    call=0xb73e20, args=0x160000, rho=0x4bb3c0, ans=0xefffbdc4)
    at objects.c:252
#11 0x7dea4 in do_usemethod (call=0xb6a258, op=0x1d3774, args=0xb6a274,
    env=0x4bb3c0) at objects.c:325
#12 0x5a114 in Rf_eval (e=0xb6a258, rho=0x4bb3c0) at eval.c:317
#13 0x5a730 in Rf_applyClosure (call=0xa21d14, op=0x907a14, arglist=0x4bb21c,
    rho=0x4bb078, suppliedenv=0x1b5300) at eval.c:501
#14 0x5a340 in Rf_eval (e=0xa21d14, rho=0x4bb078) at eval.c:352
#15 0x5bba4 in Rf_evalList (el=0xa21c50, rho=0x4bb078) at eval.c:1087
#16 0x5a244 in Rf_eval (e=0xa21c34, rho=0x4bb078) at eval.c:338
#17 0x5c58c in Rf_DispatchOrEval (call=0xa21ba8, generic=0x10cca0 "c",
    args=0xa21bc4, rho=0x4bb078, ans=0xefffc3c4, dropmissing=1) at eval.c:1386
#18 0x2f144 in do_c (call=0xa21ba8, op=0x1c8168, args=0xa21bc4, env=0x4bb078)
    at bind.c:538
#19 0x5a114 in Rf_eval (e=0xa21ba8, rho=0x4bb078) at eval.c:317
#20 0x5b300 in do_begin (call=0xa21b8c, op=0x1c6294, args=0xa21b70,
    rho=0x4bb078) at eval.c:803
#21 0x5a114 in Rf_eval (e=0xa21b8c, rho=0x4bb078) at eval.c:317
---Type <return> to continue, or q <return> to quit---
#22 0x5a730 in Rf_applyClosure (call=0x4bbc94, op=0x2d32e0, arglist=0x4bbd04,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#23 0x5a340 in Rf_eval (e=0x4bbc94, rho=0x2d36ec) at eval.c:352
#24 0x38940 in do_docall (call=0x4bbc94, op=0x3, args=0xbcd8b4, rho=0x4bc678)
    at coerce.c:1692
#25 0x7d32c in do_internal (call=0x17f5f0, op=0x1cd010, args=0x4bc6b0,
    env=0x4bc678) at names.c:925
#26 0x5a114 in Rf_eval (e=0x1e488c, rho=0x4bc678) at eval.c:317
#27 0x5a730 in Rf_applyClosure (call=0x9d1c5c, op=0x1e47ac, arglist=0x4bd41c,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#28 0x5a340 in Rf_eval (e=0x9d1c5c, rho=0x2d36ec) at eval.c:352
#29 0x5bba4 in Rf_evalList (el=0x9d1c40, rho=0x2d36ec) at eval.c:1087
#30 0x5a244 in Rf_eval (e=0x9d1c08, rho=0x2d36ec) at eval.c:338
#31 0x5bba4 in Rf_evalList (el=0x9d1bec, rho=0x2d36ec) at eval.c:1087
#32 0x5a244 in Rf_eval (e=0x9d1bd0, rho=0x2d36ec) at eval.c:338
#33 0x5bba4 in Rf_evalList (el=0x9d1a64, rho=0x2d36ec) at eval.c:1087
#34 0x5a244 in Rf_eval (e=0x9d1a48, rho=0x2d36ec) at eval.c:338
#35 0x5b5dc in applydefine (call=0x9d19f4, op=0x1c6304, args=0x9d1a10,
    rho=0x2d36ec) at eval.c:924
#36 0x5ba68 in do_set (call=0x9d19f4, op=0x1c6304, args=0x9d1a10, rho=0x2d36ec)
    at eval.c:1041
#37 0x5a114 in Rf_eval (e=0x9d19f4, rho=0x2d36ec) at eval.c:317
#38 0x5b300 in do_begin (call=0x9d1644, op=0x1c6294, args=0x9d19d8,
    rho=0x2d36ec) at eval.c:803
#39 0x5a114 in Rf_eval (e=0x9d1644, rho=0x2d36ec) at eval.c:317
#40 0x5ae3c in do_for (call=0x9d194c, op=0x1b4cc4, args=0x9d1968, rho=0x2d36ec)
    at eval.c:678
#41 0x5a114 in Rf_eval (e=0x9d194c, rho=0x2d36ec) at eval.c:317
#42 0x5b300 in do_begin (call=0x9d1820, op=0x1c6294, args=0x9d1930,
    rho=0x2d36ec) at eval.c:803
#43 0x5a114 in Rf_eval (e=0x9d1820, rho=0x2d36ec) at eval.c:317
#44 0x5ae3c in do_for (call=0x9d277c, op=0x1b4cc4, args=0x9d2798, rho=0x2d36ec)
    at eval.c:678
---Type <return> to continue, or q <return> to quit---
#45 0x5a114 in Rf_eval (e=0x9d277c, rho=0x2d36ec) at eval.c:317
#46 0x5b300 in do_begin (call=0x9d0464, op=0x1c6294, args=0x9d2760,
    rho=0x2d36ec) at eval.c:803
#47 0x5a114 in Rf_eval (e=0x9d0464, rho=0x2d36ec) at eval.c:317
#48 0x5a730 in Rf_applyClosure (call=0xa224b4, op=0x9b6598, arglist=0x2d33c0,
    rho=0x2d3ad4, suppliedenv=0x1b5300) at eval.c:501
#49 0x5a340 in Rf_eval (e=0xa224b4, rho=0x2d3ad4) at eval.c:352
#50 0x5b300 in do_begin (call=0xa21a74, op=0x1c6294, args=0xa22498,
    rho=0x2d3ad4) at eval.c:803
#51 0x5a114 in Rf_eval (e=0xa21a74, rho=0x2d3ad4) at eval.c:317
#52 0x5aa28 in do_if (call=0xa22428, op=0x1b4d6c, args=0xa22444, rho=0x2d3ad4)
    at eval.c:591
#53 0x5a114 in Rf_eval (e=0xa22428, rho=0x2d3ad4) at eval.c:317
#54 0x5b300 in do_begin (call=0xa2240c, op=0x1c6294, args=0xa223f0,
    rho=0x2d3ad4) at eval.c:803
#55 0x5a114 in Rf_eval (e=0xa2240c, rho=0x2d3ad4) at eval.c:317
#56 0x5a730 in Rf_applyClosure (call=0x2d38c0, op=0xa5d2a8, arglist=0x2d4488,
    rho=0x2d4728, suppliedenv=0x2d4808) at eval.c:501
#57 0x7d770 in applyMethod (call=0x2d38c0, op=0xa5d2a8, args=0x2d4488,
    rho=0x2d4728, newrho=0x2d4808) at objects.c:117
#58 0x7dbd4 in Rf_usemethod (generic=0xefffe3b0 "span", obj=0xd13c00,
    call=0xa20878, args=0x160000, rho=0x2d4728, ans=0xefffe3ac)
    at objects.c:252
#59 0x7dea4 in do_usemethod (call=0x9d06cc, op=0x1d3774, args=0x9d06e8,
    env=0x2d4728) at objects.c:325
#60 0x5a114 in Rf_eval (e=0x9d06cc, rho=0x2d4728) at eval.c:317
#61 0x5a730 in Rf_applyClosure (call=0xa29e28, op=0x9b67e4, arglist=0x2d4488,
    rho=0x694704, suppliedenv=0x1b5300) at eval.c:501
#62 0x5a340 in Rf_eval (e=0xa29e28, rho=0x694704) at eval.c:352
#63 0x5b934 in do_set (call=0xa29dd4, op=0x1c6304, args=0xa29df0, rho=0x694704)
    at eval.c:1008
#64 0x5a114 in Rf_eval (e=0xa29dd4, rho=0x694704) at eval.c:317
#65 0x5b300 in do_begin (call=0xa23464, op=0x1c6294, args=0xa29db8,
---Type <return> to continue, or q <return> to quit---
    rho=0x694704) at eval.c:803
#66 0x5a114 in Rf_eval (e=0xa23464, rho=0x694704) at eval.c:317
#67 0x5a730 in Rf_applyClosure (call=0x694544, op=0xa5ce10, arglist=0x1b5300,
    rho=0x1d42a8, suppliedenv=0x1b5300) at eval.c:501
#68 0x5a340 in Rf_eval (e=0x694544, rho=0x1d42a8) at eval.c:352
#69 0x7166c in R_ReplConsole (rho=0x1d42a8, savestack=0, browselevel=0)
    at main.c:187
#70 0x71dd0 in run_Rmainloop () at main.c:485
#71 0x71e14 in Rf_mainloop () at main.c:499
#72 0xc8e74 in main (ac=0, av=0xeffff1c4) at system.c:88
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 16:14:53 2000
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Mon, 18 Dec 2000 17:14:53 +0100 (MET)
Subject: [Rd] \item{x}<cr>{description of x} (PR#774)
Message-ID: <200012181614.RAA24226@pubhealth.ku.dk>

Under \arguments in help files if I use

\item{x}
{description of x}

rather than

\item{x}{description of x}

as I am suppose to do, then the "description of x" is quietly omitted. It would be
nice to allow this syntax or at least give an error or warning.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 16:37:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Dec 2000 17:37:02 +0100
Subject: [Rd] 1.2.0 segfault
In-Reply-To: Paul Gilbert's message of "Mon, 18 Dec 2000 10:45:59 -0500"
References: <3A3E3136.C34407@bank-banque-canada.ca>
Message-ID: <x2wvcxofdd.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm a novice with gdb but the following is the result of a segfault problem I've been
> having with 1.2.0.  If there is something else I should do to get more useful
> information at this point, then someone please let me know.

This kind of stuff is usually caused by memory protection errors. Two
things you can do:

 - insert a call to gctorture() close to the point of the crash. This
   will often make the crash occur closer to the point of the actual
   error.

 - Compile R (I'm afraid you have to recompile the entire thing)
   configured with the --enable-strict-barrier flag

Apart from that, you can of course try tracing the origins of the
error with gdb, e.g.

 - which variable had bogus contents?
 - when was the last time something wrote to that memory location?
 - etc...

It does get a bit excessive if I try to explain all that, though...

> > library(curve) 
Loading required package: dse1 
Loading required package: syskern 
Loading required package: tframe 
Program received signal SIGWINCH, Window size changed. 
0xef5b7400 in poll () (gdb)

> dsecurvature.function.testsA() 
Undefined command: "dsecurvature". Try "help". 
(gdb) continue Continuing.
> 
> > dsecurvature.function.testsA()
> Random number generator tests ...ok
> DSE curvature test A 1 ... completed
> DSE curvature test A 2 ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> 1551      CLASS_GET_FREE_NODE(node_class, s);
> (gdb) bactrace
> Undefined command: "bactrace".  Try "help".
> (gdb) backtrace
> #0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> #1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
> #2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 17:43:37 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 18:43:37 +0100 (MET)
Subject: [Rd] Help: StatXact
Message-ID: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>


Help needed!

Has anyone access to StatXact? I just hacked exact two-sided p-values for
rank tests (for package exactDistr, which will move to CRAN/contrib as
exactRankTests soon ;-) and would like to compare the results of my
implementation to that of StatXact. Could someone please calculate the
exact one-sided (both greater and less) and two-sided p-values?

# Data from the StatXact-4 manual, page 221
treat <- c(94, 108, 110, 90)
contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)

My results: 

> wilcox.exact(x,y)

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.8963 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(x,y, alternative="l")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.5656 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(x,y, alternative="g")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.4636 
alternative hypothesis: true mu is greater than 0 


Thanks!

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Dec 18 17:53:53 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Dec 2000 18:53:53 +0100
Subject: [Rd] Latest/last beta of R 1.1.1 for MacOS (rel Dec 10 2000)
Message-ID: <a05001905b663fcabe859@[159.149.74.61]>

Dear R&Mac developers(users),

at

http://www.eco-dip.unimi.it/R

you can find the latest (and last) beat version of R for MacOs 
corresponding to R vers 1.1.1.
Release date is Dec 10 2000. It is no longer a pre-alpha version but 
a beta one :)



In what follows you can find what's new in this version but please 
remember that it is still a beta version intended mainly for R 
developers and with the aim to collect as much feedback as possible.

Sometimes R application fails to allocate memory and it quits. This 
is a known bug and it will be fixed in the next release.

I think that this is the last porting of R 1.1.1 and next version of 
R for MacOS will be based on R ver 1.2.0 released on Dec 15 2000. I 
hope this to be a complete porting and it will come with next year.

I would like to thank the R Core Team people for the invaluable help 
given to me.

Stefano

p.s. I apologize for this long message.
----


Macintosh porting of R-1.1.1,  beta 1, (Dec 10 2000).



What's new from R for Mac pre-alpha  2
======================================

* tempfile() is now supported. Temporary files are stored in a directory
   "tmp" that it is assumed to be in the main R folder. If it doesn't
   exist, R create it. All temporary files will be stored there.

* unlink() is implemented. It can delete only files and dirs created
   from the current R session. Wildcards not allowed yet.

* Dynamic libraries are fully implemented grace to the code give to me
   by Luke Tierney.
   (There is a problem with DLLName. Every function must be searched
    for global and not for a specific package when calling .C/.Fortran etc)

* Most of the packages have been compiled but the tclk one.

* tclk demos disabled

* Packages. The following packages have been compiled or simply added
   to the base one:

   ctest (ex:tested)
   eda (ex:tested)
   lqs (ex:tested)
   modreg (ex:tested)
   mva (ex:tested)
   nls (ex:tested, does not work "SSlogis")
   splines (ex:tested)
   stepfun (ex:tested)
   ts (file AnIndex to be built)
   wavethresh (examples and help files to be built)

* Metric Information for graphics device partially working.
   You can write expressions and symbols in plots but it is not yet
   perfectly working.

* data(women) doesn't load! Can't understand why...yet.

* XDR loading/saving has been implemented. I use the code from B. Ripley
   that (seems) to work fine with very little modifications.

* Load and Save of image is now implemented correctly.

* Load and Save implemented from menu too. If you save from menu an icon
   will be added to the file. You can double-click on a R file to start the
   application or load a file in R if the application is running. You can
   also  drag&drop the file on the R icon to launch R.

* Help files are now displayed correctly with colors as under Windows


What else still remains to do!
==============================
There are lots of things that have to be implemented and fixed.
Not all the avalaible packages have been compiled. If you have any
particular need please let me know and I will compile and made
available the package. There is not an automatic install procedure
for building packages under MacOS yet.

This current version containes wavethresh and multiv packages but no
help files and examples are avalaible yet.
If you need them you should only copy the directories "help" and "R-ex"
of the Windows distribution in their respectively directory under this
distribution.

Memory problems
===============
There is a strange behaviour of this porting of R with memory
that I'm not able to fix yet.
As the memory routines will be changed in R 1.2 I decided to
fix it in version 1.2 of the MacOS porting.
Anyway, the suggested memory parameters are the following: from
Finder get Information on the R application and change its
assigned memory to 42000k. From within R application preferences set
RVSize = 5M and RNSize = 500k.


Hystory
=======



What was in R for Mac pre-alpha 2 and 1
=======================================
* dir, setcwd, getcwd
* macdevice pdated to WasteLib 2.0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mjr@stats.mth.uea.ac.uk  Mon Dec 18 18:01:34 2000
From: mjr@stats.mth.uea.ac.uk (MJ Ray)
Date: 18 Dec 2000 18:01:34 +0000
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: Paul Gilbert's message of "Fri, 15 Dec 2000 11:15:18 -0500"
References: <200012151512.QAA08186@pubhealth.ku.dk>
 <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
 <3A3A4396.5AF55E95@bank-banque-canada.ca>
Message-ID: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think we would be better off to let a non-native English speaker
> decide. My Shorter OED (possibly a special version for the colonies)
> gives both spelling. In french it is Licence.

In native English, it is "Licence".  In American English, it is
"License".  Personally, I prefer the native English version, but I'm
outnumbered on this planet.
-- 
MJR                                     (Not an official statement)
Please note changes of address		http://stats.mth.uea.ac.uk/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Dec 18 18:01:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 18 Dec 2000 19:01:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3E5104.F34880B0@statistik.uni-dortmund.de>



Torsten Hothorn wrote:
> 
> Help needed!
> 
> Has anyone access to StatXact? I just hacked exact two-sided p-values for
> rank tests (for package exactDistr, which will move to CRAN/contrib as
> exactRankTests soon ;-) and would like to compare the results of my
> implementation to that of StatXact. Could someone please calculate the
> exact one-sided (both greater and less) and two-sided p-values?
> 
> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results:
> 
> > wilcox.exact(x,y)
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.8963
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(x,y, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.5656
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(x,y, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.4636
> alternative hypothesis: true mu is greater than 0
> 
> Thanks!
> 
> Torsten


Hi Torsten!

I could do it tomorrow, when I am back in office (Stat-Xact 3 ???), if
you like ...

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 18 18:42:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Dec 2000 18:42:22 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>
Message-ID: <Pine.GSO.4.05.10012181839370.19824-100000@auk.stats>

On 18 Dec 2000, MJ Ray wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I think we would be better off to let a non-native English speaker
> > decide. My Shorter OED (possibly a special version for the colonies)
> > gives both spelling. In french it is Licence.
> 
> In native English, it is "Licence".  In American English, it is
> "License".  Personally, I prefer the native English version, but I'm
> outnumbered on this planet.

I don't think wither of those are relevant.  It is a DCF (Debian Control
Format?) file, and in DCF the entry is `License:'.  Human languages don't
come into it.  (As another example, the field is `Author:' even if there
are seventeen authors.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 18:53:03 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 19:53:03 +0100 (MET)
Subject: [Rd] Help: StatXact
In-Reply-To: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>


> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results: 

Upps, sorry, those results where totally non-sense. I'm to tired ;-)  

here are the results of my current implementation for the dataset above
(but data were correct!):

> wilcox.exact(treat, contr)

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.0989 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(treat, contr, alternative="l")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.9648 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(treat, contr, alternative="g")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.05568 
alternative hypothesis: true mu is greater than 0 

Sorry again, 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Dec 18 19:17:06 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 18 Dec 2000 14:17:06 -0500
Subject: [Rd] Some potential changes (enhancements) to formulas and models
Message-ID: <20001218141706.K11628@jimmy.harvard.edu>

Here is part 1 of my long saga towards a more flexible modeling
paradigm.
Comments and hints are especially welcome.

The simple version:
  Starting with a formula and data R goes through 3 main steps to get
the data into a form suitable for fitting.

 1) application of terms
 2) application of model.frame
    (subset and na.action occur in 2).
 3) application of model.matrix


 To be concrete think of the following two formulas

F1:  y~a*log(b)

F2:  y~a*(1+ exp(b*t))

 My goal is to introduce a meaningful way of specifying which symbols
are parameters and which are data.

 For now I'm just going to talk about the terms function and within
 that
 just about the factors component that is returned. I've had a look at
 the man pages and the White book (ch 2).

  The factors component is supposed to be a matrix with the variable
  names
  along the rows and the terms (whatever they are) as columns.

   If in F1 both a and b are variables then the terms are
    terms:  a, log(b), a:log(b)
  the variable names are
     vars: y, a, log(b)

   If a or b is a parameter (say it's a) then
   terms: log(b)
   vars: y, log(b)

  I think it would be easier if log(b) was in the terms  but b
  was in the vars.

    With F2, things aren't so simple:
     currently we get,

y ~ a + exp(b * t) + a:exp(b * t)
attr(,"variables")
list(y, a, exp(b * t))
attr(,"factors")
           a exp(b * t) a:exp(b * t)
y          0          0            0
a          1          0            1
exp(b * t) 0          1            1

  Which is ok, given that we haven't said anything about the variables
 but it certainly won't help us to build a model.
  Now suppose I want to identify a and b as parameters,
then I want to get:
  y ~ a * ( 1 + exp( b * t ) )

  terms:  t
  vars: y, t

   If just a is a parameter then I think that we should get

   terms: t, b, t:b
or terms: y, exp(b*t)
   vars: y, t, b

  Open questions:
 1) When do the special formula operators work and when do they take
their
    usual interpretation?

 2) I think that model.frame should produce a dataframe with
       columns corresponding to the variables in the model.
     - model.matrix is then responsible for using the model frame
      and the terms to produce a model.matrix

     In the F1 example, then under this scheme the model frame
     would contain y a and log(b)
     The model matrix would have a and log(b) in it.
     If b appears on its own and inside a function call does that
     correspond to two variables or one?

 3) In some sense we need define what a term is and
    what a variable is. We need to do that in a way that is meaningful
    for both linear and nonlinear (and possible graphical) models.

 4) Is the notion of model.matrix useful outside of linear models?
    If so, is it the place where we code up the contrasts

  Robert
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charpent@bacbuc.dyndns.org  Mon Dec 18 19:48:43 2000
From: charpent@bacbuc.dyndns.org (charpent@bacbuc.dyndns.org)
Date: Mon, 18 Dec 2000 20:48:43 +0100 (MET)
Subject: [Rd] R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ? (PR#775)
Message-ID: <200012181948.UAA25371@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: 1.2.0
OS: Linux 2.2.18 (Debian 2.2)
Submission from: (NULL) (193.251.31.31)


When trying "mass" installation of available packages, the package logspline
does not compile, at least when installed through
install.packages("logspline").

It seems that it is a small bug, such a missing #include <math.h> or -libm
linking switch ?

installation output follows (screen copy) :

> install.packages("logspline")
--20:39:02--  http://cran.r-project.org:80/src/contrib/PACKAGES
           => `/tmp/fileR2ef9S74b0dc51'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 29,955 [text/plain]

    0K -> .......... .......... .........                        [100%]

20:39:03 (43.47 KB/s) - `/tmp/fileR2ef9S74b0dc51' saved [29955/29955]

--20:39:03--  http://cran.r-project.org:80/src/contrib/logspline_1.0-2.tar.gz
           => `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 41,280 [application/x-tar]

    0K -> .......... .......... .......... ..........            [100%]

20:39:05 (31.57 KB/s) - `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
saved [41280/41280]

Installing source package `logspline' ...
 libs
gcc -I/usr/lib/R/include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES 
-fPIC  -g -O2 -c logsplin.c -o logsplin.o
g77   -fPIC  -g -O2 -c mpack.f -o mpack.o
ld: warning: cannot find entry symbol _start; defaulting to 08048080
logsplin.o: In function `logcensor':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:101: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:117: undefined reference to `pow'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:184: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:201: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:207: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:276: undefined reference to `log'
logsplin.o: In function `removeknot':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:334: undefined reference to
`sqrt'logsplin.o: In function `fits':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:350: undefined reference to `log'
logsplin.o: In function `iter':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:396: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:405: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:415: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:755: undefined reference to
`printf'
logsplin.o: In function `erroradjust':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:851: undefined reference to
`sqrt'logsplin.o: In function `likeli':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:890: undefined reference to `exp'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:915: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:918: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:924: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:940: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:946: undefined reference to `log'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:959: more undefined
references to `log' follow
logsplin.o: In function `linsearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1055: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1086: undefined reference to
`pow'logsplin.o: In function `onesearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1103: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1112: undefined reference to
`log'logsplin.o: In function `numbertester':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1141: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1144: undefined reference to
`pow'logsplin.o: In function `expin':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1199: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1205: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1210: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1211: more
undefined references to `exp' follow
logsplin.o: In function `expin2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1247: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1253: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1258: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1259: more
undefined references to `exp' follow
logsplin.o: In function `dens33':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1290: undefined reference to
`log'logsplin.o: In function `fun2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1451: undefined reference to
`exp'logsplin.o: In function `coeff':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: more
undefined references to `pow' follow
logsplin.o: In function `knotplace':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1929: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1933: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1951: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1970: undefined reference to
`ceil'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1971: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1975: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2110: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2112: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2126: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2128: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2147: undefined reference to
`printf'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2148: more undefined
references to `printf' follow
logsplin.o: In function `knotnumber':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2249: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2255: undefined reference to
`ceil'
logsplin.o: In function `middle':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2443: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2445: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2447: undefined reference to
`log'logsplin.o: In function `pqexp':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3037: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3039: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3040: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3043: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: more
undefined re
ferences to `exp' follow
logsplin.o: In function `pqexpi':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3142: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3144: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3146: undefined reference to
`exp'make: *** [logspline.so] Error 1
ERROR: Compilation failed for package `logspline'

Delete downloaded files (y/N)? 
The packages are in /tmp/RinstdirR2ef9S66334873
Warning messages: 
1: argument `lib' is missing: using /usr/lib/R/library in:
install.packages("logspline") 
2: Installation of package logspline had non-zero exit status in:
install.packages("logspline") 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 19 08:44:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 19 Dec 2000 09:44:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3F1FF8.1710657B@statistik.uni-dortmund.de>

Torsten Hothorn wrote:
> 
> > # Data from the StatXact-4 manual, page 221
> > treat <- c(94, 108, 110, 90)
> > contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> >
> > My results:
> 
> Upps, sorry, those results where totally non-sense. I'm to tired ;-)
> 
> here are the results of my current implementation for the dataset above
> (but data were correct!):
> 
> > wilcox.exact(treat, contr)
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.0989
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(treat, contr, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.9648
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(treat, contr, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.05568
> alternative hypothesis: true mu is greater than 0
> 
> Sorry again,
> 
> Torsten


Sorry, I cannot help Torsten:

1. Only StatXact 3 is available here.
2. I am too stupid to produce any output, which doesn't look like
nonsense....

Is another volunteer out there? ;-)

Best regards,
Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 13:53:42 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 14:53:42 +0100 (MET)
Subject: [Rd] strwidth does not take font into account (PR#776)
Message-ID: <200012191353.OAA05829@pubhealth.ku.dk>

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 14:09:04 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 15:09:04 +0100 (MET)
Subject: [Rd] Minor "make check" bug. (PR#777)
Message-ID: <200012191409.PAA06270@pubhealth.ku.dk>

If you build R with the following sequence

./configure
make R
make check

Then "make check" fails at the following point (in examples for help()
itself)

> try(help("bs", try.all.packages=FALSE)) # reports not found (an error)
Error in help("bs", try.all.packages = FALSE) :
        No documentation for `bs' in specified packages and libraries
> help("bs", try.all.packages=TRUE) # reports can be found in package `splines'
Error in help("bs", try.all.packages = TRUE) :
        No documentation for `bs' in specified packages and libraries
Execution halted

Evidently this is because the help pages for the package `splines'
have not been built.  The simplest solution would be to wrap the
second call to help in a call to try.

Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Dec 19 19:56:11 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 19 Dec 2000 20:56:11 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012191956.UAA09023@pubhealth.ku.dk>

Here's a bug one of my students noticed.

When you call plot() on a glm object, plot.lm gets called.  The second
plot it shows is supposed to give a normal QQ plot of the standard
deviance residuals, but it doesn't.  The glm object created by glm.fit
returns something (the IRLS weights?) in fit$weights which plot.lm
takes as observation weights, so  you get strange residuals in the QQ
plot.

For example, here I fit a simulated Poisson model where the model
perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
ranging between -45 and 40.

>set.seed(1)
>x <- seq(4,5,len=1000)
>y <- rpois(1000,exp(x))
>fit <- glm(y ~ x, family=poisson)
>plot(fit, which=2)

If I extract the residuals myself and plot them, I see that the model
is fine:

>qqnorm(residuals(fit))

The problem is that the weights are big; plot.lm should be using
prior.weights, or glm should be returning the big weights under a
different name:

> summary(fit$weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  54.35   69.90   89.90   93.76  115.60  148.70 

> summary(fit$prior.weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1       1       1       1       1       1 

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Dec 19 20:08:20 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 19 Dec 2000 21:08:20 +0100 (MET)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012192008.VAA09113@pubhealth.ku.dk>

When I use sink(filename) to save the results of the run, the file
does not seem to be closed or released back to the OS after I issue
the "sink()" command.  Here is a baby example:

sink("test.txt")
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))

print(summary(lm(y ~ x, data=tdta)))
sink()

At this point (even after refreshing the Explorer window) the filesize of
"test.txt" is listed as 0 bytes, and as long as Rgui is running, I
cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
and when the commands are in a file run via "source()".

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 20:36:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 20:36:46 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012192008.VAA09113@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>

On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:

> When I use sink(filename) to save the results of the run, the file
> does not seem to be closed or released back to the OS after I issue
> the "sink()" command.  Here is a baby example:

sink works on connections, not files, as from 1.2.0.

> sink("test.txt")
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> 
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> 
> At this point (even after refreshing the Explorer window) the filesize of
> "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> and when the commands are in a file run via "source()".

Yes, but what is the bug exactly?  The connection is still open so you can
switch output back to it.  If you want different behaviour, you can open a
connection and close it yourself.  As in

zz <- file("test.txt", "w")
sink(zz)
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
print(summary(lm(y ~ x, data=tdta)))
sink()
close(zz)

It might be better to close the file as well as the connection when
switching, but that is not what was done.  To do that use

sink <- function (file = NULL, append = FALSE) 
{
    if (is.null(file)) 
        file <- 1
    else if (is.character(file)) { 
        file <- file(file, ifelse(append, "a", "w"))
        on.exit(close(file))
    } else if (!inherits(file, "connection")) 
        stop("`file' must be NULL, a connection or a character string")
    .Internal(sink(file, append))
}

(One possible cause of confusion is that the connection might be closed,
but not the file.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 21:08:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 21:08:57 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10012192107220.11682-100000@auk.stats>

On Tue, 19 Dec 2000, Prof Brian D Ripley wrote:

> On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:
> 
> > When I use sink(filename) to save the results of the run, the file
> > does not seem to be closed or released back to the OS after I issue
> > the "sink()" command.  Here is a baby example:
> 
> sink works on connections, not files, as from 1.2.0.
> 
> > sink("test.txt")
> > tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> > 
> > print(summary(lm(y ~ x, data=tdta)))
> > sink()
> > 
> > At this point (even after refreshing the Explorer window) the filesize of
> > "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> > cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> > and when the commands are in a file run via "source()".
> 
> Yes, but what is the bug exactly?  The connection is still open so you can
> switch output back to it.  If you want different behaviour, you can open a
> connection and close it yourself.  As in
> 
> zz <- file("test.txt", "w")
> sink(zz)
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> close(zz)
> 
> It might be better to close the file as well as the connection when
> switching, but that is not what was done.  To do that use

Sorry, the following is nonsense, as it closes the connection at the
end of sink.  The one above works, though.

I'll make a change in the C code to ensure that the file gets closed if
the connection does.


> sink <- function (file = NULL, append = FALSE) 
> {
>     if (is.null(file)) 
>         file <- 1
>     else if (is.character(file)) { 
>         file <- file(file, ifelse(append, "a", "w"))
>         on.exit(close(file))
>     } else if (!inherits(file, "connection")) 
>         stop("`file' must be NULL, a connection or a character string")
>     .Internal(sink(file, append))
> }
> 
> (One possible cause of confusion is that the connection might be closed,
> but not the file.)
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 10:59:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 11:59:36 +0100 (MET)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
Message-ID: <200012201059.LAA15024@pubhealth.ku.dk>

Using zero-weight values in glm returns incorrect fitted values and
linear predictors, the ninth value in the following.

> example(glm)
> fit <- glm(counts ~ outcome + treatment, family = poisson(), 
             data=d.AD, weights=c(rep(1,8), 0))
> fit$linear.predictor
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
2.493205 
> predict(fit, d.AD)
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
3.018547 
> fitted(fit)
       1        2        3        4        5        6        7        8 
19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728 
       9 
12.10000 
> predict(fit, d.AD, type="response")
[1] 19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728
[9] 20.46154

The reason is obvious: glm.fit only ever updates eta[good], and 
zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
initial values.

There are two possible fixes:

1) Update eta after the final fit, and then mu.  Out of range values
could then be NA (although it looks like predict.glm does not check).

2) Update all eta and hence mu values during the iterations.  This will
apply the constraints on eta/mu at zero-weight points too, and so might
be different.

I am inclined to think that 2) is right, and that adding points with zero 
weight to the fit is not the same as omitting them.

Opinions?


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 11:12:37 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 12:12:37 +0100 (MET)
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
Message-ID: <200012201112.MAA15286@pubhealth.ku.dk>

syskern (`Functions for writing code that is OS and R/S independent', an
amazing description given the reality) fails Rcmd check on Windows, and
also gives incorrect information where it does work.

There are already correct OS-independent functions for these purposes in
R.  It appears not to be needed to run the other three packages in the dse
bundle, but to be the only R package that deliberately does not work on
one of the major platforms.  I doubt if it works on Macs, either.  It
should not be in the main section of CRAN unless it does what it claims.
 
> example(global.assign)

glbl.s> date.parsed()
Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "date.parsed"

It has not been implemented!

> example(system.call)

systm.> system.call("ls")
Error in system.call("ls") : system calls must be implemented for this operating system.

But they are:

> shell("ls -C")
#R.bug.report#       cvs-co               test1
DF.R                 jpegsrc.v6b.tar.gz   test2.emf
GSD2.EMF             libpng-1.0.8.tar.gz  test3.emf
R-1.2.0.tgz          library              test4.emf
R.bug.report         mri.dat              test5.emf
Rconsole             mydata               texinfo-4.0.tar.bz2
Rdist                packages             tools
TB                   rw1020               tools.zip
VR3sc                rw1021               winold.zip
addlibs              rw1030               zlib113.zip

> system("ls", intern=TRUE)
 [1] "#R.bug.report#"      "DF.R"                "GSD2.EMF"           
 [4] "R-1.2.0.tgz"         "R.bug.report"        "Rconsole"           
 [7] "Rdist"               "TB"                  "VR3sc"              
[10] "addlibs"             "cvs-co"              "jpegsrc.v6b.tar.gz" 
[13] "libpng-1.0.8.tar.gz" "library"             "mri.dat"            
[16] "mydata"              "packages"            "rw1020"             
[19] "rw1021"              "rw1030"              "test1"              
[22] "test2.emf"           "test3.emf"           "test4.emf"          
[25] "test5.emf"           "texinfo-4.0.tar.bz2" "tools"              
[28] "tools.zip"           "winold.zip"          "zlib113.zip"        

Of course, `ls' is OS-dependent, so should not be used as an example
in a purportedly OS-independent package.

> example(system.info)

systm.> system.info()
          _              
platform  i386-pc-mingw32
arch      x86            
os        Win32          
system    x86, Win32     
status                   
major     1              
minor     2              
year      2000           
month     12             
day       15             
language  R              
OSversion MS Windows 95  
OStype    MS Windows     

That is incorrect: see what bug.report gives below.  The heading looks
strange too.

> example(whoami)

whoami> whoami()
Error in whoami() : system calls must be implemented for this operating system.

They are:

> system("whoami", intern=T)
[1] "ripley"
> Sys.info()["user"]
    user 
"ripley" 


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, package:syskern, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Dec 20 11:48:23 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 20 Dec 2000 06:48:23 -0500 (EST)
Subject: [Rd] Example of calling R from Java
Message-ID: <200012201148.GAA25303@jessie.research.bell-labs.com>


> From: "Moshe Recanati" <moshe@i-impact.com>
> Date: Sun, 17 Dec 2000 10:12:25 +0200
> 
> Hello,
> 
> I downloaded the R for Java interface. I read about calling R =
> scripts/methods from java, but I can't find any detailed example about =
> this.
> 
> I need an example of how to use this.
> 
> For example how to load data object (i.e. of colt) to r , run anova =
> function and get the results - all from java!!!
> 
> Thank you very very much
> Regards,
> Moshe
> i-impact
> 


There is a new version of both the Java package (now 0.61) and the
RFromJava document (http://www.omegahat.org/RSJava/RFromJava.pdf)
which gives an example (with the code and a script to run it) of
fitting a linear model in R from Java and getting the resulting lm
object back to Java.

As I have mentioned before, you have to think about what it means
to "get the results" in the context of your application. 

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:28:51 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:28:51 +0100
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012201228.NAA04053@mailgate3.cinetic.de>



Dear Prof. Ripley,

You wrote
> Yes, but what is the bug exactly?  

Just testing connections, I think the bug is that the help for sink says that:

  If `file' is a connection if will be opened if necessary.
     Switching to another file or connection closes the existing
     connection unless it is the console.

and after switching to another file or connection the existing connection is not closed.

> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> sink()
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> # now we have silently an open connection left

I tend to think that a sequence of

 sink(WhateverConnectionInvolved)
 :
 :
 sink()

should leave WhateverConnectionInvolved in the same state it was before the sequence.
i.e. if WhateverConnectionInvolved was non.existent it should be non.existent
i.e. if WhateverConnectionInvolved was existent but not opened it should be existent but not opened 
i.e. if WhateverConnectionInvolved was existent and opened it should be existent and opened 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software.


Regards

Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 13:37:55 +0100
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 20 Dec 2000 11:59:36 +0100 (MET)"
References: <200012201059.LAA15024@pubhealth.ku.dk>
Message-ID: <x21yv346ak.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> The reason is obvious: glm.fit only ever updates eta[good], and 
> zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> initial values.
> 
> There are two possible fixes:
> 
> 1) Update eta after the final fit, and then mu.  Out of range values
> could then be NA (although it looks like predict.glm does not check).
> 
> 2) Update all eta and hence mu values during the iterations.  This will
> apply the constraints on eta/mu at zero-weight points too, and so might
> be different.
> 
> I am inclined to think that 2) is right, and that adding points with zero 
> weight to the fit is not the same as omitting them.
> 
> Opinions?

Just for clarification: This applies only to cases where the
parametrization is non-canonical, e.g. additive models with Poisson
response, right? And essentially the issue is that if you have a model
like lambda = a + b x and you put in a zero-weight observation with x
= 0, then that should effectively constrain a to be positive. That
does make quite good sense, yes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:27 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:32:27 +0100 (MET)
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone (PR#782)
Message-ID: <200012201232.NAA16586@pubhealth.ku.dk>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:41 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:32:41 +0100
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone
Message-ID: <200012201232.NAA08295@mailgate3.cinetic.de>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:33:15 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:33:15 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012201228.NAA04053@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201231510.3109-100000@toucan.stats>

On Wed, 20 Dec 2000, [iso-8859-1] Jens Oehlschlgel wrote:

> 
> 
> Dear Prof. Ripley,
> 
> You wrote
> > Yes, but what is the bug exactly?  
> 
> Just testing connections, I think the bug is that the help for sink says that:
> 
>   If `file' is a connection if will be opened if necessary.
>      Switching to another file or connection closes the existing
>      connection unless it is the console.
> 
> and after switching to another file or connection the existing connection is not closed.
> 
> > showConnections()
>      class description mode text isopen can read can write
> > sink("tempfile")
> > sink()
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> > # now we have silently an open connection left

Um, actually it is closed but not removed from the list.  But I have 
put a fix in for 1.2.1, that closes it properly.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:17 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:36:17 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
Message-ID: <200012201236.NAA12101@mailgate3.cinetic.de>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:03 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:36:03 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#783)
Message-ID: <200012201236.NAA16683@pubhealth.ku.dk>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:37:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:37:24 +0000 (GMT)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201233420.3109-100000@toucan.stats>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.

Constraints can be added by the user, of course, but in the standard cases
(canonical links) they never bite.  Poisson with linear link is one case
where they might.  This checking is something that R has but S and GLIM
(AFAIR) do not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:43 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:42:43 +0100
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so
Message-ID: <200012201242.NAA18762@mailgate3.cinetic.de>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:32 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:42:32 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so (PR#784)
Message-ID: <200012201242.NAA16855@pubhealth.ku.dk>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
Subject: [Rd] unlink() is not synchronized with existing connections
 (PR#783)
In-Reply-To: <200012201236.NAA16683@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201240300.3109-100000@toucan.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:20 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:47:20 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#785)
Message-ID: <200012201247.NAA16941@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:33 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
Subject: [Rd] showConnections() does not show closed (or non-opened)
 connections though help says so
In-Reply-To: <200012201242.NAA18762@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201249110.3109-100000@toucan.stats>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:27 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:51:27 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) (PR#786)
Message-ID: <200012201251.NAA17017@pubhealth.ku.dk>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:38 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:56:38 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections (PR#787)
Message-ID: <200012201256.NAA17159@pubhealth.ku.dk>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:49 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:56:49 +0100
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections
Message-ID: <200012201256.NAA01807@mailgate3.cinetic.de>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 13:12:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 14:12:07 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
In-Reply-To: "Jens Oehlschl?gel"'s message of "Wed, 20 Dec 2000 13:36:17 +0100"
References: <200012201236.NAA12101@mailgate3.cinetic.de>
Message-ID: <x2vgsf2q54.fsf@blueberry.kubism.ku.dk>


Jens, could you please avoid mailing to r-devel *and* r-bugs. R-bugs
are automagically forwarded to r-devel with the PR# added, so

a) we get it in duplicate
b) if anyone follows up to the version without the PR# we will
	1) get that in duplicate too
	2) get a *new* PR# for the follow up

(There are bugs enough, no need to multiply them...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:15:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 14:15:13 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying (PR#788)
Message-ID: <200012201315.OAA17519@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:14:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying
 connections (PR#787)
In-Reply-To: <200012201256.NAA17159@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201310370.14649-100000@auk.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Dec 20 16:18:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 20 Dec 2000 08:18:31 -0800 (PST)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0012200812560.14916-100000@atlas.biostat.washington.edu>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.
> 

Not just non-canonical. There are boundary problems with gamma/reciprocal
glms.  I would also go for the second solution.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Wed Dec 20 17:50:21 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Wed, 20 Dec 2000 17:50:21 -0000
Subject: R: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <011701c06aad$533ac1e0$0a00a8c0@bellview>

I've just uploaded the files

Thanks for your attention,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: luned 18 dicembre 2000 11.00
Oggetto: Re: R: [Rd] Some libraries and ideas for a 'librarified' R


>>>>>> Federico Spinazzi writes:
>
>> Well, I think the better solution would be to put them on the web: I
>> tried to open two web pages but I forget the possword every time :-(.
>
>> I see 2 quick solutions:
>> - send the files via e-mail
>> - put the files on CRAN (where?);
>
>See the FAQ:
>
>   To "submit" to CRAN, simply upload to
>`ftp://cran.r-project.org/incoming/' and send an email to
><wwwadmin@cran.r-project.org>.
>
>     *Note:*  It is very important that you indicate the copyright
>     (license) information (GPL, BSD, Artistic, ...)  in your
>     submission.
>
>-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Dec 20 21:15:07 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Dec 2000 22:15:07 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <14913.8539.45887.551220@celeborn.at>


Hi,

Kurt Hornik and I will start to publish a quarterly electronic

	``R Newsletter'' 

beginning with January 2001 (if all goes well). The idea is to have a
mixture of articles  describing 
1) new features in R itself
2) contributed add-on packages
3) nice applications
4) more general statistical computing issues related to R
5) or ...

OK, now comes my christmas wish to you: If you are the author of a
package on CRAN and want to promote it a little bit, well, maybe you
find some time during the holidays to write approx. 2 pages (A4 or
letter) in LaTeX and send it to Kurt or me? The same applies if you
simply have a nice application using R.  The idea is to have the
newsletter not too technical, i.e., an article describing a package
could shortly describe the statistical background and then demonstrate
the usage on some typical data set. Of course graphics are more than
welcome!

The newsletter will be published as PDF file on CRAN, the final format
will be created while we layout number one, hence any LaTeX file
should be fine as contribution.  

Otherwise I wish everybody all the best for X-Mas and a happy new
year!

Best,
Fritz Leisch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Wed Dec 20 22:17:23 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Wed, 20 Dec 2000 17:17:23 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>

This is a very nice idea. I would have a problem tough with the Latex format
you require. I'm almost certain that to most Windows user, Latex is as bad
news as a foreign language you know nothing about. Would there be an
alternative to please every body?

Regards

Yves Gauvreau


> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Friedrich Leisch
> Envoye : Wednesday, December 20, 2000 4:15 PM
> A : r-devel@stat.math.ethz.ch
> Objet : [Rd] R Newsletter: 1st Call for Articles
>
>
>
> Hi,
>
> Kurt Hornik and I will start to publish a quarterly electronic
>
> 	``R Newsletter''
>
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
>
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
>
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.
>
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
>
> Best,
> Fritz Leisch
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 23:28:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 00:28:00 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: "Yves Gauvreau"'s message of "Wed, 20 Dec 2000 17:17:23 -0500"
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>
Message-ID: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>

"Yves Gauvreau" <cyg@sympatico.ca> writes:

> This is a very nice idea. I would have a problem tough with the Latex format
> you require. I'm almost certain that to most Windows user, Latex is as bad
> news as a foreign language you know nothing about. Would there be an
> alternative to please every body?

Not really, dealing with MS Word would be a nightmare, and LaTeX is
just about the only format with decent treatment of mathematics.

However, I'm pretty sure that plain ascii would also be acceptable for
simple articles. On the other hand, why should the editors have the
trouble of putting all code excerpts in \begin{verbatim} ..
\end{verbatim} constructs, etc.? 

Perhaps one could define a simplified LaTeX markup similar to .Rd.

Or maybe just point people towards MiKTeX and give them a crash course
in LaTeX? For plain text, the format is really quite simple.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Dec 20 23:20:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Dec 2000 18:20:48 -0500
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
References: <200012201112.MAA15286@pubhealth.ku.dk>
Message-ID: <3A413ED0.DC3D6CC9@bank-banque-canada.ca>

Brian

I have a new version of syskern which takes advantage of the new
features you have added in R 1.2. I just sent details to Fritz. I'm
sorry that I am a bit slow getting it to CRAN, the release of R 1.2 came
at a very busy time for me. In the future, if you give me a bit more
warning when you are going to test packages with a brand new release of
R, I can probably save you some time by telling you what problems to
expect.

I believe most of syskern now uses standard features of R, so almost
everything should work on all platforms on which R 1.2 works. The main
outstanding facility is a mail interface, which you indicated previously
is problematic in Windows. In any case, it would be useful to
standardize R's side of this so that R programs, like mine and also
bug.report(), can use a program mail() which works on some platforms and
may eventually work on others.

>syskern (`Functions for writing code that is OS and R/S independent' an

>amazing description given the reality

I think you are mis-reading this. If you would like to suggest better
phrasing then that may be helpful. The intention was not to provide the
OS-independent functions as you have now done in R. The intention was to
provide an R-side definition of these functions so that I (and others)
could write R programs in a standardized way to use these facilities
when they became available in R. I kludged a Unix version of the
facilities and invited others to do Windows and Mac versions. Five years
ago when R was still young I needed these facilities to use in R
programs, and it has worked very well. It was very little work for me to
take advantage of the new features in R 1.2. I expect my versions will
become depreciated in R and their main use will be to provide S with
similar names for the same facilities, but there are still a few issues
so it is too early to depreciate them yet.

Seasons Greetings,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Dec 21 01:31:52 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 20 Dec 2000 17:31:52 -0800 (PST)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201721180.11764-100000@tajo.ucsd.edu>

On 21 Dec 2000, Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> > This is a very nice idea. I would have a problem tough with the Latex format
> > you require. I'm almost certain that to most Windows user, Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 

FWIW, at least one of the equation setting add-ons for WORD (MathType, see
http://www.mathtype.com ) has TeX as its engine. It will optionally
provide (La)TeX on the clipboard for pasting into non-WORD docs. So a WORD
user could provide ascii for the text and (La)TeX for equations.


> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Dec 21 01:55:31 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 21 Dec 2000 09:55:31 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <Pine.GSO.4.21.0012210954431.16878-100000@sununx.comp.nus.edu.sg>

Hi,
where should we make submissions? To you directly?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Friedrich Leisch wrote:

> 
> Hi,
> 
> Kurt Hornik and I will start to publish a quarterly electronic
> 
> 	``R Newsletter'' 
> 
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing 
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
> 
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
> 
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.  
> 
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
> 
> Best,
> Fritz Leisch
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu Dec 21 03:38:54 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 21 Dec 2000 13:38:54 +1000
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>

With regard to the burgeoning side-discussion on whether or not to accept
WORD submissions, I plead for a quick, decisive and final ruling in the
negative.

Apart from the major practical considerations to do with the amount of work
putting together a document from sources of both kinds and achieving an
acceptable result, there is the relatively minor issue of principle: R is
open source software and should do what it can to promote the use of other
open source products.

I fully realise that this will create problems for people who are not
familiar with LaTeX.  I hope for people like Yves it is the start of a
liberating journey of discovery...but for many it will not be.  It would
seem to me the best option for such people is simply to accept submissions
in neat ASCII, (with some diffidence, of course, as such submissions will
require someone to do a lot of work before they can be incorporated into a
document).

When it comes to submitting graphics, though, I have no easy solution for
those unfortunates crippled and imprisoned by the MicroSoft arrogation of
the universe.  It would be simple if R had a pdf.graph device: is any such
development in prospect?  For that matter, how should Unix/Linux people
submit graphics?

Charles Berry observes:
> 
> FWIW, at least one of the equation setting add-ons for WORD 
> (MathType, see http://www.mathtype.com) has TeX as its engine. 
> It will optionally provide (La)TeX on the clipboard for pasting 
> into non-WORD docs. So a WORD user could provide ascii for the 
> text and (La)TeX for equations.

Yes, but....  MathType is yet another (stiffly priced) commercial add-on, it
is only one version of MathType that has the TeX output options and as far
as I can see mathematical typesetting is not going to be a large part of the
newsletter, anyway.  I would also claim that the TeX output you get from
such automatically produced stuff is not always very good TeX, too...for
example, vulgar fractions such as 1/2 are always too large.  I'm not all
that sure this intended courtesy to the person putting the newsletter
together would actually save very much work.  The best solution from all
points of view is the hard one: encourage submissions in GOOD LaTeX.

Bill Venables.

--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.visch@math.canterbury.ac.nz  Thu Dec 21 04:21:49 2000
From: j.visch@math.canterbury.ac.nz (j.visch@math.canterbury.ac.nz)
Date: Thu, 21 Dec 2000 17:21:49 +1300 (NZDT)
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>

Bill Venables writes:
 > With regard to the burgeoning side-discussion on whether or not to accept
 > WORD submissions, I plead for a quick, decisive and final ruling in the
 > negative.

Why not just give the word users a latex template they can fill in.
After all most of latex is just copying from previous documents.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012210615.HAA19446@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 764 *
Subject: qqline
From: Setzer.Woodrow@epamail.epa.gov
Date: Mon, 11 Dec 2000 18:06:27 -0500
--changed for 1.2.0 already, perhaps not what was desired
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
--Still with us Dec 10 2000
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800

Directory:  Low-level

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--Compiler trouble, probably not bug
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 788 *
Subject: Re: [Rd] Inconsistency in creating/opening/closing/destroying
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
* PR# 768 *
Subject: R on Redhat 7 / glibc problem
From: B.Rowlingson@lancaster.ac.uk
Date: Fri, 15 Dec 2000 19:12:29 +0100 (MET)
* PR# 766 *
Subject: R1.2.0
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Fri, 15 Dec 2000 16:12:12 +0100 (MET)
* PR# 765 *
Subject: cannot allocate vector of size in merge
From: viktorm@pdf.com
Date: Fri, 15 Dec 2000 00:06:56 +0100 (MET)
* PR# 772 *
Subject: demo(is.things) fails
From: B.Rowlingson@lancaster.ac.uk
Date: Mon, 18 Dec 2000 13:46:02 +0100 (MET)
* PR# 771 *
Subject: problems with glm
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Mon, 18 Dec 2000 09:28:01 +0100 (MET)
* PR# 775 *
Subject: R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ?
From: charpent@bacbuc.dyndns.org
Date: Mon, 18 Dec 2000 20:48:42 +0100 (MET)
* PR# 774 *
Subject: \item{x}<cr>{description of x}
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 18 Dec 2000 11:05:39 -0500
* PR# 773 *
Subject: INSTALL should have info on make check
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Dec 2000 16:13:59 +0100
* PR# 777 *
Subject: Minor "make check" bug.
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 15:11:24 +0100 (CET)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 780 *
Subject: glm gives incorrect results for zero-weight cases
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 10:59:48 +0000 (GMT)
* PR# 779 *
Subject: Problem with sink() in 1.20 on Windows
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 19 Dec 2000 15:04:51 -0500
* PR# 778 *
Subject: Bug in glm.fit() or plot.lm()
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 19 Dec 2000 14:57:59 -0500
* PR# 783 *
Subject: unlink() is not synchronized with existing connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:36:17 +0100
* PR# 782 *
Subject: closing the sink connection a) is possible and b) can't be undone
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:32:41 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
* PR# 785 *
Subject: Re: [Rd] unlink() is not synchronized with existing connections
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
* PR# 784 *
Subject: showConnections() does not show closed (or non-opened) connections though help says so
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:42:43 +0100
* PR# 787 *
Subject: Inconsistency in creating/opening/closing/destroying connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:56:49 +0100
* PR# 786 *
Subject: Re: [Rd] showConnections() does not show closed (or non-opened)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 21 08:06:35 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Dec 2000 08:06:35 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.05.10012210748180.15375-100000@auk.stats>

On Thu, 21 Dec 2000 Bill.Venables@CMIS.CSIRO.AU wrote:

> With regard to the burgeoning side-discussion on whether or not to accept
> WORD submissions, I plead for a quick, decisive and final ruling in the
> negative.
> 
> Apart from the major practical considerations to do with the amount of work
> putting together a document from sources of both kinds and achieving an
> acceptable result, there is the relatively minor issue of principle: R is
> open source software and should do what it can to promote the use of other
> open source products.
> 
> I fully realise that this will create problems for people who are not
> familiar with LaTeX.  I hope for people like Yves it is the start of a
> liberating journey of discovery...but for many it will not be.  It would
> seem to me the best option for such people is simply to accept submissions
> in neat ASCII, (with some diffidence, of course, as such submissions will
> require someone to do a lot of work before they can be incorporated into a
> document).

One option for Word users is to save in RTF, which is at least a documented
format (and shared between word processors).  Then get a copy of rtf2latex  
or (better) rtf2latex2e from CTAN and check out the conversion.
 
Peter D mentioned MiKTeX.  I would recommend fptex to Windows users
instead: it is closer to the Unix/Linux standard system (teTeX) and is
more complete and up-to-date.  (The latter is particularly important for    
pdftex users: for example at one time fptex would process the R refman.pdf, 
and MikTeX would not.)  fptex used to be harder to instll, but no longer,
and it is the preferred system on the TeXLive5 distribution, I'm told.


> When it comes to submitting graphics, though, I have no easy solution for
> those unfortunates crippled and imprisoned by the MicroSoft arrogation of
> the universe.  It would be simple if R had a pdf.graph device: is any such
> development in prospect?  For that matter, how should Unix/Linux people
> submit graphics?

Yes, there is one already (take a closer look at bitmap, whose help says

     Note: despite the name of the functions they can produce PDF via
     `type = "pdfwrite"', and the PDF produced is not bitmapped.

).  A native PDF device is planned, and was one of the reasons for the
changes to postscript() in 1.2.0 (to enable code to be shared).
For some time my entry on developer.r-project.org has said

   A native PDF graphics driver.

and that site is a good place to look for future plans (but some team
members keep their secret).

I don't see the problem: R can produce PostScript everywhere, and it
can even produce EPS these days.  Windows users can produce other figures
in WMF if they want, but that can be converted to EPS successfully by a
number of routes.  If people want to annotate figures, R can produce .fig,
and xfig runs under Unix/Linux and Windows ....   So I suggest figures be
produced in PostScript.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Dec 21 11:11:42 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 21 Dec 2000 12:11:42 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <3.0.32.20001221121141.00910100@162.38.183.200>

At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
>One option for Word users is to save in RTF, which is at least a documented
>format (and shared between word processors).  Then get a copy of rtf2latex  
>or (better) rtf2latex2e from CTAN and check out the conversion.

I use StarOffice under WinNT and it seems that the RTF files it produces
cannot be read by MS Word. I am not sure that RTF is really "portable".

I agree with a previous message:

At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
>Why not just give the word users a latex template they can fill in.
>After all most of latex is just copying from previous documents.

And yes, we can produce PostScript figures under Windows as well.

Question: what will be the editorial policy of R Newsletter? Will papers be
reviewed? ...

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 11:59:30 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 06:59:30 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>


Ok, I understand the problematic and I have no problems with it. The next
question that comes to mind is: Is there some Latex software or something
that one could use to produce Latex documents on a Windows platform?

Although I did it in the past, I would prefer not to install Linux. I'm not
a guru of Emacs but I'm using it quite a lot these days. Could there be
something that works with Emacs and with which I could produce Latex docs
maybe?

BTW, I was sincere about the idea of this Newsletter. I look forward reading
it.

Regards

Yves Gauvreau

> -----Message d'origine-----
> De : pd@blueberry.kubism.ku.dk [mailto:pd@blueberry.kubism.ku.dk]De la
> part de Peter Dalgaard BSA
> Envoye : Wednesday, December 20, 2000 6:28 PM
> A : Yves Gauvreau
> Cc : Friedrich Leisch; r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] R Newsletter: 1st Call for Articles
>
>
> "Yves Gauvreau" <cyg@sympatico.ca> writes:
>
> > This is a very nice idea. I would have a problem tough with the
> Latex format
> > you require. I'm almost certain that to most Windows user,
> Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
>
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
>
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.?
>
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
>
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:49:49 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:49:49 -0500
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>
Message-ID: <NEBBJKDJHEFCOOLFFAKKKEBLCAAA.cyg@sympatico.ca>

Hi,

If I can humbly suggest, a standard template that could be used for the
"text" part on any platform. This would certainly be one if not the best
solution. Complement this with postscript graphics as suggested by Prof.
Ripley or chose any other output that R itself can produce and show us how
to embed these in our text maybe as an example in the template.

Then where left with equations I think and here again, if I'm not mistaking,
R as some utilities for that as well or maybe for those like me who know
nothing about Latex except the name, you could direct us to some Latex
guide, tutorial or whatever that could help us imbed equation in our text.

I think this is common practice as I ear some of you complain that this
editor wants this or that standard for their submitted papers.

This kind of solution would have the merit of stopping the ongoing war of
words between the two major community of pc users.

Regards

Yves Gauvreau



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de
> j.visch@math.canterbury.ac.nz
> Envoy : Wednesday, December 20, 2000 11:22 PM
>  : r-devel@stat.math.ethz.ch
> Objet : [Rd] RE: R Newsletter: 1st Call for Articles
>
>
> Bill Venables writes:
>  > With regard to the burgeoning side-discussion on whether or
> not to accept
>  > WORD submissions, I plead for a quick, decisive and final ruling in the
>  > negative.
>
> Why not just give the word users a latex template they can fill in.
> After all most of latex is just copying from previous documents.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Dec 21 12:54:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Dec 2000 12:54:53 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <200012211254.MAA02221@toucan.stats.ox.ac.uk>

> From: "Yves Gauvreau" <cyg@sympatico.ca>
> Date: Thu, 21 Dec 2000 06:59:30 -0500
> 
> Ok, I understand the problematic and I have no problems with it. The next
> question that comes to mind is: Is there some Latex software or something
> that one could use to produce Latex documents on a Windows platform?
> 
> Although I did it in the past, I would prefer not to install Linux. I'm not
> a guru of Emacs but I'm using it quite a lot these days. Could there be
> something that works with Emacs and with which I could produce Latex docs
> maybe?

Here's what we recommend to Windows users.

Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
Group TUG, or you can download the image and cut it yourself if you
have a good Internet connection).

Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
gives you a very capable latex mode for emacs.  This works fine on NT
if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
an alternative shell if you want to run latex from the menus.

Some people prefer the shareware WinEdt editor, which gives you
a customized latex editor:
http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
It may work better with MikTeX.

All the other pieces are also on TeXLive5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:59:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:59:53 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3.0.32.20001221121141.00910100@162.38.183.200>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBMCAAA.cyg@sympatico.ca>



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Emmanuel Paradis
> Envoye : Thursday, December 21, 2000 6:12 AM
> A : Prof Brian D Ripley
> Cc : r-devel@stat.math.ethz.ch
> Objet : RE: [Rd] R Newsletter: 1st Call for Articles
>
>
> At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
> >One option for Word users is to save in RTF, which is at least a
> documented
> >format (and shared between word processors).  Then get a copy of
> rtf2latex
> >or (better) rtf2latex2e from CTAN and check out the conversion.
>
> I use StarOffice under WinNT and it seems that the RTF files it produces
> cannot be read by MS Word. I am not sure that RTF is really "portable".
>
> I agree with a previous message:
>
> At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
> >Why not just give the word users a latex template they can fill in.
> >After all most of latex is just copying from previous documents.
>
> And yes, we can produce PostScript figures under Windows as well.
>
> Question: what will be the editorial policy of R Newsletter? Will
> papers be
> reviewed? ...

On this last question I personally think there should be some kind of
revision to insure the correctness of the statements given in the papers.
Instead of changing the content themselves the editors could send back the
paper with a note saying what is potentially wrong in their view. This would
allow the author to take appropriate action as he or she desire.

Yves Gauvreau

>
> Emmanuel Paradis
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Dec 21 13:10:51 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 21 Dec 2000 13:10:51 GMT
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
References: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
Message-ID: <3a41ff2e.53493520@smtp1.sympatico.ca>

On Thu, 21 Dec 2000 06:59:30 -0500, you wrote:

>
>Ok, I understand the problematic and I have no problems with it. The next
>question that comes to mind is: Is there some Latex software or something
>that one could use to produce Latex documents on a Windows platform?

Latex is the language that you type; a processor converts it into
things that will print (in the old days, .dvi files; now .ps or .pdf
or .html files too).

If you really mean you want a program to produce the Latex for you,
there are several choices:  Mathematica can output Latex, there used
to be a package called Scientific Word that would do the same.  One
thing to watch out for is that these programs produce Latex that might
not be usable by anyone else, since they rely on special macros that
not everyone has.  (This was my experience with SW several years ago,
I've never used these facilities in Mathematica.)

There is an editor called WinEdt that has a number of facilities
built-in to help in typing Latex files.

If you meant you want to process Latex files, Brian Ripley mentioned
two:  Miktex and fptex.  I've recently switched to Miktex and it's
fine; I don't have experience with fptex.  Miktex isn't completely
trivial to install, but it's much better than some of the older
distributions (which required you to set up a long list of environment
variables, and put files in the right places, etc.).  

You can download Miktex or fptex from http://www.ctan.org/.  I don't
know which files you need to get; someone else did it for me.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Dec 21 14:36:39 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Dec 2000 15:36:39 +0100
Subject: [Rd] Submission format for R Newsletter
Message-ID: <14914.5495.702990.151333@galadriel.ci.tuwien.ac.at>


Hi,

Sorry for responding so late, but I've been in meetings all day
long. The decision to ask for latex articles was deliberate, because
I've to deal with MS-Word files from time to time and know of no clean
way of converting it to Latex without a lot of manual intervention
(and the newsletter itself will be produced in latex).

We will make a template for articles available together with the first
edition of the newsletter (which we want to publish mid-January). So
prospective authors who are not literate in Latex: please wait one
month ...

Answers to other questions:
1) Graphics are preferred in PDF or EPS format, bitmaps like JPG are
alo OK but please keep in mind that those cannot be scaled easily and
hence might look ugly in the final version.

2) Articles should be sent by email to Kurt Hornik or me.

3) Articles will be reviewed by the editors.

I hope this clarifies some points and that such a lot of interest also
means that we will see (and enjoy to read) a lot of interesting
articles!

Best,
Fritz


-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@sunysb.edu  Thu Dec 21 01:28:07 2000
From: Timothy.Keitt@sunysb.edu (Timothy H. Keitt,)
Date: Wed, 20 Dec 2000 20:28:07 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca> <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A415CA7.2010807@SUNYSB.Edu>

You could use Lyx (www.lyx.org).  It exports (human readable) latex.

Tim

Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> 
>> This is a very nice idea. I would have a problem tough with the Latex format
>> you require. I'm almost certain that to most Windows user, Latex is as bad
>> news as a foreign language you know nothing about. Would there be an
>> alternative to please every body?
> 
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Thu Dec 21 19:55:36 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Thu, 21 Dec 2000 13:55:36 -0600
Subject: [Rd] RH7.0 compilation
Message-ID: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>

Hi everyone,

Like most people with RH7.0 Linux, I had problems with their "experimental"
gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
in the /usr/local tree, so it will be picked up first as /usr/local/bin if
before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
straight out of the box (as well as compile Linux kernels).  One problem I
had, however, was that the Matrix package would not link, with linker
complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".

Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
I installed them and, just to check them out, recompiled R-1.2.0 with it.
It compiled fine and passed all the checks.  Moreover, now the Matrix
package compiles and installs fine.  The only thing I see different is that
while compiling R-1.2.0 I get a bunch of warnings like this:

making devices.d from devices.c
In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
nothing can be pasted after this token
making dynload.d from dynload.c

and like this

FFTab.h:2:29: warning: pasting would not give a valid preprocessing token


Cheers,

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Dec 21 20:08:26 2000
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Thu, 21 Dec 2000 21:08:26 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <200012211254.MAA02221@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Dec 21, 2000 at 12:54:53PM +0000
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk>
Message-ID: <20001221210826.A16253@tu-bs.de>

On Thu, Dec 21, 2000 at 12:54:53PM +0000, Prof Brian Ripley wrote:
> > From: "Yves Gauvreau" <cyg@sympatico.ca>
> > Date: Thu, 21 Dec 2000 06:59:30 -0500
> > 
> > Ok, I understand the problematic and I have no problems with it. The next
> > question that comes to mind is: Is there some Latex software or something
> > that one could use to produce Latex documents on a Windows platform?
> > 
> > Although I did it in the past, I would prefer not to install Linux. I'm not
> > a guru of Emacs but I'm using it quite a lot these days. Could there be
> > something that works with Emacs and with which I could produce Latex docs
> > maybe?
> 
> Here's what we recommend to Windows users.
> 
> Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
> the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
> Group TUG, or you can download the image and cut it yourself if you
> have a good Internet connection).
> 
> Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
> gives you a very capable latex mode for emacs.  This works fine on NT
> if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
> an alternative shell if you want to run latex from the menus.
> 
> Some people prefer the shareware WinEdt editor, which gives you
> a customized latex editor:
> http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
> It may work better with MikTeX.

...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).

For simple docs lyx is ideal...

see: http://www.lyx.org

PM 

-- 
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
At work: (MH-Hannover): 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec 21 20:57:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 21:57:40 +0100
Subject: [Rd] RH7.0 compilation
In-Reply-To: apjaworski@mmm.com's message of "Thu, 21 Dec 2000 13:55:36 -0600"
References: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>
Message-ID: <x27l4t3323.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> Hi everyone,
> 
> Like most people with RH7.0 Linux, I had problems with their "experimental"
> gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
> in the /usr/local tree, so it will be picked up first as /usr/local/bin if
> before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
> straight out of the box (as well as compile Linux kernels).  One problem I
> had, however, was that the Matrix package would not link, with linker
> complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".
> 
> Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
> I installed them and, just to check them out, recompiled R-1.2.0 with it.
> It compiled fine and passed all the checks.  Moreover, now the Matrix
> package compiles and installs fine.  The only thing I see different is that
> while compiling R-1.2.0 I get a bunch of warnings like this:
> 
> making devices.d from devices.c
> In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
> nothing can be pasted after this token
> making dynload.d from dynload.c
> 
> and like this
> 
> FFTab.h:2:29: warning: pasting would not give a valid preprocessing token

I think these  are harmless and it should work to remove the  ## in
the constructions

# define DYNLOADEXT  "." ## SHLIB_EXT

and

# define F77_QSYMBOL(x)	#x ## "_"

You're not supposed to use ## to stick text strings together like
that, only tokens, but it seems to have worked with all other
compilers. (I think we analyzed this earlier and decided not to change
the code, but I forgot why. Maybe we just plain forgot to fix it.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Dec 22 00:00:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 22 Dec 2000 01:00:21 +0100 (MET)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
Message-ID: <200012220000.BAA05528@pubhealth.ku.dk>


The trailing backslash seems to be the culprit.


After looking at rw1020\bin\INSTALL, I noticed

	$pkg =~ s/\/$//;

which I assume is to strip the trailing slash from a package name
before obtaining the package name and cleaning out its directory

I added 

	$pkg =~ s/\\$//;

immediately after this line. Rerunning 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

with that change seemed to work OK

The session follows further below. 

----------------------------------------
More details:

Using cmdproxy.exe under emacs shell-mode under Win98,

It seems that the problem arose when I used 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

A subsequent

	Rcmd INSTALL C:\rw1011\src\library\bqtl

also failed. 

Inspection showed that all the directories under C:\rw1011\src\library
were gone.

I reran rwinst.exe to put them back in place

then I reran

	Rcmd INSTALL C:\rw1011\src\library\bqtl

and everything seemed to go thru OK (up to creating chtml, which the
system was not configured to do anyway. But library(bqtl) works, examples
all run, all seems OK, etc.)


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

----------------------------------------

The session:



C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make: Entering an unknown directory
make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
make: Leaving an unknown directory
make: *** [pkg-.o] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of  failed ***

installing R.css in C:/RW1020/library
cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory

C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
[deleted]
C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make[1]: Entering directory `/rw1011/src/library/bqtl'
---------- Making package bqtl ------------
mkdir -p C:/RW1020/library/bqtl
cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
   adding build stamp to DESCRIPTION
make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
make[1]: Leaving directory `/rw1011/src/library/bqtl'
make: *** [pkg-bqtl] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of bqtl failed ***

installing R.css in C:/RW1020/library

[[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
 They were replaced. Then ...]]]

C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

[[[ rest deleted - the package seemed to work OK ]]]



Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Dec 22 01:24:37 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Fri, 22 Dec 2000 11:24:37 +1000
Subject: [Rd] Newsletter: "Programming Pearls"?
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>

Fritz,

Would there be much interest in a "Programming Pearls" occasional column in
the newsletter?  If so, would it help if I volunteered to edit it (and
perhaps contribute, from time to time)?

Bill.
--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Dec 22 01:04:12 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 22 Dec 2000 02:04:12 +0100
Subject: [Rd] R Newsletter: 1st Call for Articles
In-Reply-To: <20001221210826.A16253@tu-bs.de>
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk> <20001221210826.A16253@tu-bs.de>
Message-ID: <00122202173507.05946@ligarto>

> ...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).
> 
> For simple docs lyx is ideal...
> 
> see: http://www.lyx.org
> 
> PM 
> 

I've used lyx quite a bit (the linux version). For me (a former user of Word) 
it was a rather painless intro to LaTeX; you can easily export LaTeX documents,
modify them somewhere else, and later read them back into lyx to continue
working. In fact, that is how I wrote most of my dissertation (use xemacs to
work on the latex document on the department machines, and then at home import
those files into lyx in my linux box).  I specially like the display of math 
(the "what you see is what you mean" idea), and the ease for preparing tables
and importing figures. The program is very well documented, and there is a
very helpful mailing list. After playing with lyx for a while and taking peeks
at the latex code, you'll find yourself ready to go get a LaTeX book and use
latex directly when needed for those few things that Lyx does not handle that
well.

Ramn
-- 
Ramn Daz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri Dec 22 01:38:02 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 22 Dec 2000 09:38:02 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3A415CA7.2010807@SUNYSB.Edu>
Message-ID: <Pine.GSO.4.21.0012220936380.20722-100000@sununx.comp.nus.edu.sg>

Hi,
But lyx on windows is a nightmare to install, is heavily dependent on
cygwyin and i think only works on NT. So doesn't really help M$ worst
users.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Timothy H. Keitt, wrote:

> You could use Lyx (www.lyx.org).  It exports (human readable) latex.
> 
> Tim
> 
> Peter Dalgaard BSA wrote:
> 
> > "Yves Gauvreau" <cyg@sympatico.ca> writes:
> > 
> > 
> >> This is a very nice idea. I would have a problem tough with the Latex format
> >> you require. I'm almost certain that to most Windows user, Latex is as bad
> >> news as a foreign language you know nothing about. Would there be an
> >> alternative to please every body?
> > 
> > 
> > Not really, dealing with MS Word would be a nightmare, and LaTeX is
> > just about the only format with decent treatment of mathematics.
> > 
> > However, I'm pretty sure that plain ascii would also be acceptable for
> > simple articles. On the other hand, why should the editors have the
> > trouble of putting all code excerpts in \begin{verbatim} ..
> > \end{verbatim} constructs, etc.? 
> > 
> > Perhaps one could define a simplified LaTeX markup similar to .Rd.
> > 
> > Or maybe just point people towards MiKTeX and give them a crash course
> > in LaTeX? For plain text, the format is really quite simple.
> 
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 04:10:41 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 05:10:41 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220410.FAA06204@pubhealth.ku.dk>


The last line gets duplicated when a file is read like this:

    a <- scan(file=filename, what="", sep="\n",
                    strip.white=c(TRUE), quiet=TRUE)

(This error does not occur on Linux, the only other platform I
 tested.)

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20

Actually, all binaries are PA-RISC1.1

 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:01:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 22 Dec 2000 07:01:44 +0000 (GMT)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
In-Reply-To: <200012220000.BAA05528@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012220650150.16967-100000@auk.stats>

Using a trailing dir separator is wrong, and Windows is much less
tolerant of it than most Unixes.  I have not checked most of these
utilities using \, only /, as the shells I use demand \ be doubled
and do path completion only with /.

The diagnosis is correct: basename in Perl is failing when given that path.
I will add some sanity checks.

On Fri, 22 Dec 2000 cberry@tajo.ucsd.edu wrote:

> 
> The trailing backslash seems to be the culprit.
> 
> 
> After looking at rw1020\bin\INSTALL, I noticed
> 
> 	$pkg =~ s/\/$//;
> 
> which I assume is to strip the trailing slash from a package name
> before obtaining the package name and cleaning out its directory
> 
> I added 
> 
> 	$pkg =~ s/\\$//;
> 
> immediately after this line. Rerunning 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> with that change seemed to work OK
> 
> The session follows further below. 
> 
> ----------------------------------------
> More details:
> 
> Using cmdproxy.exe under emacs shell-mode under Win98,
> 
> It seems that the problem arose when I used 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> A subsequent
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> also failed. 
> 
> Inspection showed that all the directories under C:\rw1011\src\library
> were gone.
> 
> I reran rwinst.exe to put them back in place
> 
> then I reran
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> and everything seemed to go thru OK (up to creating chtml, which the
> system was not configured to do anyway. But library(bqtl) works, examples
> all run, all seems OK, etc.)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 2222)  A 
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> ----------------------------------------
> 
> The session:
> 
> 
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make: Entering an unknown directory
> make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
> make: Leaving an unknown directory
> make: *** [pkg-.o] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of  failed ***
> 
> installing R.css in C:/RW1020/library
> cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
> [deleted]
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make[1]: Entering directory `/rw1011/src/library/bqtl'
> ---------- Making package bqtl ------------
> mkdir -p C:/RW1020/library/bqtl
> cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
>    adding build stamp to DESCRIPTION
> make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
> make[1]: Leaving directory `/rw1011/src/library/bqtl'
> make: *** [pkg-bqtl] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of bqtl failed ***
> 
> installing R.css in C:/RW1020/library
> 
> [[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
>  They were replaced. Then ...]]]
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> [[[ rest deleted - the package seemed to work OK ]]]
> 
> 
> 
> Charles C. Berry                        (858) 534-2098 
>                                          Dept of Family/Preventive Medicine
> E mailto:cberry@tajo.ucsd.edu	         UC San Diego
> http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645
> 
>  
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:34:16 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 08:34:16 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220734.IAA06732@pubhealth.ku.dk>

This bug PR#672, also reported from your institution.  It has only been
reported from HP-UX, and only from your systems.  Could someone there debug
it, please?

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> 
> The last line gets duplicated when a file is read like this:
> 
>     a <- scan(file=filename, what="", sep="\n",
>                     strip.white=c(TRUE), quiet=TRUE)
> 
> (This error does not occur on Linux, the only other platform I
>  tested.)
> 
> Version:
>  platform = hppa2.0-hp-hpux10.20
>  arch = hppa2.0
>  os = hpux10.20
>  system = hppa2.0, hpux10.20
> 
> Actually, all binaries are PA-RISC1.1
> 
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
>  
> -- 
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 22 09:47:05 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 22 Dec 2000 10:47:05 +0100
Subject: [Rd] Re: Newsletter: "Programming Pearls"?
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <14915.8985.903115.127836@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 22 Dec 2000 11:24:37 +1000,
>>>>> Bill Venables (BV) wrote:

  > Fritz,
  > Would there be much interest in a "Programming Pearls" occasional column in
  > the newsletter?  If so, would it help if I volunteered to edit it (and
  > perhaps contribute, from time to time)?


Yes, that sound like a great thing ... especially as we get the final
product as you graciously offer to edit the column :-).

Thanks in advance,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Dec 22 09:59:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Dec 2000 10:59:24 +0100 (MET)
Subject: [Rd] par(lab= *) / axis(*) bug (PR#791)
Message-ID: <200012220959.KAA08629@pubhealth.ku.dk>

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 12:12:20 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 13:12:20 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221212.NAA11052@pubhealth.ku.dk>

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > The last line gets duplicated when a file is read like this:
> > 
> >     a <- scan(file=filename, what="", sep="\n",
> >                     strip.white=c(TRUE), quiet=TRUE)

> > Version:
> >  platform = hppa2.0-hp-hpux10.20

> >  major = 1
> >  minor = 2.0
> >  year = 2000
> >  month = 12
> >  day = 15

Prof Brian D Ripley wrote:

> This bug PR#672, also reported from your institution.

That would be me. I reported this bug before, for R version
1.1.0

> It has only been reported from HP-UX, and only from your
> systems. Could someone there debug it, please?

I would fix it, if I new how to. Perhaps you can suggest
something from the warning messages I get.

During compiling I get a lot of warning messages. These are for
scan.c:

	cc -I. -I../../src/include -I../../src/include
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
  -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
  -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
  -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
  -scan.c -o scan.o
cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.

I get these type of warnings when compiling other sources too:
	sock.c
	sys-std.c
	connections.c
	g_alab_her.c
	../../../R/src/main/gram.y
	iosupport.c
	main.c
	plot3d.c
	saveload.c

Other warnings I get are:

cc: "loglin.c", line 236: warning 562: Redeclaration of "collap"
  with a different storage class specifier: "collap" will have
  internal linkage.
cc: "loglin.c", line 315: warning 562: Redeclaration of "adjust"
  with a different storage class specifier: "adjust" will have
  internal linkage.

cc: "dataentry.c", line 1309: warning 562: Redeclaration of
  "closewin" with a different storage class specifier: "closewin"
  will have internal linkage.
cc: "dataentry.c", line 1553: warning 562: Redeclaration of
  "popupmenu" with a different storage class specifier:
  "popupmenu" will have internal linkage.
cc: "dataentry.c", line 1653: warning 562: Redeclaration of
  "popdownmenu" with a different storage class specifier:
  "popdownmenu" will have internal linkage.

cc: "fexact.c", line 315: warning 562: Redeclaration of "f2xact"
  with a different storage class specifier: "f2xact" will have
  internal linkage.
cc: "fexact.c", line 842: warning 562: Redeclaration of "f3xact"
  with a different storage class specifier: "f3xact" will have
  internal linkage.
cc: "fexact.c", line 1188: warning 562: Redeclaration of
  "f4xact" with a different storage class specifier: "f4xact" will
  have internal linkage.
cc: "fexact.c", line 1413: warning 562: Redeclaration of
  "f5xact" with a different storage class specifier: "f5xact" will
  have internal linkage.
cc: "fexact.c", line 1572: warning 562: Redeclaration of
  "f6xact" with a different storage class specifier: "f6xact" will
  have internal linkage.
cc: "fexact.c", line 1623: warning 562: Redeclaration of
  "f7xact" with a different storage class specifier: "f7xact" will
  have internal linkage.
cc: "fexact.c", line 1726: warning 562: Redeclaration of
  "f8xact" with a different storage class specifier: "f8xact" will
  have internal linkage.
cc: "fexact.c", line 1770: warning 562: Redeclaration of
  "f9xact" with a different storage class specifier: "f9xact" will
  have internal linkage.
cc: "fexact.c", line 1803: warning 562: Redeclaration of
  "f10act" with a different storage class specifier: "f10act" will
  have internal linkage.
cc: "fexact.c", line 1871: warning 562: Redeclaration of
  "f11act" with a different storage class specifier: "f11act" will
  have internal linkage.
cc: "fexact.c", line 1896: warning 562: Redeclaration of
  "prterr" with a different storage class specifier: "prterr" will
  have internal linkage.
cc: "fexact.c", line 1921: warning 562: Redeclaration of "iwork"
  with a different storage class specifier: "iwork" will have
  internal linkage.
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Dec 22 12:22:57 2000
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 22 Dec 2000 13:22:57 +0100
Subject: [Rd] updated tseries
Message-ID: <3A4347A1.2CFD9592@olsen.ch>

Dear colleagues,

the tseries package is updated and should now work with R-1.2.0.

best and merry Xmas

Adrian

--
Adrian Trapletti, Olsen & Associates   Ltd., See-
feldstrasse 233,   CH-8008  Zrich,   Switzerland
Phone: +41 (1) 386 48 48   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 16:53:24 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 17:53:24 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221653.RAA13197@pubhealth.ku.dk>

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:
> 
> > > The last line gets duplicated when a file is read like this:
> > > 
> > >     a <- scan(file=filename, what="", sep="\n",
> > >                     strip.white=c(TRUE), quiet=TRUE)
> 
> > > Version:
> > >  platform = hppa2.0-hp-hpux10.20
> 
> > >  major = 1
> > >  minor = 2.0
> > >  year = 2000
> > >  month = 12
> > >  day = 15
> 
> Prof Brian D Ripley wrote:
> 
> > This bug PR#672, also reported from your institution.
> 
> That would be me. I reported this bug before, for R version
> 1.1.0

It *is* in the BUGS list shipped with 1.2.0, so why send it in again
with no references to the earlier one?

> > It has only been reported from HP-UX, and only from your
> > systems. Could someone there debug it, please?
> 
> I would fix it, if I new how to. Perhaps you can suggest
> something from the warning messages I get.

No, but I do suggest you debug it.  That is, build a debug version and run
it under gdb, and find out why this happens.  Is it just scan?
Does read.table (which uses scan) do it?  Does readLines (which does not)?
Does it happen on all files?  Only on those with CRLF or only LF line
endings?  Only on those with incomplete last lines?

It might be a compiler bug, so perhaps you would like to try compiling
with gcc.


> During compiling I get a lot of warning messages. These are for
> scan.c:
> 
> 	cc -I. -I../../src/include -I../../src/include
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
>   -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
>   -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
>   -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
>   -scan.c -o scan.o

The next are the lines of signed/unsigned char warnings that occur with
more informative messages on my platforms.  You need to look up the
numbers in your manual, as we do not have a manual for your compiler.

> cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:35 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 11:30:35 -0600
Subject: [Rd] R CMD check bug
Message-ID: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:59 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 18:30:59 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221730.SAA13390@pubhealth.ku.dk>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Dec 22 17:43:50 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Fri, 22 Dec 2000 18:43:50 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221743.SAA13452@pubhealth.ku.dk>

apjaworski@mmm.com writes:

> Another, probably already known, cosmetic thing.  The nls package has the
> word Authors in the DESCRIPTION file and fails its check.  The word needs
> to read Author.

Thanks, Andy.  This part is fixed for R-1.2.1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 18:42:53 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 12:42:53 -0600
Subject: [Rd] R CMD check strange behavior
Message-ID: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>

Can anyone reproduce this strange behavior?

     R CMD check <any package> quadprog

Everything is fine.

     R CMD check quadprog <any package>

The check for quadprog works fine, but the checks for anything that follows
skip the examples portion, i.e. just run the check on the DESCRIPTION file
and format the manual.

I could not reproduce this behavior with any other combination of packages,
although I do not have lots of them installed.  I am afraid I do not know
Perl well enough to even try to fix that.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 21:15:36 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 22 Dec 2000 22:15:36 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <200012221653.RAA13197@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>

ripley@stats.ox.ac.uk skriver...

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > Prof Brian D Ripley wrote:
> > 
> > > This bug PR#672, also reported from your institution.
> > 
> > That would be me. I reported this bug before, for R version
> > 1.1.0
> 
> It *is* in the BUGS list shipped with 1.2.0, so why send it in again
> with no references to the earlier one?

Well, that was a bug in 1.1.0, this is the same bug in 1.2.0. I
didn't check the BUGS list, didn't notice there was such a file.
I'm sorry.

> It might be a compiler bug, so perhaps you would like to try compiling
> with gcc.

Usually, bugs aren't. Usually, it's that one compiler just
happens to produce code and data that won't generate an
exceptional situation you just hadn't thought of, and you won't
notice the error until you use another compiler.

Which seems to be the case here.

I fixed the bug. Luckily, I didn't have to resort to using the
HP debugger. Inspecting the code was enough to locate the
problem, once I noticed the problem occurs only when stripping
white space is selected. Here is the fix:

*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Fri Dec 22 21:51:44 2000
***************
*** 240,248 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
! 	    ;
! 	bufp++;
      }
      *bufp = '\0';
      return filled;
--- 240,247 ----
      }
   donefill:
      if (strip) {
!         while (bufp > buffer && isspace((int)(*bufp - 1)))
! 	    bufp--;
      }
      *bufp = '\0';
      return filled;



You can see what the problem was. The faulty code doesn't
prevent to test whether the characters *before* the start of the
buffer are white space, which can be anything.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:21:04 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 23 Dec 2000 10:21:04 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012230921.KAA14843@pubhealth.ku.dk>

Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Er liep twee kg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:30:32 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 10:30:32 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <Pine.LNX.4.21.0012231029540.624-100000@kleigh.nl>


Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 12:16:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 13:16:03 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>

Peter Kleiweg skriver...

[about possible compiler error]

> Usually, bugs aren't. Usually, it's that one compiler just
> happens to produce code and data that won't generate an
> exceptional situation you just hadn't thought of, and you
> won't notice the error until you use another compiler.
> 
> Which seems to be the case here.

[snip faulty patch, see other mail for correct fix]

> You can see what the problem was. The faulty code doesn't
> prevent to test whether the characters *before* the start of
> the buffer are white space, which can be anything.

I've been thinking about this. The original code was apparently
based on the assumption that (at that point in the program) the
buffer could never be empty (apart from white space). Maybe the
assumption is correct, and this bug actually is an expression of
an error somewhere else. An error with handling EOF, or
something, or even a compiler error.

Should this be checked?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Dec 23 16:45:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 23 Dec 2000 16:45:27 GMT
Subject: [Rd] Strange bug with pretty()
Message-ID: <3a45cf99.60304016@smtp1.sympatico.ca>

Here's a strange bug.  I recompiled R 1.2.0 in Windows with DEBUG=T,
and this gives pretty() some pretty strange behaviour.  If executed
just after a session opens:

 > pretty(c(-0.015,1.015))
 [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01
6.000000e-01
 [6]  8.000000e-01  1.000000e+00  1.200000e+00

The same result repeats if I repeat the command.

However, if I now ask for help on pretty, close the help window and
try again:

 > ?pretty
 > pretty(c(-0.015,1.015))
 [1] -0.2  0.0  0.2  0.4  0.6  0.8  1.0  1.2
 > 

This doesn't happen with the Windows binary distribution.  

The compiler I'm using is the mingw32 compiler, with version
information

 gcc version 2.95.2 19991024 (release)

Is this a compiler problem, a problem with DEBUG=T, or something wrong
with pretty?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec 24 15:06:31 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 24 Dec 2000 16:06:31 +0100 (MET)
Subject: [Rd] bug in strsplit(x, "") (PR#793)
Message-ID: <200012241506.QAA17086@pubhealth.ku.dk>

Instead of 

  strsplit(c("Hello", "", "World"), NULL)

(which works as expected), I used

  strsplit(c("Hello", "", "World"), "")

[[1]]
[1] "H" "e" "l" "l" "o"

[[2]]
[1] ""  "e" "l" "l" "o"

[[3]]
[1] "W" "o" "r" "l" "d"


The second element does not look like an expected result.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@ricardo.ecn.wfu.edu  Sun Dec 24 19:19:44 2000
From: cottrell@ricardo.ecn.wfu.edu (Allin Cottrell)
Date: Sun, 24 Dec 2000 14:19:44 -0500
Subject: [Rd] gretl and R: info and request
Message-ID: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>

Hello,

I thought some of you might like to know about a GNU project
that is complementary to R in some ways, namely gretl

http://ricardo.ecn.wfu.edu/gretl

(GNU Regression, Econometrics and Time-series Library).
gretl (a library with cli and gui clients, the gui using
GTK) is designed to be very user-friendly, and suitable
for teaching econometrics.  It has a fairly wide variety
of least-squares based estimators plus binary logit and
probit, and a few "nifty" features such as reading
databases over the internet and producing LaTeX output.

I've been thinking how to extend gretl to offer further
statistical methods such as Maximum Likelihood estimation,
without re-inventing the wheel, and some sort of link to
R seems the best option.  In the latest gretl I've made
a rudimentary link: an option in gretl to fork off an
instance of R (using the gnome gui if available) and 
pop the current gretl dataset into R.

At present I get the gretl data into R by writing out
a suitable .Rprofile in the cwd before the fork (in case
there's an .Rprofile there already it gets backed up,
and restored on exit from gretl).  This is a bit of a
kludge, and here's my request: It would make life
easier if you could specify a config file on the R
command line.  That way I could leave any existing
config file undisturbed.

I'm also interested in any suggestions people might have
for linkage between gretl and R.  As a longer-term
project I may study up on omegahat and look into
(a) formulating a request for R within gretl, (b)
having R execute the request, in the background and (c) 
presenting the results back in gretl.

If anyone's interested, an email reply would be appreciated
since I can't really afford to join another list right now. 

-- 
Allin Cottrell
Department of Economics
Wake Forest University, NC
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Mon Dec 25 09:27:50 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Mon, 25 Dec 2000 17:27:50 +0800 (GMT-8)
Subject: [Rd] gretl and R: info and request
In-Reply-To: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.21.0012251715390.14518-100000@sununx.comp.nus.edu.sg>

Hi,
There are a couple of ways you could go.

One would be to build your application as an R library so that it could be
called from R and access your programs functions through and API an
example of this approach is ggobi, at www.ggobi.org. 

you can embed R in your application, a neat way might be to incorporate a
python shell into your application and compile R as a python module, i
believe you can find more documentation on thi approach on the omeghat web
page.

A third way (though i find this also cludgy) is to use interapplication
communication protocols such as corba or com.

I am sure there are more ways.

happy holidays
Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 25 18:01:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Dec 2000 18:01:24 +0000 (GMT)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>

On Sat, 23 Dec 2000, Peter Kleiweg wrote:

> Peter Kleiweg skriver...
> 
> [about possible compiler error]
> 
> > Usually, bugs aren't. Usually, it's that one compiler just
> > happens to produce code and data that won't generate an
> > exceptional situation you just hadn't thought of, and you
> > won't notice the error until you use another compiler.
> > 
> > Which seems to be the case here.
> 
> [snip faulty patch, see other mail for correct fix]
> 
> > You can see what the problem was. The faulty code doesn't
> > prevent to test whether the characters *before* the start of
> > the buffer are white space, which can be anything.
> 
> I've been thinking about this. The original code was apparently
> based on the assumption that (at that point in the program) the
> buffer could never be empty (apart from white space). Maybe the
> assumption is correct, and this bug actually is an expression of
> an error somewhere else. An error with handling EOF, or
> something, or even a compiler error.
> 
> Should this be checked?

Could you send us your example file for this problem?  I think the
assumption is that a field will never be empty apart from white space.
in which case there is a simpler patch, as fields only of white space
don't put anything in the buffer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 20:40:23 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 21:40:23 +0100
Subject: [Rd] R CMD check strange behavior
In-Reply-To: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
References: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
Message-ID: <14919.45239.613518.591151@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> Can anyone reproduce this strange behavior?
>      R CMD check <any package> quadprog

> Everything is fine.

>      R CMD check quadprog <any package>

> The check for quadprog works fine, but the checks for anything that
> follows skip the examples portion, i.e. just run the check on the
> DESCRIPTION file and format the manual.

I can confirm this.  Which platform are you on?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 09:59:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 10:59:48 +0100
Subject: [Rd] R CMD check bug
In-Reply-To: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
References: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
Message-ID: <14919.6804.136666.726944@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> The R check command has a slight error in it.   Line # 123 reads
>      $#ARGV <= 1 || die "no packages were specified";

> The logical comparison should be reversed and modified, so it reads

>      $#ARGV >= 0 || die "no packages were specified";

> The original bug gives somewhat unexpected results.  Since $#ARGV
> evaluates to the number of arguments minus 1, the check command works
> fine with 1 or 2 arguments but not with more than 2.

> Another, probably already known, cosmetic thing.  The nls package has
> the word Authors in the DESCRIPTION file and fails its check.  The
> word needs to read Author.

Thanks, both fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 21:29:20 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 22:29:20 +0100
Subject: [Rd] bug in strsplit(x, "") (PR#793)
In-Reply-To: <200012241506.QAA17086@pubhealth.ku.dk>
References: <200012241506.QAA17086@pubhealth.ku.dk>
Message-ID: <14919.48176.902345.491051@mithrandir.hornik.net>

>>>>> ligges  writes:

> Instead of 
>   strsplit(c("Hello", "", "World"), NULL)

> (which works as expected), I used

>   strsplit(c("Hello", "", "World"), "")

> [[1]]
> [1] "H" "e" "l" "l" "o"

> [[2]]
> [1] ""  "e" "l" "l" "o"

> [[3]]
> [1] "W" "o" "r" "l" "d"


> The second element does not look like an expected result.

Thanks.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Dec 25 23:24:58 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 00:24:58 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012252307220.688-100000@kleigh.nl>

Prof Brian Ripley skriver...

> Could you send us your example file for this problem?  I think the
> assumption is that a field will never be empty apart from white space.
> in which case there is a simpler patch, as fields only of white space
> don't put anything in the buffer.

I've done some more tests. Duplication doesn't only happen at
the end of the file. For each non-empty line followed by an
empty line or followed by a line with only white space, a copy
of the last non-empty line gets inserted. And in addition, at the end
of the file the last non-empty line gets duplicated.

Any file will do, just a few lines; with or without empty 
lines; with or without lines that contain white space only; with
the last line with data, empty or with white space.

Here is an example data file, begin and end of line are indicated
with |

  ||
  | |
  |0|
  ||
  | 1 1 |
  | |
  |  2 2 2  |
  |  |
  |   3 3 3   |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

All lines, including the last line ends with \n

Doing this:

  scan(file="file", what="", sep="\n", strip.white=c(TRUE))

gives:

  Read 15 items
   [1] "0"     "0"     "1 1"   "1 1"   "2 2 2" "2 2 2" "3 3 3" "3 3 3" "4"
  [10] "4"     "4"     "4"     "4"     "4"     "4"

Doing this:

  scan(file="tst1",  what="", sep="\n")

correctly gives:

  Read 13 items
   [1] " "           "0"           " 1 1 "       " "           "  2 2 2  "
   [6] "  "          "   3 3 3   " "   "         "    4    "   "    "
  [11] "  "          " "           " "

The patch changes only one line of code. I don't see how you can
get a simpler patch, except that the patch may hide some
underlying problem.

After applying my patch, the first example gives the correct result:

  Read 5 items
  [1] "0"     "1 1"   "2 2 2" "3 3 3" "4" 



I have done even more tests, using a more complex data file:

  ||
  | |
  |0|
  ||
  |, 1 1 |
  | |
  |  2 , 2,2  |
  |  |
  |   ,3, 3 3 ,  |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

And this time, I define "," as separator:

  scan(file="tst2",  what="", sep=",", strip.white=c(TRUE))

The original version gives:

  Read 20 items
   [1] "0"   "0"   "0"   "1 1" "1 1" "2"   "2"   "2"   "2"   "2"   "3"   "3 3"
  [13] ""    "4"   "4"   "4"   "4"   "4"   "4"   "4"   

Again, similar copying of non-empty fields into empty fields.

The patched version gives:

  Read 11 items
   [1] "0"   ""    "1 1" "2"   "2"   "2"   ""    "3"   "3 3" ""    "4"

The last result is the same as with my non-patched version on Linux.

I guess this is what you would want: the comma's at the
beginning and at the end of the line seem to imply an empty
field. And that is what you get. I guess the same happens with
two consecutive separators on one line with only white space in
between. "strip.white" doesn't imply "skip.empty.fields".

As a side note: the current definition of scan sets strip.white
to FALSE by default, and blank.lines.skip to TRUE. However, if
sep is set to "\n", the logical thing to do would be to not skip
blank lines by default, but including them as empty fields.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 13:42:07 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 14:42:07 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
Message-ID: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>


Suppose, I have a file "data1" containing:

    450   390   467   654    30   542   334   432   421
    357   497   493   550   549   467   575   578   342
    446   547   534   495   979   479

I can read this file with:

    scan("data1")
    Read 24 items
     [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
     [20] 547 534 495 979 479    

But now, suppose I have a file "data2" containing:

    450, 390, 467, 654,  30, 542, 334, 432, 421,
    357, 497, 493, 550, 549, 467, 575, 578, 342,
    446, 547, 534, 495, 979, 479

When I try to read this with sep="," I get:

    scan("data2", sep=",")
    Read 26 items
     [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
     [20]  NA 446 547 534 495 979 479 

I get two extra fields, both NA. Not what I'd want. And I can't
drop the NA's, because there could be other NA's, not resulting
from this comma-EOL combination.

I suggest, the proper action for scan would be to treat the
combination sep plus newline as a single separator.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 14:54:29 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 14:54:29 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>

On Tue, 26 Dec 2000, Peter Kleiweg wrote:

> 
> Suppose, I have a file "data1" containing:
> 
>     450   390   467   654    30   542   334   432   421
>     357   497   493   550   549   467   575   578   342
>     446   547   534   495   979   479
> 
> I can read this file with:
> 
>     scan("data1")
>     Read 24 items
>      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
>      [20] 547 534 495 979 479    
> 
> But now, suppose I have a file "data2" containing:
> 
>     450, 390, 467, 654,  30, 542, 334, 432, 421,
>     357, 497, 493, 550, 549, 467, 575, 578, 342,
>     446, 547, 534, 495, 979, 479
> 
> When I try to read this with sep="," I get:
> 
>     scan("data2", sep=",")
>     Read 26 items
>      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
>      [20]  NA 446 547 534 495 979 479 
> 
> I get two extra fields, both NA. Not what I'd want. And I can't
> drop the NA's, because there could be other NA's, not resulting
> from this comma-EOL combination.

You can easily remove the trailing commas, though, as in

scan(pipe("sed -e s/,$// data2"), sep=",")
Read 24 items
 [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
342 446
[20] 547 534 495 979 479


> I suggest, the proper action for scan would be to treat the
> combination sep plus newline as a single separator.

However, that's not compatible with S or earlier versions of R or
the documentation 

     sep: by default, scan expects to read white-space delimited input
          fields.  Alternatively, `sep' can be used to specify a
          character which delimits fields.  A field is always delimited
          by a newline unless it is quoted.

I suggest the proper action is to act as documented!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 15:16:31 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 16:16:31 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012261614470.626-100000@kleigh.nl>

Prof Brian Ripley skriver...

>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
> 
> I suggest the proper action is to act as documented!

I know, it isn't a bug. I'd suggest to make it an extra
option in a future version of R.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:08:38 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:08:38 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>

Hi,

I see that Prof Ripley propose to pre-process the file using sed. I saw that
to do so he used "pipe". I look for it on my system (see below) and the
function doesn't seem to be available. Since I have sed from cygwin32 I
wonder if there would a way to use it in a similar fashion as proposed here?

Thanks

YG

platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R

> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> Envoye : Tuesday, December 26, 2000 9:54 AM
> A : Peter Kleiweg
> Cc : r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] More on scan: extra field at end of line
>
>
> On Tue, 26 Dec 2000, Peter Kleiweg wrote:
>
> >
> > Suppose, I have a file "data1" containing:
> >
> >     450   390   467   654    30   542   334   432   421
> >     357   497   493   550   549   467   575   578   342
> >     446   547   534   495   979   479
> >
> > I can read this file with:
> >
> >     scan("data1")
> >     Read 24 items
> >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> 549 467 575 578 342 446
> >      [20] 547 534 495 979 479
> >
> > But now, suppose I have a file "data2" containing:
> >
> >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> >     446, 547, 534, 495, 979, 479
> >
> > When I try to read this with sep="," I get:
> >
> >     scan("data2", sep=",")
> >     Read 26 items
> >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> 550 549 467 575 578 342
> >      [20]  NA 446 547 534 495 979 479
> >
> > I get two extra fields, both NA. Not what I'd want. And I can't
> > drop the NA's, because there could be other NA's, not resulting
> > from this comma-EOL combination.
>
> You can easily remove the trailing commas, though, as in
>
> scan(pipe("sed -e s/,$// data2"), sep=",")
> Read 24 items
>  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> 342 446
> [20] 547 534 495 979 479
>
>
> > I suggest, the proper action for scan would be to treat the
> > combination sep plus newline as a single separator.
>
> However, that's not compatible with S or earlier versions of R or
> the documentation
>
>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
>
> I suggest the proper action is to act as documented!
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 26 16:42:22 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 26 Dec 2000 17:42:22 +0100
Subject: [Rd] More on scan: extra field at end of line
References: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>



Yves Gauvreau wrote:
> 
> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?
> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1

pipe() is a new function of R-1.2.0.

Uwe


> year     2000
> month    August
> day      15
> language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:58:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:58:53 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>
Message-ID: <NEBBJKDJHEFCOOLFFAKKOECLCAAA.cyg@sympatico.ca>

Sorry I asked then!

Merry Christmas and happy New Year.

Yves Gauvreau

> -----Message d'origine-----
> De : Uwe Ligges [mailto:ligges@statistik.uni-dortmund.de]
> Envoye : Tuesday, December 26, 2000 11:42 AM
> A : Yves Gauvreau
> Cc : R-devel
> Objet : Re: [Rd] More on scan: extra field at end of line
> 
> 
> 
> 
> Yves Gauvreau wrote:
> > 
> > Hi,
> > 
> > I see that Prof Ripley propose to pre-process the file using 
> sed. I saw that
> > to do so he used "pipe". I look for it on my system (see below) and the
> > function doesn't seem to be available. Since I have sed from cygwin32 I
> > wonder if there would a way to use it in a similar fashion as 
> proposed here?
> > 
> > Thanks
> > 
> > YG
> > 
> > platform Windows
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    1.1
> 
> pipe() is a new function of R-1.2.0.
> 
> Uwe
> 
> 
> > year     2000
> > month    August
> > day      15
> > language R
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 17:34:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 17:34:30 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012261728510.12176-100000@toucan.stats>

On Tue, 26 Dec 2000, Yves Gauvreau wrote:

> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?

1) Yes, in 1.2.0.  I would encourage people to at least try 1.2.0,
not least as 1.2.1 is due out pretty soon and we would like to get the 
maximal number of bugs zapped.  (The PATH problem in rwinst.exe has been
solved in the version now up on CRAN.)

2) On Windows, you will need to do it in rterm: pipe does not work in
Rgui.  That's an OS deficiency that I hope to be able to work around in
time for 1.2.1, but I knew Peter Kleiweg was on HP-UX/Linux.

I suppose in part I was pointing out how neatly some of the pieces we now
have fit together.

> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1
> year     2000
> month    August
> day      15
> language R
> 
> > -----Message d'origine-----
> > De : owner-r-devel@stat.math.ethz.ch
> > [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> > Envoye : Tuesday, December 26, 2000 9:54 AM
> > A : Peter Kleiweg
> > Cc : r-devel@stat.math.ethz.ch
> > Objet : Re: [Rd] More on scan: extra field at end of line
> >
> >
> > On Tue, 26 Dec 2000, Peter Kleiweg wrote:
> >
> > >
> > > Suppose, I have a file "data1" containing:
> > >
> > >     450   390   467   654    30   542   334   432   421
> > >     357   497   493   550   549   467   575   578   342
> > >     446   547   534   495   979   479
> > >
> > > I can read this file with:
> > >
> > >     scan("data1")
> > >     Read 24 items
> > >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> > 549 467 575 578 342 446
> > >      [20] 547 534 495 979 479
> > >
> > > But now, suppose I have a file "data2" containing:
> > >
> > >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> > >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> > >     446, 547, 534, 495, 979, 479
> > >
> > > When I try to read this with sep="," I get:
> > >
> > >     scan("data2", sep=",")
> > >     Read 26 items
> > >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> > 550 549 467 575 578 342
> > >      [20]  NA 446 547 534 495 979 479
> > >
> > > I get two extra fields, both NA. Not what I'd want. And I can't
> > > drop the NA's, because there could be other NA's, not resulting
> > > from this comma-EOL combination.
> >
> > You can easily remove the trailing commas, though, as in
> >
> > scan(pipe("sed -e s/,$// data2"), sep=",")
> > Read 24 items
> >  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> > 342 446
> > [20] 547 534 495 979 479
> >
> >
> > > I suggest, the proper action for scan would be to treat the
> > > combination sep plus newline as a single separator.
> >
> > However, that's not compatible with S or earlier versions of R or
> > the documentation
> >
> >      sep: by default, scan expects to read white-space delimited input
> >           fields.  Alternatively, `sep' can be used to specify a
> >           character which delimits fields.  A field is always delimited
> >           by a newline unless it is quoted.
> >
> > I suggest the proper action is to act as documented!
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._
> >
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Dec 28 19:04:18 2000
From: joehl@web.de (joehl@web.de)
Date: Thu, 28 Dec 2000 20:04:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012281904.UAA28913@pubhealth.ku.dk>

###############################################################################

Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.

Happy New Year


Jens Oehlschlaegel


###############################################################################



###############################################################################
## windows(rescale="fixed") does not keep original device size 
## (probably device initialization error)
###############################################################################

dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


> windows(width=width, height=height, rescale="R")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fixed")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 


## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
## The Help to windows() says:
## Using `"fixed"' will leave
##     the plot size unchanged, adding scrollbars if part of the plot is
##     obscured. This setting also affects the initial re-scaling if the
##     specified window size is too big.   



###############################################################################
## windows(rescale="fit") gives strange character sizes 
## (looks like device initialization error)
###############################################################################


## In the following examples the created devices seem to be equally initialized with respect to par(din)
## However, with windows(rescale="fit") I observe different par(pin) and different character sizes in text() and strwidth()

width <- 16.53543
height <- 11.69291

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737
> fit
              x         y
din  9.22916667 6.3854167
fin  9.22916667 6.3854167
pin  8.79000000 5.7337500
text 0.07935154 0.1122302
> R
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737


> ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> ## width=16.53543, height=11.69291 as 
> fit["text", "x"]/R["din", "x"]*width
[1] 0.1415101
> ## aprox. equal 
> fixed["text", "x"]
[1] 0.1405518


## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
## the phenomenon disappears

dev.off()
dev.off()
dev.off()

width <- 9.2291667
height <- 6.3854167

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> fit
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> R
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544



###############################################################################
## wrong row distances with windows(rescale="fit")
## (looks like device initialization error)
###############################################################################


width <- 16.53543
height <- 11.69291

## as a reference
windows(width=width, height=height, rescale="fixed")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=2)

## Here rows are too close together
windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)


## Specifying smaller device size thus avoiding initial rescaling 
## makes the problem disappear

width <- 9
height <- 6

windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)

## Once correctly initialized further rescaling using the mouse does retain correct distances

dev.off()
dev.off()
dev.off()



###############################################################################
## windows(rescale="fit") destroys aspect ratio 
## (looks like device initialization error)
###############################################################################


dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


## create a device
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 

## some resizing of the window BEFORE plot() is called
# par("din") doesn't SEEM to change
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
   
# but in fact calling plot() and dev.show()
> plot(0,0)
> dev.show()
      width      height aspectratio 
   6.321506    5.562500    1.136451 

## now some resizing of the window AFTER plot() is called
> dev.show()
      width      height aspectratio 
   4.708333    4.500471    1.046187 
> dev.show()
      width      height aspectratio 
   4.718750    3.297956    1.430811 
> dev.show()
      width      height aspectratio 
  3.3255361   4.4375000   0.7494166 
> dev.show()
      width      height aspectratio 
  1.4091170   5.1145833   0.2755096 
> dev.show()
      width      height aspectratio 
  1.4062500   5.1145833   0.2749491 
> dev.show()
      width      height aspectratio 
  0.4701945   3.3854167   0.1388882 
  
## we got very differing aspect ratios
## One reason for that COULD be that the initially intended device sizes are not kept, 
## so that many rescalings cumulate the deviations.
## May be par(din) should not be changed at all (keep the representation layer stable)
## and only apply rescaling/zooming/scrolling only to the graphical presentation.



###############################################################################


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 20:23:18 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 21:23:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#795)
Message-ID: <200012282023.VAA29104@pubhealth.ku.dk>

If these things bother you, could you please supply fixes?  For some reason
you omitted the part of the help page dealing with one of these (which is
as documented), and I also think you are confusing `plot' and `device'
sizes. The latter will be the displayed device surface, I believe.

Nothing on the help page suggested that the fine details of the R read-only
parameters will be as you expected after re-scaling the plot, and it never
occurred to me that anyone would expect so.  As they are reported by the R
graphics engine (which is used unchanged), I expect they are correct in one
of the multiple interpretations.

On Thu, 28 Dec 2000 joehl@web.de wrote:

> ###############################################################################
> 
> Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.
> 
> Happy New Year
> 
> 
> Jens Oehlschlaegel
> 
> 
> ###############################################################################
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fixed") does not keep original device size 
> ## (probably device initialization error)
> ###############################################################################
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> > windows(width=width, height=height, rescale="R")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fixed")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> 
> ## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
> ## The Help to windows() says:
> ## Using `"fixed"' will leave
> ##     the plot size unchanged, adding scrollbars if part of the plot is
> ##     obscured. This setting also affects the initial re-scaling if the
> ##     specified window size is too big.   

I don't think so.  It says the `plot' size, not the `device' size which is
what par("din") reports.

> ###############################################################################
> ## windows(rescale="fit") gives strange character sizes 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> ## In the following examples the created devices seem to be equally initialized with respect to par(din)
> ## However, with windows(rescale="fit") I observe different par(pin) and 
different character sizes in text() and strwidth()
> 
> width <- 16.53543
> height <- 11.69291
> 
> windows(width=width, height=height, rescale="fixed")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fixed", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fixed <- temp
> 
> windows(width=width, height=height, rescale="fit")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fit", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fit <- temp
> 
> windows(width=width, height=height, rescale="R")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"R", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> R <- temp
> 
> # now compare
> fixed
> fit
> R
> 
> > fixed
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> > fit
>               x         y
> din  9.22916667 6.3854167
> fin  9.22916667 6.3854167
> pin  8.79000000 5.7337500
> text 0.07935154 0.1122302
> > R
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> 
> 
> > ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> > ## width=16.53543, height=11.69291 as 
> > fit["text", "x"]/R["din", "x"]*width
> [1] 0.1415101
> > ## aprox. equal 
> > fixed["text", "x"]
> [1] 0.1405518

As documented:

  Using \code{\link{strwidth}} or
  \code{\link{strheight}} after a window has been rescaled gives
  dimensions in the original units, but only approximately as they are
  derived from the metrics of the rescaled fonts.

> ## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
> ## the phenomenon disappears

Right, as documented.

> ###############################################################################
> ## wrong row distances with windows(rescale="fit")
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> width <- 16.53543
> height <- 11.69291
> 
> ## as a reference
> windows(width=width, height=height, rescale="fixed")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=2)
> 
> ## Here rows are too close together
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)

I can't reproduce that.  It may depend on the fonts available.

> ## Specifying smaller device size thus avoiding initial rescaling 
> ## makes the problem disappear
> 
> width <- 9
> height <- 6
> 
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)
> 
> ## Once correctly initialized further rescaling using the mouse does retain correct distances
> 
> dev.off()
> dev.off()
> dev.off()
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fit") destroys aspect ratio 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> ## create a device
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> ## some resizing of the window BEFORE plot() is called
> # par("din") doesn't SEEM to change
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
>    
> # but in fact calling plot() and dev.show()
> > plot(0,0)
> > dev.show()
>       width      height aspectratio 
>    6.321506    5.562500    1.136451 
> 
> ## now some resizing of the window AFTER plot() is called
> > dev.show()
>       width      height aspectratio 
>    4.708333    4.500471    1.046187 
> > dev.show()
>       width      height aspectratio 
>    4.718750    3.297956    1.430811 
> > dev.show()
>       width      height aspectratio 
>   3.3255361   4.4375000   0.7494166 
> > dev.show()
>       width      height aspectratio 
>   1.4091170   5.1145833   0.2755096 
> > dev.show()
>       width      height aspectratio 
>   1.4062500   5.1145833   0.2749491 
> > dev.show()
>       width      height aspectratio 
>   0.4701945   3.3854167   0.1388882 
>   
> ## we got very differing aspect ratios
> ## One reason for that COULD be that the initially intended device sizes are not kept, 
> ## so that many rescalings cumulate the deviations.
> ## May be par(din) should not be changed at all (keep the representation layer stable)
> ## and only apply rescaling/zooming/scrolling only to the graphical presentation.

Possibly.  I don't think the device size is very interesting after
rescaling.  What are you using it for?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 21:54:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 22:54:49 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012282154.WAA29280@pubhealth.ku.dk>

Here's what I think is going on.  

plot.lm() and everything I could see like it calls weights(object) and
resid(object).  The problem is that there is a resid.glm so one gets
deviance residuals, but there is not a weights.glm so weights.lm is used.  
The solution is to add weights.glm:

weights.glm <- function(object, type = c("prior", "working"), ...)
{
    type <- match.arg(type)
    if(type == "prior") object$prior.weights else object$weights
}

As far as I can see one either wants the default weights here and deviance
or Pearson residuals, or object$weights and the working residuals.  The
fitted object has the latter pair, which is sensible for inheriting from lm
(and compatible with S), but both plot.lm and your example use residuals()
which is not the same thing.

It seems reasonably clear from the labels that plot.lm is intended to use
standardized deviance residuals, but I am not at all sure that is the best
alternative. Davison & Snell (1991 Cox Festschrift) seem to suggest that
standardized Pearson residuals would be better, and offer other
alternatives.

I've added weights.glm.  We badly need to document the "glm" class
and subtle points like this.



On Tue, 19 Dec 2000 murdoch@stats.uwo.ca wrote:

> Here's a bug one of my students noticed.
> 
> When you call plot() on a glm object, plot.lm gets called.  The second
> plot it shows is supposed to give a normal QQ plot of the standard
> deviance residuals, but it doesn't.  The glm object created by glm.fit
> returns something (the IRLS weights?) in fit$weights which plot.lm
> takes as observation weights, so  you get strange residuals in the QQ
> plot.
> 
> For example, here I fit a simulated Poisson model where the model
> perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
> ranging between -45 and 40.
> 
> >set.seed(1)
> >x <- seq(4,5,len=1000)
> >y <- rpois(1000,exp(x))
> >fit <- glm(y ~ x, family=poisson)
> >plot(fit, which=2)
> 
> If I extract the residuals myself and plot them, I see that the model
> is fine:
> 
> >qqnorm(residuals(fit))
> 
> The problem is that the weights are big; plot.lm should be using
> prior.weights, or glm should be returning the big weights under a
> different name:
> 
> > summary(fit$weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>   54.35   69.90   89.90   93.76  115.60  148.70 
> 
> > summary(fit$prior.weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>       1       1       1       1       1       1 

Match the residuals and weights is the story.

> 
> Duncan Murdoch
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 1998)  
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 08:02:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 09:02:42 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012290802.JAA00237@pubhealth.ku.dk>

[We do have a TooMuchAtOnce category, but it is easier to cope with
short separate reports with informative subject lines for, e.g. the BUGS
list.]

On Mon, 18 Dec 2000 james.lindsey@luc.ac.be wrote:

> R1.2.0 with Linux RH5.2
> 
> I do not believe that the problems below are new to 1.2 but I only
> cover this sort of thing once a year in my course and some of that
> happened to be last Friday so too late to report for 1.2. I see that
> one or two things that I was going to report have been corrected.
> I like the fact that interactions now show : instead of .
> 
> Here is some output with comments inserted.
> 
[...]

> > wt <- codes(Reg66)!=codes(Reg71)

Why not just wt <- Reg66 != Reg71  ?

[...]

> First problem: with diagonal values weighted out in a transition matrix
> (mover-stayer model), glm wrongly estimates the diagonals to be the
> observed plus 0.1. This was correct in 90.1 a year ago but already
> wrong in 1.0.1. I don't have any versions in between installed.

I think this is the same as

[Rd] glm gives incorrect results for zero-weight cases (PR#780)

in which case it is already fixed in R-patched.  That does look to have
solved this one too.  Note that glm has *not* `estimated the diagonals'
at all.  These are predictions (the cases are not in the model), and
predict.glm did get them right.

predict(z, data)
      1       2       3       4       5       6       7       8 
0.61337 3.30334 3.45098 4.51559 3.33786 6.02783 6.17548 7.24009 
      9      10      11      12      13      14      15      16 
3.50109 6.19106 6.33871 7.40332 4.57309 7.26306 7.41071 8.47532 

[...]

> Second problem: the man page for factors states that the levels are
> sorted, but gl does not do this. It keeps them in the order of the

There is a help page for factor(), not for factors, and I don't believe
that does state so. It says that *factor* sorts them by default, which is
true.  Where is the `man page for factors'?

> labels. This is inconsistent with everything else, confusing for
> students, and liable to induce errors in data analysis. In the example
> below, it is not too important because the baseline category is the
> same in the two cases but that will not generally be the case.
> 
> As an addition comment, I would strongly recommend that, if labels can
> be coerced to numeric, they be ordered, not sorted. This is because
> the order is very confusing if there are more than 9: for example, the
> sorted 10 comes near the beginning and not at the end.

You can do that, of course, by specifying the order of the levels.  
However, we teach students that the details of the coding of linear models
are details, and that they should regard coefficients as secondary and
predictions as primary.  aov() has the right idea in suppressing the
individual coefficients.  If you want to interpret coefficients you need to
understand codings. Period.

I don't see the value of changing the default for factor: it would not be
backwards-compatible, and some people have thought thought what the default
would be and accepted it. 

> > reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> > z
> 
> Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
>      0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 
> > print(za <- glm(Freq~reg66+Reg71,family=poisson))
> 
> Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
>      0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 


> Third problem: if mean value contrasts are used, the level names are
> not attached to the variable name, but simply the number of the
> category. This rightly drives students mad and is simply
> uninterpretable if the levels have been sorted. It takes a great deal
> of extreme care to try to find out to what the numbers refer.

Are we supposed to guess that `mean value contrasts' means contr.sum?  In
which case the numbers refer to the number of the *contrast*: they do not
refer to levels, nor are single levels relevant. As in

> contr.sum(levels(Reg66))
   [,1] [,2] [,3]
CC    1    0    0
GL    0    1    0
LY    0    0    1
WM   -1   -1   -1
> contr.treatment(levels(Reg66))
   GL LY WM
CC  0  0  0
GL  1  0  0
LY  0  1  0
WM  0  0  1

Now, what should the column labels be in the first case?  And in what sense
are these `mean value contrasts'?

Do you really want labels like "CCvWM"?  They could get very cumbersome.

(One could argue that contr.treatment is already wrong, but as they
are not even contrasts ....)

[...]

> Additional comment: I recommend that the aic functions for poisson and
> binomial have the explicit calculation of the log density replaced by
> the corresponding d function with the log option. This will avoid the
> production of NAs in certain cases of zeroes in tables.

Good idea, but could you supply examples so we can put them in the
regression tests?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 08:54:54 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 09:54:54 +0100
Subject: [Rd] help with sockets
Message-ID: <3A4C515E.A54D3F3D@univie.ac.at>

i would like to use sockets to accept commands over the net.
so a socket should be a replacement for stdin.
whenever i have a complete line, i want to hand it over to the parser.

i cannot do it simply with eval because eval expects a complete
expression.

additionally, eval and evalq
seem not to accept strings.

is there an easy way to do this?

let me rephrase

my program should run a loop reading a socket,
and whenever an and of line arrives,
the string should be handled like if it had been typed on the command
line.

can this be done easily?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:25:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 09:25:03 +0000 (GMT)
Subject: [Rd] help with sockets
In-Reply-To: <3A4C515E.A54D3F3D@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10012290908210.14802-100000@toucan.stats>

On Fri, 29 Dec 2000, Erich Neuwirth wrote:

> i would like to use sockets to accept commands over the net.
> so a socket should be a replacement for stdin.
> whenever i have a complete line, i want to hand it over to the parser.
> 
> i cannot do it simply with eval because eval expects a complete
> expression.
> 
> additionally, eval and evalq
> seem not to accept strings.
> 
> is there an easy way to do this?
> 
> let me rephrase
> 
> my program should run a loop reading a socket,
> and whenever an and of line arrives,
> the string should be handled like if it had been typed on the command
> line.
> 
> can this be done easily?

Not yet, I think. This is the aim of connections (new in 1.2.0), but
socket connections are not yet fully implemented (and nothing is in the
R sources yet).  I bet you want to do this on Windows too!

First off, you need to parse, not evaluate the string: eval is called on a
parse tree.  So what you will be able to do with a socket connection
is to call eval(parse(file=conname, n = 1)) and that will read one
expression from the connection conname and then evaluate it.  So you
could run that in a loop.

I think you can fake this now.  When each line arrives, add it to a 
character vector `buffer'.  Then try parse(n = 1, text=buffer),
and if that succeeds evaluate the result and reinitialize `buffer'
to be empty.

A few details: giving parse() an incomplete expression will get a
parse error, so the call to parse has to be done inside try().
I don't know how to distinguish between an incomplete expression and a
parse error, so this strategy will only work if you always send correct
expressions.  (I met exactly the same problem using DDE connections to
S-PLUS for Windows.)  Perhaps we can make parse give different error
messages?


An alternative is to use OS facilities to do this. That is, to write a 
small program `getfromsocket' that accepts input from the socket and
writes line by line to stdout. Then just use

getfromsocket args | R (or Rterm on Windows).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:44:09 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 10:44:09 +0100 (MET)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200012290944.KAA00877@pubhealth.ku.dk>

Summary of report from Peter Perkins <pperkins@ucsd.edu> on Sat Aug 26
09:41:52 2000

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b


This seems to be intentional, but the documentation is wrong.  The C code
says

    /* If a non-vector argument was encountered (perhaps a list if */
    /* recursive = F) then we must return a list.  Otherwise, we use */
    /* the natural coercion for vector types. */

A language element (e.g. a `name') is non-vector.  So anything can go in a
list, but unlist cannot sort out anything.

S does this differently, but then it stores non-vector types differently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 11:38:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 12:38:36 +0100 (MET)
Subject: [Rd] aic in binomial models is often wrong (PR#796)
Message-ID: <200012291138.MAA01699@pubhealth.ku.dk>

The following two models are the same:

data(esoph)
glm(cbind(ncases, ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial())
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 237 

glm(ncases/(ncases+ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial(), weights=ncases+ncontrols)
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 934.4 

The second AIC value is wrong: fixed in R-patched now.

You may think you only ever use the first form, but internally
R uses the second quite a bit.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 14:31:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 15:31:03 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
Message-ID: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>


The definition for dev.copy2eps contains the following line:

    oc$paper <- "special"

The result of this is that the output will be placed in the left
bottom corner of the page. Even though dev.copy2eps is meant for
creating files that are to be included into other documents, you
might want to print the figure directly, just to see how it will
look on paper. (Of course, this will only work if the figure 
is not larger than the papersize.) When the figure is in the
left bottom corner, this is a bit awkward, because marks too
close to the edge will get lost.

I suggest to put the figure at the centre of the default paper
size (or perhaps the papersize as set as an argument by the
user). It won't matter for EPS-inclusion were on the paper
the figure is, as long as the boundingbox is set correctly.
I redefined dev.copy2eps in my ~/.Rprofile with the above line
replaced by:

    oc$paper <- "default"

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 16:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 16:06:55 +0000 (GMT)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>

On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> 
> The definition for dev.copy2eps contains the following line:
> 
>     oc$paper <- "special"
> 
> The result of this is that the output will be placed in the left
> bottom corner of the page. Even though dev.copy2eps is meant for
> creating files that are to be included into other documents, you
> might want to print the figure directly, just to see how it will
> look on paper. (Of course, this will only work if the figure 
> is not larger than the papersize.) When the figure is in the
> left bottom corner, this is a bit awkward, because marks too
> close to the edge will get lost.

Can't you print from a viewer that will fix this, in particular
take your printer's PPD into account.  EPSF is not supposed to be sent
directly to a printer.

> I suggest to put the figure at the centre of the default paper
> size (or perhaps the papersize as set as an argument by the
> user). It won't matter for EPS-inclusion were on the paper
> the figure is, as long as the boundingbox is set correctly.

It does matter in some cases, and in others it saves a *lot* of
memory. Some includers turn the whole page into a bitmap and then crop it
to the bounding box.  Others will crop to the smaller of
the Media and the bounding box, or crop to the Media only.

> I redefined dev.copy2eps in my ~/.Rprofile with the above line
> replaced by:
> 
>     oc$paper <- "default"

Please don't.  Make a copy with another name and change that.
One day you will need dev.copy2eps as intended, and you will
either be puzzled about the result or file a bug report ...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Dec 29 17:11:37 2000
From: joehl@web.de (joehl@web.de)
Date: Fri, 29 Dec 2000 18:11:37 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012291711.SAA03532@pubhealth.ku.dk>

Dear Prof. Brian Ripley,

Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)

> If these things bother you, could you please supply fixes?  

Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that. 

What I definitely can offer is testing and giving replicable bug reports. 

Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R. 

> [snipped]
> Nothing on the help page suggested that the fine details of the R read-only
> parameters will be as you expected after re-scaling the plot, and it never
> occurred to me that anyone would expect so.  
> As they are reported by the R 
> graphics engine (which is used unchanged), I expect they are correct in one 
> of the multiple interpretations. 
> [snipped]

Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).

One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.

> Possibly.  I don't think the device size is very interesting after
> rescaling.  What are you using it for?

Well, of course I try to avoid using it. 

Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.

Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device. 

Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.

Example
Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size. 

========================
windows(rescale="fixed")
does not do rescaling after device initializiation, it's basic idea is to not change the device size at all. 
However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails. 
In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
Thus the current implementation does not make sense with devices bigger than the screen.
========================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fixed")

# using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally). 
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()



======================
by constrast 
windows(rescale="fit")
works
======================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fit")

# using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands WORKS
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()

However repeated resizing of the window does increase the shown font sizes, look at that:

width <- 8
height <- 6
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
cex <- 2.8

info <- function(){
	user <- strwidth(jandltext, cex=cex, units="user")
	inches <- strwidth(jandltext, cex=cex, units="inches")
	pin <- par("pin")
	din <- par("din")
	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
}

windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
windows(width=width, height=height, rescale="fit")
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,1,0,1))
par(c("din","fin","pin"))
par("usr")
text(0.5,0.5,jandltext, cex=cex)

# Initial measures
print(static <- info())

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# we never touched horizontal window size but horiz din differs, strwidthInInches differs not

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# now everything differs

> print(static <- rbind(static, info()))
       din aspectratio pintodin   struser strinchtopin   strinch
1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing



So here is my revised bug status:

1a) windows(rescale="fixed") does not keep original device size 
1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)

2) wrong row distances with windows(rescale="fit")
   This phenomenon also observed under different circumstances
   see todays mail to r-help

3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well


Kind regards and best wishes for 2001



Jens Oehlschlgel

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 18:45:16 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 19:45:16 +0100
Subject: [Rd] R sings
Message-ID: <3A4CDBBC.3010C39@univie.ac.at>

i have created a package which allows R to play sounds
the package is available from
http://sunsite.univie.ac.at/~neuwirth/Rcsound/
both as zipped binary for windows and as installable tar.gz

preequisite:
you have to install csound on yout machine.
the necessary links are at http://www.csound.org

csound is a very portable program for creating sounds,
and using it as out sound creation tool we remain portable.

i am interested in getting feedback.

btw:
csound is NOT easy to use.
but for the purposes of our package,
it is only necessary to install it.

my package is vert preliminary,
so i would like feedback.

here is the README


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


This is a VERY preliminary version of an R package
for playing sounds.

To install, unzip the complete archive in the library directory of R.

The presequesites:
You have to install CSOUND,
a very powerful sound generation program.
Information is avalaible at http://www.csound.org
You also can find most version on
http://sunsite.univie.ac.at/pub/sound/csound/

You have to find the command line parameters
needed to run csound on your platform.
You need at least verson 4.0,
current version at design time of this package is 4.08.
our package has been tested with 
"Canonical" Csound on Linux
and DirectCsound on Win32.

option$csound.debug
and
option$csound.plain 
have to contain the command line needed to run
csound in normal mode and in debugging mode
(debugging mode means you want to see a window with csound's messages)
The package as is is configured for windows,
a comment contains the command line for Linux.

At the moment, we have only 2 instruments,
instrument 1 is a sine wave,
and
instrument 11 is a simple plucked string.

currently, the library contains 4 functions

csndPlayMono
csndPlayStereo
csndCorrphone
csndFourierTones

all these function play sequences of notes with given frequencies,
starting times, durations, and volume levels.

Basic interface functions:

csndPlayMono (instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
  file=NULL, debug.csound=FALSE)

csndPlayStereo(instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
pos = 0, 
  file=NULL, debug.csound=FALSE)

instr	instrument number
start   vector of starting times for single notes 
dur     vector of duration of single notes
vol	vector of volume of single notes
freq    vector of volume of single notes
pos     vector of positions of notes (extreme values -1 left channel, 1
right channel)
file    name of temporary file to be used as input for csound
debug.csound
	if TRUE csound window will remain visible


Attempt at "statistical" sound functions

csndCorrphone(instr, freq1, freq2, dur, vol=8000,
  file=NULL, debug.csound=FALSE)

instr	instrument number
freq1,freq2
	vector of frequencies to be played simultaneously on left and right
channel.
dur	should be a single value, used for duraion of all notes

csndFourierTones(fourcoeffs, freq=264, dur=1, vol=8000,
  file=NULL, debug.csound=FALSE)

fourcoeffs	matrix, each row is interpreted as fourier coefficients,
		and the correspronding tone is played for each row
freq		frequency of the tones (should be equal for all tones)
dur		duration in seconds
vol		volume for tones




Here are some example to try:

csndPlayMono(11,c(0:12),1,8000,264*2^(c(0:12)/12))
csndPlayStereo(11,c(0:12),1,8000,264*2^(c(0:12)/12),c(-6:6)/6)

r<-0.9
x1<-rnorm(10)
x2<-rnorm(10)
x3<-r*x1+sqrt(1-r^2)*x2
f1<-264+50*x1
f3<-264+50*x3
csndCorrphone(11,f1,f3,1)

fmat<-rbind(1/1:20,rep(c(1,0),10)*1/1:20,(1/(1:20))^2*rep(c(1,-1),10))
csndFourierTones(fmat,dur=2)







--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 22:00:21 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 23:00:21 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012292144380.739-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> > The definition for dev.copy2eps contains the following line:
> > 
> >     oc$paper <- "special"
> > 
> > The result of this is that the output will be placed in the left
> > bottom corner of the page. Even though dev.copy2eps is meant for
> > creating files that are to be included into other documents, you
> > might want to print the figure directly, just to see how it will
> > look on paper. (Of course, this will only work if the figure 
> > is not larger than the papersize.) When the figure is in the
> > left bottom corner, this is a bit awkward, because marks too
> > close to the edge will get lost.
> 
> Can't you print from a viewer that will fix this, in particular
> take your printer's PPD into account.

Usually I just print with Unix command lp. I could write a
script that would shift the image to the centre of the page
before printing. Never needed such a thing before. I'm used to
application creating EPS with images centred.

> EPSF is not supposed to be sent directly to a printer.

That's what I said. Doesn't mean you should make it
unnecessarily difficult.

> > I suggest to put the figure at the centre of the default paper
> > size (or perhaps the papersize as set as an argument by the
> > user). It won't matter for EPS-inclusion were on the paper
> > the figure is, as long as the boundingbox is set correctly.
> 
> It does matter in some cases, and in others it saves a *lot* of
> memory. Some includers turn the whole page into a bitmap and then crop it
> to the bounding box.  Others will crop to the smaller of
> the Media and the bounding box, or crop to the Media only.

I never encoutered software that behaves in such a silly matter.
But I take your word for it.

> > I redefined dev.copy2eps in my ~/.Rprofile with the above line
> > replaced by:
> > 
> >     oc$paper <- "default"
> 
> Please don't.  Make a copy with another name and change that.
> One day you will need dev.copy2eps as intended, and you will
> either be puzzled about the result or file a bug report ...

That's a sound suggestion.

Why not allow for the user to set the papersize? Instead of
having in the body of dev.copy2eps the following line:

    oc$paper <- "special"

you could put this:

    if (is.null(oc$paper))
        oc$paper <- "special"

The way it is now, I *can* specify the paper as an option, but
it is ignored in the body and replaced by "special". I think
it's annoying to have options that don't work. And being used to
working with Unix, I don't think you should "protect" people by
limiting their options.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Dec 30 14:43:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 30 Dec 2000 15:43:07 +0100
Subject: [Rd] R sings again
Message-ID: <3A4DF47B.A3DA08D0@univie.ac.at>

our server broke,
so meanwhile i have put the package files for RCsound on another server

the relevant links are

http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound.zip
http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound_0.2-1.tar.gz

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Sat Dec 30 23:21:29 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Sun, 31 Dec 2000 00:21:29 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#797)
Message-ID: <200012302321.AAA06064@pubhealth.ku.dk>


The editor in R version 1.2.0 returns an error after editing a data frame 
that has row names. This is on a Windows 2000 system, but I've encountered 
the same problem under Windows 95. Here's a simple example:

  ------------------------------------------------------------------------------------

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > data(Formaldehyde)
 > Formaldehyde
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > edit(Formaldehyde) # no problem here
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > rownames(Formaldehyde)
[1] "1" "2" "3" "4" "5" "6"
 > rownames(Formaldehyde)<-letters[1:6]
 > Formaldehyde # seems ok
   carb optden
a  0.1  0.086
b  0.3  0.269
c  0.5  0.446
d  0.6  0.538
e  0.7  0.626
f  0.9  0.782
 > edit(Formaldehyde) # I simply closed the editor without changing anything
Error in rownames<-(x, value) : dimnames applied to non-array
 >


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.0
  year = 2000
  month = 12
  day = 15
  language = R

Windows 0.0 (build 0) Service Pack 10.0 ()

Search Path:
  .GlobalEnv, package:car, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 07:55:23 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 31 Dec 2000 08:55:23 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#798)
Message-ID: <200012310755.IAA06563@pubhealth.ku.dk>

On Sun, 31 Dec 2000 jfox@mcmaster.ca wrote:

> The editor in R version 1.2.0 returns an error after editing a data frame 
> that has row names. This is on a Windows 2000 system, but I've encountered 
> the same problem under Windows 95. Here's a simple example:

Actually, that's not where the error is. If you use traceback() you
will see it is in edit.data.frame.  That tries to use row.names to set the
rownames on a list, which no longer works (and was never documented to).

The fix is to use

    out <- as.data.frame(out)
    if (edit.row.names) {
        if (any(duplicated(rn))) 
            warning("edited row names contain duplicates and will be
ignored")
        else row.names(out) <- rn
    }
    out

or, if you don't want to edit the row names,

edit(foo, edit.row.names = FALSE)

BTW, you are supposed to use row.names to get/set row names on data frame,
and rownames/colnames on a matrix.


> 
>   ------------------------------------------------------------------------------------
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0  (2000-12-15)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
>  > data(Formaldehyde)
>  > Formaldehyde
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > edit(Formaldehyde) # no problem here
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > rownames(Formaldehyde)
> [1] "1" "2" "3" "4" "5" "6"
>  > rownames(Formaldehyde)<-letters[1:6]
>  > Formaldehyde # seems ok
>    carb optden
> a  0.1  0.086
> b  0.3  0.269
> c  0.5  0.446
> d  0.6  0.538
> e  0.7  0.626
> f  0.9  0.782
>  > edit(Formaldehyde) # I simply closed the editor without changing anything
> Error in rownames<-(x, value) : dimnames applied to non-array
>  >
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.0
>   year = 2000
>   month = 12
>   day = 15
>   language = R
> 
> Windows 0.0 (build 0) Service Pack 10.0 ()
> 
> Search Path:
>   .GlobalEnv, package:car, package:ctest, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 11:53:23 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 11:53:23 GMT
Subject: [Rd] Package overview document?
Message-ID: <3a511b4d.58240644@smtp1.sympatico.ca>

I'm not sure if this is a devel or help question.

I'd like to write an overview of a package, and have it show up when
someone types

 library(help=mypackage)

or

 help(package=mypackage)

or even better, 

 ?mypackage

Right now, the first two give me a copy of the INDEX file; what I'd
like to see is a longer description.  Is it reasonable to write such a
description into the INDEX file?  Is there some other file where I can
put it, so that it will show up when someone asks about my package?

What about the latter version?  Wouldn't it be a nice improvement if
that were possible, too?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 14:11:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3a511b4d.58240644@smtp1.sympatico.ca>
Message-ID: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> I'm not sure if this is a devel or help question.

Devel, I think.

> I'd like to write an overview of a package, and have it show up when
> someone types
> 
>  library(help=mypackage)
> 
> or
> 
>  help(package=mypackage)
> 
> or even better, 
> 
>  ?mypackage
> 
> Right now, the first two give me a copy of the INDEX file; what I'd
> like to see is a longer description.  Is it reasonable to write such a
> description into the INDEX file?  Is there some other file where I can

That's what a lot of other packages do, e.g. boot.

> put it, so that it will show up when someone asks about my package?

Not if they ask the first two ways.

> What about the latter version?  Wouldn't it be a nice improvement if
> that were possible, too?

It is possible, but you need to watch namespace issues.  For example,
package sm has a file sm.Rd that gives an overview: you need it loaded
for that to work via ?sm but help(sm, package="sm") works always
(if sm is installed).

The problem is ensuring that you have a non-clashing name. dse1 has
00General.Description which seems to me to be very likely to clash.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 16:33:41 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 16:33:41 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
Message-ID: <3a4f5971.54339465@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
Ripley <ripley@stats.ox.ac.uk> wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>> I'd like to write an overview of a package, and have it show up when
>> someone types
>> 
>>  library(help=mypackage)
  ...
>> Is it reasonable to write such a
>> description into the INDEX file?  Is there some other file where I can
>
>That's what a lot of other packages do, e.g. boot.

Okay, I'll do that.  There are a couple of deficiencies, most notably
the fact that INDEX isn't used in the HTML or LaTeX versions of the
help files.  I saw in the docs somewhere that the DESCRIPTION text
would show up in the Latex output in some later version; is anyone
working on this?  If not, I might give it a shot.

>> >  ?mypackage

>It is possible, but you need to watch namespace issues.  For example,
>package sm has a file sm.Rd that gives an overview: you need it loaded
>for that to work via ?sm but help(sm, package="sm") works always
>(if sm is installed).
>
>The problem is ensuring that you have a non-clashing name. dse1 has
>00General.Description which seems to me to be very likely to clash.

I think the most obvious choice of name is the name of the package,
but that would clash fairly often with the name of a function within
it (e.g. boot), and it wouldn't show up first in alphabetical lists.
What some other help systems (e.g. Winhelp) do when a request is
ambiguous is to present a list of choices, with extra information
appended to help select.  If R did that, the clash wouldn't be such a
big deal. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 22:16:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 31 Dec 2000 22:16:39 +0000 (GMT)
Subject: [Rd] Package overview document?
In-Reply-To: <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
> Ripley <ripley@stats.ox.ac.uk> wrote:
> 
> >On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >> I'd like to write an overview of a package, and have it show up when
> >> someone types
> >> 
> >>  library(help=mypackage)
>   ...
> >> Is it reasonable to write such a
> >> description into the INDEX file?  Is there some other file where I can
> >
> >That's what a lot of other packages do, e.g. boot.
> 
> Okay, I'll do that.  There are a couple of deficiencies, most notably
> the fact that INDEX isn't used in the HTML or LaTeX versions of the
> help files.  I saw in the docs somewhere that the DESCRIPTION text
> would show up in the Latex output in some later version; is anyone
> working on this?  If not, I might give it a shot.

I've not seen that.  The latex versions are separate files, so it seems
only to make sense if running pkg2tex on a package.

> >> >  ?mypackage
> 
> >It is possible, but you need to watch namespace issues.  For example,
> >package sm has a file sm.Rd that gives an overview: you need it loaded
> >for that to work via ?sm but help(sm, package="sm") works always
> >(if sm is installed).
> >
> >The problem is ensuring that you have a non-clashing name. dse1 has
> >00General.Description which seems to me to be very likely to clash.
> 
> I think the most obvious choice of name is the name of the package,
> but that would clash fairly often with the name of a function within
> it (e.g. boot), and it wouldn't show up first in alphabetical lists.
> What some other help systems (e.g. Winhelp) do when a request is
> ambiguous is to present a list of choices, with extra information
> appended to help select.  If R did that, the clash wouldn't be such a
> big deal. 

Um. They only sometimes do that, and only for searches or perhaps indices,
never for hyperlinks. They also only cope with single help files, and the
problem here is across help sets.  It's a lot less convenient on a non-GUI
system, too.

Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
special treatment.  It will not happen soon, though, and both imposing
more standards on .Rd format and moving away from .Rd to something 
easier to parse are under discussion.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Dec  1 08:05:03 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 1 Dec 2000 09:05:03 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <14887.23471.959713.364415@mithrandir.hornik.net>

>>>>> Robert King writes:

> On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:
>> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> 
>> > I don't want to re-invent the wheel, and I'm trying to code up something
>> > that does a Nelder-Mead simplex method to minimise a non-linear objective
>> > function.  (I'm porting something I originally wrote in matlab, using the 
>> > optimisation toolbox funciton fmins).
>> 
>> optim(method="Nelder-Mead")
 
> Thanks.  Perhaps I should just learn to spell like the OED :-) 

>> Now how did this not come up in a search: perhaps because of the way you
>> spell optimization?  I have
 
>> which shows we probably need to find a way to check variant spellings.
>> 
>> (BTW: just in case anyone tells me the British spell with an `ise', the
>> Oxford English Dictionary does not.)

> I guess this means I should change the spelling of the
> parameterisation in the gld package functions.  What do people think
> of adding extra arguments to functions to take account of different
> spellings like this:

> example.fn _ function(parameterisation="fing",parameterization=NULL)
> {
> if (is.null(parameterization)) {parameterization_parameterisation}
> else {parameterisation_parameterization}
> print(parameterisation)
> }

> Is there a better way?

Well, first of all use `<-' rather than `_'.

We've discussed the spelling issue on r-core in some detail.  You may
notice that e.g. there are both license() and licence().  [There is a
more important issue in gray versus grey, I guess.]

I personally think that there is nothing that says that argument names
must have any meaning in any language and hence one may spell them in
any way we want.  But more realistically, in the above case I'd rather
have

	exampleFn <- function(param = "fing", ...)

which will make everyone happy.

The real issue I see is how people can find documentation if they use
different spelling, and I think we need a fuzzy grep which allows near
matches for that purpose.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Dec  1 19:47:32 2000
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 1 Dec 2000 20:47:32 +0100 (MET)
Subject: [Rd] bug in outer() (PR#755)
Message-ID: <200012011947.UAA24188@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.1.1
OS: nt4.0
Submission from: (NULL) (144.81.31.148)


sim3pl <- function(theta,i) {
p2 <- p3pl(theta,i)
p1 <- runif(1)
temp <- response(p1,p2)
return(p1)
}

when calling outer(theta,items,sim3pl), where 

theta = rnorm(100,m,s)

and 

items = seq(1:nvar)

runif(1) is only called once (instead of 100*nvar times),
even though if calling sim3pl manually, it is working ok.

best regards,
Matthias von Davier

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec  1 20:23:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 1 Dec 2000 12:23:23 -0800 (PST)
Subject: [Rd] bug in outer() (PR#755)
In-Reply-To: <200012011947.UAA24188@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0012011221320.10738-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 mvondavier@ets.org wrote:

> 
> sim3pl <- function(theta,i) {
> p2 <- p3pl(theta,i)
> p1 <- runif(1)
> temp <- response(p1,p2)
> return(p1)
> }
> 
> when calling outer(theta,items,sim3pl), where 
> 
> theta = rnorm(100,m,s)
> 
> and 
> 
> items = seq(1:nvar)
> 
> runif(1) is only called once (instead of 100*nvar times),
> even though if calling sim3pl manually, it is working ok.

It's not a bug. That's what's supposed to happen.

outer(a,b,f) calls f() once, with two very long vectors as arguments. It
only works on vectorised functions.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Dec  2 09:17:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Dec 2000 10:17:28 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <14886.47422.630186.442419@mithrandir.hornik.net>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <14886.47422.630186.442419@mithrandir.hornik.net>
Message-ID: <14888.48680.586997.442553@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
    >>> I don't want to re-invent the wheel, and I'm trying to code up something
    >>> that does a Nelder-Mead simplex method to minimise a non-linear objective
    >>> function.  (I'm porting something I originally wrote in matlab, using the 
    >>> optimisation toolbox funciton fmins).
    >>> 
    >>> Is there already something available to do this included in R?
    >>> Do people have suggestions on the best way to do this?

    >> optim(method="Nelder-Mead")

    >> Now how did this not come up in a search: perhaps because of the way you
    >> spell optimization?  I have

    >>> help.search("optimisation")
    >> No help files found with name or title matching `optimisation'
    >>> help.search("optimization")
    >> Help files with name or title matching `optimization':

    >> partition(multiv)          Partitioning by Iterative Optimization 
    >> lmeScale(nlme)             Scale for lme Optimization
    >> portfolio.optim(tseries)   Portfolio Optimization
    >> optim(base)                General-purpose Optimization
    >> optimize(base)             One Dimensional Optimization

    >> which shows we probably need to find a way to check variant spellings.

    KH> I am not sure how easy it would be to use different dicitionaries.  But
    KH> a fuzzy grep which also returns near matches should be good enough for
    KH> what we need.  Not that I have such a beast readily available, though.

Good idea!

I have had `agrep' [ = approximate grep ], a main program in C,
which is quite smart,
but the COPYRIGHT is

>> This material was developed by Sun Wu and Udi Manber
>> at the University of Arizona, Department of Computer Science.
>> Permission is granted to copy this software, to redistribute it
>> on a nonprofit basis, and to use it for any purpose, subject to
>> the following restrictions and understandings.
>> 
>> 1. Any copy made of this software must include this copyright notice
>> in full.
>> 
>> 2. All materials developed as a consequence of the use of this
>> software shall duly acknowledge such use, in accordance with the usual
>> standards of acknowledging credit in academic research.
>> 
>> 3. The authors have made no warranty or representation that the
>> operation of this software will be error-free or suitable for any
>> application, and they are under under no obligation to provide any
>> services, by way of maintenance, update, or otherwise.  The software
>> is an experimental prototype offered on an as-is basis.
>> 
>> 4. Redistribution for profit requires the express, written permission
>> of the authors.

(which is from 1992 or so)
and I vague remember having had difficulties contacting the authors...

Anyone else knowing about developments with "agrep"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Sat Dec  2 09:43:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Sat, 2 Dec 2000 03:43:44 -0600 (CST)
Subject: [Rd] Optimisation methods
In-Reply-To: <14888.48680.586997.442553@gargle.gargle.HOWL> from Martin Maechler at "Dec 2, 2000 10:17:28 am"
Message-ID: <200012020943.DAA00145@goose.stat.umn.edu>

Martin Maechler wrote:
> ....
> >> is an experimental prototype offered on an as-is basis.
> >> 
> >> 4. Redistribution for profit requires the express, written permission
> >> of the authors.
> 
> (which is from 1992 or so)
> and I vague remember having had difficulties contacting the authors...
> 
> Anyone else knowing about developments with "agrep"


I believe it is now available as part of Glimpse, http://webglimpse.org/

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Dec  3 08:14:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 3 Dec 2000 09:14:01 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <200012020943.DAA00145@goose.stat.umn.edu>
References: <14888.48680.586997.442553@gargle.gargle.HOWL>
 <200012020943.DAA00145@goose.stat.umn.edu>
Message-ID: <14890.201.594509.178337@mithrandir.hornik.net>

>>>>> Luke Tierney writes:

> Martin Maechler wrote:
>> ....
>> >> is an experimental prototype offered on an as-is basis.
>> >> 
>> >> 4. Redistribution for profit requires the express, written permission
>> >> of the authors.
>> 
>> (which is from 1992 or so)
>> and I vague remember having had difficulties contacting the authors...
>> 
>> Anyone else knowing about developments with "agrep"


> I believe it is now available as part of Glimpse,
> http://webglimpse.org/

I seem to recall that too.

On my TODO list for 1.2.1 now, unless someone else feels like taking
this up?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec  3 22:19:16 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 3 Dec 2000 23:19:16 +0100 (MET)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
Message-ID: <200012032219.XAA29932@pubhealth.ku.dk>

A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
(Rdll2010.zip) for Win2k from CRAN.
(I have used the same version of R from WinNT4 *and* Win2k for some
time.)

Now I tried to produce a bitmap, but R crashes (WinNT4):
 bmp("bitmap.bmp")
 plot(1:10)
 dev.off() ## crash!

That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I cannot test on Win2k, because I removed Win2k from my box in the last
week. 
The Rdll2010 reports the same version as the original R.dll (15 Aug
2000). That's not intended, I think?

Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec  4 01:54:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Dec 2000 02:54:05 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: Kurt Hornik's message of "Fri, 1 Dec 2000 09:05:03 +0100"
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats> <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au> <14887.23471.959713.364415@mithrandir.hornik.net>
Message-ID: <x2bsutgddu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> I personally think that there is nothing that says that argument names
> must have any meaning in any language and hence one may spell them in
> any way we want.  But more realistically, in the above case I'd rather
> have
> 
> 	exampleFn <- function(param = "fing", ...)
> 
> which will make everyone happy.

Not me, but "param.style=" might. (I think the above indicates that
"fing" is a parameter, not a paramete?ri[sz]ation.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec  4 06:51:11 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 4 Dec 2000 08:51:11 +0200
Subject: [Rd] R-plus Java API
Message-ID: <002b01c05dbe$9689da40$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello, I am new to r-plus package and I wanted to know if there is java =
api to the r-plus language, or jni wrapper?

Thank you very much
Regards,
Moshe

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, I am new to r-plus package and I =
wanted to=20
know if there is java api to the r-plus language, or jni =
wrapper?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_0028_01C05DCF.59EF6AD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec  4 07:40:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 4 Dec 2000 07:40:52 +0000 (GMT)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
In-Reply-To: <200012032219.XAA29932@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012040733340.637-100000@auk.stats>

On Sun, 3 Dec 2000 ligges@statistik.uni-dortmund.de wrote:

> A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
> (Rdll2010.zip) for Win2k from CRAN.
> (I have used the same version of R from WinNT4 *and* Win2k for some
> time.)
> 
> Now I tried to produce a bitmap, but R crashes (WinNT4):
>  bmp("bitmap.bmp")
>  plot(1:10)
>  dev.off() ## crash!
> 
> That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I think I know why: the same thing happened to me testing the pre-release
of 1.2.0 about a week ago, which I tracked down to a problem with R.dll and
Rbitmap.dll using different malloc's but the same free.

> I cannot test on Win2k, because I removed Win2k from my box in the last
> week. 

Please revert to the original R.dll for now.  The problem will go away (at
least on NT4, and the fix is still there) when rw1020 is released in a
couple of weeks or so.

> The Rdll2010 reports the same version as the original R.dll (15 Aug
> 2000). That's not intended, I think?

Yes, it was.  The version of R (as distinct from the build) is unchanged.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec  4 13:54:01 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 4 Dec 2000 13:54:01 -0000
Subject: R: [Rd] Optimisation methods
Message-ID: <00a901c05df9$b4b059f0$0a00a8c0@bellview>

Maybe the String::Approx perl (under GPL and artistic license) module could
serve that pourpose ?

http://search.cpan.org/search?dist=String-Approx

Hope that helps.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Luke Tierney <luke@goose.stat.umn.edu>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: domenica 3 dicembre 2000 10.19
Oggetto: Re: [Rd] Optimisation methods


>>>>>> Luke Tierney writes:
>
>> Martin Maechler wrote:
>>> ....
>>> >> is an experimental prototype offered on an as-is basis.
>>> >>
>>> >> 4. Redistribution for profit requires the express, written permission
>>> >> of the authors.
>>>
>>> (which is from 1992 or so)
>>> and I vague remember having had difficulties contacting the authors...
>>>
>>> Anyone else knowing about developments with "agrep"
>
>
>> I believe it is now available as part of Glimpse,
>> http://webglimpse.org/
>
>I seem to recall that too.
>
>On my TODO list for 1.2.1 now, unless someone else feels like taking
>this up?
>
>-k
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 14:12:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 14:12:21 +0000 (GMT)
Subject: R: [Rd] Optimisation methods
Message-ID: <200012041412.OAA17328@toucan.stats.ox.ac.uk>


> From: "Federico Spinazzi" <spinazzi@databankgroup.it>
> Date: Mon, 4 Dec 2000 13:54:01 -0000
> 
> Maybe the String::Approx perl (under GPL and artistic license) module could
> serve that pourpose ?
> 
> http://search.cpan.org/search?dist=String-Approx
> 
> Hope that helps.

Thanks. Unfortunately we are not currently requiring perl at run time,
but apparently that module uses C, not perl, internally.

> Federico Spinazzi
> spinazzi@databankgroup.it
> Databank S.P.A
> Via Spartaco, 19, ITALY
> Tel. + 39 02 55002251
> 
> -----Messaggio originale-----
> Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
> A: Luke Tierney <luke@goose.stat.umn.edu>
> Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
> Data: domenica 3 dicembre 2000 10.19
> Oggetto: Re: [Rd] Optimisation methods
> 
> 
> >>>>>> Luke Tierney writes:
> >
> >> Martin Maechler wrote:
> >>> ....
> >>> >> is an experimental prototype offered on an as-is basis.
> >>> >>
> >>> >> 4. Redistribution for profit requires the express, written permission
> >>> >> of the authors.
> >>>
> >>> (which is from 1992 or so)
> >>> and I vague remember having had difficulties contacting the authors...
> >>>
> >>> Anyone else knowing about developments with "agrep"
> >
> >
> >> I believe it is now available as part of Glimpse,
> >> http://webglimpse.org/
> >
> >I seem to recall that too.
> >
> >On my TODO list for 1.2.1 now, unless someone else feels like taking
> >this up?
> >
> >-k
> >-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-
> >r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >Send "info", "help", or "[un]subscribe"
> >(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Mon Dec  4 16:29:56 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041629.RAA08869@pubhealth.ku.dk>


Here's a simple example:

  > x <- rnorm(20)
  > y <- 1 + 10*x + rnorm(20)
  > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
  Error in length(x) == l : comparison (1) is possible only for vector types

The problem seems to be in this section of the code for plot.formula:

  if (!missing(subset)) {
    s <- eval(m$subset, data, parent.frame())
    l <- nrow(data)
    dosub <- function(x) if (length(x) == l) 
      x[s]
    else x
    dots <- lapply(dots, dosub)
  }

Sorry, no time this morning to attempt a fix myself, but I thought it
best to get this in before 1.2 is released.


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 16:57:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 16:57:53 +0000 (GMT)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041657.QAA17759@toucan.stats.ox.ac.uk>


> From: presnell@stat.ufl.edu
> Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Bug in plot.formula (PR#757)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Here's a simple example:
> 
>   > x <- rnorm(20)
>   > y <- 1 + 10*x + rnorm(20)
>   > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
>   Error in length(x) == l : comparison (1) is possible only for vector types
> 
> The problem seems to be in this section of the code for plot.formula:
> 
>   if (!missing(subset)) {
>     s <- eval(m$subset, data, parent.frame())
>     l <- nrow(data)
>     dosub <- function(x) if (length(x) == l) 
>       x[s]
>     else x
>     dots <- lapply(dots, dosub)
>   }
> 
> Sorry, no time this morning to attempt a fix myself, but I thought it
> best to get this in before 1.2 is released.

1.2 gives another error message, but the problem is using subset and
supplying a data argument.  Try

plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out", data=data.frame(x,y))

I *think* it should be l <- nrow(mf), but the function's author might
like to confirm the intention.

> 
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Mon Dec  4 17:14:03 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Mon, 4 Dec 2000 11:14:03 -0600 (CST)
Subject: [Rd] device drivers
Message-ID: <200012041714.LAA18450@goose.stat.umn.edu>

Unless you are maintaining a device driver for R, you can ignore this
note.

If you are, two issues have come up: the need to make sure there is a
slot available for a device before allocating it and, on unix at
least, the need to turn off interrupts during device initialization.

Currently typical device driver code starts the device something like this:

	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
	...
	addDevice(dd);
	initDisplayList(dd);

To address these two problems in a device driver for R 1.2 this should
be changed to

    R_CheckDeviceAvailable();
    BEGIN_SUSPEND_INTERRUPTS {
	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
        ...
	addDevice(dd);
	initDisplayList(dd);
    } END_SUSPEND_INTERRUPTS;

[Better yet, in case this changes before release, have a look at the
corresponding section of do_PS in the released sources.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Tue Dec  5 00:26:51 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Tue, 5 Dec 2000 01:26:51 +0100 (MET)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
Message-ID: <200012050026.BAA10701@pubhealth.ku.dk>


Seems to be a day for finding peculiar little things.  There is an
inconsistency in the behavior of lm vis a vis glm:

 > x <- rnorm(15)
 > y <- 1 + 10*x + rnorm(15)
 > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
 > xyz <- data.frame(x,y,z)
 > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
 > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
 > zz <- z[1:10]
 > xx <- rnorm(10)
 > predict(fit.lm,data.frame(x=xx,z=zz))
 Error in model.frame.default(formula, data, xlev = xlev) : 
 	  factor z has new level(s) C
 > predict(fit.glm,data.frame(x=xx,z=zz))
 	   1          2          3          4          5          6 
   2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
 	   7          8          9         10 
  -9.132206  11.440242 -16.054621  -3.017842 


This happens because of the line

  mf$drop.unused.levels <- TRUE

in lm and the lack of same in glm.  I'm reporting this as a bug, but
perhaps the difference is intentional?

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brett Presnell
Department of Statistics
University of Florida


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec  5 07:51:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Dec 2000 07:51:16 +0000 (GMT)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <200012050026.BAA10701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>

On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:

> 
> Seems to be a day for finding peculiar little things.  There is an
> inconsistency in the behavior of lm vis a vis glm:
> 
>  > x <- rnorm(15)
>  > y <- 1 + 10*x + rnorm(15)
>  > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
>  > xyz <- data.frame(x,y,z)
>  > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
>  > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
>  > zz <- z[1:10]
>  > xx <- rnorm(10)
>  > predict(fit.lm,data.frame(x=xx,z=zz))
>  Error in model.frame.default(formula, data, xlev = xlev) : 
>  	  factor z has new level(s) C
>  > predict(fit.glm,data.frame(x=xx,z=zz))
>  	   1          2          3          4          5          6 
>    2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
>  	   7          8          9         10 
>   -9.132206  11.440242 -16.054621  -3.017842 
> 
> 
> This happens because of the line
> 
>   mf$drop.unused.levels <- TRUE
> 
> in lm and the lack of same in glm.  I'm reporting this as a bug, but
> perhaps the difference is intentional?

No, as the glm code is not protected from user error as the lm code is. I
am not sure it is bug (it's not documented to happen) and probably there
are several related occurrences in other modelling functions, but it would
be a desirable addition and I will change it for glm (at least).


> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -- 
> Brett Presnell
> Department of Statistics
> University of Florida
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 11:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 12:35:52 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: jerome@stat.ubc.ca's message of "Tue, 28 Nov 2000 20:42:55 +0100 (MET)"
References: <200011281942.UAA17414@pubhealth.ku.dk>
Message-ID: <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>

jerome@stat.ubc.ca writes:

> Bug Description:
> 
> Problem with the function pf() when the non-centrality
> parameter is large. Here is a sample command. You should
> see a smooth line from 0 to about 55, and then the values
> of pf() go crazy from 55 to 100.
> ############################
> ncp <- seq(0,100,length=200)
> plot(ncp,pf(5,7,2,ncp=ncp))
> ############################

Confirmed. I see it on Solaris as well. This looks like trouble for
power calculations...

I wouldn't be surprised if it were related to this FIXME inside
pbeta_raw (src/nmath/pbeta.c):

     else {
        /*___ FIXME ___:  This takes forever (or ends wrongly)
          when (one or) both p & q  are huge
        */

Another "interesting" display is 

plot(ncp,pf(2,7,3,ncp=ncp))

Apparently, this relates mainly to cases with small denominator DF,
but even 

plot(ncp,log(pf(5,7,200,ncp=ncp)))

looks odd. Judging from the plots, it looks as if a loop is terminated
prematurely (discontinuous jumps suggesting that there's a change to
using a different number of iterations).

On the other hand, ncp= ca.55 seems to "mark the spot" for quite
widely different DFs and the spot where that number is important could
be in pnbeta.c, at

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));

which becomes nonzero when ncp=54. This might indicate that the fault
is in this section of code:

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
    a0 = a + x0;
    lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
    temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
    gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
    if (a0 > a)
        q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
    else
        q = exp(-c);

(This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
which would seem to be the same thing?)

Any numerical analysts on the line? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 13:59:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 14:59:39 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 12:35:52 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> is in this section of code:
> 
>     x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
>     a0 = a + x0;
>     lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
>     temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
>     gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
>     if (a0 > a)
>         q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
>     else
>         q = exp(-c);
> 
> (This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
> which would seem to be the same thing?)
> 
> Any numerical analysts on the line? 

Heh. This one goes right back to AS R84 (1990). The whole business of
calculating x0 like that is to avoid calculating a bunch of terms that
are practically zero when the noncentrality parameter is zero, and the
paper details what changes to the FORTRAN are needed to initialize the
recurrence relation for successive terms in mid-sequence. However it
forgets to say that the starting point for XJ also needs to be
changed.... 

A simple fix is to replace j=0 with j=x0, but there are a couple of
other things that might require a touchup - in particular, the whole
thing is based on single precision, so the cutoff induces an error
estimated as pnorm(-5) < 3e-7. Also, one should probably ensure that
the max iteration count is kept constant.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 15:01:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 16:01:09 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 14:59:39 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk> <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itoyoqtl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Heh. This one goes right back to AS R84 (1990). The whole business of
> calculating x0 like that is to avoid calculating a bunch of terms that
> are practically zero when the noncentrality parameter is zero, and the
                                                           ^^^^
Whoops. Read: "large"

> paper details what changes to the FORTRAN are needed to initialize the
> recurrence relation for successive terms in mid-sequence. However it
> forgets to say that the starting point for XJ also needs to be
> changed.... 

I have now committed a fix to appear in R v. 1.2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Dec  5 18:34:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 5 Dec 2000 19:34:51 +0100 (MET)
Subject: [Rd] print buglet with small options(width = ) (PR#759)
Message-ID: <200012051834.TAA21397@pubhealth.ku.dk>

This is in R 1.1.1 and "R-devel" :

 > options(width = 10) ; pi
 [1]
 [1] 3.141593

Note the extra "[1]".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Dec  5 18:39:39 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 5 Dec 2000 19:39:39 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#760)
Message-ID: <200012051839.TAA21437@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Dec  5 19:50:07 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 5 Dec 2000 14:50:07 -0500
Subject: [Rd] print buglet with small options(width = ) (PR#759)
In-Reply-To: <200012051834.TAA21397@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Tue, Dec 05, 2000 at 07:34:51PM +0100
References: <200012051834.TAA21397@pubhealth.ku.dk>
Message-ID: <20001205145007.J21159@jimmy.harvard.edu>

Found and fixed; I'll commit after make check has its way

On Tue, Dec 05, 2000 at 07:34:51PM +0100, maechler@stat.math.ethz.ch wrote:
> This is in R 1.1.1 and "R-devel" :
> 
>  > options(width = 10) ; pi
>  [1]
>  [1] 3.141593
> 
> Note the extra "[1]".
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Dec  6 09:12:11 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 6 Dec 2000 10:12:11 +0100 (MET)
Subject: [Rd] write.table
Message-ID: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>


Good morning, 

suppose the following:

m <- round(matrix(rnorm(16), ncol=4), 3)
a <- rev(c(0.01, 0.025, 0.05, 0.1))
rownames(m) <- a
colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
m
      0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
0.1       1.034  -0.119  -1.213   0.619
0.05      0.035   1.074   0.525   1.671
0.025    -1.687   0.960   0.324  -0.170
0.01      0.906   1.642   0.557  -2.224

and now write.table says:

write.table(m)
"X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
"0.1" "1.034" "-0.119" "-1.213" "0.619"
"0.05" "0.035" "1.074" "0.525" "1.671"
"0.025" "-1.687" "0.96" "0.324" "-0.17"
"0.01" "0.906" "1.642" "0.557" "-2.224"

If one writes 'm' into a file and reads it using read.table:

read.table("dummy")
      X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
0.1        1.034   -0.119   -1.213    0.619
0.05       0.035    1.074    0.525    1.671
0.025     -1.687    0.960    0.324   -0.170
0.01       0.906    1.642    0.557   -2.224

the colnames are incorrect. Do I miss something?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec  6 09:23:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 09:23:32 +0000 (GMT)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>

On Wed, 6 Dec 2000, Torsten Hothorn wrote:

> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
> "0.1" "1.034" "-0.119" "-1.213" "0.619"
> "0.05" "0.035" "1.074" "0.525" "1.671"
> "0.025" "-1.687" "0.96" "0.324" "-0.17"
> "0.01" "0.906" "1.642" "0.557" "-2.224"
> 
> If one writes 'm' into a file and reads it using read.table:
> 
> read.table("dummy")
>       X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
> 0.1        1.034   -0.119   -1.213    0.619
> 0.05       0.035    1.074    0.525    1.671
> 0.025     -1.687    0.960    0.324   -0.170
> 0.01       0.906    1.642    0.557   -2.224
> 
> the colnames are incorrect. Do I miss something?

Yes.  write.table converts to a data frame. Try

x <- data.frame(m, check.names=FALSE)
write.table(x)

to give it a data frame in the first place.  The help says:

       x: the object to be written, typically a data frame.  If not, it
          is attempted to create one from it.

and the names get converted during that process to valid names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From detlef.steuer@unibw-hamburg.de  Wed Dec  6 09:55:52 2000
From: detlef.steuer@unibw-hamburg.de (detlef.steuer@unibw-hamburg.de)
Date: Wed, 06 Dec 2000 10:55:52 +0100 (CET)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <XFMail.001206105552.detlef.steuer@unibw-hamburg.de>

Hi Thorsten!

On 06-Dec-00 Torsten Hothorn wrote:
> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"

You can see write.table is the "bad guy" here, already giving incorrect
colnames. If you use write.table(as.data.frame(m)) everything is working fine.

cu
Detlef

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 10:05:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Dec 2000 11:05:32 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 09:23:32 +0000 (GMT)"
References: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>
Message-ID: <x2y9xtg903.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> and the names get converted during that process to valid names.
                                                     ^^^^^^^^^^^

Just to pick a nit: Could we make a habit of distinguishing between
"names" and "identifiers"? The latter being the syntactical term in
the R language, briefly the names that you don't need to use get() to
access. "123" and "Height in cm" are valid names, but not valid
identifiers.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Dec  6 10:13:31 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 10:13:31 +0000 (GMT)
Subject: [Rd] write.table
Message-ID: <200012061013.KAA02654@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 06 Dec 2000 11:05:32 +0100
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > and the names get converted during that process to valid names.
>                                                      ^^^^^^^^^^^
> 
> Just to pick a nit: Could we make a habit of distinguishing between
> "names" and "identifiers"? The latter being the syntactical term in
> the R language, briefly the names that you don't need to use get() to
> access. "123" and "Height in cm" are valid names, but not valid
> identifiers.

The argument is called `check.names', and has description

check.names: if `TRUE' then the names of the variables in the data
          frame are checked to ensure that they are valid variable
          names.  If necessary they are adjusted (by `make.names') so
          that they are.

So `make.names' should be renamed as `make.identifiers'.  That is
described as

make.names               package:base               R Documentation

Make Legal R Names Out of Strings

Description:

     Make legal R names out of every `names[i]' string. Invalid
     characters are translated to `"."'.


More plausibly, you are proposing a new distinction ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Dec  6 19:16:00 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 06 Dec 2000 11:16:00 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
Message-ID: <871yvlicnj.fsf@jeeves.blindglobe.net>

After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
anonymous CVS), I'm unable to get it to work, i.e.:

rossini 94 > /usr/local/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-12-06)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(nlme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
  undefined symbol: dqrdca_
Error in library(nlme) : .First.lib failed
> 

Thoughts?  Changes I should look for?  Or is it just broken?  I don't
see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
copies to verify corruption of my local copy of the archive), but...

rossini 95 > /usr/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(nlme)
Loading required package: nls 
> 

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 23:58:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 00:58:27 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
References: <200011280525.GAA06952@pubhealth.ku.dk>
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Wed Dec  6 23:56:56 2000
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Wed, 6 Dec 2000 18:56:56 -0500 (EST)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
References: <200012050026.BAA10701@pubhealth.ku.dk>
 <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
Message-ID: <14894.53832.544699.253589@flounder.stat.ufl.edu>


In message <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats> you write:
> On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:
> > 
> > This happens because of the line
> > 
> >   mf$drop.unused.levels <- TRUE
> > 
> > in lm and the lack of same in glm.  I'm reporting this as a bug, but
> > perhaps the difference is intentional?
> 
> No, as the glm code is not protected from user error as the lm code is. I
> am not sure it is bug (it's not documented to happen) and probably there
> are several related occurrences in other modelling functions, but it would
> be a desirable addition and I will change it for glm (at least).

Seeing the same topic come up on the Snews list prompted me to revisit
this. I will preface by admitting that it is not an big issue one way
or the other, since the "problem" is easy enough to work around
(although the poster on the Snews list apparently felt otherwise).

It is handy to fit a model to a data subset selected by the levels of
a factor z, and then to use the fit for prediction with new data which
of course does not include levels of z other than those used in the
fit (that's exactly what I was doing when I noticed the inconsistency
between lm and glm).

However, this is not always quite as easy as it might otherwise be
because:

1. lm (and now glm) removes the unused levels from the factor, and

2. predict.lm and predict.glm (or more precisely model.frame.default)
   check levels() for factors in newdata against those used in the
   fit,

3. as opposed to checking the levels ACTUALLY USED in the newdata.

Of course it is not difficult to remove the unused levels from the
factors in newdata, but it would be convenient if predict would do
this automatically, or at least if there was an option to do so.

So, am I missing something obvious, or would this be a good thing to
do?

-- 
Brett Presnell
Department of Statistics
University of Florida
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012070615.HAA29351@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 760 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 741 *
Subject: match() is not correct for "close numerics"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 21 Nov 2000 16:15:23 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 743 *
Subject: Re: [Rd] How do you construct a function from a list?
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 22 Nov 2000 12:57:19 GMT
* PR# 748 *
Subject: Problem with NAs using chisq.test()
From: kjetikj@astro.uio.no
Date: Sun, 26 Nov 2000 21:21:22 +0100 (MET)
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
* PR# 749 *
Subject: (NA || x) and (NA && y)  {another "bug" }
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 09:25:38 +0100
* PR# 753 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 752 *
Subject: non-centrality parameter in pf()
From: Jerome Asselin <jerome@stat.ubc.ca>
Date: Tue, 28 Nov 2000 11:43:06 -0800 (PST)
* PR# 755 *
Subject: bug in outer()
From: mvondavier@ets.org
Date: Fri, 1 Dec 2000 20:47:30 +0100 (MET)
* PR# 754 *
Subject: means in arima0
From: arto.luoma@uta.fi
Date: Thu, 30 Nov 2000 14:02:55 +0100 (MET)
* PR# 757 *
Subject: Bug in plot.formula
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 11:29:36 -0500 (EST)
* PR# 756 *
Subject: crash using bmp() on windows with Rdll2010
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Sun, 03 Dec 2000 23:19:58 +0100
* PR# 759 *
Subject: print buglet with small options(width = )
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 5 Dec 2000 19:34:57 +0100
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 13:22:25 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 14:22:25 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 10:13:31 +0000 (GMT)"
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk>
Message-ID: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > Just to pick a nit: Could we make a habit of distinguishing between
> > "names" and "identifiers"? The latter being the syntactical term in
> > the R language, briefly the names that you don't need to use get() to
> > access. "123" and "Height in cm" are valid names, but not valid
> > identifiers.
> 
> The argument is called `check.names', and has description
> 
> check.names: if `TRUE' then the names of the variables in the data
>           frame are checked to ensure that they are valid variable
>           names.  If necessary they are adjusted (by `make.names') so
>           that they are.
> 
> So `make.names' should be renamed as `make.identifiers'.  That is
> described as
> 
> make.names               package:base               R Documentation
> 
> Make Legal R Names Out of Strings
> 
> Description:
> 
>      Make legal R names out of every `names[i]' string. Invalid
>      characters are translated to `"."'.
> 
> 
> More plausibly, you are proposing a new distinction ....

Hmm. The current distinction would seem to be between "names" and
"legal R names" or "valid variable names", of which certainly the
latter is misleading since you can easily have variables with weird
names like "[<-". But you're probably right that we are to some extent
stuck with existing terminology, here and elsewhere. I think I would
want to push a convention of using "R names" for the syntactical
entities, then.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Dec  7 13:54:32 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 7 Dec 2000 08:54:32 -0500
Subject: [Rd] write.table
In-Reply-To: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Dec 07, 2000 at 02:22:25PM +0100
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <20001207085432.J25921@jimmy.harvard.edu>

If anyone does find the time to delve into the naming of columns, one
thing that would be pretty nice is if the I() operator was stripped. 
It, and possibly some other special operators, probably shouldn't be
propagate. They really are about handling rather than naming and this
causes some minor annoyances when complex objects are put into dataframes.
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Dec  7 14:23:02 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 7 Dec 2000 09:23:02 -0500 (EST)
Subject: [Rd] write.table
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <200012071423.JAA23196@jessie.research.bell-labs.com>

> Cc: p.dalgaard@biostat.ku.dk, r-devel@stat.math.ethz.ch
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 07 Dec 2000 14:22:25 +0100
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > Just to pick a nit: Could we make a habit of distinguishing between
> > > "names" and "identifiers"? The latter being the syntactical term in
> > > the R language, briefly the names that you don't need to use get() to
> > > access. "123" and "Height in cm" are valid names, but not valid
> > > identifiers.
> > 
> > The argument is called `check.names', and has description
> > 
> > check.names: if `TRUE' then the names of the variables in the data
> >           frame are checked to ensure that they are valid variable
> >           names.  If necessary they are adjusted (by `make.names') so
> >           that they are.
> > 
> > So `make.names' should be renamed as `make.identifiers'.  That is
> > described as
> > 
> > make.names               package:base               R Documentation
> > 
> > Make Legal R Names Out of Strings
> > 
> > Description:
> > 
> >      Make legal R names out of every `names[i]' string. Invalid
> >      characters are translated to `"."'.
> > 
> > 
> > More plausibly, you are proposing a new distinction ....
> 
> Hmm. The current distinction would seem to be between "names" and
> "legal R names" or "valid variable names", of which certainly the
> latter is misleading since you can easily have variables with weird
> names like "[<-". But you're probably right that we are to some extent
> stuck with existing terminology, here and elsewhere. I think I would
> want to push a convention of using "R names" for the syntactical
> entities, then.  
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

The original S language authors shoulder the blame here, if there
maybe was a way to make the distinctions clearer by choosing
terminology better.  Being stuck with a vague use of `name', let me
suggest something roughly as follows.

(By the way, should this be on the FAQ?  I didn't see it there.)

The term `name' is used in four different (but related) ways in the
language:

1.  A `syntactic name' is a string the parser interprets as this type
    of expression.  It consists of letters, numbers, and the dot
    character and starts with a letter or the dot.

2.  An `object name' is a string associated with an object that is
    assigned in an expression either by having the object name on the
    left of an assignment operation or as an argument to the `assign'
    function.  It is usually a syntactic name as well, but can be any
    non-empty string if it is quoted (and it's always quoted in the
    call to `assign').

3.  An `argument name' is what appears to the left of the equals sign
    when supplying an argument in a function call (for example,
    `f(trim=.5)').  Argument names are also usually syntactic names,
    but again can be anything if they are quoted.

4. A `file name' is a string identifying a file in the operating
   system for reading, writing, etc.  It really has nothing much to do
   with names in the language, but it's traditional to call these
   strings file `names'.

I'd slightly discourage using the term "R name" because there is
nothing really R-dependent here.

There are some more details one can mention, such as that
non-syntactic argument names are usually only going to be matched by
"..." since the parser requires syntactic names for formal arguments.
But such details probably will only confuse if put in the FAQ.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Dec  7 15:18:29 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Dec 2000 10:18:29 -0500
Subject: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A2FAA45.6CBA4942@bank-banque-canada.ca>

Peter

I noticed with the original problem that there was a difference between R 1.1.1
and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
since you get

>> polyeval(1:5,polyroot(1:5))
>[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
>[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

and with my snapshot I get
> polyeval(1:5,polyroot(1:5))
[1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
[3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i

I expect you probably know more about the change than I do, but though I would warn
you anyway.

Polynomial root solutions can be notoriously ill conditioned, but the problem in the
bug report does not seem too bad. (At least the answer does not change much  with
small coefficient perturbations.)  One of the things I noticed in the bug report
problem was that polyroot did not seem to be giving complex conjugate pairs.
(Although, perhaps I did not look closely enough.) In your example it is not too bad
but does starts to show up:

print(polyroot(11:1), digits=12)
 [1]  0.953246161338+0.725110449959i -0.884658051302+0.959966734829i
 [3] -0.884658773085-0.959966532398i  0.953246339786-0.725110604788i
 [5]  0.442765752789+1.173740513854i -1.264630746148+0.357262003979i
 [7] -0.246722911623-1.262885538489i  0.442765716343-1.173740954848i
 [9] -0.246722399601+1.262885188965i -1.264631088498-0.357261261065i
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Dec  7 15:52:59 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 7 Dec 2000 16:52:59 +0100 (MET)
Subject: [Rd] Minor error in ?read.table (PR#761)
Message-ID: <200012071552.QAA17553@pubhealth.ku.dk>

The parameters to read.table include "strip.write", but this is
documented as "skip.white" in the help file.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 16:33:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 17:33:22 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: Paul Gilbert's message of "Thu, 07 Dec 2000 10:18:29 -0500"
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk> <3A2FAA45.6CBA4942@bank-banque-canada.ca>
Message-ID: <x2lmts5gz1.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Peter
> 
> I noticed with the original problem that there was a difference between R 1.1.1
> and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
> since you get
> 
> >> polyeval(1:5,polyroot(1:5))
> >[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
> >[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
> 
> and with my snapshot I get
> > polyeval(1:5,polyroot(1:5))
> [1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
> [3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i
> 
> I expect you probably know more about the change than I do, but though I would warn
> you anyway.

Hm? With the current version, I'm still getting

>  polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
>

> version
         _                           
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    12                          
day      07                          
language R                           

However, my 1.1.1 is different:

> polyeval(1:5,polyroot(1:5))
[1] 1.110223e-16-3.669889e-16i 0.000000e+00-6.722053e-16i
[3] 0.000000e+00-5.759824e-16i 6.661338e-16-4.592409e-16i
> polyeval(1:10,polyroot(1:10))
[1] -2.815017e-08-3.472720e-09i -2.815014e-08-3.472730e-09i
[3]  3.468454e+04-3.084396e+04i  5.016033e+04-6.107187e+04i
[5]  2.728165e+04+3.719825e+04i -3.455245e+04-4.233822e+03i
[7] -9.016302e+04+5.754516e+04i -7.508538e+04-7.772126e+04i
[9]  3.560675e+04+6.973712e+04i
> polyeval(1:9,polyroot(1:9))
[1] 1.127987e-13+7.833802e-13i 1.130207e-13+7.832323e-13i
[3] 1.127987e-13+7.838768e-13i 1.117995e-13+7.844319e-13i
[5] 5.270229e-13+8.071365e-13i 2.582379e-13+7.174489e-13i
[7] 1.179057e-13+6.123224e-13i 1.865175e-13+6.731772e-13i


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Dec  7 18:38:51 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 7 Dec 2000 19:38:51 +0100
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: <871yvlicnj.fsf@jeeves.blindglobe.net>
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
Message-ID: <14895.55611.916434.302780@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
> anonymous CVS), I'm unable to get it to work, i.e.:

> rossini 94 > /usr/local/bin/R

> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-12-06)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.

> R is a collaborative project with many contributors.
> Type `contributors()' for more information.

> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.

>> library(nlme)
> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
>   undefined symbol: dqrdca_
> Error in library(nlme) : .First.lib failed
>> 

> Thoughts?  Changes I should look for?  Or is it just broken?  I don't
> see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
> copies to verify corruption of my local copy of the archive), but...

R 1.2.0 will need a new version of nlme which should be made available
shortly.

I assume you did not reinstall the version under 1.2.0?  :-)  Well this
would not even compile right now.  A quick fix I think is to copy files
S_compat.{c,h} from the 1.1.1 distribution to nlme/src, change
	#include <S_compat.h>
in S_compat.c to
	#include "S_compat.h"
and rebuild.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Dec  7 18:49:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 07 Dec 2000 10:49:09 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: Kurt Hornik's message of "Thu, 7 Dec 2000 19:38:51 +0100"
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
 <14895.55611.916434.302780@mithrandir.hornik.net>
Message-ID: <87lmtskqxm.fsf@jeeves.blindglobe.net>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

    KH> R 1.2.0 will need a new version of nlme which should be made
    KH> available shortly.

I have it, thanks VERY much to Doug, and it "appears" to be giving
reasonable results for our data.  I'll know a bit more by the end of
next week, since we'll be using it mixed with R 1.1.1 for exploratory
simulations (power sims, so we "know" the truth).

    KH> I assume you did not reinstall the version under 1.2.0?  :-)

I did reinstall, and it did compile.  There might be some left-over
files from the update.  I'll have to check if I'm removing
non-pertinent files on upgrade.

    KH> Well this would not even compile right now.  A quick fix I
    KH> think is to copy files S_compat.{c,h} from the 1.1.1
    KH> distribution to nlme/src, change #include <S_compat.h> in
    KH> S_compat.c to #include "S_compat.h" and rebuild.

For what it's worth:

I did the first, not the second (changing the include), and it still
didn't work (the quick fix).  I'll not try the second, unless the sims
barf in my face.

Thanks!

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec  7 19:48:05 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Dec 2000 13:48:05 -0600
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: rossini@blindglobe.net's message of "07 Dec 2000 10:49:09 -0800"
References: <871yvlicnj.fsf@jeeves.blindglobe.net> <14895.55611.916434.302780@mithrandir.hornik.net> <87lmtskqxm.fsf@jeeves.blindglobe.net>
Message-ID: <6rn1e8hv2i.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

>     KH> Well this would not even compile right now.  A quick fix I
>     KH> think is to copy files S_compat.{c,h} from the 1.1.1
>     KH> distribution to nlme/src, change #include <S_compat.h> in
>     KH> S_compat.c to #include "S_compat.h" and rebuild.
> 
> For what it's worth:
> 
> I did the first, not the second (changing the include), and it still
> didn't work (the quick fix).  I'll not try the second, unless the sims
> barf in my face.

You would need to do both.  There are some .Fortran calls in the R
sources that require one of the routines that used to be in S_compat.c

I am currently testing nlme_3.1-8.  It will be on CRAN by the time
R-1.2.0 is released.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spoon@hilbert.maths.utas.edu.au  Fri Dec  8 07:29:51 2000
From: spoon@hilbert.maths.utas.edu.au (spoon@hilbert.maths.utas.edu.au)
Date: Fri, 8 Dec 2000 08:29:51 +0100 (MET)
Subject: [Rd] nmath bug (PR#762)
Message-ID: <200012080729.IAA20144@pubhealth.ku.dk>

Hi,
	I've been playing with the standalone math library (R.1.1.1,
Redhat 7 i386), and have detected a problem with rpois.


Basically, the rejection step in rpois can result in an infinite loop.
The simplest thing I can come up with that reproduces the problem is
the following.


#include <stdio.h>
#include <math.h>
#include <time.h>

#define MATHLIB_STANDALONE
#include "Mathlib.h"

int main() {
  double d;

  set_seed(976259805U,2968367341U);

  for(long k=0; k<10; k++) {
    for(long k=0; k<10000; k++) d = rpois(4500);
    for(long k=0; k<250000; k++) d = rpois(100);
    printf(".");
    fflush(stdout);
  }
}

Fro me this prints 3 dots and then hangs.

I realize calling rpois with means this large is probably not the
wisest thing to do, nevertheless, I still consider the infinite loop
to be a bug, hence this report.

Sorry that I cannot give a simpler example than this, its taken me
quite a while to get this far, and as my debugging efforts were going
nowhere, I thought it better to throw it out to the wider community.

Simon




-- 
*****************************************************************
*  Simon Wotherspoon                               _--_|\       *
*  Maths Dept, University of Tasmania             /  Aus \      *
*  Tasmania, Australia                            \_.--._/      *
*  spoon@hilbert.maths.utas.edu.au                      v       *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec  8 10:38:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Dec 2000 11:38:29 +0100
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: spoon@hilbert.maths.utas.edu.au's message of "Fri, 8 Dec 2000 08:29:51 +0100 (MET)"
References: <200012080729.IAA20144@pubhealth.ku.dk>
Message-ID: <x23dfzp596.fsf@blueberry.kubism.ku.dk>

spoon@hilbert.maths.utas.edu.au writes:

> Hi,
> 	I've been playing with the standalone math library (R.1.1.1,
> Redhat 7 i386), and have detected a problem with rpois.
> 
> 
> Basically, the rejection step in rpois can result in an infinite loop.
> The simplest thing I can come up with that reproduces the problem is
> the following.

Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
that are known to affect rpois...

In order to get something that has a decent chance of working you
should probably use a *very* recent gcc from the rawhide distribution,
and try a snapshot of 1.2.0. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Dec  8 13:22:17 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 08 Dec 2000 14:22:17 +0100 (CET)
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: <x23dfzp596.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.001208142217.plummer@iarc.fr>

On 08-Dec-00 Peter Dalgaard BSA wrote:
> spoon@hilbert.maths.utas.edu.au writes:
> 
>> Hi,
>>      I've been playing with the standalone math library (R.1.1.1,
>> Redhat 7 i386), and have detected a problem with rpois.
>> 
>> 
>> Basically, the rejection step in rpois can result in an infinite loop.
>> The simplest thing I can come up with that reproduces the problem is
>> the following.
> 
> Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
> that are known to affect rpois...
> 
> In order to get something that has a decent chance of working you
> should probably use a *very* recent gcc from the rawhide distribution,
> and try a snapshot of 1.2.0.

To be precise, you will need gcc-2.96-65 from the rawhide distribution.
However, this does not seem to have been released yet: I just checked on
ftp.redhat.com and the latest release is -64.

For details see
http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=21423

Alternatively you can install gcc-2.95 (the latest *stable* compiler from
the gcc development team), which does not suffer from this bug.  If you want
to do this, look in the directory bin/linux/redhat/7.x/DIY/ on CRAN for
some tips.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Dec  8 23:47:24 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 08 Dec 2000 15:47:24 -0800
Subject: [Rd] LME and cat()
Message-ID: <87d7f2fpbn.fsf@jeeves.blindglobe.net>

(please keep sebastian cc'd)

Doug -

we are managing to trigger, both on R 1.1.1 and R 1.2.0 (proper
versions of NLME), the following:

>  warnings(model1)
Warning message:
Singular precision matrix in level -1, block 1 Error in cat(list(...), file, sep, fill, labels, append) : 
	argument 2 not yet handled by cat
> 

suggesting either an "inappropriate" use of cat(), or a problem with
how we are running lme().   Thoughts, suggestions?  We can provide
sample code to create this warning again, if needed.

(Estimates are still "looking right", but we'd like verification that
something's not broken...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec 11 07:34:58 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 11 Dec 2000 09:34:58 +0200
Subject: [Rd] Examples C++ to R
Message-ID: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello all=20

I am new to R and I wanted to know how I can call R functions from c/c++ =
and Java classes?

If you can be detailed in this answer I will be very glad.

Thank you
Regards,
Moshe

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello all </FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I am new to R and I wanted to know how =
I can call R=20
functions from c/c++ and Java classes?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>If you can be detailed in this answer I =
will be=20
very glad.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_003C_01C06355.A09C4620--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 11 08:05:45 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 11 Dec 2000 08:05:45 +0000 (GMT)
Subject: [Rd] Examples C++ to R
In-Reply-To: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>
Message-ID: <Pine.GSO.4.05.10012110801480.22103-100000@auk.stats>

On Mon, 11 Dec 2000, Moshe Recanati <moshe@i-impact.com> wrote:

> Hello all 
> 
> I am new to R and I wanted to know how I can call R functions from c/c++ and Java classes?
> 
> If you can be detailed in this answer I will be very glad.

If you can be detailed in the question, it would help!  Which OS, for
example?  Your message seemed to be in a Windows character set, so
I will guess Windows.  There is a DCOM interface on Windows, and if you
look on CRAN under Software->Other->Non-standard you will find the software
and examples.   Alternatively, the embedding interface that uses
is described, with examples, in src/gnuwin32/front-ends in the R
source distribution.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 11 12:51:23 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 11 Dec 2000 13:51:23 +0100 (MET)
Subject: [Rd] configure and f2c
Message-ID: <Pine.LNX.4.21.0012111347090.1405-100000@artemis.imbe.med.uni-erlangen.de>


In R-devel Dec 11 03:03, configure means (on SuSE 6.4):

checking for f2c... f2c
checking for f_open in -lf2c... no
checking for d_sin in -lF77... no
configure: warning: I found f2c but not libf2c, or libF77 and libI77

which worked fine for me with R-devel from Dec 6th. 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hanspeter_wuermli@swissre.com  Mon Dec 11 13:04:50 2000
From: hanspeter_wuermli@swissre.com (hanspeter_wuermli@swissre.com)
Date: Mon, 11 Dec 2000 14:04:50 +0100 (MET)
Subject: [Rd] Problem with DLL in Windows NT (PR#763)
Message-ID: <200012111304.OAA13836@pubhealth.ku.dk>

Full_Name: Hans Peter Wrmli
Version: 1.0.0 or latest
OS: NT4.0
Submission from: (NULL) (193.134.170.35)


I used R for some time and loading a library worked fine. I received a new PC a
few days ago and cannot remember whether I had used the program that doesn't
work anymore, because library "integrate" cannot be loaded. Since I installed
the latest version (1.1.1? the one copying files into rw1011) together with the
replacement R.dll, the error appeared. Going back to 1.0.0 doesn't help.

When I type: > require(integrate)

a error message popup window appears:

"Rgui.exe - Entry Point Not Found
The procedure entry point REAL could not be located in the dynamic link library
R.dll"

R error message:

"Loading required package: integrate 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"D:\data\WUH\R\rw1000/library/integrate/libs/integrate.dll":
  LoadLibrary failure"

I am grateful for help (but not desperate as I run Linux at home).

Hans Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Dec 11 14:20:47 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 11 Dec 2000 09:20:47 -0500 (EST)
Subject: [Rd] "S4"-style methods and classes in R
Message-ID: <200012111420.JAA00341@jessie.research.bell-labs.com>

A preliminary version of an R package for classes and methods is
available from the omegahat web site:

	  http://www.omegahat.org/RSMethods/index.html

Documentation and source for download are available from this page.

The goal is to support an API that would provide compatible facilities
for defining classes and methods in R and S-Plus.  For the moment, the
"API" is roughly taken from "Programming with Data", particularly
section 1.6.

A revised version of that section is available, from the web page
above, modified a bit for R use.

This is a preliminary version;  comments and suggestions on any aspect
would be much appreciated, before going more "public" with it.

The current version is all written in the S language, for
flexibility.  Key portions (method dispatch at the least) will be
implemented in C later on for efficiency.

Regards,
 John Chambers

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Dec 11 18:49:11 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 11 Dec 2000 10:49:11 -0800
Subject: [Rd] row.names, rownames; colnames, no col.names?
Message-ID: <87d7eyvlnc.fsf@jeeves.blindglobe.net>


There's a bit of a symmetry issue, which may or may not be important
(led to 15 seconds of confusion until I got my bearings straight): 

row.names, rownames; colnames, no col.names? 

I _NOW_ realize the difference between row.names and rownames, but
is there any reason not to have col.names for re-naming columns in a
data.frame? 

(if there is, I don't particular need to know it, but it might make a
nice FAQ).

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Mon Dec 11 23:15:37 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 12 Dec 2000 00:15:37 +0100 (MET)
Subject: [Rd] qqline (PR#764)
Message-ID: <200012112315.AAA19537@pubhealth.ku.dk>

I think qqline does not do exactly what it is advertised to do ("`qqline'
adds a line to a normal quantile-quantile plot which passes through the
first and third quartiles.").  Consider the graph:

tmp <- qnorm(ppoints(10))
qqnorm(tmp)
qqline(tmp)

The line (which I expected go through all the points), has a slightly
shallower slope than does the points plotted by qqnorm.  I think the
problem is that qqline bases its line on the relationship between the
quartiles in the data and the large sample expected quartiles for a normal
distribution; qqnorm bases its plot on the relationship between the
quantiles in the data and an approximation to the (finite-sample) expected
quantiles for a normal distribution.  In qqnorm, the x-coordinates of the
first and third quartiles of the data vector ('tmp' in this case) are not
qnorm(c(0.25,0.75)) (as qqline does), but rather something like
quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say "something like"
because it is exactly right when the quartiles fall on data points, and an
approximation otherwise.

The following definition for qqline reflects this point:

function (y, ...)
{
  y <- y[!is.na(y)]
  n <- length(y)
    y <- quantile(y, c(0.25, 0.75))
    x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    slope <- diff(y)/diff(x)
    int <- y[1] - slope * x[1]
    abline(int, slope, ...)
}

I'm not sure it makes very much of a difference, though, for looking at
real data, instead of something like expected quantiles.

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, package:MASS, package:logspline, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 11 22:25:34 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 11 Dec 2000 23:25:34 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <14901.21598.772009.161277@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 

> row.names, rownames; colnames, no col.names? 

> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 

> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Re col.names, certainly not for 1.2.0.

I am personally not a big fan of advertising row.names, as I think it is
too close to the rownames of the matrix interpretation of data frames.
This is why R has abstract functions case.names() and variable.names(),
which would be my preference.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 11 23:35:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Dec 2000 00:35:12 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: rossini@blindglobe.net's message of "11 Dec 2000 10:49:11 -0800"
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <x2wvd6r0pb.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 
> 
> row.names, rownames; colnames, no col.names? 
> 
> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 
> 
> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Well, plain names()<- will do fine, colnames()<- will as well. Data
frames have an attribute called "row.names", and hence it makes sense
to have an extractor function of the same name, but there is no
"col.names" attribute. (However, why we chose to have "rownames" and
"colnames" without dots escapes me for the moments. They go back to
before we had the data frame code, and I suspect it is mostly a
historical accident.) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Tue Dec 12 07:28:43 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Tue, 12 Dec 2000 08:28:43 +0100 (MET)
Subject: [Rd] r-sync down?
Message-ID: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>


torsten@www:/raid/home/torsten > ping rsync.r-project.org
PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
--- franz.stat.wisc.edu ping statistics ---
12 packets transmitted, 0 packets received, 100% packet loss


Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 08:28:39 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 09:28:39 +0100
Subject: [Rd] r-sync down?
In-Reply-To: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
References: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14901.57783.254413.981422@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> torsten@www:/raid/home/torsten > ping rsync.r-project.org
    Torsten> PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
    Torsten> --- franz.stat.wisc.edu ping statistics ---
    Torsten> 12 packets transmitted, 0 packets received, 100% packet loss

No, it's fine, it's there, it's just that
somewhere on the Wisconsin network  ping requests are "filtered":

(From a Linux machine): 

 lynne{maechler}438> ping rsync.r-project.org
 PING franz.stat.wisc.edu (128.105.174.95) from 129.132.58.30 : 56(84) bytes of data.
 From 144.92.128.166: Packet filtered
 From 144.92.128.166: Packet filtered

and traceroute subsequently reveals 
....
  17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  133.563 ms ...
  18  r-macc.net.wisc.edu (144.92.128.129)            121.881 ms ...
  19  144.92.128.166 (144.92.128.166)                 124.458 ms ...
  20  e2-1.foundry1.cs.wisc.edu (128.105.4.246)       124.151 ms ...
  21  franz.stat.wisc.edu (128.105.174.95)            124.922 ms ...

ie. "rsync.r-project.org" is there (it's franz..)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 14:24:56 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 15:24:56 +0100
Subject: [Rd] qqline (PR#764)
In-Reply-To: <200012112315.AAA19537@pubhealth.ku.dk>
References: <200012112315.AAA19537@pubhealth.ku.dk>
Message-ID: <14902.13624.652864.269495@gargle.gargle.HOWL>

>>>>> "Setzer" == Setzer Woodrow <Setzer.Woodrow@epamail.epa.gov> writes:

    Setzer> I think qqline does not do exactly what it is advertised to do
    Setzer> ("`qqline' adds a line to a normal quantile-quantile plot which
    Setzer> passes through the first and third quartiles.").  

yes, the above may not be clear enough.

    Setzer> Consider the graph:

    Setzer> tmp <- qnorm(ppoints(10))
    Setzer> qqnorm(tmp)
    Setzer> qqline(tmp)

    Setzer> The line (which I expected go through all the points), has a
    Setzer> slightly shallower slope than does the points plotted by
    Setzer> qqnorm.  I think the problem is that qqline bases its line on
    Setzer> the relationship between the quartiles in the data and the
    Setzer> large sample expected quartiles for a normal distribution;
    Setzer> qqnorm bases its plot on the relationship between the quantiles
    Setzer> in the data and an approximation to the (finite-sample)
    Setzer> expected quantiles for a normal distribution.  In qqnorm, the
    Setzer> x-coordinates of the first and third quartiles of the data
    Setzer> vector ('tmp' in this case) are not qnorm(c(0.25,0.75)) (as
    Setzer> qqline does), but rather something like
    Setzer> quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say
    Setzer> "something like" because it is exactly right when the quartiles
    Setzer> fall on data points, and an approximation otherwise.

good analysis!

    Setzer> The following definition for qqline reflects this point:

    Setzer> function (y, ...)
    Setzer> {
    Setzer> y <- y[!is.na(y)]
    Setzer> n <- length(y)
    Setzer> y <- quantile(y, c(0.25, 0.75))
    Setzer> x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    Setzer> slope <- diff(y)/diff(x)
    Setzer> int <- y[1] - slope * x[1]
    Setzer> abline(int, slope, ...)
    Setzer> }

    Setzer> I'm not sure it makes very much of a difference, though, for
    Setzer> looking at real data, instead of something like expected
    Setzer> quantiles.

The Development Version of R (R 1.2 in a few days) has

 function (y, ...) 
 {
     y <- quantile(y[!is.na(y)], c(0.25, 0.75))
     x <- qnorm(c(0.25, 0.75))
     slope <- diff(y)/diff(x)
     int <- y[1] - slope * x[1]
     abline(int, slope, ...)
 }

which I think *does* what you suggest it should do.

HOWEVER I was quite a bit astonished to see 
that the slope is still too small (for small sample sizes only).

 par(mfrow=c(2,2))
 for(n in 9:12){ x <- qnorm(ppoints(n));qqnorm(x,main=paste("n=",n));qqline(x) }

But I think we are now doing what Tukey defined in his EDA book(s)
and what the other S engines do as well.
 {as a matter of fact, R should also return the (int, slope) vector !}

Note that you can also play with the " a = " argument of ppoints,
it's not directly clear to me which value is "optimal" for the above purpose...

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Dec 12 20:35:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Dec 2000 14:35:34 -0600
Subject: [Rd] An SPSS save file for testing
Message-ID: <6rk8958jjd.fsf@franz.stat.wisc.edu>

Saikat DebRoy is working on a revised "foreign" package (currently in
the src/contrib/Devel area on CRAN) that will include the ability to
read the SPSS save format.  Since we don't use SPSS we don't have easy
access to a sample data set and have been using PSPP (see
http://pspp.stat.wisc.edu/) to generate test data.  It would be more
realistic to have a small, redistributable SPSS saved dataset if
someone would be willing to contribute same.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec 14 15:55:55 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Dec 2000 09:55:55 -0600
Subject: [Rd] An SPSS save file for testing
In-Reply-To: Douglas Bates's message of "12 Dec 2000 14:35:34 -0600"
References: <6rk8958jjd.fsf@franz.stat.wisc.edu>
Message-ID: <6rg0jr2e0k.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@cs.wisc.edu> writes:

> Saikat DebRoy is working on a revised "foreign" package (currently in
> the src/contrib/Devel area on CRAN) that will include the ability to
> read the SPSS save format.  Since we don't use SPSS we don't have easy
> access to a sample data set and have been using PSPP (see
> http://pspp.stat.wisc.edu/) to generate test data.  It would be more
> realistic to have a small, redistributable SPSS saved dataset if
> someone would be willing to contribute same.

Thanks to all those who volunteered to provide us with test data.  We
now have enough data sets for the tests.  The new foreign library has
been uploaded to CRAN.  If you use
 R CMD check foreign
it will run the specific tests in the test directory and check that it
can read the different formats.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:06:58 2000
From: viktorm@pdf.com (viktorm@pdf.com)
Date: Fri, 15 Dec 2000 00:06:58 +0100 (MET)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
Message-ID: <200012142306.AAA24559@pubhealth.ku.dk>

Full_Name: Viktor Moravetski
Version: Version 1.2.0 (2000-12-13)
OS: Win-NT 4.0 SP5
Submission from: (NULL) (209.128.81.199)


I've started R (v.1.20) with command:
rgui --vsize 450M --nsize 40M

Then at the command prompt:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6   41943040 1120
Vcells 3469306 26.5   58982400  450

>df <- data.frame(x=1:30000,y=2,z=3)
>merge(df,df)
Error: vector memory exhausted (limit reached?)


In S-Plus it worked fine, no problems. 
It looks like that "R" cannot merge dataframes with 
more than 30K rows. It has enough memory, so what limit 
was reached and what should I do?

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Dec 14 23:28:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Dec 2000 17:28:43 -0600
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: viktorm@pdf.com's message of "Fri, 15 Dec 2000 00:06:58 +0100 (MET)"
References: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>

>>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:

  viktorm> Full_Name: Viktor Moravetski
  viktorm> Version: Version 1.2.0 (2000-12-13)
  viktorm> OS: Win-NT 4.0 SP5
  viktorm> Submission from: (NULL) (209.128.81.199)


  viktorm> I've started R (v.1.20) with command:
  viktorm> rgui --vsize 450M --nsize 40M

  viktorm> Then at the command prompt:
  >> gc()
  viktorm>           used (Mb) gc trigger (Mb)
  viktorm> Ncells  358534  9.6   41943040 1120
  viktorm> Vcells 3469306 26.5   58982400  450

  >> df <- data.frame(x=1:30000,y=2,z=3)
  >> merge(df,df)
  viktorm> Error: vector memory exhausted (limit reached?)

Do you really need such a large number of Ncells ? I think not. Try
starting R without specifying --nsize (and maybe even --vsize). In
1.2.0, R would  automatically allocate more memory if the intial value
is not enough. But (as far as I know) it would not decrease the amount
of memory below the initial amount.

  viktorm> In S-Plus it worked fine, no problems. 
  viktorm> It looks like that "R" cannot merge dataframes with 
  viktorm> more than 30K rows. It has enough memory, so what limit 
  viktorm> was reached and what should I do?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:54:23 2000
From: viktorm@pdf.com (Viktor Moravetski)
Date: Thu, 14 Dec 2000 15:54:23 -0800
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>
Message-ID: <3A395DAF.C4262ADC@pdf.com>

Hi Saikat,
Yes, I don't need to specify nsize and vsize for version 1.2.0. 
But error is the same, even if start R with default parameters. 
It grows in memory and then gives an error. 
See output below:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6     597831 16.0
Vcells 3330352 25.5    3736477 28.6
> df <- data.frame(x=1:30000,y=2,z=3)
> merge(df,df)
Error: cannot allocate vector of size 3515625 Kb
> 


Saikat DebRoy wrote:
> 
> >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> 
>   viktorm> Full_Name: Viktor Moravetski
>   viktorm> Version: Version 1.2.0 (2000-12-13)
>   viktorm> OS: Win-NT 4.0 SP5
>   viktorm> Submission from: (NULL) (209.128.81.199)
> 
>   viktorm> I've started R (v.1.20) with command:
>   viktorm> rgui --vsize 450M --nsize 40M
> 
>   viktorm> Then at the command prompt:
>   >> gc()
>   viktorm>           used (Mb) gc trigger (Mb)
>   viktorm> Ncells  358534  9.6   41943040 1120
>   viktorm> Vcells 3469306 26.5   58982400  450
> 
>   >> df <- data.frame(x=1:30000,y=2,z=3)
>   >> merge(df,df)
>   viktorm> Error: vector memory exhausted (limit reached?)
> 
> Do you really need such a large number of Ncells ? I think not. Try
> starting R without specifying --nsize (and maybe even --vsize). In
> 1.2.0, R would  automatically allocate more memory if the intial value
> is not enough. But (as far as I know) it would not decrease the amount
> of memory below the initial amount.
> 
>   viktorm> In S-Plus it worked fine, no problems.
>   viktorm> It looks like that "R" cannot merge dataframes with
>   viktorm> more than 30K rows. It has enough memory, so what limit
>   viktorm> was reached and what should I do?

--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 00:10:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 01:10:53 +0100
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: Viktor Moravetski's message of "Thu, 14 Dec 2000 15:54:23 -0800"
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu> <3A395DAF.C4262ADC@pdf.com>
Message-ID: <x2wvd21r3m.fsf@blueberry.kubism.ku.dk>

Viktor Moravetski <viktorm@pdf.com> writes:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb

I think you're just experiencing the fact that the merge() function in
R is not implemented very efficiently (to say the least). For many
practical purposes, this can be worked around using e.g. match().

Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 00:05:17 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Dec 2000 16:05:17 -0800 (PST)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <3A395DAF.C4262ADC@pdf.com>
Message-ID: <Pine.GSO.4.21.0012141600080.7665-100000@atlas.biostat.washington.edu>

On Thu, 14 Dec 2000, Viktor Moravetski wrote:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb
					^^^^^^^^^^!!

This is the problem. A merge of n rows takes n^2 space, because each row
of the first data frame is compared to  each row of the second.  You are
trying to allocate 3.5Gb, which is almost certainly more memory than you
have. This is (30000^2)*4

	-thomas

	

> > 
> 
> 
> Saikat DebRoy wrote:
> > 
> > >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> > 
> >   viktorm> Full_Name: Viktor Moravetski
> >   viktorm> Version: Version 1.2.0 (2000-12-13)
> >   viktorm> OS: Win-NT 4.0 SP5
> >   viktorm> Submission from: (NULL) (209.128.81.199)
> > 
> >   viktorm> I've started R (v.1.20) with command:
> >   viktorm> rgui --vsize 450M --nsize 40M
> > 
> >   viktorm> Then at the command prompt:
> >   >> gc()
> >   viktorm>           used (Mb) gc trigger (Mb)
> >   viktorm> Ncells  358534  9.6   41943040 1120
> >   viktorm> Vcells 3469306 26.5   58982400  450
> > 
> >   >> df <- data.frame(x=1:30000,y=2,z=3)
> >   >> merge(df,df)
> >   viktorm> Error: vector memory exhausted (limit reached?)
> > 
> > Do you really need such a large number of Ncells ? I think not. Try
> > starting R without specifying --nsize (and maybe even --vsize). In
> > 1.2.0, R would  automatically allocate more memory if the intial value
> > is not enough. But (as far as I know) it would not decrease the amount
> > of memory below the initial amount.
> > 
> >   viktorm> In S-Plus it worked fine, no problems.
> >   viktorm> It looks like that "R" cannot merge dataframes with
> >   viktorm> more than 30K rows. It has enough memory, so what limit
> >   viktorm> was reached and what should I do?
> 
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 07:41:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 15 Dec 2000 07:41:05 +0000 (GMT)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012150730310.22653-100000@auk.stats>

On Fri, 15 Dec 2000 viktorm@pdf.com wrote:

> Full_Name: Viktor Moravetski
> Version: Version 1.2.0 (2000-12-13)
> OS: Win-NT 4.0 SP5
> Submission from: (NULL) (209.128.81.199)
> 
> 
> I've started R (v.1.20) with command:
> rgui --vsize 450M --nsize 40M

Um.  Whats `v.1.20' and where did you get that from?  In particular how did
you compile it and which run-time are you using? You clearly have not read
the documentation on the command-line flags for version 1.2.0, or even the
top item in NEWS.

> Then at the command prompt:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6   41943040 1120
> Vcells 3469306 26.5   58982400  450
> 
> >df <- data.frame(x=1:30000,y=2,z=3)
> >merge(df,df)
> Error: vector memory exhausted (limit reached?)
> 
> 
> In S-Plus it worked fine, no problems. 
> It looks like that "R" cannot merge dataframes with 
> more than 30K rows. It has enough memory, so what limit 
> was reached and what should I do?

How do you know it has enough memory: it has just told you it has not?
I think you are using an unreleased version and not reading the
documentation on the changes.  The CHANGES file says

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

and NEWS says (first item)

    o   There is a new memory management system using a generational
        garbage collector.  This improves performance, sometimes
        marginally but sometimes by double or more.  The workspace is
        no longer statically sized and both the vector heap and the
        number of nodes can grow as needed.  (They can shrink again,
        but never below the initially allocated sizes.)  See ?Memory
        for a longer description, including the new command-line
        options to manage the settings.


Beyond that, R's merge uses a flexible but memory-intensive algorithm. If
you want to do merges on this scale we recommend that you use one of the
RDBMS interfaces to a tool optimized for the job.


I really don't understand why you filed a bug report on your lack of
reading of documentation: please see the section on reporting bugs in the
FAQ.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Fri Dec 15 14:20:53 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Fri, 15 Dec 2000 14:20:53 -0000
Subject: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <080901c066a2$3be28550$0a00a8c0@bellview>

Hy you all,
Short version:
I think I have some code that could be interesting to make the R
architecture evolve towards better thread support, easier memory management,
better user interface programming (progress bar, logs), powerful debugging
without recompiling (hach!)

some years ago I start learning C with an ambitious project: write a C
library for multivariate data analysis.
On the route I learned C quite well and I discovered the power of scripting
languages nad finally the S language.

I wanted to write programs to perform routinely done exploratory data
analysis, using gnuplot as the graphic driver.

One of the my bigger concern has ever be memory management and reentrancy of
my code, possibly avoiding using OS support (such as thread local storage on
windows); I tried to allow for custom allocator in the library, supporting
ANSI functions as a ready option ...

I also have always used DOS (djgpp) and windows so I hated (and probably
strongly dislike) autoconf and the like: I tried to follow the advice not to
include to many #ifdef/#else/#endif in my code and to prefer to configure my
libraries at run-time.

Dealing with long calculations, I also wanted to make she/he let know where
the program is (it terms of time and or percentage achieved). I wanted to
deal with user cancellation requests and the rollback (free memory, close
files) associated with it.

Moreover I had to encapsulate logs, warning, errors and debugging
informations into specific interfaces so that my code could be used in
GUI-based application as well in console mode or in COM components (here
comes UNICODE!).

Now I have (thread safe, customizable: ALL, some UNICODE compatible):
- an interface to memory management, usable with multiple threads, allowing
to define and manipulate memory spaces (clean the space of the thread just
stopped by user request), with customizable allocators;
- an interface to debug information, based on Fred Fish DBUG library used in
mysql (it allows to trace the execution of the code, to print selected
information, ...);
- an mprintf function to format messages in malloc'ed string (I have tested
also the UNICODE version) stolen from mktclapp from www.hwaci.com; this
maybe similar to R_printf;
- interfaces to errors, warnings, and log messages, with customizable
callbacks to send the content of the massages every where you can send a
char * or a wchar_t *; I followed the discussion on error handling on the
gsl mailing list and tried to implement the ideas in
http://t8web.lanl.gov/people/jungman/except.pdf I found quite interesting;

I would like to help with this code, if considered interesting.

Best regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Fri Dec 15 15:12:06 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Fri, 15 Dec 2000 16:12:06 +0100 (MET)
Subject: [Rd] R1.2.0 (PR#766)
Message-ID: <200012151512.QAA08186@pubhealth.ku.dk>

Here are a few comments on the new release (1.2.0), most about R CMD
check. I have managed to install and check my libraries only making one
change to a C function (see point 1) and one to an R function because
of the way formulae now look for their data. That is the good news. Of
course, more extensive checks are liable to find further problems.

1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
not accessible to us mortals. Those few lines need to be moved into
one of the accessible header files.

3. Makefiles in pkg/src are no longer read properly. This creates a
big problem for me in library development.

3. DESCRIPTION has to have licence mis-spelled as license for the
check to work.

4. check produces unasked for tex output (that I would like to be able
to shut off) then an error that linktocpage is undefined.

5. check always produces an error message at the end:
Attempt to free unreferenced scalar during global destruction.
I am not sure if this is a reference to Chernobyl but I do not
understand it.

Other requests about the library check:
1. I would very much prefer that the check directory remain within the
library directory instead of parallel as pkg.Rcheck to avoid
proliferation of directories at that level.

2. Why can't check detect that the help pages are up-to-date
(i.e. from a previous check) instead of redoing them every time?
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 15 15:35:06 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 15 Dec 2000 16:35:06 +0100
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
References: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 15 Dec 2000 16:12:06 +0100 (MET),
>>>>> james lindsey (jl) wrote:

  > Here are a few comments on the new release (1.2.0), most about R CMD
  > check. I have managed to install and check my libraries only making one
  > change to a C function (see point 1) and one to an R function because
  > of the way formulae now look for their data. That is the good news. Of
  > course, more extensive checks are liable to find further problems.

  > 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
  > not accessible to us mortals. Those few lines need to be moved into
  > one of the accessible header files.

  > 3. Makefiles in pkg/src are no longer read properly. This creates a
  > big problem for me in library development.

what do you mean by ``not read properly''? if a makefile exists it
should be used, actually `R CMD check' only uses the Makefile during a
call to `R CMD INSTALL', so do you mean that INSTALL is broken (which
would be bad news indeed)?


  > 3. DESCRIPTION has to have licence mis-spelled as license for the
  > check to work.

hmm, that field had that name (with that spelling) for quite some time
now. I think things get complicated if we allow for different
spellings of variables for different observations (I basically build a
dataframe from all DESCRIPTION files) ... but I'll leave that for
native English speakers to decide.

  > 4. check produces unasked for tex output (that I would like to be able
  > to shut off) then an error that linktocpage is undefined.

option --no-latex supresses the latex part.


  > 5. check always produces an error message at the end:
  > Attempt to free unreferenced scalar during global destruction.
  > I am not sure if this is a reference to Chernobyl but I do not
  > understand it.

I get no error message: which version pf perl on which platform are
you using?

  > Other requests about the library check:
  > 1. I would very much prefer that the check directory remain within the
  > library directory instead of parallel as pkg.Rcheck to avoid
  > proliferation of directories at that level.

use option --outdir to change the default

  > 2. Why can't check detect that the help pages are up-to-date
  > (i.e. from a previous check) instead of redoing them every time?

use option --no-clean for not removing the old files.


the defaults are set to do ALL check FROM SCRATCH because that is the
safest thing to do (meaning you can trust the results and don't miss
any checks offered), but you can turn off most of the checks using
command line options.

hope this helps,
fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 15:37:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Dec 2000 15:37:06 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012151526050.9947-100000@toucan.stats>

On Fri, 15 Dec 2000 james.lindsey@luc.ac.be wrote:

> Here are a few comments on the new release (1.2.0), most about R CMD
> check. I have managed to install and check my libraries only making one
> change to a C function (see point 1) and one to an R function because
> of the way formulae now look for their data. That is the good news. Of
> course, more extensive checks are liable to find further problems.
> 
> 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
> not accessible to us mortals. Those few lines need to be moved into
> one of the accessible header files.

You could just use the calls that are documented, in R-exts, that is
F77_CALL and F77_NAME!  F77_SYMBOL has not been documented as
a user entry point since at least 1.0.0, and has never been part of the
API.  Only one of the 82 packages on CRAN was using it.

> 3. Makefiles in pkg/src are no longer read properly. This creates a
> big problem for me in library development.

Having Makefiles in packages causes users a lot of problems, but as far as
I know they still work (and so still break things as we found with
polymars last week).  Again, the preferred mechanisms have been in 
R-exts for a year or so.

> 3. DESCRIPTION has to have licence mis-spelled as license for the
> check to work.

Actually, as `License:'

> 4. check produces unasked for tex output (that I would like to be able
> to shut off) then an error that linktocpage is undefined.

It was asked for as it is a default option. Looks like your tex setup is
broken.

> 5. check always produces an error message at the end:
> Attempt to free unreferenced scalar during global destruction.
> I am not sure if this is a reference to Chernobyl but I do not
> understand it.

Is your Perl up to date?

> Other requests about the library check:
> 1. I would very much prefer that the check directory remain within the
> library directory instead of parallel as pkg.Rcheck to avoid
> proliferation of directories at that level.
> 
> 2. Why can't check detect that the help pages are up-to-date
> (i.e. from a previous check) instead of redoing them every time?

By default, it does a clean install.  You can use --no-clean,
documented as one of the options.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Dec 15 16:15:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Dec 2000 11:15:18 -0500
Subject: [Rd] R1.2.0 (PR#766)
References: <200012151512.QAA08186@pubhealth.ku.dk> <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
Message-ID: <3A3A4396.5AF55E95@bank-banque-canada.ca>

>... but I'll leave that for native English speakers to decide.

I think we would be better off to let a non-native English speaker decide. My Shorter
OED (possibly a special version for the colonies) gives both spelling. In french it
is Licence.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 16:54:51 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 17:54:51 +0100 (MET)
Subject: [Rd] R install doesn't set permissions (PR#767)
Message-ID: <200012151654.RAA09267@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 6.2/i386
Submission from: (NULL) (148.88.0.10)



Just did a straightforward ./configure/make/make install of R-1.2.0
and it seems that it doesn't set permissions on the R_HOME directory
properly (or at all!).

[root@chinstrap R-1.2.0]# make install
mkdir /usr/local/lib/R

 hence /usr/local/lib/R gets permissions from whatever root's 
default is - in my case rwx------, and users cant start R.

 Fix it after installation with:

 chmod -R 755 /usr/local/lib/R

 To fix the installer? Maybe use the install program from the 
fileutils package?

Baz


 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 18:12:30 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 19:12:30 +0100 (MET)
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
Message-ID: <200012151812.TAA09528@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 7.0/i386
Submission from: (NULL) (148.88.0.11)



Compiling R 1.2.0 from source on a RH7.0 machine I get:

../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
/root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
/root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'

 - it installed fine on another RH7.0 machine earlier, so I check the
glibc version, and sure enough, this one hasn't been updated. It was

glibc-2.1.92-14

 upgrading to:

glibc-2.2-5

 using the Redhat 'up2date' utility, has fixed it.

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 18:50:29 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 15 Dec 2000 19:50:29 +0100 (MET)
Subject: [Rd] fourfoldplot (PR#769)
Message-ID: <200012151850.TAA09617@pubhealth.ku.dk>


Two bugs:

1() a single 2x2 matrix without dimnames won't plot

> b<-matrix(c(1,1,1,1),2) 
> fourfoldplot(b)
Error in array(x, dim = c(dim(x), 1), dimnames = c(dimnames(x),
list(Strata = NULL))) : 
        length of dimnames must match that of dims
> dimnames(b)<-list(c("a","b"),c("c","d"))
> fourfoldplot(b)
>

(2) conf.level breaks if there are zeroes (unless conf.level=0)

> b[1,1]<-0
> fourfoldplot(b)
Error in if (any(f == 0)) f <- f + 10^(-6) : 
        missing value where logical needed
> fourfoldplot(b,conf.level=0)
>



> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    3.0                         
year     2000                        
month    12                          
day      15                          
language R                           


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 20:07:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 21:07:19 +0100
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
In-Reply-To: B.Rowlingson@lancaster.ac.uk's message of "Fri, 15 Dec 2000 19:12:30 +0100 (MET)"
References: <200012151812.TAA09528@pubhealth.ku.dk>
Message-ID: <x2k891ih3c.fsf@blueberry.kubism.ku.dk>

B.Rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.2.0
> OS: Redhat 7.0/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> 
> Compiling R 1.2.0 from source on a RH7.0 machine I get:
> 
> ../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
> /root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
> /root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'
> 
>  - it installed fine on another RH7.0 machine earlier, so I check the
> glibc version, and sure enough, this one hasn't been updated. It was
> 
> glibc-2.1.92-14
> 
>  upgrading to:
> 
> glibc-2.2-5
> 
>  using the Redhat 'up2date' utility, has fixed it.
> 
> Baz
> 

Be careful!! Stock RH7.0 is unsupported because of the compiler
situation. You should get gcc-2.96-65 or later from the Rawhide
distribution or you will build an R that doesn't pass the regression
tests, and has at least one serious bug in random number generation.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Dec 16 19:03:09 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 16 Dec 2000 20:03:09 +0100 (MET)
Subject: [Rd] two minor 1.2.0 install problems (PR#770)
Message-ID: <200012161903.UAA11860@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


two minor problems building R-1.2.0 under linuxppc.  neither of these two
problems
is difficult to get around, but they do make the build/install process fail:

1) when making DVI or PDF manuals, doc/manual/refman.tex tries to input
base-pkg.tex
at line 43.  this file does not exist in the R tree and is not part of tetex 
(at least not tetex-1.0.6).


2) after "make R" (or during "make all"), both "make docs" and "make test" refer
to
bin/Rcmd, a script which which sets up

   R_CMD="${R_HOME}/bin/Rcmd"

unfortunately, with R-1.1.1 installed, R_HOME points to the installed 1.1.1 bin
directory, and 1.1.1 does not have Rcmd.  so a reinstall of 1.2.0 will work,
but
an upgrade from 1.1.1 will fail (as will a new install, i think).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Sun Dec 17 08:12:25 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Sun, 17 Dec 2000 10:12:25 +0200
Subject: [Rd] Example of calling R from Java
Message-ID: <00a901c06801$170455f0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello,

I downloaded the R for Java interface. I read about calling R =
scripts/methods from java, but I can't find any detailed example about =
this.

I need an example of how to use this.

For example how to load data object (i.e. of colt) to r , run anova =
function and get the results - all from java!!!

Thank you very very much
Regards,
Moshe
i-impact

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I downloaded the R for Java interface. =
I read about=20
calling R scripts/methods from java, but I can't find any detailed =
example about=20
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I need an example of how to use =
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>For example how to load data object =
(i.e. of colt)=20
to r&nbsp;, run anova function and get the results - all from=20
java!!!</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>i-impact</FONT></DIV></BODY></HTML>

------=_NextPart_000_00A6_01C06811.DA794FD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Mon Dec 18 08:27:58 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Mon, 18 Dec 2000 09:27:58 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012180827.JAA16557@pubhealth.ku.dk>

R1.2.0 with Linux RH5.2

I do not believe that the problems below are new to 1.2 but I only
cover this sort of thing once a year in my course and some of that
happened to be last Friday so too late to report for 1.2. I see that
one or two things that I was going to report have been corrected.
I like the fact that interactions now show : instead of .

Here is some output with comments inserted.


R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Notice contrasts for below:

> options(contrasts=c("contr.treatment","contr.poly"))
> data <- read.table("tmp.dat",skip=6,head=T)
> data
   Freq Reg66 Reg71
1   118    CC    CC
2    14    LY    CC
3     8    WM    CC
4    12    GL    CC
5    12    CC    LY
6  2127    LY    LY
7    69    WM    LY
8   110    GL    LY
9     7    CC    WM
10   86    LY    WM
11 2548    WM    WM
12   88    GL    WM
13   23    CC    GL
14  130    LY    GL
15  107    WM    GL
16 7712    GL    GL
> attach(data)
> wt <- codes(Reg66)!=codes(Reg71)
> print(z <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(z2 <- glm(Freq~Reg66+Reg71,family=poisson,weight=wt))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson, weights = wt) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.4615       2.1242       2.0096       1.7236       2.4555       2.0847  
    Reg71WM  
     1.9140  

Degrees of Freedom: 11 Total (i.e. Null);  5 Residual
Null Deviance:	    486.2 
Residual Deviance: 4.367 	AIC: 82.7 
> z2$fit
          1           2           3           4           5           6 
 118.100000   11.836037    8.891541   13.272421   12.758205 2127.100000 
          7           8           9          10          11          12 
  71.505458  106.736339   10.756661   80.252100 2548.100000   89.991240 
         13          14          15          16 
  18.485138  137.911862  103.603001 7712.100000 

First problem: with diagonal values weighted out in a transition
matrix (mover-stayer model), glm wrongly estimates the diagonals to be
the observed plus 0.1. This was correct in 90.1 a year ago but already
wrong in 1.0.1. I don't have any versions in between installed.

> # correct values from GLIM4
> #   unit   observed    fitted   residual
> #     (1)       118     1.586      0.000
> #      2         14    11.836      0.629
> #      3          8     8.892     -0.299
> #      4         12    13.272     -0.349
> #      5         12    12.758     -0.212
> #     (6)      2127    95.185      0.000
> #      7         69    71.505     -0.296
> #      8        110   106.736      0.316
> #      9          7    10.757     -1.145
> #     10         86    80.252      0.642
> #    (11)      2548    60.287      0.000
> #     12         88    89.991     -0.210
> #     13         23    18.485      1.050
> #     14        130   137.912     -0.674
> #     15        107   103.603      0.334
> #    (16)      7712   154.648      0.000
> # and from R90.1 (wrong in R1.0.1)
> #> z2$fit
> #         1          2          3          4          5          6          7 
> #  1.586454  11.836037   8.891541  13.272421  12.758205  95.184992  71.505458 
> #         8          9         10         11         12         13         14 
> #106.736339  10.756661  80.252100  60.287479  89.991240  18.485138 137.911862 
> #        15         16 
> #103.603001 154.648406 
> 

Second problem: the man page for factors states that the levels are
sorted, but gl does not do this. It keeps them in the order of the
labels. This is inconsistent with everything else, confusing for
students, and liable to induce errors in data analysis. In the example
below, it is not too important because the baseline category is the
same in the two cases but that will not generally be the case.

As an addition comment, I would strongly recommend that, if labels can
be coerced to numeric, they be ordered, not sorted. This is because
the order is very confusing if there are more than 9: for example, the
sorted 10 comes near the beginning and not at the end.

> reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(za <- glm(Freq~reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
     0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 

Third problem: if mean value contrasts are used, the level names are
not attached to the variable name, but simply the number of the
category. This rightly drives students mad and is simply
uninterpretable if the levels have been sorted. It takes a great deal
of extreme care to try to find out to what the numbers refer.

> options(contrasts=c("contr.sum","contr.poly"))
> 
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(zb <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)       Reg661       Reg662       Reg663       Reg711       Reg712  
     5.3638      -2.3575       1.5448       0.3325      -2.3930       1.5667  
     Reg713  
     0.3315  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> 

Additional comment: I recommend that the aic functions for poisson and
binomial have the explicit calculation of the log density replaced by
the corresponding d function with the log option. This will avoid the
production of NAs in certain cases of zeroes in tables.
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec 18 10:12:55 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 18 Dec 2000 10:12:55 -0000
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <005701c068db$17287db0$0a00a8c0@bellview>

Well, I think the better solution would be to put them on the web: I tried
to open two web pages but I forget the possword every time :-(.

I see 2 quick solutions:
- send the files via e-mail
- put the files on CRAN (where?);
However I can do these in 2-3 days only (I have sources home).

Regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Luke Tierney <luke@muskrat.stat.umn.edu>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Data: venerd 15 dicembre 2000 19.25
Oggetto: Re: [Rd] Some libraries and ideas for a 'librarified' R


>Sounds interesting.  Is the code available to look at?
>
>Thanks
>
>luke
>
>Federico Spinazzi wrote:


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 18 11:06:36 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Dec 2000 12:06:36 +0100
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
In-Reply-To: <005701c068db$17287db0$0a00a8c0@bellview>
References: <005701c068db$17287db0$0a00a8c0@bellview>
Message-ID: <14909.61372.915270.684729@mithrandir.hornik.net>

>>>>> Federico Spinazzi writes:

> Well, I think the better solution would be to put them on the web: I
> tried to open two web pages but I forget the possword every time :-(.

> I see 2 quick solutions:
> - send the files via e-mail
> - put the files on CRAN (where?);

See the FAQ:

   To "submit" to CRAN, simply upload to
`ftp://cran.r-project.org/incoming/' and send an email to
<wwwadmin@cran.r-project.org>.

     *Note:*  It is very important that you indicate the copyright
     (license) information (GPL, BSD, Artistic, ...)  in your
     submission.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Dec 18 11:08:32 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 18 Dec 2000 12:08:32 +0100
Subject: [Rd] 2nd Int. Workshop on Distributed Statistical Computing
Message-ID: <14909.61488.264699.820497@celeborn.at>


DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universitt Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  Robert Gentleman		Harvard University
  Stefano Iacus			Universit degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Torsten Hothorn		Universitt Erlangen
  Kurt Hornik			Technische Universitt Wien  
  Timothy Keitt			State University of New York, Stony Brook
  Friedrich Leisch		Technische Universitt Wien
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mchler		ETH Zurich
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universitt Wien
  Brian Ripley			University of Oxford
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Mon Dec 18 12:46:04 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181246.NAA21203@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: R-1.2.0
OS: RH7/i386
Submission from: (NULL) (148.88.0.11)


demo(is.things) fails with:

> is.ALL(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"
In addition: Warning message: 
is.nan() applied to non-(list or vector) in: fn(obj) 

 - this seems to be because it is calling:

> is.na.POSIXlt(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"

 is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
NULL's in the documentation for the POSIX{l,c}t functions. It seems that
errors in these functions cause 'stop()' calls rather than returning NA's.

Barry



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec 18 13:38:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 18 Dec 2000 13:38:04 +0000 (GMT)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181338.NAA13654@toucan.stats.ox.ac.uk>


> From: B.Rowlingson@lancaster.ac.uk
> Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] demo(is.things) fails (PR#772)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Barry Rowlingson
> Version: R-1.2.0
> OS: RH7/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> demo(is.things) fails with:
> 
> > is.ALL(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> In addition: Warning message: 
> is.nan() applied to non-(list or vector) in: fn(obj) 
> 
>  - this seems to be because it is calling:
> 
> > is.na.POSIXlt(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> 
>  is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
> NULL's in the documentation for the POSIX{l,c}t functions. It seems that
> errors in these functions cause 'stop()' calls rather than returning NA's.

That's a *method* for is.na which should not be called directly by users.
It should only be called with an argument inheriting from class POSIXlt.

I have no idea why anyone wrote a demo to call methods directly, but after
four years it looks like it needs updating.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 15:06:59 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 18 Dec 2000 16:06:59 +0100 (MET)
Subject: [Rd] INSTALL should have info on make check (PR#773)
Message-ID: <200012181506.QAA23575@pubhealth.ku.dk>

B.Rowlingson@lancaster.ac.uk drew my attention to the fact that INSTALL
has no information that it might be a good idea to run "make check"
and that it might be a bad sign to have it fail. (Filing as bug report
to prevent us forgetting this indefinitely...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 15:45:59 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Dec 2000 10:45:59 -0500
Subject: [Rd] 1.2.0 segfault
Message-ID: <3A3E3136.C34407@bank-banque-canada.ca>

I'm a novice with gdb but the following is the result of a segfault problem I've been
having with 1.2.0.  If there is something else I should do to get more useful
information at this point, then someone please let me know.

Paul Gilbert
______

[5] /home/mfa5/gilp/zzot : R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa/gilp/R/bin/R.bin

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(curve)
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) dsecurvature.function.testsA()
Undefined command: "dsecurvature".  Try "help".
(gdb) continue
Continuing.

> dsecurvature.function.testsA()
Random number generator tests ...ok
DSE curvature test A 1 ... completed
DSE curvature test A 2 ...
Program received signal SIGSEGV, Segmentation fault.
0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
1551      CLASS_GET_FREE_NODE(node_class, s);
(gdb) bactrace
Undefined command: "bactrace".  Try "help".
(gdb) backtrace
#0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
#1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
#2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
#3  0x55518 in Rf_duplicate (s=0xc63468) at duplicate.c:133
#4  0x5b958 in do_set (call=0xb72804, op=0x1c6304, args=0xb727cc, rho=0x499a38)
    at eval.c:1012
#5  0x5a114 in Rf_eval (e=0xb72804, rho=0x499a38) at eval.c:317
#6  0x5b300 in do_begin (call=0xb739ac, op=0x1c6294, args=0xb72820,
    rho=0x499a38) at eval.c:803
#7  0x5a114 in Rf_eval (e=0xb739ac, rho=0x499a38) at eval.c:317
#8  0x5a730 in Rf_applyClosure (call=0x49a264, op=0x904f24, arglist=0x4bb21c,
    rho=0x4bb3c0, suppliedenv=0x49a210) at eval.c:501
#9  0x7d770 in applyMethod (call=0x49a264, op=0x904f24, args=0x4bb21c,
    rho=0x4bb3c0, newrho=0x49a210) at objects.c:117
#10 0x7dbd4 in Rf_usemethod (generic=0xefffbdc8 "l", obj=0xbd11a4,
    call=0xb73e20, args=0x160000, rho=0x4bb3c0, ans=0xefffbdc4)
    at objects.c:252
#11 0x7dea4 in do_usemethod (call=0xb6a258, op=0x1d3774, args=0xb6a274,
    env=0x4bb3c0) at objects.c:325
#12 0x5a114 in Rf_eval (e=0xb6a258, rho=0x4bb3c0) at eval.c:317
#13 0x5a730 in Rf_applyClosure (call=0xa21d14, op=0x907a14, arglist=0x4bb21c,
    rho=0x4bb078, suppliedenv=0x1b5300) at eval.c:501
#14 0x5a340 in Rf_eval (e=0xa21d14, rho=0x4bb078) at eval.c:352
#15 0x5bba4 in Rf_evalList (el=0xa21c50, rho=0x4bb078) at eval.c:1087
#16 0x5a244 in Rf_eval (e=0xa21c34, rho=0x4bb078) at eval.c:338
#17 0x5c58c in Rf_DispatchOrEval (call=0xa21ba8, generic=0x10cca0 "c",
    args=0xa21bc4, rho=0x4bb078, ans=0xefffc3c4, dropmissing=1) at eval.c:1386
#18 0x2f144 in do_c (call=0xa21ba8, op=0x1c8168, args=0xa21bc4, env=0x4bb078)
    at bind.c:538
#19 0x5a114 in Rf_eval (e=0xa21ba8, rho=0x4bb078) at eval.c:317
#20 0x5b300 in do_begin (call=0xa21b8c, op=0x1c6294, args=0xa21b70,
    rho=0x4bb078) at eval.c:803
#21 0x5a114 in Rf_eval (e=0xa21b8c, rho=0x4bb078) at eval.c:317
---Type <return> to continue, or q <return> to quit---
#22 0x5a730 in Rf_applyClosure (call=0x4bbc94, op=0x2d32e0, arglist=0x4bbd04,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#23 0x5a340 in Rf_eval (e=0x4bbc94, rho=0x2d36ec) at eval.c:352
#24 0x38940 in do_docall (call=0x4bbc94, op=0x3, args=0xbcd8b4, rho=0x4bc678)
    at coerce.c:1692
#25 0x7d32c in do_internal (call=0x17f5f0, op=0x1cd010, args=0x4bc6b0,
    env=0x4bc678) at names.c:925
#26 0x5a114 in Rf_eval (e=0x1e488c, rho=0x4bc678) at eval.c:317
#27 0x5a730 in Rf_applyClosure (call=0x9d1c5c, op=0x1e47ac, arglist=0x4bd41c,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#28 0x5a340 in Rf_eval (e=0x9d1c5c, rho=0x2d36ec) at eval.c:352
#29 0x5bba4 in Rf_evalList (el=0x9d1c40, rho=0x2d36ec) at eval.c:1087
#30 0x5a244 in Rf_eval (e=0x9d1c08, rho=0x2d36ec) at eval.c:338
#31 0x5bba4 in Rf_evalList (el=0x9d1bec, rho=0x2d36ec) at eval.c:1087
#32 0x5a244 in Rf_eval (e=0x9d1bd0, rho=0x2d36ec) at eval.c:338
#33 0x5bba4 in Rf_evalList (el=0x9d1a64, rho=0x2d36ec) at eval.c:1087
#34 0x5a244 in Rf_eval (e=0x9d1a48, rho=0x2d36ec) at eval.c:338
#35 0x5b5dc in applydefine (call=0x9d19f4, op=0x1c6304, args=0x9d1a10,
    rho=0x2d36ec) at eval.c:924
#36 0x5ba68 in do_set (call=0x9d19f4, op=0x1c6304, args=0x9d1a10, rho=0x2d36ec)
    at eval.c:1041
#37 0x5a114 in Rf_eval (e=0x9d19f4, rho=0x2d36ec) at eval.c:317
#38 0x5b300 in do_begin (call=0x9d1644, op=0x1c6294, args=0x9d19d8,
    rho=0x2d36ec) at eval.c:803
#39 0x5a114 in Rf_eval (e=0x9d1644, rho=0x2d36ec) at eval.c:317
#40 0x5ae3c in do_for (call=0x9d194c, op=0x1b4cc4, args=0x9d1968, rho=0x2d36ec)
    at eval.c:678
#41 0x5a114 in Rf_eval (e=0x9d194c, rho=0x2d36ec) at eval.c:317
#42 0x5b300 in do_begin (call=0x9d1820, op=0x1c6294, args=0x9d1930,
    rho=0x2d36ec) at eval.c:803
#43 0x5a114 in Rf_eval (e=0x9d1820, rho=0x2d36ec) at eval.c:317
#44 0x5ae3c in do_for (call=0x9d277c, op=0x1b4cc4, args=0x9d2798, rho=0x2d36ec)
    at eval.c:678
---Type <return> to continue, or q <return> to quit---
#45 0x5a114 in Rf_eval (e=0x9d277c, rho=0x2d36ec) at eval.c:317
#46 0x5b300 in do_begin (call=0x9d0464, op=0x1c6294, args=0x9d2760,
    rho=0x2d36ec) at eval.c:803
#47 0x5a114 in Rf_eval (e=0x9d0464, rho=0x2d36ec) at eval.c:317
#48 0x5a730 in Rf_applyClosure (call=0xa224b4, op=0x9b6598, arglist=0x2d33c0,
    rho=0x2d3ad4, suppliedenv=0x1b5300) at eval.c:501
#49 0x5a340 in Rf_eval (e=0xa224b4, rho=0x2d3ad4) at eval.c:352
#50 0x5b300 in do_begin (call=0xa21a74, op=0x1c6294, args=0xa22498,
    rho=0x2d3ad4) at eval.c:803
#51 0x5a114 in Rf_eval (e=0xa21a74, rho=0x2d3ad4) at eval.c:317
#52 0x5aa28 in do_if (call=0xa22428, op=0x1b4d6c, args=0xa22444, rho=0x2d3ad4)
    at eval.c:591
#53 0x5a114 in Rf_eval (e=0xa22428, rho=0x2d3ad4) at eval.c:317
#54 0x5b300 in do_begin (call=0xa2240c, op=0x1c6294, args=0xa223f0,
    rho=0x2d3ad4) at eval.c:803
#55 0x5a114 in Rf_eval (e=0xa2240c, rho=0x2d3ad4) at eval.c:317
#56 0x5a730 in Rf_applyClosure (call=0x2d38c0, op=0xa5d2a8, arglist=0x2d4488,
    rho=0x2d4728, suppliedenv=0x2d4808) at eval.c:501
#57 0x7d770 in applyMethod (call=0x2d38c0, op=0xa5d2a8, args=0x2d4488,
    rho=0x2d4728, newrho=0x2d4808) at objects.c:117
#58 0x7dbd4 in Rf_usemethod (generic=0xefffe3b0 "span", obj=0xd13c00,
    call=0xa20878, args=0x160000, rho=0x2d4728, ans=0xefffe3ac)
    at objects.c:252
#59 0x7dea4 in do_usemethod (call=0x9d06cc, op=0x1d3774, args=0x9d06e8,
    env=0x2d4728) at objects.c:325
#60 0x5a114 in Rf_eval (e=0x9d06cc, rho=0x2d4728) at eval.c:317
#61 0x5a730 in Rf_applyClosure (call=0xa29e28, op=0x9b67e4, arglist=0x2d4488,
    rho=0x694704, suppliedenv=0x1b5300) at eval.c:501
#62 0x5a340 in Rf_eval (e=0xa29e28, rho=0x694704) at eval.c:352
#63 0x5b934 in do_set (call=0xa29dd4, op=0x1c6304, args=0xa29df0, rho=0x694704)
    at eval.c:1008
#64 0x5a114 in Rf_eval (e=0xa29dd4, rho=0x694704) at eval.c:317
#65 0x5b300 in do_begin (call=0xa23464, op=0x1c6294, args=0xa29db8,
---Type <return> to continue, or q <return> to quit---
    rho=0x694704) at eval.c:803
#66 0x5a114 in Rf_eval (e=0xa23464, rho=0x694704) at eval.c:317
#67 0x5a730 in Rf_applyClosure (call=0x694544, op=0xa5ce10, arglist=0x1b5300,
    rho=0x1d42a8, suppliedenv=0x1b5300) at eval.c:501
#68 0x5a340 in Rf_eval (e=0x694544, rho=0x1d42a8) at eval.c:352
#69 0x7166c in R_ReplConsole (rho=0x1d42a8, savestack=0, browselevel=0)
    at main.c:187
#70 0x71dd0 in run_Rmainloop () at main.c:485
#71 0x71e14 in Rf_mainloop () at main.c:499
#72 0xc8e74 in main (ac=0, av=0xeffff1c4) at system.c:88
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 16:14:53 2000
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Mon, 18 Dec 2000 17:14:53 +0100 (MET)
Subject: [Rd] \item{x}<cr>{description of x} (PR#774)
Message-ID: <200012181614.RAA24226@pubhealth.ku.dk>

Under \arguments in help files if I use

\item{x}
{description of x}

rather than

\item{x}{description of x}

as I am suppose to do, then the "description of x" is quietly omitted. It would be
nice to allow this syntax or at least give an error or warning.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 16:37:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Dec 2000 17:37:02 +0100
Subject: [Rd] 1.2.0 segfault
In-Reply-To: Paul Gilbert's message of "Mon, 18 Dec 2000 10:45:59 -0500"
References: <3A3E3136.C34407@bank-banque-canada.ca>
Message-ID: <x2wvcxofdd.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm a novice with gdb but the following is the result of a segfault problem I've been
> having with 1.2.0.  If there is something else I should do to get more useful
> information at this point, then someone please let me know.

This kind of stuff is usually caused by memory protection errors. Two
things you can do:

 - insert a call to gctorture() close to the point of the crash. This
   will often make the crash occur closer to the point of the actual
   error.

 - Compile R (I'm afraid you have to recompile the entire thing)
   configured with the --enable-strict-barrier flag

Apart from that, you can of course try tracing the origins of the
error with gdb, e.g.

 - which variable had bogus contents?
 - when was the last time something wrote to that memory location?
 - etc...

It does get a bit excessive if I try to explain all that, though...

> > library(curve) 
Loading required package: dse1 
Loading required package: syskern 
Loading required package: tframe 
Program received signal SIGWINCH, Window size changed. 
0xef5b7400 in poll () (gdb)

> dsecurvature.function.testsA() 
Undefined command: "dsecurvature". Try "help". 
(gdb) continue Continuing.
> 
> > dsecurvature.function.testsA()
> Random number generator tests ...ok
> DSE curvature test A 1 ... completed
> DSE curvature test A 2 ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> 1551      CLASS_GET_FREE_NODE(node_class, s);
> (gdb) bactrace
> Undefined command: "bactrace".  Try "help".
> (gdb) backtrace
> #0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> #1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
> #2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 17:43:37 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 18:43:37 +0100 (MET)
Subject: [Rd] Help: StatXact
Message-ID: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>


Help needed!

Has anyone access to StatXact? I just hacked exact two-sided p-values for
rank tests (for package exactDistr, which will move to CRAN/contrib as
exactRankTests soon ;-) and would like to compare the results of my
implementation to that of StatXact. Could someone please calculate the
exact one-sided (both greater and less) and two-sided p-values?

# Data from the StatXact-4 manual, page 221
treat <- c(94, 108, 110, 90)
contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)

My results: 

> wilcox.exact(x,y)

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.8963 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(x,y, alternative="l")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.5656 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(x,y, alternative="g")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.4636 
alternative hypothesis: true mu is greater than 0 


Thanks!

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Dec 18 17:53:53 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Dec 2000 18:53:53 +0100
Subject: [Rd] Latest/last beta of R 1.1.1 for MacOS (rel Dec 10 2000)
Message-ID: <a05001905b663fcabe859@[159.149.74.61]>

Dear R&Mac developers(users),

at

http://www.eco-dip.unimi.it/R

you can find the latest (and last) beat version of R for MacOs 
corresponding to R vers 1.1.1.
Release date is Dec 10 2000. It is no longer a pre-alpha version but 
a beta one :)



In what follows you can find what's new in this version but please 
remember that it is still a beta version intended mainly for R 
developers and with the aim to collect as much feedback as possible.

Sometimes R application fails to allocate memory and it quits. This 
is a known bug and it will be fixed in the next release.

I think that this is the last porting of R 1.1.1 and next version of 
R for MacOS will be based on R ver 1.2.0 released on Dec 15 2000. I 
hope this to be a complete porting and it will come with next year.

I would like to thank the R Core Team people for the invaluable help 
given to me.

Stefano

p.s. I apologize for this long message.
----


Macintosh porting of R-1.1.1,  beta 1, (Dec 10 2000).



What's new from R for Mac pre-alpha  2
======================================

* tempfile() is now supported. Temporary files are stored in a directory
   "tmp" that it is assumed to be in the main R folder. If it doesn't
   exist, R create it. All temporary files will be stored there.

* unlink() is implemented. It can delete only files and dirs created
   from the current R session. Wildcards not allowed yet.

* Dynamic libraries are fully implemented grace to the code give to me
   by Luke Tierney.
   (There is a problem with DLLName. Every function must be searched
    for global and not for a specific package when calling .C/.Fortran etc)

* Most of the packages have been compiled but the tclk one.

* tclk demos disabled

* Packages. The following packages have been compiled or simply added
   to the base one:

   ctest (ex:tested)
   eda (ex:tested)
   lqs (ex:tested)
   modreg (ex:tested)
   mva (ex:tested)
   nls (ex:tested, does not work "SSlogis")
   splines (ex:tested)
   stepfun (ex:tested)
   ts (file AnIndex to be built)
   wavethresh (examples and help files to be built)

* Metric Information for graphics device partially working.
   You can write expressions and symbols in plots but it is not yet
   perfectly working.

* data(women) doesn't load! Can't understand why...yet.

* XDR loading/saving has been implemented. I use the code from B. Ripley
   that (seems) to work fine with very little modifications.

* Load and Save of image is now implemented correctly.

* Load and Save implemented from menu too. If you save from menu an icon
   will be added to the file. You can double-click on a R file to start the
   application or load a file in R if the application is running. You can
   also  drag&drop the file on the R icon to launch R.

* Help files are now displayed correctly with colors as under Windows


What else still remains to do!
==============================
There are lots of things that have to be implemented and fixed.
Not all the avalaible packages have been compiled. If you have any
particular need please let me know and I will compile and made
available the package. There is not an automatic install procedure
for building packages under MacOS yet.

This current version containes wavethresh and multiv packages but no
help files and examples are avalaible yet.
If you need them you should only copy the directories "help" and "R-ex"
of the Windows distribution in their respectively directory under this
distribution.

Memory problems
===============
There is a strange behaviour of this porting of R with memory
that I'm not able to fix yet.
As the memory routines will be changed in R 1.2 I decided to
fix it in version 1.2 of the MacOS porting.
Anyway, the suggested memory parameters are the following: from
Finder get Information on the R application and change its
assigned memory to 42000k. From within R application preferences set
RVSize = 5M and RNSize = 500k.


Hystory
=======



What was in R for Mac pre-alpha 2 and 1
=======================================
* dir, setcwd, getcwd
* macdevice pdated to WasteLib 2.0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mjr@stats.mth.uea.ac.uk  Mon Dec 18 18:01:34 2000
From: mjr@stats.mth.uea.ac.uk (MJ Ray)
Date: 18 Dec 2000 18:01:34 +0000
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: Paul Gilbert's message of "Fri, 15 Dec 2000 11:15:18 -0500"
References: <200012151512.QAA08186@pubhealth.ku.dk>
 <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
 <3A3A4396.5AF55E95@bank-banque-canada.ca>
Message-ID: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think we would be better off to let a non-native English speaker
> decide. My Shorter OED (possibly a special version for the colonies)
> gives both spelling. In french it is Licence.

In native English, it is "Licence".  In American English, it is
"License".  Personally, I prefer the native English version, but I'm
outnumbered on this planet.
-- 
MJR                                     (Not an official statement)
Please note changes of address		http://stats.mth.uea.ac.uk/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Dec 18 18:01:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 18 Dec 2000 19:01:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3E5104.F34880B0@statistik.uni-dortmund.de>



Torsten Hothorn wrote:
> 
> Help needed!
> 
> Has anyone access to StatXact? I just hacked exact two-sided p-values for
> rank tests (for package exactDistr, which will move to CRAN/contrib as
> exactRankTests soon ;-) and would like to compare the results of my
> implementation to that of StatXact. Could someone please calculate the
> exact one-sided (both greater and less) and two-sided p-values?
> 
> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results:
> 
> > wilcox.exact(x,y)
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.8963
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(x,y, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.5656
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(x,y, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.4636
> alternative hypothesis: true mu is greater than 0
> 
> Thanks!
> 
> Torsten


Hi Torsten!

I could do it tomorrow, when I am back in office (Stat-Xact 3 ???), if
you like ...

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 18 18:42:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Dec 2000 18:42:22 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>
Message-ID: <Pine.GSO.4.05.10012181839370.19824-100000@auk.stats>

On 18 Dec 2000, MJ Ray wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I think we would be better off to let a non-native English speaker
> > decide. My Shorter OED (possibly a special version for the colonies)
> > gives both spelling. In french it is Licence.
> 
> In native English, it is "Licence".  In American English, it is
> "License".  Personally, I prefer the native English version, but I'm
> outnumbered on this planet.

I don't think wither of those are relevant.  It is a DCF (Debian Control
Format?) file, and in DCF the entry is `License:'.  Human languages don't
come into it.  (As another example, the field is `Author:' even if there
are seventeen authors.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 18:53:03 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 19:53:03 +0100 (MET)
Subject: [Rd] Help: StatXact
In-Reply-To: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>


> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results: 

Upps, sorry, those results where totally non-sense. I'm to tired ;-)  

here are the results of my current implementation for the dataset above
(but data were correct!):

> wilcox.exact(treat, contr)

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.0989 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(treat, contr, alternative="l")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.9648 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(treat, contr, alternative="g")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.05568 
alternative hypothesis: true mu is greater than 0 

Sorry again, 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Dec 18 19:17:06 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 18 Dec 2000 14:17:06 -0500
Subject: [Rd] Some potential changes (enhancements) to formulas and models
Message-ID: <20001218141706.K11628@jimmy.harvard.edu>

Here is part 1 of my long saga towards a more flexible modeling
paradigm.
Comments and hints are especially welcome.

The simple version:
  Starting with a formula and data R goes through 3 main steps to get
the data into a form suitable for fitting.

 1) application of terms
 2) application of model.frame
    (subset and na.action occur in 2).
 3) application of model.matrix


 To be concrete think of the following two formulas

F1:  y~a*log(b)

F2:  y~a*(1+ exp(b*t))

 My goal is to introduce a meaningful way of specifying which symbols
are parameters and which are data.

 For now I'm just going to talk about the terms function and within
 that
 just about the factors component that is returned. I've had a look at
 the man pages and the White book (ch 2).

  The factors component is supposed to be a matrix with the variable
  names
  along the rows and the terms (whatever they are) as columns.

   If in F1 both a and b are variables then the terms are
    terms:  a, log(b), a:log(b)
  the variable names are
     vars: y, a, log(b)

   If a or b is a parameter (say it's a) then
   terms: log(b)
   vars: y, log(b)

  I think it would be easier if log(b) was in the terms  but b
  was in the vars.

    With F2, things aren't so simple:
     currently we get,

y ~ a + exp(b * t) + a:exp(b * t)
attr(,"variables")
list(y, a, exp(b * t))
attr(,"factors")
           a exp(b * t) a:exp(b * t)
y          0          0            0
a          1          0            1
exp(b * t) 0          1            1

  Which is ok, given that we haven't said anything about the variables
 but it certainly won't help us to build a model.
  Now suppose I want to identify a and b as parameters,
then I want to get:
  y ~ a * ( 1 + exp( b * t ) )

  terms:  t
  vars: y, t

   If just a is a parameter then I think that we should get

   terms: t, b, t:b
or terms: y, exp(b*t)
   vars: y, t, b

  Open questions:
 1) When do the special formula operators work and when do they take
their
    usual interpretation?

 2) I think that model.frame should produce a dataframe with
       columns corresponding to the variables in the model.
     - model.matrix is then responsible for using the model frame
      and the terms to produce a model.matrix

     In the F1 example, then under this scheme the model frame
     would contain y a and log(b)
     The model matrix would have a and log(b) in it.
     If b appears on its own and inside a function call does that
     correspond to two variables or one?

 3) In some sense we need define what a term is and
    what a variable is. We need to do that in a way that is meaningful
    for both linear and nonlinear (and possible graphical) models.

 4) Is the notion of model.matrix useful outside of linear models?
    If so, is it the place where we code up the contrasts

  Robert
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charpent@bacbuc.dyndns.org  Mon Dec 18 19:48:43 2000
From: charpent@bacbuc.dyndns.org (charpent@bacbuc.dyndns.org)
Date: Mon, 18 Dec 2000 20:48:43 +0100 (MET)
Subject: [Rd] R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ? (PR#775)
Message-ID: <200012181948.UAA25371@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: 1.2.0
OS: Linux 2.2.18 (Debian 2.2)
Submission from: (NULL) (193.251.31.31)


When trying "mass" installation of available packages, the package logspline
does not compile, at least when installed through
install.packages("logspline").

It seems that it is a small bug, such a missing #include <math.h> or -libm
linking switch ?

installation output follows (screen copy) :

> install.packages("logspline")
--20:39:02--  http://cran.r-project.org:80/src/contrib/PACKAGES
           => `/tmp/fileR2ef9S74b0dc51'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 29,955 [text/plain]

    0K -> .......... .......... .........                        [100%]

20:39:03 (43.47 KB/s) - `/tmp/fileR2ef9S74b0dc51' saved [29955/29955]

--20:39:03--  http://cran.r-project.org:80/src/contrib/logspline_1.0-2.tar.gz
           => `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 41,280 [application/x-tar]

    0K -> .......... .......... .......... ..........            [100%]

20:39:05 (31.57 KB/s) - `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
saved [41280/41280]

Installing source package `logspline' ...
 libs
gcc -I/usr/lib/R/include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES 
-fPIC  -g -O2 -c logsplin.c -o logsplin.o
g77   -fPIC  -g -O2 -c mpack.f -o mpack.o
ld: warning: cannot find entry symbol _start; defaulting to 08048080
logsplin.o: In function `logcensor':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:101: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:117: undefined reference to `pow'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:184: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:201: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:207: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:276: undefined reference to `log'
logsplin.o: In function `removeknot':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:334: undefined reference to
`sqrt'logsplin.o: In function `fits':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:350: undefined reference to `log'
logsplin.o: In function `iter':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:396: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:405: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:415: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:755: undefined reference to
`printf'
logsplin.o: In function `erroradjust':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:851: undefined reference to
`sqrt'logsplin.o: In function `likeli':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:890: undefined reference to `exp'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:915: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:918: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:924: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:940: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:946: undefined reference to `log'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:959: more undefined
references to `log' follow
logsplin.o: In function `linsearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1055: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1086: undefined reference to
`pow'logsplin.o: In function `onesearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1103: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1112: undefined reference to
`log'logsplin.o: In function `numbertester':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1141: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1144: undefined reference to
`pow'logsplin.o: In function `expin':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1199: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1205: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1210: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1211: more
undefined references to `exp' follow
logsplin.o: In function `expin2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1247: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1253: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1258: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1259: more
undefined references to `exp' follow
logsplin.o: In function `dens33':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1290: undefined reference to
`log'logsplin.o: In function `fun2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1451: undefined reference to
`exp'logsplin.o: In function `coeff':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: more
undefined references to `pow' follow
logsplin.o: In function `knotplace':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1929: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1933: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1951: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1970: undefined reference to
`ceil'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1971: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1975: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2110: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2112: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2126: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2128: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2147: undefined reference to
`printf'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2148: more undefined
references to `printf' follow
logsplin.o: In function `knotnumber':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2249: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2255: undefined reference to
`ceil'
logsplin.o: In function `middle':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2443: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2445: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2447: undefined reference to
`log'logsplin.o: In function `pqexp':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3037: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3039: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3040: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3043: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: more
undefined re
ferences to `exp' follow
logsplin.o: In function `pqexpi':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3142: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3144: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3146: undefined reference to
`exp'make: *** [logspline.so] Error 1
ERROR: Compilation failed for package `logspline'

Delete downloaded files (y/N)? 
The packages are in /tmp/RinstdirR2ef9S66334873
Warning messages: 
1: argument `lib' is missing: using /usr/lib/R/library in:
install.packages("logspline") 
2: Installation of package logspline had non-zero exit status in:
install.packages("logspline") 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 19 08:44:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 19 Dec 2000 09:44:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3F1FF8.1710657B@statistik.uni-dortmund.de>

Torsten Hothorn wrote:
> 
> > # Data from the StatXact-4 manual, page 221
> > treat <- c(94, 108, 110, 90)
> > contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> >
> > My results:
> 
> Upps, sorry, those results where totally non-sense. I'm to tired ;-)
> 
> here are the results of my current implementation for the dataset above
> (but data were correct!):
> 
> > wilcox.exact(treat, contr)
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.0989
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(treat, contr, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.9648
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(treat, contr, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.05568
> alternative hypothesis: true mu is greater than 0
> 
> Sorry again,
> 
> Torsten


Sorry, I cannot help Torsten:

1. Only StatXact 3 is available here.
2. I am too stupid to produce any output, which doesn't look like
nonsense....

Is another volunteer out there? ;-)

Best regards,
Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 13:53:42 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 14:53:42 +0100 (MET)
Subject: [Rd] strwidth does not take font into account (PR#776)
Message-ID: <200012191353.OAA05829@pubhealth.ku.dk>

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 14:09:04 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 15:09:04 +0100 (MET)
Subject: [Rd] Minor "make check" bug. (PR#777)
Message-ID: <200012191409.PAA06270@pubhealth.ku.dk>

If you build R with the following sequence

./configure
make R
make check

Then "make check" fails at the following point (in examples for help()
itself)

> try(help("bs", try.all.packages=FALSE)) # reports not found (an error)
Error in help("bs", try.all.packages = FALSE) :
        No documentation for `bs' in specified packages and libraries
> help("bs", try.all.packages=TRUE) # reports can be found in package `splines'
Error in help("bs", try.all.packages = TRUE) :
        No documentation for `bs' in specified packages and libraries
Execution halted

Evidently this is because the help pages for the package `splines'
have not been built.  The simplest solution would be to wrap the
second call to help in a call to try.

Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Dec 19 19:56:11 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 19 Dec 2000 20:56:11 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012191956.UAA09023@pubhealth.ku.dk>

Here's a bug one of my students noticed.

When you call plot() on a glm object, plot.lm gets called.  The second
plot it shows is supposed to give a normal QQ plot of the standard
deviance residuals, but it doesn't.  The glm object created by glm.fit
returns something (the IRLS weights?) in fit$weights which plot.lm
takes as observation weights, so  you get strange residuals in the QQ
plot.

For example, here I fit a simulated Poisson model where the model
perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
ranging between -45 and 40.

>set.seed(1)
>x <- seq(4,5,len=1000)
>y <- rpois(1000,exp(x))
>fit <- glm(y ~ x, family=poisson)
>plot(fit, which=2)

If I extract the residuals myself and plot them, I see that the model
is fine:

>qqnorm(residuals(fit))

The problem is that the weights are big; plot.lm should be using
prior.weights, or glm should be returning the big weights under a
different name:

> summary(fit$weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  54.35   69.90   89.90   93.76  115.60  148.70 

> summary(fit$prior.weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1       1       1       1       1       1 

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Dec 19 20:08:20 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 19 Dec 2000 21:08:20 +0100 (MET)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012192008.VAA09113@pubhealth.ku.dk>

When I use sink(filename) to save the results of the run, the file
does not seem to be closed or released back to the OS after I issue
the "sink()" command.  Here is a baby example:

sink("test.txt")
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))

print(summary(lm(y ~ x, data=tdta)))
sink()

At this point (even after refreshing the Explorer window) the filesize of
"test.txt" is listed as 0 bytes, and as long as Rgui is running, I
cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
and when the commands are in a file run via "source()".

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 20:36:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 20:36:46 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012192008.VAA09113@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>

On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:

> When I use sink(filename) to save the results of the run, the file
> does not seem to be closed or released back to the OS after I issue
> the "sink()" command.  Here is a baby example:

sink works on connections, not files, as from 1.2.0.

> sink("test.txt")
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> 
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> 
> At this point (even after refreshing the Explorer window) the filesize of
> "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> and when the commands are in a file run via "source()".

Yes, but what is the bug exactly?  The connection is still open so you can
switch output back to it.  If you want different behaviour, you can open a
connection and close it yourself.  As in

zz <- file("test.txt", "w")
sink(zz)
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
print(summary(lm(y ~ x, data=tdta)))
sink()
close(zz)

It might be better to close the file as well as the connection when
switching, but that is not what was done.  To do that use

sink <- function (file = NULL, append = FALSE) 
{
    if (is.null(file)) 
        file <- 1
    else if (is.character(file)) { 
        file <- file(file, ifelse(append, "a", "w"))
        on.exit(close(file))
    } else if (!inherits(file, "connection")) 
        stop("`file' must be NULL, a connection or a character string")
    .Internal(sink(file, append))
}

(One possible cause of confusion is that the connection might be closed,
but not the file.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 21:08:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 21:08:57 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10012192107220.11682-100000@auk.stats>

On Tue, 19 Dec 2000, Prof Brian D Ripley wrote:

> On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:
> 
> > When I use sink(filename) to save the results of the run, the file
> > does not seem to be closed or released back to the OS after I issue
> > the "sink()" command.  Here is a baby example:
> 
> sink works on connections, not files, as from 1.2.0.
> 
> > sink("test.txt")
> > tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> > 
> > print(summary(lm(y ~ x, data=tdta)))
> > sink()
> > 
> > At this point (even after refreshing the Explorer window) the filesize of
> > "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> > cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> > and when the commands are in a file run via "source()".
> 
> Yes, but what is the bug exactly?  The connection is still open so you can
> switch output back to it.  If you want different behaviour, you can open a
> connection and close it yourself.  As in
> 
> zz <- file("test.txt", "w")
> sink(zz)
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> close(zz)
> 
> It might be better to close the file as well as the connection when
> switching, but that is not what was done.  To do that use

Sorry, the following is nonsense, as it closes the connection at the
end of sink.  The one above works, though.

I'll make a change in the C code to ensure that the file gets closed if
the connection does.


> sink <- function (file = NULL, append = FALSE) 
> {
>     if (is.null(file)) 
>         file <- 1
>     else if (is.character(file)) { 
>         file <- file(file, ifelse(append, "a", "w"))
>         on.exit(close(file))
>     } else if (!inherits(file, "connection")) 
>         stop("`file' must be NULL, a connection or a character string")
>     .Internal(sink(file, append))
> }
> 
> (One possible cause of confusion is that the connection might be closed,
> but not the file.)
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 10:59:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 11:59:36 +0100 (MET)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
Message-ID: <200012201059.LAA15024@pubhealth.ku.dk>

Using zero-weight values in glm returns incorrect fitted values and
linear predictors, the ninth value in the following.

> example(glm)
> fit <- glm(counts ~ outcome + treatment, family = poisson(), 
             data=d.AD, weights=c(rep(1,8), 0))
> fit$linear.predictor
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
2.493205 
> predict(fit, d.AD)
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
3.018547 
> fitted(fit)
       1        2        3        4        5        6        7        8 
19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728 
       9 
12.10000 
> predict(fit, d.AD, type="response")
[1] 19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728
[9] 20.46154

The reason is obvious: glm.fit only ever updates eta[good], and 
zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
initial values.

There are two possible fixes:

1) Update eta after the final fit, and then mu.  Out of range values
could then be NA (although it looks like predict.glm does not check).

2) Update all eta and hence mu values during the iterations.  This will
apply the constraints on eta/mu at zero-weight points too, and so might
be different.

I am inclined to think that 2) is right, and that adding points with zero 
weight to the fit is not the same as omitting them.

Opinions?


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 11:12:37 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 12:12:37 +0100 (MET)
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
Message-ID: <200012201112.MAA15286@pubhealth.ku.dk>

syskern (`Functions for writing code that is OS and R/S independent', an
amazing description given the reality) fails Rcmd check on Windows, and
also gives incorrect information where it does work.

There are already correct OS-independent functions for these purposes in
R.  It appears not to be needed to run the other three packages in the dse
bundle, but to be the only R package that deliberately does not work on
one of the major platforms.  I doubt if it works on Macs, either.  It
should not be in the main section of CRAN unless it does what it claims.
 
> example(global.assign)

glbl.s> date.parsed()
Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "date.parsed"

It has not been implemented!

> example(system.call)

systm.> system.call("ls")
Error in system.call("ls") : system calls must be implemented for this operating system.

But they are:

> shell("ls -C")
#R.bug.report#       cvs-co               test1
DF.R                 jpegsrc.v6b.tar.gz   test2.emf
GSD2.EMF             libpng-1.0.8.tar.gz  test3.emf
R-1.2.0.tgz          library              test4.emf
R.bug.report         mri.dat              test5.emf
Rconsole             mydata               texinfo-4.0.tar.bz2
Rdist                packages             tools
TB                   rw1020               tools.zip
VR3sc                rw1021               winold.zip
addlibs              rw1030               zlib113.zip

> system("ls", intern=TRUE)
 [1] "#R.bug.report#"      "DF.R"                "GSD2.EMF"           
 [4] "R-1.2.0.tgz"         "R.bug.report"        "Rconsole"           
 [7] "Rdist"               "TB"                  "VR3sc"              
[10] "addlibs"             "cvs-co"              "jpegsrc.v6b.tar.gz" 
[13] "libpng-1.0.8.tar.gz" "library"             "mri.dat"            
[16] "mydata"              "packages"            "rw1020"             
[19] "rw1021"              "rw1030"              "test1"              
[22] "test2.emf"           "test3.emf"           "test4.emf"          
[25] "test5.emf"           "texinfo-4.0.tar.bz2" "tools"              
[28] "tools.zip"           "winold.zip"          "zlib113.zip"        

Of course, `ls' is OS-dependent, so should not be used as an example
in a purportedly OS-independent package.

> example(system.info)

systm.> system.info()
          _              
platform  i386-pc-mingw32
arch      x86            
os        Win32          
system    x86, Win32     
status                   
major     1              
minor     2              
year      2000           
month     12             
day       15             
language  R              
OSversion MS Windows 95  
OStype    MS Windows     

That is incorrect: see what bug.report gives below.  The heading looks
strange too.

> example(whoami)

whoami> whoami()
Error in whoami() : system calls must be implemented for this operating system.

They are:

> system("whoami", intern=T)
[1] "ripley"
> Sys.info()["user"]
    user 
"ripley" 


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, package:syskern, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Dec 20 11:48:23 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 20 Dec 2000 06:48:23 -0500 (EST)
Subject: [Rd] Example of calling R from Java
Message-ID: <200012201148.GAA25303@jessie.research.bell-labs.com>


> From: "Moshe Recanati" <moshe@i-impact.com>
> Date: Sun, 17 Dec 2000 10:12:25 +0200
> 
> Hello,
> 
> I downloaded the R for Java interface. I read about calling R =
> scripts/methods from java, but I can't find any detailed example about =
> this.
> 
> I need an example of how to use this.
> 
> For example how to load data object (i.e. of colt) to r , run anova =
> function and get the results - all from java!!!
> 
> Thank you very very much
> Regards,
> Moshe
> i-impact
> 


There is a new version of both the Java package (now 0.61) and the
RFromJava document (http://www.omegahat.org/RSJava/RFromJava.pdf)
which gives an example (with the code and a script to run it) of
fitting a linear model in R from Java and getting the resulting lm
object back to Java.

As I have mentioned before, you have to think about what it means
to "get the results" in the context of your application. 

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:28:51 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:28:51 +0100
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012201228.NAA04053@mailgate3.cinetic.de>



Dear Prof. Ripley,

You wrote
> Yes, but what is the bug exactly?  

Just testing connections, I think the bug is that the help for sink says that:

  If `file' is a connection if will be opened if necessary.
     Switching to another file or connection closes the existing
     connection unless it is the console.

and after switching to another file or connection the existing connection is not closed.

> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> sink()
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> # now we have silently an open connection left

I tend to think that a sequence of

 sink(WhateverConnectionInvolved)
 :
 :
 sink()

should leave WhateverConnectionInvolved in the same state it was before the sequence.
i.e. if WhateverConnectionInvolved was non.existent it should be non.existent
i.e. if WhateverConnectionInvolved was existent but not opened it should be existent but not opened 
i.e. if WhateverConnectionInvolved was existent and opened it should be existent and opened 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software.


Regards

Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 13:37:55 +0100
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 20 Dec 2000 11:59:36 +0100 (MET)"
References: <200012201059.LAA15024@pubhealth.ku.dk>
Message-ID: <x21yv346ak.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> The reason is obvious: glm.fit only ever updates eta[good], and 
> zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> initial values.
> 
> There are two possible fixes:
> 
> 1) Update eta after the final fit, and then mu.  Out of range values
> could then be NA (although it looks like predict.glm does not check).
> 
> 2) Update all eta and hence mu values during the iterations.  This will
> apply the constraints on eta/mu at zero-weight points too, and so might
> be different.
> 
> I am inclined to think that 2) is right, and that adding points with zero 
> weight to the fit is not the same as omitting them.
> 
> Opinions?

Just for clarification: This applies only to cases where the
parametrization is non-canonical, e.g. additive models with Poisson
response, right? And essentially the issue is that if you have a model
like lambda = a + b x and you put in a zero-weight observation with x
= 0, then that should effectively constrain a to be positive. That
does make quite good sense, yes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:27 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:32:27 +0100 (MET)
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone (PR#782)
Message-ID: <200012201232.NAA16586@pubhealth.ku.dk>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:41 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:32:41 +0100
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone
Message-ID: <200012201232.NAA08295@mailgate3.cinetic.de>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:33:15 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:33:15 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012201228.NAA04053@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201231510.3109-100000@toucan.stats>

On Wed, 20 Dec 2000, [iso-8859-1] Jens Oehlschlgel wrote:

> 
> 
> Dear Prof. Ripley,
> 
> You wrote
> > Yes, but what is the bug exactly?  
> 
> Just testing connections, I think the bug is that the help for sink says that:
> 
>   If `file' is a connection if will be opened if necessary.
>      Switching to another file or connection closes the existing
>      connection unless it is the console.
> 
> and after switching to another file or connection the existing connection is not closed.
> 
> > showConnections()
>      class description mode text isopen can read can write
> > sink("tempfile")
> > sink()
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> > # now we have silently an open connection left

Um, actually it is closed but not removed from the list.  But I have 
put a fix in for 1.2.1, that closes it properly.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:17 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:36:17 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
Message-ID: <200012201236.NAA12101@mailgate3.cinetic.de>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:03 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:36:03 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#783)
Message-ID: <200012201236.NAA16683@pubhealth.ku.dk>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:37:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:37:24 +0000 (GMT)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201233420.3109-100000@toucan.stats>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.

Constraints can be added by the user, of course, but in the standard cases
(canonical links) they never bite.  Poisson with linear link is one case
where they might.  This checking is something that R has but S and GLIM
(AFAIR) do not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:43 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:42:43 +0100
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so
Message-ID: <200012201242.NAA18762@mailgate3.cinetic.de>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:32 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:42:32 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so (PR#784)
Message-ID: <200012201242.NAA16855@pubhealth.ku.dk>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
Subject: [Rd] unlink() is not synchronized with existing connections
 (PR#783)
In-Reply-To: <200012201236.NAA16683@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201240300.3109-100000@toucan.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:20 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:47:20 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#785)
Message-ID: <200012201247.NAA16941@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:33 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
Subject: [Rd] showConnections() does not show closed (or non-opened)
 connections though help says so
In-Reply-To: <200012201242.NAA18762@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201249110.3109-100000@toucan.stats>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:27 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:51:27 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) (PR#786)
Message-ID: <200012201251.NAA17017@pubhealth.ku.dk>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:38 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:56:38 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections (PR#787)
Message-ID: <200012201256.NAA17159@pubhealth.ku.dk>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:49 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:56:49 +0100
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections
Message-ID: <200012201256.NAA01807@mailgate3.cinetic.de>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 13:12:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 14:12:07 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
In-Reply-To: "Jens Oehlschl?gel"'s message of "Wed, 20 Dec 2000 13:36:17 +0100"
References: <200012201236.NAA12101@mailgate3.cinetic.de>
Message-ID: <x2vgsf2q54.fsf@blueberry.kubism.ku.dk>


Jens, could you please avoid mailing to r-devel *and* r-bugs. R-bugs
are automagically forwarded to r-devel with the PR# added, so

a) we get it in duplicate
b) if anyone follows up to the version without the PR# we will
	1) get that in duplicate too
	2) get a *new* PR# for the follow up

(There are bugs enough, no need to multiply them...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:15:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 14:15:13 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying (PR#788)
Message-ID: <200012201315.OAA17519@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:14:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying
 connections (PR#787)
In-Reply-To: <200012201256.NAA17159@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201310370.14649-100000@auk.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Dec 20 16:18:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 20 Dec 2000 08:18:31 -0800 (PST)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0012200812560.14916-100000@atlas.biostat.washington.edu>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.
> 

Not just non-canonical. There are boundary problems with gamma/reciprocal
glms.  I would also go for the second solution.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Wed Dec 20 17:50:21 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Wed, 20 Dec 2000 17:50:21 -0000
Subject: R: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <011701c06aad$533ac1e0$0a00a8c0@bellview>

I've just uploaded the files

Thanks for your attention,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: luned 18 dicembre 2000 11.00
Oggetto: Re: R: [Rd] Some libraries and ideas for a 'librarified' R


>>>>>> Federico Spinazzi writes:
>
>> Well, I think the better solution would be to put them on the web: I
>> tried to open two web pages but I forget the possword every time :-(.
>
>> I see 2 quick solutions:
>> - send the files via e-mail
>> - put the files on CRAN (where?);
>
>See the FAQ:
>
>   To "submit" to CRAN, simply upload to
>`ftp://cran.r-project.org/incoming/' and send an email to
><wwwadmin@cran.r-project.org>.
>
>     *Note:*  It is very important that you indicate the copyright
>     (license) information (GPL, BSD, Artistic, ...)  in your
>     submission.
>
>-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Dec 20 21:15:07 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Dec 2000 22:15:07 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <14913.8539.45887.551220@celeborn.at>


Hi,

Kurt Hornik and I will start to publish a quarterly electronic

	``R Newsletter'' 

beginning with January 2001 (if all goes well). The idea is to have a
mixture of articles  describing 
1) new features in R itself
2) contributed add-on packages
3) nice applications
4) more general statistical computing issues related to R
5) or ...

OK, now comes my christmas wish to you: If you are the author of a
package on CRAN and want to promote it a little bit, well, maybe you
find some time during the holidays to write approx. 2 pages (A4 or
letter) in LaTeX and send it to Kurt or me? The same applies if you
simply have a nice application using R.  The idea is to have the
newsletter not too technical, i.e., an article describing a package
could shortly describe the statistical background and then demonstrate
the usage on some typical data set. Of course graphics are more than
welcome!

The newsletter will be published as PDF file on CRAN, the final format
will be created while we layout number one, hence any LaTeX file
should be fine as contribution.  

Otherwise I wish everybody all the best for X-Mas and a happy new
year!

Best,
Fritz Leisch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Wed Dec 20 22:17:23 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Wed, 20 Dec 2000 17:17:23 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>

This is a very nice idea. I would have a problem tough with the Latex format
you require. I'm almost certain that to most Windows user, Latex is as bad
news as a foreign language you know nothing about. Would there be an
alternative to please every body?

Regards

Yves Gauvreau


> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Friedrich Leisch
> Envoye : Wednesday, December 20, 2000 4:15 PM
> A : r-devel@stat.math.ethz.ch
> Objet : [Rd] R Newsletter: 1st Call for Articles
>
>
>
> Hi,
>
> Kurt Hornik and I will start to publish a quarterly electronic
>
> 	``R Newsletter''
>
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
>
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
>
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.
>
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
>
> Best,
> Fritz Leisch
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 23:28:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 00:28:00 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: "Yves Gauvreau"'s message of "Wed, 20 Dec 2000 17:17:23 -0500"
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>
Message-ID: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>

"Yves Gauvreau" <cyg@sympatico.ca> writes:

> This is a very nice idea. I would have a problem tough with the Latex format
> you require. I'm almost certain that to most Windows user, Latex is as bad
> news as a foreign language you know nothing about. Would there be an
> alternative to please every body?

Not really, dealing with MS Word would be a nightmare, and LaTeX is
just about the only format with decent treatment of mathematics.

However, I'm pretty sure that plain ascii would also be acceptable for
simple articles. On the other hand, why should the editors have the
trouble of putting all code excerpts in \begin{verbatim} ..
\end{verbatim} constructs, etc.? 

Perhaps one could define a simplified LaTeX markup similar to .Rd.

Or maybe just point people towards MiKTeX and give them a crash course
in LaTeX? For plain text, the format is really quite simple.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Dec 20 23:20:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Dec 2000 18:20:48 -0500
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
References: <200012201112.MAA15286@pubhealth.ku.dk>
Message-ID: <3A413ED0.DC3D6CC9@bank-banque-canada.ca>

Brian

I have a new version of syskern which takes advantage of the new
features you have added in R 1.2. I just sent details to Fritz. I'm
sorry that I am a bit slow getting it to CRAN, the release of R 1.2 came
at a very busy time for me. In the future, if you give me a bit more
warning when you are going to test packages with a brand new release of
R, I can probably save you some time by telling you what problems to
expect.

I believe most of syskern now uses standard features of R, so almost
everything should work on all platforms on which R 1.2 works. The main
outstanding facility is a mail interface, which you indicated previously
is problematic in Windows. In any case, it would be useful to
standardize R's side of this so that R programs, like mine and also
bug.report(), can use a program mail() which works on some platforms and
may eventually work on others.

>syskern (`Functions for writing code that is OS and R/S independent' an

>amazing description given the reality

I think you are mis-reading this. If you would like to suggest better
phrasing then that may be helpful. The intention was not to provide the
OS-independent functions as you have now done in R. The intention was to
provide an R-side definition of these functions so that I (and others)
could write R programs in a standardized way to use these facilities
when they became available in R. I kludged a Unix version of the
facilities and invited others to do Windows and Mac versions. Five years
ago when R was still young I needed these facilities to use in R
programs, and it has worked very well. It was very little work for me to
take advantage of the new features in R 1.2. I expect my versions will
become depreciated in R and their main use will be to provide S with
similar names for the same facilities, but there are still a few issues
so it is too early to depreciate them yet.

Seasons Greetings,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Dec 21 01:31:52 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 20 Dec 2000 17:31:52 -0800 (PST)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201721180.11764-100000@tajo.ucsd.edu>

On 21 Dec 2000, Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> > This is a very nice idea. I would have a problem tough with the Latex format
> > you require. I'm almost certain that to most Windows user, Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 

FWIW, at least one of the equation setting add-ons for WORD (MathType, see
http://www.mathtype.com ) has TeX as its engine. It will optionally
provide (La)TeX on the clipboard for pasting into non-WORD docs. So a WORD
user could provide ascii for the text and (La)TeX for equations.


> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Dec 21 01:55:31 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 21 Dec 2000 09:55:31 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <Pine.GSO.4.21.0012210954431.16878-100000@sununx.comp.nus.edu.sg>

Hi,
where should we make submissions? To you directly?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Friedrich Leisch wrote:

> 
> Hi,
> 
> Kurt Hornik and I will start to publish a quarterly electronic
> 
> 	``R Newsletter'' 
> 
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing 
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
> 
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
> 
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.  
> 
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
> 
> Best,
> Fritz Leisch
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu Dec 21 03:38:54 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 21 Dec 2000 13:38:54 +1000
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>

With regard to the burgeoning side-discussion on whether or not to accept
WORD submissions, I plead for a quick, decisive and final ruling in the
negative.

Apart from the major practical considerations to do with the amount of work
putting together a document from sources of both kinds and achieving an
acceptable result, there is the relatively minor issue of principle: R is
open source software and should do what it can to promote the use of other
open source products.

I fully realise that this will create problems for people who are not
familiar with LaTeX.  I hope for people like Yves it is the start of a
liberating journey of discovery...but for many it will not be.  It would
seem to me the best option for such people is simply to accept submissions
in neat ASCII, (with some diffidence, of course, as such submissions will
require someone to do a lot of work before they can be incorporated into a
document).

When it comes to submitting graphics, though, I have no easy solution for
those unfortunates crippled and imprisoned by the MicroSoft arrogation of
the universe.  It would be simple if R had a pdf.graph device: is any such
development in prospect?  For that matter, how should Unix/Linux people
submit graphics?

Charles Berry observes:
> 
> FWIW, at least one of the equation setting add-ons for WORD 
> (MathType, see http://www.mathtype.com) has TeX as its engine. 
> It will optionally provide (La)TeX on the clipboard for pasting 
> into non-WORD docs. So a WORD user could provide ascii for the 
> text and (La)TeX for equations.

Yes, but....  MathType is yet another (stiffly priced) commercial add-on, it
is only one version of MathType that has the TeX output options and as far
as I can see mathematical typesetting is not going to be a large part of the
newsletter, anyway.  I would also claim that the TeX output you get from
such automatically produced stuff is not always very good TeX, too...for
example, vulgar fractions such as 1/2 are always too large.  I'm not all
that sure this intended courtesy to the person putting the newsletter
together would actually save very much work.  The best solution from all
points of view is the hard one: encourage submissions in GOOD LaTeX.

Bill Venables.

--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.visch@math.canterbury.ac.nz  Thu Dec 21 04:21:49 2000
From: j.visch@math.canterbury.ac.nz (j.visch@math.canterbury.ac.nz)
Date: Thu, 21 Dec 2000 17:21:49 +1300 (NZDT)
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>

Bill Venables writes:
 > With regard to the burgeoning side-discussion on whether or not to accept
 > WORD submissions, I plead for a quick, decisive and final ruling in the
 > negative.

Why not just give the word users a latex template they can fill in.
After all most of latex is just copying from previous documents.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012210615.HAA19446@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 764 *
Subject: qqline
From: Setzer.Woodrow@epamail.epa.gov
Date: Mon, 11 Dec 2000 18:06:27 -0500
--changed for 1.2.0 already, perhaps not what was desired
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
--Still with us Dec 10 2000
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800

Directory:  Low-level

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--Compiler trouble, probably not bug
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 788 *
Subject: Re: [Rd] Inconsistency in creating/opening/closing/destroying
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
* PR# 768 *
Subject: R on Redhat 7 / glibc problem
From: B.Rowlingson@lancaster.ac.uk
Date: Fri, 15 Dec 2000 19:12:29 +0100 (MET)
* PR# 766 *
Subject: R1.2.0
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Fri, 15 Dec 2000 16:12:12 +0100 (MET)
* PR# 765 *
Subject: cannot allocate vector of size in merge
From: viktorm@pdf.com
Date: Fri, 15 Dec 2000 00:06:56 +0100 (MET)
* PR# 772 *
Subject: demo(is.things) fails
From: B.Rowlingson@lancaster.ac.uk
Date: Mon, 18 Dec 2000 13:46:02 +0100 (MET)
* PR# 771 *
Subject: problems with glm
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Mon, 18 Dec 2000 09:28:01 +0100 (MET)
* PR# 775 *
Subject: R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ?
From: charpent@bacbuc.dyndns.org
Date: Mon, 18 Dec 2000 20:48:42 +0100 (MET)
* PR# 774 *
Subject: \item{x}<cr>{description of x}
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 18 Dec 2000 11:05:39 -0500
* PR# 773 *
Subject: INSTALL should have info on make check
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Dec 2000 16:13:59 +0100
* PR# 777 *
Subject: Minor "make check" bug.
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 15:11:24 +0100 (CET)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 780 *
Subject: glm gives incorrect results for zero-weight cases
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 10:59:48 +0000 (GMT)
* PR# 779 *
Subject: Problem with sink() in 1.20 on Windows
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 19 Dec 2000 15:04:51 -0500
* PR# 778 *
Subject: Bug in glm.fit() or plot.lm()
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 19 Dec 2000 14:57:59 -0500
* PR# 783 *
Subject: unlink() is not synchronized with existing connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:36:17 +0100
* PR# 782 *
Subject: closing the sink connection a) is possible and b) can't be undone
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:32:41 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
* PR# 785 *
Subject: Re: [Rd] unlink() is not synchronized with existing connections
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
* PR# 784 *
Subject: showConnections() does not show closed (or non-opened) connections though help says so
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:42:43 +0100
* PR# 787 *
Subject: Inconsistency in creating/opening/closing/destroying connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:56:49 +0100
* PR# 786 *
Subject: Re: [Rd] showConnections() does not show closed (or non-opened)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 21 08:06:35 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Dec 2000 08:06:35 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.05.10012210748180.15375-100000@auk.stats>

On Thu, 21 Dec 2000 Bill.Venables@CMIS.CSIRO.AU wrote:

> With regard to the burgeoning side-discussion on whether or not to accept
> WORD submissions, I plead for a quick, decisive and final ruling in the
> negative.
> 
> Apart from the major practical considerations to do with the amount of work
> putting together a document from sources of both kinds and achieving an
> acceptable result, there is the relatively minor issue of principle: R is
> open source software and should do what it can to promote the use of other
> open source products.
> 
> I fully realise that this will create problems for people who are not
> familiar with LaTeX.  I hope for people like Yves it is the start of a
> liberating journey of discovery...but for many it will not be.  It would
> seem to me the best option for such people is simply to accept submissions
> in neat ASCII, (with some diffidence, of course, as such submissions will
> require someone to do a lot of work before they can be incorporated into a
> document).

One option for Word users is to save in RTF, which is at least a documented
format (and shared between word processors).  Then get a copy of rtf2latex  
or (better) rtf2latex2e from CTAN and check out the conversion.
 
Peter D mentioned MiKTeX.  I would recommend fptex to Windows users
instead: it is closer to the Unix/Linux standard system (teTeX) and is
more complete and up-to-date.  (The latter is particularly important for    
pdftex users: for example at one time fptex would process the R refman.pdf, 
and MikTeX would not.)  fptex used to be harder to instll, but no longer,
and it is the preferred system on the TeXLive5 distribution, I'm told.


> When it comes to submitting graphics, though, I have no easy solution for
> those unfortunates crippled and imprisoned by the MicroSoft arrogation of
> the universe.  It would be simple if R had a pdf.graph device: is any such
> development in prospect?  For that matter, how should Unix/Linux people
> submit graphics?

Yes, there is one already (take a closer look at bitmap, whose help says

     Note: despite the name of the functions they can produce PDF via
     `type = "pdfwrite"', and the PDF produced is not bitmapped.

).  A native PDF device is planned, and was one of the reasons for the
changes to postscript() in 1.2.0 (to enable code to be shared).
For some time my entry on developer.r-project.org has said

   A native PDF graphics driver.

and that site is a good place to look for future plans (but some team
members keep their secret).

I don't see the problem: R can produce PostScript everywhere, and it
can even produce EPS these days.  Windows users can produce other figures
in WMF if they want, but that can be converted to EPS successfully by a
number of routes.  If people want to annotate figures, R can produce .fig,
and xfig runs under Unix/Linux and Windows ....   So I suggest figures be
produced in PostScript.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Dec 21 11:11:42 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 21 Dec 2000 12:11:42 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <3.0.32.20001221121141.00910100@162.38.183.200>

At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
>One option for Word users is to save in RTF, which is at least a documented
>format (and shared between word processors).  Then get a copy of rtf2latex  
>or (better) rtf2latex2e from CTAN and check out the conversion.

I use StarOffice under WinNT and it seems that the RTF files it produces
cannot be read by MS Word. I am not sure that RTF is really "portable".

I agree with a previous message:

At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
>Why not just give the word users a latex template they can fill in.
>After all most of latex is just copying from previous documents.

And yes, we can produce PostScript figures under Windows as well.

Question: what will be the editorial policy of R Newsletter? Will papers be
reviewed? ...

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 11:59:30 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 06:59:30 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>


Ok, I understand the problematic and I have no problems with it. The next
question that comes to mind is: Is there some Latex software or something
that one could use to produce Latex documents on a Windows platform?

Although I did it in the past, I would prefer not to install Linux. I'm not
a guru of Emacs but I'm using it quite a lot these days. Could there be
something that works with Emacs and with which I could produce Latex docs
maybe?

BTW, I was sincere about the idea of this Newsletter. I look forward reading
it.

Regards

Yves Gauvreau

> -----Message d'origine-----
> De : pd@blueberry.kubism.ku.dk [mailto:pd@blueberry.kubism.ku.dk]De la
> part de Peter Dalgaard BSA
> Envoye : Wednesday, December 20, 2000 6:28 PM
> A : Yves Gauvreau
> Cc : Friedrich Leisch; r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] R Newsletter: 1st Call for Articles
>
>
> "Yves Gauvreau" <cyg@sympatico.ca> writes:
>
> > This is a very nice idea. I would have a problem tough with the
> Latex format
> > you require. I'm almost certain that to most Windows user,
> Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
>
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
>
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.?
>
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
>
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:49:49 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:49:49 -0500
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>
Message-ID: <NEBBJKDJHEFCOOLFFAKKKEBLCAAA.cyg@sympatico.ca>

Hi,

If I can humbly suggest, a standard template that could be used for the
"text" part on any platform. This would certainly be one if not the best
solution. Complement this with postscript graphics as suggested by Prof.
Ripley or chose any other output that R itself can produce and show us how
to embed these in our text maybe as an example in the template.

Then where left with equations I think and here again, if I'm not mistaking,
R as some utilities for that as well or maybe for those like me who know
nothing about Latex except the name, you could direct us to some Latex
guide, tutorial or whatever that could help us imbed equation in our text.

I think this is common practice as I ear some of you complain that this
editor wants this or that standard for their submitted papers.

This kind of solution would have the merit of stopping the ongoing war of
words between the two major community of pc users.

Regards

Yves Gauvreau



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de
> j.visch@math.canterbury.ac.nz
> Envoy : Wednesday, December 20, 2000 11:22 PM
>  : r-devel@stat.math.ethz.ch
> Objet : [Rd] RE: R Newsletter: 1st Call for Articles
>
>
> Bill Venables writes:
>  > With regard to the burgeoning side-discussion on whether or
> not to accept
>  > WORD submissions, I plead for a quick, decisive and final ruling in the
>  > negative.
>
> Why not just give the word users a latex template they can fill in.
> After all most of latex is just copying from previous documents.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Dec 21 12:54:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Dec 2000 12:54:53 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <200012211254.MAA02221@toucan.stats.ox.ac.uk>

> From: "Yves Gauvreau" <cyg@sympatico.ca>
> Date: Thu, 21 Dec 2000 06:59:30 -0500
> 
> Ok, I understand the problematic and I have no problems with it. The next
> question that comes to mind is: Is there some Latex software or something
> that one could use to produce Latex documents on a Windows platform?
> 
> Although I did it in the past, I would prefer not to install Linux. I'm not
> a guru of Emacs but I'm using it quite a lot these days. Could there be
> something that works with Emacs and with which I could produce Latex docs
> maybe?

Here's what we recommend to Windows users.

Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
Group TUG, or you can download the image and cut it yourself if you
have a good Internet connection).

Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
gives you a very capable latex mode for emacs.  This works fine on NT
if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
an alternative shell if you want to run latex from the menus.

Some people prefer the shareware WinEdt editor, which gives you
a customized latex editor:
http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
It may work better with MikTeX.

All the other pieces are also on TeXLive5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:59:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:59:53 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3.0.32.20001221121141.00910100@162.38.183.200>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBMCAAA.cyg@sympatico.ca>



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Emmanuel Paradis
> Envoye : Thursday, December 21, 2000 6:12 AM
> A : Prof Brian D Ripley
> Cc : r-devel@stat.math.ethz.ch
> Objet : RE: [Rd] R Newsletter: 1st Call for Articles
>
>
> At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
> >One option for Word users is to save in RTF, which is at least a
> documented
> >format (and shared between word processors).  Then get a copy of
> rtf2latex
> >or (better) rtf2latex2e from CTAN and check out the conversion.
>
> I use StarOffice under WinNT and it seems that the RTF files it produces
> cannot be read by MS Word. I am not sure that RTF is really "portable".
>
> I agree with a previous message:
>
> At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
> >Why not just give the word users a latex template they can fill in.
> >After all most of latex is just copying from previous documents.
>
> And yes, we can produce PostScript figures under Windows as well.
>
> Question: what will be the editorial policy of R Newsletter? Will
> papers be
> reviewed? ...

On this last question I personally think there should be some kind of
revision to insure the correctness of the statements given in the papers.
Instead of changing the content themselves the editors could send back the
paper with a note saying what is potentially wrong in their view. This would
allow the author to take appropriate action as he or she desire.

Yves Gauvreau

>
> Emmanuel Paradis
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Dec 21 13:10:51 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 21 Dec 2000 13:10:51 GMT
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
References: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
Message-ID: <3a41ff2e.53493520@smtp1.sympatico.ca>

On Thu, 21 Dec 2000 06:59:30 -0500, you wrote:

>
>Ok, I understand the problematic and I have no problems with it. The next
>question that comes to mind is: Is there some Latex software or something
>that one could use to produce Latex documents on a Windows platform?

Latex is the language that you type; a processor converts it into
things that will print (in the old days, .dvi files; now .ps or .pdf
or .html files too).

If you really mean you want a program to produce the Latex for you,
there are several choices:  Mathematica can output Latex, there used
to be a package called Scientific Word that would do the same.  One
thing to watch out for is that these programs produce Latex that might
not be usable by anyone else, since they rely on special macros that
not everyone has.  (This was my experience with SW several years ago,
I've never used these facilities in Mathematica.)

There is an editor called WinEdt that has a number of facilities
built-in to help in typing Latex files.

If you meant you want to process Latex files, Brian Ripley mentioned
two:  Miktex and fptex.  I've recently switched to Miktex and it's
fine; I don't have experience with fptex.  Miktex isn't completely
trivial to install, but it's much better than some of the older
distributions (which required you to set up a long list of environment
variables, and put files in the right places, etc.).  

You can download Miktex or fptex from http://www.ctan.org/.  I don't
know which files you need to get; someone else did it for me.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Dec 21 14:36:39 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Dec 2000 15:36:39 +0100
Subject: [Rd] Submission format for R Newsletter
Message-ID: <14914.5495.702990.151333@galadriel.ci.tuwien.ac.at>


Hi,

Sorry for responding so late, but I've been in meetings all day
long. The decision to ask for latex articles was deliberate, because
I've to deal with MS-Word files from time to time and know of no clean
way of converting it to Latex without a lot of manual intervention
(and the newsletter itself will be produced in latex).

We will make a template for articles available together with the first
edition of the newsletter (which we want to publish mid-January). So
prospective authors who are not literate in Latex: please wait one
month ...

Answers to other questions:
1) Graphics are preferred in PDF or EPS format, bitmaps like JPG are
alo OK but please keep in mind that those cannot be scaled easily and
hence might look ugly in the final version.

2) Articles should be sent by email to Kurt Hornik or me.

3) Articles will be reviewed by the editors.

I hope this clarifies some points and that such a lot of interest also
means that we will see (and enjoy to read) a lot of interesting
articles!

Best,
Fritz


-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@sunysb.edu  Thu Dec 21 01:28:07 2000
From: Timothy.Keitt@sunysb.edu (Timothy H. Keitt,)
Date: Wed, 20 Dec 2000 20:28:07 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca> <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A415CA7.2010807@SUNYSB.Edu>

You could use Lyx (www.lyx.org).  It exports (human readable) latex.

Tim

Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> 
>> This is a very nice idea. I would have a problem tough with the Latex format
>> you require. I'm almost certain that to most Windows user, Latex is as bad
>> news as a foreign language you know nothing about. Would there be an
>> alternative to please every body?
> 
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Thu Dec 21 19:55:36 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Thu, 21 Dec 2000 13:55:36 -0600
Subject: [Rd] RH7.0 compilation
Message-ID: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>

Hi everyone,

Like most people with RH7.0 Linux, I had problems with their "experimental"
gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
in the /usr/local tree, so it will be picked up first as /usr/local/bin if
before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
straight out of the box (as well as compile Linux kernels).  One problem I
had, however, was that the Matrix package would not link, with linker
complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".

Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
I installed them and, just to check them out, recompiled R-1.2.0 with it.
It compiled fine and passed all the checks.  Moreover, now the Matrix
package compiles and installs fine.  The only thing I see different is that
while compiling R-1.2.0 I get a bunch of warnings like this:

making devices.d from devices.c
In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
nothing can be pasted after this token
making dynload.d from dynload.c

and like this

FFTab.h:2:29: warning: pasting would not give a valid preprocessing token


Cheers,

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Dec 21 20:08:26 2000
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Thu, 21 Dec 2000 21:08:26 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <200012211254.MAA02221@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Dec 21, 2000 at 12:54:53PM +0000
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk>
Message-ID: <20001221210826.A16253@tu-bs.de>

On Thu, Dec 21, 2000 at 12:54:53PM +0000, Prof Brian Ripley wrote:
> > From: "Yves Gauvreau" <cyg@sympatico.ca>
> > Date: Thu, 21 Dec 2000 06:59:30 -0500
> > 
> > Ok, I understand the problematic and I have no problems with it. The next
> > question that comes to mind is: Is there some Latex software or something
> > that one could use to produce Latex documents on a Windows platform?
> > 
> > Although I did it in the past, I would prefer not to install Linux. I'm not
> > a guru of Emacs but I'm using it quite a lot these days. Could there be
> > something that works with Emacs and with which I could produce Latex docs
> > maybe?
> 
> Here's what we recommend to Windows users.
> 
> Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
> the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
> Group TUG, or you can download the image and cut it yourself if you
> have a good Internet connection).
> 
> Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
> gives you a very capable latex mode for emacs.  This works fine on NT
> if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
> an alternative shell if you want to run latex from the menus.
> 
> Some people prefer the shareware WinEdt editor, which gives you
> a customized latex editor:
> http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
> It may work better with MikTeX.

...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).

For simple docs lyx is ideal...

see: http://www.lyx.org

PM 

-- 
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
At work: (MH-Hannover): 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec 21 20:57:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 21:57:40 +0100
Subject: [Rd] RH7.0 compilation
In-Reply-To: apjaworski@mmm.com's message of "Thu, 21 Dec 2000 13:55:36 -0600"
References: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>
Message-ID: <x27l4t3323.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> Hi everyone,
> 
> Like most people with RH7.0 Linux, I had problems with their "experimental"
> gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
> in the /usr/local tree, so it will be picked up first as /usr/local/bin if
> before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
> straight out of the box (as well as compile Linux kernels).  One problem I
> had, however, was that the Matrix package would not link, with linker
> complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".
> 
> Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
> I installed them and, just to check them out, recompiled R-1.2.0 with it.
> It compiled fine and passed all the checks.  Moreover, now the Matrix
> package compiles and installs fine.  The only thing I see different is that
> while compiling R-1.2.0 I get a bunch of warnings like this:
> 
> making devices.d from devices.c
> In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
> nothing can be pasted after this token
> making dynload.d from dynload.c
> 
> and like this
> 
> FFTab.h:2:29: warning: pasting would not give a valid preprocessing token

I think these  are harmless and it should work to remove the  ## in
the constructions

# define DYNLOADEXT  "." ## SHLIB_EXT

and

# define F77_QSYMBOL(x)	#x ## "_"

You're not supposed to use ## to stick text strings together like
that, only tokens, but it seems to have worked with all other
compilers. (I think we analyzed this earlier and decided not to change
the code, but I forgot why. Maybe we just plain forgot to fix it.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Dec 22 00:00:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 22 Dec 2000 01:00:21 +0100 (MET)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
Message-ID: <200012220000.BAA05528@pubhealth.ku.dk>


The trailing backslash seems to be the culprit.


After looking at rw1020\bin\INSTALL, I noticed

	$pkg =~ s/\/$//;

which I assume is to strip the trailing slash from a package name
before obtaining the package name and cleaning out its directory

I added 

	$pkg =~ s/\\$//;

immediately after this line. Rerunning 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

with that change seemed to work OK

The session follows further below. 

----------------------------------------
More details:

Using cmdproxy.exe under emacs shell-mode under Win98,

It seems that the problem arose when I used 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

A subsequent

	Rcmd INSTALL C:\rw1011\src\library\bqtl

also failed. 

Inspection showed that all the directories under C:\rw1011\src\library
were gone.

I reran rwinst.exe to put them back in place

then I reran

	Rcmd INSTALL C:\rw1011\src\library\bqtl

and everything seemed to go thru OK (up to creating chtml, which the
system was not configured to do anyway. But library(bqtl) works, examples
all run, all seems OK, etc.)


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

----------------------------------------

The session:



C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make: Entering an unknown directory
make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
make: Leaving an unknown directory
make: *** [pkg-.o] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of  failed ***

installing R.css in C:/RW1020/library
cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory

C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
[deleted]
C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make[1]: Entering directory `/rw1011/src/library/bqtl'
---------- Making package bqtl ------------
mkdir -p C:/RW1020/library/bqtl
cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
   adding build stamp to DESCRIPTION
make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
make[1]: Leaving directory `/rw1011/src/library/bqtl'
make: *** [pkg-bqtl] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of bqtl failed ***

installing R.css in C:/RW1020/library

[[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
 They were replaced. Then ...]]]

C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

[[[ rest deleted - the package seemed to work OK ]]]



Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Dec 22 01:24:37 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Fri, 22 Dec 2000 11:24:37 +1000
Subject: [Rd] Newsletter: "Programming Pearls"?
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>

Fritz,

Would there be much interest in a "Programming Pearls" occasional column in
the newsletter?  If so, would it help if I volunteered to edit it (and
perhaps contribute, from time to time)?

Bill.
--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Dec 22 01:04:12 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 22 Dec 2000 02:04:12 +0100
Subject: [Rd] R Newsletter: 1st Call for Articles
In-Reply-To: <20001221210826.A16253@tu-bs.de>
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk> <20001221210826.A16253@tu-bs.de>
Message-ID: <00122202173507.05946@ligarto>

> ...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).
> 
> For simple docs lyx is ideal...
> 
> see: http://www.lyx.org
> 
> PM 
> 

I've used lyx quite a bit (the linux version). For me (a former user of Word) 
it was a rather painless intro to LaTeX; you can easily export LaTeX documents,
modify them somewhere else, and later read them back into lyx to continue
working. In fact, that is how I wrote most of my dissertation (use xemacs to
work on the latex document on the department machines, and then at home import
those files into lyx in my linux box).  I specially like the display of math 
(the "what you see is what you mean" idea), and the ease for preparing tables
and importing figures. The program is very well documented, and there is a
very helpful mailing list. After playing with lyx for a while and taking peeks
at the latex code, you'll find yourself ready to go get a LaTeX book and use
latex directly when needed for those few things that Lyx does not handle that
well.

Ramn
-- 
Ramn Daz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri Dec 22 01:38:02 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 22 Dec 2000 09:38:02 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3A415CA7.2010807@SUNYSB.Edu>
Message-ID: <Pine.GSO.4.21.0012220936380.20722-100000@sununx.comp.nus.edu.sg>

Hi,
But lyx on windows is a nightmare to install, is heavily dependent on
cygwyin and i think only works on NT. So doesn't really help M$ worst
users.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Timothy H. Keitt, wrote:

> You could use Lyx (www.lyx.org).  It exports (human readable) latex.
> 
> Tim
> 
> Peter Dalgaard BSA wrote:
> 
> > "Yves Gauvreau" <cyg@sympatico.ca> writes:
> > 
> > 
> >> This is a very nice idea. I would have a problem tough with the Latex format
> >> you require. I'm almost certain that to most Windows user, Latex is as bad
> >> news as a foreign language you know nothing about. Would there be an
> >> alternative to please every body?
> > 
> > 
> > Not really, dealing with MS Word would be a nightmare, and LaTeX is
> > just about the only format with decent treatment of mathematics.
> > 
> > However, I'm pretty sure that plain ascii would also be acceptable for
> > simple articles. On the other hand, why should the editors have the
> > trouble of putting all code excerpts in \begin{verbatim} ..
> > \end{verbatim} constructs, etc.? 
> > 
> > Perhaps one could define a simplified LaTeX markup similar to .Rd.
> > 
> > Or maybe just point people towards MiKTeX and give them a crash course
> > in LaTeX? For plain text, the format is really quite simple.
> 
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 04:10:41 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 05:10:41 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220410.FAA06204@pubhealth.ku.dk>


The last line gets duplicated when a file is read like this:

    a <- scan(file=filename, what="", sep="\n",
                    strip.white=c(TRUE), quiet=TRUE)

(This error does not occur on Linux, the only other platform I
 tested.)

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20

Actually, all binaries are PA-RISC1.1

 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:01:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 22 Dec 2000 07:01:44 +0000 (GMT)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
In-Reply-To: <200012220000.BAA05528@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012220650150.16967-100000@auk.stats>

Using a trailing dir separator is wrong, and Windows is much less
tolerant of it than most Unixes.  I have not checked most of these
utilities using \, only /, as the shells I use demand \ be doubled
and do path completion only with /.

The diagnosis is correct: basename in Perl is failing when given that path.
I will add some sanity checks.

On Fri, 22 Dec 2000 cberry@tajo.ucsd.edu wrote:

> 
> The trailing backslash seems to be the culprit.
> 
> 
> After looking at rw1020\bin\INSTALL, I noticed
> 
> 	$pkg =~ s/\/$//;
> 
> which I assume is to strip the trailing slash from a package name
> before obtaining the package name and cleaning out its directory
> 
> I added 
> 
> 	$pkg =~ s/\\$//;
> 
> immediately after this line. Rerunning 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> with that change seemed to work OK
> 
> The session follows further below. 
> 
> ----------------------------------------
> More details:
> 
> Using cmdproxy.exe under emacs shell-mode under Win98,
> 
> It seems that the problem arose when I used 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> A subsequent
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> also failed. 
> 
> Inspection showed that all the directories under C:\rw1011\src\library
> were gone.
> 
> I reran rwinst.exe to put them back in place
> 
> then I reran
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> and everything seemed to go thru OK (up to creating chtml, which the
> system was not configured to do anyway. But library(bqtl) works, examples
> all run, all seems OK, etc.)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 2222)  A 
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> ----------------------------------------
> 
> The session:
> 
> 
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make: Entering an unknown directory
> make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
> make: Leaving an unknown directory
> make: *** [pkg-.o] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of  failed ***
> 
> installing R.css in C:/RW1020/library
> cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
> [deleted]
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make[1]: Entering directory `/rw1011/src/library/bqtl'
> ---------- Making package bqtl ------------
> mkdir -p C:/RW1020/library/bqtl
> cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
>    adding build stamp to DESCRIPTION
> make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
> make[1]: Leaving directory `/rw1011/src/library/bqtl'
> make: *** [pkg-bqtl] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of bqtl failed ***
> 
> installing R.css in C:/RW1020/library
> 
> [[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
>  They were replaced. Then ...]]]
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> [[[ rest deleted - the package seemed to work OK ]]]
> 
> 
> 
> Charles C. Berry                        (858) 534-2098 
>                                          Dept of Family/Preventive Medicine
> E mailto:cberry@tajo.ucsd.edu	         UC San Diego
> http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645
> 
>  
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:34:16 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 08:34:16 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220734.IAA06732@pubhealth.ku.dk>

This bug PR#672, also reported from your institution.  It has only been
reported from HP-UX, and only from your systems.  Could someone there debug
it, please?

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> 
> The last line gets duplicated when a file is read like this:
> 
>     a <- scan(file=filename, what="", sep="\n",
>                     strip.white=c(TRUE), quiet=TRUE)
> 
> (This error does not occur on Linux, the only other platform I
>  tested.)
> 
> Version:
>  platform = hppa2.0-hp-hpux10.20
>  arch = hppa2.0
>  os = hpux10.20
>  system = hppa2.0, hpux10.20
> 
> Actually, all binaries are PA-RISC1.1
> 
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
>  
> -- 
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 22 09:47:05 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 22 Dec 2000 10:47:05 +0100
Subject: [Rd] Re: Newsletter: "Programming Pearls"?
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <14915.8985.903115.127836@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 22 Dec 2000 11:24:37 +1000,
>>>>> Bill Venables (BV) wrote:

  > Fritz,
  > Would there be much interest in a "Programming Pearls" occasional column in
  > the newsletter?  If so, would it help if I volunteered to edit it (and
  > perhaps contribute, from time to time)?


Yes, that sound like a great thing ... especially as we get the final
product as you graciously offer to edit the column :-).

Thanks in advance,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Dec 22 09:59:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Dec 2000 10:59:24 +0100 (MET)
Subject: [Rd] par(lab= *) / axis(*) bug (PR#791)
Message-ID: <200012220959.KAA08629@pubhealth.ku.dk>

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 12:12:20 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 13:12:20 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221212.NAA11052@pubhealth.ku.dk>

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > The last line gets duplicated when a file is read like this:
> > 
> >     a <- scan(file=filename, what="", sep="\n",
> >                     strip.white=c(TRUE), quiet=TRUE)

> > Version:
> >  platform = hppa2.0-hp-hpux10.20

> >  major = 1
> >  minor = 2.0
> >  year = 2000
> >  month = 12
> >  day = 15

Prof Brian D Ripley wrote:

> This bug PR#672, also reported from your institution.

That would be me. I reported this bug before, for R version
1.1.0

> It has only been reported from HP-UX, and only from your
> systems. Could someone there debug it, please?

I would fix it, if I new how to. Perhaps you can suggest
something from the warning messages I get.

During compiling I get a lot of warning messages. These are for
scan.c:

	cc -I. -I../../src/include -I../../src/include
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
  -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
  -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
  -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
  -scan.c -o scan.o
cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.

I get these type of warnings when compiling other sources too:
	sock.c
	sys-std.c
	connections.c
	g_alab_her.c
	../../../R/src/main/gram.y
	iosupport.c
	main.c
	plot3d.c
	saveload.c

Other warnings I get are:

cc: "loglin.c", line 236: warning 562: Redeclaration of "collap"
  with a different storage class specifier: "collap" will have
  internal linkage.
cc: "loglin.c", line 315: warning 562: Redeclaration of "adjust"
  with a different storage class specifier: "adjust" will have
  internal linkage.

cc: "dataentry.c", line 1309: warning 562: Redeclaration of
  "closewin" with a different storage class specifier: "closewin"
  will have internal linkage.
cc: "dataentry.c", line 1553: warning 562: Redeclaration of
  "popupmenu" with a different storage class specifier:
  "popupmenu" will have internal linkage.
cc: "dataentry.c", line 1653: warning 562: Redeclaration of
  "popdownmenu" with a different storage class specifier:
  "popdownmenu" will have internal linkage.

cc: "fexact.c", line 315: warning 562: Redeclaration of "f2xact"
  with a different storage class specifier: "f2xact" will have
  internal linkage.
cc: "fexact.c", line 842: warning 562: Redeclaration of "f3xact"
  with a different storage class specifier: "f3xact" will have
  internal linkage.
cc: "fexact.c", line 1188: warning 562: Redeclaration of
  "f4xact" with a different storage class specifier: "f4xact" will
  have internal linkage.
cc: "fexact.c", line 1413: warning 562: Redeclaration of
  "f5xact" with a different storage class specifier: "f5xact" will
  have internal linkage.
cc: "fexact.c", line 1572: warning 562: Redeclaration of
  "f6xact" with a different storage class specifier: "f6xact" will
  have internal linkage.
cc: "fexact.c", line 1623: warning 562: Redeclaration of
  "f7xact" with a different storage class specifier: "f7xact" will
  have internal linkage.
cc: "fexact.c", line 1726: warning 562: Redeclaration of
  "f8xact" with a different storage class specifier: "f8xact" will
  have internal linkage.
cc: "fexact.c", line 1770: warning 562: Redeclaration of
  "f9xact" with a different storage class specifier: "f9xact" will
  have internal linkage.
cc: "fexact.c", line 1803: warning 562: Redeclaration of
  "f10act" with a different storage class specifier: "f10act" will
  have internal linkage.
cc: "fexact.c", line 1871: warning 562: Redeclaration of
  "f11act" with a different storage class specifier: "f11act" will
  have internal linkage.
cc: "fexact.c", line 1896: warning 562: Redeclaration of
  "prterr" with a different storage class specifier: "prterr" will
  have internal linkage.
cc: "fexact.c", line 1921: warning 562: Redeclaration of "iwork"
  with a different storage class specifier: "iwork" will have
  internal linkage.
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Dec 22 12:22:57 2000
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 22 Dec 2000 13:22:57 +0100
Subject: [Rd] updated tseries
Message-ID: <3A4347A1.2CFD9592@olsen.ch>

Dear colleagues,

the tseries package is updated and should now work with R-1.2.0.

best and merry Xmas

Adrian

--
Adrian Trapletti, Olsen & Associates   Ltd., See-
feldstrasse 233,   CH-8008  Zrich,   Switzerland
Phone: +41 (1) 386 48 48   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 16:53:24 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 17:53:24 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221653.RAA13197@pubhealth.ku.dk>

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:
> 
> > > The last line gets duplicated when a file is read like this:
> > > 
> > >     a <- scan(file=filename, what="", sep="\n",
> > >                     strip.white=c(TRUE), quiet=TRUE)
> 
> > > Version:
> > >  platform = hppa2.0-hp-hpux10.20
> 
> > >  major = 1
> > >  minor = 2.0
> > >  year = 2000
> > >  month = 12
> > >  day = 15
> 
> Prof Brian D Ripley wrote:
> 
> > This bug PR#672, also reported from your institution.
> 
> That would be me. I reported this bug before, for R version
> 1.1.0

It *is* in the BUGS list shipped with 1.2.0, so why send it in again
with no references to the earlier one?

> > It has only been reported from HP-UX, and only from your
> > systems. Could someone there debug it, please?
> 
> I would fix it, if I new how to. Perhaps you can suggest
> something from the warning messages I get.

No, but I do suggest you debug it.  That is, build a debug version and run
it under gdb, and find out why this happens.  Is it just scan?
Does read.table (which uses scan) do it?  Does readLines (which does not)?
Does it happen on all files?  Only on those with CRLF or only LF line
endings?  Only on those with incomplete last lines?

It might be a compiler bug, so perhaps you would like to try compiling
with gcc.


> During compiling I get a lot of warning messages. These are for
> scan.c:
> 
> 	cc -I. -I../../src/include -I../../src/include
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
>   -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
>   -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
>   -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
>   -scan.c -o scan.o

The next are the lines of signed/unsigned char warnings that occur with
more informative messages on my platforms.  You need to look up the
numbers in your manual, as we do not have a manual for your compiler.

> cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:35 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 11:30:35 -0600
Subject: [Rd] R CMD check bug
Message-ID: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:59 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 18:30:59 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221730.SAA13390@pubhealth.ku.dk>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Dec 22 17:43:50 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Fri, 22 Dec 2000 18:43:50 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221743.SAA13452@pubhealth.ku.dk>

apjaworski@mmm.com writes:

> Another, probably already known, cosmetic thing.  The nls package has the
> word Authors in the DESCRIPTION file and fails its check.  The word needs
> to read Author.

Thanks, Andy.  This part is fixed for R-1.2.1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 18:42:53 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 12:42:53 -0600
Subject: [Rd] R CMD check strange behavior
Message-ID: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>

Can anyone reproduce this strange behavior?

     R CMD check <any package> quadprog

Everything is fine.

     R CMD check quadprog <any package>

The check for quadprog works fine, but the checks for anything that follows
skip the examples portion, i.e. just run the check on the DESCRIPTION file
and format the manual.

I could not reproduce this behavior with any other combination of packages,
although I do not have lots of them installed.  I am afraid I do not know
Perl well enough to even try to fix that.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 21:15:36 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 22 Dec 2000 22:15:36 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <200012221653.RAA13197@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>

ripley@stats.ox.ac.uk skriver...

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > Prof Brian D Ripley wrote:
> > 
> > > This bug PR#672, also reported from your institution.
> > 
> > That would be me. I reported this bug before, for R version
> > 1.1.0
> 
> It *is* in the BUGS list shipped with 1.2.0, so why send it in again
> with no references to the earlier one?

Well, that was a bug in 1.1.0, this is the same bug in 1.2.0. I
didn't check the BUGS list, didn't notice there was such a file.
I'm sorry.

> It might be a compiler bug, so perhaps you would like to try compiling
> with gcc.

Usually, bugs aren't. Usually, it's that one compiler just
happens to produce code and data that won't generate an
exceptional situation you just hadn't thought of, and you won't
notice the error until you use another compiler.

Which seems to be the case here.

I fixed the bug. Luckily, I didn't have to resort to using the
HP debugger. Inspecting the code was enough to locate the
problem, once I noticed the problem occurs only when stripping
white space is selected. Here is the fix:

*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Fri Dec 22 21:51:44 2000
***************
*** 240,248 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
! 	    ;
! 	bufp++;
      }
      *bufp = '\0';
      return filled;
--- 240,247 ----
      }
   donefill:
      if (strip) {
!         while (bufp > buffer && isspace((int)(*bufp - 1)))
! 	    bufp--;
      }
      *bufp = '\0';
      return filled;



You can see what the problem was. The faulty code doesn't
prevent to test whether the characters *before* the start of the
buffer are white space, which can be anything.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:21:04 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 23 Dec 2000 10:21:04 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012230921.KAA14843@pubhealth.ku.dk>

Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Er liep twee kg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:30:32 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 10:30:32 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <Pine.LNX.4.21.0012231029540.624-100000@kleigh.nl>


Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 12:16:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 13:16:03 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>

Peter Kleiweg skriver...

[about possible compiler error]

> Usually, bugs aren't. Usually, it's that one compiler just
> happens to produce code and data that won't generate an
> exceptional situation you just hadn't thought of, and you
> won't notice the error until you use another compiler.
> 
> Which seems to be the case here.

[snip faulty patch, see other mail for correct fix]

> You can see what the problem was. The faulty code doesn't
> prevent to test whether the characters *before* the start of
> the buffer are white space, which can be anything.

I've been thinking about this. The original code was apparently
based on the assumption that (at that point in the program) the
buffer could never be empty (apart from white space). Maybe the
assumption is correct, and this bug actually is an expression of
an error somewhere else. An error with handling EOF, or
something, or even a compiler error.

Should this be checked?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Dec 23 16:45:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 23 Dec 2000 16:45:27 GMT
Subject: [Rd] Strange bug with pretty()
Message-ID: <3a45cf99.60304016@smtp1.sympatico.ca>

Here's a strange bug.  I recompiled R 1.2.0 in Windows with DEBUG=T,
and this gives pretty() some pretty strange behaviour.  If executed
just after a session opens:

 > pretty(c(-0.015,1.015))
 [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01
6.000000e-01
 [6]  8.000000e-01  1.000000e+00  1.200000e+00

The same result repeats if I repeat the command.

However, if I now ask for help on pretty, close the help window and
try again:

 > ?pretty
 > pretty(c(-0.015,1.015))
 [1] -0.2  0.0  0.2  0.4  0.6  0.8  1.0  1.2
 > 

This doesn't happen with the Windows binary distribution.  

The compiler I'm using is the mingw32 compiler, with version
information

 gcc version 2.95.2 19991024 (release)

Is this a compiler problem, a problem with DEBUG=T, or something wrong
with pretty?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec 24 15:06:31 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 24 Dec 2000 16:06:31 +0100 (MET)
Subject: [Rd] bug in strsplit(x, "") (PR#793)
Message-ID: <200012241506.QAA17086@pubhealth.ku.dk>

Instead of 

  strsplit(c("Hello", "", "World"), NULL)

(which works as expected), I used

  strsplit(c("Hello", "", "World"), "")

[[1]]
[1] "H" "e" "l" "l" "o"

[[2]]
[1] ""  "e" "l" "l" "o"

[[3]]
[1] "W" "o" "r" "l" "d"


The second element does not look like an expected result.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@ricardo.ecn.wfu.edu  Sun Dec 24 19:19:44 2000
From: cottrell@ricardo.ecn.wfu.edu (Allin Cottrell)
Date: Sun, 24 Dec 2000 14:19:44 -0500
Subject: [Rd] gretl and R: info and request
Message-ID: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>

Hello,

I thought some of you might like to know about a GNU project
that is complementary to R in some ways, namely gretl

http://ricardo.ecn.wfu.edu/gretl

(GNU Regression, Econometrics and Time-series Library).
gretl (a library with cli and gui clients, the gui using
GTK) is designed to be very user-friendly, and suitable
for teaching econometrics.  It has a fairly wide variety
of least-squares based estimators plus binary logit and
probit, and a few "nifty" features such as reading
databases over the internet and producing LaTeX output.

I've been thinking how to extend gretl to offer further
statistical methods such as Maximum Likelihood estimation,
without re-inventing the wheel, and some sort of link to
R seems the best option.  In the latest gretl I've made
a rudimentary link: an option in gretl to fork off an
instance of R (using the gnome gui if available) and 
pop the current gretl dataset into R.

At present I get the gretl data into R by writing out
a suitable .Rprofile in the cwd before the fork (in case
there's an .Rprofile there already it gets backed up,
and restored on exit from gretl).  This is a bit of a
kludge, and here's my request: It would make life
easier if you could specify a config file on the R
command line.  That way I could leave any existing
config file undisturbed.

I'm also interested in any suggestions people might have
for linkage between gretl and R.  As a longer-term
project I may study up on omegahat and look into
(a) formulating a request for R within gretl, (b)
having R execute the request, in the background and (c) 
presenting the results back in gretl.

If anyone's interested, an email reply would be appreciated
since I can't really afford to join another list right now. 

-- 
Allin Cottrell
Department of Economics
Wake Forest University, NC
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Mon Dec 25 09:27:50 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Mon, 25 Dec 2000 17:27:50 +0800 (GMT-8)
Subject: [Rd] gretl and R: info and request
In-Reply-To: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.21.0012251715390.14518-100000@sununx.comp.nus.edu.sg>

Hi,
There are a couple of ways you could go.

One would be to build your application as an R library so that it could be
called from R and access your programs functions through and API an
example of this approach is ggobi, at www.ggobi.org. 

you can embed R in your application, a neat way might be to incorporate a
python shell into your application and compile R as a python module, i
believe you can find more documentation on thi approach on the omeghat web
page.

A third way (though i find this also cludgy) is to use interapplication
communication protocols such as corba or com.

I am sure there are more ways.

happy holidays
Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 25 18:01:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Dec 2000 18:01:24 +0000 (GMT)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>

On Sat, 23 Dec 2000, Peter Kleiweg wrote:

> Peter Kleiweg skriver...
> 
> [about possible compiler error]
> 
> > Usually, bugs aren't. Usually, it's that one compiler just
> > happens to produce code and data that won't generate an
> > exceptional situation you just hadn't thought of, and you
> > won't notice the error until you use another compiler.
> > 
> > Which seems to be the case here.
> 
> [snip faulty patch, see other mail for correct fix]
> 
> > You can see what the problem was. The faulty code doesn't
> > prevent to test whether the characters *before* the start of
> > the buffer are white space, which can be anything.
> 
> I've been thinking about this. The original code was apparently
> based on the assumption that (at that point in the program) the
> buffer could never be empty (apart from white space). Maybe the
> assumption is correct, and this bug actually is an expression of
> an error somewhere else. An error with handling EOF, or
> something, or even a compiler error.
> 
> Should this be checked?

Could you send us your example file for this problem?  I think the
assumption is that a field will never be empty apart from white space.
in which case there is a simpler patch, as fields only of white space
don't put anything in the buffer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 20:40:23 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 21:40:23 +0100
Subject: [Rd] R CMD check strange behavior
In-Reply-To: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
References: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
Message-ID: <14919.45239.613518.591151@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> Can anyone reproduce this strange behavior?
>      R CMD check <any package> quadprog

> Everything is fine.

>      R CMD check quadprog <any package>

> The check for quadprog works fine, but the checks for anything that
> follows skip the examples portion, i.e. just run the check on the
> DESCRIPTION file and format the manual.

I can confirm this.  Which platform are you on?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 09:59:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 10:59:48 +0100
Subject: [Rd] R CMD check bug
In-Reply-To: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
References: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
Message-ID: <14919.6804.136666.726944@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> The R check command has a slight error in it.   Line # 123 reads
>      $#ARGV <= 1 || die "no packages were specified";

> The logical comparison should be reversed and modified, so it reads

>      $#ARGV >= 0 || die "no packages were specified";

> The original bug gives somewhat unexpected results.  Since $#ARGV
> evaluates to the number of arguments minus 1, the check command works
> fine with 1 or 2 arguments but not with more than 2.

> Another, probably already known, cosmetic thing.  The nls package has
> the word Authors in the DESCRIPTION file and fails its check.  The
> word needs to read Author.

Thanks, both fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 21:29:20 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 22:29:20 +0100
Subject: [Rd] bug in strsplit(x, "") (PR#793)
In-Reply-To: <200012241506.QAA17086@pubhealth.ku.dk>
References: <200012241506.QAA17086@pubhealth.ku.dk>
Message-ID: <14919.48176.902345.491051@mithrandir.hornik.net>

>>>>> ligges  writes:

> Instead of 
>   strsplit(c("Hello", "", "World"), NULL)

> (which works as expected), I used

>   strsplit(c("Hello", "", "World"), "")

> [[1]]
> [1] "H" "e" "l" "l" "o"

> [[2]]
> [1] ""  "e" "l" "l" "o"

> [[3]]
> [1] "W" "o" "r" "l" "d"


> The second element does not look like an expected result.

Thanks.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Dec 25 23:24:58 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 00:24:58 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012252307220.688-100000@kleigh.nl>

Prof Brian Ripley skriver...

> Could you send us your example file for this problem?  I think the
> assumption is that a field will never be empty apart from white space.
> in which case there is a simpler patch, as fields only of white space
> don't put anything in the buffer.

I've done some more tests. Duplication doesn't only happen at
the end of the file. For each non-empty line followed by an
empty line or followed by a line with only white space, a copy
of the last non-empty line gets inserted. And in addition, at the end
of the file the last non-empty line gets duplicated.

Any file will do, just a few lines; with or without empty 
lines; with or without lines that contain white space only; with
the last line with data, empty or with white space.

Here is an example data file, begin and end of line are indicated
with |

  ||
  | |
  |0|
  ||
  | 1 1 |
  | |
  |  2 2 2  |
  |  |
  |   3 3 3   |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

All lines, including the last line ends with \n

Doing this:

  scan(file="file", what="", sep="\n", strip.white=c(TRUE))

gives:

  Read 15 items
   [1] "0"     "0"     "1 1"   "1 1"   "2 2 2" "2 2 2" "3 3 3" "3 3 3" "4"
  [10] "4"     "4"     "4"     "4"     "4"     "4"

Doing this:

  scan(file="tst1",  what="", sep="\n")

correctly gives:

  Read 13 items
   [1] " "           "0"           " 1 1 "       " "           "  2 2 2  "
   [6] "  "          "   3 3 3   " "   "         "    4    "   "    "
  [11] "  "          " "           " "

The patch changes only one line of code. I don't see how you can
get a simpler patch, except that the patch may hide some
underlying problem.

After applying my patch, the first example gives the correct result:

  Read 5 items
  [1] "0"     "1 1"   "2 2 2" "3 3 3" "4" 



I have done even more tests, using a more complex data file:

  ||
  | |
  |0|
  ||
  |, 1 1 |
  | |
  |  2 , 2,2  |
  |  |
  |   ,3, 3 3 ,  |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

And this time, I define "," as separator:

  scan(file="tst2",  what="", sep=",", strip.white=c(TRUE))

The original version gives:

  Read 20 items
   [1] "0"   "0"   "0"   "1 1" "1 1" "2"   "2"   "2"   "2"   "2"   "3"   "3 3"
  [13] ""    "4"   "4"   "4"   "4"   "4"   "4"   "4"   

Again, similar copying of non-empty fields into empty fields.

The patched version gives:

  Read 11 items
   [1] "0"   ""    "1 1" "2"   "2"   "2"   ""    "3"   "3 3" ""    "4"

The last result is the same as with my non-patched version on Linux.

I guess this is what you would want: the comma's at the
beginning and at the end of the line seem to imply an empty
field. And that is what you get. I guess the same happens with
two consecutive separators on one line with only white space in
between. "strip.white" doesn't imply "skip.empty.fields".

As a side note: the current definition of scan sets strip.white
to FALSE by default, and blank.lines.skip to TRUE. However, if
sep is set to "\n", the logical thing to do would be to not skip
blank lines by default, but including them as empty fields.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 13:42:07 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 14:42:07 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
Message-ID: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>


Suppose, I have a file "data1" containing:

    450   390   467   654    30   542   334   432   421
    357   497   493   550   549   467   575   578   342
    446   547   534   495   979   479

I can read this file with:

    scan("data1")
    Read 24 items
     [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
     [20] 547 534 495 979 479    

But now, suppose I have a file "data2" containing:

    450, 390, 467, 654,  30, 542, 334, 432, 421,
    357, 497, 493, 550, 549, 467, 575, 578, 342,
    446, 547, 534, 495, 979, 479

When I try to read this with sep="," I get:

    scan("data2", sep=",")
    Read 26 items
     [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
     [20]  NA 446 547 534 495 979 479 

I get two extra fields, both NA. Not what I'd want. And I can't
drop the NA's, because there could be other NA's, not resulting
from this comma-EOL combination.

I suggest, the proper action for scan would be to treat the
combination sep plus newline as a single separator.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 14:54:29 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 14:54:29 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>

On Tue, 26 Dec 2000, Peter Kleiweg wrote:

> 
> Suppose, I have a file "data1" containing:
> 
>     450   390   467   654    30   542   334   432   421
>     357   497   493   550   549   467   575   578   342
>     446   547   534   495   979   479
> 
> I can read this file with:
> 
>     scan("data1")
>     Read 24 items
>      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
>      [20] 547 534 495 979 479    
> 
> But now, suppose I have a file "data2" containing:
> 
>     450, 390, 467, 654,  30, 542, 334, 432, 421,
>     357, 497, 493, 550, 549, 467, 575, 578, 342,
>     446, 547, 534, 495, 979, 479
> 
> When I try to read this with sep="," I get:
> 
>     scan("data2", sep=",")
>     Read 26 items
>      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
>      [20]  NA 446 547 534 495 979 479 
> 
> I get two extra fields, both NA. Not what I'd want. And I can't
> drop the NA's, because there could be other NA's, not resulting
> from this comma-EOL combination.

You can easily remove the trailing commas, though, as in

scan(pipe("sed -e s/,$// data2"), sep=",")
Read 24 items
 [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
342 446
[20] 547 534 495 979 479


> I suggest, the proper action for scan would be to treat the
> combination sep plus newline as a single separator.

However, that's not compatible with S or earlier versions of R or
the documentation 

     sep: by default, scan expects to read white-space delimited input
          fields.  Alternatively, `sep' can be used to specify a
          character which delimits fields.  A field is always delimited
          by a newline unless it is quoted.

I suggest the proper action is to act as documented!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 15:16:31 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 16:16:31 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012261614470.626-100000@kleigh.nl>

Prof Brian Ripley skriver...

>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
> 
> I suggest the proper action is to act as documented!

I know, it isn't a bug. I'd suggest to make it an extra
option in a future version of R.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:08:38 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:08:38 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>

Hi,

I see that Prof Ripley propose to pre-process the file using sed. I saw that
to do so he used "pipe". I look for it on my system (see below) and the
function doesn't seem to be available. Since I have sed from cygwin32 I
wonder if there would a way to use it in a similar fashion as proposed here?

Thanks

YG

platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R

> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> Envoye : Tuesday, December 26, 2000 9:54 AM
> A : Peter Kleiweg
> Cc : r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] More on scan: extra field at end of line
>
>
> On Tue, 26 Dec 2000, Peter Kleiweg wrote:
>
> >
> > Suppose, I have a file "data1" containing:
> >
> >     450   390   467   654    30   542   334   432   421
> >     357   497   493   550   549   467   575   578   342
> >     446   547   534   495   979   479
> >
> > I can read this file with:
> >
> >     scan("data1")
> >     Read 24 items
> >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> 549 467 575 578 342 446
> >      [20] 547 534 495 979 479
> >
> > But now, suppose I have a file "data2" containing:
> >
> >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> >     446, 547, 534, 495, 979, 479
> >
> > When I try to read this with sep="," I get:
> >
> >     scan("data2", sep=",")
> >     Read 26 items
> >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> 550 549 467 575 578 342
> >      [20]  NA 446 547 534 495 979 479
> >
> > I get two extra fields, both NA. Not what I'd want. And I can't
> > drop the NA's, because there could be other NA's, not resulting
> > from this comma-EOL combination.
>
> You can easily remove the trailing commas, though, as in
>
> scan(pipe("sed -e s/,$// data2"), sep=",")
> Read 24 items
>  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> 342 446
> [20] 547 534 495 979 479
>
>
> > I suggest, the proper action for scan would be to treat the
> > combination sep plus newline as a single separator.
>
> However, that's not compatible with S or earlier versions of R or
> the documentation
>
>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
>
> I suggest the proper action is to act as documented!
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 26 16:42:22 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 26 Dec 2000 17:42:22 +0100
Subject: [Rd] More on scan: extra field at end of line
References: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>



Yves Gauvreau wrote:
> 
> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?
> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1

pipe() is a new function of R-1.2.0.

Uwe


> year     2000
> month    August
> day      15
> language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:58:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:58:53 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>
Message-ID: <NEBBJKDJHEFCOOLFFAKKOECLCAAA.cyg@sympatico.ca>

Sorry I asked then!

Merry Christmas and happy New Year.

Yves Gauvreau

> -----Message d'origine-----
> De : Uwe Ligges [mailto:ligges@statistik.uni-dortmund.de]
> Envoye : Tuesday, December 26, 2000 11:42 AM
> A : Yves Gauvreau
> Cc : R-devel
> Objet : Re: [Rd] More on scan: extra field at end of line
> 
> 
> 
> 
> Yves Gauvreau wrote:
> > 
> > Hi,
> > 
> > I see that Prof Ripley propose to pre-process the file using 
> sed. I saw that
> > to do so he used "pipe". I look for it on my system (see below) and the
> > function doesn't seem to be available. Since I have sed from cygwin32 I
> > wonder if there would a way to use it in a similar fashion as 
> proposed here?
> > 
> > Thanks
> > 
> > YG
> > 
> > platform Windows
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    1.1
> 
> pipe() is a new function of R-1.2.0.
> 
> Uwe
> 
> 
> > year     2000
> > month    August
> > day      15
> > language R
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 17:34:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 17:34:30 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012261728510.12176-100000@toucan.stats>

On Tue, 26 Dec 2000, Yves Gauvreau wrote:

> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?

1) Yes, in 1.2.0.  I would encourage people to at least try 1.2.0,
not least as 1.2.1 is due out pretty soon and we would like to get the 
maximal number of bugs zapped.  (The PATH problem in rwinst.exe has been
solved in the version now up on CRAN.)

2) On Windows, you will need to do it in rterm: pipe does not work in
Rgui.  That's an OS deficiency that I hope to be able to work around in
time for 1.2.1, but I knew Peter Kleiweg was on HP-UX/Linux.

I suppose in part I was pointing out how neatly some of the pieces we now
have fit together.

> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1
> year     2000
> month    August
> day      15
> language R
> 
> > -----Message d'origine-----
> > De : owner-r-devel@stat.math.ethz.ch
> > [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> > Envoye : Tuesday, December 26, 2000 9:54 AM
> > A : Peter Kleiweg
> > Cc : r-devel@stat.math.ethz.ch
> > Objet : Re: [Rd] More on scan: extra field at end of line
> >
> >
> > On Tue, 26 Dec 2000, Peter Kleiweg wrote:
> >
> > >
> > > Suppose, I have a file "data1" containing:
> > >
> > >     450   390   467   654    30   542   334   432   421
> > >     357   497   493   550   549   467   575   578   342
> > >     446   547   534   495   979   479
> > >
> > > I can read this file with:
> > >
> > >     scan("data1")
> > >     Read 24 items
> > >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> > 549 467 575 578 342 446
> > >      [20] 547 534 495 979 479
> > >
> > > But now, suppose I have a file "data2" containing:
> > >
> > >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> > >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> > >     446, 547, 534, 495, 979, 479
> > >
> > > When I try to read this with sep="," I get:
> > >
> > >     scan("data2", sep=",")
> > >     Read 26 items
> > >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> > 550 549 467 575 578 342
> > >      [20]  NA 446 547 534 495 979 479
> > >
> > > I get two extra fields, both NA. Not what I'd want. And I can't
> > > drop the NA's, because there could be other NA's, not resulting
> > > from this comma-EOL combination.
> >
> > You can easily remove the trailing commas, though, as in
> >
> > scan(pipe("sed -e s/,$// data2"), sep=",")
> > Read 24 items
> >  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> > 342 446
> > [20] 547 534 495 979 479
> >
> >
> > > I suggest, the proper action for scan would be to treat the
> > > combination sep plus newline as a single separator.
> >
> > However, that's not compatible with S or earlier versions of R or
> > the documentation
> >
> >      sep: by default, scan expects to read white-space delimited input
> >           fields.  Alternatively, `sep' can be used to specify a
> >           character which delimits fields.  A field is always delimited
> >           by a newline unless it is quoted.
> >
> > I suggest the proper action is to act as documented!
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._
> >
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Dec 28 19:04:18 2000
From: joehl@web.de (joehl@web.de)
Date: Thu, 28 Dec 2000 20:04:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012281904.UAA28913@pubhealth.ku.dk>

###############################################################################

Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.

Happy New Year


Jens Oehlschlaegel


###############################################################################



###############################################################################
## windows(rescale="fixed") does not keep original device size 
## (probably device initialization error)
###############################################################################

dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


> windows(width=width, height=height, rescale="R")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fixed")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 


## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
## The Help to windows() says:
## Using `"fixed"' will leave
##     the plot size unchanged, adding scrollbars if part of the plot is
##     obscured. This setting also affects the initial re-scaling if the
##     specified window size is too big.   



###############################################################################
## windows(rescale="fit") gives strange character sizes 
## (looks like device initialization error)
###############################################################################


## In the following examples the created devices seem to be equally initialized with respect to par(din)
## However, with windows(rescale="fit") I observe different par(pin) and different character sizes in text() and strwidth()

width <- 16.53543
height <- 11.69291

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737
> fit
              x         y
din  9.22916667 6.3854167
fin  9.22916667 6.3854167
pin  8.79000000 5.7337500
text 0.07935154 0.1122302
> R
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737


> ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> ## width=16.53543, height=11.69291 as 
> fit["text", "x"]/R["din", "x"]*width
[1] 0.1415101
> ## aprox. equal 
> fixed["text", "x"]
[1] 0.1405518


## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
## the phenomenon disappears

dev.off()
dev.off()
dev.off()

width <- 9.2291667
height <- 6.3854167

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> fit
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> R
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544



###############################################################################
## wrong row distances with windows(rescale="fit")
## (looks like device initialization error)
###############################################################################


width <- 16.53543
height <- 11.69291

## as a reference
windows(width=width, height=height, rescale="fixed")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=2)

## Here rows are too close together
windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)


## Specifying smaller device size thus avoiding initial rescaling 
## makes the problem disappear

width <- 9
height <- 6

windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)

## Once correctly initialized further rescaling using the mouse does retain correct distances

dev.off()
dev.off()
dev.off()



###############################################################################
## windows(rescale="fit") destroys aspect ratio 
## (looks like device initialization error)
###############################################################################


dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


## create a device
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 

## some resizing of the window BEFORE plot() is called
# par("din") doesn't SEEM to change
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
   
# but in fact calling plot() and dev.show()
> plot(0,0)
> dev.show()
      width      height aspectratio 
   6.321506    5.562500    1.136451 

## now some resizing of the window AFTER plot() is called
> dev.show()
      width      height aspectratio 
   4.708333    4.500471    1.046187 
> dev.show()
      width      height aspectratio 
   4.718750    3.297956    1.430811 
> dev.show()
      width      height aspectratio 
  3.3255361   4.4375000   0.7494166 
> dev.show()
      width      height aspectratio 
  1.4091170   5.1145833   0.2755096 
> dev.show()
      width      height aspectratio 
  1.4062500   5.1145833   0.2749491 
> dev.show()
      width      height aspectratio 
  0.4701945   3.3854167   0.1388882 
  
## we got very differing aspect ratios
## One reason for that COULD be that the initially intended device sizes are not kept, 
## so that many rescalings cumulate the deviations.
## May be par(din) should not be changed at all (keep the representation layer stable)
## and only apply rescaling/zooming/scrolling only to the graphical presentation.



###############################################################################


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 20:23:18 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 21:23:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#795)
Message-ID: <200012282023.VAA29104@pubhealth.ku.dk>

If these things bother you, could you please supply fixes?  For some reason
you omitted the part of the help page dealing with one of these (which is
as documented), and I also think you are confusing `plot' and `device'
sizes. The latter will be the displayed device surface, I believe.

Nothing on the help page suggested that the fine details of the R read-only
parameters will be as you expected after re-scaling the plot, and it never
occurred to me that anyone would expect so.  As they are reported by the R
graphics engine (which is used unchanged), I expect they are correct in one
of the multiple interpretations.

On Thu, 28 Dec 2000 joehl@web.de wrote:

> ###############################################################################
> 
> Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.
> 
> Happy New Year
> 
> 
> Jens Oehlschlaegel
> 
> 
> ###############################################################################
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fixed") does not keep original device size 
> ## (probably device initialization error)
> ###############################################################################
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> > windows(width=width, height=height, rescale="R")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fixed")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> 
> ## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
> ## The Help to windows() says:
> ## Using `"fixed"' will leave
> ##     the plot size unchanged, adding scrollbars if part of the plot is
> ##     obscured. This setting also affects the initial re-scaling if the
> ##     specified window size is too big.   

I don't think so.  It says the `plot' size, not the `device' size which is
what par("din") reports.

> ###############################################################################
> ## windows(rescale="fit") gives strange character sizes 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> ## In the following examples the created devices seem to be equally initialized with respect to par(din)
> ## However, with windows(rescale="fit") I observe different par(pin) and 
different character sizes in text() and strwidth()
> 
> width <- 16.53543
> height <- 11.69291
> 
> windows(width=width, height=height, rescale="fixed")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fixed", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fixed <- temp
> 
> windows(width=width, height=height, rescale="fit")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fit", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fit <- temp
> 
> windows(width=width, height=height, rescale="R")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"R", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> R <- temp
> 
> # now compare
> fixed
> fit
> R
> 
> > fixed
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> > fit
>               x         y
> din  9.22916667 6.3854167
> fin  9.22916667 6.3854167
> pin  8.79000000 5.7337500
> text 0.07935154 0.1122302
> > R
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> 
> 
> > ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> > ## width=16.53543, height=11.69291 as 
> > fit["text", "x"]/R["din", "x"]*width
> [1] 0.1415101
> > ## aprox. equal 
> > fixed["text", "x"]
> [1] 0.1405518

As documented:

  Using \code{\link{strwidth}} or
  \code{\link{strheight}} after a window has been rescaled gives
  dimensions in the original units, but only approximately as they are
  derived from the metrics of the rescaled fonts.

> ## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
> ## the phenomenon disappears

Right, as documented.

> ###############################################################################
> ## wrong row distances with windows(rescale="fit")
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> width <- 16.53543
> height <- 11.69291
> 
> ## as a reference
> windows(width=width, height=height, rescale="fixed")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=2)
> 
> ## Here rows are too close together
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)

I can't reproduce that.  It may depend on the fonts available.

> ## Specifying smaller device size thus avoiding initial rescaling 
> ## makes the problem disappear
> 
> width <- 9
> height <- 6
> 
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)
> 
> ## Once correctly initialized further rescaling using the mouse does retain correct distances
> 
> dev.off()
> dev.off()
> dev.off()
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fit") destroys aspect ratio 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> ## create a device
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> ## some resizing of the window BEFORE plot() is called
> # par("din") doesn't SEEM to change
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
>    
> # but in fact calling plot() and dev.show()
> > plot(0,0)
> > dev.show()
>       width      height aspectratio 
>    6.321506    5.562500    1.136451 
> 
> ## now some resizing of the window AFTER plot() is called
> > dev.show()
>       width      height aspectratio 
>    4.708333    4.500471    1.046187 
> > dev.show()
>       width      height aspectratio 
>    4.718750    3.297956    1.430811 
> > dev.show()
>       width      height aspectratio 
>   3.3255361   4.4375000   0.7494166 
> > dev.show()
>       width      height aspectratio 
>   1.4091170   5.1145833   0.2755096 
> > dev.show()
>       width      height aspectratio 
>   1.4062500   5.1145833   0.2749491 
> > dev.show()
>       width      height aspectratio 
>   0.4701945   3.3854167   0.1388882 
>   
> ## we got very differing aspect ratios
> ## One reason for that COULD be that the initially intended device sizes are not kept, 
> ## so that many rescalings cumulate the deviations.
> ## May be par(din) should not be changed at all (keep the representation layer stable)
> ## and only apply rescaling/zooming/scrolling only to the graphical presentation.

Possibly.  I don't think the device size is very interesting after
rescaling.  What are you using it for?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 21:54:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 22:54:49 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012282154.WAA29280@pubhealth.ku.dk>

Here's what I think is going on.  

plot.lm() and everything I could see like it calls weights(object) and
resid(object).  The problem is that there is a resid.glm so one gets
deviance residuals, but there is not a weights.glm so weights.lm is used.  
The solution is to add weights.glm:

weights.glm <- function(object, type = c("prior", "working"), ...)
{
    type <- match.arg(type)
    if(type == "prior") object$prior.weights else object$weights
}

As far as I can see one either wants the default weights here and deviance
or Pearson residuals, or object$weights and the working residuals.  The
fitted object has the latter pair, which is sensible for inheriting from lm
(and compatible with S), but both plot.lm and your example use residuals()
which is not the same thing.

It seems reasonably clear from the labels that plot.lm is intended to use
standardized deviance residuals, but I am not at all sure that is the best
alternative. Davison & Snell (1991 Cox Festschrift) seem to suggest that
standardized Pearson residuals would be better, and offer other
alternatives.

I've added weights.glm.  We badly need to document the "glm" class
and subtle points like this.



On Tue, 19 Dec 2000 murdoch@stats.uwo.ca wrote:

> Here's a bug one of my students noticed.
> 
> When you call plot() on a glm object, plot.lm gets called.  The second
> plot it shows is supposed to give a normal QQ plot of the standard
> deviance residuals, but it doesn't.  The glm object created by glm.fit
> returns something (the IRLS weights?) in fit$weights which plot.lm
> takes as observation weights, so  you get strange residuals in the QQ
> plot.
> 
> For example, here I fit a simulated Poisson model where the model
> perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
> ranging between -45 and 40.
> 
> >set.seed(1)
> >x <- seq(4,5,len=1000)
> >y <- rpois(1000,exp(x))
> >fit <- glm(y ~ x, family=poisson)
> >plot(fit, which=2)
> 
> If I extract the residuals myself and plot them, I see that the model
> is fine:
> 
> >qqnorm(residuals(fit))
> 
> The problem is that the weights are big; plot.lm should be using
> prior.weights, or glm should be returning the big weights under a
> different name:
> 
> > summary(fit$weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>   54.35   69.90   89.90   93.76  115.60  148.70 
> 
> > summary(fit$prior.weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>       1       1       1       1       1       1 

Match the residuals and weights is the story.

> 
> Duncan Murdoch
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 1998)  
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 08:02:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 09:02:42 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012290802.JAA00237@pubhealth.ku.dk>

[We do have a TooMuchAtOnce category, but it is easier to cope with
short separate reports with informative subject lines for, e.g. the BUGS
list.]

On Mon, 18 Dec 2000 james.lindsey@luc.ac.be wrote:

> R1.2.0 with Linux RH5.2
> 
> I do not believe that the problems below are new to 1.2 but I only
> cover this sort of thing once a year in my course and some of that
> happened to be last Friday so too late to report for 1.2. I see that
> one or two things that I was going to report have been corrected.
> I like the fact that interactions now show : instead of .
> 
> Here is some output with comments inserted.
> 
[...]

> > wt <- codes(Reg66)!=codes(Reg71)

Why not just wt <- Reg66 != Reg71  ?

[...]

> First problem: with diagonal values weighted out in a transition matrix
> (mover-stayer model), glm wrongly estimates the diagonals to be the
> observed plus 0.1. This was correct in 90.1 a year ago but already
> wrong in 1.0.1. I don't have any versions in between installed.

I think this is the same as

[Rd] glm gives incorrect results for zero-weight cases (PR#780)

in which case it is already fixed in R-patched.  That does look to have
solved this one too.  Note that glm has *not* `estimated the diagonals'
at all.  These are predictions (the cases are not in the model), and
predict.glm did get them right.

predict(z, data)
      1       2       3       4       5       6       7       8 
0.61337 3.30334 3.45098 4.51559 3.33786 6.02783 6.17548 7.24009 
      9      10      11      12      13      14      15      16 
3.50109 6.19106 6.33871 7.40332 4.57309 7.26306 7.41071 8.47532 

[...]

> Second problem: the man page for factors states that the levels are
> sorted, but gl does not do this. It keeps them in the order of the

There is a help page for factor(), not for factors, and I don't believe
that does state so. It says that *factor* sorts them by default, which is
true.  Where is the `man page for factors'?

> labels. This is inconsistent with everything else, confusing for
> students, and liable to induce errors in data analysis. In the example
> below, it is not too important because the baseline category is the
> same in the two cases but that will not generally be the case.
> 
> As an addition comment, I would strongly recommend that, if labels can
> be coerced to numeric, they be ordered, not sorted. This is because
> the order is very confusing if there are more than 9: for example, the
> sorted 10 comes near the beginning and not at the end.

You can do that, of course, by specifying the order of the levels.  
However, we teach students that the details of the coding of linear models
are details, and that they should regard coefficients as secondary and
predictions as primary.  aov() has the right idea in suppressing the
individual coefficients.  If you want to interpret coefficients you need to
understand codings. Period.

I don't see the value of changing the default for factor: it would not be
backwards-compatible, and some people have thought thought what the default
would be and accepted it. 

> > reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> > z
> 
> Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
>      0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 
> > print(za <- glm(Freq~reg66+Reg71,family=poisson))
> 
> Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
>      0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 


> Third problem: if mean value contrasts are used, the level names are
> not attached to the variable name, but simply the number of the
> category. This rightly drives students mad and is simply
> uninterpretable if the levels have been sorted. It takes a great deal
> of extreme care to try to find out to what the numbers refer.

Are we supposed to guess that `mean value contrasts' means contr.sum?  In
which case the numbers refer to the number of the *contrast*: they do not
refer to levels, nor are single levels relevant. As in

> contr.sum(levels(Reg66))
   [,1] [,2] [,3]
CC    1    0    0
GL    0    1    0
LY    0    0    1
WM   -1   -1   -1
> contr.treatment(levels(Reg66))
   GL LY WM
CC  0  0  0
GL  1  0  0
LY  0  1  0
WM  0  0  1

Now, what should the column labels be in the first case?  And in what sense
are these `mean value contrasts'?

Do you really want labels like "CCvWM"?  They could get very cumbersome.

(One could argue that contr.treatment is already wrong, but as they
are not even contrasts ....)

[...]

> Additional comment: I recommend that the aic functions for poisson and
> binomial have the explicit calculation of the log density replaced by
> the corresponding d function with the log option. This will avoid the
> production of NAs in certain cases of zeroes in tables.

Good idea, but could you supply examples so we can put them in the
regression tests?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 08:54:54 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 09:54:54 +0100
Subject: [Rd] help with sockets
Message-ID: <3A4C515E.A54D3F3D@univie.ac.at>

i would like to use sockets to accept commands over the net.
so a socket should be a replacement for stdin.
whenever i have a complete line, i want to hand it over to the parser.

i cannot do it simply with eval because eval expects a complete
expression.

additionally, eval and evalq
seem not to accept strings.

is there an easy way to do this?

let me rephrase

my program should run a loop reading a socket,
and whenever an and of line arrives,
the string should be handled like if it had been typed on the command
line.

can this be done easily?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:25:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 09:25:03 +0000 (GMT)
Subject: [Rd] help with sockets
In-Reply-To: <3A4C515E.A54D3F3D@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10012290908210.14802-100000@toucan.stats>

On Fri, 29 Dec 2000, Erich Neuwirth wrote:

> i would like to use sockets to accept commands over the net.
> so a socket should be a replacement for stdin.
> whenever i have a complete line, i want to hand it over to the parser.
> 
> i cannot do it simply with eval because eval expects a complete
> expression.
> 
> additionally, eval and evalq
> seem not to accept strings.
> 
> is there an easy way to do this?
> 
> let me rephrase
> 
> my program should run a loop reading a socket,
> and whenever an and of line arrives,
> the string should be handled like if it had been typed on the command
> line.
> 
> can this be done easily?

Not yet, I think. This is the aim of connections (new in 1.2.0), but
socket connections are not yet fully implemented (and nothing is in the
R sources yet).  I bet you want to do this on Windows too!

First off, you need to parse, not evaluate the string: eval is called on a
parse tree.  So what you will be able to do with a socket connection
is to call eval(parse(file=conname, n = 1)) and that will read one
expression from the connection conname and then evaluate it.  So you
could run that in a loop.

I think you can fake this now.  When each line arrives, add it to a 
character vector `buffer'.  Then try parse(n = 1, text=buffer),
and if that succeeds evaluate the result and reinitialize `buffer'
to be empty.

A few details: giving parse() an incomplete expression will get a
parse error, so the call to parse has to be done inside try().
I don't know how to distinguish between an incomplete expression and a
parse error, so this strategy will only work if you always send correct
expressions.  (I met exactly the same problem using DDE connections to
S-PLUS for Windows.)  Perhaps we can make parse give different error
messages?


An alternative is to use OS facilities to do this. That is, to write a 
small program `getfromsocket' that accepts input from the socket and
writes line by line to stdout. Then just use

getfromsocket args | R (or Rterm on Windows).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:44:09 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 10:44:09 +0100 (MET)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200012290944.KAA00877@pubhealth.ku.dk>

Summary of report from Peter Perkins <pperkins@ucsd.edu> on Sat Aug 26
09:41:52 2000

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b


This seems to be intentional, but the documentation is wrong.  The C code
says

    /* If a non-vector argument was encountered (perhaps a list if */
    /* recursive = F) then we must return a list.  Otherwise, we use */
    /* the natural coercion for vector types. */

A language element (e.g. a `name') is non-vector.  So anything can go in a
list, but unlist cannot sort out anything.

S does this differently, but then it stores non-vector types differently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 11:38:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 12:38:36 +0100 (MET)
Subject: [Rd] aic in binomial models is often wrong (PR#796)
Message-ID: <200012291138.MAA01699@pubhealth.ku.dk>

The following two models are the same:

data(esoph)
glm(cbind(ncases, ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial())
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 237 

glm(ncases/(ncases+ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial(), weights=ncases+ncontrols)
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 934.4 

The second AIC value is wrong: fixed in R-patched now.

You may think you only ever use the first form, but internally
R uses the second quite a bit.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 14:31:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 15:31:03 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
Message-ID: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>


The definition for dev.copy2eps contains the following line:

    oc$paper <- "special"

The result of this is that the output will be placed in the left
bottom corner of the page. Even though dev.copy2eps is meant for
creating files that are to be included into other documents, you
might want to print the figure directly, just to see how it will
look on paper. (Of course, this will only work if the figure 
is not larger than the papersize.) When the figure is in the
left bottom corner, this is a bit awkward, because marks too
close to the edge will get lost.

I suggest to put the figure at the centre of the default paper
size (or perhaps the papersize as set as an argument by the
user). It won't matter for EPS-inclusion were on the paper
the figure is, as long as the boundingbox is set correctly.
I redefined dev.copy2eps in my ~/.Rprofile with the above line
replaced by:

    oc$paper <- "default"

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 16:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 16:06:55 +0000 (GMT)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>

On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> 
> The definition for dev.copy2eps contains the following line:
> 
>     oc$paper <- "special"
> 
> The result of this is that the output will be placed in the left
> bottom corner of the page. Even though dev.copy2eps is meant for
> creating files that are to be included into other documents, you
> might want to print the figure directly, just to see how it will
> look on paper. (Of course, this will only work if the figure 
> is not larger than the papersize.) When the figure is in the
> left bottom corner, this is a bit awkward, because marks too
> close to the edge will get lost.

Can't you print from a viewer that will fix this, in particular
take your printer's PPD into account.  EPSF is not supposed to be sent
directly to a printer.

> I suggest to put the figure at the centre of the default paper
> size (or perhaps the papersize as set as an argument by the
> user). It won't matter for EPS-inclusion were on the paper
> the figure is, as long as the boundingbox is set correctly.

It does matter in some cases, and in others it saves a *lot* of
memory. Some includers turn the whole page into a bitmap and then crop it
to the bounding box.  Others will crop to the smaller of
the Media and the bounding box, or crop to the Media only.

> I redefined dev.copy2eps in my ~/.Rprofile with the above line
> replaced by:
> 
>     oc$paper <- "default"

Please don't.  Make a copy with another name and change that.
One day you will need dev.copy2eps as intended, and you will
either be puzzled about the result or file a bug report ...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Dec 29 17:11:37 2000
From: joehl@web.de (joehl@web.de)
Date: Fri, 29 Dec 2000 18:11:37 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012291711.SAA03532@pubhealth.ku.dk>

Dear Prof. Brian Ripley,

Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)

> If these things bother you, could you please supply fixes?  

Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that. 

What I definitely can offer is testing and giving replicable bug reports. 

Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R. 

> [snipped]
> Nothing on the help page suggested that the fine details of the R read-only
> parameters will be as you expected after re-scaling the plot, and it never
> occurred to me that anyone would expect so.  
> As they are reported by the R 
> graphics engine (which is used unchanged), I expect they are correct in one 
> of the multiple interpretations. 
> [snipped]

Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).

One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.

> Possibly.  I don't think the device size is very interesting after
> rescaling.  What are you using it for?

Well, of course I try to avoid using it. 

Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.

Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device. 

Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.

Example
Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size. 

========================
windows(rescale="fixed")
does not do rescaling after device initializiation, it's basic idea is to not change the device size at all. 
However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails. 
In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
Thus the current implementation does not make sense with devices bigger than the screen.
========================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fixed")

# using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally). 
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()



======================
by constrast 
windows(rescale="fit")
works
======================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fit")

# using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands WORKS
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()

However repeated resizing of the window does increase the shown font sizes, look at that:

width <- 8
height <- 6
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
cex <- 2.8

info <- function(){
	user <- strwidth(jandltext, cex=cex, units="user")
	inches <- strwidth(jandltext, cex=cex, units="inches")
	pin <- par("pin")
	din <- par("din")
	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
}

windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
windows(width=width, height=height, rescale="fit")
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,1,0,1))
par(c("din","fin","pin"))
par("usr")
text(0.5,0.5,jandltext, cex=cex)

# Initial measures
print(static <- info())

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# we never touched horizontal window size but horiz din differs, strwidthInInches differs not

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# now everything differs

> print(static <- rbind(static, info()))
       din aspectratio pintodin   struser strinchtopin   strinch
1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing



So here is my revised bug status:

1a) windows(rescale="fixed") does not keep original device size 
1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)

2) wrong row distances with windows(rescale="fit")
   This phenomenon also observed under different circumstances
   see todays mail to r-help

3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well


Kind regards and best wishes for 2001



Jens Oehlschlgel

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 18:45:16 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 19:45:16 +0100
Subject: [Rd] R sings
Message-ID: <3A4CDBBC.3010C39@univie.ac.at>

i have created a package which allows R to play sounds
the package is available from
http://sunsite.univie.ac.at/~neuwirth/Rcsound/
both as zipped binary for windows and as installable tar.gz

preequisite:
you have to install csound on yout machine.
the necessary links are at http://www.csound.org

csound is a very portable program for creating sounds,
and using it as out sound creation tool we remain portable.

i am interested in getting feedback.

btw:
csound is NOT easy to use.
but for the purposes of our package,
it is only necessary to install it.

my package is vert preliminary,
so i would like feedback.

here is the README


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


This is a VERY preliminary version of an R package
for playing sounds.

To install, unzip the complete archive in the library directory of R.

The presequesites:
You have to install CSOUND,
a very powerful sound generation program.
Information is avalaible at http://www.csound.org
You also can find most version on
http://sunsite.univie.ac.at/pub/sound/csound/

You have to find the command line parameters
needed to run csound on your platform.
You need at least verson 4.0,
current version at design time of this package is 4.08.
our package has been tested with 
"Canonical" Csound on Linux
and DirectCsound on Win32.

option$csound.debug
and
option$csound.plain 
have to contain the command line needed to run
csound in normal mode and in debugging mode
(debugging mode means you want to see a window with csound's messages)
The package as is is configured for windows,
a comment contains the command line for Linux.

At the moment, we have only 2 instruments,
instrument 1 is a sine wave,
and
instrument 11 is a simple plucked string.

currently, the library contains 4 functions

csndPlayMono
csndPlayStereo
csndCorrphone
csndFourierTones

all these function play sequences of notes with given frequencies,
starting times, durations, and volume levels.

Basic interface functions:

csndPlayMono (instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
  file=NULL, debug.csound=FALSE)

csndPlayStereo(instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
pos = 0, 
  file=NULL, debug.csound=FALSE)

instr	instrument number
start   vector of starting times for single notes 
dur     vector of duration of single notes
vol	vector of volume of single notes
freq    vector of volume of single notes
pos     vector of positions of notes (extreme values -1 left channel, 1
right channel)
file    name of temporary file to be used as input for csound
debug.csound
	if TRUE csound window will remain visible


Attempt at "statistical" sound functions

csndCorrphone(instr, freq1, freq2, dur, vol=8000,
  file=NULL, debug.csound=FALSE)

instr	instrument number
freq1,freq2
	vector of frequencies to be played simultaneously on left and right
channel.
dur	should be a single value, used for duraion of all notes

csndFourierTones(fourcoeffs, freq=264, dur=1, vol=8000,
  file=NULL, debug.csound=FALSE)

fourcoeffs	matrix, each row is interpreted as fourier coefficients,
		and the correspronding tone is played for each row
freq		frequency of the tones (should be equal for all tones)
dur		duration in seconds
vol		volume for tones




Here are some example to try:

csndPlayMono(11,c(0:12),1,8000,264*2^(c(0:12)/12))
csndPlayStereo(11,c(0:12),1,8000,264*2^(c(0:12)/12),c(-6:6)/6)

r<-0.9
x1<-rnorm(10)
x2<-rnorm(10)
x3<-r*x1+sqrt(1-r^2)*x2
f1<-264+50*x1
f3<-264+50*x3
csndCorrphone(11,f1,f3,1)

fmat<-rbind(1/1:20,rep(c(1,0),10)*1/1:20,(1/(1:20))^2*rep(c(1,-1),10))
csndFourierTones(fmat,dur=2)







--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 22:00:21 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 23:00:21 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012292144380.739-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> > The definition for dev.copy2eps contains the following line:
> > 
> >     oc$paper <- "special"
> > 
> > The result of this is that the output will be placed in the left
> > bottom corner of the page. Even though dev.copy2eps is meant for
> > creating files that are to be included into other documents, you
> > might want to print the figure directly, just to see how it will
> > look on paper. (Of course, this will only work if the figure 
> > is not larger than the papersize.) When the figure is in the
> > left bottom corner, this is a bit awkward, because marks too
> > close to the edge will get lost.
> 
> Can't you print from a viewer that will fix this, in particular
> take your printer's PPD into account.

Usually I just print with Unix command lp. I could write a
script that would shift the image to the centre of the page
before printing. Never needed such a thing before. I'm used to
application creating EPS with images centred.

> EPSF is not supposed to be sent directly to a printer.

That's what I said. Doesn't mean you should make it
unnecessarily difficult.

> > I suggest to put the figure at the centre of the default paper
> > size (or perhaps the papersize as set as an argument by the
> > user). It won't matter for EPS-inclusion were on the paper
> > the figure is, as long as the boundingbox is set correctly.
> 
> It does matter in some cases, and in others it saves a *lot* of
> memory. Some includers turn the whole page into a bitmap and then crop it
> to the bounding box.  Others will crop to the smaller of
> the Media and the bounding box, or crop to the Media only.

I never encoutered software that behaves in such a silly matter.
But I take your word for it.

> > I redefined dev.copy2eps in my ~/.Rprofile with the above line
> > replaced by:
> > 
> >     oc$paper <- "default"
> 
> Please don't.  Make a copy with another name and change that.
> One day you will need dev.copy2eps as intended, and you will
> either be puzzled about the result or file a bug report ...

That's a sound suggestion.

Why not allow for the user to set the papersize? Instead of
having in the body of dev.copy2eps the following line:

    oc$paper <- "special"

you could put this:

    if (is.null(oc$paper))
        oc$paper <- "special"

The way it is now, I *can* specify the paper as an option, but
it is ignored in the body and replaced by "special". I think
it's annoying to have options that don't work. And being used to
working with Unix, I don't think you should "protect" people by
limiting their options.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Dec 30 14:43:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 30 Dec 2000 15:43:07 +0100
Subject: [Rd] R sings again
Message-ID: <3A4DF47B.A3DA08D0@univie.ac.at>

our server broke,
so meanwhile i have put the package files for RCsound on another server

the relevant links are

http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound.zip
http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound_0.2-1.tar.gz

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Sat Dec 30 23:21:29 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Sun, 31 Dec 2000 00:21:29 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#797)
Message-ID: <200012302321.AAA06064@pubhealth.ku.dk>


The editor in R version 1.2.0 returns an error after editing a data frame 
that has row names. This is on a Windows 2000 system, but I've encountered 
the same problem under Windows 95. Here's a simple example:

  ------------------------------------------------------------------------------------

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > data(Formaldehyde)
 > Formaldehyde
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > edit(Formaldehyde) # no problem here
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > rownames(Formaldehyde)
[1] "1" "2" "3" "4" "5" "6"
 > rownames(Formaldehyde)<-letters[1:6]
 > Formaldehyde # seems ok
   carb optden
a  0.1  0.086
b  0.3  0.269
c  0.5  0.446
d  0.6  0.538
e  0.7  0.626
f  0.9  0.782
 > edit(Formaldehyde) # I simply closed the editor without changing anything
Error in rownames<-(x, value) : dimnames applied to non-array
 >


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.0
  year = 2000
  month = 12
  day = 15
  language = R

Windows 0.0 (build 0) Service Pack 10.0 ()

Search Path:
  .GlobalEnv, package:car, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 07:55:23 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 31 Dec 2000 08:55:23 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#798)
Message-ID: <200012310755.IAA06563@pubhealth.ku.dk>

On Sun, 31 Dec 2000 jfox@mcmaster.ca wrote:

> The editor in R version 1.2.0 returns an error after editing a data frame 
> that has row names. This is on a Windows 2000 system, but I've encountered 
> the same problem under Windows 95. Here's a simple example:

Actually, that's not where the error is. If you use traceback() you
will see it is in edit.data.frame.  That tries to use row.names to set the
rownames on a list, which no longer works (and was never documented to).

The fix is to use

    out <- as.data.frame(out)
    if (edit.row.names) {
        if (any(duplicated(rn))) 
            warning("edited row names contain duplicates and will be
ignored")
        else row.names(out) <- rn
    }
    out

or, if you don't want to edit the row names,

edit(foo, edit.row.names = FALSE)

BTW, you are supposed to use row.names to get/set row names on data frame,
and rownames/colnames on a matrix.


> 
>   ------------------------------------------------------------------------------------
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0  (2000-12-15)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
>  > data(Formaldehyde)
>  > Formaldehyde
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > edit(Formaldehyde) # no problem here
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > rownames(Formaldehyde)
> [1] "1" "2" "3" "4" "5" "6"
>  > rownames(Formaldehyde)<-letters[1:6]
>  > Formaldehyde # seems ok
>    carb optden
> a  0.1  0.086
> b  0.3  0.269
> c  0.5  0.446
> d  0.6  0.538
> e  0.7  0.626
> f  0.9  0.782
>  > edit(Formaldehyde) # I simply closed the editor without changing anything
> Error in rownames<-(x, value) : dimnames applied to non-array
>  >
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.0
>   year = 2000
>   month = 12
>   day = 15
>   language = R
> 
> Windows 0.0 (build 0) Service Pack 10.0 ()
> 
> Search Path:
>   .GlobalEnv, package:car, package:ctest, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 11:53:23 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 11:53:23 GMT
Subject: [Rd] Package overview document?
Message-ID: <3a511b4d.58240644@smtp1.sympatico.ca>

I'm not sure if this is a devel or help question.

I'd like to write an overview of a package, and have it show up when
someone types

 library(help=mypackage)

or

 help(package=mypackage)

or even better, 

 ?mypackage

Right now, the first two give me a copy of the INDEX file; what I'd
like to see is a longer description.  Is it reasonable to write such a
description into the INDEX file?  Is there some other file where I can
put it, so that it will show up when someone asks about my package?

What about the latter version?  Wouldn't it be a nice improvement if
that were possible, too?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 14:11:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3a511b4d.58240644@smtp1.sympatico.ca>
Message-ID: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> I'm not sure if this is a devel or help question.

Devel, I think.

> I'd like to write an overview of a package, and have it show up when
> someone types
> 
>  library(help=mypackage)
> 
> or
> 
>  help(package=mypackage)
> 
> or even better, 
> 
>  ?mypackage
> 
> Right now, the first two give me a copy of the INDEX file; what I'd
> like to see is a longer description.  Is it reasonable to write such a
> description into the INDEX file?  Is there some other file where I can

That's what a lot of other packages do, e.g. boot.

> put it, so that it will show up when someone asks about my package?

Not if they ask the first two ways.

> What about the latter version?  Wouldn't it be a nice improvement if
> that were possible, too?

It is possible, but you need to watch namespace issues.  For example,
package sm has a file sm.Rd that gives an overview: you need it loaded
for that to work via ?sm but help(sm, package="sm") works always
(if sm is installed).

The problem is ensuring that you have a non-clashing name. dse1 has
00General.Description which seems to me to be very likely to clash.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 16:33:41 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 16:33:41 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
Message-ID: <3a4f5971.54339465@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
Ripley <ripley@stats.ox.ac.uk> wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>> I'd like to write an overview of a package, and have it show up when
>> someone types
>> 
>>  library(help=mypackage)
  ...
>> Is it reasonable to write such a
>> description into the INDEX file?  Is there some other file where I can
>
>That's what a lot of other packages do, e.g. boot.

Okay, I'll do that.  There are a couple of deficiencies, most notably
the fact that INDEX isn't used in the HTML or LaTeX versions of the
help files.  I saw in the docs somewhere that the DESCRIPTION text
would show up in the Latex output in some later version; is anyone
working on this?  If not, I might give it a shot.

>> >  ?mypackage

>It is possible, but you need to watch namespace issues.  For example,
>package sm has a file sm.Rd that gives an overview: you need it loaded
>for that to work via ?sm but help(sm, package="sm") works always
>(if sm is installed).
>
>The problem is ensuring that you have a non-clashing name. dse1 has
>00General.Description which seems to me to be very likely to clash.

I think the most obvious choice of name is the name of the package,
but that would clash fairly often with the name of a function within
it (e.g. boot), and it wouldn't show up first in alphabetical lists.
What some other help systems (e.g. Winhelp) do when a request is
ambiguous is to present a list of choices, with extra information
appended to help select.  If R did that, the clash wouldn't be such a
big deal. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 22:16:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 31 Dec 2000 22:16:39 +0000 (GMT)
Subject: [Rd] Package overview document?
In-Reply-To: <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
> Ripley <ripley@stats.ox.ac.uk> wrote:
> 
> >On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >> I'd like to write an overview of a package, and have it show up when
> >> someone types
> >> 
> >>  library(help=mypackage)
>   ...
> >> Is it reasonable to write such a
> >> description into the INDEX file?  Is there some other file where I can
> >
> >That's what a lot of other packages do, e.g. boot.
> 
> Okay, I'll do that.  There are a couple of deficiencies, most notably
> the fact that INDEX isn't used in the HTML or LaTeX versions of the
> help files.  I saw in the docs somewhere that the DESCRIPTION text
> would show up in the Latex output in some later version; is anyone
> working on this?  If not, I might give it a shot.

I've not seen that.  The latex versions are separate files, so it seems
only to make sense if running pkg2tex on a package.

> >> >  ?mypackage
> 
> >It is possible, but you need to watch namespace issues.  For example,
> >package sm has a file sm.Rd that gives an overview: you need it loaded
> >for that to work via ?sm but help(sm, package="sm") works always
> >(if sm is installed).
> >
> >The problem is ensuring that you have a non-clashing name. dse1 has
> >00General.Description which seems to me to be very likely to clash.
> 
> I think the most obvious choice of name is the name of the package,
> but that would clash fairly often with the name of a function within
> it (e.g. boot), and it wouldn't show up first in alphabetical lists.
> What some other help systems (e.g. Winhelp) do when a request is
> ambiguous is to present a list of choices, with extra information
> appended to help select.  If R did that, the clash wouldn't be such a
> big deal. 

Um. They only sometimes do that, and only for searches or perhaps indices,
never for hyperlinks. They also only cope with single help files, and the
problem here is across help sets.  It's a lot less convenient on a non-GUI
system, too.

Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
special treatment.  It will not happen soon, though, and both imposing
more standards on .Rd format and moving away from .Rd to something 
easier to parse are under discussion.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Dec  1 08:05:03 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 1 Dec 2000 09:05:03 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au>
Message-ID: <14887.23471.959713.364415@mithrandir.hornik.net>

>>>>> Robert King writes:

> On Thu, 30 Nov 2000, Prof Brian D Ripley wrote:
>> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
>> 
>> > I don't want to re-invent the wheel, and I'm trying to code up something
>> > that does a Nelder-Mead simplex method to minimise a non-linear objective
>> > function.  (I'm porting something I originally wrote in matlab, using the 
>> > optimisation toolbox funciton fmins).
>> 
>> optim(method="Nelder-Mead")
 
> Thanks.  Perhaps I should just learn to spell like the OED :-) 

>> Now how did this not come up in a search: perhaps because of the way you
>> spell optimization?  I have
 
>> which shows we probably need to find a way to check variant spellings.
>> 
>> (BTW: just in case anyone tells me the British spell with an `ise', the
>> Oxford English Dictionary does not.)

> I guess this means I should change the spelling of the
> parameterisation in the gld package functions.  What do people think
> of adding extra arguments to functions to take account of different
> spellings like this:

> example.fn _ function(parameterisation="fing",parameterization=NULL)
> {
> if (is.null(parameterization)) {parameterization_parameterisation}
> else {parameterisation_parameterization}
> print(parameterisation)
> }

> Is there a better way?

Well, first of all use `<-' rather than `_'.

We've discussed the spelling issue on r-core in some detail.  You may
notice that e.g. there are both license() and licence().  [There is a
more important issue in gray versus grey, I guess.]

I personally think that there is nothing that says that argument names
must have any meaning in any language and hence one may spell them in
any way we want.  But more realistically, in the above case I'd rather
have

	exampleFn <- function(param = "fing", ...)

which will make everyone happy.

The real issue I see is how people can find documentation if they use
different spelling, and I think we need a fuzzy grep which allows near
matches for that purpose.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Dec  1 19:47:32 2000
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 1 Dec 2000 20:47:32 +0100 (MET)
Subject: [Rd] bug in outer() (PR#755)
Message-ID: <200012011947.UAA24188@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.1.1
OS: nt4.0
Submission from: (NULL) (144.81.31.148)


sim3pl <- function(theta,i) {
p2 <- p3pl(theta,i)
p1 <- runif(1)
temp <- response(p1,p2)
return(p1)
}

when calling outer(theta,items,sim3pl), where 

theta = rnorm(100,m,s)

and 

items = seq(1:nvar)

runif(1) is only called once (instead of 100*nvar times),
even though if calling sim3pl manually, it is working ok.

best regards,
Matthias von Davier

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec  1 20:23:23 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 1 Dec 2000 12:23:23 -0800 (PST)
Subject: [Rd] bug in outer() (PR#755)
In-Reply-To: <200012011947.UAA24188@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0012011221320.10738-100000@atlas.biostat.washington.edu>

On Fri, 1 Dec 2000 mvondavier@ets.org wrote:

> 
> sim3pl <- function(theta,i) {
> p2 <- p3pl(theta,i)
> p1 <- runif(1)
> temp <- response(p1,p2)
> return(p1)
> }
> 
> when calling outer(theta,items,sim3pl), where 
> 
> theta = rnorm(100,m,s)
> 
> and 
> 
> items = seq(1:nvar)
> 
> runif(1) is only called once (instead of 100*nvar times),
> even though if calling sim3pl manually, it is working ok.

It's not a bug. That's what's supposed to happen.

outer(a,b,f) calls f() once, with two very long vectors as arguments. It
only works on vectorised functions.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Dec  2 09:17:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Dec 2000 10:17:28 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <14886.47422.630186.442419@mithrandir.hornik.net>
References: <Pine.LNX.4.10.10012010340220.23999-100000@solzhenitsyn.ens.gu.edu.au>
 <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats>
 <14886.47422.630186.442419@mithrandir.hornik.net>
Message-ID: <14888.48680.586997.442553@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 1 Dec 2000 Robert.King@mailbox.gu.edu.au wrote:
    >>> I don't want to re-invent the wheel, and I'm trying to code up something
    >>> that does a Nelder-Mead simplex method to minimise a non-linear objective
    >>> function.  (I'm porting something I originally wrote in matlab, using the 
    >>> optimisation toolbox funciton fmins).
    >>> 
    >>> Is there already something available to do this included in R?
    >>> Do people have suggestions on the best way to do this?

    >> optim(method="Nelder-Mead")

    >> Now how did this not come up in a search: perhaps because of the way you
    >> spell optimization?  I have

    >>> help.search("optimisation")
    >> No help files found with name or title matching `optimisation'
    >>> help.search("optimization")
    >> Help files with name or title matching `optimization':

    >> partition(multiv)          Partitioning by Iterative Optimization 
    >> lmeScale(nlme)             Scale for lme Optimization
    >> portfolio.optim(tseries)   Portfolio Optimization
    >> optim(base)                General-purpose Optimization
    >> optimize(base)             One Dimensional Optimization

    >> which shows we probably need to find a way to check variant spellings.

    KH> I am not sure how easy it would be to use different dicitionaries.  But
    KH> a fuzzy grep which also returns near matches should be good enough for
    KH> what we need.  Not that I have such a beast readily available, though.

Good idea!

I have had `agrep' [ = approximate grep ], a main program in C,
which is quite smart,
but the COPYRIGHT is

>> This material was developed by Sun Wu and Udi Manber
>> at the University of Arizona, Department of Computer Science.
>> Permission is granted to copy this software, to redistribute it
>> on a nonprofit basis, and to use it for any purpose, subject to
>> the following restrictions and understandings.
>> 
>> 1. Any copy made of this software must include this copyright notice
>> in full.
>> 
>> 2. All materials developed as a consequence of the use of this
>> software shall duly acknowledge such use, in accordance with the usual
>> standards of acknowledging credit in academic research.
>> 
>> 3. The authors have made no warranty or representation that the
>> operation of this software will be error-free or suitable for any
>> application, and they are under under no obligation to provide any
>> services, by way of maintenance, update, or otherwise.  The software
>> is an experimental prototype offered on an as-is basis.
>> 
>> 4. Redistribution for profit requires the express, written permission
>> of the authors.

(which is from 1992 or so)
and I vague remember having had difficulties contacting the authors...

Anyone else knowing about developments with "agrep"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Sat Dec  2 09:43:44 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Sat, 2 Dec 2000 03:43:44 -0600 (CST)
Subject: [Rd] Optimisation methods
In-Reply-To: <14888.48680.586997.442553@gargle.gargle.HOWL> from Martin Maechler at "Dec 2, 2000 10:17:28 am"
Message-ID: <200012020943.DAA00145@goose.stat.umn.edu>

Martin Maechler wrote:
> ....
> >> is an experimental prototype offered on an as-is basis.
> >> 
> >> 4. Redistribution for profit requires the express, written permission
> >> of the authors.
> 
> (which is from 1992 or so)
> and I vague remember having had difficulties contacting the authors...
> 
> Anyone else knowing about developments with "agrep"


I believe it is now available as part of Glimpse, http://webglimpse.org/

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Dec  3 08:14:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 3 Dec 2000 09:14:01 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: <200012020943.DAA00145@goose.stat.umn.edu>
References: <14888.48680.586997.442553@gargle.gargle.HOWL>
 <200012020943.DAA00145@goose.stat.umn.edu>
Message-ID: <14890.201.594509.178337@mithrandir.hornik.net>

>>>>> Luke Tierney writes:

> Martin Maechler wrote:
>> ....
>> >> is an experimental prototype offered on an as-is basis.
>> >> 
>> >> 4. Redistribution for profit requires the express, written permission
>> >> of the authors.
>> 
>> (which is from 1992 or so)
>> and I vague remember having had difficulties contacting the authors...
>> 
>> Anyone else knowing about developments with "agrep"


> I believe it is now available as part of Glimpse,
> http://webglimpse.org/

I seem to recall that too.

On my TODO list for 1.2.1 now, unless someone else feels like taking
this up?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec  3 22:19:16 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 3 Dec 2000 23:19:16 +0100 (MET)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
Message-ID: <200012032219.XAA29932@pubhealth.ku.dk>

A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
(Rdll2010.zip) for Win2k from CRAN.
(I have used the same version of R from WinNT4 *and* Win2k for some
time.)

Now I tried to produce a bitmap, but R crashes (WinNT4):
 bmp("bitmap.bmp")
 plot(1:10)
 dev.off() ## crash!

That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I cannot test on Win2k, because I removed Win2k from my box in the last
week. 
The Rdll2010 reports the same version as the original R.dll (15 Aug
2000). That's not intended, I think?

Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec  4 01:54:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Dec 2000 02:54:05 +0100
Subject: [Rd] Optimisation methods
In-Reply-To: Kurt Hornik's message of "Fri, 1 Dec 2000 09:05:03 +0100"
References: <Pine.GSO.4.05.10011301843210.26270-100000@auk.stats> <Pine.LNX.4.10.10012010747190.24303-100000@solzhenitsyn.ens.gu.edu.au> <14887.23471.959713.364415@mithrandir.hornik.net>
Message-ID: <x2bsutgddu.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> I personally think that there is nothing that says that argument names
> must have any meaning in any language and hence one may spell them in
> any way we want.  But more realistically, in the above case I'd rather
> have
> 
> 	exampleFn <- function(param = "fing", ...)
> 
> which will make everyone happy.

Not me, but "param.style=" might. (I think the above indicates that
"fing" is a parameter, not a paramete?ri[sz]ation.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec  4 06:51:11 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 4 Dec 2000 08:51:11 +0200
Subject: [Rd] R-plus Java API
Message-ID: <002b01c05dbe$9689da40$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello, I am new to r-plus package and I wanted to know if there is java =
api to the r-plus language, or jni wrapper?

Thank you very much
Regards,
Moshe

------=_NextPart_000_0028_01C05DCF.59EF6AD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, I am new to r-plus package and I =
wanted to=20
know if there is java api to the r-plus language, or jni =
wrapper?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_0028_01C05DCF.59EF6AD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec  4 07:40:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 4 Dec 2000 07:40:52 +0000 (GMT)
Subject: [Rd] crash using bmp() on windows with Rdll2010 (PR#756)
In-Reply-To: <200012032219.XAA29932@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012040733340.637-100000@auk.stats>

On Sun, 3 Dec 2000 ligges@statistik.uni-dortmund.de wrote:

> A few weeks ago I have updated R-1.1.1 for Windows with the fixed R.dll
> (Rdll2010.zip) for Win2k from CRAN.
> (I have used the same version of R from WinNT4 *and* Win2k for some
> time.)
> 
> Now I tried to produce a bitmap, but R crashes (WinNT4):
>  bmp("bitmap.bmp")
>  plot(1:10)
>  dev.off() ## crash!
> 
> That does not happen with the original R.dll from R-1.1.1 (15 Aug 2000).

I think I know why: the same thing happened to me testing the pre-release
of 1.2.0 about a week ago, which I tracked down to a problem with R.dll and
Rbitmap.dll using different malloc's but the same free.

> I cannot test on Win2k, because I removed Win2k from my box in the last
> week. 

Please revert to the original R.dll for now.  The problem will go away (at
least on NT4, and the fix is still there) when rw1020 is released in a
couple of weeks or so.

> The Rdll2010 reports the same version as the original R.dll (15 Aug
> 2000). That's not intended, I think?

Yes, it was.  The version of R (as distinct from the build) is unchanged.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec  4 13:54:01 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 4 Dec 2000 13:54:01 -0000
Subject: R: [Rd] Optimisation methods
Message-ID: <00a901c05df9$b4b059f0$0a00a8c0@bellview>

Maybe the String::Approx perl (under GPL and artistic license) module could
serve that pourpose ?

http://search.cpan.org/search?dist=String-Approx

Hope that helps.

Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Luke Tierney <luke@goose.stat.umn.edu>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: domenica 3 dicembre 2000 10.19
Oggetto: Re: [Rd] Optimisation methods


>>>>>> Luke Tierney writes:
>
>> Martin Maechler wrote:
>>> ....
>>> >> is an experimental prototype offered on an as-is basis.
>>> >>
>>> >> 4. Redistribution for profit requires the express, written permission
>>> >> of the authors.
>>>
>>> (which is from 1992 or so)
>>> and I vague remember having had difficulties contacting the authors...
>>>
>>> Anyone else knowing about developments with "agrep"
>
>
>> I believe it is now available as part of Glimpse,
>> http://webglimpse.org/
>
>I seem to recall that too.
>
>On my TODO list for 1.2.1 now, unless someone else feels like taking
>this up?
>
>-k
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 14:12:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 14:12:21 +0000 (GMT)
Subject: R: [Rd] Optimisation methods
Message-ID: <200012041412.OAA17328@toucan.stats.ox.ac.uk>


> From: "Federico Spinazzi" <spinazzi@databankgroup.it>
> Date: Mon, 4 Dec 2000 13:54:01 -0000
> 
> Maybe the String::Approx perl (under GPL and artistic license) module could
> serve that pourpose ?
> 
> http://search.cpan.org/search?dist=String-Approx
> 
> Hope that helps.

Thanks. Unfortunately we are not currently requiring perl at run time,
but apparently that module uses C, not perl, internally.

> Federico Spinazzi
> spinazzi@databankgroup.it
> Databank S.P.A
> Via Spartaco, 19, ITALY
> Tel. + 39 02 55002251
> 
> -----Messaggio originale-----
> Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
> A: Luke Tierney <luke@goose.stat.umn.edu>
> Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
> Data: domenica 3 dicembre 2000 10.19
> Oggetto: Re: [Rd] Optimisation methods
> 
> 
> >>>>>> Luke Tierney writes:
> >
> >> Martin Maechler wrote:
> >>> ....
> >>> >> is an experimental prototype offered on an as-is basis.
> >>> >>
> >>> >> 4. Redistribution for profit requires the express, written permission
> >>> >> of the authors.
> >>>
> >>> (which is from 1992 or so)
> >>> and I vague remember having had difficulties contacting the authors...
> >>>
> >>> Anyone else knowing about developments with "agrep"
> >
> >
> >> I believe it is now available as part of Glimpse,
> >> http://webglimpse.org/
> >
> >I seem to recall that too.
> >
> >On my TODO list for 1.2.1 now, unless someone else feels like taking
> >this up?
> >
> >-k
> >-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-
> >r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >Send "info", "help", or "[un]subscribe"
> >(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Mon Dec  4 16:29:56 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041629.RAA08869@pubhealth.ku.dk>


Here's a simple example:

  > x <- rnorm(20)
  > y <- 1 + 10*x + rnorm(20)
  > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
  Error in length(x) == l : comparison (1) is possible only for vector types

The problem seems to be in this section of the code for plot.formula:

  if (!missing(subset)) {
    s <- eval(m$subset, data, parent.frame())
    l <- nrow(data)
    dosub <- function(x) if (length(x) == l) 
      x[s]
    else x
    dots <- lapply(dots, dosub)
  }

Sorry, no time this morning to attempt a fix myself, but I thought it
best to get this in before 1.2 is released.


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec  4 16:57:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Dec 2000 16:57:53 +0000 (GMT)
Subject: [Rd] Bug in plot.formula (PR#757)
Message-ID: <200012041657.QAA17759@toucan.stats.ox.ac.uk>


> From: presnell@stat.ufl.edu
> Date: Mon, 4 Dec 2000 17:29:56 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Bug in plot.formula (PR#757)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Here's a simple example:
> 
>   > x <- rnorm(20)
>   > y <- 1 + 10*x + rnorm(20)
>   > plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out")
>   Error in length(x) == l : comparison (1) is possible only for vector types
> 
> The problem seems to be in this section of the code for plot.formula:
> 
>   if (!missing(subset)) {
>     s <- eval(m$subset, data, parent.frame())
>     l <- nrow(data)
>     dosub <- function(x) if (length(x) == l) 
>       x[s]
>     else x
>     dots <- lapply(dots, dosub)
>   }
> 
> Sorry, no time this morning to attempt a fix myself, but I thought it
> best to get this in before 1.2 is released.

1.2 gives another error message, but the problem is using subset and
supplying a data argument.  Try

plot(y ~ x, subset=2*(1:10),xlab="In",ylab="Out", data=data.frame(x,y))

I *think* it should be l <- nrow(mf), but the function's author might
like to confirm the intention.

> 
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Mon Dec  4 17:14:03 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Mon, 4 Dec 2000 11:14:03 -0600 (CST)
Subject: [Rd] device drivers
Message-ID: <200012041714.LAA18450@goose.stat.umn.edu>

Unless you are maintaining a device driver for R, you can ignore this
note.

If you are, two issues have come up: the need to make sure there is a
slot available for a device before allocating it and, on unix at
least, the need to turn off interrupts during device initialization.

Currently typical device driver code starts the device something like this:

	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
	...
	addDevice(dd);
	initDisplayList(dd);

To address these two problems in a device driver for R 1.2 this should
be changed to

    R_CheckDeviceAvailable();
    BEGIN_SUSPEND_INTERRUPTS {
	if (!(dd = (DevDesc *) malloc(sizeof(DevDesc))))
	    return 0;
        ...
	addDevice(dd);
	initDisplayList(dd);
    } END_SUSPEND_INTERRUPTS;

[Better yet, in case this changes before release, have a look at the
corresponding section of do_PS in the released sources.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Tue Dec  5 00:26:51 2000
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Tue, 5 Dec 2000 01:26:51 +0100 (MET)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
Message-ID: <200012050026.BAA10701@pubhealth.ku.dk>


Seems to be a day for finding peculiar little things.  There is an
inconsistency in the behavior of lm vis a vis glm:

 > x <- rnorm(15)
 > y <- 1 + 10*x + rnorm(15)
 > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
 > xyz <- data.frame(x,y,z)
 > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
 > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
 > zz <- z[1:10]
 > xx <- rnorm(10)
 > predict(fit.lm,data.frame(x=xx,z=zz))
 Error in model.frame.default(formula, data, xlev = xlev) : 
 	  factor z has new level(s) C
 > predict(fit.glm,data.frame(x=xx,z=zz))
 	   1          2          3          4          5          6 
   2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
 	   7          8          9         10 
  -9.132206  11.440242 -16.054621  -3.017842 


This happens because of the line

  mf$drop.unused.levels <- TRUE

in lm and the lack of same in glm.  I'm reporting this as a bug, but
perhaps the difference is intentional?

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Brett Presnell
Department of Statistics
University of Florida


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec  5 07:51:16 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Dec 2000 07:51:16 +0000 (GMT)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <200012050026.BAA10701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>

On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:

> 
> Seems to be a day for finding peculiar little things.  There is an
> inconsistency in the behavior of lm vis a vis glm:
> 
>  > x <- rnorm(15)
>  > y <- 1 + 10*x + rnorm(15)
>  > z <- as.factor(rep(c("A","B","C"),rep(5,3)))
>  > xyz <- data.frame(x,y,z)
>  > fit.lm <- lm(y ~ x + z, data=xyz, subset=(z != "C"))
>  > fit.glm <- glm(y ~ x + z, family=gaussian, data=xyz, subset=(z != "C"))
>  > zz <- z[1:10]
>  > xx <- rnorm(10)
>  > predict(fit.lm,data.frame(x=xx,z=zz))
>  Error in model.frame.default(formula, data, xlev = xlev) : 
>  	  factor z has new level(s) C
>  > predict(fit.glm,data.frame(x=xx,z=zz))
>  	   1          2          3          4          5          6 
>    2.570970 -18.007372  18.108771  12.498562   9.566029  10.518460 
>  	   7          8          9         10 
>   -9.132206  11.440242 -16.054621  -3.017842 
> 
> 
> This happens because of the line
> 
>   mf$drop.unused.levels <- TRUE
> 
> in lm and the lack of same in glm.  I'm reporting this as a bug, but
> perhaps the difference is intentional?

No, as the glm code is not protected from user error as the lm code is. I
am not sure it is bug (it's not documented to happen) and probably there
are several related occurrences in other modelling functions, but it would
be a desirable addition and I will change it for glm (at least).


> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 1.1
>  year = 2000
>  month = August
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -- 
> Brett Presnell
> Department of Statistics
> University of Florida
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 11:35:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 12:35:52 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: jerome@stat.ubc.ca's message of "Tue, 28 Nov 2000 20:42:55 +0100 (MET)"
References: <200011281942.UAA17414@pubhealth.ku.dk>
Message-ID: <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>

jerome@stat.ubc.ca writes:

> Bug Description:
> 
> Problem with the function pf() when the non-centrality
> parameter is large. Here is a sample command. You should
> see a smooth line from 0 to about 55, and then the values
> of pf() go crazy from 55 to 100.
> ############################
> ncp <- seq(0,100,length=200)
> plot(ncp,pf(5,7,2,ncp=ncp))
> ############################

Confirmed. I see it on Solaris as well. This looks like trouble for
power calculations...

I wouldn't be surprised if it were related to this FIXME inside
pbeta_raw (src/nmath/pbeta.c):

     else {
        /*___ FIXME ___:  This takes forever (or ends wrongly)
          when (one or) both p & q  are huge
        */

Another "interesting" display is 

plot(ncp,pf(2,7,3,ncp=ncp))

Apparently, this relates mainly to cases with small denominator DF,
but even 

plot(ncp,log(pf(5,7,200,ncp=ncp)))

looks odd. Judging from the plots, it looks as if a loop is terminated
prematurely (discontinuous jumps suggesting that there's a change to
using a different number of iterations).

On the other hand, ncp= ca.55 seems to "mark the spot" for quite
widely different DFs and the spot where that number is important could
be in pnbeta.c, at

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));

which becomes nonzero when ncp=54. This might indicate that the fault
is in this section of code:

    x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
    a0 = a + x0;
    lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
    temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
    gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
    if (a0 > a)
        q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
    else
        q = exp(-c);

(This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
which would seem to be the same thing?)

Any numerical analysts on the line? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 13:59:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 14:59:39 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 12:35:52 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> is in this section of code:
> 
>     x0 = floor(fmax2(c - ualpha * sqrt(c), 0.));
>     a0 = a + x0;
>     lbeta = lgammafn(a0) + lgammafn(b) - lgammafn(a0 + b);
>     temp = pbeta_raw(x, a0, b, /* lower = */TRUE);
>     gx = exp(a0 * log(x) + b * log(1. - x) - lbeta - log(a0));
>     if (a0 > a)
>         q = exp(-c + x0 * log(c) - lgammafn(x0 + 1.));
>     else
>         q = exp(-c);
> 
> (This code looks a bit whacked: Why is the test a0 > a and not x0 > 0,
> which would seem to be the same thing?)
> 
> Any numerical analysts on the line? 

Heh. This one goes right back to AS R84 (1990). The whole business of
calculating x0 like that is to avoid calculating a bunch of terms that
are practically zero when the noncentrality parameter is zero, and the
paper details what changes to the FORTRAN are needed to initialize the
recurrence relation for successive terms in mid-sequence. However it
forgets to say that the starting point for XJ also needs to be
changed.... 

A simple fix is to replace j=0 with j=x0, but there are a couple of
other things that might require a touchup - in particular, the whole
thing is based on single precision, so the cutoff induces an error
estimated as pnorm(-5) < 3e-7. Also, one should probably ensure that
the max iteration count is kept constant.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Dec  5 15:01:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Dec 2000 16:01:09 +0100
Subject: [Rd] non-centrality parameter in pf() (PR#752)
In-Reply-To: Peter Dalgaard BSA's message of "05 Dec 2000 14:59:39 +0100"
References: <200011281942.UAA17414@pubhealth.ku.dk> <x2ofyrnlrb.fsf@blueberry.kubism.ku.dk> <x2lmtvnf3o.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2itoyoqtl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Heh. This one goes right back to AS R84 (1990). The whole business of
> calculating x0 like that is to avoid calculating a bunch of terms that
> are practically zero when the noncentrality parameter is zero, and the
                                                           ^^^^
Whoops. Read: "large"

> paper details what changes to the FORTRAN are needed to initialize the
> recurrence relation for successive terms in mid-sequence. However it
> forgets to say that the starting point for XJ also needs to be
> changed.... 

I have now committed a fix to appear in R v. 1.2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Dec  5 18:34:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 5 Dec 2000 19:34:51 +0100 (MET)
Subject: [Rd] print buglet with small options(width = ) (PR#759)
Message-ID: <200012051834.TAA21397@pubhealth.ku.dk>

This is in R 1.1.1 and "R-devel" :

 > options(width = 10) ; pi
 [1]
 [1] 3.141593

Note the extra "[1]".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Dec  5 18:39:39 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 5 Dec 2000 19:39:39 +0100 (MET)
Subject: [Rd] Re: [R] Step function (PR#760)
Message-ID: <200012051839.TAA21437@pubhealth.ku.dk>

On Wed, 29 Nov 2000, Matt Pocernich wrote:

> I am having problem using the step function for a linear regression model.  I've created an initial model containing only the intercept.  Then using the step function, I've selected three variables to be considered for the model. 
> 
> 
> > x0.lm<- lm(MEDV~1, data = x)
> > 
> > anova(x0.lm)
> Analysis of Variance Table
> 
> Response: MEDV
>            Df Sum Sq Mean Sq F value Pr(>F)
> Residuals 505  42716      85               
> > 
> > step(x0.lm, ~ CRIM + ZN + RM)
> Start:  AIC= 2246.51 
>  MEDV ~ 1 
> 
> Error in eval(expr, envir, enclos) : Object "MEDV" not found
> >
> 
> I am not clear as to why the MEDV object ( the variable I am trying to
> predict) is not found.  I receive an identical message using the
> command > step(x0.lm).
> 

This is a bug, I think.  The problem is that the data frame is called
x. If it were called something else there wouldn't be a problem, so the
workaround is to change the name of your data frame.


Looking at traceback() the problem is that the data frame `x' is being
searched for in the environment of add1.lm by model.frame.lm().  In most
cases it doesn't find it there and goes back to the global environment,
but if the data frame is called `x' (or one of 17 other things) it finds
the wrong thing in environment(add1.lm).

In R1.1.1 I'm not sure what can be done about this -- model.frame.lm
doesn't know where to find `x' and there isn't a general solution.  In
R1.2 we have more information and should be able to look in
environment(formula(lmobject)), but we aren't doing that yet.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Dec  5 19:50:07 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 5 Dec 2000 14:50:07 -0500
Subject: [Rd] print buglet with small options(width = ) (PR#759)
In-Reply-To: <200012051834.TAA21397@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Tue, Dec 05, 2000 at 07:34:51PM +0100
References: <200012051834.TAA21397@pubhealth.ku.dk>
Message-ID: <20001205145007.J21159@jimmy.harvard.edu>

Found and fixed; I'll commit after make check has its way

On Tue, Dec 05, 2000 at 07:34:51PM +0100, maechler@stat.math.ethz.ch wrote:
> This is in R 1.1.1 and "R-devel" :
> 
>  > options(width = 10) ; pi
>  [1]
>  [1] 3.141593
> 
> Note the extra "[1]".
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Dec  6 09:12:11 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 6 Dec 2000 10:12:11 +0100 (MET)
Subject: [Rd] write.table
Message-ID: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>


Good morning, 

suppose the following:

m <- round(matrix(rnorm(16), ncol=4), 3)
a <- rev(c(0.01, 0.025, 0.05, 0.1))
rownames(m) <- a
colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
m
      0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
0.1       1.034  -0.119  -1.213   0.619
0.05      0.035   1.074   0.525   1.671
0.025    -1.687   0.960   0.324  -0.170
0.01      0.906   1.642   0.557  -2.224

and now write.table says:

write.table(m)
"X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
"0.1" "1.034" "-0.119" "-1.213" "0.619"
"0.05" "0.035" "1.074" "0.525" "1.671"
"0.025" "-1.687" "0.96" "0.324" "-0.17"
"0.01" "0.906" "1.642" "0.557" "-2.224"

If one writes 'm' into a file and reads it using read.table:

read.table("dummy")
      X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
0.1        1.034   -0.119   -1.213    0.619
0.05       0.035    1.074    0.525    1.671
0.025     -1.687    0.960    0.324   -0.170
0.01       0.906    1.642    0.557   -2.224

the colnames are incorrect. Do I miss something?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec  6 09:23:32 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 09:23:32 +0000 (GMT)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>

On Wed, 6 Dec 2000, Torsten Hothorn wrote:

> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"
> "0.1" "1.034" "-0.119" "-1.213" "0.619"
> "0.05" "0.035" "1.074" "0.525" "1.671"
> "0.025" "-1.687" "0.96" "0.324" "-0.17"
> "0.01" "0.906" "1.642" "0.557" "-2.224"
> 
> If one writes 'm' into a file and reads it using read.table:
> 
> read.table("dummy")
>       X0.25.0.75 X0.4.0.6 X0.1.0.9 X0.4.0.9
> 0.1        1.034   -0.119   -1.213    0.619
> 0.05       0.035    1.074    0.525    1.671
> 0.025     -1.687    0.960    0.324   -0.170
> 0.01       0.906    1.642    0.557   -2.224
> 
> the colnames are incorrect. Do I miss something?

Yes.  write.table converts to a data frame. Try

x <- data.frame(m, check.names=FALSE)
write.table(x)

to give it a data frame in the first place.  The help says:

       x: the object to be written, typically a data frame.  If not, it
          is attempted to create one from it.

and the names get converted during that process to valid names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From detlef.steuer@unibw-hamburg.de  Wed Dec  6 09:55:52 2000
From: detlef.steuer@unibw-hamburg.de (detlef.steuer@unibw-hamburg.de)
Date: Wed, 06 Dec 2000 10:55:52 +0100 (CET)
Subject: [Rd] write.table
In-Reply-To: <Pine.LNX.4.21.0012061008280.15865-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <XFMail.001206105552.detlef.steuer@unibw-hamburg.de>

Hi Thorsten!

On 06-Dec-00 Torsten Hothorn wrote:
> 
> Good morning, 
> 
> suppose the following:
> 
> m <- round(matrix(rnorm(16), ncol=4), 3)
> a <- rev(c(0.01, 0.025, 0.05, 0.1))
> rownames(m) <- a
> colnames(m) <- c("0.25,0.75", "0.4,0.6", "0.1,0.9", "0.4,0.9")
> m
>       0.25,0.75 0.4,0.6 0.1,0.9 0.4,0.9
> 0.1       1.034  -0.119  -1.213   0.619
> 0.05      0.035   1.074   0.525   1.671
> 0.025    -1.687   0.960   0.324  -0.170
> 0.01      0.906   1.642   0.557  -2.224
> 
> and now write.table says:
> 
> write.table(m)
> "X0.25.0.75" "X0.4.0.6" "X0.1.0.9" "X0.4.0.9"

You can see write.table is the "bad guy" here, already giving incorrect
colnames. If you use write.table(as.data.frame(m)) everything is working fine.

cu
Detlef

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 10:05:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Dec 2000 11:05:32 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 09:23:32 +0000 (GMT)"
References: <Pine.GSO.4.05.10012060920060.2551-100000@toucan.stats>
Message-ID: <x2y9xtg903.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> and the names get converted during that process to valid names.
                                                     ^^^^^^^^^^^

Just to pick a nit: Could we make a habit of distinguishing between
"names" and "identifiers"? The latter being the syntactical term in
the R language, briefly the names that you don't need to use get() to
access. "123" and "Height in cm" are valid names, but not valid
identifiers.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Dec  6 10:13:31 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 6 Dec 2000 10:13:31 +0000 (GMT)
Subject: [Rd] write.table
Message-ID: <200012061013.KAA02654@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 06 Dec 2000 11:05:32 +0100
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > and the names get converted during that process to valid names.
>                                                      ^^^^^^^^^^^
> 
> Just to pick a nit: Could we make a habit of distinguishing between
> "names" and "identifiers"? The latter being the syntactical term in
> the R language, briefly the names that you don't need to use get() to
> access. "123" and "Height in cm" are valid names, but not valid
> identifiers.

The argument is called `check.names', and has description

check.names: if `TRUE' then the names of the variables in the data
          frame are checked to ensure that they are valid variable
          names.  If necessary they are adjusted (by `make.names') so
          that they are.

So `make.names' should be renamed as `make.identifiers'.  That is
described as

make.names               package:base               R Documentation

Make Legal R Names Out of Strings

Description:

     Make legal R names out of every `names[i]' string. Invalid
     characters are translated to `"."'.


More plausibly, you are proposing a new distinction ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Wed Dec  6 19:16:00 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 06 Dec 2000 11:16:00 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
Message-ID: <871yvlicnj.fsf@jeeves.blindglobe.net>

After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
anonymous CVS), I'm unable to get it to work, i.e.:

rossini 94 > /usr/local/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.2.0 Under development (unstable) (2000-12-06)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(nlme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
  undefined symbol: dqrdca_
Error in library(nlme) : .First.lib failed
> 

Thoughts?  Changes I should look for?  Or is it just broken?  I don't
see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
copies to verify corruption of my local copy of the archive), but...

rossini 95 > /usr/bin/R

R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(nlme)
Loading required package: nls 
> 

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec  6 23:58:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 00:58:27 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: mavip1@inet.polyu.edu.hk's message of "Tue, 28 Nov 2000 06:25:26 +0100 (MET)"
References: <200011280525.GAA06952@pubhealth.ku.dk>
Message-ID: <x2k89dxfto.fsf@blueberry.kubism.ku.dk>

mavip1@inet.polyu.edu.hk writes:

> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1, -2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2,1))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> >From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.

There seems to be a rather bad numerical instability with the R code.
If we define

 polyeval<-function(coef,x){v<-0;for (i in rev(coef)) v<-v*x+i; v}

(Horner's scheme), we get 

> polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

which is kind of OK except that it looks odd that the real part is the
same for all 4 roots. Increasing the degree gives

> polyeval(10:1,polyroot(10:1))
[1] 9.230968e-08+5.257143e-08i 9.230977e-08+5.257158e-08i
[3] 9.230961e-08+5.257162e-08i 9.230956e-08+5.257151e-08i
[5] 9.230974e-08+5.257145e-08i 9.230975e-08+5.257161e-08i
[7] 9.230949e-08+5.257178e-08i 9.230974e-08+5.257161e-08i
[9] 9.230969e-08+5.257184e-08i

which is fairly OK, but it does look odd that we can't get closer to
zero than that since there are no multiple roots, and again it is
peculiar that the values are so similar. The next items in the
sequence are -ahem- interesting:

> polyeval(11:1,polyroot(11:1))
 [1] 2.305607e-06+1.791577e-05i 2.309550e-06+1.791714e-05i
 [3] 2.307622e-06+1.792101e-05i 2.304150e-06+1.791869e-05i
 [5] 2.307087e-06+1.791537e-05i 2.309716e-06+1.791873e-05i
 [7] 2.306030e-06+1.792098e-05i 2.304727e-06+1.792011e-05i
 [9] 2.308569e-06+1.791588e-05i 2.308994e-06+1.792018e-05i
> polyeval(12:1,polyroot(12:1))
 [1] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [5] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
 [9] 70.94521-90.6597i 70.94521-90.6597i 70.94521-90.6597i
> polyeval(13:1,polyroot(13:1))
 [1] -9.076647e-05-0.0003440688i -1.253803e-04-0.0003691299i
 [3] -8.894859e-05-0.0003941022i -7.310528e-05-0.0003638818i
 [5] -1.144849e-04-0.0003471283i -1.221901e-04-0.0003814892i
 [7] -7.857251e-05-0.0003869614i -7.284137e-05-0.0003760067i
 [9] -1.029218e-04-0.0003424790i -1.136443e-04-0.0003910680i
[11] -1.016283e-04-0.0003956270i -1.225930e-04-0.0003567609i
> polyeval(14:1,polyroot(14:1))
 [1]     11.28833+   28.72917i     11.28833+   28.72917i
 [3]   5809.74030-  427.90119i -19407.81458+ 3462.91985i
 [5]  -2823.47547-  494.63498i -40909.65435-10789.57874i
 [7]  -8336.95783+ 5241.26935i    344.71455- 1520.94876i
 [9]   5357.44530-24665.94094i  57313.79892-43530.37668i
[11]  11464.67537+29484.08287i  30010.79343+24624.25551i
[13]  25799.32156+53755.92101i
> polyeval(15:1,polyroot(15:1))
 [1]  4.110828e+01+5.028631e+01i  4.123746e+01+5.033469e+01i
 [3]  4.113423e+01+5.043357e+01i  4.106175e+01+5.031924e+01i
 [5]  2.130747e+06+7.226414e+05i -1.088699e+08+1.096129e+09i
 [7]  1.785940e+09+1.407187e+09i  9.750674e+10-5.059480e+10i
 [9] -3.102572e+09-9.212065e+10i  7.213065e+09-1.023845e+10i
[11]  1.682049e+10+2.202050e+10i  1.889123e+10-1.046838e+11i
[13] -6.220741e+10-4.563469e+10i -1.477005e+10-3.393510e+10i

Root finding in high-degree polynomials is known to be nasty business,
but this looks more than ordinarily bad.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Wed Dec  6 23:56:56 2000
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Wed, 6 Dec 2000 18:56:56 -0500 (EST)
Subject: [Rd] Inconsistency, possibly a bug? (PR#758)
In-Reply-To: <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
References: <200012050026.BAA10701@pubhealth.ku.dk>
 <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats>
Message-ID: <14894.53832.544699.253589@flounder.stat.ufl.edu>


In message <Pine.GSO.4.05.10012050747500.21711-100000@auk.stats> you write:
> On Tue, 5 Dec 2000 presnell@stat.ufl.edu wrote:
> > 
> > This happens because of the line
> > 
> >   mf$drop.unused.levels <- TRUE
> > 
> > in lm and the lack of same in glm.  I'm reporting this as a bug, but
> > perhaps the difference is intentional?
> 
> No, as the glm code is not protected from user error as the lm code is. I
> am not sure it is bug (it's not documented to happen) and probably there
> are several related occurrences in other modelling functions, but it would
> be a desirable addition and I will change it for glm (at least).

Seeing the same topic come up on the Snews list prompted me to revisit
this. I will preface by admitting that it is not an big issue one way
or the other, since the "problem" is easy enough to work around
(although the poster on the Snews list apparently felt otherwise).

It is handy to fit a model to a data subset selected by the levels of
a factor z, and then to use the fit for prediction with new data which
of course does not include levels of z other than those used in the
fit (that's exactly what I was doing when I noticed the inconsistency
between lm and glm).

However, this is not always quite as easy as it might otherwise be
because:

1. lm (and now glm) removes the unused levels from the factor, and

2. predict.lm and predict.glm (or more precisely model.frame.default)
   check levels() for factors in newdata against those used in the
   fit,

3. as opposed to checking the levels ACTUALLY USED in the newdata.

Of course it is not difficult to remove the unused levels from the
factors in newdata, but it would be convenient if predict would do
this automatically, or at least if there was an option to do so.

So, am I missing something obvious, or would this be a good thing to
do?

-- 
Brett Presnell
Department of Statistics
University of Florida
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec  7 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012070615.HAA29351@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 700 *
Subject: Probable bug in RODBC 0.7.x
From: emmanuel.charpentier@sap.ap-hop-paris.fr
Date: Mon, 23 Oct 2000 13:15:55 +0200 (MET DST)
--Package maintainer is aware of this
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 697 *
Subject: build errors in configure script
From: flip@skidmore.edu
Date: Mon, 16 Oct 2000 03:03:59 +0200 (MET DST)
--Mac OS X / Dylan lacks a -lm
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 760 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 741 *
Subject: match() is not correct for "close numerics"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 21 Nov 2000 16:15:23 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
* PR# 743 *
Subject: Re: [Rd] How do you construct a function from a list?
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 22 Nov 2000 12:57:19 GMT
* PR# 748 *
Subject: Problem with NAs using chisq.test()
From: kjetikj@astro.uio.no
Date: Sun, 26 Nov 2000 21:21:22 +0100 (MET)
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
* PR# 749 *
Subject: (NA || x) and (NA && y)  {another "bug" }
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 09:25:38 +0100
* PR# 753 *
Subject: Re: [R] Step function
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 29 Nov 2000 10:30:26 -0800 (PST)
* PR# 752 *
Subject: non-centrality parameter in pf()
From: Jerome Asselin <jerome@stat.ubc.ca>
Date: Tue, 28 Nov 2000 11:43:06 -0800 (PST)
* PR# 755 *
Subject: bug in outer()
From: mvondavier@ets.org
Date: Fri, 1 Dec 2000 20:47:30 +0100 (MET)
* PR# 754 *
Subject: means in arima0
From: arto.luoma@uta.fi
Date: Thu, 30 Nov 2000 14:02:55 +0100 (MET)
* PR# 757 *
Subject: Bug in plot.formula
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 11:29:36 -0500 (EST)
* PR# 756 *
Subject: crash using bmp() on windows with Rdll2010
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Sun, 03 Dec 2000 23:19:58 +0100
* PR# 759 *
Subject: print buglet with small options(width = )
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 5 Dec 2000 19:34:57 +0100
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 13:22:25 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 14:22:25 +0100
Subject: [Rd] write.table
In-Reply-To: Prof Brian Ripley's message of "Wed, 6 Dec 2000 10:13:31 +0000 (GMT)"
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk>
Message-ID: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > Just to pick a nit: Could we make a habit of distinguishing between
> > "names" and "identifiers"? The latter being the syntactical term in
> > the R language, briefly the names that you don't need to use get() to
> > access. "123" and "Height in cm" are valid names, but not valid
> > identifiers.
> 
> The argument is called `check.names', and has description
> 
> check.names: if `TRUE' then the names of the variables in the data
>           frame are checked to ensure that they are valid variable
>           names.  If necessary they are adjusted (by `make.names') so
>           that they are.
> 
> So `make.names' should be renamed as `make.identifiers'.  That is
> described as
> 
> make.names               package:base               R Documentation
> 
> Make Legal R Names Out of Strings
> 
> Description:
> 
>      Make legal R names out of every `names[i]' string. Invalid
>      characters are translated to `"."'.
> 
> 
> More plausibly, you are proposing a new distinction ....

Hmm. The current distinction would seem to be between "names" and
"legal R names" or "valid variable names", of which certainly the
latter is misleading since you can easily have variables with weird
names like "[<-". But you're probably right that we are to some extent
stuck with existing terminology, here and elsewhere. I think I would
want to push a convention of using "R names" for the syntactical
entities, then.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Dec  7 13:54:32 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 7 Dec 2000 08:54:32 -0500
Subject: [Rd] write.table
In-Reply-To: <x2zoi85pta.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Dec 07, 2000 at 02:22:25PM +0100
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <20001207085432.J25921@jimmy.harvard.edu>

If anyone does find the time to delve into the naming of columns, one
thing that would be pretty nice is if the I() operator was stripped. 
It, and possibly some other special operators, probably shouldn't be
propagate. They really are about handling rather than naming and this
causes some minor annoyances when complex objects are put into dataframes.
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Dec  7 14:23:02 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 7 Dec 2000 09:23:02 -0500 (EST)
Subject: [Rd] write.table
References: <200012061013.KAA02654@toucan.stats.ox.ac.uk> <x2zoi85pta.fsf@blueberry.kubism.ku.dk>
Message-ID: <200012071423.JAA23196@jessie.research.bell-labs.com>

> Cc: p.dalgaard@biostat.ku.dk, r-devel@stat.math.ethz.ch
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 07 Dec 2000 14:22:25 +0100
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > Just to pick a nit: Could we make a habit of distinguishing between
> > > "names" and "identifiers"? The latter being the syntactical term in
> > > the R language, briefly the names that you don't need to use get() to
> > > access. "123" and "Height in cm" are valid names, but not valid
> > > identifiers.
> > 
> > The argument is called `check.names', and has description
> > 
> > check.names: if `TRUE' then the names of the variables in the data
> >           frame are checked to ensure that they are valid variable
> >           names.  If necessary they are adjusted (by `make.names') so
> >           that they are.
> > 
> > So `make.names' should be renamed as `make.identifiers'.  That is
> > described as
> > 
> > make.names               package:base               R Documentation
> > 
> > Make Legal R Names Out of Strings
> > 
> > Description:
> > 
> >      Make legal R names out of every `names[i]' string. Invalid
> >      characters are translated to `"."'.
> > 
> > 
> > More plausibly, you are proposing a new distinction ....
> 
> Hmm. The current distinction would seem to be between "names" and
> "legal R names" or "valid variable names", of which certainly the
> latter is misleading since you can easily have variables with weird
> names like "[<-". But you're probably right that we are to some extent
> stuck with existing terminology, here and elsewhere. I think I would
> want to push a convention of using "R names" for the syntactical
> entities, then.  
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

The original S language authors shoulder the blame here, if there
maybe was a way to make the distinctions clearer by choosing
terminology better.  Being stuck with a vague use of `name', let me
suggest something roughly as follows.

(By the way, should this be on the FAQ?  I didn't see it there.)

The term `name' is used in four different (but related) ways in the
language:

1.  A `syntactic name' is a string the parser interprets as this type
    of expression.  It consists of letters, numbers, and the dot
    character and starts with a letter or the dot.

2.  An `object name' is a string associated with an object that is
    assigned in an expression either by having the object name on the
    left of an assignment operation or as an argument to the `assign'
    function.  It is usually a syntactic name as well, but can be any
    non-empty string if it is quoted (and it's always quoted in the
    call to `assign').

3.  An `argument name' is what appears to the left of the equals sign
    when supplying an argument in a function call (for example,
    `f(trim=.5)').  Argument names are also usually syntactic names,
    but again can be anything if they are quoted.

4. A `file name' is a string identifying a file in the operating
   system for reading, writing, etc.  It really has nothing much to do
   with names in the language, but it's traditional to call these
   strings file `names'.

I'd slightly discourage using the term "R name" because there is
nothing really R-dependent here.

There are some more details one can mention, such as that
non-syntactic argument names are usually only going to be matched by
"..." since the parser requires syntactic names for formal arguments.
But such details probably will only confuse if put in the FAQ.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Dec  7 15:18:29 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 07 Dec 2000 10:18:29 -0500
Subject: [Rd] BUG: polyroot() (PR#751)
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A2FAA45.6CBA4942@bank-banque-canada.ca>

Peter

I noticed with the original problem that there was a difference between R 1.1.1
and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
since you get

>> polyeval(1:5,polyroot(1:5))
>[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
>[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i

and with my snapshot I get
> polyeval(1:5,polyroot(1:5))
[1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
[3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i

I expect you probably know more about the change than I do, but though I would warn
you anyway.

Polynomial root solutions can be notoriously ill conditioned, but the problem in the
bug report does not seem too bad. (At least the answer does not change much  with
small coefficient perturbations.)  One of the things I noticed in the bug report
problem was that polyroot did not seem to be giving complex conjugate pairs.
(Although, perhaps I did not look closely enough.) In your example it is not too bad
but does starts to show up:

print(polyroot(11:1), digits=12)
 [1]  0.953246161338+0.725110449959i -0.884658051302+0.959966734829i
 [3] -0.884658773085-0.959966532398i  0.953246339786-0.725110604788i
 [5]  0.442765752789+1.173740513854i -1.264630746148+0.357262003979i
 [7] -0.246722911623-1.262885538489i  0.442765716343-1.173740954848i
 [9] -0.246722399601+1.262885188965i -1.264631088498-0.357261261065i
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Dec  7 15:52:59 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 7 Dec 2000 16:52:59 +0100 (MET)
Subject: [Rd] Minor error in ?read.table (PR#761)
Message-ID: <200012071552.QAA17553@pubhealth.ku.dk>

The parameters to read.table include "strip.write", but this is
documented as "skip.white" in the help file.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec  7 16:33:22 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Dec 2000 17:33:22 +0100
Subject: [Rd] BUG: polyroot() (PR#751)
In-Reply-To: Paul Gilbert's message of "Thu, 07 Dec 2000 10:18:29 -0500"
References: <200011280525.GAA06952@pubhealth.ku.dk> <x2k89dxfto.fsf@blueberry.kubism.ku.dk> <3A2FAA45.6CBA4942@bank-banque-canada.ca>
Message-ID: <x2lmts5gz1.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Peter
> 
> I noticed with the original problem that there was a difference between R 1.1.1
> and the R 1.2  snapshot from a few weeks ago. I would guess you are not running 1.2
> since you get
> 
> >> polyeval(1:5,polyroot(1:5))
> >[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
> >[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
> 
> and with my snapshot I get
> > polyeval(1:5,polyroot(1:5))
> [1]  3.330669e-16+5.828671e-16i  3.330669e-16+2.220446e-16i
> [3] -2.220446e-16-3.885781e-16i  3.330669e-16-5.828671e-16i
> 
> I expect you probably know more about the change than I do, but though I would warn
> you anyway.

Hm? With the current version, I'm still getting

>  polyeval(1:5,polyroot(1:5))
[1] -2.220446e-16-2.664833e-16i -2.220446e-16-1.554475e-16i
[3] -2.220446e-16+1.436839e-16i -2.220446e-16-5.076235e-16i
>

> version
         _                           
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    2.0                         
year     2000                        
month    12                          
day      07                          
language R                           

However, my 1.1.1 is different:

> polyeval(1:5,polyroot(1:5))
[1] 1.110223e-16-3.669889e-16i 0.000000e+00-6.722053e-16i
[3] 0.000000e+00-5.759824e-16i 6.661338e-16-4.592409e-16i
> polyeval(1:10,polyroot(1:10))
[1] -2.815017e-08-3.472720e-09i -2.815014e-08-3.472730e-09i
[3]  3.468454e+04-3.084396e+04i  5.016033e+04-6.107187e+04i
[5]  2.728165e+04+3.719825e+04i -3.455245e+04-4.233822e+03i
[7] -9.016302e+04+5.754516e+04i -7.508538e+04-7.772126e+04i
[9]  3.560675e+04+6.973712e+04i
> polyeval(1:9,polyroot(1:9))
[1] 1.127987e-13+7.833802e-13i 1.130207e-13+7.832323e-13i
[3] 1.127987e-13+7.838768e-13i 1.117995e-13+7.844319e-13i
[5] 5.270229e-13+8.071365e-13i 2.582379e-13+7.174489e-13i
[7] 1.179057e-13+6.123224e-13i 1.865175e-13+6.731772e-13i


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Dec  7 18:38:51 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 7 Dec 2000 19:38:51 +0100
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: <871yvlicnj.fsf@jeeves.blindglobe.net>
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
Message-ID: <14895.55611.916434.302780@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> After installing nlme_3.1-7.tar.gz  under the latest R (1.2.0, via
> anonymous CVS), I'm unable to get it to work, i.e.:

> rossini 94 > /usr/local/bin/R

> R : Copyright 2000, The R Development Core Team
> Version 1.2.0 Under development (unstable) (2000-12-06)

> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.

> R is a collaborative project with many contributors.
> Type `contributors()' for more information.

> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.

>> library(nlme)
> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/usr/local/lib/R/library/nlme/libs/nlme.so":
>   undefined symbol: dqrdca_
> Error in library(nlme) : .First.lib failed
>> 

> Thoughts?  Changes I should look for?  Or is it just broken?  I don't
> see this on my local copy of R 1.1.1 (and I "reinstalled" nlme on both
> copies to verify corruption of my local copy of the archive), but...

R 1.2.0 will need a new version of nlme which should be made available
shortly.

I assume you did not reinstall the version under 1.2.0?  :-)  Well this
would not even compile right now.  A quick fix I think is to copy files
S_compat.{c,h} from the 1.1.1 distribution to nlme/src, change
	#include <S_compat.h>
in S_compat.c to
	#include "S_compat.h"
and rebuild.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Dec  7 18:49:09 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 07 Dec 2000 10:49:09 -0800
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: Kurt Hornik's message of "Thu, 7 Dec 2000 19:38:51 +0100"
References: <871yvlicnj.fsf@jeeves.blindglobe.net>
 <14895.55611.916434.302780@mithrandir.hornik.net>
Message-ID: <87lmtskqxm.fsf@jeeves.blindglobe.net>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

    KH> R 1.2.0 will need a new version of nlme which should be made
    KH> available shortly.

I have it, thanks VERY much to Doug, and it "appears" to be giving
reasonable results for our data.  I'll know a bit more by the end of
next week, since we'll be using it mixed with R 1.1.1 for exploratory
simulations (power sims, so we "know" the truth).

    KH> I assume you did not reinstall the version under 1.2.0?  :-)

I did reinstall, and it did compile.  There might be some left-over
files from the update.  I'll have to check if I'm removing
non-pertinent files on upgrade.

    KH> Well this would not even compile right now.  A quick fix I
    KH> think is to copy files S_compat.{c,h} from the 1.1.1
    KH> distribution to nlme/src, change #include <S_compat.h> in
    KH> S_compat.c to #include "S_compat.h" and rebuild.

For what it's worth:

I did the first, not the second (changing the include), and it still
didn't work (the quick fix).  I'll not try the second, unless the sims
barf in my face.

Thanks!

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec  7 19:48:05 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Dec 2000 13:48:05 -0600
Subject: [Rd] Changes in R 1.2.0 devel?
In-Reply-To: rossini@blindglobe.net's message of "07 Dec 2000 10:49:09 -0800"
References: <871yvlicnj.fsf@jeeves.blindglobe.net> <14895.55611.916434.302780@mithrandir.hornik.net> <87lmtskqxm.fsf@jeeves.blindglobe.net>
Message-ID: <6rn1e8hv2i.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

>     KH> Well this would not even compile right now.  A quick fix I
>     KH> think is to copy files S_compat.{c,h} from the 1.1.1
>     KH> distribution to nlme/src, change #include <S_compat.h> in
>     KH> S_compat.c to #include "S_compat.h" and rebuild.
> 
> For what it's worth:
> 
> I did the first, not the second (changing the include), and it still
> didn't work (the quick fix).  I'll not try the second, unless the sims
> barf in my face.

You would need to do both.  There are some .Fortran calls in the R
sources that require one of the routines that used to be in S_compat.c

I am currently testing nlme_3.1-8.  It will be on CRAN by the time
R-1.2.0 is released.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spoon@hilbert.maths.utas.edu.au  Fri Dec  8 07:29:51 2000
From: spoon@hilbert.maths.utas.edu.au (spoon@hilbert.maths.utas.edu.au)
Date: Fri, 8 Dec 2000 08:29:51 +0100 (MET)
Subject: [Rd] nmath bug (PR#762)
Message-ID: <200012080729.IAA20144@pubhealth.ku.dk>

Hi,
	I've been playing with the standalone math library (R.1.1.1,
Redhat 7 i386), and have detected a problem with rpois.


Basically, the rejection step in rpois can result in an infinite loop.
The simplest thing I can come up with that reproduces the problem is
the following.


#include <stdio.h>
#include <math.h>
#include <time.h>

#define MATHLIB_STANDALONE
#include "Mathlib.h"

int main() {
  double d;

  set_seed(976259805U,2968367341U);

  for(long k=0; k<10; k++) {
    for(long k=0; k<10000; k++) d = rpois(4500);
    for(long k=0; k<250000; k++) d = rpois(100);
    printf(".");
    fflush(stdout);
  }
}

Fro me this prints 3 dots and then hangs.

I realize calling rpois with means this large is probably not the
wisest thing to do, nevertheless, I still consider the infinite loop
to be a bug, hence this report.

Sorry that I cannot give a simpler example than this, its taken me
quite a while to get this far, and as my debugging efforts were going
nowhere, I thought it better to throw it out to the wider community.

Simon




-- 
*****************************************************************
*  Simon Wotherspoon                               _--_|\       *
*  Maths Dept, University of Tasmania             /  Aus \      *
*  Tasmania, Australia                            \_.--._/      *
*  spoon@hilbert.maths.utas.edu.au                      v       *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec  8 10:38:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Dec 2000 11:38:29 +0100
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: spoon@hilbert.maths.utas.edu.au's message of "Fri, 8 Dec 2000 08:29:51 +0100 (MET)"
References: <200012080729.IAA20144@pubhealth.ku.dk>
Message-ID: <x23dfzp596.fsf@blueberry.kubism.ku.dk>

spoon@hilbert.maths.utas.edu.au writes:

> Hi,
> 	I've been playing with the standalone math library (R.1.1.1,
> Redhat 7 i386), and have detected a problem with rpois.
> 
> 
> Basically, the rejection step in rpois can result in an infinite loop.
> The simplest thing I can come up with that reproduces the problem is
> the following.

Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
that are known to affect rpois...

In order to get something that has a decent chance of working you
should probably use a *very* recent gcc from the rawhide distribution,
and try a snapshot of 1.2.0. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Dec  8 13:22:17 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 08 Dec 2000 14:22:17 +0100 (CET)
Subject: [Rd] nmath bug (PR#762)
In-Reply-To: <x23dfzp596.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.001208142217.plummer@iarc.fr>

On 08-Dec-00 Peter Dalgaard BSA wrote:
> spoon@hilbert.maths.utas.edu.au writes:
> 
>> Hi,
>>      I've been playing with the standalone math library (R.1.1.1,
>> Redhat 7 i386), and have detected a problem with rpois.
>> 
>> 
>> Basically, the rejection step in rpois can result in an infinite loop.
>> The simplest thing I can come up with that reproduces the problem is
>> the following.
> 
> Hmm. There are bugs in rpois from 1.1.1 *and* compiler bugs in redhat7
> that are known to affect rpois...
> 
> In order to get something that has a decent chance of working you
> should probably use a *very* recent gcc from the rawhide distribution,
> and try a snapshot of 1.2.0.

To be precise, you will need gcc-2.96-65 from the rawhide distribution.
However, this does not seem to have been released yet: I just checked on
ftp.redhat.com and the latest release is -64.

For details see
http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=21423

Alternatively you can install gcc-2.95 (the latest *stable* compiler from
the gcc development team), which does not suffer from this bug.  If you want
to do this, look in the directory bin/linux/redhat/7.x/DIY/ on CRAN for
some tips.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Dec  8 23:47:24 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 08 Dec 2000 15:47:24 -0800
Subject: [Rd] LME and cat()
Message-ID: <87d7f2fpbn.fsf@jeeves.blindglobe.net>

(please keep sebastian cc'd)

Doug -

we are managing to trigger, both on R 1.1.1 and R 1.2.0 (proper
versions of NLME), the following:

>  warnings(model1)
Warning message:
Singular precision matrix in level -1, block 1 Error in cat(list(...), file, sep, fill, labels, append) : 
	argument 2 not yet handled by cat
> 

suggesting either an "inappropriate" use of cat(), or a problem with
how we are running lme().   Thoughts, suggestions?  We can provide
sample code to create this warning again, if needed.

(Estimates are still "looking right", but we'd like verification that
something's not broken...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Mon Dec 11 07:34:58 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Mon, 11 Dec 2000 09:34:58 +0200
Subject: [Rd] Examples C++ to R
Message-ID: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello all=20

I am new to R and I wanted to know how I can call R functions from c/c++ =
and Java classes?

If you can be detailed in this answer I will be very glad.

Thank you
Regards,
Moshe

------=_NextPart_000_003C_01C06355.A09C4620
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello all </FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I am new to R and I wanted to know how =
I can call R=20
functions from c/c++ and Java classes?</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>If you can be detailed in this answer I =
will be=20
very glad.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV></BODY></HTML>

------=_NextPart_000_003C_01C06355.A09C4620--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 11 08:05:45 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 11 Dec 2000 08:05:45 +0000 (GMT)
Subject: [Rd] Examples C++ to R
In-Reply-To: <003f01c06344$dd28d2e0$45a8a8c0@iimpact.com>
Message-ID: <Pine.GSO.4.05.10012110801480.22103-100000@auk.stats>

On Mon, 11 Dec 2000, Moshe Recanati <moshe@i-impact.com> wrote:

> Hello all 
> 
> I am new to R and I wanted to know how I can call R functions from c/c++ and Java classes?
> 
> If you can be detailed in this answer I will be very glad.

If you can be detailed in the question, it would help!  Which OS, for
example?  Your message seemed to be in a Windows character set, so
I will guess Windows.  There is a DCOM interface on Windows, and if you
look on CRAN under Software->Other->Non-standard you will find the software
and examples.   Alternatively, the embedding interface that uses
is described, with examples, in src/gnuwin32/front-ends in the R
source distribution.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 11 12:51:23 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 11 Dec 2000 13:51:23 +0100 (MET)
Subject: [Rd] configure and f2c
Message-ID: <Pine.LNX.4.21.0012111347090.1405-100000@artemis.imbe.med.uni-erlangen.de>


In R-devel Dec 11 03:03, configure means (on SuSE 6.4):

checking for f2c... f2c
checking for f_open in -lf2c... no
checking for d_sin in -lF77... no
configure: warning: I found f2c but not libf2c, or libF77 and libI77

which worked fine for me with R-devel from Dec 6th. 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hanspeter_wuermli@swissre.com  Mon Dec 11 13:04:50 2000
From: hanspeter_wuermli@swissre.com (hanspeter_wuermli@swissre.com)
Date: Mon, 11 Dec 2000 14:04:50 +0100 (MET)
Subject: [Rd] Problem with DLL in Windows NT (PR#763)
Message-ID: <200012111304.OAA13836@pubhealth.ku.dk>

Full_Name: Hans Peter Wrmli
Version: 1.0.0 or latest
OS: NT4.0
Submission from: (NULL) (193.134.170.35)


I used R for some time and loading a library worked fine. I received a new PC a
few days ago and cannot remember whether I had used the program that doesn't
work anymore, because library "integrate" cannot be loaded. Since I installed
the latest version (1.1.1? the one copying files into rw1011) together with the
replacement R.dll, the error appeared. Going back to 1.0.0 doesn't help.

When I type: > require(integrate)

a error message popup window appears:

"Rgui.exe - Entry Point Not Found
The procedure entry point REAL could not be located in the dynamic link library
R.dll"

R error message:

"Loading required package: integrate 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"D:\data\WUH\R\rw1000/library/integrate/libs/integrate.dll":
  LoadLibrary failure"

I am grateful for help (but not desperate as I run Linux at home).

Hans Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Dec 11 14:20:47 2000
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 11 Dec 2000 09:20:47 -0500 (EST)
Subject: [Rd] "S4"-style methods and classes in R
Message-ID: <200012111420.JAA00341@jessie.research.bell-labs.com>

A preliminary version of an R package for classes and methods is
available from the omegahat web site:

	  http://www.omegahat.org/RSMethods/index.html

Documentation and source for download are available from this page.

The goal is to support an API that would provide compatible facilities
for defining classes and methods in R and S-Plus.  For the moment, the
"API" is roughly taken from "Programming with Data", particularly
section 1.6.

A revised version of that section is available, from the web page
above, modified a bit for R use.

This is a preliminary version;  comments and suggestions on any aspect
would be much appreciated, before going more "public" with it.

The current version is all written in the S language, for
flexibility.  Key portions (method dispatch at the least) will be
implemented in C later on for efficiency.

Regards,
 John Chambers

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Dec 11 18:49:11 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 11 Dec 2000 10:49:11 -0800
Subject: [Rd] row.names, rownames; colnames, no col.names?
Message-ID: <87d7eyvlnc.fsf@jeeves.blindglobe.net>


There's a bit of a symmetry issue, which may or may not be important
(led to 15 seconds of confusion until I got my bearings straight): 

row.names, rownames; colnames, no col.names? 

I _NOW_ realize the difference between row.names and rownames, but
is there any reason not to have col.names for re-naming columns in a
data.frame? 

(if there is, I don't particular need to know it, but it might make a
nice FAQ).

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Mon Dec 11 23:15:37 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 12 Dec 2000 00:15:37 +0100 (MET)
Subject: [Rd] qqline (PR#764)
Message-ID: <200012112315.AAA19537@pubhealth.ku.dk>

I think qqline does not do exactly what it is advertised to do ("`qqline'
adds a line to a normal quantile-quantile plot which passes through the
first and third quartiles.").  Consider the graph:

tmp <- qnorm(ppoints(10))
qqnorm(tmp)
qqline(tmp)

The line (which I expected go through all the points), has a slightly
shallower slope than does the points plotted by qqnorm.  I think the
problem is that qqline bases its line on the relationship between the
quartiles in the data and the large sample expected quartiles for a normal
distribution; qqnorm bases its plot on the relationship between the
quantiles in the data and an approximation to the (finite-sample) expected
quantiles for a normal distribution.  In qqnorm, the x-coordinates of the
first and third quartiles of the data vector ('tmp' in this case) are not
qnorm(c(0.25,0.75)) (as qqline does), but rather something like
quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say "something like"
because it is exactly right when the quartiles fall on data points, and an
approximation otherwise.

The following definition for qqline reflects this point:

function (y, ...)
{
  y <- y[!is.na(y)]
  n <- length(y)
    y <- quantile(y, c(0.25, 0.75))
    x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    slope <- diff(y)/diff(x)
    int <- y[1] - slope * x[1]
    abline(int, slope, ...)
}

I'm not sure it makes very much of a difference, though, for looking at
real data, instead of something like expected quantiles.

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, package:MASS, package:logspline, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 11 22:25:34 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 11 Dec 2000 23:25:34 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <14901.21598.772009.161277@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 

> row.names, rownames; colnames, no col.names? 

> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 

> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Re col.names, certainly not for 1.2.0.

I am personally not a big fan of advertising row.names, as I think it is
too close to the rownames of the matrix interpretation of data frames.
This is why R has abstract functions case.names() and variable.names(),
which would be my preference.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 11 23:35:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Dec 2000 00:35:12 +0100
Subject: [Rd] row.names, rownames; colnames, no col.names?
In-Reply-To: rossini@blindglobe.net's message of "11 Dec 2000 10:49:11 -0800"
References: <87d7eyvlnc.fsf@jeeves.blindglobe.net>
Message-ID: <x2wvd6r0pb.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> There's a bit of a symmetry issue, which may or may not be important
> (led to 15 seconds of confusion until I got my bearings straight): 
> 
> row.names, rownames; colnames, no col.names? 
> 
> I _NOW_ realize the difference between row.names and rownames, but
> is there any reason not to have col.names for re-naming columns in a
> data.frame? 
> 
> (if there is, I don't particular need to know it, but it might make a
> nice FAQ).

Well, plain names()<- will do fine, colnames()<- will as well. Data
frames have an attribute called "row.names", and hence it makes sense
to have an extractor function of the same name, but there is no
"col.names" attribute. (However, why we chose to have "rownames" and
"colnames" without dots escapes me for the moments. They go back to
before we had the data frame code, and I suspect it is mostly a
historical accident.) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Tue Dec 12 07:28:43 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Tue, 12 Dec 2000 08:28:43 +0100 (MET)
Subject: [Rd] r-sync down?
Message-ID: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>


torsten@www:/raid/home/torsten > ping rsync.r-project.org
PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
--- franz.stat.wisc.edu ping statistics ---
12 packets transmitted, 0 packets received, 100% packet loss


Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 08:28:39 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 09:28:39 +0100
Subject: [Rd] r-sync down?
In-Reply-To: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
References: <Pine.LNX.4.21.0012120827360.4400-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <14901.57783.254413.981422@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de> writes:

    Torsten> torsten@www:/raid/home/torsten > ping rsync.r-project.org
    Torsten> PING franz.stat.wisc.edu (128.105.174.95): 56 data bytes
    Torsten> --- franz.stat.wisc.edu ping statistics ---
    Torsten> 12 packets transmitted, 0 packets received, 100% packet loss

No, it's fine, it's there, it's just that
somewhere on the Wisconsin network  ping requests are "filtered":

(From a Linux machine): 

 lynne{maechler}438> ping rsync.r-project.org
 PING franz.stat.wisc.edu (128.105.174.95) from 129.132.58.30 : 56(84) bytes of data.
 From 144.92.128.166: Packet filtered
 From 144.92.128.166: Packet filtered

and traceroute subsequently reveals 
....
  17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  133.563 ms ...
  18  r-macc.net.wisc.edu (144.92.128.129)            121.881 ms ...
  19  144.92.128.166 (144.92.128.166)                 124.458 ms ...
  20  e2-1.foundry1.cs.wisc.edu (128.105.4.246)       124.151 ms ...
  21  franz.stat.wisc.edu (128.105.174.95)            124.922 ms ...

ie. "rsync.r-project.org" is there (it's franz..)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Dec 12 14:24:56 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 12 Dec 2000 15:24:56 +0100
Subject: [Rd] qqline (PR#764)
In-Reply-To: <200012112315.AAA19537@pubhealth.ku.dk>
References: <200012112315.AAA19537@pubhealth.ku.dk>
Message-ID: <14902.13624.652864.269495@gargle.gargle.HOWL>

>>>>> "Setzer" == Setzer Woodrow <Setzer.Woodrow@epamail.epa.gov> writes:

    Setzer> I think qqline does not do exactly what it is advertised to do
    Setzer> ("`qqline' adds a line to a normal quantile-quantile plot which
    Setzer> passes through the first and third quartiles.").  

yes, the above may not be clear enough.

    Setzer> Consider the graph:

    Setzer> tmp <- qnorm(ppoints(10))
    Setzer> qqnorm(tmp)
    Setzer> qqline(tmp)

    Setzer> The line (which I expected go through all the points), has a
    Setzer> slightly shallower slope than does the points plotted by
    Setzer> qqnorm.  I think the problem is that qqline bases its line on
    Setzer> the relationship between the quartiles in the data and the
    Setzer> large sample expected quartiles for a normal distribution;
    Setzer> qqnorm bases its plot on the relationship between the quantiles
    Setzer> in the data and an approximation to the (finite-sample)
    Setzer> expected quantiles for a normal distribution.  In qqnorm, the
    Setzer> x-coordinates of the first and third quartiles of the data
    Setzer> vector ('tmp' in this case) are not qnorm(c(0.25,0.75)) (as
    Setzer> qqline does), but rather something like
    Setzer> quantile(qnorm(ppoints(length(tmp))),c(0.25,0.75)).  I say
    Setzer> "something like" because it is exactly right when the quartiles
    Setzer> fall on data points, and an approximation otherwise.

good analysis!

    Setzer> The following definition for qqline reflects this point:

    Setzer> function (y, ...)
    Setzer> {
    Setzer> y <- y[!is.na(y)]
    Setzer> n <- length(y)
    Setzer> y <- quantile(y, c(0.25, 0.75))
    Setzer> x <- quantile(qnorm(ppoints(n)),c(0.25, 0.75))
    Setzer> slope <- diff(y)/diff(x)
    Setzer> int <- y[1] - slope * x[1]
    Setzer> abline(int, slope, ...)
    Setzer> }

    Setzer> I'm not sure it makes very much of a difference, though, for
    Setzer> looking at real data, instead of something like expected
    Setzer> quantiles.

The Development Version of R (R 1.2 in a few days) has

 function (y, ...) 
 {
     y <- quantile(y[!is.na(y)], c(0.25, 0.75))
     x <- qnorm(c(0.25, 0.75))
     slope <- diff(y)/diff(x)
     int <- y[1] - slope * x[1]
     abline(int, slope, ...)
 }

which I think *does* what you suggest it should do.

HOWEVER I was quite a bit astonished to see 
that the slope is still too small (for small sample sizes only).

 par(mfrow=c(2,2))
 for(n in 9:12){ x <- qnorm(ppoints(n));qqnorm(x,main=paste("n=",n));qqline(x) }

But I think we are now doing what Tukey defined in his EDA book(s)
and what the other S engines do as well.
 {as a matter of fact, R should also return the (int, slope) vector !}

Note that you can also play with the " a = " argument of ppoints,
it's not directly clear to me which value is "optimal" for the above purpose...

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Dec 12 20:35:34 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Dec 2000 14:35:34 -0600
Subject: [Rd] An SPSS save file for testing
Message-ID: <6rk8958jjd.fsf@franz.stat.wisc.edu>

Saikat DebRoy is working on a revised "foreign" package (currently in
the src/contrib/Devel area on CRAN) that will include the ability to
read the SPSS save format.  Since we don't use SPSS we don't have easy
access to a sample data set and have been using PSPP (see
http://pspp.stat.wisc.edu/) to generate test data.  It would be more
realistic to have a small, redistributable SPSS saved dataset if
someone would be willing to contribute same.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Dec 14 15:55:55 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Dec 2000 09:55:55 -0600
Subject: [Rd] An SPSS save file for testing
In-Reply-To: Douglas Bates's message of "12 Dec 2000 14:35:34 -0600"
References: <6rk8958jjd.fsf@franz.stat.wisc.edu>
Message-ID: <6rg0jr2e0k.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@cs.wisc.edu> writes:

> Saikat DebRoy is working on a revised "foreign" package (currently in
> the src/contrib/Devel area on CRAN) that will include the ability to
> read the SPSS save format.  Since we don't use SPSS we don't have easy
> access to a sample data set and have been using PSPP (see
> http://pspp.stat.wisc.edu/) to generate test data.  It would be more
> realistic to have a small, redistributable SPSS saved dataset if
> someone would be willing to contribute same.

Thanks to all those who volunteered to provide us with test data.  We
now have enough data sets for the tests.  The new foreign library has
been uploaded to CRAN.  If you use
 R CMD check foreign
it will run the specific tests in the test directory and check that it
can read the different formats.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:06:58 2000
From: viktorm@pdf.com (viktorm@pdf.com)
Date: Fri, 15 Dec 2000 00:06:58 +0100 (MET)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
Message-ID: <200012142306.AAA24559@pubhealth.ku.dk>

Full_Name: Viktor Moravetski
Version: Version 1.2.0 (2000-12-13)
OS: Win-NT 4.0 SP5
Submission from: (NULL) (209.128.81.199)


I've started R (v.1.20) with command:
rgui --vsize 450M --nsize 40M

Then at the command prompt:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6   41943040 1120
Vcells 3469306 26.5   58982400  450

>df <- data.frame(x=1:30000,y=2,z=3)
>merge(df,df)
Error: vector memory exhausted (limit reached?)


In S-Plus it worked fine, no problems. 
It looks like that "R" cannot merge dataframes with 
more than 30K rows. It has enough memory, so what limit 
was reached and what should I do?

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Dec 14 23:28:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Dec 2000 17:28:43 -0600
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: viktorm@pdf.com's message of "Fri, 15 Dec 2000 00:06:58 +0100 (MET)"
References: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>

>>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:

  viktorm> Full_Name: Viktor Moravetski
  viktorm> Version: Version 1.2.0 (2000-12-13)
  viktorm> OS: Win-NT 4.0 SP5
  viktorm> Submission from: (NULL) (209.128.81.199)


  viktorm> I've started R (v.1.20) with command:
  viktorm> rgui --vsize 450M --nsize 40M

  viktorm> Then at the command prompt:
  >> gc()
  viktorm>           used (Mb) gc trigger (Mb)
  viktorm> Ncells  358534  9.6   41943040 1120
  viktorm> Vcells 3469306 26.5   58982400  450

  >> df <- data.frame(x=1:30000,y=2,z=3)
  >> merge(df,df)
  viktorm> Error: vector memory exhausted (limit reached?)

Do you really need such a large number of Ncells ? I think not. Try
starting R without specifying --nsize (and maybe even --vsize). In
1.2.0, R would  automatically allocate more memory if the intial value
is not enough. But (as far as I know) it would not decrease the amount
of memory below the initial amount.

  viktorm> In S-Plus it worked fine, no problems. 
  viktorm> It looks like that "R" cannot merge dataframes with 
  viktorm> more than 30K rows. It has enough memory, so what limit 
  viktorm> was reached and what should I do?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From viktorm@pdf.com  Thu Dec 14 23:54:23 2000
From: viktorm@pdf.com (Viktor Moravetski)
Date: Thu, 14 Dec 2000 15:54:23 -0800
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu>
Message-ID: <3A395DAF.C4262ADC@pdf.com>

Hi Saikat,
Yes, I don't need to specify nsize and vsize for version 1.2.0. 
But error is the same, even if start R with default parameters. 
It grows in memory and then gives an error. 
See output below:
> gc()
          used (Mb) gc trigger (Mb)
Ncells  358534  9.6     597831 16.0
Vcells 3330352 25.5    3736477 28.6
> df <- data.frame(x=1:30000,y=2,z=3)
> merge(df,df)
Error: cannot allocate vector of size 3515625 Kb
> 


Saikat DebRoy wrote:
> 
> >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> 
>   viktorm> Full_Name: Viktor Moravetski
>   viktorm> Version: Version 1.2.0 (2000-12-13)
>   viktorm> OS: Win-NT 4.0 SP5
>   viktorm> Submission from: (NULL) (209.128.81.199)
> 
>   viktorm> I've started R (v.1.20) with command:
>   viktorm> rgui --vsize 450M --nsize 40M
> 
>   viktorm> Then at the command prompt:
>   >> gc()
>   viktorm>           used (Mb) gc trigger (Mb)
>   viktorm> Ncells  358534  9.6   41943040 1120
>   viktorm> Vcells 3469306 26.5   58982400  450
> 
>   >> df <- data.frame(x=1:30000,y=2,z=3)
>   >> merge(df,df)
>   viktorm> Error: vector memory exhausted (limit reached?)
> 
> Do you really need such a large number of Ncells ? I think not. Try
> starting R without specifying --nsize (and maybe even --vsize). In
> 1.2.0, R would  automatically allocate more memory if the intial value
> is not enough. But (as far as I know) it would not decrease the amount
> of memory below the initial amount.
> 
>   viktorm> In S-Plus it worked fine, no problems.
>   viktorm> It looks like that "R" cannot merge dataframes with
>   viktorm> more than 30K rows. It has enough memory, so what limit
>   viktorm> was reached and what should I do?

--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 00:10:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 01:10:53 +0100
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: Viktor Moravetski's message of "Thu, 14 Dec 2000 15:54:23 -0800"
References: <200012142306.AAA24559@pubhealth.ku.dk> <qxp3dfqshuc.fsf@verdi.stat.wisc.edu> <3A395DAF.C4262ADC@pdf.com>
Message-ID: <x2wvd21r3m.fsf@blueberry.kubism.ku.dk>

Viktor Moravetski <viktorm@pdf.com> writes:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb

I think you're just experiencing the fact that the merge() function in
R is not implemented very efficiently (to say the least). For many
practical purposes, this can be worked around using e.g. match().

Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 00:05:17 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Dec 2000 16:05:17 -0800 (PST)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <3A395DAF.C4262ADC@pdf.com>
Message-ID: <Pine.GSO.4.21.0012141600080.7665-100000@atlas.biostat.washington.edu>

On Thu, 14 Dec 2000, Viktor Moravetski wrote:

> Hi Saikat,
> Yes, I don't need to specify nsize and vsize for version 1.2.0. 
> But error is the same, even if start R with default parameters. 
> It grows in memory and then gives an error. 
> See output below:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6     597831 16.0
> Vcells 3330352 25.5    3736477 28.6
> > df <- data.frame(x=1:30000,y=2,z=3)
> > merge(df,df)
> Error: cannot allocate vector of size 3515625 Kb
					^^^^^^^^^^!!

This is the problem. A merge of n rows takes n^2 space, because each row
of the first data frame is compared to  each row of the second.  You are
trying to allocate 3.5Gb, which is almost certainly more memory than you
have. This is (30000^2)*4

	-thomas

	

> > 
> 
> 
> Saikat DebRoy wrote:
> > 
> > >>>>> "viktorm" == viktorm  <viktorm@pdf.com> writes:
> > 
> >   viktorm> Full_Name: Viktor Moravetski
> >   viktorm> Version: Version 1.2.0 (2000-12-13)
> >   viktorm> OS: Win-NT 4.0 SP5
> >   viktorm> Submission from: (NULL) (209.128.81.199)
> > 
> >   viktorm> I've started R (v.1.20) with command:
> >   viktorm> rgui --vsize 450M --nsize 40M
> > 
> >   viktorm> Then at the command prompt:
> >   >> gc()
> >   viktorm>           used (Mb) gc trigger (Mb)
> >   viktorm> Ncells  358534  9.6   41943040 1120
> >   viktorm> Vcells 3469306 26.5   58982400  450
> > 
> >   >> df <- data.frame(x=1:30000,y=2,z=3)
> >   >> merge(df,df)
> >   viktorm> Error: vector memory exhausted (limit reached?)
> > 
> > Do you really need such a large number of Ncells ? I think not. Try
> > starting R without specifying --nsize (and maybe even --vsize). In
> > 1.2.0, R would  automatically allocate more memory if the intial value
> > is not enough. But (as far as I know) it would not decrease the amount
> > of memory below the initial amount.
> > 
> >   viktorm> In S-Plus it worked fine, no problems.
> >   viktorm> It looks like that "R" cannot merge dataframes with
> >   viktorm> more than 30K rows. It has enough memory, so what limit
> >   viktorm> was reached and what should I do?
> 
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 07:41:05 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 15 Dec 2000 07:41:05 +0000 (GMT)
Subject: [Rd] cannot allocate vector of size in merge (PR#765)
In-Reply-To: <200012142306.AAA24559@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012150730310.22653-100000@auk.stats>

On Fri, 15 Dec 2000 viktorm@pdf.com wrote:

> Full_Name: Viktor Moravetski
> Version: Version 1.2.0 (2000-12-13)
> OS: Win-NT 4.0 SP5
> Submission from: (NULL) (209.128.81.199)
> 
> 
> I've started R (v.1.20) with command:
> rgui --vsize 450M --nsize 40M

Um.  Whats `v.1.20' and where did you get that from?  In particular how did
you compile it and which run-time are you using? You clearly have not read
the documentation on the command-line flags for version 1.2.0, or even the
top item in NEWS.

> Then at the command prompt:
> > gc()
>           used (Mb) gc trigger (Mb)
> Ncells  358534  9.6   41943040 1120
> Vcells 3469306 26.5   58982400  450
> 
> >df <- data.frame(x=1:30000,y=2,z=3)
> >merge(df,df)
> Error: vector memory exhausted (limit reached?)
> 
> 
> In S-Plus it worked fine, no problems. 
> It looks like that "R" cannot merge dataframes with 
> more than 30K rows. It has enough memory, so what limit 
> was reached and what should I do?

How do you know it has enough memory: it has just told you it has not?
I think you are using an unreleased version and not reading the
documentation on the changes.  The CHANGES file says

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

and NEWS says (first item)

    o   There is a new memory management system using a generational
        garbage collector.  This improves performance, sometimes
        marginally but sometimes by double or more.  The workspace is
        no longer statically sized and both the vector heap and the
        number of nodes can grow as needed.  (They can shrink again,
        but never below the initially allocated sizes.)  See ?Memory
        for a longer description, including the new command-line
        options to manage the settings.


Beyond that, R's merge uses a flexible but memory-intensive algorithm. If
you want to do merges on this scale we recommend that you use one of the
RDBMS interfaces to a tool optimized for the job.


I really don't understand why you filed a bug report on your lack of
reading of documentation: please see the section on reporting bugs in the
FAQ.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Fri Dec 15 14:20:53 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Fri, 15 Dec 2000 14:20:53 -0000
Subject: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <080901c066a2$3be28550$0a00a8c0@bellview>

Hy you all,
Short version:
I think I have some code that could be interesting to make the R
architecture evolve towards better thread support, easier memory management,
better user interface programming (progress bar, logs), powerful debugging
without recompiling (hach!)

some years ago I start learning C with an ambitious project: write a C
library for multivariate data analysis.
On the route I learned C quite well and I discovered the power of scripting
languages nad finally the S language.

I wanted to write programs to perform routinely done exploratory data
analysis, using gnuplot as the graphic driver.

One of the my bigger concern has ever be memory management and reentrancy of
my code, possibly avoiding using OS support (such as thread local storage on
windows); I tried to allow for custom allocator in the library, supporting
ANSI functions as a ready option ...

I also have always used DOS (djgpp) and windows so I hated (and probably
strongly dislike) autoconf and the like: I tried to follow the advice not to
include to many #ifdef/#else/#endif in my code and to prefer to configure my
libraries at run-time.

Dealing with long calculations, I also wanted to make she/he let know where
the program is (it terms of time and or percentage achieved). I wanted to
deal with user cancellation requests and the rollback (free memory, close
files) associated with it.

Moreover I had to encapsulate logs, warning, errors and debugging
informations into specific interfaces so that my code could be used in
GUI-based application as well in console mode or in COM components (here
comes UNICODE!).

Now I have (thread safe, customizable: ALL, some UNICODE compatible):
- an interface to memory management, usable with multiple threads, allowing
to define and manipulate memory spaces (clean the space of the thread just
stopped by user request), with customizable allocators;
- an interface to debug information, based on Fred Fish DBUG library used in
mysql (it allows to trace the execution of the code, to print selected
information, ...);
- an mprintf function to format messages in malloc'ed string (I have tested
also the UNICODE version) stolen from mktclapp from www.hwaci.com; this
maybe similar to R_printf;
- interfaces to errors, warnings, and log messages, with customizable
callbacks to send the content of the massages every where you can send a
char * or a wchar_t *; I followed the discussion on error handling on the
gsl mailing list and tried to implement the ideas in
http://t8web.lanl.gov/people/jungman/except.pdf I found quite interesting;

I would like to help with this code, if considered interesting.

Best regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Fri Dec 15 15:12:06 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Fri, 15 Dec 2000 16:12:06 +0100 (MET)
Subject: [Rd] R1.2.0 (PR#766)
Message-ID: <200012151512.QAA08186@pubhealth.ku.dk>

Here are a few comments on the new release (1.2.0), most about R CMD
check. I have managed to install and check my libraries only making one
change to a C function (see point 1) and one to an R function because
of the way formulae now look for their data. That is the good news. Of
course, more extensive checks are liable to find further problems.

1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
not accessible to us mortals. Those few lines need to be moved into
one of the accessible header files.

3. Makefiles in pkg/src are no longer read properly. This creates a
big problem for me in library development.

3. DESCRIPTION has to have licence mis-spelled as license for the
check to work.

4. check produces unasked for tex output (that I would like to be able
to shut off) then an error that linktocpage is undefined.

5. check always produces an error message at the end:
Attempt to free unreferenced scalar during global destruction.
I am not sure if this is a reference to Chernobyl but I do not
understand it.

Other requests about the library check:
1. I would very much prefer that the check directory remain within the
library directory instead of parallel as pkg.Rcheck to avoid
proliferation of directories at that level.

2. Why can't check detect that the help pages are up-to-date
(i.e. from a previous check) instead of redoing them every time?
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 15 15:35:06 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 15 Dec 2000 16:35:06 +0100
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
References: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 15 Dec 2000 16:12:06 +0100 (MET),
>>>>> james lindsey (jl) wrote:

  > Here are a few comments on the new release (1.2.0), most about R CMD
  > check. I have managed to install and check my libraries only making one
  > change to a C function (see point 1) and one to an R function because
  > of the way formulae now look for their data. That is the good news. Of
  > course, more extensive checks are liable to find further problems.

  > 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
  > not accessible to us mortals. Those few lines need to be moved into
  > one of the accessible header files.

  > 3. Makefiles in pkg/src are no longer read properly. This creates a
  > big problem for me in library development.

what do you mean by ``not read properly''? if a makefile exists it
should be used, actually `R CMD check' only uses the Makefile during a
call to `R CMD INSTALL', so do you mean that INSTALL is broken (which
would be bad news indeed)?


  > 3. DESCRIPTION has to have licence mis-spelled as license for the
  > check to work.

hmm, that field had that name (with that spelling) for quite some time
now. I think things get complicated if we allow for different
spellings of variables for different observations (I basically build a
dataframe from all DESCRIPTION files) ... but I'll leave that for
native English speakers to decide.

  > 4. check produces unasked for tex output (that I would like to be able
  > to shut off) then an error that linktocpage is undefined.

option --no-latex supresses the latex part.


  > 5. check always produces an error message at the end:
  > Attempt to free unreferenced scalar during global destruction.
  > I am not sure if this is a reference to Chernobyl but I do not
  > understand it.

I get no error message: which version pf perl on which platform are
you using?

  > Other requests about the library check:
  > 1. I would very much prefer that the check directory remain within the
  > library directory instead of parallel as pkg.Rcheck to avoid
  > proliferation of directories at that level.

use option --outdir to change the default

  > 2. Why can't check detect that the help pages are up-to-date
  > (i.e. from a previous check) instead of redoing them every time?

use option --no-clean for not removing the old files.


the defaults are set to do ALL check FROM SCRATCH because that is the
safest thing to do (meaning you can trust the results and don't miss
any checks offered), but you can turn off most of the checks using
command line options.

hope this helps,
fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 15 15:37:06 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Dec 2000 15:37:06 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <200012151512.QAA08186@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012151526050.9947-100000@toucan.stats>

On Fri, 15 Dec 2000 james.lindsey@luc.ac.be wrote:

> Here are a few comments on the new release (1.2.0), most about R CMD
> check. I have managed to install and check my libraries only making one
> change to a C function (see point 1) and one to an R function because
> of the way formulae now look for their data. That is the good news. Of
> course, more extensive checks are liable to find further problems.
> 
> 1. I need to be able to define F77_SYMBOL. This now in Defn.h which is
> not accessible to us mortals. Those few lines need to be moved into
> one of the accessible header files.

You could just use the calls that are documented, in R-exts, that is
F77_CALL and F77_NAME!  F77_SYMBOL has not been documented as
a user entry point since at least 1.0.0, and has never been part of the
API.  Only one of the 82 packages on CRAN was using it.

> 3. Makefiles in pkg/src are no longer read properly. This creates a
> big problem for me in library development.

Having Makefiles in packages causes users a lot of problems, but as far as
I know they still work (and so still break things as we found with
polymars last week).  Again, the preferred mechanisms have been in 
R-exts for a year or so.

> 3. DESCRIPTION has to have licence mis-spelled as license for the
> check to work.

Actually, as `License:'

> 4. check produces unasked for tex output (that I would like to be able
> to shut off) then an error that linktocpage is undefined.

It was asked for as it is a default option. Looks like your tex setup is
broken.

> 5. check always produces an error message at the end:
> Attempt to free unreferenced scalar during global destruction.
> I am not sure if this is a reference to Chernobyl but I do not
> understand it.

Is your Perl up to date?

> Other requests about the library check:
> 1. I would very much prefer that the check directory remain within the
> library directory instead of parallel as pkg.Rcheck to avoid
> proliferation of directories at that level.
> 
> 2. Why can't check detect that the help pages are up-to-date
> (i.e. from a previous check) instead of redoing them every time?

By default, it does a clean install.  You can use --no-clean,
documented as one of the options.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Dec 15 16:15:18 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Dec 2000 11:15:18 -0500
Subject: [Rd] R1.2.0 (PR#766)
References: <200012151512.QAA08186@pubhealth.ku.dk> <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
Message-ID: <3A3A4396.5AF55E95@bank-banque-canada.ca>

>... but I'll leave that for native English speakers to decide.

I think we would be better off to let a non-native English speaker decide. My Shorter
OED (possibly a special version for the colonies) gives both spelling. In french it
is Licence.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 16:54:51 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 17:54:51 +0100 (MET)
Subject: [Rd] R install doesn't set permissions (PR#767)
Message-ID: <200012151654.RAA09267@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 6.2/i386
Submission from: (NULL) (148.88.0.10)



Just did a straightforward ./configure/make/make install of R-1.2.0
and it seems that it doesn't set permissions on the R_HOME directory
properly (or at all!).

[root@chinstrap R-1.2.0]# make install
mkdir /usr/local/lib/R

 hence /usr/local/lib/R gets permissions from whatever root's 
default is - in my case rwx------, and users cant start R.

 Fix it after installation with:

 chmod -R 755 /usr/local/lib/R

 To fix the installer? Maybe use the install program from the 
fileutils package?

Baz


 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Fri Dec 15 18:12:30 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Fri, 15 Dec 2000 19:12:30 +0100 (MET)
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
Message-ID: <200012151812.TAA09528@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.2.0
OS: Redhat 7.0/i386
Submission from: (NULL) (148.88.0.11)



Compiling R 1.2.0 from source on a RH7.0 machine I get:

../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
/root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
/root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'

 - it installed fine on another RH7.0 machine earlier, so I check the
glibc version, and sure enough, this one hasn't been updated. It was

glibc-2.1.92-14

 upgrading to:

glibc-2.2-5

 using the Redhat 'up2date' utility, has fixed it.

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Dec 15 18:50:29 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 15 Dec 2000 19:50:29 +0100 (MET)
Subject: [Rd] fourfoldplot (PR#769)
Message-ID: <200012151850.TAA09617@pubhealth.ku.dk>


Two bugs:

1() a single 2x2 matrix without dimnames won't plot

> b<-matrix(c(1,1,1,1),2) 
> fourfoldplot(b)
Error in array(x, dim = c(dim(x), 1), dimnames = c(dimnames(x),
list(Strata = NULL))) : 
        length of dimnames must match that of dims
> dimnames(b)<-list(c("a","b"),c("c","d"))
> fourfoldplot(b)
>

(2) conf.level breaks if there are zeroes (unless conf.level=0)

> b[1,1]<-0
> fourfoldplot(b)
Error in if (any(f == 0)) f <- f + 10^(-6) : 
        missing value where logical needed
> fourfoldplot(b,conf.level=0)
>



> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    3.0                         
year     2000                        
month    12                          
day      15                          
language R                           


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Dec 15 20:07:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Dec 2000 21:07:19 +0100
Subject: [Rd] R on Redhat 7 / glibc problem (PR#768)
In-Reply-To: B.Rowlingson@lancaster.ac.uk's message of "Fri, 15 Dec 2000 19:12:30 +0100 (MET)"
References: <200012151812.TAA09528@pubhealth.ku.dk>
Message-ID: <x2k891ih3c.fsf@blueberry.kubism.ku.dk>

B.Rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.2.0
> OS: Redhat 7.0/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> 
> Compiling R 1.2.0 from source on a RH7.0 machine I get:
> 
> ../unix/libunix.a(sys-unix.o): In function `R_getProcTime':
> /root/R-1.2.0/src/unix/sys-unix.c:153: undefined reference to `__sysconf'
> /root/R-1.2.0/src/unix/sys-unix.c:154: undefined reference to `__sysconf'
> 
>  - it installed fine on another RH7.0 machine earlier, so I check the
> glibc version, and sure enough, this one hasn't been updated. It was
> 
> glibc-2.1.92-14
> 
>  upgrading to:
> 
> glibc-2.2-5
> 
>  using the Redhat 'up2date' utility, has fixed it.
> 
> Baz
> 

Be careful!! Stock RH7.0 is unsupported because of the compiler
situation. You should get gcc-2.96-65 or later from the Rawhide
distribution or you will build an R that doesn't pass the regression
tests, and has at least one serious bug in random number generation.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Sat Dec 16 19:03:09 2000
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Sat, 16 Dec 2000 20:03:09 +0100 (MET)
Subject: [Rd] two minor 1.2.0 install problems (PR#770)
Message-ID: <200012161903.UAA11860@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


two minor problems building R-1.2.0 under linuxppc.  neither of these two
problems
is difficult to get around, but they do make the build/install process fail:

1) when making DVI or PDF manuals, doc/manual/refman.tex tries to input
base-pkg.tex
at line 43.  this file does not exist in the R tree and is not part of tetex 
(at least not tetex-1.0.6).


2) after "make R" (or during "make all"), both "make docs" and "make test" refer
to
bin/Rcmd, a script which which sets up

   R_CMD="${R_HOME}/bin/Rcmd"

unfortunately, with R-1.1.1 installed, R_HOME points to the installed 1.1.1 bin
directory, and 1.1.1 does not have Rcmd.  so a reinstall of 1.2.0 will work,
but
an upgrade from 1.1.1 will fail (as will a new install, i think).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From moshe@i-impact.com  Sun Dec 17 08:12:25 2000
From: moshe@i-impact.com (Moshe Recanati)
Date: Sun, 17 Dec 2000 10:12:25 +0200
Subject: [Rd] Example of calling R from Java
Message-ID: <00a901c06801$170455f0$45a8a8c0@iimpact.com>

This is a multi-part message in MIME format.

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

Hello,

I downloaded the R for Java interface. I read about calling R =
scripts/methods from java, but I can't find any detailed example about =
this.

I need an example of how to use this.

For example how to load data object (i.e. of colt) to r , run anova =
function and get the results - all from java!!!

Thank you very very much
Regards,
Moshe
i-impact

------=_NextPart_000_00A6_01C06811.DA794FD0
Content-Type: text/html;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dwindows-1255">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I downloaded the R for Java interface. =
I read about=20
calling R scripts/methods from java, but I can't find any detailed =
example about=20
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>I need an example of how to use =
this.</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>For example how to load data object =
(i.e. of colt)=20
to r&nbsp;, run anova function and get the results - all from=20
java!!!</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank you very very much</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Regards,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Moshe</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>i-impact</FONT></DIV></BODY></HTML>

------=_NextPart_000_00A6_01C06811.DA794FD0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From james.lindsey@luc.ac.be  Mon Dec 18 08:27:58 2000
From: james.lindsey@luc.ac.be (james.lindsey@luc.ac.be)
Date: Mon, 18 Dec 2000 09:27:58 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012180827.JAA16557@pubhealth.ku.dk>

R1.2.0 with Linux RH5.2

I do not believe that the problems below are new to 1.2 but I only
cover this sort of thing once a year in my course and some of that
happened to be last Friday so too late to report for 1.2. I see that
one or two things that I was going to report have been corrected.
I like the fact that interactions now show : instead of .

Here is some output with comments inserted.


R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Notice contrasts for below:

> options(contrasts=c("contr.treatment","contr.poly"))
> data <- read.table("tmp.dat",skip=6,head=T)
> data
   Freq Reg66 Reg71
1   118    CC    CC
2    14    LY    CC
3     8    WM    CC
4    12    GL    CC
5    12    CC    LY
6  2127    LY    LY
7    69    WM    LY
8   110    GL    LY
9     7    CC    WM
10   86    LY    WM
11 2548    WM    WM
12   88    GL    WM
13   23    CC    GL
14  130    LY    GL
15  107    WM    GL
16 7712    GL    GL
> attach(data)
> wt <- codes(Reg66)!=codes(Reg71)
> print(z <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(z2 <- glm(Freq~Reg66+Reg71,family=poisson,weight=wt))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson, weights = wt) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.4615       2.1242       2.0096       1.7236       2.4555       2.0847  
    Reg71WM  
     1.9140  

Degrees of Freedom: 11 Total (i.e. Null);  5 Residual
Null Deviance:	    486.2 
Residual Deviance: 4.367 	AIC: 82.7 
> z2$fit
          1           2           3           4           5           6 
 118.100000   11.836037    8.891541   13.272421   12.758205 2127.100000 
          7           8           9          10          11          12 
  71.505458  106.736339   10.756661   80.252100 2548.100000   89.991240 
         13          14          15          16 
  18.485138  137.911862  103.603001 7712.100000 

First problem: with diagonal values weighted out in a transition
matrix (mover-stayer model), glm wrongly estimates the diagonals to be
the observed plus 0.1. This was correct in 90.1 a year ago but already
wrong in 1.0.1. I don't have any versions in between installed.

> # correct values from GLIM4
> #   unit   observed    fitted   residual
> #     (1)       118     1.586      0.000
> #      2         14    11.836      0.629
> #      3          8     8.892     -0.299
> #      4         12    13.272     -0.349
> #      5         12    12.758     -0.212
> #     (6)      2127    95.185      0.000
> #      7         69    71.505     -0.296
> #      8        110   106.736      0.316
> #      9          7    10.757     -1.145
> #     10         86    80.252      0.642
> #    (11)      2548    60.287      0.000
> #     12         88    89.991     -0.210
> #     13         23    18.485      1.050
> #     14        130   137.912     -0.674
> #     15        107   103.603      0.334
> #    (16)      7712   154.648      0.000
> # and from R90.1 (wrong in R1.0.1)
> #> z2$fit
> #         1          2          3          4          5          6          7 
> #  1.586454  11.836037   8.891541  13.272421  12.758205  95.184992  71.505458 
> #         8          9         10         11         12         13         14 
> #106.736339  10.756661  80.252100  60.287479  89.991240  18.485138 137.911862 
> #        15         16 
> #103.603001 154.648406 
> 

Second problem: the man page for factors states that the levels are
sorted, but gl does not do this. It keeps them in the order of the
labels. This is inconsistent with everything else, confusing for
students, and liable to induce errors in data analysis. In the example
below, it is not too important because the baseline category is the
same in the two cases but that will not generally be the case.

As an addition comment, I would strongly recommend that, if labels can
be coerced to numeric, they be ordered, not sorted. This is because
the order is very confusing if there are more than 9: for example, the
sorted 10 comes near the beginning and not at the end.

> reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(za <- glm(Freq~reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
     0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 

Third problem: if mean value contrasts are used, the level names are
not attached to the variable name, but simply the number of the
category. This rightly drives students mad and is simply
uninterpretable if the levels have been sorted. It takes a great deal
of extreme care to try to find out to what the numbers refer.

> options(contrasts=c("contr.sum","contr.poly"))
> 
> z

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
     0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
    Reg71WM  
     2.8877  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> print(zb <- glm(Freq~Reg66+Reg71,family=poisson))

Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 

Coefficients:
(Intercept)       Reg661       Reg662       Reg663       Reg711       Reg712  
     5.3638      -2.3575       1.5448       0.3325      -2.3930       1.5667  
     Reg713  
     0.3315  

Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
Null Deviance:	    40740 
Residual Deviance: 19880 	AIC: 20000 
> 

Additional comment: I recommend that the aic functions for poisson and
binomial have the explicit calculation of the log density replaced by
the corresponding d function with the log option. This will avoid the
production of NAs in certain cases of zeroes in tables.
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Mon Dec 18 10:12:55 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Mon, 18 Dec 2000 10:12:55 -0000
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <005701c068db$17287db0$0a00a8c0@bellview>

Well, I think the better solution would be to put them on the web: I tried
to open two web pages but I forget the possword every time :-(.

I see 2 quick solutions:
- send the files via e-mail
- put the files on CRAN (where?);
However I can do these in 2-3 days only (I have sources home).

Regards,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Luke Tierney <luke@muskrat.stat.umn.edu>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Data: venerd 15 dicembre 2000 19.25
Oggetto: Re: [Rd] Some libraries and ideas for a 'librarified' R


>Sounds interesting.  Is the code available to look at?
>
>Thanks
>
>luke
>
>Federico Spinazzi wrote:


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 18 11:06:36 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Dec 2000 12:06:36 +0100
Subject: R: [Rd] Some libraries and ideas for a 'librarified' R
In-Reply-To: <005701c068db$17287db0$0a00a8c0@bellview>
References: <005701c068db$17287db0$0a00a8c0@bellview>
Message-ID: <14909.61372.915270.684729@mithrandir.hornik.net>

>>>>> Federico Spinazzi writes:

> Well, I think the better solution would be to put them on the web: I
> tried to open two web pages but I forget the possword every time :-(.

> I see 2 quick solutions:
> - send the files via e-mail
> - put the files on CRAN (where?);

See the FAQ:

   To "submit" to CRAN, simply upload to
`ftp://cran.r-project.org/incoming/' and send an email to
<wwwadmin@cran.r-project.org>.

     *Note:*  It is very important that you indicate the copyright
     (license) information (GPL, BSD, Artistic, ...)  in your
     submission.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Dec 18 11:08:32 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 18 Dec 2000 12:08:32 +0100
Subject: [Rd] 2nd Int. Workshop on Distributed Statistical Computing
Message-ID: <14909.61488.264699.820497@celeborn.at>


DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universitt Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  Robert Gentleman		Harvard University
  Stefano Iacus			Universit degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Torsten Hothorn		Universitt Erlangen
  Kurt Hornik			Technische Universitt Wien  
  Timothy Keitt			State University of New York, Stony Brook
  Friedrich Leisch		Technische Universitt Wien
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mchler		ETH Zurich
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universitt Wien
  Brian Ripley			University of Oxford
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From B.Rowlingson@lancaster.ac.uk  Mon Dec 18 12:46:04 2000
From: B.Rowlingson@lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181246.NAA21203@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: R-1.2.0
OS: RH7/i386
Submission from: (NULL) (148.88.0.11)


demo(is.things) fails with:

> is.ALL(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"
In addition: Warning message: 
is.nan() applied to non-(list or vector) in: fn(obj) 

 - this seems to be because it is calling:

> is.na.POSIXlt(NULL)
Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
"POSIXct"

 is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
NULL's in the documentation for the POSIX{l,c}t functions. It seems that
errors in these functions cause 'stop()' calls rather than returning NA's.

Barry



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Dec 18 13:38:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 18 Dec 2000 13:38:04 +0000 (GMT)
Subject: [Rd] demo(is.things) fails (PR#772)
Message-ID: <200012181338.NAA13654@toucan.stats.ox.ac.uk>


> From: B.Rowlingson@lancaster.ac.uk
> Date: Mon, 18 Dec 2000 13:46:04 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] demo(is.things) fails (PR#772)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Barry Rowlingson
> Version: R-1.2.0
> OS: RH7/i386
> Submission from: (NULL) (148.88.0.11)
> 
> 
> demo(is.things) fails with:
> 
> > is.ALL(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> In addition: Warning message: 
> is.nan() applied to non-(list or vector) in: fn(obj) 
> 
>  - this seems to be because it is calling:
> 
> > is.na.POSIXlt(NULL)
> Error in as.POSIXct.default(x) : Don't know how to convert `x' to class
> "POSIXct"
> 
>  is.na.POSIXlt(NA) gives the same error, and there's nothing on NA's or
> NULL's in the documentation for the POSIX{l,c}t functions. It seems that
> errors in these functions cause 'stop()' calls rather than returning NA's.

That's a *method* for is.na which should not be called directly by users.
It should only be called with an argument inheriting from class POSIXlt.

I have no idea why anyone wrote a demo to call methods directly, but after
four years it looks like it needs updating.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 15:06:59 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 18 Dec 2000 16:06:59 +0100 (MET)
Subject: [Rd] INSTALL should have info on make check (PR#773)
Message-ID: <200012181506.QAA23575@pubhealth.ku.dk>

B.Rowlingson@lancaster.ac.uk drew my attention to the fact that INSTALL
has no information that it might be a good idea to run "make check"
and that it might be a bad sign to have it fail. (Filing as bug report
to prevent us forgetting this indefinitely...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 15:45:59 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Dec 2000 10:45:59 -0500
Subject: [Rd] 1.2.0 segfault
Message-ID: <3A3E3136.C34407@bank-banque-canada.ca>

I'm a novice with gdb but the following is the result of a segfault problem I've been
having with 1.2.0.  If there is something else I should do to get more useful
information at this point, then someone please let me know.

Paul Gilbert
______

[5] /home/mfa5/gilp/zzot : R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa/gilp/R/bin/R.bin

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(curve)
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) dsecurvature.function.testsA()
Undefined command: "dsecurvature".  Try "help".
(gdb) continue
Continuing.

> dsecurvature.function.testsA()
Random number generator tests ...ok
DSE curvature test A 1 ... completed
DSE curvature test A 2 ...
Program received signal SIGSEGV, Segmentation fault.
0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
1551      CLASS_GET_FREE_NODE(node_class, s);
(gdb) bactrace
Undefined command: "bactrace".  Try "help".
(gdb) backtrace
#0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
#1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
#2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
#3  0x55518 in Rf_duplicate (s=0xc63468) at duplicate.c:133
#4  0x5b958 in do_set (call=0xb72804, op=0x1c6304, args=0xb727cc, rho=0x499a38)
    at eval.c:1012
#5  0x5a114 in Rf_eval (e=0xb72804, rho=0x499a38) at eval.c:317
#6  0x5b300 in do_begin (call=0xb739ac, op=0x1c6294, args=0xb72820,
    rho=0x499a38) at eval.c:803
#7  0x5a114 in Rf_eval (e=0xb739ac, rho=0x499a38) at eval.c:317
#8  0x5a730 in Rf_applyClosure (call=0x49a264, op=0x904f24, arglist=0x4bb21c,
    rho=0x4bb3c0, suppliedenv=0x49a210) at eval.c:501
#9  0x7d770 in applyMethod (call=0x49a264, op=0x904f24, args=0x4bb21c,
    rho=0x4bb3c0, newrho=0x49a210) at objects.c:117
#10 0x7dbd4 in Rf_usemethod (generic=0xefffbdc8 "l", obj=0xbd11a4,
    call=0xb73e20, args=0x160000, rho=0x4bb3c0, ans=0xefffbdc4)
    at objects.c:252
#11 0x7dea4 in do_usemethod (call=0xb6a258, op=0x1d3774, args=0xb6a274,
    env=0x4bb3c0) at objects.c:325
#12 0x5a114 in Rf_eval (e=0xb6a258, rho=0x4bb3c0) at eval.c:317
#13 0x5a730 in Rf_applyClosure (call=0xa21d14, op=0x907a14, arglist=0x4bb21c,
    rho=0x4bb078, suppliedenv=0x1b5300) at eval.c:501
#14 0x5a340 in Rf_eval (e=0xa21d14, rho=0x4bb078) at eval.c:352
#15 0x5bba4 in Rf_evalList (el=0xa21c50, rho=0x4bb078) at eval.c:1087
#16 0x5a244 in Rf_eval (e=0xa21c34, rho=0x4bb078) at eval.c:338
#17 0x5c58c in Rf_DispatchOrEval (call=0xa21ba8, generic=0x10cca0 "c",
    args=0xa21bc4, rho=0x4bb078, ans=0xefffc3c4, dropmissing=1) at eval.c:1386
#18 0x2f144 in do_c (call=0xa21ba8, op=0x1c8168, args=0xa21bc4, env=0x4bb078)
    at bind.c:538
#19 0x5a114 in Rf_eval (e=0xa21ba8, rho=0x4bb078) at eval.c:317
#20 0x5b300 in do_begin (call=0xa21b8c, op=0x1c6294, args=0xa21b70,
    rho=0x4bb078) at eval.c:803
#21 0x5a114 in Rf_eval (e=0xa21b8c, rho=0x4bb078) at eval.c:317
---Type <return> to continue, or q <return> to quit---
#22 0x5a730 in Rf_applyClosure (call=0x4bbc94, op=0x2d32e0, arglist=0x4bbd04,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#23 0x5a340 in Rf_eval (e=0x4bbc94, rho=0x2d36ec) at eval.c:352
#24 0x38940 in do_docall (call=0x4bbc94, op=0x3, args=0xbcd8b4, rho=0x4bc678)
    at coerce.c:1692
#25 0x7d32c in do_internal (call=0x17f5f0, op=0x1cd010, args=0x4bc6b0,
    env=0x4bc678) at names.c:925
#26 0x5a114 in Rf_eval (e=0x1e488c, rho=0x4bc678) at eval.c:317
#27 0x5a730 in Rf_applyClosure (call=0x9d1c5c, op=0x1e47ac, arglist=0x4bd41c,
    rho=0x2d36ec, suppliedenv=0x1b5300) at eval.c:501
#28 0x5a340 in Rf_eval (e=0x9d1c5c, rho=0x2d36ec) at eval.c:352
#29 0x5bba4 in Rf_evalList (el=0x9d1c40, rho=0x2d36ec) at eval.c:1087
#30 0x5a244 in Rf_eval (e=0x9d1c08, rho=0x2d36ec) at eval.c:338
#31 0x5bba4 in Rf_evalList (el=0x9d1bec, rho=0x2d36ec) at eval.c:1087
#32 0x5a244 in Rf_eval (e=0x9d1bd0, rho=0x2d36ec) at eval.c:338
#33 0x5bba4 in Rf_evalList (el=0x9d1a64, rho=0x2d36ec) at eval.c:1087
#34 0x5a244 in Rf_eval (e=0x9d1a48, rho=0x2d36ec) at eval.c:338
#35 0x5b5dc in applydefine (call=0x9d19f4, op=0x1c6304, args=0x9d1a10,
    rho=0x2d36ec) at eval.c:924
#36 0x5ba68 in do_set (call=0x9d19f4, op=0x1c6304, args=0x9d1a10, rho=0x2d36ec)
    at eval.c:1041
#37 0x5a114 in Rf_eval (e=0x9d19f4, rho=0x2d36ec) at eval.c:317
#38 0x5b300 in do_begin (call=0x9d1644, op=0x1c6294, args=0x9d19d8,
    rho=0x2d36ec) at eval.c:803
#39 0x5a114 in Rf_eval (e=0x9d1644, rho=0x2d36ec) at eval.c:317
#40 0x5ae3c in do_for (call=0x9d194c, op=0x1b4cc4, args=0x9d1968, rho=0x2d36ec)
    at eval.c:678
#41 0x5a114 in Rf_eval (e=0x9d194c, rho=0x2d36ec) at eval.c:317
#42 0x5b300 in do_begin (call=0x9d1820, op=0x1c6294, args=0x9d1930,
    rho=0x2d36ec) at eval.c:803
#43 0x5a114 in Rf_eval (e=0x9d1820, rho=0x2d36ec) at eval.c:317
#44 0x5ae3c in do_for (call=0x9d277c, op=0x1b4cc4, args=0x9d2798, rho=0x2d36ec)
    at eval.c:678
---Type <return> to continue, or q <return> to quit---
#45 0x5a114 in Rf_eval (e=0x9d277c, rho=0x2d36ec) at eval.c:317
#46 0x5b300 in do_begin (call=0x9d0464, op=0x1c6294, args=0x9d2760,
    rho=0x2d36ec) at eval.c:803
#47 0x5a114 in Rf_eval (e=0x9d0464, rho=0x2d36ec) at eval.c:317
#48 0x5a730 in Rf_applyClosure (call=0xa224b4, op=0x9b6598, arglist=0x2d33c0,
    rho=0x2d3ad4, suppliedenv=0x1b5300) at eval.c:501
#49 0x5a340 in Rf_eval (e=0xa224b4, rho=0x2d3ad4) at eval.c:352
#50 0x5b300 in do_begin (call=0xa21a74, op=0x1c6294, args=0xa22498,
    rho=0x2d3ad4) at eval.c:803
#51 0x5a114 in Rf_eval (e=0xa21a74, rho=0x2d3ad4) at eval.c:317
#52 0x5aa28 in do_if (call=0xa22428, op=0x1b4d6c, args=0xa22444, rho=0x2d3ad4)
    at eval.c:591
#53 0x5a114 in Rf_eval (e=0xa22428, rho=0x2d3ad4) at eval.c:317
#54 0x5b300 in do_begin (call=0xa2240c, op=0x1c6294, args=0xa223f0,
    rho=0x2d3ad4) at eval.c:803
#55 0x5a114 in Rf_eval (e=0xa2240c, rho=0x2d3ad4) at eval.c:317
#56 0x5a730 in Rf_applyClosure (call=0x2d38c0, op=0xa5d2a8, arglist=0x2d4488,
    rho=0x2d4728, suppliedenv=0x2d4808) at eval.c:501
#57 0x7d770 in applyMethod (call=0x2d38c0, op=0xa5d2a8, args=0x2d4488,
    rho=0x2d4728, newrho=0x2d4808) at objects.c:117
#58 0x7dbd4 in Rf_usemethod (generic=0xefffe3b0 "span", obj=0xd13c00,
    call=0xa20878, args=0x160000, rho=0x2d4728, ans=0xefffe3ac)
    at objects.c:252
#59 0x7dea4 in do_usemethod (call=0x9d06cc, op=0x1d3774, args=0x9d06e8,
    env=0x2d4728) at objects.c:325
#60 0x5a114 in Rf_eval (e=0x9d06cc, rho=0x2d4728) at eval.c:317
#61 0x5a730 in Rf_applyClosure (call=0xa29e28, op=0x9b67e4, arglist=0x2d4488,
    rho=0x694704, suppliedenv=0x1b5300) at eval.c:501
#62 0x5a340 in Rf_eval (e=0xa29e28, rho=0x694704) at eval.c:352
#63 0x5b934 in do_set (call=0xa29dd4, op=0x1c6304, args=0xa29df0, rho=0x694704)
    at eval.c:1008
#64 0x5a114 in Rf_eval (e=0xa29dd4, rho=0x694704) at eval.c:317
#65 0x5b300 in do_begin (call=0xa23464, op=0x1c6294, args=0xa29db8,
---Type <return> to continue, or q <return> to quit---
    rho=0x694704) at eval.c:803
#66 0x5a114 in Rf_eval (e=0xa23464, rho=0x694704) at eval.c:317
#67 0x5a730 in Rf_applyClosure (call=0x694544, op=0xa5ce10, arglist=0x1b5300,
    rho=0x1d42a8, suppliedenv=0x1b5300) at eval.c:501
#68 0x5a340 in Rf_eval (e=0x694544, rho=0x1d42a8) at eval.c:352
#69 0x7166c in R_ReplConsole (rho=0x1d42a8, savestack=0, browselevel=0)
    at main.c:187
#70 0x71dd0 in run_Rmainloop () at main.c:485
#71 0x71e14 in Rf_mainloop () at main.c:499
#72 0xc8e74 in main (ac=0, av=0xeffff1c4) at system.c:88
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Dec 18 16:14:53 2000
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Mon, 18 Dec 2000 17:14:53 +0100 (MET)
Subject: [Rd] \item{x}<cr>{description of x} (PR#774)
Message-ID: <200012181614.RAA24226@pubhealth.ku.dk>

Under \arguments in help files if I use

\item{x}
{description of x}

rather than

\item{x}{description of x}

as I am suppose to do, then the "description of x" is quietly omitted. It would be
nice to allow this syntax or at least give an error or warning.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Dec 18 16:37:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Dec 2000 17:37:02 +0100
Subject: [Rd] 1.2.0 segfault
In-Reply-To: Paul Gilbert's message of "Mon, 18 Dec 2000 10:45:59 -0500"
References: <3A3E3136.C34407@bank-banque-canada.ca>
Message-ID: <x2wvcxofdd.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm a novice with gdb but the following is the result of a segfault problem I've been
> having with 1.2.0.  If there is something else I should do to get more useful
> information at this point, then someone please let me know.

This kind of stuff is usually caused by memory protection errors. Two
things you can do:

 - insert a call to gctorture() close to the point of the crash. This
   will often make the crash occur closer to the point of the actual
   error.

 - Compile R (I'm afraid you have to recompile the entire thing)
   configured with the --enable-strict-barrier flag

Apart from that, you can of course try tracing the origins of the
error with gdb, e.g.

 - which variable had bogus contents?
 - when was the last time something wrote to that memory location?
 - etc...

It does get a bit excessive if I try to explain all that, though...

> > library(curve) 
Loading required package: dse1 
Loading required package: syskern 
Loading required package: tframe 
Program received signal SIGWINCH, Window size changed. 
0xef5b7400 in poll () (gdb)

> dsecurvature.function.testsA() 
Undefined command: "dsecurvature". Try "help". 
(gdb) continue Continuing.
> 
> > dsecurvature.function.testsA()
> Random number generator tests ...ok
> DSE curvature test A 1 ... completed
> DSE curvature test A 2 ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> 1551      CLASS_GET_FREE_NODE(node_class, s);
> (gdb) bactrace
> Undefined command: "bactrace".  Try "help".
> (gdb) backtrace
> #0  0x763cc in Rf_allocVector (type=14, length=2) at memory.c:1551
> #1  0x5561c in Rf_duplicate (s=0xbcd6f0) at duplicate.c:140
> #2  0x55518 in Rf_duplicate (s=0x99c508) at duplicate.c:133
...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 17:43:37 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 18:43:37 +0100 (MET)
Subject: [Rd] Help: StatXact
Message-ID: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>


Help needed!

Has anyone access to StatXact? I just hacked exact two-sided p-values for
rank tests (for package exactDistr, which will move to CRAN/contrib as
exactRankTests soon ;-) and would like to compare the results of my
implementation to that of StatXact. Could someone please calculate the
exact one-sided (both greater and less) and two-sided p-values?

# Data from the StatXact-4 manual, page 221
treat <- c(94, 108, 110, 90)
contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)

My results: 

> wilcox.exact(x,y)

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.8963 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(x,y, alternative="l")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.5656 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(x,y, alternative="g")

         Wilcoxon rank sum test 

data:  x and y 
W = 52, p-value = 0.4636 
alternative hypothesis: true mu is greater than 0 


Thanks!

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Dec 18 17:53:53 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Dec 2000 18:53:53 +0100
Subject: [Rd] Latest/last beta of R 1.1.1 for MacOS (rel Dec 10 2000)
Message-ID: <a05001905b663fcabe859@[159.149.74.61]>

Dear R&Mac developers(users),

at

http://www.eco-dip.unimi.it/R

you can find the latest (and last) beat version of R for MacOs 
corresponding to R vers 1.1.1.
Release date is Dec 10 2000. It is no longer a pre-alpha version but 
a beta one :)



In what follows you can find what's new in this version but please 
remember that it is still a beta version intended mainly for R 
developers and with the aim to collect as much feedback as possible.

Sometimes R application fails to allocate memory and it quits. This 
is a known bug and it will be fixed in the next release.

I think that this is the last porting of R 1.1.1 and next version of 
R for MacOS will be based on R ver 1.2.0 released on Dec 15 2000. I 
hope this to be a complete porting and it will come with next year.

I would like to thank the R Core Team people for the invaluable help 
given to me.

Stefano

p.s. I apologize for this long message.
----


Macintosh porting of R-1.1.1,  beta 1, (Dec 10 2000).



What's new from R for Mac pre-alpha  2
======================================

* tempfile() is now supported. Temporary files are stored in a directory
   "tmp" that it is assumed to be in the main R folder. If it doesn't
   exist, R create it. All temporary files will be stored there.

* unlink() is implemented. It can delete only files and dirs created
   from the current R session. Wildcards not allowed yet.

* Dynamic libraries are fully implemented grace to the code give to me
   by Luke Tierney.
   (There is a problem with DLLName. Every function must be searched
    for global and not for a specific package when calling .C/.Fortran etc)

* Most of the packages have been compiled but the tclk one.

* tclk demos disabled

* Packages. The following packages have been compiled or simply added
   to the base one:

   ctest (ex:tested)
   eda (ex:tested)
   lqs (ex:tested)
   modreg (ex:tested)
   mva (ex:tested)
   nls (ex:tested, does not work "SSlogis")
   splines (ex:tested)
   stepfun (ex:tested)
   ts (file AnIndex to be built)
   wavethresh (examples and help files to be built)

* Metric Information for graphics device partially working.
   You can write expressions and symbols in plots but it is not yet
   perfectly working.

* data(women) doesn't load! Can't understand why...yet.

* XDR loading/saving has been implemented. I use the code from B. Ripley
   that (seems) to work fine with very little modifications.

* Load and Save of image is now implemented correctly.

* Load and Save implemented from menu too. If you save from menu an icon
   will be added to the file. You can double-click on a R file to start the
   application or load a file in R if the application is running. You can
   also  drag&drop the file on the R icon to launch R.

* Help files are now displayed correctly with colors as under Windows


What else still remains to do!
==============================
There are lots of things that have to be implemented and fixed.
Not all the avalaible packages have been compiled. If you have any
particular need please let me know and I will compile and made
available the package. There is not an automatic install procedure
for building packages under MacOS yet.

This current version containes wavethresh and multiv packages but no
help files and examples are avalaible yet.
If you need them you should only copy the directories "help" and "R-ex"
of the Windows distribution in their respectively directory under this
distribution.

Memory problems
===============
There is a strange behaviour of this porting of R with memory
that I'm not able to fix yet.
As the memory routines will be changed in R 1.2 I decided to
fix it in version 1.2 of the MacOS porting.
Anyway, the suggested memory parameters are the following: from
Finder get Information on the R application and change its
assigned memory to 42000k. From within R application preferences set
RVSize = 5M and RNSize = 500k.


Hystory
=======



What was in R for Mac pre-alpha 2 and 1
=======================================
* dir, setcwd, getcwd
* macdevice pdated to WasteLib 2.0


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mjr@stats.mth.uea.ac.uk  Mon Dec 18 18:01:34 2000
From: mjr@stats.mth.uea.ac.uk (MJ Ray)
Date: 18 Dec 2000 18:01:34 +0000
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: Paul Gilbert's message of "Fri, 15 Dec 2000 11:15:18 -0500"
References: <200012151512.QAA08186@pubhealth.ku.dk>
 <14906.14890.389545.580735@galadriel.ci.tuwien.ac.at>
 <3A3A4396.5AF55E95@bank-banque-canada.ca>
Message-ID: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think we would be better off to let a non-native English speaker
> decide. My Shorter OED (possibly a special version for the colonies)
> gives both spelling. In french it is Licence.

In native English, it is "Licence".  In American English, it is
"License".  Personally, I prefer the native English version, but I'm
outnumbered on this planet.
-- 
MJR                                     (Not an official statement)
Please note changes of address		http://stats.mth.uea.ac.uk/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Dec 18 18:01:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 18 Dec 2000 19:01:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3E5104.F34880B0@statistik.uni-dortmund.de>



Torsten Hothorn wrote:
> 
> Help needed!
> 
> Has anyone access to StatXact? I just hacked exact two-sided p-values for
> rank tests (for package exactDistr, which will move to CRAN/contrib as
> exactRankTests soon ;-) and would like to compare the results of my
> implementation to that of StatXact. Could someone please calculate the
> exact one-sided (both greater and less) and two-sided p-values?
> 
> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results:
> 
> > wilcox.exact(x,y)
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.8963
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(x,y, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.5656
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(x,y, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  x and y
> W = 52, p-value = 0.4636
> alternative hypothesis: true mu is greater than 0
> 
> Thanks!
> 
> Torsten


Hi Torsten!

I could do it tomorrow, when I am back in office (Stat-Xact 3 ???), if
you like ...

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 18 18:42:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Dec 2000 18:42:22 +0000 (GMT)
Subject: [Rd] R1.2.0 (PR#766)
In-Reply-To: <szihf41ehhd.fsf@stats.mth.uea.ac.uk>
Message-ID: <Pine.GSO.4.05.10012181839370.19824-100000@auk.stats>

On 18 Dec 2000, MJ Ray wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > I think we would be better off to let a non-native English speaker
> > decide. My Shorter OED (possibly a special version for the colonies)
> > gives both spelling. In french it is Licence.
> 
> In native English, it is "Licence".  In American English, it is
> "License".  Personally, I prefer the native English version, but I'm
> outnumbered on this planet.

I don't think wither of those are relevant.  It is a DCF (Debian Control
Format?) file, and in DCF the entry is `License:'.  Human languages don't
come into it.  (As another example, the field is `Author:' even if there
are seventeen authors.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Dec 18 18:53:03 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 18 Dec 2000 19:53:03 +0100 (MET)
Subject: [Rd] Help: StatXact
In-Reply-To: <Pine.LNX.4.21.0012181836580.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>


> # Data from the StatXact-4 manual, page 221
> treat <- c(94, 108, 110, 90)
> contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> 
> My results: 

Upps, sorry, those results where totally non-sense. I'm to tired ;-)  

here are the results of my current implementation for the dataset above
(but data were correct!):

> wilcox.exact(treat, contr)

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.0989 
alternative hypothesis: true mu is not equal to 0 

> wilcox.exact(treat, contr, alternative="l")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.9648 
alternative hypothesis: true mu is less than 0 

> wilcox.exact(treat, contr, alternative="g")

         Wilcoxon rank sum test 

data:  treat and contr 
W = 35, p-value = 0.05568 
alternative hypothesis: true mu is greater than 0 

Sorry again, 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Dec 18 19:17:06 2000
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 18 Dec 2000 14:17:06 -0500
Subject: [Rd] Some potential changes (enhancements) to formulas and models
Message-ID: <20001218141706.K11628@jimmy.harvard.edu>

Here is part 1 of my long saga towards a more flexible modeling
paradigm.
Comments and hints are especially welcome.

The simple version:
  Starting with a formula and data R goes through 3 main steps to get
the data into a form suitable for fitting.

 1) application of terms
 2) application of model.frame
    (subset and na.action occur in 2).
 3) application of model.matrix


 To be concrete think of the following two formulas

F1:  y~a*log(b)

F2:  y~a*(1+ exp(b*t))

 My goal is to introduce a meaningful way of specifying which symbols
are parameters and which are data.

 For now I'm just going to talk about the terms function and within
 that
 just about the factors component that is returned. I've had a look at
 the man pages and the White book (ch 2).

  The factors component is supposed to be a matrix with the variable
  names
  along the rows and the terms (whatever they are) as columns.

   If in F1 both a and b are variables then the terms are
    terms:  a, log(b), a:log(b)
  the variable names are
     vars: y, a, log(b)

   If a or b is a parameter (say it's a) then
   terms: log(b)
   vars: y, log(b)

  I think it would be easier if log(b) was in the terms  but b
  was in the vars.

    With F2, things aren't so simple:
     currently we get,

y ~ a + exp(b * t) + a:exp(b * t)
attr(,"variables")
list(y, a, exp(b * t))
attr(,"factors")
           a exp(b * t) a:exp(b * t)
y          0          0            0
a          1          0            1
exp(b * t) 0          1            1

  Which is ok, given that we haven't said anything about the variables
 but it certainly won't help us to build a model.
  Now suppose I want to identify a and b as parameters,
then I want to get:
  y ~ a * ( 1 + exp( b * t ) )

  terms:  t
  vars: y, t

   If just a is a parameter then I think that we should get

   terms: t, b, t:b
or terms: y, exp(b*t)
   vars: y, t, b

  Open questions:
 1) When do the special formula operators work and when do they take
their
    usual interpretation?

 2) I think that model.frame should produce a dataframe with
       columns corresponding to the variables in the model.
     - model.matrix is then responsible for using the model frame
      and the terms to produce a model.matrix

     In the F1 example, then under this scheme the model frame
     would contain y a and log(b)
     The model matrix would have a and log(b) in it.
     If b appears on its own and inside a function call does that
     correspond to two variables or one?

 3) In some sense we need define what a term is and
    what a variable is. We need to do that in a way that is meaningful
    for both linear and nonlinear (and possible graphical) models.

 4) Is the notion of model.matrix useful outside of linear models?
    If so, is it the place where we code up the contrasts

  Robert
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From charpent@bacbuc.dyndns.org  Mon Dec 18 19:48:43 2000
From: charpent@bacbuc.dyndns.org (charpent@bacbuc.dyndns.org)
Date: Mon, 18 Dec 2000 20:48:43 +0100 (MET)
Subject: [Rd] R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ? (PR#775)
Message-ID: <200012181948.UAA25371@pubhealth.ku.dk>

Full_Name: Emmanuel Charpentier
Version: 1.2.0
OS: Linux 2.2.18 (Debian 2.2)
Submission from: (NULL) (193.251.31.31)


When trying "mass" installation of available packages, the package logspline
does not compile, at least when installed through
install.packages("logspline").

It seems that it is a small bug, such a missing #include <math.h> or -libm
linking switch ?

installation output follows (screen copy) :

> install.packages("logspline")
--20:39:02--  http://cran.r-project.org:80/src/contrib/PACKAGES
           => `/tmp/fileR2ef9S74b0dc51'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 29,955 [text/plain]

    0K -> .......... .......... .........                        [100%]

20:39:03 (43.47 KB/s) - `/tmp/fileR2ef9S74b0dc51' saved [29955/29955]

--20:39:03--  http://cran.r-project.org:80/src/contrib/logspline_1.0-2.tar.gz
           => `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
Connecting to cran.r-project.org:80... connected!
HTTP request sent, awaiting response... 200 OK
Length: 41,280 [application/x-tar]

    0K -> .......... .......... .......... ..........            [100%]

20:39:05 (31.57 KB/s) - `/tmp/RinstdirR2ef9S66334873/logspline_1.0-2.tar.gz'
saved [41280/41280]

Installing source package `logspline' ...
 libs
gcc -I/usr/lib/R/include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES 
-fPIC  -g -O2 -c logsplin.c -o logsplin.o
g77   -fPIC  -g -O2 -c mpack.f -o mpack.o
ld: warning: cannot find entry symbol _start; defaulting to 08048080
logsplin.o: In function `logcensor':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:101: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:117: undefined reference to `pow'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:184: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:201: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:207: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:276: undefined reference to `log'
logsplin.o: In function `removeknot':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:334: undefined reference to
`sqrt'logsplin.o: In function `fits':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:350: undefined reference to `log'
logsplin.o: In function `iter':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:396: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:405: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:415: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:755: undefined reference to
`printf'
logsplin.o: In function `erroradjust':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:851: undefined reference to
`sqrt'logsplin.o: In function `likeli':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:890: undefined reference to `exp'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:915: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:918: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:924: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:940: undefined reference to `log'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:946: undefined reference to `log'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:959: more undefined
references to `log' follow
logsplin.o: In function `linsearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1055: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1086: undefined reference to
`pow'logsplin.o: In function `onesearch':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1103: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1112: undefined reference to
`log'logsplin.o: In function `numbertester':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1141: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1144: undefined reference to
`pow'logsplin.o: In function `expin':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1199: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1205: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1207: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1208: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1210: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1211: more
undefined references to `exp' follow
logsplin.o: In function `expin2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1247: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1253: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1255: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1256: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1258: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1259: more
undefined references to `exp' follow
logsplin.o: In function `dens33':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1290: undefined reference to
`log'logsplin.o: In function `fun2':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1451: undefined reference to
`exp'logsplin.o: In function `coeff':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1530: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: undefined reference to
`pow'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1533: more
undefined references to `pow' follow
logsplin.o: In function `knotplace':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1929: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1933: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1951: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1970: undefined reference to
`ceil'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1971: undefined reference to
`floor'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:1975: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2110: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2112: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2126: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2128: undefined reference to
`printf'
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2147: undefined reference to
`printf'
logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2148: more undefined
references to `printf' follow
logsplin.o: In function `knotnumber':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2249: undefined reference to
`pow'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2255: undefined reference to
`ceil'
logsplin.o: In function `middle':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2443: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2445: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:2447: undefined reference to
`log'logsplin.o: In function `pqexp':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3037: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3039: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3040: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3043: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3045: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3046: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: undefined reference to
`exp'logsplin.o:/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3049: more
undefined re
ferences to `exp' follow
logsplin.o: In function `pqexpi':
/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3142: undefined reference to
`log'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3144: undefined reference to
`exp'/tmp/R.INSTALL.12079/logspline/src/logsplin.c:3146: undefined reference to
`exp'make: *** [logspline.so] Error 1
ERROR: Compilation failed for package `logspline'

Delete downloaded files (y/N)? 
The packages are in /tmp/RinstdirR2ef9S66334873
Warning messages: 
1: argument `lib' is missing: using /usr/lib/R/library in:
install.packages("logspline") 
2: Installation of package logspline had non-zero exit status in:
install.packages("logspline") 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 19 08:44:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 19 Dec 2000 09:44:40 +0100
Subject: [Rd] Help: StatXact
References: <Pine.LNX.4.21.0012181948430.22869-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <3A3F1FF8.1710657B@statistik.uni-dortmund.de>

Torsten Hothorn wrote:
> 
> > # Data from the StatXact-4 manual, page 221
> > treat <- c(94, 108, 110, 90)
> > contr <- c(80, 94, 85, 90, 90, 90, 108, 94, 78, 105, 88)
> >
> > My results:
> 
> Upps, sorry, those results where totally non-sense. I'm to tired ;-)
> 
> here are the results of my current implementation for the dataset above
> (but data were correct!):
> 
> > wilcox.exact(treat, contr)
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.0989
> alternative hypothesis: true mu is not equal to 0
> 
> > wilcox.exact(treat, contr, alternative="l")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.9648
> alternative hypothesis: true mu is less than 0
> 
> > wilcox.exact(treat, contr, alternative="g")
> 
>          Wilcoxon rank sum test
> 
> data:  treat and contr
> W = 35, p-value = 0.05568
> alternative hypothesis: true mu is greater than 0
> 
> Sorry again,
> 
> Torsten


Sorry, I cannot help Torsten:

1. Only StatXact 3 is available here.
2. I am too stupid to produce any output, which doesn't look like
nonsense....

Is another volunteer out there? ;-)

Best regards,
Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 13:53:42 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 14:53:42 +0100 (MET)
Subject: [Rd] strwidth does not take font into account (PR#776)
Message-ID: <200012191353.OAA05829@pubhealth.ku.dk>

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue Dec 19 14:09:04 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Tue, 19 Dec 2000 15:09:04 +0100 (MET)
Subject: [Rd] Minor "make check" bug. (PR#777)
Message-ID: <200012191409.PAA06270@pubhealth.ku.dk>

If you build R with the following sequence

./configure
make R
make check

Then "make check" fails at the following point (in examples for help()
itself)

> try(help("bs", try.all.packages=FALSE)) # reports not found (an error)
Error in help("bs", try.all.packages = FALSE) :
        No documentation for `bs' in specified packages and libraries
> help("bs", try.all.packages=TRUE) # reports can be found in package `splines'
Error in help("bs", try.all.packages = TRUE) :
        No documentation for `bs' in specified packages and libraries
Execution halted

Evidently this is because the help pages for the package `splines'
have not been built.  The simplest solution would be to wrap the
second call to help in a call to try.

Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Dec 19 19:56:11 2000
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 19 Dec 2000 20:56:11 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012191956.UAA09023@pubhealth.ku.dk>

Here's a bug one of my students noticed.

When you call plot() on a glm object, plot.lm gets called.  The second
plot it shows is supposed to give a normal QQ plot of the standard
deviance residuals, but it doesn't.  The glm object created by glm.fit
returns something (the IRLS weights?) in fit$weights which plot.lm
takes as observation weights, so  you get strange residuals in the QQ
plot.

For example, here I fit a simulated Poisson model where the model
perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
ranging between -45 and 40.

>set.seed(1)
>x <- seq(4,5,len=1000)
>y <- rpois(1000,exp(x))
>fit <- glm(y ~ x, family=poisson)
>plot(fit, which=2)

If I extract the residuals myself and plot them, I see that the model
is fine:

>qqnorm(residuals(fit))

The problem is that the weights are big; plot.lm should be using
prior.weights, or glm should be returning the big weights under a
different name:

> summary(fit$weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  54.35   69.90   89.90   93.76  115.60  148.70 

> summary(fit$prior.weights)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1       1       1       1       1       1 

Duncan Murdoch

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Dec 19 20:08:20 2000
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 19 Dec 2000 21:08:20 +0100 (MET)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012192008.VAA09113@pubhealth.ku.dk>

When I use sink(filename) to save the results of the run, the file
does not seem to be closed or released back to the OS after I issue
the "sink()" command.  Here is a baby example:

sink("test.txt")
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))

print(summary(lm(y ~ x, data=tdta)))
sink()

At this point (even after refreshing the Explorer window) the filesize of
"test.txt" is listed as 0 bytes, and as long as Rgui is running, I
cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
and when the commands are in a file run via "source()".

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 1998)

Search Path:
 .GlobalEnv, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 20:36:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 20:36:46 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012192008.VAA09113@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>

On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:

> When I use sink(filename) to save the results of the run, the file
> does not seem to be closed or released back to the OS after I issue
> the "sink()" command.  Here is a baby example:

sink works on connections, not files, as from 1.2.0.

> sink("test.txt")
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> 
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> 
> At this point (even after refreshing the Explorer window) the filesize of
> "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> and when the commands are in a file run via "source()".

Yes, but what is the bug exactly?  The connection is still open so you can
switch output back to it.  If you want different behaviour, you can open a
connection and close it yourself.  As in

zz <- file("test.txt", "w")
sink(zz)
tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
print(summary(lm(y ~ x, data=tdta)))
sink()
close(zz)

It might be better to close the file as well as the connection when
switching, but that is not what was done.  To do that use

sink <- function (file = NULL, append = FALSE) 
{
    if (is.null(file)) 
        file <- 1
    else if (is.character(file)) { 
        file <- file(file, ifelse(append, "a", "w"))
        on.exit(close(file))
    } else if (!inherits(file, "connection")) 
        stop("`file' must be NULL, a connection or a character string")
    .Internal(sink(file, append))
}

(One possible cause of confusion is that the connection might be closed,
but not the file.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 19 21:08:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Dec 2000 21:08:57 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <Pine.GSO.4.05.10012192025180.2595-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10012192107220.11682-100000@auk.stats>

On Tue, 19 Dec 2000, Prof Brian D Ripley wrote:

> On Tue, 19 Dec 2000 Setzer.Woodrow@epamail.epa.gov wrote:
> 
> > When I use sink(filename) to save the results of the run, the file
> > does not seem to be closed or released back to the OS after I issue
> > the "sink()" command.  Here is a baby example:
> 
> sink works on connections, not files, as from 1.2.0.
> 
> > sink("test.txt")
> > tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> > 
> > print(summary(lm(y ~ x, data=tdta)))
> > sink()
> > 
> > At this point (even after refreshing the Explorer window) the filesize of
> > "test.txt" is listed as 0 bytes, and as long as Rgui is running, I
> > cannot delete the file.  Emacs cannot read the file (but Notepad can).  This happens both in the gui
> > and when the commands are in a file run via "source()".
> 
> Yes, but what is the bug exactly?  The connection is still open so you can
> switch output back to it.  If you want different behaviour, you can open a
> connection and close it yourself.  As in
> 
> zz <- file("test.txt", "w")
> sink(zz)
> tdta <- data.frame(x = x <- 0:10,y = 2 * x + rnorm(11))
> print(summary(lm(y ~ x, data=tdta)))
> sink()
> close(zz)
> 
> It might be better to close the file as well as the connection when
> switching, but that is not what was done.  To do that use

Sorry, the following is nonsense, as it closes the connection at the
end of sink.  The one above works, though.

I'll make a change in the C code to ensure that the file gets closed if
the connection does.


> sink <- function (file = NULL, append = FALSE) 
> {
>     if (is.null(file)) 
>         file <- 1
>     else if (is.character(file)) { 
>         file <- file(file, ifelse(append, "a", "w"))
>         on.exit(close(file))
>     } else if (!inherits(file, "connection")) 
>         stop("`file' must be NULL, a connection or a character string")
>     .Internal(sink(file, append))
> }
> 
> (One possible cause of confusion is that the connection might be closed,
> but not the file.)
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 10:59:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 11:59:36 +0100 (MET)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
Message-ID: <200012201059.LAA15024@pubhealth.ku.dk>

Using zero-weight values in glm returns incorrect fitted values and
linear predictors, the ninth value in the following.

> example(glm)
> fit <- glm(counts ~ outcome + treatment, family = poisson(), 
             data=d.AD, weights=c(rep(1,8), 0))
> fit$linear.predictor
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
2.493205 
> predict(fit, d.AD)
       1        2        3        4        5        6        7        8 
2.989646 2.535391 2.862201 2.989646 2.535391 2.862201 3.145992 2.691737 
       9 
3.018547 
> fitted(fit)
       1        2        3        4        5        6        7        8 
19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728 
       9 
12.10000 
> predict(fit, d.AD, type="response")
[1] 19.87864 12.62136 17.50000 19.87864 12.62136 17.50000 23.24272 14.75728
[9] 20.46154

The reason is obvious: glm.fit only ever updates eta[good], and 
zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
initial values.

There are two possible fixes:

1) Update eta after the final fit, and then mu.  Out of range values
could then be NA (although it looks like predict.glm does not check).

2) Update all eta and hence mu values during the iterations.  This will
apply the constraints on eta/mu at zero-weight points too, and so might
be different.

I am inclined to think that 2) is right, and that adding points with zero 
weight to the fit is not the same as omitting them.

Opinions?


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 11:12:37 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 12:12:37 +0100 (MET)
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
Message-ID: <200012201112.MAA15286@pubhealth.ku.dk>

syskern (`Functions for writing code that is OS and R/S independent', an
amazing description given the reality) fails Rcmd check on Windows, and
also gives incorrect information where it does work.

There are already correct OS-independent functions for these purposes in
R.  It appears not to be needed to run the other three packages in the dse
bundle, but to be the only R package that deliberately does not work on
one of the major platforms.  I doubt if it works on Macs, either.  It
should not be in the main section of CRAN unless it does what it claims.
 
> example(global.assign)

glbl.s> date.parsed()
Error in eval.with.vis(expr, envir, enclos) : 
        couldn't find function "date.parsed"

It has not been implemented!

> example(system.call)

systm.> system.call("ls")
Error in system.call("ls") : system calls must be implemented for this operating system.

But they are:

> shell("ls -C")
#R.bug.report#       cvs-co               test1
DF.R                 jpegsrc.v6b.tar.gz   test2.emf
GSD2.EMF             libpng-1.0.8.tar.gz  test3.emf
R-1.2.0.tgz          library              test4.emf
R.bug.report         mri.dat              test5.emf
Rconsole             mydata               texinfo-4.0.tar.bz2
Rdist                packages             tools
TB                   rw1020               tools.zip
VR3sc                rw1021               winold.zip
addlibs              rw1030               zlib113.zip

> system("ls", intern=TRUE)
 [1] "#R.bug.report#"      "DF.R"                "GSD2.EMF"           
 [4] "R-1.2.0.tgz"         "R.bug.report"        "Rconsole"           
 [7] "Rdist"               "TB"                  "VR3sc"              
[10] "addlibs"             "cvs-co"              "jpegsrc.v6b.tar.gz" 
[13] "libpng-1.0.8.tar.gz" "library"             "mri.dat"            
[16] "mydata"              "packages"            "rw1020"             
[19] "rw1021"              "rw1030"              "test1"              
[22] "test2.emf"           "test3.emf"           "test4.emf"          
[25] "test5.emf"           "texinfo-4.0.tar.bz2" "tools"              
[28] "tools.zip"           "winold.zip"          "zlib113.zip"        

Of course, `ls' is OS-dependent, so should not be used as an example
in a purportedly OS-independent package.

> example(system.info)

systm.> system.info()
          _              
platform  i386-pc-mingw32
arch      x86            
os        Win32          
system    x86, Win32     
status                   
major     1              
minor     2              
year      2000           
month     12             
day       15             
language  R              
OSversion MS Windows 95  
OStype    MS Windows     

That is incorrect: see what bug.report gives below.  The heading looks
strange too.

> example(whoami)

whoami> whoami()
Error in whoami() : system calls must be implemented for this operating system.

They are:

> system("whoami", intern=T)
[1] "ripley"
> Sys.info()["user"]
    user 
"ripley" 


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, package:syskern, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Dec 20 11:48:23 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 20 Dec 2000 06:48:23 -0500 (EST)
Subject: [Rd] Example of calling R from Java
Message-ID: <200012201148.GAA25303@jessie.research.bell-labs.com>


> From: "Moshe Recanati" <moshe@i-impact.com>
> Date: Sun, 17 Dec 2000 10:12:25 +0200
> 
> Hello,
> 
> I downloaded the R for Java interface. I read about calling R =
> scripts/methods from java, but I can't find any detailed example about =
> this.
> 
> I need an example of how to use this.
> 
> For example how to load data object (i.e. of colt) to r , run anova =
> function and get the results - all from java!!!
> 
> Thank you very very much
> Regards,
> Moshe
> i-impact
> 


There is a new version of both the Java package (now 0.61) and the
RFromJava document (http://www.omegahat.org/RSJava/RFromJava.pdf)
which gives an example (with the code and a script to run it) of
fitting a linear model in R from Java and getting the resulting lm
object back to Java.

As I have mentioned before, you have to think about what it means
to "get the results" in the context of your application. 

 D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:28:51 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:28:51 +0100
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
Message-ID: <200012201228.NAA04053@mailgate3.cinetic.de>



Dear Prof. Ripley,

You wrote
> Yes, but what is the bug exactly?  

Just testing connections, I think the bug is that the help for sink says that:

  If `file' is a connection if will be opened if necessary.
     Switching to another file or connection closes the existing
     connection unless it is the console.

and after switching to another file or connection the existing connection is not closed.

> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> sink()
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> # now we have silently an open connection left

I tend to think that a sequence of

 sink(WhateverConnectionInvolved)
 :
 :
 sink()

should leave WhateverConnectionInvolved in the same state it was before the sequence.
i.e. if WhateverConnectionInvolved was non.existent it should be non.existent
i.e. if WhateverConnectionInvolved was existent but not opened it should be existent but not opened 
i.e. if WhateverConnectionInvolved was existent and opened it should be existent and opened 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software.


Regards

Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 13:37:55 +0100
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 20 Dec 2000 11:59:36 +0100 (MET)"
References: <200012201059.LAA15024@pubhealth.ku.dk>
Message-ID: <x21yv346ak.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> The reason is obvious: glm.fit only ever updates eta[good], and 
> zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> initial values.
> 
> There are two possible fixes:
> 
> 1) Update eta after the final fit, and then mu.  Out of range values
> could then be NA (although it looks like predict.glm does not check).
> 
> 2) Update all eta and hence mu values during the iterations.  This will
> apply the constraints on eta/mu at zero-weight points too, and so might
> be different.
> 
> I am inclined to think that 2) is right, and that adding points with zero 
> weight to the fit is not the same as omitting them.
> 
> Opinions?

Just for clarification: This applies only to cases where the
parametrization is non-canonical, e.g. additive models with Poisson
response, right? And essentially the issue is that if you have a model
like lambda = a + b x and you put in a zero-weight observation with x
= 0, then that should effectively constrain a to be positive. That
does make quite good sense, yes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:27 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:32:27 +0100 (MET)
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone (PR#782)
Message-ID: <200012201232.NAA16586@pubhealth.ku.dk>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:32:41 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:32:41 +0100
Subject: [Rd] closing the sink connection a) is possible and b) can't be undone
Message-ID: <200012201232.NAA08295@mailgate3.cinetic.de>

# Have no other connections opened yet
> showConnections()
     class description mode text isopen can read can write
> sink("tempfile")
> close(getConnection(3))
> cat("send some output\n")
Error in stdout() : invalid connection
> sink()
Error in sink() : invalid connection
> cat("send some output\n")
Error in stdout() : invalid connection
> showConnections()
Error: invalid connection
> # now we are locked with our output being sent to nowhere and not being able to redirect it to standard out
> 

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:33:15 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:33:15 +0000 (GMT)
Subject: [Rd] Problem with sink() in 1.20 on Windows (PR#779)
In-Reply-To: <200012201228.NAA04053@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201231510.3109-100000@toucan.stats>

On Wed, 20 Dec 2000, [iso-8859-1] Jens Oehlschlgel wrote:

> 
> 
> Dear Prof. Ripley,
> 
> You wrote
> > Yes, but what is the bug exactly?  
> 
> Just testing connections, I think the bug is that the help for sink says that:
> 
>   If `file' is a connection if will be opened if necessary.
>      Switching to another file or connection closes the existing
>      connection unless it is the console.
> 
> and after switching to another file or connection the existing connection is not closed.
> 
> > showConnections()
>      class description mode text isopen can read can write
> > sink("tempfile")
> > sink()
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "w"  "text" "opened" "no"     "yes"    
> > # now we have silently an open connection left

Um, actually it is closed but not removed from the list.  But I have 
put a fix in for 1.2.1, that closes it properly.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:17 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:36:17 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
Message-ID: <200012201236.NAA12101@mailgate3.cinetic.de>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:36:03 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:36:03 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#783)
Message-ID: <200012201236.NAA16683@pubhealth.ku.dk>

> # creating a file
> cat("sddfasdf", file="tempfile")
> showConnections()
     class description mode text isopen can read can write
> con <- file("tempfile", "r")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> unlink("tempfile")
> showConnections()
  class      description mode text   isopen   can read can write
3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> # now we have an opened (read) connection to a non-existing file left

BTW: this may be considered as a special case of a more general thing: 
undefined rights to modify/access connections owned by other parts of the software


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:37:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:37:24 +0000 (GMT)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201233420.3109-100000@toucan.stats>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.

Constraints can be added by the user, of course, but in the standard cases
(canonical links) they never bite.  Poisson with linear link is one case
where they might.  This checking is something that R has but S and GLIM
(AFAIR) do not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:43 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:42:43 +0100
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so
Message-ID: <200012201242.NAA18762@mailgate3.cinetic.de>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:42:32 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:42:32 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) connections though help says so (PR#784)
Message-ID: <200012201242.NAA16855@pubhealth.ku.dk>

help on showConnections explains parameter
all logical: if true all connections, including closed ones and the standard ones are displayed. If false only open user-created connections are included. 

but

> # create a file 
> cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
+     sep="\n")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> con <- file("ex.data")
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here the connection (existing? but not-opened) is not listend 
> 
> open(con)
> showConnections(all=TRUE)
  class     description mode text   isopen   can read can write
0 "stdin"   "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout"  "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr"  "terminal"  "w"  "text" "opened" "no"     "yes"    
3 "ex.data" "file"      "r"  "text" "opened" "yes"    "no"     
> 
> close(con)
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> 
> readLines("ex.data", n=-1)
[1] "TITLE extra line" "2 3 5 7"          ""                 "11 13 17"        
> showConnections(all=TRUE)
  class    description mode text   isopen   can read can write
0 "stdin"  "terminal"  "r"  "text" "opened" "yes"    "no"     
1 "stdout" "terminal"  "w"  "text" "opened" "no"     "yes"    
2 "stderr" "terminal"  "w"  "text" "opened" "no"     "yes"    
> # here we don't know whether showConnections() does not show a connection created and opened by readLine() 
> # or whether readLines() did also close the connection


Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
Subject: [Rd] unlink() is not synchronized with existing connections
 (PR#783)
In-Reply-To: <200012201236.NAA16683@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201240300.3109-100000@toucan.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:47:20 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:47:20 +0100 (MET)
Subject: [Rd] unlink() is not synchronized with existing connections (PR#785)
Message-ID: <200012201247.NAA16941@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> > # creating a file
> > cat("sddfasdf", file="tempfile")
> > showConnections()
>      class description mode text isopen can read can write
> > con <- file("tempfile", "r")
> > readLines(con)
> [1] "sddfasdf"
> Warning message: 
> incomplete final line in: readLines(con, n, ok) 
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > unlink("tempfile")
> > showConnections()
>   class      description mode text   isopen   can read can write
> 3 "tempfile" "file"      "r"  "text" "opened" "yes"    "no"     
> > # now we have an opened (read) connection to a non-existing file left

What's the problem?  That's perfectly valid on OSes that support it (e.g.
Unix and Windows NT).  Unlinked files are *not* `non-existing'.

> cat("sddfasdf", file="tempfile")
> con <- file("tempfile", "r")
> unlink("tempfile")
> readLines(con)
[1] "sddfasdf"
Warning message: 
incomplete final line in: readLines(con, n, ok) 
> close(con)


I am not sure what your point is here.  Connections are experimental and
we know it is possible to do silly things with them.  But why would one?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:33 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
Subject: [Rd] showConnections() does not show closed (or non-opened)
 connections though help says so
In-Reply-To: <200012201242.NAA18762@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10012201249110.3109-100000@toucan.stats>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 12:51:27 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 13:51:27 +0100 (MET)
Subject: [Rd] showConnections() does not show closed (or non-opened) (PR#786)
Message-ID: <200012201251.NAA17017@pubhealth.ku.dk>

Why am I getting two copies of lots of reports from you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:38 2000
From: joehl@web.de (joehl@web.de)
Date: Wed, 20 Dec 2000 13:56:38 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections (PR#787)
Message-ID: <200012201256.NAA17159@pubhealth.ku.dk>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Dec 20 12:56:49 2000
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 20 Dec 2000 13:56:49 +0100
Subject: [Rd] Inconsistency in creating/opening/closing/destroying connections
Message-ID: <200012201256.NAA01807@mailgate3.cinetic.de>

I expected close() to be the opposite of open(), but

> # create a connection
> con <- file("ex.data")
> # open it
> open(con, "w")
> # close it
> close(con)
> # re-open it
> open(con, "w")
Error in open.connection(con, "w") : invalid connection
> 
> con
Error in summary.connection(x) : invalid connection
> # is obviously pointing to a non-existing connection

help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 

So this is at least a documentation bug, but what about having something like

CreateConnection
  OpenConnection
  CloseConnection
DestroyConnection

Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Regards


Jens Oehlschlgel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 13:12:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Dec 2000 14:12:07 +0100
Subject: [Rd] unlink() is not synchronized with existing connections
In-Reply-To: "Jens Oehlschl?gel"'s message of "Wed, 20 Dec 2000 13:36:17 +0100"
References: <200012201236.NAA12101@mailgate3.cinetic.de>
Message-ID: <x2vgsf2q54.fsf@blueberry.kubism.ku.dk>


Jens, could you please avoid mailing to r-devel *and* r-bugs. R-bugs
are automagically forwarded to r-devel with the PR# added, so

a) we get it in duplicate
b) if anyone follows up to the version without the PR# we will
	1) get that in duplicate too
	2) get a *new* PR# for the follow up

(There are bugs enough, no need to multiply them...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:15:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Dec 2000 14:15:13 +0100 (MET)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying (PR#788)
Message-ID: <200012201315.OAA17519@pubhealth.ku.dk>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Dec 20 13:14:56 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
Subject: [Rd] Inconsistency in creating/opening/closing/destroying
 connections (PR#787)
In-Reply-To: <200012201256.NAA17159@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201310370.14649-100000@auk.stats>

On Wed, 20 Dec 2000 joehl@web.de wrote:

> I expected close() to be the opposite of open(), but

Why?  It is not documented to be so, as far as I know.

> > # create a connection
> > con <- file("ex.data")
> > # open it
> > open(con, "w")
> > # close it
> > close(con)
> > # re-open it
> > open(con, "w")
> Error in open.connection(con, "w") : invalid connection
> > 
> > con
> Error in summary.connection(x) : invalid connection
> > # is obviously pointing to a non-existing connection
> 
> help to showConnections obviously also was assuming that there may EXIST something like a CLOSED connection, as it says 
> all logical: if true all connections, including CLOSED ONES and the standard ones are displayed. If false only open user-created connections are included. 
> 
> So this is at least a documentation bug, but what about having something like

Can you please elucidate here?  I don't think any documentation says
open is the opposite of close. I think you are just assuming things that
are not said.  Note:  ?close says

     `close' closes and destroys a connection.

not just closes it, so there can be closed and not destroyed connections.

> CreateConnection
>   OpenConnection
>   CloseConnection
> DestroyConnection
> 
> Is there any reason to have (as currently) OpenConnection seperated from CreateConnection but CloseConnection and DestroyConnection combined?

Yes.  These are S4-type connections, and that is what S4 does.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Dec 20 16:18:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 20 Dec 2000 08:18:31 -0800 (PST)
Subject: [Rd] glm gives incorrect results for zero-weight cases (PR#780)
In-Reply-To: <x21yv346ak.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0012200812560.14916-100000@atlas.biostat.washington.edu>

On 20 Dec 2000, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
> 
> > The reason is obvious: glm.fit only ever updates eta[good], and 
> > zero-weight values are not `good'.  So eta[weights == 0] is stuck at the
> > initial values.
> > 
> > There are two possible fixes:
> > 
> > 1) Update eta after the final fit, and then mu.  Out of range values
> > could then be NA (although it looks like predict.glm does not check).
> > 
> > 2) Update all eta and hence mu values during the iterations.  This will
> > apply the constraints on eta/mu at zero-weight points too, and so might
> > be different.
> > 
> > I am inclined to think that 2) is right, and that adding points with zero 
> > weight to the fit is not the same as omitting them.
> > 
> > Opinions?
> 
> Just for clarification: This applies only to cases where the
> parametrization is non-canonical, e.g. additive models with Poisson
> response, right? And essentially the issue is that if you have a model
> like lambda = a + b x and you put in a zero-weight observation with x
> = 0, then that should effectively constrain a to be positive. That
> does make quite good sense, yes.
> 

Not just non-canonical. There are boundary problems with gamma/reciprocal
glms.  I would also go for the second solution.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From spinazzi@databankgroup.it  Wed Dec 20 17:50:21 2000
From: spinazzi@databankgroup.it (Federico Spinazzi)
Date: Wed, 20 Dec 2000 17:50:21 -0000
Subject: R: R: [Rd] Some libraries and ideas for a 'librarified' R
Message-ID: <011701c06aad$533ac1e0$0a00a8c0@bellview>

I've just uploaded the files

Thanks for your attention,
Federico Spinazzi
spinazzi@databankgroup.it
Databank S.P.A
Via Spartaco, 19, ITALY
Tel. + 39 02 55002251

-----Messaggio originale-----
Da: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
A: Federico Spinazzi <spinazzi@databankgroup.it>
Cc: r-devel@stat.math.ethz.ch <r-devel@stat.math.ethz.ch>
Data: luned 18 dicembre 2000 11.00
Oggetto: Re: R: [Rd] Some libraries and ideas for a 'librarified' R


>>>>>> Federico Spinazzi writes:
>
>> Well, I think the better solution would be to put them on the web: I
>> tried to open two web pages but I forget the possword every time :-(.
>
>> I see 2 quick solutions:
>> - send the files via e-mail
>> - put the files on CRAN (where?);
>
>See the FAQ:
>
>   To "submit" to CRAN, simply upload to
>`ftp://cran.r-project.org/incoming/' and send an email to
><wwwadmin@cran.r-project.org>.
>
>     *Note:*  It is very important that you indicate the copyright
>     (license) information (GPL, BSD, Artistic, ...)  in your
>     submission.
>
>-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Dec 20 21:15:07 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 20 Dec 2000 22:15:07 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <14913.8539.45887.551220@celeborn.at>


Hi,

Kurt Hornik and I will start to publish a quarterly electronic

	``R Newsletter'' 

beginning with January 2001 (if all goes well). The idea is to have a
mixture of articles  describing 
1) new features in R itself
2) contributed add-on packages
3) nice applications
4) more general statistical computing issues related to R
5) or ...

OK, now comes my christmas wish to you: If you are the author of a
package on CRAN and want to promote it a little bit, well, maybe you
find some time during the holidays to write approx. 2 pages (A4 or
letter) in LaTeX and send it to Kurt or me? The same applies if you
simply have a nice application using R.  The idea is to have the
newsletter not too technical, i.e., an article describing a package
could shortly describe the statistical background and then demonstrate
the usage on some typical data set. Of course graphics are more than
welcome!

The newsletter will be published as PDF file on CRAN, the final format
will be created while we layout number one, hence any LaTeX file
should be fine as contribution.  

Otherwise I wish everybody all the best for X-Mas and a happy new
year!

Best,
Fritz Leisch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Wed Dec 20 22:17:23 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Wed, 20 Dec 2000 17:17:23 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>

This is a very nice idea. I would have a problem tough with the Latex format
you require. I'm almost certain that to most Windows user, Latex is as bad
news as a foreign language you know nothing about. Would there be an
alternative to please every body?

Regards

Yves Gauvreau


> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Friedrich Leisch
> Envoye : Wednesday, December 20, 2000 4:15 PM
> A : r-devel@stat.math.ethz.ch
> Objet : [Rd] R Newsletter: 1st Call for Articles
>
>
>
> Hi,
>
> Kurt Hornik and I will start to publish a quarterly electronic
>
> 	``R Newsletter''
>
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
>
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
>
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.
>
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
>
> Best,
> Fritz Leisch
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Dec 20 23:28:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 00:28:00 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: "Yves Gauvreau"'s message of "Wed, 20 Dec 2000 17:17:23 -0500"
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca>
Message-ID: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>

"Yves Gauvreau" <cyg@sympatico.ca> writes:

> This is a very nice idea. I would have a problem tough with the Latex format
> you require. I'm almost certain that to most Windows user, Latex is as bad
> news as a foreign language you know nothing about. Would there be an
> alternative to please every body?

Not really, dealing with MS Word would be a nightmare, and LaTeX is
just about the only format with decent treatment of mathematics.

However, I'm pretty sure that plain ascii would also be acceptable for
simple articles. On the other hand, why should the editors have the
trouble of putting all code excerpts in \begin{verbatim} ..
\end{verbatim} constructs, etc.? 

Perhaps one could define a simplified LaTeX markup similar to .Rd.

Or maybe just point people towards MiKTeX and give them a crash course
in LaTeX? For plain text, the format is really quite simple.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Dec 20 23:20:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 20 Dec 2000 18:20:48 -0500
Subject: [Rd] syskern fails Rcmd check on Windows, gives incorrect information (PR#781)
References: <200012201112.MAA15286@pubhealth.ku.dk>
Message-ID: <3A413ED0.DC3D6CC9@bank-banque-canada.ca>

Brian

I have a new version of syskern which takes advantage of the new
features you have added in R 1.2. I just sent details to Fritz. I'm
sorry that I am a bit slow getting it to CRAN, the release of R 1.2 came
at a very busy time for me. In the future, if you give me a bit more
warning when you are going to test packages with a brand new release of
R, I can probably save you some time by telling you what problems to
expect.

I believe most of syskern now uses standard features of R, so almost
everything should work on all platforms on which R 1.2 works. The main
outstanding facility is a mail interface, which you indicated previously
is problematic in Windows. In any case, it would be useful to
standardize R's side of this so that R programs, like mine and also
bug.report(), can use a program mail() which works on some platforms and
may eventually work on others.

>syskern (`Functions for writing code that is OS and R/S independent' an

>amazing description given the reality

I think you are mis-reading this. If you would like to suggest better
phrasing then that may be helpful. The intention was not to provide the
OS-independent functions as you have now done in R. The intention was to
provide an R-side definition of these functions so that I (and others)
could write R programs in a standardized way to use these facilities
when they became available in R. I kludged a Unix version of the
facilities and invited others to do Windows and Mac versions. Five years
ago when R was still young I needed these facilities to use in R
programs, and it has worked very well. It was very little work for me to
take advantage of the new features in R 1.2. I expect my versions will
become depreciated in R and their main use will be to provide S with
similar names for the same facilities, but there are still a few issues
so it is too early to depreciate them yet.

Seasons Greetings,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Dec 21 01:31:52 2000
From: cberry@tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 20 Dec 2000 17:31:52 -0800 (PST)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10012201721180.11764-100000@tajo.ucsd.edu>

On 21 Dec 2000, Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> > This is a very nice idea. I would have a problem tough with the Latex format
> > you require. I'm almost certain that to most Windows user, Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 

FWIW, at least one of the equation setting add-ons for WORD (MathType, see
http://www.mathtype.com ) has TeX as its engine. It will optionally
provide (La)TeX on the clipboard for pasting into non-WORD docs. So a WORD
user could provide ascii for the text and (La)TeX for equations.


> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Dec 21 01:55:31 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 21 Dec 2000 09:55:31 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
Message-ID: <Pine.GSO.4.21.0012210954431.16878-100000@sununx.comp.nus.edu.sg>

Hi,
where should we make submissions? To you directly?

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Friedrich Leisch wrote:

> 
> Hi,
> 
> Kurt Hornik and I will start to publish a quarterly electronic
> 
> 	``R Newsletter'' 
> 
> beginning with January 2001 (if all goes well). The idea is to have a
> mixture of articles  describing 
> 1) new features in R itself
> 2) contributed add-on packages
> 3) nice applications
> 4) more general statistical computing issues related to R
> 5) or ...
> 
> OK, now comes my christmas wish to you: If you are the author of a
> package on CRAN and want to promote it a little bit, well, maybe you
> find some time during the holidays to write approx. 2 pages (A4 or
> letter) in LaTeX and send it to Kurt or me? The same applies if you
> simply have a nice application using R.  The idea is to have the
> newsletter not too technical, i.e., an article describing a package
> could shortly describe the statistical background and then demonstrate
> the usage on some typical data set. Of course graphics are more than
> welcome!
> 
> The newsletter will be published as PDF file on CRAN, the final format
> will be created while we layout number one, hence any LaTeX file
> should be fine as contribution.  
> 
> Otherwise I wish everybody all the best for X-Mas and a happy new
> year!
> 
> Best,
> Fritz Leisch
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu Dec 21 03:38:54 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 21 Dec 2000 13:38:54 +1000
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>

With regard to the burgeoning side-discussion on whether or not to accept
WORD submissions, I plead for a quick, decisive and final ruling in the
negative.

Apart from the major practical considerations to do with the amount of work
putting together a document from sources of both kinds and achieving an
acceptable result, there is the relatively minor issue of principle: R is
open source software and should do what it can to promote the use of other
open source products.

I fully realise that this will create problems for people who are not
familiar with LaTeX.  I hope for people like Yves it is the start of a
liberating journey of discovery...but for many it will not be.  It would
seem to me the best option for such people is simply to accept submissions
in neat ASCII, (with some diffidence, of course, as such submissions will
require someone to do a lot of work before they can be incorporated into a
document).

When it comes to submitting graphics, though, I have no easy solution for
those unfortunates crippled and imprisoned by the MicroSoft arrogation of
the universe.  It would be simple if R had a pdf.graph device: is any such
development in prospect?  For that matter, how should Unix/Linux people
submit graphics?

Charles Berry observes:
> 
> FWIW, at least one of the equation setting add-ons for WORD 
> (MathType, see http://www.mathtype.com) has TeX as its engine. 
> It will optionally provide (La)TeX on the clipboard for pasting 
> into non-WORD docs. So a WORD user could provide ascii for the 
> text and (La)TeX for equations.

Yes, but....  MathType is yet another (stiffly priced) commercial add-on, it
is only one version of MathType that has the TeX output options and as far
as I can see mathematical typesetting is not going to be a large part of the
newsletter, anyway.  I would also claim that the TeX output you get from
such automatically produced stuff is not always very good TeX, too...for
example, vulgar fractions such as 1/2 are always too large.  I'm not all
that sure this intended courtesy to the person putting the newsletter
together would actually save very much work.  The best solution from all
points of view is the hard one: encourage submissions in GOOD LaTeX.

Bill Venables.

--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.visch@math.canterbury.ac.nz  Thu Dec 21 04:21:49 2000
From: j.visch@math.canterbury.ac.nz (j.visch@math.canterbury.ac.nz)
Date: Thu, 21 Dec 2000 17:21:49 +1300 (NZDT)
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>

Bill Venables writes:
 > With regard to the burgeoning side-discussion on whether or not to accept
 > WORD submissions, I plead for a quick, decisive and final ruling in the
 > negative.

Why not just give the word users a latex template they can fill in.
After all most of latex is just copying from previous documents.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Dec 21 06:15:06 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Dec 2000 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200012210615.HAA19446@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)
* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 764 *
Subject: qqline
From: Setzer.Woodrow@epamail.epa.gov
Date: Mon, 11 Dec 2000 18:06:27 -0500
--changed for 1.2.0 already, perhaps not what was desired
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 746 *
Subject: printing of lists
From: David Firth <david.firth@nuffield.oxford.ac.uk>
Date: Fri, 24 Nov 2000 12:31:33 +0000
--Still with us Dec 10 2000
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 674 *
Subject: all.equal.list() sometimes fails with unnamed and named components
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Fri, 29 Sep 2000 14:20:47 -0700 (PDT)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 715 *
Subject: Printing list elements w/attributes
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 31 Oct 2000 12:15:09 +0100
* PR# 698 *
Subject:  print problem with data frames 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 16 Oct 2000 14:01:43 +0100 (BST)
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 731 *
Subject: substitute(x$y)) corrupts 'y' component
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 08 Nov 2000 11:01:48 -0800

Directory:  Low-level

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--Compiler trouble, probably not bug
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 672 *
Subject: R 1.1.0: scan
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 27 Sep 2000 11:45:34 +0200 (CEST)
--HP-UX specific bug
* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 788 *
Subject: Re: [Rd] Inconsistency in creating/opening/closing/destroying
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 13:14:56 +0000 (GMT)
* PR# 768 *
Subject: R on Redhat 7 / glibc problem
From: B.Rowlingson@lancaster.ac.uk
Date: Fri, 15 Dec 2000 19:12:29 +0100 (MET)
* PR# 766 *
Subject: R1.2.0
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Fri, 15 Dec 2000 16:12:12 +0100 (MET)
* PR# 765 *
Subject: cannot allocate vector of size in merge
From: viktorm@pdf.com
Date: Fri, 15 Dec 2000 00:06:56 +0100 (MET)
* PR# 772 *
Subject: demo(is.things) fails
From: B.Rowlingson@lancaster.ac.uk
Date: Mon, 18 Dec 2000 13:46:02 +0100 (MET)
* PR# 771 *
Subject: problems with glm
From: Jim Lindsey <james.lindsey@luc.ac.be>
Date: Mon, 18 Dec 2000 09:28:01 +0100 (MET)
* PR# 775 *
Subject: R 1.2.0 : logspline does not install from install.packages(). Missing #include | library ?
From: charpent@bacbuc.dyndns.org
Date: Mon, 18 Dec 2000 20:48:42 +0100 (MET)
* PR# 774 *
Subject: \item{x}<cr>{description of x}
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 18 Dec 2000 11:05:39 -0500
* PR# 773 *
Subject: INSTALL should have info on make check
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Dec 2000 16:13:59 +0100
* PR# 777 *
Subject: Minor "make check" bug.
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 15:11:24 +0100 (CET)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 780 *
Subject: glm gives incorrect results for zero-weight cases
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 10:59:48 +0000 (GMT)
* PR# 779 *
Subject: Problem with sink() in 1.20 on Windows
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 19 Dec 2000 15:04:51 -0500
* PR# 778 *
Subject: Bug in glm.fit() or plot.lm()
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 19 Dec 2000 14:57:59 -0500
* PR# 783 *
Subject: unlink() is not synchronized with existing connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:36:17 +0100
* PR# 782 *
Subject: closing the sink connection a) is possible and b) can't be undone
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:32:41 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
* PR# 785 *
Subject: Re: [Rd] unlink() is not synchronized with existing connections
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:47:30 +0000 (GMT)
* PR# 784 *
Subject: showConnections() does not show closed (or non-opened) connections though help says so
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:42:43 +0100
* PR# 787 *
Subject: Inconsistency in creating/opening/closing/destroying connections
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Wed, 20 Dec 2000 13:56:49 +0100
* PR# 786 *
Subject: Re: [Rd] showConnections() does not show closed (or non-opened)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 12:51:33 +0000 (GMT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 21 08:06:35 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 21 Dec 2000 08:06:35 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B50@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.05.10012210748180.15375-100000@auk.stats>

On Thu, 21 Dec 2000 Bill.Venables@CMIS.CSIRO.AU wrote:

> With regard to the burgeoning side-discussion on whether or not to accept
> WORD submissions, I plead for a quick, decisive and final ruling in the
> negative.
> 
> Apart from the major practical considerations to do with the amount of work
> putting together a document from sources of both kinds and achieving an
> acceptable result, there is the relatively minor issue of principle: R is
> open source software and should do what it can to promote the use of other
> open source products.
> 
> I fully realise that this will create problems for people who are not
> familiar with LaTeX.  I hope for people like Yves it is the start of a
> liberating journey of discovery...but for many it will not be.  It would
> seem to me the best option for such people is simply to accept submissions
> in neat ASCII, (with some diffidence, of course, as such submissions will
> require someone to do a lot of work before they can be incorporated into a
> document).

One option for Word users is to save in RTF, which is at least a documented
format (and shared between word processors).  Then get a copy of rtf2latex  
or (better) rtf2latex2e from CTAN and check out the conversion.
 
Peter D mentioned MiKTeX.  I would recommend fptex to Windows users
instead: it is closer to the Unix/Linux standard system (teTeX) and is
more complete and up-to-date.  (The latter is particularly important for    
pdftex users: for example at one time fptex would process the R refman.pdf, 
and MikTeX would not.)  fptex used to be harder to instll, but no longer,
and it is the preferred system on the TeXLive5 distribution, I'm told.


> When it comes to submitting graphics, though, I have no easy solution for
> those unfortunates crippled and imprisoned by the MicroSoft arrogation of
> the universe.  It would be simple if R had a pdf.graph device: is any such
> development in prospect?  For that matter, how should Unix/Linux people
> submit graphics?

Yes, there is one already (take a closer look at bitmap, whose help says

     Note: despite the name of the functions they can produce PDF via
     `type = "pdfwrite"', and the PDF produced is not bitmapped.

).  A native PDF device is planned, and was one of the reasons for the
changes to postscript() in 1.2.0 (to enable code to be shared).
For some time my entry on developer.r-project.org has said

   A native PDF graphics driver.

and that site is a good place to look for future plans (but some team
members keep their secret).

I don't see the problem: R can produce PostScript everywhere, and it
can even produce EPS these days.  Windows users can produce other figures
in WMF if they want, but that can be converted to EPS successfully by a
number of routes.  If people want to annotate figures, R can produce .fig,
and xfig runs under Unix/Linux and Windows ....   So I suggest figures be
produced in PostScript.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Dec 21 11:11:42 2000
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 21 Dec 2000 12:11:42 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <3.0.32.20001221121141.00910100@162.38.183.200>

At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
>One option for Word users is to save in RTF, which is at least a documented
>format (and shared between word processors).  Then get a copy of rtf2latex  
>or (better) rtf2latex2e from CTAN and check out the conversion.

I use StarOffice under WinNT and it seems that the RTF files it produces
cannot be read by MS Word. I am not sure that RTF is really "portable".

I agree with a previous message:

At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
>Why not just give the word users a latex template they can fill in.
>After all most of latex is just copying from previous documents.

And yes, we can produce PostScript figures under Windows as well.

Question: what will be the editorial policy of R Newsletter? Will papers be
reviewed? ...

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 11:59:30 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 06:59:30 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>


Ok, I understand the problematic and I have no problems with it. The next
question that comes to mind is: Is there some Latex software or something
that one could use to produce Latex documents on a Windows platform?

Although I did it in the past, I would prefer not to install Linux. I'm not
a guru of Emacs but I'm using it quite a lot these days. Could there be
something that works with Emacs and with which I could produce Latex docs
maybe?

BTW, I was sincere about the idea of this Newsletter. I look forward reading
it.

Regards

Yves Gauvreau

> -----Message d'origine-----
> De : pd@blueberry.kubism.ku.dk [mailto:pd@blueberry.kubism.ku.dk]De la
> part de Peter Dalgaard BSA
> Envoye : Wednesday, December 20, 2000 6:28 PM
> A : Yves Gauvreau
> Cc : Friedrich Leisch; r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] R Newsletter: 1st Call for Articles
>
>
> "Yves Gauvreau" <cyg@sympatico.ca> writes:
>
> > This is a very nice idea. I would have a problem tough with the
> Latex format
> > you require. I'm almost certain that to most Windows user,
> Latex is as bad
> > news as a foreign language you know nothing about. Would there be an
> > alternative to please every body?
>
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
>
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.?
>
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
>
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:49:49 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:49:49 -0500
Subject: [Rd] RE: R Newsletter:  1st Call for Articles
In-Reply-To: <200012210421.RAA23651@e220-0.math.canterbury.ac.nz>
Message-ID: <NEBBJKDJHEFCOOLFFAKKKEBLCAAA.cyg@sympatico.ca>

Hi,

If I can humbly suggest, a standard template that could be used for the
"text" part on any platform. This would certainly be one if not the best
solution. Complement this with postscript graphics as suggested by Prof.
Ripley or chose any other output that R itself can produce and show us how
to embed these in our text maybe as an example in the template.

Then where left with equations I think and here again, if I'm not mistaking,
R as some utilities for that as well or maybe for those like me who know
nothing about Latex except the name, you could direct us to some Latex
guide, tutorial or whatever that could help us imbed equation in our text.

I think this is common practice as I ear some of you complain that this
editor wants this or that standard for their submitted papers.

This kind of solution would have the merit of stopping the ongoing war of
words between the two major community of pc users.

Regards

Yves Gauvreau



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de
> j.visch@math.canterbury.ac.nz
> Envoy : Wednesday, December 20, 2000 11:22 PM
>  : r-devel@stat.math.ethz.ch
> Objet : [Rd] RE: R Newsletter: 1st Call for Articles
>
>
> Bill Venables writes:
>  > With regard to the burgeoning side-discussion on whether or
> not to accept
>  > WORD submissions, I plead for a quick, decisive and final ruling in the
>  > negative.
>
> Why not just give the word users a latex template they can fill in.
> After all most of latex is just copying from previous documents.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Dec 21 12:54:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 21 Dec 2000 12:54:53 +0000 (GMT)
Subject: [Rd] R Newsletter:  1st Call for Articles
Message-ID: <200012211254.MAA02221@toucan.stats.ox.ac.uk>

> From: "Yves Gauvreau" <cyg@sympatico.ca>
> Date: Thu, 21 Dec 2000 06:59:30 -0500
> 
> Ok, I understand the problematic and I have no problems with it. The next
> question that comes to mind is: Is there some Latex software or something
> that one could use to produce Latex documents on a Windows platform?
> 
> Although I did it in the past, I would prefer not to install Linux. I'm not
> a guru of Emacs but I'm using it quite a lot these days. Could there be
> something that works with Emacs and with which I could produce Latex docs
> maybe?

Here's what we recommend to Windows users.

Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
Group TUG, or you can download the image and cut it yourself if you
have a good Internet connection).

Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
gives you a very capable latex mode for emacs.  This works fine on NT
if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
an alternative shell if you want to run latex from the menus.

Some people prefer the shareware WinEdt editor, which gives you
a customized latex editor:
http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
It may work better with MikTeX.

All the other pieces are also on TeXLive5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Thu Dec 21 12:59:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Thu, 21 Dec 2000 07:59:53 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3.0.32.20001221121141.00910100@162.38.183.200>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEBMCAAA.cyg@sympatico.ca>



> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Emmanuel Paradis
> Envoye : Thursday, December 21, 2000 6:12 AM
> A : Prof Brian D Ripley
> Cc : r-devel@stat.math.ethz.ch
> Objet : RE: [Rd] R Newsletter: 1st Call for Articles
>
>
> At 08:06 21/12/00 +0000, ripley@stats.ox.ac.uk wrote:
> >One option for Word users is to save in RTF, which is at least a
> documented
> >format (and shared between word processors).  Then get a copy of
> rtf2latex
> >or (better) rtf2latex2e from CTAN and check out the conversion.
>
> I use StarOffice under WinNT and it seems that the RTF files it produces
> cannot be read by MS Word. I am not sure that RTF is really "portable".
>
> I agree with a previous message:
>
> At 17:21 21/12/00 +1300, j.visch@math.canterbury.ac.nz wrote:
> >Why not just give the word users a latex template they can fill in.
> >After all most of latex is just copying from previous documents.
>
> And yes, we can produce PostScript figures under Windows as well.
>
> Question: what will be the editorial policy of R Newsletter? Will
> papers be
> reviewed? ...

On this last question I personally think there should be some kind of
revision to insure the correctness of the statements given in the papers.
Instead of changing the content themselves the editors could send back the
paper with a note saying what is potentially wrong in their view. This would
allow the author to take appropriate action as he or she desire.

Yves Gauvreau

>
> Emmanuel Paradis
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Dec 21 13:10:51 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 21 Dec 2000 13:10:51 GMT
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
References: <NEBBJKDJHEFCOOLFFAKKIEBJCAAA.cyg@sympatico.ca>
Message-ID: <3a41ff2e.53493520@smtp1.sympatico.ca>

On Thu, 21 Dec 2000 06:59:30 -0500, you wrote:

>
>Ok, I understand the problematic and I have no problems with it. The next
>question that comes to mind is: Is there some Latex software or something
>that one could use to produce Latex documents on a Windows platform?

Latex is the language that you type; a processor converts it into
things that will print (in the old days, .dvi files; now .ps or .pdf
or .html files too).

If you really mean you want a program to produce the Latex for you,
there are several choices:  Mathematica can output Latex, there used
to be a package called Scientific Word that would do the same.  One
thing to watch out for is that these programs produce Latex that might
not be usable by anyone else, since they rely on special macros that
not everyone has.  (This was my experience with SW several years ago,
I've never used these facilities in Mathematica.)

There is an editor called WinEdt that has a number of facilities
built-in to help in typing Latex files.

If you meant you want to process Latex files, Brian Ripley mentioned
two:  Miktex and fptex.  I've recently switched to Miktex and it's
fine; I don't have experience with fptex.  Miktex isn't completely
trivial to install, but it's much better than some of the older
distributions (which required you to set up a long list of environment
variables, and put files in the right places, etc.).  

You can download Miktex or fptex from http://www.ctan.org/.  I don't
know which files you need to get; someone else did it for me.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Dec 21 14:36:39 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 21 Dec 2000 15:36:39 +0100
Subject: [Rd] Submission format for R Newsletter
Message-ID: <14914.5495.702990.151333@galadriel.ci.tuwien.ac.at>


Hi,

Sorry for responding so late, but I've been in meetings all day
long. The decision to ask for latex articles was deliberate, because
I've to deal with MS-Word files from time to time and know of no clean
way of converting it to Latex without a lot of manual intervention
(and the newsletter itself will be produced in latex).

We will make a template for articles available together with the first
edition of the newsletter (which we want to publish mid-January). So
prospective authors who are not literate in Latex: please wait one
month ...

Answers to other questions:
1) Graphics are preferred in PDF or EPS format, bitmaps like JPG are
alo OK but please keep in mind that those cannot be scaled easily and
hence might look ugly in the final version.

2) Articles should be sent by email to Kurt Hornik or me.

3) Articles will be reviewed by the editors.

I hope this clarifies some points and that such a lot of interest also
means that we will see (and enjoy to read) a lot of interesting
articles!

Best,
Fritz


-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@sunysb.edu  Thu Dec 21 01:28:07 2000
From: Timothy.Keitt@sunysb.edu (Timothy H. Keitt,)
Date: Wed, 20 Dec 2000 20:28:07 -0500
Subject: [Rd] R Newsletter:  1st Call for Articles
References: <NEBBJKDJHEFCOOLFFAKKCEBICAAA.cyg@sympatico.ca> <x2itoefzb3.fsf@blueberry.kubism.ku.dk>
Message-ID: <3A415CA7.2010807@SUNYSB.Edu>

You could use Lyx (www.lyx.org).  It exports (human readable) latex.

Tim

Peter Dalgaard BSA wrote:

> "Yves Gauvreau" <cyg@sympatico.ca> writes:
> 
> 
>> This is a very nice idea. I would have a problem tough with the Latex format
>> you require. I'm almost certain that to most Windows user, Latex is as bad
>> news as a foreign language you know nothing about. Would there be an
>> alternative to please every body?
> 
> 
> Not really, dealing with MS Word would be a nightmare, and LaTeX is
> just about the only format with decent treatment of mathematics.
> 
> However, I'm pretty sure that plain ascii would also be acceptable for
> simple articles. On the other hand, why should the editors have the
> trouble of putting all code excerpts in \begin{verbatim} ..
> \end{verbatim} constructs, etc.? 
> 
> Perhaps one could define a simplified LaTeX markup similar to .Rd.
> 
> Or maybe just point people towards MiKTeX and give them a crash course
> in LaTeX? For plain text, the format is really quite simple.


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Thu Dec 21 19:55:36 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Thu, 21 Dec 2000 13:55:36 -0600
Subject: [Rd] RH7.0 compilation
Message-ID: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>

Hi everyone,

Like most people with RH7.0 Linux, I had problems with their "experimental"
gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
in the /usr/local tree, so it will be picked up first as /usr/local/bin if
before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
straight out of the box (as well as compile Linux kernels).  One problem I
had, however, was that the Matrix package would not link, with linker
complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".

Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
I installed them and, just to check them out, recompiled R-1.2.0 with it.
It compiled fine and passed all the checks.  Moreover, now the Matrix
package compiles and installs fine.  The only thing I see different is that
while compiling R-1.2.0 I get a bunch of warnings like this:

making devices.d from devices.c
In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
nothing can be pasted after this token
making dynload.d from dynload.c

and like this

FFTab.h:2:29: warning: pasting would not give a valid preprocessing token


Cheers,

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Dec 21 20:08:26 2000
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Thu, 21 Dec 2000 21:08:26 +0100
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <200012211254.MAA02221@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Thu, Dec 21, 2000 at 12:54:53PM +0000
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk>
Message-ID: <20001221210826.A16253@tu-bs.de>

On Thu, Dec 21, 2000 at 12:54:53PM +0000, Prof Brian Ripley wrote:
> > From: "Yves Gauvreau" <cyg@sympatico.ca>
> > Date: Thu, 21 Dec 2000 06:59:30 -0500
> > 
> > Ok, I understand the problematic and I have no problems with it. The next
> > question that comes to mind is: Is there some Latex software or something
> > that one could use to produce Latex documents on a Windows platform?
> > 
> > Although I did it in the past, I would prefer not to install Linux. I'm not
> > a guru of Emacs but I'm using it quite a lot these days. Could there be
> > something that works with Emacs and with which I could produce Latex docs
> > maybe?
> 
> Here's what we recommend to Windows users.
> 
> Get fptex (www.fptex.org) from a CTAN site near you, or from a copy of
> the TeXLive5 CD-ROM  (http://www.tug.org/texlive/ from the TeX Users
> Group TUG, or you can download the image and cut it yourself if you
> have a good Internet connection).
> 
> Install AucTeX for your emacs, from http://sunsite.dk/auctex/, as that
> gives you a very capable latex mode for emacs.  This works fine on NT
> if you set shell-file-name to cmd.exe.  On Win9x, you may have to find
> an alternative shell if you want to run latex from the menus.
> 
> Some people prefer the shareware WinEdt editor, which gives you
> a customized latex editor:
> http://www.tex.ac.uk/tex-archive/systems/win32/winedt/
> It may work better with MikTeX.

...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).

For simple docs lyx is ideal...

see: http://www.lyx.org

PM 

-- 
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
At work: (MH-Hannover): 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Dec 21 20:57:40 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Dec 2000 21:57:40 +0100
Subject: [Rd] RH7.0 compilation
In-Reply-To: apjaworski@mmm.com's message of "Thu, 21 Dec 2000 13:55:36 -0600"
References: <OF63E73F1B.20570FBA-ON862569BC.0069BB85@mmm.com>
Message-ID: <x27l4t3323.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> Hi everyone,
> 
> Like most people with RH7.0 Linux, I had problems with their "experimental"
> gcc-2.96 compiler.  To circumvent the problem, I installed stock gcc-2.95.2
> in the /usr/local tree, so it will be picked up first as /usr/local/bin if
> before /usr/bin on my PATH.  With this setup I was able to compile R-1.2.0
> straight out of the box (as well as compile Linux kernels).  One problem I
> had, however, was that the Matrix package would not link, with linker
> complaining about  "undefined versioned symbol name clog@@GLIBC_2.1".
> 
> Yesterday I downloaded updated RPMs for the gcc compiler from the RH site.
> I installed them and, just to check them out, recompiled R-1.2.0 with it.
> It compiled fine and passed all the checks.  Moreover, now the Matrix
> package compiles and installs fine.  The only thing I see different is that
> while compiling R-1.2.0 I get a bunch of warnings like this:
> 
> making devices.d from devices.c
> In file included from devices.c:25:../../src/include/Defn.h:73:22: warning:
> nothing can be pasted after this token
> making dynload.d from dynload.c
> 
> and like this
> 
> FFTab.h:2:29: warning: pasting would not give a valid preprocessing token

I think these  are harmless and it should work to remove the  ## in
the constructions

# define DYNLOADEXT  "." ## SHLIB_EXT

and

# define F77_QSYMBOL(x)	#x ## "_"

You're not supposed to use ## to stick text strings together like
that, only tokens, but it seems to have worked with all other
compilers. (I think we analyzed this earlier and decided not to change
the code, but I forgot why. Maybe we just plain forgot to fix it.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Dec 22 00:00:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 22 Dec 2000 01:00:21 +0100 (MET)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
Message-ID: <200012220000.BAA05528@pubhealth.ku.dk>


The trailing backslash seems to be the culprit.


After looking at rw1020\bin\INSTALL, I noticed

	$pkg =~ s/\/$//;

which I assume is to strip the trailing slash from a package name
before obtaining the package name and cleaning out its directory

I added 

	$pkg =~ s/\\$//;

immediately after this line. Rerunning 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

with that change seemed to work OK

The session follows further below. 

----------------------------------------
More details:

Using cmdproxy.exe under emacs shell-mode under Win98,

It seems that the problem arose when I used 

	Rcmd INSTALL C:\rw1011\src\library\bqtl\

A subsequent

	Rcmd INSTALL C:\rw1011\src\library\bqtl

also failed. 

Inspection showed that all the directories under C:\rw1011\src\library
were gone.

I reran rwinst.exe to put them back in place

then I reran

	Rcmd INSTALL C:\rw1011\src\library\bqtl

and everything seemed to go thru OK (up to creating chtml, which the
system was not configured to do anyway. But library(bqtl) works, examples
all run, all seems OK, etc.)


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows 9x 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

----------------------------------------

The session:



C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make: Entering an unknown directory
make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
make: Leaving an unknown directory
make: *** [pkg-.o] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of  failed ***

installing R.css in C:/RW1020/library
cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory

C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
[deleted]
C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

make: Entering directory `/RW1020/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
  -f C:/RW1020/src/gnuwin32/MakePkg
make[1]: Entering directory `/rw1011/src/library/bqtl'
---------- Making package bqtl ------------
mkdir -p C:/RW1020/library/bqtl
cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
   adding build stamp to DESCRIPTION
make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
make[1]: Leaving directory `/rw1011/src/library/bqtl'
make: *** [pkg-bqtl] Error 2
make: Leaving directory `/RW1020/src/gnuwin32'
*** Installation of bqtl failed ***

installing R.css in C:/RW1020/library

[[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
 They were replaced. Then ...]]]

C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl

[[[ rest deleted - the package seemed to work OK ]]]



Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Dec 22 01:24:37 2000
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Fri, 22 Dec 2000 11:24:37 +1000
Subject: [Rd] Newsletter: "Programming Pearls"?
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>

Fritz,

Would there be much interest in a "Programming Pearls" occasional column in
the newsletter?  If so, would it help if I volunteered to edit it (and
perhaps contribute, from time to time)?

Bill.
--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables@cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
"Natum videte, regem angelorum.  Venite adoremus!"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramon-diaz@teleline.es  Fri Dec 22 01:04:12 2000
From: ramon-diaz@teleline.es (Ramon Diaz-Uriarte)
Date: Fri, 22 Dec 2000 02:04:12 +0100
Subject: [Rd] R Newsletter: 1st Call for Articles
In-Reply-To: <20001221210826.A16253@tu-bs.de>
References: <200012211254.MAA02221@toucan.stats.ox.ac.uk> <20001221210826.A16253@tu-bs.de>
Message-ID: <00122202173507.05946@ligarto>

> ...or use lyx (a tex-front) and export latex. I think there is also a windows version, but I have never used it (and seldom the linux-version).
> 
> For simple docs lyx is ideal...
> 
> see: http://www.lyx.org
> 
> PM 
> 

I've used lyx quite a bit (the linux version). For me (a former user of Word) 
it was a rather painless intro to LaTeX; you can easily export LaTeX documents,
modify them somewhere else, and later read them back into lyx to continue
working. In fact, that is how I wrote most of my dissertation (use xemacs to
work on the latex document on the department machines, and then at home import
those files into lyx in my linux box).  I specially like the display of math 
(the "what you see is what you mean" idea), and the ease for preparing tables
and importing figures. The program is very well documented, and there is a
very helpful mailing list. After playing with lyx for a while and taking peeks
at the latex code, you'll find yourself ready to go get a LaTeX book and use
latex directly when needed for those few things that Lyx does not handle that
well.

Ramn
-- 
Ramn Daz-Uriarte
Triana 47
28016 Madrid
Spain

email:ramon-diaz@teleline.es
Phone: +-34-918-513-966
       +-34-657-186-407	







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri Dec 22 01:38:02 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 22 Dec 2000 09:38:02 +0800 (GMT-8)
Subject: [Rd] R Newsletter:  1st Call for Articles
In-Reply-To: <3A415CA7.2010807@SUNYSB.Edu>
Message-ID: <Pine.GSO.4.21.0012220936380.20722-100000@sununx.comp.nus.edu.sg>

Hi,
But lyx on windows is a nightmare to install, is heavily dependent on
cygwyin and i think only works on NT. So doesn't really help M$ worst
users.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 20 Dec 2000, Timothy H. Keitt, wrote:

> You could use Lyx (www.lyx.org).  It exports (human readable) latex.
> 
> Tim
> 
> Peter Dalgaard BSA wrote:
> 
> > "Yves Gauvreau" <cyg@sympatico.ca> writes:
> > 
> > 
> >> This is a very nice idea. I would have a problem tough with the Latex format
> >> you require. I'm almost certain that to most Windows user, Latex is as bad
> >> news as a foreign language you know nothing about. Would there be an
> >> alternative to please every body?
> > 
> > 
> > Not really, dealing with MS Word would be a nightmare, and LaTeX is
> > just about the only format with decent treatment of mathematics.
> > 
> > However, I'm pretty sure that plain ascii would also be acceptable for
> > simple articles. On the other hand, why should the editors have the
> > trouble of putting all code excerpts in \begin{verbatim} ..
> > \end{verbatim} constructs, etc.? 
> > 
> > Perhaps one could define a simplified LaTeX markup similar to .Rd.
> > 
> > Or maybe just point people towards MiKTeX and give them a crash course
> > in LaTeX? For plain text, the format is really quite simple.
> 
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 04:10:41 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 05:10:41 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220410.FAA06204@pubhealth.ku.dk>


The last line gets duplicated when a file is read like this:

    a <- scan(file=filename, what="", sep="\n",
                    strip.white=c(TRUE), quiet=TRUE)

(This error does not occur on Linux, the only other platform I
 tested.)

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20

Actually, all binaries are PA-RISC1.1

 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:01:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 22 Dec 2000 07:01:44 +0000 (GMT)
Subject: [Rd] rw1020 Rcmd INSTALL path\ deletes rw1020\library\* (PR#789)
In-Reply-To: <200012220000.BAA05528@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10012220650150.16967-100000@auk.stats>

Using a trailing dir separator is wrong, and Windows is much less
tolerant of it than most Unixes.  I have not checked most of these
utilities using \, only /, as the shells I use demand \ be doubled
and do path completion only with /.

The diagnosis is correct: basename in Perl is failing when given that path.
I will add some sanity checks.

On Fri, 22 Dec 2000 cberry@tajo.ucsd.edu wrote:

> 
> The trailing backslash seems to be the culprit.
> 
> 
> After looking at rw1020\bin\INSTALL, I noticed
> 
> 	$pkg =~ s/\/$//;
> 
> which I assume is to strip the trailing slash from a package name
> before obtaining the package name and cleaning out its directory
> 
> I added 
> 
> 	$pkg =~ s/\\$//;
> 
> immediately after this line. Rerunning 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> with that change seemed to work OK
> 
> The session follows further below. 
> 
> ----------------------------------------
> More details:
> 
> Using cmdproxy.exe under emacs shell-mode under Win98,
> 
> It seems that the problem arose when I used 
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> A subsequent
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> also failed. 
> 
> Inspection showed that all the directories under C:\rw1011\src\library
> were gone.
> 
> I reran rwinst.exe to put them back in place
> 
> then I reran
> 
> 	Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> and everything seemed to go thru OK (up to creating chtml, which the
> system was not configured to do anyway. But library(bqtl) works, examples
> all run, all seems OK, etc.)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 2222)  A 
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> ----------------------------------------
> 
> The session:
> 
> 
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl\
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/.o PKG=.o RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make: Entering an unknown directory
> make: *** C:/rw1011/src/library/.o: No such file or directory.  Stop.
> make: Leaving an unknown directory
> make: *** [pkg-.o] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of  failed ***
> 
> installing R.css in C:/RW1020/library
> cp: cannot create regular file `C:/RW1020/library/R.css': No such file or directory
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL --help
> [deleted]
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> make: Entering directory `/RW1020/src/gnuwin32'
> make DLLNM=  EXTRADOCS= \
>   -C C:/rw1011/src/library/bqtl PKG=bqtl RHOME=C:/RW1020 RLIB=C:/RW1020/library \
>   -f C:/RW1020/src/gnuwin32/MakePkg
> make[1]: Entering directory `/rw1011/src/library/bqtl'
> ---------- Making package bqtl ------------
> mkdir -p C:/RW1020/library/bqtl
> cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README C:/RW1020/library/bqtl/
>    adding build stamp to DESCRIPTION
> make[1]: *** [C:/RW1020/library/bqtl/zzzz] Error 2
> make[1]: Leaving directory `/rw1011/src/library/bqtl'
> make: *** [pkg-bqtl] Error 2
> make: Leaving directory `/RW1020/src/gnuwin32'
> *** Installation of bqtl failed ***
> 
> installing R.css in C:/RW1020/library
> 
> [[[AT THIS POINT I NOTICED C:\rw1020\library\base, etc were gone. 
>  They were replaced. Then ...]]]
> 
> C:\rw1020\src\gnuwin32>Rcmd INSTALL C:\rw1011\src\library\bqtl
> 
> [[[ rest deleted - the package seemed to work OK ]]]
> 
> 
> 
> Charles C. Berry                        (858) 534-2098 
>                                          Dept of Family/Preventive Medicine
> E mailto:cberry@tajo.ucsd.edu	         UC San Diego
> http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645
> 
>  
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 07:34:16 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 08:34:16 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012220734.IAA06732@pubhealth.ku.dk>

This bug PR#672, also reported from your institution.  It has only been
reported from HP-UX, and only from your systems.  Could someone there debug
it, please?

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> 
> The last line gets duplicated when a file is read like this:
> 
>     a <- scan(file=filename, what="", sep="\n",
>                     strip.white=c(TRUE), quiet=TRUE)
> 
> (This error does not occur on Linux, the only other platform I
>  tested.)
> 
> Version:
>  platform = hppa2.0-hp-hpux10.20
>  arch = hppa2.0
>  os = hpux10.20
>  system = hppa2.0, hpux10.20
> 
> Actually, all binaries are PA-RISC1.1
> 
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:mva, package:ctest, Autoloads, package:base
>  
> -- 
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Dec 22 09:47:05 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 22 Dec 2000 10:47:05 +0100
Subject: [Rd] Re: Newsletter: "Programming Pearls"?
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
References: <2B7F04539DAFD311B61D009027D0DDA20C3B5A@roper-cv.qld.cmis.CSIRO.AU>
Message-ID: <14915.8985.903115.127836@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 22 Dec 2000 11:24:37 +1000,
>>>>> Bill Venables (BV) wrote:

  > Fritz,
  > Would there be much interest in a "Programming Pearls" occasional column in
  > the newsletter?  If so, would it help if I volunteered to edit it (and
  > perhaps contribute, from time to time)?


Yes, that sound like a great thing ... especially as we get the final
product as you graciously offer to edit the column :-).

Thanks in advance,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Dec 22 09:59:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Dec 2000 10:59:24 +0100 (MET)
Subject: [Rd] par(lab= *) / axis(*) bug (PR#791)
Message-ID: <200012220959.KAA08629@pubhealth.ku.dk>

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 12:12:20 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Fri, 22 Dec 2000 13:12:20 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221212.NAA11052@pubhealth.ku.dk>

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > The last line gets duplicated when a file is read like this:
> > 
> >     a <- scan(file=filename, what="", sep="\n",
> >                     strip.white=c(TRUE), quiet=TRUE)

> > Version:
> >  platform = hppa2.0-hp-hpux10.20

> >  major = 1
> >  minor = 2.0
> >  year = 2000
> >  month = 12
> >  day = 15

Prof Brian D Ripley wrote:

> This bug PR#672, also reported from your institution.

That would be me. I reported this bug before, for R version
1.1.0

> It has only been reported from HP-UX, and only from your
> systems. Could someone there debug it, please?

I would fix it, if I new how to. Perhaps you can suggest
something from the warning messages I get.

During compiling I get a lot of warning messages. These are for
scan.c:

	cc -I. -I../../src/include -I../../src/include
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
  -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
  --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
  -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
  -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
  -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
  -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
  -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
  -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
  -scan.c -o scan.o
cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.

I get these type of warnings when compiling other sources too:
	sock.c
	sys-std.c
	connections.c
	g_alab_her.c
	../../../R/src/main/gram.y
	iosupport.c
	main.c
	plot3d.c
	saveload.c

Other warnings I get are:

cc: "loglin.c", line 236: warning 562: Redeclaration of "collap"
  with a different storage class specifier: "collap" will have
  internal linkage.
cc: "loglin.c", line 315: warning 562: Redeclaration of "adjust"
  with a different storage class specifier: "adjust" will have
  internal linkage.

cc: "dataentry.c", line 1309: warning 562: Redeclaration of
  "closewin" with a different storage class specifier: "closewin"
  will have internal linkage.
cc: "dataentry.c", line 1553: warning 562: Redeclaration of
  "popupmenu" with a different storage class specifier:
  "popupmenu" will have internal linkage.
cc: "dataentry.c", line 1653: warning 562: Redeclaration of
  "popdownmenu" with a different storage class specifier:
  "popdownmenu" will have internal linkage.

cc: "fexact.c", line 315: warning 562: Redeclaration of "f2xact"
  with a different storage class specifier: "f2xact" will have
  internal linkage.
cc: "fexact.c", line 842: warning 562: Redeclaration of "f3xact"
  with a different storage class specifier: "f3xact" will have
  internal linkage.
cc: "fexact.c", line 1188: warning 562: Redeclaration of
  "f4xact" with a different storage class specifier: "f4xact" will
  have internal linkage.
cc: "fexact.c", line 1413: warning 562: Redeclaration of
  "f5xact" with a different storage class specifier: "f5xact" will
  have internal linkage.
cc: "fexact.c", line 1572: warning 562: Redeclaration of
  "f6xact" with a different storage class specifier: "f6xact" will
  have internal linkage.
cc: "fexact.c", line 1623: warning 562: Redeclaration of
  "f7xact" with a different storage class specifier: "f7xact" will
  have internal linkage.
cc: "fexact.c", line 1726: warning 562: Redeclaration of
  "f8xact" with a different storage class specifier: "f8xact" will
  have internal linkage.
cc: "fexact.c", line 1770: warning 562: Redeclaration of
  "f9xact" with a different storage class specifier: "f9xact" will
  have internal linkage.
cc: "fexact.c", line 1803: warning 562: Redeclaration of
  "f10act" with a different storage class specifier: "f10act" will
  have internal linkage.
cc: "fexact.c", line 1871: warning 562: Redeclaration of
  "f11act" with a different storage class specifier: "f11act" will
  have internal linkage.
cc: "fexact.c", line 1896: warning 562: Redeclaration of
  "prterr" with a different storage class specifier: "prterr" will
  have internal linkage.
cc: "fexact.c", line 1921: warning 562: Redeclaration of "iwork"
  with a different storage class specifier: "iwork" will have
  internal linkage.
 
-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Dec 22 12:22:57 2000
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 22 Dec 2000 13:22:57 +0100
Subject: [Rd] updated tseries
Message-ID: <3A4347A1.2CFD9592@olsen.ch>

Dear colleagues,

the tseries package is updated and should now work with R-1.2.0.

best and merry Xmas

Adrian

--
Adrian Trapletti, Olsen & Associates   Ltd., See-
feldstrasse 233,   CH-8008  Zrich,   Switzerland
Phone: +41 (1) 386 48 48   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 22 16:53:24 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Dec 2000 17:53:24 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012221653.RAA13197@pubhealth.ku.dk>

On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:
> 
> > > The last line gets duplicated when a file is read like this:
> > > 
> > >     a <- scan(file=filename, what="", sep="\n",
> > >                     strip.white=c(TRUE), quiet=TRUE)
> 
> > > Version:
> > >  platform = hppa2.0-hp-hpux10.20
> 
> > >  major = 1
> > >  minor = 2.0
> > >  year = 2000
> > >  month = 12
> > >  day = 15
> 
> Prof Brian D Ripley wrote:
> 
> > This bug PR#672, also reported from your institution.
> 
> That would be me. I reported this bug before, for R version
> 1.1.0

It *is* in the BUGS list shipped with 1.2.0, so why send it in again
with no references to the earlier one?

> > It has only been reported from HP-UX, and only from your
> > systems. Could someone there debug it, please?
> 
> I would fix it, if I new how to. Perhaps you can suggest
> something from the warning messages I get.

No, but I do suggest you debug it.  That is, build a debug version and run
it under gdb, and find out why this happens.  Is it just scan?
Does read.table (which uses scan) do it?  Does readLines (which does not)?
Does it happen on all files?  Only on those with CRLF or only LF line
endings?  Only on those with incomplete last lines?

It might be a compiler bug, so perhaps you would like to try compiling
with gcc.


> During compiling I get a lot of warning messages. These are for
> scan.c:
> 
> 	cc -I. -I../../src/include -I../../src/include
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   --DHAVE_CONFIG_H D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000
>   -I/opt_local/opt/readline/include I/opt_local/opt/tk/include
>   --I/opt_local/opt/tcl/include I/opt_local/opt/jpeg6/include
>   -I/opt_local/opt/png/include I/opt_local/opt/ncurses/include
>   -I/opt_local/opt/zlib/include I/users1/kleiweg/R-1.2.0-source
>   -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib
>   -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib
>   -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib
>   -L/opt_local/opt/zlib/lib L/users1/kleiweg/R-1.2.0-source -Aa -c
>   -scan.c -o scan.o

The next are the lines of signed/unsigned char warnings that occur with
more informative messages on my platforms.  You need to look up the
numbers in your manual, as we do not have a manual for your compiler.

> cc: "scan.c", line 65: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 65: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 72: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 72: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 109: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 109: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 300: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 300: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 309: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 309: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 336: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 336: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 350: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 350: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 449: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 449: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 478: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 478: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 858: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 858: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 919: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 919: warning 563: Argument #1 is not the correct type.
> cc: "scan.c", line 957: warning 604: Pointers are not assignment-compatible.
> cc: "scan.c", line 957: warning 563: Argument #1 is not the correct type.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:35 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 11:30:35 -0600
Subject: [Rd] R CMD check bug
Message-ID: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 17:30:59 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 18:30:59 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221730.SAA13390@pubhealth.ku.dk>

The R check command has a slight error in it.   Line # 123 reads

     $#ARGV <= 1 || die "no packages were specified";

The logical comparison should be reversed and modified, so it reads

     $#ARGV >= 0 || die "no packages were specified";

The original bug gives somewhat unexpected results.  Since $#ARGV evaluates
to the number of arguments minus 1, the check command works fine with 1 or
2 arguments but not with more than 2.

Another, probably already known, cosmetic thing.  The nls package has the
word Authors in the DESCRIPTION file and fails its check.  The word needs
to read Author.

Cheers,

Andy Jaworski


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Dec 22 17:43:50 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Fri, 22 Dec 2000 18:43:50 +0100 (MET)
Subject: [Rd] R CMD check bug (PR#792)
Message-ID: <200012221743.SAA13452@pubhealth.ku.dk>

apjaworski@mmm.com writes:

> Another, probably already known, cosmetic thing.  The nls package has the
> word Authors in the DESCRIPTION file and fails its check.  The word needs
> to read Author.

Thanks, Andy.  This part is fixed for R-1.2.1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Fri Dec 22 18:42:53 2000
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Fri, 22 Dec 2000 12:42:53 -0600
Subject: [Rd] R CMD check strange behavior
Message-ID: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>

Can anyone reproduce this strange behavior?

     R CMD check <any package> quadprog

Everything is fine.

     R CMD check quadprog <any package>

The check for quadprog works fine, but the checks for anything that follows
skip the examples portion, i.e. just run the check on the DESCRIPTION file
and format the manual.

I could not reproduce this behavior with any other combination of packages,
although I do not have lots of them installed.  I am afraid I do not know
Perl well enough to even try to fix that.

Cheers,

Andy Jaworski

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 22 21:15:36 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 22 Dec 2000 22:15:36 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <200012221653.RAA13197@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>

ripley@stats.ox.ac.uk skriver...

> On Fri, 22 Dec 2000 kleiweg@let.rug.nl wrote:

> > Prof Brian D Ripley wrote:
> > 
> > > This bug PR#672, also reported from your institution.
> > 
> > That would be me. I reported this bug before, for R version
> > 1.1.0
> 
> It *is* in the BUGS list shipped with 1.2.0, so why send it in again
> with no references to the earlier one?

Well, that was a bug in 1.1.0, this is the same bug in 1.2.0. I
didn't check the BUGS list, didn't notice there was such a file.
I'm sorry.

> It might be a compiler bug, so perhaps you would like to try compiling
> with gcc.

Usually, bugs aren't. Usually, it's that one compiler just
happens to produce code and data that won't generate an
exceptional situation you just hadn't thought of, and you won't
notice the error until you use another compiler.

Which seems to be the case here.

I fixed the bug. Luckily, I didn't have to resort to using the
HP debugger. Inspecting the code was enough to locate the
problem, once I noticed the problem occurs only when stripping
white space is selected. Here is the fix:

*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Fri Dec 22 21:51:44 2000
***************
*** 240,248 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
! 	    ;
! 	bufp++;
      }
      *bufp = '\0';
      return filled;
--- 240,247 ----
      }
   donefill:
      if (strip) {
!         while (bufp > buffer && isspace((int)(*bufp - 1)))
! 	    bufp--;
      }
      *bufp = '\0';
      return filled;



You can see what the problem was. The faulty code doesn't
prevent to test whether the characters *before* the start of the
buffer are white space, which can be anything.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:21:04 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 23 Dec 2000 10:21:04 +0100 (MET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <200012230921.KAA14843@pubhealth.ku.dk>

Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Er liep twee kg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 09:30:32 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 10:30:32 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
Message-ID: <Pine.LNX.4.21.0012231029540.624-100000@kleigh.nl>


Peter Kleiweg skriver...

> > > Prof Brian D Ripley wrote:

> > > > This bug PR#672, also reported from your institution.

The bug fix I mailed yesterday does fix the bug, but also
introduces a new one: requested trimming of trailing white space
doesn't happen anymore. Here is a correct patch:


*** src/main/scan.c	Sat Dec  2 19:42:25 2000
--- src/main/scan.c.new	Sat Dec 23 10:02:34 2000
***************
*** 240,246 ****
      }
   donefill:
      if (strip) {
! 	while (isspace((int)*--bufp))
  	    ;
  	bufp++;
      }
--- 240,246 ----
      }
   donefill:
      if (strip) {
! 	while (--bufp >= buffer && isspace((int)*bufp))
  	    ;
  	bufp++;
      }


-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Dec 23 12:16:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 23 Dec 2000 13:16:03 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012222156530.1578-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>

Peter Kleiweg skriver...

[about possible compiler error]

> Usually, bugs aren't. Usually, it's that one compiler just
> happens to produce code and data that won't generate an
> exceptional situation you just hadn't thought of, and you
> won't notice the error until you use another compiler.
> 
> Which seems to be the case here.

[snip faulty patch, see other mail for correct fix]

> You can see what the problem was. The faulty code doesn't
> prevent to test whether the characters *before* the start of
> the buffer are white space, which can be anything.

I've been thinking about this. The original code was apparently
based on the assumption that (at that point in the program) the
buffer could never be empty (apart from white space). Maybe the
assumption is correct, and this bug actually is an expression of
an error somewhere else. An error with handling EOF, or
something, or even a compiler error.

Should this be checked?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sat Dec 23 16:45:27 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat, 23 Dec 2000 16:45:27 GMT
Subject: [Rd] Strange bug with pretty()
Message-ID: <3a45cf99.60304016@smtp1.sympatico.ca>

Here's a strange bug.  I recompiled R 1.2.0 in Windows with DEBUG=T,
and this gives pretty() some pretty strange behaviour.  If executed
just after a session opens:

 > pretty(c(-0.015,1.015))
 [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01
6.000000e-01
 [6]  8.000000e-01  1.000000e+00  1.200000e+00

The same result repeats if I repeat the command.

However, if I now ask for help on pretty, close the help window and
try again:

 > ?pretty
 > pretty(c(-0.015,1.015))
 [1] -0.2  0.0  0.2  0.4  0.6  0.8  1.0  1.2
 > 

This doesn't happen with the Windows binary distribution.  

The compiler I'm using is the mingw32 compiler, with version
information

 gcc version 2.95.2 19991024 (release)

Is this a compiler problem, a problem with DEBUG=T, or something wrong
with pretty?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Dec 24 15:06:31 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun, 24 Dec 2000 16:06:31 +0100 (MET)
Subject: [Rd] bug in strsplit(x, "") (PR#793)
Message-ID: <200012241506.QAA17086@pubhealth.ku.dk>

Instead of 

  strsplit(c("Hello", "", "World"), NULL)

(which works as expected), I used

  strsplit(c("Hello", "", "World"), "")

[[1]]
[1] "H" "e" "l" "l" "o"

[[2]]
[1] ""  "e" "l" "l" "o"

[[3]]
[1] "W" "o" "r" "l" "d"


The second element does not look like an expected result.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cottrell@ricardo.ecn.wfu.edu  Sun Dec 24 19:19:44 2000
From: cottrell@ricardo.ecn.wfu.edu (Allin Cottrell)
Date: Sun, 24 Dec 2000 14:19:44 -0500
Subject: [Rd] gretl and R: info and request
Message-ID: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>

Hello,

I thought some of you might like to know about a GNU project
that is complementary to R in some ways, namely gretl

http://ricardo.ecn.wfu.edu/gretl

(GNU Regression, Econometrics and Time-series Library).
gretl (a library with cli and gui clients, the gui using
GTK) is designed to be very user-friendly, and suitable
for teaching econometrics.  It has a fairly wide variety
of least-squares based estimators plus binary logit and
probit, and a few "nifty" features such as reading
databases over the internet and producing LaTeX output.

I've been thinking how to extend gretl to offer further
statistical methods such as Maximum Likelihood estimation,
without re-inventing the wheel, and some sort of link to
R seems the best option.  In the latest gretl I've made
a rudimentary link: an option in gretl to fork off an
instance of R (using the gnome gui if available) and 
pop the current gretl dataset into R.

At present I get the gretl data into R by writing out
a suitable .Rprofile in the cwd before the fork (in case
there's an .Rprofile there already it gets backed up,
and restored on exit from gretl).  This is a bit of a
kludge, and here's my request: It would make life
easier if you could specify a config file on the R
command line.  That way I could leave any existing
config file undisturbed.

I'm also interested in any suggestions people might have
for linkage between gretl and R.  As a longer-term
project I may study up on omegahat and look into
(a) formulating a request for R within gretl, (b)
having R execute the request, in the background and (c) 
presenting the results back in gretl.

If anyone's interested, an email reply would be appreciated
since I can't really afford to join another list right now. 

-- 
Allin Cottrell
Department of Economics
Wake Forest University, NC
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Mon Dec 25 09:27:50 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Mon, 25 Dec 2000 17:27:50 +0800 (GMT-8)
Subject: [Rd] gretl and R: info and request
In-Reply-To: <3A464C50.CEE9AF01@ricardo.ecn.wfu.edu>
Message-ID: <Pine.GSO.4.21.0012251715390.14518-100000@sununx.comp.nus.edu.sg>

Hi,
There are a couple of ways you could go.

One would be to build your application as an R library so that it could be
called from R and access your programs functions through and API an
example of this approach is ggobi, at www.ggobi.org. 

you can embed R in your application, a neat way might be to incorporate a
python shell into your application and compile R as a python module, i
believe you can find more documentation on thi approach on the omeghat web
page.

A third way (though i find this also cludgy) is to use interapplication
communication protocols such as corba or com.

I am sure there are more ways.

happy holidays
Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Dec 25 18:01:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Dec 2000 18:01:24 +0000 (GMT)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.LNX.4.21.0012231306490.624-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>

On Sat, 23 Dec 2000, Peter Kleiweg wrote:

> Peter Kleiweg skriver...
> 
> [about possible compiler error]
> 
> > Usually, bugs aren't. Usually, it's that one compiler just
> > happens to produce code and data that won't generate an
> > exceptional situation you just hadn't thought of, and you
> > won't notice the error until you use another compiler.
> > 
> > Which seems to be the case here.
> 
> [snip faulty patch, see other mail for correct fix]
> 
> > You can see what the problem was. The faulty code doesn't
> > prevent to test whether the characters *before* the start of
> > the buffer are white space, which can be anything.
> 
> I've been thinking about this. The original code was apparently
> based on the assumption that (at that point in the program) the
> buffer could never be empty (apart from white space). Maybe the
> assumption is correct, and this bug actually is an expression of
> an error somewhere else. An error with handling EOF, or
> something, or even a compiler error.
> 
> Should this be checked?

Could you send us your example file for this problem?  I think the
assumption is that a field will never be empty apart from white space.
in which case there is a simpler patch, as fields only of white space
don't put anything in the buffer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 20:40:23 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 21:40:23 +0100
Subject: [Rd] R CMD check strange behavior
In-Reply-To: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
References: <OFA594D2DD.4B5AD5BC-ON862569BD.00661782@mmm.com>
Message-ID: <14919.45239.613518.591151@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> Can anyone reproduce this strange behavior?
>      R CMD check <any package> quadprog

> Everything is fine.

>      R CMD check quadprog <any package>

> The check for quadprog works fine, but the checks for anything that
> follows skip the examples portion, i.e. just run the check on the
> DESCRIPTION file and format the manual.

I can confirm this.  Which platform are you on?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 09:59:48 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 10:59:48 +0100
Subject: [Rd] R CMD check bug
In-Reply-To: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
References: <OF5ECEC501.3752390D-ON862569BD.0058B9ED@mmm.com>
Message-ID: <14919.6804.136666.726944@mithrandir.hornik.net>

>>>>> apjaworski  writes:

> The R check command has a slight error in it.   Line # 123 reads
>      $#ARGV <= 1 || die "no packages were specified";

> The logical comparison should be reversed and modified, so it reads

>      $#ARGV >= 0 || die "no packages were specified";

> The original bug gives somewhat unexpected results.  Since $#ARGV
> evaluates to the number of arguments minus 1, the check command works
> fine with 1 or 2 arguments but not with more than 2.

> Another, probably already known, cosmetic thing.  The nls package has
> the word Authors in the DESCRIPTION file and fails its check.  The
> word needs to read Author.

Thanks, both fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Dec 25 21:29:20 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 25 Dec 2000 22:29:20 +0100
Subject: [Rd] bug in strsplit(x, "") (PR#793)
In-Reply-To: <200012241506.QAA17086@pubhealth.ku.dk>
References: <200012241506.QAA17086@pubhealth.ku.dk>
Message-ID: <14919.48176.902345.491051@mithrandir.hornik.net>

>>>>> ligges  writes:

> Instead of 
>   strsplit(c("Hello", "", "World"), NULL)

> (which works as expected), I used

>   strsplit(c("Hello", "", "World"), "")

> [[1]]
> [1] "H" "e" "l" "l" "o"

> [[2]]
> [1] ""  "e" "l" "l" "o"

> [[3]]
> [1] "W" "o" "r" "l" "d"


> The second element does not look like an expected result.

Thanks.  Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Dec 25 23:24:58 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 00:24:58 +0100 (CET)
Subject: [Rd] (HP-UX) scan: last line gets duplicated (PR#790)
In-Reply-To: <Pine.GSO.4.05.10012251756380.11112-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012252307220.688-100000@kleigh.nl>

Prof Brian Ripley skriver...

> Could you send us your example file for this problem?  I think the
> assumption is that a field will never be empty apart from white space.
> in which case there is a simpler patch, as fields only of white space
> don't put anything in the buffer.

I've done some more tests. Duplication doesn't only happen at
the end of the file. For each non-empty line followed by an
empty line or followed by a line with only white space, a copy
of the last non-empty line gets inserted. And in addition, at the end
of the file the last non-empty line gets duplicated.

Any file will do, just a few lines; with or without empty 
lines; with or without lines that contain white space only; with
the last line with data, empty or with white space.

Here is an example data file, begin and end of line are indicated
with |

  ||
  | |
  |0|
  ||
  | 1 1 |
  | |
  |  2 2 2  |
  |  |
  |   3 3 3   |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

All lines, including the last line ends with \n

Doing this:

  scan(file="file", what="", sep="\n", strip.white=c(TRUE))

gives:

  Read 15 items
   [1] "0"     "0"     "1 1"   "1 1"   "2 2 2" "2 2 2" "3 3 3" "3 3 3" "4"
  [10] "4"     "4"     "4"     "4"     "4"     "4"

Doing this:

  scan(file="tst1",  what="", sep="\n")

correctly gives:

  Read 13 items
   [1] " "           "0"           " 1 1 "       " "           "  2 2 2  "
   [6] "  "          "   3 3 3   " "   "         "    4    "   "    "
  [11] "  "          " "           " "

The patch changes only one line of code. I don't see how you can
get a simpler patch, except that the patch may hide some
underlying problem.

After applying my patch, the first example gives the correct result:

  Read 5 items
  [1] "0"     "1 1"   "2 2 2" "3 3 3" "4" 



I have done even more tests, using a more complex data file:

  ||
  | |
  |0|
  ||
  |, 1 1 |
  | |
  |  2 , 2,2  |
  |  |
  |   ,3, 3 3 ,  |
  |   |
  |    4    |
  |    |
  |  |
  | |
  | |
  ||

And this time, I define "," as separator:

  scan(file="tst2",  what="", sep=",", strip.white=c(TRUE))

The original version gives:

  Read 20 items
   [1] "0"   "0"   "0"   "1 1" "1 1" "2"   "2"   "2"   "2"   "2"   "3"   "3 3"
  [13] ""    "4"   "4"   "4"   "4"   "4"   "4"   "4"   

Again, similar copying of non-empty fields into empty fields.

The patched version gives:

  Read 11 items
   [1] "0"   ""    "1 1" "2"   "2"   "2"   ""    "3"   "3 3" ""    "4"

The last result is the same as with my non-patched version on Linux.

I guess this is what you would want: the comma's at the
beginning and at the end of the line seem to imply an empty
field. And that is what you get. I guess the same happens with
two consecutive separators on one line with only white space in
between. "strip.white" doesn't imply "skip.empty.fields".

As a side note: the current definition of scan sets strip.white
to FALSE by default, and blank.lines.skip to TRUE. However, if
sep is set to "\n", the logical thing to do would be to not skip
blank lines by default, but including them as empty fields.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 13:42:07 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 14:42:07 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
Message-ID: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>


Suppose, I have a file "data1" containing:

    450   390   467   654    30   542   334   432   421
    357   497   493   550   549   467   575   578   342
    446   547   534   495   979   479

I can read this file with:

    scan("data1")
    Read 24 items
     [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
     [20] 547 534 495 979 479    

But now, suppose I have a file "data2" containing:

    450, 390, 467, 654,  30, 542, 334, 432, 421,
    357, 497, 493, 550, 549, 467, 575, 578, 342,
    446, 547, 534, 495, 979, 479

When I try to read this with sep="," I get:

    scan("data2", sep=",")
    Read 26 items
     [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
     [20]  NA 446 547 534 495 979 479 

I get two extra fields, both NA. Not what I'd want. And I can't
drop the NA's, because there could be other NA's, not resulting
from this comma-EOL combination.

I suggest, the proper action for scan would be to treat the
combination sep plus newline as a single separator.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 14:54:29 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 14:54:29 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.LNX.4.21.0012261421150.626-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>

On Tue, 26 Dec 2000, Peter Kleiweg wrote:

> 
> Suppose, I have a file "data1" containing:
> 
>     450   390   467   654    30   542   334   432   421
>     357   497   493   550   549   467   575   578   342
>     446   547   534   495   979   479
> 
> I can read this file with:
> 
>     scan("data1")
>     Read 24 items
>      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578 342 446
>      [20] 547 534 495 979 479    
> 
> But now, suppose I have a file "data2" containing:
> 
>     450, 390, 467, 654,  30, 542, 334, 432, 421,
>     357, 497, 493, 550, 549, 467, 575, 578, 342,
>     446, 547, 534, 495, 979, 479
> 
> When I try to read this with sep="," I get:
> 
>     scan("data2", sep=",")
>     Read 26 items
>      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493 550 549 467 575 578 342
>      [20]  NA 446 547 534 495 979 479 
> 
> I get two extra fields, both NA. Not what I'd want. And I can't
> drop the NA's, because there could be other NA's, not resulting
> from this comma-EOL combination.

You can easily remove the trailing commas, though, as in

scan(pipe("sed -e s/,$// data2"), sep=",")
Read 24 items
 [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
342 446
[20] 547 534 495 979 479


> I suggest, the proper action for scan would be to treat the
> combination sep plus newline as a single separator.

However, that's not compatible with S or earlier versions of R or
the documentation 

     sep: by default, scan expects to read white-space delimited input
          fields.  Alternatively, `sep' can be used to specify a
          character which delimits fields.  A field is always delimited
          by a newline unless it is quoted.

I suggest the proper action is to act as documented!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Dec 26 15:16:31 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 26 Dec 2000 16:16:31 +0100 (CET)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012261614470.626-100000@kleigh.nl>

Prof Brian Ripley skriver...

>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
> 
> I suggest the proper action is to act as documented!

I know, it isn't a bug. I'd suggest to make it an extra
option in a future version of R.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:08:38 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:08:38 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <Pine.GSO.4.05.10012261447310.11980-100000@toucan.stats>
Message-ID: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>

Hi,

I see that Prof Ripley propose to pre-process the file using sed. I saw that
to do so he used "pipe". I look for it on my system (see below) and the
function doesn't seem to be available. Since I have sed from cygwin32 I
wonder if there would a way to use it in a similar fashion as proposed here?

Thanks

YG

platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R

> -----Message d'origine-----
> De : owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> Envoye : Tuesday, December 26, 2000 9:54 AM
> A : Peter Kleiweg
> Cc : r-devel@stat.math.ethz.ch
> Objet : Re: [Rd] More on scan: extra field at end of line
>
>
> On Tue, 26 Dec 2000, Peter Kleiweg wrote:
>
> >
> > Suppose, I have a file "data1" containing:
> >
> >     450   390   467   654    30   542   334   432   421
> >     357   497   493   550   549   467   575   578   342
> >     446   547   534   495   979   479
> >
> > I can read this file with:
> >
> >     scan("data1")
> >     Read 24 items
> >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> 549 467 575 578 342 446
> >      [20] 547 534 495 979 479
> >
> > But now, suppose I have a file "data2" containing:
> >
> >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> >     446, 547, 534, 495, 979, 479
> >
> > When I try to read this with sep="," I get:
> >
> >     scan("data2", sep=",")
> >     Read 26 items
> >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> 550 549 467 575 578 342
> >      [20]  NA 446 547 534 495 979 479
> >
> > I get two extra fields, both NA. Not what I'd want. And I can't
> > drop the NA's, because there could be other NA's, not resulting
> > from this comma-EOL combination.
>
> You can easily remove the trailing commas, though, as in
>
> scan(pipe("sed -e s/,$// data2"), sep=",")
> Read 24 items
>  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> 342 446
> [20] 547 534 495 979 479
>
>
> > I suggest, the proper action for scan would be to treat the
> > combination sep plus newline as a single separator.
>
> However, that's not compatible with S or earlier versions of R or
> the documentation
>
>      sep: by default, scan expects to read white-space delimited input
>           fields.  Alternatively, `sep' can be used to specify a
>           character which delimits fields.  A field is always delimited
>           by a newline unless it is quoted.
>
> I suggest the proper action is to act as documented!
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Dec 26 16:42:22 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 26 Dec 2000 17:42:22 +0100
Subject: [Rd] More on scan: extra field at end of line
References: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>



Yves Gauvreau wrote:
> 
> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?
> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1

pipe() is a new function of R-1.2.0.

Uwe


> year     2000
> month    August
> day      15
> language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Dec 26 16:58:53 2000
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 26 Dec 2000 11:58:53 -0500
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <3A48CA6E.CBC94141@statistik.uni-dortmund.de>
Message-ID: <NEBBJKDJHEFCOOLFFAKKOECLCAAA.cyg@sympatico.ca>

Sorry I asked then!

Merry Christmas and happy New Year.

Yves Gauvreau

> -----Message d'origine-----
> De : Uwe Ligges [mailto:ligges@statistik.uni-dortmund.de]
> Envoye : Tuesday, December 26, 2000 11:42 AM
> A : Yves Gauvreau
> Cc : R-devel
> Objet : Re: [Rd] More on scan: extra field at end of line
> 
> 
> 
> 
> Yves Gauvreau wrote:
> > 
> > Hi,
> > 
> > I see that Prof Ripley propose to pre-process the file using 
> sed. I saw that
> > to do so he used "pipe". I look for it on my system (see below) and the
> > function doesn't seem to be available. Since I have sed from cygwin32 I
> > wonder if there would a way to use it in a similar fashion as 
> proposed here?
> > 
> > Thanks
> > 
> > YG
> > 
> > platform Windows
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    1.1
> 
> pipe() is a new function of R-1.2.0.
> 
> Uwe
> 
> 
> > year     2000
> > month    August
> > day      15
> > language R
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Dec 26 17:34:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Dec 2000 17:34:30 +0000 (GMT)
Subject: [Rd] More on scan: extra field at end of line
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKGECLCAAA.cyg@sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012261728510.12176-100000@toucan.stats>

On Tue, 26 Dec 2000, Yves Gauvreau wrote:

> Hi,
> 
> I see that Prof Ripley propose to pre-process the file using sed. I saw that
> to do so he used "pipe". I look for it on my system (see below) and the
> function doesn't seem to be available. Since I have sed from cygwin32 I
> wonder if there would a way to use it in a similar fashion as proposed here?

1) Yes, in 1.2.0.  I would encourage people to at least try 1.2.0,
not least as 1.2.1 is due out pretty soon and we would like to get the 
maximal number of bugs zapped.  (The PATH problem in rwinst.exe has been
solved in the version now up on CRAN.)

2) On Windows, you will need to do it in rterm: pipe does not work in
Rgui.  That's an OS deficiency that I hope to be able to work around in
time for 1.2.1, but I knew Peter Kleiweg was on HP-UX/Linux.

I suppose in part I was pointing out how neatly some of the pieces we now
have fit together.

> 
> Thanks
> 
> YG
> 
> platform Windows
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    1.1
> year     2000
> month    August
> day      15
> language R
> 
> > -----Message d'origine-----
> > De : owner-r-devel@stat.math.ethz.ch
> > [mailto:owner-r-devel@stat.math.ethz.ch]De la part de Prof Brian Ripley
> > Envoye : Tuesday, December 26, 2000 9:54 AM
> > A : Peter Kleiweg
> > Cc : r-devel@stat.math.ethz.ch
> > Objet : Re: [Rd] More on scan: extra field at end of line
> >
> >
> > On Tue, 26 Dec 2000, Peter Kleiweg wrote:
> >
> > >
> > > Suppose, I have a file "data1" containing:
> > >
> > >     450   390   467   654    30   542   334   432   421
> > >     357   497   493   550   549   467   575   578   342
> > >     446   547   534   495   979   479
> > >
> > > I can read this file with:
> > >
> > >     scan("data1")
> > >     Read 24 items
> > >      [1] 450 390 467 654  30 542 334 432 421 357 497 493 550
> > 549 467 575 578 342 446
> > >      [20] 547 534 495 979 479
> > >
> > > But now, suppose I have a file "data2" containing:
> > >
> > >     450, 390, 467, 654,  30, 542, 334, 432, 421,
> > >     357, 497, 493, 550, 549, 467, 575, 578, 342,
> > >     446, 547, 534, 495, 979, 479
> > >
> > > When I try to read this with sep="," I get:
> > >
> > >     scan("data2", sep=",")
> > >     Read 26 items
> > >      [1] 450 390 467 654  30 542 334 432 421  NA 357 497 493
> > 550 549 467 575 578 342
> > >      [20]  NA 446 547 534 495 979 479
> > >
> > > I get two extra fields, both NA. Not what I'd want. And I can't
> > > drop the NA's, because there could be other NA's, not resulting
> > > from this comma-EOL combination.
> >
> > You can easily remove the trailing commas, though, as in
> >
> > scan(pipe("sed -e s/,$// data2"), sep=",")
> > Read 24 items
> >  [1] 450 390 467 654  30 542 334 432 421 357 497 493 550 549 467 575 578
> > 342 446
> > [20] 547 534 495 979 479
> >
> >
> > > I suggest, the proper action for scan would be to treat the
> > > combination sep plus newline as a single separator.
> >
> > However, that's not compatible with S or earlier versions of R or
> > the documentation
> >
> >      sep: by default, scan expects to read white-space delimited input
> >           fields.  Alternatively, `sep' can be used to specify a
> >           character which delimits fields.  A field is always delimited
> >           by a newline unless it is quoted.
> >
> > I suggest the proper action is to act as documented!
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._
> >
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Dec 28 19:04:18 2000
From: joehl@web.de (joehl@web.de)
Date: Thu, 28 Dec 2000 20:04:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012281904.UAA28913@pubhealth.ku.dk>

###############################################################################

Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.

Happy New Year


Jens Oehlschlaegel


###############################################################################



###############################################################################
## windows(rescale="fixed") does not keep original device size 
## (probably device initialization error)
###############################################################################

dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


> windows(width=width, height=height, rescale="R")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fixed")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
> dev.off()
null device 
          1 
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 


## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
## The Help to windows() says:
## Using `"fixed"' will leave
##     the plot size unchanged, adding scrollbars if part of the plot is
##     obscured. This setting also affects the initial re-scaling if the
##     specified window size is too big.   



###############################################################################
## windows(rescale="fit") gives strange character sizes 
## (looks like device initialization error)
###############################################################################


## In the following examples the created devices seem to be equally initialized with respect to par(din)
## However, with windows(rescale="fit") I observe different par(pin) and different character sizes in text() and strwidth()

width <- 16.53543
height <- 11.69291

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737
> fit
              x         y
din  9.22916667 6.3854167
fin  9.22916667 6.3854167
pin  8.79000000 5.7337500
text 0.07935154 0.1122302
> R
             x         y
din  9.2291667 6.3854167
fin  9.2291667 6.3854167
pin  8.0666667 4.6604167
text 0.1394628 0.2896737


> ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> ## width=16.53543, height=11.69291 as 
> fit["text", "x"]/R["din", "x"]*width
[1] 0.1415101
> ## aprox. equal 
> fixed["text", "x"]
[1] 0.1405518


## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
## the phenomenon disappears

dev.off()
dev.off()
dev.off()

width <- 9.2291667
height <- 6.3854167

windows(width=width, height=height, rescale="fixed")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fixed", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fixed <- temp

windows(width=width, height=height, rescale="fit")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"fit", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
fit <- temp

windows(width=width, height=height, rescale="R")
par("cex")
plot(0:2,0:2, type="n")
text(1,1,"abc\ndef", cex=2)
text(1,0.5,"R", cex=2)
temp <- t(sapply(par(c("din", "fin", "pin")),c))
colnames(temp) <- c("x", "y")
temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
R <- temp

# now compare
fixed
fit
R

> fixed
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> fit
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544
> R
             x         y
din  9.1666667 6.1562500
fin  9.1666667 6.1562500
pin  8.0041667 4.4312500
text 0.1405518 0.3046544



###############################################################################
## wrong row distances with windows(rescale="fit")
## (looks like device initialization error)
###############################################################################


width <- 16.53543
height <- 11.69291

## as a reference
windows(width=width, height=height, rescale="fixed")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=2)

## Here rows are too close together
windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)


## Specifying smaller device size thus avoiding initial rescaling 
## makes the problem disappear

width <- 9
height <- 6

windows(width=width, height=height, rescale="fit")
plot(0:2,0:2, type="n")
text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
,cex=3)

## Once correctly initialized further rescaling using the mouse does retain correct distances

dev.off()
dev.off()
dev.off()



###############################################################################
## windows(rescale="fit") destroys aspect ratio 
## (looks like device initialization error)
###############################################################################


dev.show <- function(){
	din <- par("din")
	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
}
width <- 42/2.54
height <- 29.7/2.54

> width
[1] 16.53543
> height
[1] 11.69291
> width/height
[1] 1.414141


## create a device
> windows(width=width, height=height, rescale="fit")
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 

## some resizing of the window BEFORE plot() is called
# par("din") doesn't SEEM to change
> dev.show()
      width      height aspectratio 
   9.229167    6.385417    1.445351 
   
# but in fact calling plot() and dev.show()
> plot(0,0)
> dev.show()
      width      height aspectratio 
   6.321506    5.562500    1.136451 

## now some resizing of the window AFTER plot() is called
> dev.show()
      width      height aspectratio 
   4.708333    4.500471    1.046187 
> dev.show()
      width      height aspectratio 
   4.718750    3.297956    1.430811 
> dev.show()
      width      height aspectratio 
  3.3255361   4.4375000   0.7494166 
> dev.show()
      width      height aspectratio 
  1.4091170   5.1145833   0.2755096 
> dev.show()
      width      height aspectratio 
  1.4062500   5.1145833   0.2749491 
> dev.show()
      width      height aspectratio 
  0.4701945   3.3854167   0.1388882 
  
## we got very differing aspect ratios
## One reason for that COULD be that the initially intended device sizes are not kept, 
## so that many rescalings cumulate the deviations.
## May be par(din) should not be changed at all (keep the representation layer stable)
## and only apply rescaling/zooming/scrolling only to the graphical presentation.



###############################################################################


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 15mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 20:23:18 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 21:23:18 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#795)
Message-ID: <200012282023.VAA29104@pubhealth.ku.dk>

If these things bother you, could you please supply fixes?  For some reason
you omitted the part of the help page dealing with one of these (which is
as documented), and I also think you are confusing `plot' and `device'
sizes. The latter will be the displayed device surface, I believe.

Nothing on the help page suggested that the fine details of the R read-only
parameters will be as you expected after re-scaling the plot, and it never
occurred to me that anyone would expect so.  As they are reported by the R
graphics engine (which is used unchanged), I expect they are correct in one
of the multiple interpretations.

On Thu, 28 Dec 2000 joehl@web.de wrote:

> ###############################################################################
> 
> Before reporting 4 problems with windows(rescale=) I want to congrat on R1.2 and to thank r-developers for quickly adding the rescale workaround to the windows version.
> 
> Happy New Year
> 
> 
> Jens Oehlschlaegel
> 
> 
> ###############################################################################
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fixed") does not keep original device size 
> ## (probably device initialization error)
> ###############################################################################
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> > windows(width=width, height=height, rescale="R")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fixed")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> > dev.off()
> null device 
>           1 
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> 
> ## Shouldn't at least rescale="fixed" give the desired device size and aspect ratio?
> ## The Help to windows() says:
> ## Using `"fixed"' will leave
> ##     the plot size unchanged, adding scrollbars if part of the plot is
> ##     obscured. This setting also affects the initial re-scaling if the
> ##     specified window size is too big.   

I don't think so.  It says the `plot' size, not the `device' size which is
what par("din") reports.

> ###############################################################################
> ## windows(rescale="fit") gives strange character sizes 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> ## In the following examples the created devices seem to be equally initialized with respect to par(din)
> ## However, with windows(rescale="fit") I observe different par(pin) and 
different character sizes in text() and strwidth()
> 
> width <- 16.53543
> height <- 11.69291
> 
> windows(width=width, height=height, rescale="fixed")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fixed", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fixed <- temp
> 
> windows(width=width, height=height, rescale="fit")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"fit", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> fit <- temp
> 
> windows(width=width, height=height, rescale="R")
> par("cex")
> plot(0:2,0:2, type="n")
> text(1,1,"abc\ndef", cex=2)
> text(1,0.5,"R", cex=2)
> temp <- t(sapply(par(c("din", "fin", "pin")),c))
> colnames(temp) <- c("x", "y")
> temp <- rbind(temp, text=c(strwidth("abc\ndef", cex=2), strheight("abc\ndef", cex=2)))
> R <- temp
> 
> # now compare
> fixed
> fit
> R
> 
> > fixed
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> > fit
>               x         y
> din  9.22916667 6.3854167
> fin  9.22916667 6.3854167
> pin  8.79000000 5.7337500
> text 0.07935154 0.1122302
> > R
>              x         y
> din  9.2291667 6.3854167
> fin  9.2291667 6.3854167
> pin  8.0666667 4.6604167
> text 0.1394628 0.2896737
> 
> 
> > ## It looks like character size of windows(rescale="fit") refers to originally intended device size of 
> > ## width=16.53543, height=11.69291 as 
> > fit["text", "x"]/R["din", "x"]*width
> [1] 0.1415101
> > ## aprox. equal 
> > fixed["text", "x"]
> [1] 0.1405518

As documented:

  Using \code{\link{strwidth}} or
  \code{\link{strheight}} after a window has been rescaled gives
  dimensions in the original units, but only approximately as they are
  derived from the metrics of the rescaled fonts.

> ## If we now repeat this procedure with device sizes small enough to avoid initial rescaling
> ## the phenomenon disappears

Right, as documented.

> ###############################################################################
> ## wrong row distances with windows(rescale="fit")
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> width <- 16.53543
> height <- 11.69291
> 
> ## as a reference
> windows(width=width, height=height, rescale="fixed")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=2)
> 
> ## Here rows are too close together
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)

I can't reproduce that.  It may depend on the fonts available.

> ## Specifying smaller device size thus avoiding initial rescaling 
> ## makes the problem disappear
> 
> width <- 9
> height <- 6
> 
> windows(width=width, height=height, rescale="fit")
> plot(0:2,0:2, type="n")
> text(1,1,"there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> ,cex=3)
> 
> ## Once correctly initialized further rescaling using the mouse does retain correct distances
> 
> dev.off()
> dev.off()
> dev.off()
> 
> 
> 
> ###############################################################################
> ## windows(rescale="fit") destroys aspect ratio 
> ## (looks like device initialization error)
> ###############################################################################
> 
> 
> dev.show <- function(){
> 	din <- par("din")
> 	c(width=din[1], height=din[2], aspectratio=din[1]/din[2])
> }
> width <- 42/2.54
> height <- 29.7/2.54
> 
> > width
> [1] 16.53543
> > height
> [1] 11.69291
> > width/height
> [1] 1.414141
> 
> 
> ## create a device
> > windows(width=width, height=height, rescale="fit")
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
> 
> ## some resizing of the window BEFORE plot() is called
> # par("din") doesn't SEEM to change
> > dev.show()
>       width      height aspectratio 
>    9.229167    6.385417    1.445351 
>    
> # but in fact calling plot() and dev.show()
> > plot(0,0)
> > dev.show()
>       width      height aspectratio 
>    6.321506    5.562500    1.136451 
> 
> ## now some resizing of the window AFTER plot() is called
> > dev.show()
>       width      height aspectratio 
>    4.708333    4.500471    1.046187 
> > dev.show()
>       width      height aspectratio 
>    4.718750    3.297956    1.430811 
> > dev.show()
>       width      height aspectratio 
>   3.3255361   4.4375000   0.7494166 
> > dev.show()
>       width      height aspectratio 
>   1.4091170   5.1145833   0.2755096 
> > dev.show()
>       width      height aspectratio 
>   1.4062500   5.1145833   0.2749491 
> > dev.show()
>       width      height aspectratio 
>   0.4701945   3.3854167   0.1388882 
>   
> ## we got very differing aspect ratios
> ## One reason for that COULD be that the initially intended device sizes are not kept, 
> ## so that many rescalings cumulate the deviations.
> ## May be par(din) should not be changed at all (keep the representation layer stable)
> ## and only apply rescaling/zooming/scrolling only to the graphical presentation.

Possibly.  I don't think the device size is very interesting after
rescaling.  What are you using it for?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Dec 28 21:54:49 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Dec 2000 22:54:49 +0100 (MET)
Subject: [Rd] Bug in glm.fit() or plot.lm() (PR#778)
Message-ID: <200012282154.WAA29280@pubhealth.ku.dk>

Here's what I think is going on.  

plot.lm() and everything I could see like it calls weights(object) and
resid(object).  The problem is that there is a resid.glm so one gets
deviance residuals, but there is not a weights.glm so weights.lm is used.  
The solution is to add weights.glm:

weights.glm <- function(object, type = c("prior", "working"), ...)
{
    type <- match.arg(type)
    if(type == "prior") object$prior.weights else object$weights
}

As far as I can see one either wants the default weights here and deviance
or Pearson residuals, or object$weights and the working residuals.  The
fitted object has the latter pair, which is sensible for inheriting from lm
(and compatible with S), but both plot.lm and your example use residuals()
which is not the same thing.

It seems reasonably clear from the labels that plot.lm is intended to use
standardized deviance residuals, but I am not at all sure that is the best
alternative. Davison & Snell (1991 Cox Festschrift) seem to suggest that
standardized Pearson residuals would be better, and offer other
alternatives.

I've added weights.glm.  We badly need to document the "glm" class
and subtle points like this.



On Tue, 19 Dec 2000 murdoch@stats.uwo.ca wrote:

> Here's a bug one of my students noticed.
> 
> When you call plot() on a glm object, plot.lm gets called.  The second
> plot it shows is supposed to give a normal QQ plot of the standard
> deviance residuals, but it doesn't.  The glm object created by glm.fit
> returns something (the IRLS weights?) in fit$weights which plot.lm
> takes as observation weights, so  you get strange residuals in the QQ
> plot.
> 
> For example, here I fit a simulated Poisson model where the model
> perfectly fine, but the plot.lm QQ plot makes the residuals look huge,
> ranging between -45 and 40.
> 
> >set.seed(1)
> >x <- seq(4,5,len=1000)
> >y <- rpois(1000,exp(x))
> >fit <- glm(y ~ x, family=poisson)
> >plot(fit, which=2)
> 
> If I extract the residuals myself and plot them, I see that the model
> is fine:
> 
> >qqnorm(residuals(fit))
> 
> The problem is that the weights are big; plot.lm should be using
> prior.weights, or glm should be returning the big weights under a
> different name:
> 
> > summary(fit$weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>   54.35   69.90   89.90   93.76  115.60  148.70 
> 
> > summary(fit$prior.weights)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>       1       1       1       1       1       1 

Match the residuals and weights is the story.

> 
> Duncan Murdoch
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
> 
> Windows 9x 4.10 (build 1998)  
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 08:02:42 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 09:02:42 +0100 (MET)
Subject: [Rd] problems with glm (PR#771)
Message-ID: <200012290802.JAA00237@pubhealth.ku.dk>

[We do have a TooMuchAtOnce category, but it is easier to cope with
short separate reports with informative subject lines for, e.g. the BUGS
list.]

On Mon, 18 Dec 2000 james.lindsey@luc.ac.be wrote:

> R1.2.0 with Linux RH5.2
> 
> I do not believe that the problems below are new to 1.2 but I only
> cover this sort of thing once a year in my course and some of that
> happened to be last Friday so too late to report for 1.2. I see that
> one or two things that I was going to report have been corrected.
> I like the fact that interactions now show : instead of .
> 
> Here is some output with comments inserted.
> 
[...]

> > wt <- codes(Reg66)!=codes(Reg71)

Why not just wt <- Reg66 != Reg71  ?

[...]

> First problem: with diagonal values weighted out in a transition matrix
> (mover-stayer model), glm wrongly estimates the diagonals to be the
> observed plus 0.1. This was correct in 90.1 a year ago but already
> wrong in 1.0.1. I don't have any versions in between installed.

I think this is the same as

[Rd] glm gives incorrect results for zero-weight cases (PR#780)

in which case it is already fixed in R-patched.  That does look to have
solved this one too.  Note that glm has *not* `estimated the diagonals'
at all.  These are predictions (the cases are not in the model), and
predict.glm did get them right.

predict(z, data)
      1       2       3       4       5       6       7       8 
0.61337 3.30334 3.45098 4.51559 3.33786 6.02783 6.17548 7.24009 
      9      10      11      12      13      14      15      16 
3.50109 6.19106 6.33871 7.40332 4.57309 7.26306 7.41071 8.47532 

[...]

> Second problem: the man page for factors states that the levels are
> sorted, but gl does not do this. It keeps them in the order of the

There is a help page for factor(), not for factors, and I don't believe
that does state so. It says that *factor* sorts them by default, which is
true.  Where is the `man page for factors'?

> labels. This is inconsistent with everything else, confusing for
> students, and liable to induce errors in data analysis. In the example
> below, it is not too important because the baseline category is the
> same in the two cases but that will not generally be the case.
> 
> As an addition comment, I would strongly recommend that, if labels can
> be coerced to numeric, they be ordered, not sorted. This is because
> the order is very confusing if there are more than 9: for example, the
> sorted 10 comes near the beginning and not at the end.

You can do that, of course, by specifying the order of the levels.  
However, we teach students that the details of the coding of linear models
are details, and that they should regard coefficients as secondary and
predictions as primary.  aov() has the right idea in suppressing the
individual coefficients.  If you want to interpret coefficients you need to
understand codings. Period.

I don't see the value of changing the default for factor: it would not be
backwards-compatible, and some people have thought thought what the default
would be and accepted it. 

> > reg66 <- gl(4,1,16,labels=c("CC","LY","WM","GL"))
> > z
> 
> Call:  glm(formula = Freq ~ Reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      Reg66GL      Reg66LY      Reg66WM      Reg71GL      Reg71LY  
>      0.6134       3.9022       2.6900       2.8376       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 
> > print(za <- glm(Freq~reg66+Reg71,family=poisson))
> 
> Call:  glm(formula = Freq ~ reg66 + Reg71, family = poisson) 
> 
> Coefficients:
> (Intercept)      reg66LY      reg66WM      reg66GL      Reg71GL      Reg71LY  
>      0.6134       2.6900       2.8376       3.9022       3.9597       2.7245  
>     Reg71WM  
>      2.8877  
> 
> Degrees of Freedom: 15 Total (i.e. Null);  9 Residual
> Null Deviance:	    40740 
> Residual Deviance: 19880 	AIC: 20000 


> Third problem: if mean value contrasts are used, the level names are
> not attached to the variable name, but simply the number of the
> category. This rightly drives students mad and is simply
> uninterpretable if the levels have been sorted. It takes a great deal
> of extreme care to try to find out to what the numbers refer.

Are we supposed to guess that `mean value contrasts' means contr.sum?  In
which case the numbers refer to the number of the *contrast*: they do not
refer to levels, nor are single levels relevant. As in

> contr.sum(levels(Reg66))
   [,1] [,2] [,3]
CC    1    0    0
GL    0    1    0
LY    0    0    1
WM   -1   -1   -1
> contr.treatment(levels(Reg66))
   GL LY WM
CC  0  0  0
GL  1  0  0
LY  0  1  0
WM  0  0  1

Now, what should the column labels be in the first case?  And in what sense
are these `mean value contrasts'?

Do you really want labels like "CCvWM"?  They could get very cumbersome.

(One could argue that contr.treatment is already wrong, but as they
are not even contrasts ....)

[...]

> Additional comment: I recommend that the aic functions for poisson and
> binomial have the explicit calculation of the log density replaced by
> the corresponding d function with the log option. This will avoid the
> production of NAs in certain cases of zeroes in tables.

Good idea, but could you supply examples so we can put them in the
regression tests?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 08:54:54 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 09:54:54 +0100
Subject: [Rd] help with sockets
Message-ID: <3A4C515E.A54D3F3D@univie.ac.at>

i would like to use sockets to accept commands over the net.
so a socket should be a replacement for stdin.
whenever i have a complete line, i want to hand it over to the parser.

i cannot do it simply with eval because eval expects a complete
expression.

additionally, eval and evalq
seem not to accept strings.

is there an easy way to do this?

let me rephrase

my program should run a loop reading a socket,
and whenever an and of line arrives,
the string should be handled like if it had been typed on the command
line.

can this be done easily?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:25:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 09:25:03 +0000 (GMT)
Subject: [Rd] help with sockets
In-Reply-To: <3A4C515E.A54D3F3D@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10012290908210.14802-100000@toucan.stats>

On Fri, 29 Dec 2000, Erich Neuwirth wrote:

> i would like to use sockets to accept commands over the net.
> so a socket should be a replacement for stdin.
> whenever i have a complete line, i want to hand it over to the parser.
> 
> i cannot do it simply with eval because eval expects a complete
> expression.
> 
> additionally, eval and evalq
> seem not to accept strings.
> 
> is there an easy way to do this?
> 
> let me rephrase
> 
> my program should run a loop reading a socket,
> and whenever an and of line arrives,
> the string should be handled like if it had been typed on the command
> line.
> 
> can this be done easily?

Not yet, I think. This is the aim of connections (new in 1.2.0), but
socket connections are not yet fully implemented (and nothing is in the
R sources yet).  I bet you want to do this on Windows too!

First off, you need to parse, not evaluate the string: eval is called on a
parse tree.  So what you will be able to do with a socket connection
is to call eval(parse(file=conname, n = 1)) and that will read one
expression from the connection conname and then evaluate it.  So you
could run that in a loop.

I think you can fake this now.  When each line arrives, add it to a 
character vector `buffer'.  Then try parse(n = 1, text=buffer),
and if that succeeds evaluate the result and reinitialize `buffer'
to be empty.

A few details: giving parse() an incomplete expression will get a
parse error, so the call to parse has to be done inside try().
I don't know how to distinguish between an incomplete expression and a
parse error, so this strategy will only work if you always send correct
expressions.  (I met exactly the same problem using DDE connections to
S-PLUS for Windows.)  Perhaps we can make parse give different error
messages?


An alternative is to use OS facilities to do this. That is, to write a 
small program `getfromsocket' that accepts input from the socket and
writes line by line to stdout. Then just use

getfromsocket args | R (or Rterm on Windows).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 09:44:09 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 10:44:09 +0100 (MET)
Subject: [Rd] unlisting a list with names components (PR#645)
Message-ID: <200012290944.KAA00877@pubhealth.ku.dk>

Summary of report from Peter Perkins <pperkins@ucsd.edu> on Sat Aug 26
09:41:52 2000

i think the lines below demonstrate a problem with unlist when the list
contains components that are names.  _anything_ can go in a list,
right?  this came up in the context of trying to
unlist(list(attr(terms(formula), "variables")).

> list2 <- list(a="a", b=as.name("b"))
> unlist(list2)
$a
[1] "a"

$b
b


This seems to be intentional, but the documentation is wrong.  The C code
says

    /* If a non-vector argument was encountered (perhaps a list if */
    /* recursive = F) then we must return a list.  Otherwise, we use */
    /* the natural coercion for vector types. */

A language element (e.g. a `name') is non-vector.  So anything can go in a
list, but unlist cannot sort out anything.

S does this differently, but then it stores non-vector types differently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 11:38:36 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Dec 2000 12:38:36 +0100 (MET)
Subject: [Rd] aic in binomial models is often wrong (PR#796)
Message-ID: <200012291138.MAA01699@pubhealth.ku.dk>

The following two models are the same:

data(esoph)
glm(cbind(ncases, ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial())
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 237 

glm(ncases/(ncases+ncontrols) ~ agegp + tobgp * alcgp, 
    data = esoph, family = binomial(), weights=ncases+ncontrols)
...
Degrees of Freedom: 87 Total (i.e. Null);  67 Residual
Null Deviance:      227.2 
Residual Deviance: 47.48        AIC: 934.4 

The second AIC value is wrong: fixed in R-patched now.

You may think you only ever use the first form, but internally
R uses the second quite a bit.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 14:31:03 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 15:31:03 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
Message-ID: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>


The definition for dev.copy2eps contains the following line:

    oc$paper <- "special"

The result of this is that the output will be placed in the left
bottom corner of the page. Even though dev.copy2eps is meant for
creating files that are to be included into other documents, you
might want to print the figure directly, just to see how it will
look on paper. (Of course, this will only work if the figure 
is not larger than the papersize.) When the figure is in the
left bottom corner, this is a bit awkward, because marks too
close to the edge will get lost.

I suggest to put the figure at the centre of the default paper
size (or perhaps the papersize as set as an argument by the
user). It won't matter for EPS-inclusion were on the paper
the figure is, as long as the boundingbox is set correctly.
I redefined dev.copy2eps in my ~/.Rprofile with the above line
replaced by:

    oc$paper <- "default"

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Dec 29 16:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Dec 2000 16:06:55 +0000 (GMT)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.LNX.4.21.0012291513140.667-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>

On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> 
> The definition for dev.copy2eps contains the following line:
> 
>     oc$paper <- "special"
> 
> The result of this is that the output will be placed in the left
> bottom corner of the page. Even though dev.copy2eps is meant for
> creating files that are to be included into other documents, you
> might want to print the figure directly, just to see how it will
> look on paper. (Of course, this will only work if the figure 
> is not larger than the papersize.) When the figure is in the
> left bottom corner, this is a bit awkward, because marks too
> close to the edge will get lost.

Can't you print from a viewer that will fix this, in particular
take your printer's PPD into account.  EPSF is not supposed to be sent
directly to a printer.

> I suggest to put the figure at the centre of the default paper
> size (or perhaps the papersize as set as an argument by the
> user). It won't matter for EPS-inclusion were on the paper
> the figure is, as long as the boundingbox is set correctly.

It does matter in some cases, and in others it saves a *lot* of
memory. Some includers turn the whole page into a bitmap and then crop it
to the bounding box.  Others will crop to the smaller of
the Media and the bounding box, or crop to the Media only.

> I redefined dev.copy2eps in my ~/.Rprofile with the above line
> replaced by:
> 
>     oc$paper <- "default"

Please don't.  Make a copy with another name and change that.
One day you will need dev.copy2eps as intended, and you will
either be puzzled about the result or file a bug report ...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Dec 29 17:11:37 2000
From: joehl@web.de (joehl@web.de)
Date: Fri, 29 Dec 2000 18:11:37 +0100 (MET)
Subject: [Rd] some (may be related) problems with windows(rescale=) (PR#794)
Message-ID: <200012291711.SAA03532@pubhealth.ku.dk>

Dear Prof. Brian Ripley,

Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)

> If these things bother you, could you please supply fixes?  

Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that. 

What I definitely can offer is testing and giving replicable bug reports. 

Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R. 

> [snipped]
> Nothing on the help page suggested that the fine details of the R read-only
> parameters will be as you expected after re-scaling the plot, and it never
> occurred to me that anyone would expect so.  
> As they are reported by the R 
> graphics engine (which is used unchanged), I expect they are correct in one 
> of the multiple interpretations. 
> [snipped]

Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).

One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.

> Possibly.  I don't think the device size is very interesting after
> rescaling.  What are you using it for?

Well, of course I try to avoid using it. 

Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.

Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device. 

Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.

Example
Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size. 

========================
windows(rescale="fixed")
does not do rescaling after device initializiation, it's basic idea is to not change the device size at all. 
However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails. 
In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
Thus the current implementation does not make sense with devices bigger than the screen.
========================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fixed")

# using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally). 
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1, jandltext, cex=3.2)

dev.off()



======================
by constrast 
windows(rescale="fit")
works
======================

# I intend to layout DIN A3
width <- 16.53543
height <- 11.69291
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
windows(width=width, height=height, rescale="fit")

# using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()
postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)

# now applying THE SAME commands WORKS
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,2,0,2))
par(c("din","fin","pin"))
par("usr")
text(1,1,jandltext, cex=5.8)

dev.off()

However repeated resizing of the window does increase the shown font sizes, look at that:

width <- 8
height <- 6
jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
cex <- 2.8

info <- function(){
	user <- strwidth(jandltext, cex=cex, units="user")
	inches <- strwidth(jandltext, cex=cex, units="inches")
	pin <- par("pin")
	din <- par("din")
	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
}

windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
windows(width=width, height=height, rescale="fit")
par(cex=1)
par(mai=c(0,0,0,0))
plot.new()
par(usr=c(0,1,0,1))
par(c("din","fin","pin"))
par("usr")
text(0.5,0.5,jandltext, cex=cex)

# Initial measures
print(static <- info())

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# we never touched horizontal window size but horiz din differs, strwidthInInches differs not

# now some VERTICAL resizing and bring window back to original size
print(static <- rbind(static, info()))
# now everything differs

> print(static <- rbind(static, info()))
       din aspectratio pintodin   struser strinchtopin   strinch
1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing



So here is my revised bug status:

1a) windows(rescale="fixed") does not keep original device size 
1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)

2) wrong row distances with windows(rescale="fit")
   This phenomenon also observed under different circumstances
   see todays mail to r-help

3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well


Kind regards and best wishes for 2001



Jens Oehlschlgel

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die groe Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Dec 29 18:45:16 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 29 Dec 2000 19:45:16 +0100
Subject: [Rd] R sings
Message-ID: <3A4CDBBC.3010C39@univie.ac.at>

i have created a package which allows R to play sounds
the package is available from
http://sunsite.univie.ac.at/~neuwirth/Rcsound/
both as zipped binary for windows and as installable tar.gz

preequisite:
you have to install csound on yout machine.
the necessary links are at http://www.csound.org

csound is a very portable program for creating sounds,
and using it as out sound creation tool we remain portable.

i am interested in getting feedback.

btw:
csound is NOT easy to use.
but for the purposes of our package,
it is only necessary to install it.

my package is vert preliminary,
so i would like feedback.

here is the README


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


This is a VERY preliminary version of an R package
for playing sounds.

To install, unzip the complete archive in the library directory of R.

The presequesites:
You have to install CSOUND,
a very powerful sound generation program.
Information is avalaible at http://www.csound.org
You also can find most version on
http://sunsite.univie.ac.at/pub/sound/csound/

You have to find the command line parameters
needed to run csound on your platform.
You need at least verson 4.0,
current version at design time of this package is 4.08.
our package has been tested with 
"Canonical" Csound on Linux
and DirectCsound on Win32.

option$csound.debug
and
option$csound.plain 
have to contain the command line needed to run
csound in normal mode and in debugging mode
(debugging mode means you want to see a window with csound's messages)
The package as is is configured for windows,
a comment contains the command line for Linux.

At the moment, we have only 2 instruments,
instrument 1 is a sine wave,
and
instrument 11 is a simple plucked string.

currently, the library contains 4 functions

csndPlayMono
csndPlayStereo
csndCorrphone
csndFourierTones

all these function play sequences of notes with given frequencies,
starting times, durations, and volume levels.

Basic interface functions:

csndPlayMono (instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
  file=NULL, debug.csound=FALSE)

csndPlayStereo(instr=NULL, start=NULL, dur=NULL, vol=NULL, freq=NULL,
pos = 0, 
  file=NULL, debug.csound=FALSE)

instr	instrument number
start   vector of starting times for single notes 
dur     vector of duration of single notes
vol	vector of volume of single notes
freq    vector of volume of single notes
pos     vector of positions of notes (extreme values -1 left channel, 1
right channel)
file    name of temporary file to be used as input for csound
debug.csound
	if TRUE csound window will remain visible


Attempt at "statistical" sound functions

csndCorrphone(instr, freq1, freq2, dur, vol=8000,
  file=NULL, debug.csound=FALSE)

instr	instrument number
freq1,freq2
	vector of frequencies to be played simultaneously on left and right
channel.
dur	should be a single value, used for duraion of all notes

csndFourierTones(fourcoeffs, freq=264, dur=1, vol=8000,
  file=NULL, debug.csound=FALSE)

fourcoeffs	matrix, each row is interpreted as fourier coefficients,
		and the correspronding tone is played for each row
freq		frequency of the tones (should be equal for all tones)
dur		duration in seconds
vol		volume for tones




Here are some example to try:

csndPlayMono(11,c(0:12),1,8000,264*2^(c(0:12)/12))
csndPlayStereo(11,c(0:12),1,8000,264*2^(c(0:12)/12),c(-6:6)/6)

r<-0.9
x1<-rnorm(10)
x2<-rnorm(10)
x3<-r*x1+sqrt(1-r^2)*x2
f1<-264+50*x1
f3<-264+50*x3
csndCorrphone(11,f1,f3,1)

fmat<-rbind(1/1:20,rep(c(1,0),10)*1/1:20,(1/(1:20))^2*rep(c(1,-1),10))
csndFourierTones(fmat,dur=2)







--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Dec 29 22:00:21 2000
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri, 29 Dec 2000 23:00:21 +0100 (CET)
Subject: [Rd] dev.copy2eps: position of figure on page
In-Reply-To: <Pine.GSO.4.05.10012291556510.15199-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0012292144380.739-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Fri, 29 Dec 2000, Peter Kleiweg wrote:

> > The definition for dev.copy2eps contains the following line:
> > 
> >     oc$paper <- "special"
> > 
> > The result of this is that the output will be placed in the left
> > bottom corner of the page. Even though dev.copy2eps is meant for
> > creating files that are to be included into other documents, you
> > might want to print the figure directly, just to see how it will
> > look on paper. (Of course, this will only work if the figure 
> > is not larger than the papersize.) When the figure is in the
> > left bottom corner, this is a bit awkward, because marks too
> > close to the edge will get lost.
> 
> Can't you print from a viewer that will fix this, in particular
> take your printer's PPD into account.

Usually I just print with Unix command lp. I could write a
script that would shift the image to the centre of the page
before printing. Never needed such a thing before. I'm used to
application creating EPS with images centred.

> EPSF is not supposed to be sent directly to a printer.

That's what I said. Doesn't mean you should make it
unnecessarily difficult.

> > I suggest to put the figure at the centre of the default paper
> > size (or perhaps the papersize as set as an argument by the
> > user). It won't matter for EPS-inclusion were on the paper
> > the figure is, as long as the boundingbox is set correctly.
> 
> It does matter in some cases, and in others it saves a *lot* of
> memory. Some includers turn the whole page into a bitmap and then crop it
> to the bounding box.  Others will crop to the smaller of
> the Media and the bounding box, or crop to the Media only.

I never encoutered software that behaves in such a silly matter.
But I take your word for it.

> > I redefined dev.copy2eps in my ~/.Rprofile with the above line
> > replaced by:
> > 
> >     oc$paper <- "default"
> 
> Please don't.  Make a copy with another name and change that.
> One day you will need dev.copy2eps as intended, and you will
> either be puzzled about the result or file a bug report ...

That's a sound suggestion.

Why not allow for the user to set the papersize? Instead of
having in the body of dev.copy2eps the following line:

    oc$paper <- "special"

you could put this:

    if (is.null(oc$paper))
        oc$paper <- "special"

The way it is now, I *can* specify the paper as an option, but
it is ignored in the body and replaced by "special". I think
it's annoying to have options that don't work. And being used to
working with Unix, I don't think you should "protect" people by
limiting their options.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Dec 30 14:43:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 30 Dec 2000 15:43:07 +0100
Subject: [Rd] R sings again
Message-ID: <3A4DF47B.A3DA08D0@univie.ac.at>

our server broke,
so meanwhile i have put the package files for RCsound on another server

the relevant links are

http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound.zip
http://mailbox.univie.ac.at/erich.neuwirth/Rcsound/Rcsound_0.2-1.tar.gz

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Sat Dec 30 23:21:29 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Sun, 31 Dec 2000 00:21:29 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#797)
Message-ID: <200012302321.AAA06064@pubhealth.ku.dk>


The editor in R version 1.2.0 returns an error after editing a data frame 
that has row names. This is on a Windows 2000 system, but I've encountered 
the same problem under Windows 95. Here's a simple example:

  ------------------------------------------------------------------------------------

R : Copyright 2000, The R Development Core Team
Version 1.2.0  (2000-12-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > data(Formaldehyde)
 > Formaldehyde
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > edit(Formaldehyde) # no problem here
   carb optden
1  0.1  0.086
2  0.3  0.269
3  0.5  0.446
4  0.6  0.538
5  0.7  0.626
6  0.9  0.782
 > rownames(Formaldehyde)
[1] "1" "2" "3" "4" "5" "6"
 > rownames(Formaldehyde)<-letters[1:6]
 > Formaldehyde # seems ok
   carb optden
a  0.1  0.086
b  0.3  0.269
c  0.5  0.446
d  0.6  0.538
e  0.7  0.626
f  0.9  0.782
 > edit(Formaldehyde) # I simply closed the editor without changing anything
Error in rownames<-(x, value) : dimnames applied to non-array
 >


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.0
  year = 2000
  month = 12
  day = 15
  language = R

Windows 0.0 (build 0) Service Pack 10.0 ()

Search Path:
  .GlobalEnv, package:car, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 07:55:23 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 31 Dec 2000 08:55:23 +0100 (MET)
Subject: [Rd] editor in Windows doesn't like a data frame with row names (PR#798)
Message-ID: <200012310755.IAA06563@pubhealth.ku.dk>

On Sun, 31 Dec 2000 jfox@mcmaster.ca wrote:

> The editor in R version 1.2.0 returns an error after editing a data frame 
> that has row names. This is on a Windows 2000 system, but I've encountered 
> the same problem under Windows 95. Here's a simple example:

Actually, that's not where the error is. If you use traceback() you
will see it is in edit.data.frame.  That tries to use row.names to set the
rownames on a list, which no longer works (and was never documented to).

The fix is to use

    out <- as.data.frame(out)
    if (edit.row.names) {
        if (any(duplicated(rn))) 
            warning("edited row names contain duplicates and will be
ignored")
        else row.names(out) <- rn
    }
    out

or, if you don't want to edit the row names,

edit(foo, edit.row.names = FALSE)

BTW, you are supposed to use row.names to get/set row names on data frame,
and rownames/colnames on a matrix.


> 
>   ------------------------------------------------------------------------------------
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.2.0  (2000-12-15)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
>  > data(Formaldehyde)
>  > Formaldehyde
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > edit(Formaldehyde) # no problem here
>    carb optden
> 1  0.1  0.086
> 2  0.3  0.269
> 3  0.5  0.446
> 4  0.6  0.538
> 5  0.7  0.626
> 6  0.9  0.782
>  > rownames(Formaldehyde)
> [1] "1" "2" "3" "4" "5" "6"
>  > rownames(Formaldehyde)<-letters[1:6]
>  > Formaldehyde # seems ok
>    carb optden
> a  0.1  0.086
> b  0.3  0.269
> c  0.5  0.446
> d  0.6  0.538
> e  0.7  0.626
> f  0.9  0.782
>  > edit(Formaldehyde) # I simply closed the editor without changing anything
> Error in rownames<-(x, value) : dimnames applied to non-array
>  >
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.0
>   year = 2000
>   month = 12
>   day = 15
>   language = R
> 
> Windows 0.0 (build 0) Service Pack 10.0 ()
> 
> Search Path:
>   .GlobalEnv, package:car, package:ctest, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 11:53:23 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 11:53:23 GMT
Subject: [Rd] Package overview document?
Message-ID: <3a511b4d.58240644@smtp1.sympatico.ca>

I'm not sure if this is a devel or help question.

I'd like to write an overview of a package, and have it show up when
someone types

 library(help=mypackage)

or

 help(package=mypackage)

or even better, 

 ?mypackage

Right now, the first two give me a copy of the INDEX file; what I'd
like to see is a longer description.  Is it reasonable to write such a
description into the INDEX file?  Is there some other file where I can
put it, so that it will show up when someone asks about my package?

What about the latter version?  Wouldn't it be a nice improvement if
that were possible, too?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 14:11:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3a511b4d.58240644@smtp1.sympatico.ca>
Message-ID: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> I'm not sure if this is a devel or help question.

Devel, I think.

> I'd like to write an overview of a package, and have it show up when
> someone types
> 
>  library(help=mypackage)
> 
> or
> 
>  help(package=mypackage)
> 
> or even better, 
> 
>  ?mypackage
> 
> Right now, the first two give me a copy of the INDEX file; what I'd
> like to see is a longer description.  Is it reasonable to write such a
> description into the INDEX file?  Is there some other file where I can

That's what a lot of other packages do, e.g. boot.

> put it, so that it will show up when someone asks about my package?

Not if they ask the first two ways.

> What about the latter version?  Wouldn't it be a nice improvement if
> that were possible, too?

It is possible, but you need to watch namespace issues.  For example,
package sm has a file sm.Rd that gives an overview: you need it loaded
for that to work via ?sm but help(sm, package="sm") works always
(if sm is installed).

The problem is ensuring that you have a non-clashing name. dse1 has
00General.Description which seems to me to be very likely to clash.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Dec 31 16:33:41 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 31 Dec 2000 16:33:41 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
Message-ID: <3a4f5971.54339465@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
Ripley <ripley@stats.ox.ac.uk> wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>> I'd like to write an overview of a package, and have it show up when
>> someone types
>> 
>>  library(help=mypackage)
  ...
>> Is it reasonable to write such a
>> description into the INDEX file?  Is there some other file where I can
>
>That's what a lot of other packages do, e.g. boot.

Okay, I'll do that.  There are a couple of deficiencies, most notably
the fact that INDEX isn't used in the HTML or LaTeX versions of the
help files.  I saw in the docs somewhere that the DESCRIPTION text
would show up in the Latex output in some later version; is anyone
working on this?  If not, I might give it a shot.

>> >  ?mypackage

>It is possible, but you need to watch namespace issues.  For example,
>package sm has a file sm.Rd that gives an overview: you need it loaded
>for that to work via ?sm but help(sm, package="sm") works always
>(if sm is installed).
>
>The problem is ensuring that you have a non-clashing name. dse1 has
>00General.Description which seems to me to be very likely to clash.

I think the most obvious choice of name is the name of the package,
but that would clash fairly often with the name of a function within
it (e.g. boot), and it wouldn't show up first in alphabetical lists.
What some other help systems (e.g. Winhelp) do when a request is
ambiguous is to present a list of choices, with extra information
appended to help select.  If R did that, the clash wouldn't be such a
big deal. 

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Dec 31 22:16:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 31 Dec 2000 22:16:39 +0000 (GMT)
Subject: [Rd] Package overview document?
In-Reply-To: <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>

On Sun, 31 Dec 2000, Duncan Murdoch wrote:

> On Sun, 31 Dec 2000 14:11:47 +0000 (GMT Standard Time), Prof Brian D
> Ripley <ripley@stats.ox.ac.uk> wrote:
> 
> >On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >> I'd like to write an overview of a package, and have it show up when
> >> someone types
> >> 
> >>  library(help=mypackage)
>   ...
> >> Is it reasonable to write such a
> >> description into the INDEX file?  Is there some other file where I can
> >
> >That's what a lot of other packages do, e.g. boot.
> 
> Okay, I'll do that.  There are a couple of deficiencies, most notably
> the fact that INDEX isn't used in the HTML or LaTeX versions of the
> help files.  I saw in the docs somewhere that the DESCRIPTION text
> would show up in the Latex output in some later version; is anyone
> working on this?  If not, I might give it a shot.

I've not seen that.  The latex versions are separate files, so it seems
only to make sense if running pkg2tex on a package.

> >> >  ?mypackage
> 
> >It is possible, but you need to watch namespace issues.  For example,
> >package sm has a file sm.Rd that gives an overview: you need it loaded
> >for that to work via ?sm but help(sm, package="sm") works always
> >(if sm is installed).
> >
> >The problem is ensuring that you have a non-clashing name. dse1 has
> >00General.Description which seems to me to be very likely to clash.
> 
> I think the most obvious choice of name is the name of the package,
> but that would clash fairly often with the name of a function within
> it (e.g. boot), and it wouldn't show up first in alphabetical lists.
> What some other help systems (e.g. Winhelp) do when a request is
> ambiguous is to present a list of choices, with extra information
> appended to help select.  If R did that, the clash wouldn't be such a
> big deal. 

Um. They only sometimes do that, and only for searches or perhaps indices,
never for hyperlinks. They also only cope with single help files, and the
problem here is across help sets.  It's a lot less convenient on a non-GUI
system, too.

Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
special treatment.  It will not happen soon, though, and both imposing
more standards on .Rd format and moving away from .Rd to something 
easier to parse are under discussion.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

