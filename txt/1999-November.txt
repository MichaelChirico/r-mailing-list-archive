From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov  1 08:39:11 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 1 Nov 1999 09:39:11 +0100 (MET)
Subject: as.data.frame(NULL) & as.data.frame(list()) & bug in dput(.)
Message-ID: <14365.20911.924993.572835@gargle.gargle.HOWL>


{Connected to the bug report on expand.grid(.) and my fix to it..}

[Following the spirt of arrays where parts of dim() can be 0]
I would like for these two to give the "same"
or at least, both to give a data.frame with 0 observations of 0 variables.

Currently [R 0.65.1 and pre-0.90]

    > str(d0 <- as.data.frame(list()))
    `data.frame':  0 obs. of  0 variable:
     list()

    > dput(d0) ## BUG
    NULL

    > as.data.frame(NULL)
    Error in as.data.frame.default(NULL) : can't coerce NULL into a data.frame

and
    > str(dn0 <- as.data.frame(numeric(0)))
    `data.frame':  0 obs. of  1 variable:
     $ x: num 

    > dput(dn0)
    structure(list(x = numeric(0)), .Names = "x", class = "data.frame")

(S-plus 5.1 is almost the same, but uses "X" instead of "x" for a name)
-----

Comments?
If I don't get any, I'd only change  as.data.frame such that
as.data.frame(NULL) === as.data.frame(list())  |-->  0 x 0 data.frame

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov  1 16:26:13 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 01 Nov 1999 11:26:13 -0500
Subject: package description
Message-ID: <381DBF25.36FC4480@bank-banque-canada.ca>

It would be nice in the building of help for packages if there were some

mechanism to provide a few paragraphs of general description for the
package. (If this is already there I've missed it.) In the html help it
would be possible to do this by looking for some special file (e.g.
"General_Description") in the man directory and putting a link to that
at the top of 00Index.html, but I don't now if this approach would work
with other help formats.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov  1 16:44:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 1 Nov 1999 16:44:37 +0000 (GMT)
Subject: package description
Message-ID: <199911011644.QAA20354@toucan.stats.ox.ac.uk>


> Date: Mon, 01 Nov 1999 11:26:13 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: r-devel <r-devel@stat.math.ethz.ch>
> Subject: package description
> 
> It would be nice in the building of help for packages if there were some
> mechanism to provide a few paragraphs of general description for the
> package. (If this is already there I've missed it.) In the html help it
> would be possible to do this by looking for some special file (e.g.
> "General_Description") in the man directory and putting a link to that
> at the top of 00Index.html, but I don't now if this approach would work
> with other help formats.

It will not, not even for the html format as 00Index.html is
auto-generated by R INSTALL.  There is nothing to prevent there being a
Rd file containing the description and some suitable \name or \alias
(package:foo, for example).  This could be formalized, for example by a
special name (`Description') being placed first in the list.

That is my understanding of the purpose of library(help=foo) in the S
world, but it seems to be used rarely within R packages. That is, the
file INDEX could contain more than just the list of public functions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:32:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 16:32:15 -0500
Subject: bug in sample
In-Reply-To: <199910312320.AAA20291@pubhealth.ku.dk>; from Ray.Brownrigg@mcs.vuw.ac.nz on Mon, Nov 01, 1999 at 12:20:56AM +0100
References: <199910312320.AAA20291@pubhealth.ku.dk>
Message-ID: <19991101163215.P13888@jimmy.harvard.edu>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:33:17 1999
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Mon, 1 Nov 1999 22:33:17 +0100 (MET)
Subject: bug in sample (PR#305)
Message-ID: <199911012133.WAA01606@pubhealth.ku.dk>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov  1 21:58:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 1999 22:58:42 +0100
Subject: bug in sample (PR#305)
In-Reply-To: rgentlem@jimmy.harvard.edu's message of "Mon, 1 Nov 1999 22:33:17 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk>
Message-ID: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>

rgentlem@jimmy.harvard.edu writes:

> The following appears to be a bug in 0.90
> 
> > x<-sample(10,1:4,rep=T)
> > x
> [1] 8
> > ?sample
> >  x<-sample(10,1:4,rep=T)
> > x
> [1] 5
> 
> Of course, I forgot the syntax but I still don't like the result.

Weelll... the code seems to indicate that that is the intended result:
if length(x) == 1  and x>=1, you get samples from 1:x and since size
is non-vectorized, only the 1st element takes and you get samples of
size 1.

Splus3.4 does likewise, although it does give a warning:
  Numerical expression has 4 elements: only the first used...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 22:03:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 17:03:15 -0500
Subject: bug in sample (PR#305)- apologies
In-Reply-To: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Nov 01, 1999 at 10:58:42PM +0100
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
Message-ID: <19991101170315.Q13888@jimmy.harvard.edu>

Oops,
  Somehow I'm not connecting with my mailer properly today...

  What I wanted to point out was the lack of a warning there and the
  following:

> y<-sample(3)
> y
[1] 2 3 1
> v<-as.factor(y)
> is.numeric(v)
[1] TRUE

  Whereas in Splus:

>  y<-sample(3)
>  v<-as.factor(y)
> is.numeric(v)
[1] F

  Did I miss a discussion of this (I would prefer if is.numeric was
false for factors).

 robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:11:09 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 01 Nov 1999 16:11:09 -0600
Subject: problem with "[[<-"
Message-ID: <qxpzowx3ls2.fsf@ludwig.stat.wisc.edu>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:16:29 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Mon, 1 Nov 1999 23:16:29 +0100 (MET)
Subject: problem with "[[<-" (PR#306)
Message-ID: <199911012216.XAA01868@pubhealth.ku.dk>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov  2 09:47:20 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Nov 1999 10:47:20 +0100 (MET)
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: <19991101170315.Q13888@jimmy.harvard.edu>
References: <199911012133.WAA01606@pubhealth.ku.dk>
 <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
 <19991101170315.Q13888@jimmy.harvard.edu>
Message-ID: <14366.45864.342308.408958@gargle.gargle.HOWL>

Before turning this into a new bug report (not connected to sample() at all):
{ factor() behavior redesigning must be done carefully... }
Some detective work reveals

R versions from 0.50 to 0.61.3  all give

  is.numeric(gl(3,5,15)) 
			 |-> FALSE

Since R version 0.62.1 (June 15, 1998),
the above gives TRUE.
  
The NEWS for 0.62[.1] has

    o	All internal mechanisms to support factors and data.frames have
	been removed.  These are now entirely supported by interpreted
	code!  `is.unordered' has been eliminated.  Thanks to John
	Chambers for allowing the distribution of his StatLib code.

i.e., they change occurded when we dropped the internal factor type...

--

Yes, my gut feeling also says that the current behavior is wrong...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Nov  2 10:04:20 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 2 Nov 1999 11:04:20 +0100 (CET)
Subject: package description
In-Reply-To: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
Message-ID: <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 1 Nov 1999 16:44:37 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Mon, 01 Nov 1999 11:26:13 -0500
>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
>> To: r-devel <r-devel@stat.math.ethz.ch>
>> Subject: package description
>> 
>> It would be nice in the building of help for packages if there were some
>> mechanism to provide a few paragraphs of general description for the
>> package. (If this is already there I've missed it.) In the html help it
>> would be possible to do this by looking for some special file (e.g.
>> "General_Description") in the man directory and putting a link to that
>> at the top of 00Index.html, but I don't now if this approach would work
>> with other help formats.

PBR> It will not, not even for the html format as 00Index.html is
PBR> auto-generated by R INSTALL.  There is nothing to prevent there being a
PBR> Rd file containing the description and some suitable \name or \alias
PBR> (package:foo, for example).  This could be formalized, for example by a
PBR> special name (`Description') being placed first in the list.

PBR> That is my understanding of the purpose of library(help=foo) in the S
PBR> world, but it seems to be used rarely within R packages. That is, the
PBR> file INDEX could contain more than just the list of public functions.

we can put the contents of the DESCRIPTION file on top of 00Index.html
and cat both DESCRIPTION and 00Index for library(help=foo). Would this
do what you want?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:15:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:15:54 +0100
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: Martin Maechler's message of "Tue, 2 Nov 1999 10:47:20 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk> <19991101170315.Q13888@jimmy.harvard.edu> <14366.45864.342308.408958@gargle.gargle.HOWL>
Message-ID: <x2hfj5kxlx.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Before turning this into a new bug report (not connected to sample() at all):
> { factor() behavior redesigning must be done carefully... }
> Some detective work reveals
> 
> R versions from 0.50 to 0.61.3  all give
> 
>   is.numeric(gl(3,5,15)) 
> 			 |-> FALSE
> 
> Since R version 0.62.1 (June 15, 1998),
> the above gives TRUE.
>   
> The NEWS for 0.62[.1] has
> 
>     o	All internal mechanisms to support factors and data.frames have
> 	been removed.  These are now entirely supported by interpreted
> 	code!  `is.unordered' has been eliminated.  Thanks to John
> 	Chambers for allowing the distribution of his StatLib code.
> 
> i.e., they change occurded when we dropped the internal factor type...
> 
> --
> 
> Yes, my gut feeling also says that the current behavior is wrong...

We did have some debate over it at some point. The interesting thing
is that Splus has:

> mode(factor(letters[1:3]))
[1] "numeric"
> is.numeric(factor(letters[1:3]))
[1] F

> x<-1:3
> class(x)<-"foo"
> is.numeric(x)
[1] T
> attr(x,"levels")<-3:1
> is.numeric(x)
[1] T
> class(x)<-"facto"
> is.numeric(x) 
[1] T
> class(x)<-"factor"
> is.numeric(x)
[1] F

...which doesn't strike me as particularly logical. I believe that we
then decided not to be bug-compatible on this issue. What are the good
reasons to behave the Splus way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:55:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:55:32 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: saikat@stat.wisc.edu's message of "Mon, 1 Nov 1999 23:16:29 +0100 (MET)"
References: <199911012216.XAA01868@pubhealth.ku.dk>
Message-ID: <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>

saikat@stat.wisc.edu writes:

> This works in 0.65.1 but not in 0.90.0.
> 
> > form <- ~ a | b
> > form[[2]][[3]] <- as.name("u")
> Error: Object "u" not found

Ow! Obviously, eval() is called once too many. Robert?

The problem is that one gets to

"[[<-"(*tmp*, 3, value = u)

and the evaluator naturally tries to evaluate u.

> I can get around this as follows
> 
> > form.1 <- form[[2]]
> > form.1[[3]] <- as.name("u")
> > form[[2]] <- form.1
> > form
> ~a | u

..or form[[2]][[3]]<-quote(quote(u)), but that one is not likely to
last through a bugfix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 14:55:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 15:55:18 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: Peter Dalgaard BSA's message of "02 Nov 1999 11:55:32 +0100"
References: <199911012216.XAA01868@pubhealth.ku.dk> <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266zlkko9.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> saikat@stat.wisc.edu writes:
> 
> > This works in 0.65.1 but not in 0.90.0.
> > 
> > > form <- ~ a | b
> > > form[[2]][[3]] <- as.name("u")
> > Error: Object "u" not found
> 
> Ow! Obviously, eval() is called once too many. Robert?

Fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov  2 15:25:33 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 02 Nov 1999 10:25:33 -0500
Subject: package description
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk> <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>
Message-ID: <381F026D.685C82B6@bank-banque-canada.ca>

>we can put the contents of the DESCRIPTION file on top of 00Index.html
>and cat both DESCRIPTION and 00Index for library(help=foo). Would this
>do what you want?

I'm thinking of a description which would be several paragraphs, so I would
rather link to it from 00Index than place all the text in 00Index above the
links to the individual help for  functions. I thought DESCRIPTION was suppose
to be a fairly short standard form with some things like version, requires,
author, licence, ..., and perhaps it would be better not to clutter it with the
kind of description I'm thinking about.

I've been playing a bit by putting my description in a file
00General_Description.Rd, which usually puts it at the top since that is fairly
high on the collating sequence. I think it would be better if there was a
standard name that is guaranteed to get a link at the top of 00Index.html. Also,
it would be nice to have a system which would work with help formats other than
html.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Nov  2 21:05:33 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 2 Nov 1999 22:05:33 +0100 (MET)
Subject: bugs in scan() (PR#307)
Message-ID: <199911022105.WAA14753@pubhealth.ku.dk>

[I originally sent this to R-bugs@stat.math.ethz.ch and it didn't
bounce, but when I received no response I thought I had better check to
see if I had the correct address.]

System: Sun Solaris 2.5.1
R: Version 0.65.1 Release (October 07, 1999)

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':

> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:

> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Tue Nov  2 21:14:35 1999
From: umehlig@uni-bremen.de (umehlig@uni-bremen.de)
Date: Tue, 2 Nov 1999 22:14:35 +0100 (MET)
Subject: R abnormal exit when plotting lm (PR#308)
Message-ID: <199911022114.WAA14796@pubhealth.ku.dk>

<<insert bug report here>>
I had a "abnormal" exit of R plotting a fitted linear model. here's
the last few lines of the R session:
-------------------------------------------------------------------
> plot(blstrhz.lm)
Hit <Return> to see next plot:
Hit <Return> to see next plot:
Hit <Return> to see next plot:
X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  53 (X_CreatePixmap)
      Value in failed request:  0x0
            Serial number of failed request:  16548
	            Current serial number in output stream:  16554

		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
			                                                                                 
-------------------------------------------------------------------
Which additional information do you need to find out whether this is
a bug?

Thanks for your attention,
Ulf Mehlig

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rmutil, package:gnlm, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 22:16:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 23:16:05 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: umehlig@uni-bremen.de's message of "Tue, 2 Nov 1999 22:14:35 +0100 (MET)"
References: <199911022114.WAA14796@pubhealth.ku.dk>
Message-ID: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>

umehlig@uni-bremen.de writes:

> <<insert bug report here>>
> I had a "abnormal" exit of R plotting a fitted linear model. here's
> the last few lines of the R session:
> -------------------------------------------------------------------
> > plot(blstrhz.lm)
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> X Error of failed request:  BadValue (integer parameter out of range for operation)
>   Major opcode of failed request:  53 (X_CreatePixmap)
>       Value in failed request:  0x0
>             Serial number of failed request:  16548
> 	            Current serial number in output stream:  16554
> 
> 		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
> 			                                                                                 
> -------------------------------------------------------------------
> Which additional information do you need to find out whether this is
> a bug?

None. It's a bug...

However, to have a chance of fixing it (and knowing whether it got
fixed!), we'd need to either have instructions to reproduce the crash,
or at the very least detailed information on where things went wrong.
Can you make it happen again when running under a debugger?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hdreau@cybercable.fr  Tue Nov  2 23:04:47 1999
From: hdreau@cybercable.fr (hdreau@cybercable.fr)
Date: Wed, 3 Nov 1999 00:04:47 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <199911022304.AAA15279@pubhealth.ku.dk>

Full_Name: Hervé Dréau
Version: not  applicable
OS: not  applicable
Submission from: (NULL) (212.198.234.254)


Here's the listing of difference in version and existence between the PACKAGES
file found in the contrib directory and the content of the directory.
This cause a problem with the automatic install (and upgrade) of packages 

NISTnls
0.9-1 
NISTnls_0.9-2.tar.gz

bats not found in /R/src/contrib

VR_5.3pl037-2.tar.gz not found in PACKAGES

coda 
0.4-5 
coda_0.4-7.tar.gz 

Package: mclust
1.0-1 
mclust_1.1-1.tar.gz

nnet not found in /R/src/contrib
ppr not found in /R/src/contrib

ratetables_1.0-2.tar.gz not found in PACKAGES

rmtools not found in /R/src/contrib

 rpart
1.0-6  rpart_1.0-7.tar.gz

sfb not found in /R/src/contrib
spatial not found in /R/src/contrib

splines
2.0-3 splines_2.0-6.tar.gz

survival4
1.1-0 survival4_1.4-0.tar.gz

Best regard 
Hervé Dréau

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov  3 07:56:06 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Nov 1999 08:56:06 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib (PR#310)
Message-ID: <199911030756.IAA16843@pubhealth.ku.dk>

Yesterday I asked privately which mirror's PACKAGES file this was after an
earlier post, as I could not (and still cannot) get to Vienna. But AFAIK

rpart's entry had been updated after I reported that one
rmtools is not on CRAN
bats is in devel, not in the contrib directory
ppr is in Old, not in the contrib directory
nnet and spatial are nowhere (as part of VR), and VR is not a package
  but a package bundle: we know those are not yet covered by
  update.packages.

The update mechanism does depend on a consistent naming scheme, with
DESCRIPTION entires and file names matching. Fritz Leisch is working on a
checker, but we do rely on authors at present. For example. the DESCRIPTION
file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!


On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:

> Full_Name: Hervé Dréau
> Version: not  applicable
> OS: not  applicable

Sorry, those _are_ applicable. The Unix and Windows versions of
update.packages are quite distinct. I have assumed Unix was meant.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Herve Dreau <hdreau@cybercable.fr>  Wed Nov  3 08:37:04 1999
From: Herve Dreau <hdreau@cybercable.fr> (Herve Dreau)
Date: Wed, 3 Nov 1999 09:37:04 +0100
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <19991103093704.A24803@raoul.fr>



Le mer, 03 nov 1999 08:53:58 Prof Brian D Ripleya écrit :
> Yesterday I asked privately which mirror's PACKAGES file this was after an
> earlier post, as I could not (and still cannot) get to Vienna. But AFAIK
> 

Sorry but I have had replied to you privatelly yesterday.

In this lost (?) mail i said :

 Thank you for your response.
 I use the master CRAN server, I notice some network weekness, but i think 
 if it is the master server all other are just mirror, and the PACKAGES file
 may be  the most recent in the master server.
 After your mail, i compare the content of the PACKAGES file in master CRAN
 and in some mirrors and i found that the tuwien one is the more accurate.
 
 The mirror in italy is particulary old (timestamp on the PACKAGES file is near one
 year old).
 The PACKAGES file in ethz.ch is nearly the same as the one in tuwien (minus the new (?)
  norm package).
 
 Her's a little (and quickly) summary of the discrepancy between the file PACKAGES and 
 the content  of the contrib directory in tuwien

... inserted the report send to r-bug


> rpart's entry had been updated after I reported that one
> rmtools is not on CRAN
> bats is in devel, not in the contrib directory
> ppr is in Old, not in the contrib directory
> nnet and spatial are nowhere (as part of VR), and VR is not a package
>   but a package bundle: we know those are not yet covered by
>   update.packages.

Perhaps but i think all the entry in PACKAGES are listed by 
CRAN.packages()
could not verify in this time : the url at tuwien is unreachable
but using another mirror :
CRAN.packages(CRAN="http://lib.stat.cmu.edu/R/CRAN")
[10,] "bats"                                 "0.1-2" 
[49,] "rmtools"                              "0.2"   
[43,] "ppr"                                  "1.1-2" 
[54,] "spatial"                              "5.3pl035-1"
[38,] "nnet"                                 "5.3pl035-1"
[43,] "ppr"                                  "1.1-2"     

It's only confusing to list packages that are unavailable and cause "false"
error message.

> 
> The update mechanism does depend on a consistent naming scheme, with
> DESCRIPTION entires and file names matching. Fritz Leisch is working on a
> checker, but we do rely on authors at present. For example. the DESCRIPTION
> file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!
> 
> 
> On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:
> 
> > Full_Name: Hervé Dréau
> > Version: not  applicable
> > OS: not  applicable
> 
> Sorry, those _are_ applicable. The Unix and Windows versions of
> update.packages are quite distinct. I have assumed Unix was meant.

Perhaps but it's not related to my version of R it's only a comparison
between the content of a file and the listing of a directory.
If that matter :
OS linux Redhat 6.1
R 0.65.1

Best regards

Hervé Dréau



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  3 09:28:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 Nov 1999 10:28:53 +0100 (MET)
Subject: remark on the difference between R-bugs and R-devel
In-Reply-To: <19991103093704.A24803@raoul.fr>
References: <19991103093704.A24803@raoul.fr>
Message-ID: <14368.85.106153.940547@gargle.gargle.HOWL>

Dear Hervé,
(and everyone else helping us!)

thank you for all your bug reports,..

One thing: 
 If you reply to messages with a (PR#nnn) in the subject,
 it would be most useful if you sent them (CC or TO) to R-bugs rather than
 R-devel. 
 Only then do they enter the WWW R bugs archive as followup messages to the
 bug #nnn.  

R-bugs "forwards" all messages to R-devel. So, one doesn't need to give
both R-bugs and R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  3 15:56:25 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 3 Nov 1999 16:56:25 +0100 (MET)
Subject: Dimnamenames (PR#257)
Message-ID: <199911031556.QAA23767@pubhealth.ku.dk>


I've just started digging into Andreas's old report:

> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
>  dimnames(a[,,1]) # losing component names
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"

Now, this would be fairly easily fixed (I think) which would also make
it compatible with S3. But what should one do about a[,1,1]?  This
would generally be a vector with a .Names attribute, onto which there
is no way of attaching a name. The obvious idea would be to force it
to be a 1d array instead, i.e.

structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 

rather than

structure(c(0,0), .Names = c("1","2"))

Does this sound safe? Generally, such 1-d arrays behave like vectors,
and noone has reported trouble with the fact that the result of table
can be a 1d array. From some viewpoints it seems odd to have different
behaviour depending on whether something is named or not, but it
*would* be nice to have the label retained on rows extracted from a
table...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Wed Nov  3 16:33:19 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Wed, 3 Nov 1999 16:33:19 +0000 (GMT)
Subject: Dimnamenames (PR#257)
In-Reply-To: <199911031556.QAA23767@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991103161959.11496G-100000@laplace>

Hi Peter,

On Wed, 3 Nov 1999 p.dalgaard@biostat.ku.dk wrote:

> Now, this would be fairly easily fixed (I think) which would also make
> it compatible with S3. But what should one do about a[,1,1]?  This
> would generally be a vector with a .Names attribute, onto which there
> is no way of attaching a name. The obvious idea would be to force it
> to be a 1d array instead, i.e.
> 
> structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 
> 
> rather than
> 
> structure(c(0,0), .Names = c("1","2"))
> 
> Does this sound safe?

I'm not sure.  Aren't you duplicating the functionality provided by the
drop flag?  After all, if the names were important then presumably the
subscription would have been a[,1,1, drop=FALSE] anyhow.  I like the
concept of a vector in this situation and suspect that in my lazy code I
have stuff that checks for a dim attribute whan checking arguments to
functions, which would be a problem.  Perhaps it would be better to pass
the name as a different attribute, eg

structure(c(0, 0), .Names = c("1","2"), .dnm = "hansi")

But it would be great to have the names fixed!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Thu Nov  4 06:46:52 1999
From: umehlig@uni-bremen.de (Ulf Mehlig)
Date: Thu, 4 Nov 1999 07:46:52 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
 (p.dalgaard@biostat.ku.dk)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
Message-ID: <199911040646.HAA02246@pandora3.localnet>


 > None. It's a bug...
 > 
 > However, to have a chance of fixing it (and knowing whether it got
 > fixed!), we'd need to either have instructions to reproduce the crash,
 > or at the very least detailed information on where things went wrong.
 > Can you make it happen again when running under a debugger?

Unfortunately, I'm a little bit short of time now, but after the 20th
I will give a try! (I still have a hardcopy of the session, and I will
try to reproduce it step by step. By "running under a debugger" you
mean "R -d gdb", I suppose?).

Many thanks for your attention,
Ulf

-- 
======================================================================
Ulf Mehlig    <umehlig@zmt.uni-bremen.de>
              Center for Tropical Marine Ecology/ZMT, Bremen, Germany
----------------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Wed Nov  3 22:17:41 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Wed, 3 Nov 1999 23:17:41 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911032217.XAA25203@pubhealth.ku.dk>

If .../<pkg>/man/ contains a filename beginning with [, such as
[.datetimes, Rdconvlib.pl cannot convert that help file into latex at
INSTALL time.  [Using --no-latex is a workaround.]

The error given is:

# R INSTALL ssCatalogues
:
 help
 >>> Building/Updating help pages for package `ssCatalogues'
     Formats: text html latex example
/^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
1322, <rdfile> chunk 36.
:

Unfortunately the script stops at that point, so none of the following
help files are installed.

Ray Brownrigg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 08:20:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 09:20:51 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911040820.JAA27177@pubhealth.ku.dk>

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:

    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into latex at
    Ray> INSTALL time.  [Using --no-latex is a workaround.]

    Ray> The error given is:

    Ray> # R INSTALL ssCatalogues
    Ray> :
    Ray> help
    >>>> Building/Updating help pages for package `ssCatalogues'
    Ray> Formats: text html latex example
    Ray> /^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
    Ray> 1322, <rdfile> chunk 36.
    Ray> :

    Ray> Unfortunately the script stops at that point, so none of the following
    Ray> help files are installed.

Well, the bug is more that of documentation of what is allowed for *.Rd
file names.

For portability, we even had to give up having e.g., 
both
	Alias.Rd 
and	alias.Rd

I'd say the rule must contain

>>>> |  For portability reasons, R source files must start with  |
>>>> |     [a-zA-Z]						 |
>>>> |  and should be unique within a package if lowercased.	 |

Maybe we even have to consider more restrictions..

Should this be put into the 
       FAQ,  ?library (...base/man/library.Rd), and/or
       doc/manual/writing-Rd.tex
?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Nov  4 09:09:05 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 4 Nov 1999 10:09:05 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040909.KAA27898@pubhealth.ku.dk>

I get crashes when I call R without any arguments and having no
environment variables R_PROFILE and RPROFILE.

The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
is called with a null ptr as filename (because this is the outcome 
of getenv()).

Although most compilers seem to interpret this as "file not found",
this is an undefined behavior concerning to all C standards I could get
hold of.

A request in comp.lang.c gave the following response:
...
Your program should crash. If you might get a NULL pointer as
a filename, you should have a conditional statement to handle
that case.
...

So I would suggest to test for the return value of getenv, before 
using it as filename in fopen.

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Nov  4 09:50:55 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 4 Nov 1999 10:50:55 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040950.KAA28506@pubhealth.ku.dk>

On Thu, Nov 04, 1999 at 10:09:05AM +0100, hoffmann@ehmgs2.et.tu-dresden.de wrote:
> 
> The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
> is called with a null ptr as filename (because this is the outcome 
> of getenv()).
> 
> Although most compilers seem to interpret this as "file not found",
> this is an undefined behavior concerning to all C standards I could get
> hold of.
> 
> A request in comp.lang.c gave the following response:
> ...
> Your program should crash. If you might get a NULL pointer as
> a filename, you should have a conditional statement to handle
> that case.
> ...
>

The same happens also under Windows where, for this reason, 
'R_fopen' is defined as
 
FILE *R_fopen(const char *filename, const char *mode)
{
    if (!filename)
	return NULL;
    return (fopen(filename, mode));
}

g.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 09:56:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 10:56:58 +0100
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
In-Reply-To: guido@hal.stat.unipd.it's message of "Thu, 4 Nov 1999 10:50:55 +0100 (MET)"
References: <199911040950.KAA28506@pubhealth.ku.dk>
Message-ID: <x2k8ny8tqt.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> The same happens also under Windows where, for this reason, 
> 'R_fopen' is defined as
>  
> FILE *R_fopen(const char *filename, const char *mode)
> {
>     if (!filename)
> 	return NULL;
>     return (fopen(filename, mode));
> }

..which I was just in the process of implementing for the Unix
version.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Nov  4 11:23:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:23:44 +0000 (GMT)
Subject: New codes() methods
Message-ID: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>

Hi Everyone,

Can I suggest a couple of new `codes' methods.  I know codes is a bit
dodgy (at least, according to the comments in codes.factor), but for what
it's worth I like to extract codes from data frames of factors, for which
the following two functions (which operate recursively) are helpful:

"codes.default" <-
function(x)
{
    if (is.list(x))
      lapply(x, codes)
    else
      codes(factor(x))
}

"codes.data.frame" <-
function(x)
{
    row.names <- attr(x, "row.names")
    data.frame(codes(as.list(x)), row.names = row.names)
}

#### Hence:

lvl <- ordered(c("L", "H"), c("L", "H"))
llist <- rep(list(lvl), 4)
codes(llist)			# list of codes
expand.grid(llist)		# data frame of factors
codes(expand.grid(llist))	# data frame of codes

The non-list default behaviour is for data frames that mix factors with
other stuff: the usual codes(factor(1:10)) caveat (from the help file) 
still applies, of course!  Note that using codes on an array will produce
a vector as the dim attribute is lost, eg

codes(matrix(1:12, 3, 4))	# shocking!

but although I toyed with the idea of mapping matrices to data frames in
the default function I thought in the end that this was making a
presumption about the interpretation of the rows and columns that was not
justified.  After all, you could still do

codes(as.data.frame(matrix(1:12, 3, 4)))

if the presumption *was* justified.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 11:34:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 12:34:56 +0100
Subject: New codes() methods
In-Reply-To: Jonathan Rougier's message of "Thu, 4 Nov 1999 11:23:44 +0000 (GMT)"
References: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>
Message-ID: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:


> Can I suggest a couple of new `codes' methods.  I know codes is a bit
> dodgy (at least, according to the comments in codes.factor), but for what
> it's worth I like to extract codes from data frames of factors, for which
> the following two functions (which operate recursively) are helpful:
> 
> "codes.default" <-
> function(x)
> {
>     if (is.list(x))
>       lapply(x, codes)
>     else
>       codes(factor(x))
> }
> 
> "codes.data.frame" <-
> function(x)
> {
>     row.names <- attr(x, "row.names")
>     data.frame(codes(as.list(x)), row.names = row.names)
> }

Looks quite nice. Two things have me worried, though:

1) do we really want to convert anything to factors? (try factor(rnorm(10000)))
2) if a dataframe contains a matrix, it gets converted to something
   with incompatible lengths
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Thu Nov  4 11:48:06 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:48:06 +0000 (GMT)
Subject: New codes() methods
In-Reply-To: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.991104114005.16942B-100000@laplace>

Hi Peter,

On 4 Nov 1999, Peter Dalgaard BSA wrote:

> Looks quite nice. Two things have me worried, though:
> 
> 1) do we really want to convert anything to factors? (try factor(rnorm(10000)))

I agree that this would be undesirable, but not necessarily wrong!

> 2) if a dataframe contains a matrix, it gets converted to something
>    with incompatible lengths

This was part of my motivation for including a matrix case in the default
behaviour, but in the end I thought that the error message might be
justified!  But the alternative would be

    ...
    else if (is.matrix(x))
      apply(t(x), 1, codes)
    else
      codes(factor(x))

but, as I mentioned before, this makes an unwarranted assumption about the
interpretation of the rows and columns of x.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 15:49:21 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 04 Nov 1999 09:49:21 -0600
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 4 Nov 1999 09:20:51 +0100 (MET)"
References: <199911040820.JAA27177@pubhealth.ku.dk>
Message-ID: <qxpr9i6ntoe.fsf@ludwig.stat.wisc.edu>

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
  Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
  Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
  Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

  maechler> Well, the bug is more that of documentation of what is
  maechler> allowed for *.Rd file names.

I do not think that the problem is with the file names here. It occurs
in line 1335 of Rdconvlib.pl (0.90.0 development version). You can get
around it by escaping the spacial characters in $blocks{"name"}.

The following patch does just that.

============================================================
--- Rdconvlib.pl Thu Nov  4 07:45:11 1999
+++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
@@ -1332,7 +1332,7 @@
       print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
        if $debug;
       printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
-       unless /^$blocks{"name"}$/;
+       unless /^\Q$blocks{"name"}$/;
     }
     foreach (@keywords) {
       printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Nov  4 16:50:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 4 Nov 1999 17:50:14 +0100 (CET)
Subject: Version numbers of CRAN packages
Message-ID: <14369.47430.288003.211178@galadriel.ci.tuwien.ac.at>

Hi,

For all future submissions to CRAN only the version number in the
DESCRIPTION file is used, i.e., I have changed my scripts to
automatically rename the package accordingly! I hope this ensures some
consistency until I have a more rigorous package checker.

Best,
Fritz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 17:20:46 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 18:20:46 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041720.SAA04538@pubhealth.ku.dk>

>>>>> "Saikat" == Saikat DebRoy <saikat@stat.wisc.edu> writes:

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:
>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
    Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

    maechler> Well, the bug is more that of documentation of what is
    maechler> allowed for *.Rd file names.

    Saikat> I do not think that the problem is with the file names here. It
    Saikat> occurs in line 1335 of Rdconvlib.pl (0.90.0 development
    Saikat> version). You can get around it by escaping the spacial
    Saikat> characters in $blocks{"name"}.

I see, sounds plausible.  We don't have  \name{..}s  with funny chars in
them till now (even though we do have \alias{}es).


    Saikat> The following patch does just that.

    Saikat> ============================================================
    Saikat> --- Rdconvlib.pl Thu Nov  4 07:45:11 1999
    Saikat> +++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
    Saikat> @@ -1332,7 +1332,7 @@
    Saikat> print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
    Saikat> if $debug;
    Saikat> printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
    Saikat> -       unless /^$blocks{"name"}$/;
    Saikat> +       unless /^\Q$blocks{"name"}$/;
    Saikat> }
    Saikat> foreach (@keywords) {
    Saikat> printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}

Good idea to use Perl's \Q feature,
but my  perl online help says

     \Q		quote regexp metacharacters till \E
					    -------
so, you probably should also add a delimiting \E,  shouldn't you ?

Thanks again, Saikat !

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 17:41:18 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 4 Nov 1999 18:41:18 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041741.SAA04610@pubhealth.ku.dk>

>>>>> "Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

  Martin> Good idea to use Perl's \Q feature, but my perl online help
  Martin> says

  Martin>      \Q quote regexp metacharacters till \E
  Martin>                                     -------
  Martin> so, you probably should also add a delimiting \E, shouldn't you ?

Yes - you are correct. So that line should be changed to

        unless /^\Q$blocks{"name"}\E$/;

Thanks for spotting that.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Fri Nov  5 18:10:24 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Fri, 5 Nov 1999 19:10:24 +0100 (MET)
Subject: rpart problem (PR#313)
Message-ID: <199911051810.TAA14930@pubhealth.ku.dk>

* * * Just the Facts * * *
call to rpart() with a factor response gives
the error message:

"Error: first argument is array, but not matrix."

* * * Example Code * * * 
==============================================
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(rpart)
> x _ 1:50
> y _ as.factor(rbinom(50,1,.5))
> fit _ rpart(y~x,method="class")
Error: first argument is array, but not matrix.
> 

* * * Version Information * * *
==============================================

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rpart, Autoloads, package:base


* * * Unsolicited Hypothesis * * * 

In rpart(), I believe this line causes the error message:

        temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
nobs/init$counts)

Thanks for your attention.

David


David M. Potter
Mathematical & Statistical Sciences
Pfizer Central Research
PO Box 8003/832
Groton, CT 06340-8003
Tel 860-715-1769 ; Fax 860-715-5445
potterdm@groton.pfizer.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  5 19:03:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 Nov 1999 19:03:17 +0000 (GMT)
Subject: rpart problem (PR#313)
In-Reply-To: <199911051810.TAA14930@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911051900140.14373-100000@auk.stats>

On Fri, 5 Nov 1999 david_m_potter@groton.pfizer.com wrote:

> * * * Just the Facts * * *
> call to rpart() with a factor response gives
> the error message:
> 
> "Error: first argument is array, but not matrix."

This is an error in diag() for 0.65.1, only. It will be fixed in the next
release. (It was discussed on r-devel a few days ago.)

> In rpart(), I believe this line causes the error message:
> 
>         temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
> nobs/init$counts)

Yes. put an as.vector inside the argument to diag, for now, or fix diag to
be

function (x = 1, nrow, ncol = n) 
{
    if (is.matrix(x) && nargs() == 1) {
        if ((m <- min(dim(x))) == 0) 
            return(numeric(0))
        y <- c(x)[1 + 0:(m - 1) * (dim(x)[1] + 1)]
        nms <- dimnames(x)
        if (is.list(nms) && !any(sapply(nms, is.null)) && all((nm <-nms[[1]][1:m]) == 
            nms[[2]][1:m])) 
            names(y) <- nm
        return(y)
    }
    if (is.array(x) && length(dim(x)) != 1) 
#                   ^^^^^^^^^^^^^^^^^^^^^^

        stop("first argument is array, but not matrix.")
    if (missing(x)) 
        n <- nrow
    else if (length(x) == 1 && missing(nrow) && missing(ncol)) {
        n <- as.integer(x)
        x <- 1
    }
    else n <- length(x)
    if (!missing(nrow)) 
        n <- nrow
    p <- ncol
    y <- array(0, c(n, p))
    if ((m <- min(n, p)) > 0) 
        y[1 + 0:(m - 1) * (n + 1)] <- x
    y
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911070615.HAA04998@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
* PR# 295 *
Subject: free heap < 0
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:36:35 -0700 (PDT)
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
* PR# 297 *
Subject: explicit weights=NULL fails in glm,lm
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 25 Oct 1999 10:34:28 -0700 (PDT)
* PR# 298 *
Subject: dodgy list operation
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Tue, 26 Oct 1999 14:46:11 +0100 (BST)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
* PR# 300 *
Subject: Plotting bug in R
From: Stephen Turner <S.R.E.Turner@statslab.cam.ac.uk>
Date: Wed, 27 Oct 1999 17:31:01 +0100 (GMT)
* PR# 301 *
Subject: expand.grid()
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Thu, 28 Oct 1999 17:23:02 +0100 (BST)
* PR# 302 *
Subject: modreg buggy: uninitialized variable in sinerp.f
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Sat, 30 Oct 99 13:24:14 +0100
* PR# 303 *
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF))
From: ntakebay@bio.indiana.edu
Date: Sun, 31 Oct 1999 01:29:05 +0200 (MET DST)
* PR# 304 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Mon, 1 Nov 1999 12:20:33 +1300 (NZDT)
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
* PR# 306 *
Subject: problem with "[[<-"
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 01 Nov 1999 16:11:09 -0600
* PR# 307 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 3 Nov 1999 10:05:26 +1300 (NZDT)
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
* PR# 310 *
Subject: Re: discrepancy between PACKAGES file and contents of the contrib
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 3 Nov 1999 07:53:58 +0000 (GMT)
* PR# 311 *
Subject: bug in Rdconvlib.pl converting to latex
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Thu, 4 Nov 1999 11:16:49 +1300 (NZDT)
* PR# 312 *
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen
From: Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de>
Date: Thu, 4 Nov 1999 10:08:45 +0100 (MET)
* PR# 313 *
Subject: rpart problem
From: "Potter, David M" <david_m_potter@groton.pfizer.com>
Date: Fri, 5 Nov 1999 13:09:50 -0500 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 11:52:37 1999
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 7 Nov 1999 11:52:37 +0000 (GMT)
Subject: Rdefines.h
In-Reply-To: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>
Message-ID: <Pine.GSO.4.05.9911071143380.5037-100000@toucan.stats>

On Wed, 27 Oct 1999, Berwin Turlach wrote:

> may I request the following two changes to Rdefines.h (R 0.65.1)?
> 
> 1.) Change line 106 from
>         #define Free(p)        R_chk_free( (void *)(p) )
> to
>         #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL
> 
> 2.)  Add after line 79:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> a new line 80:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> #define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> The rationale behind both changes is to become more compatible with
> S.h from S-PLUS.  

Following discussions with Berwin I have adopted these (with a few extra
parentheses) for the R-devel version, although (Warning!) we discovered
that Free in S-PLUS 5.1 does not NULL the pointer, although S-PLUS 3.x
and 4.x do.  So truly portable code should not rely on this.

The exact nature of S.h is under re-consideration, as there are
considerable differences between S versions. My inclination is to use the 
best of S3 and S4 and provide definitions of the new macros that can be
used in S3 too, but undoubtedly back-compatibility will rear its head.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Sun Nov  7 16:56:47 1999
From: hammour@msn.com (hammour@msn.com)
Date: Sun, 7 Nov 1999 17:56:47 +0100 (MET)
Subject: arima0() (PR#314)
Message-ID: <199911071656.RAA19948@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: rw0651
OS: windows 95
Submission from: (NULL) (63.23.128.44)


Although I know that "ts package" is preliminary, I wanted to compare the
results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
standard errors of coefficients from R and real figures from SPSS. I changed
"delta" in R to match that used by SPSS, I received results with no NaNs but
different from those from SPSS specially in MA coefficients. They came out
negative numbers while positive from SPSS. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 18:07:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 7 Nov 1999 18:07:47 +0000 (GMT Standard Time)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.9911071753460.316-100000@tern.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but

Can you please submit a full and reproducible example, as the FAQ suggests?

Does SPSS in fact do maximum likelihood estimation?  Last time I looked it
used an approximation. (You do need to be careful: for example S-PLUS's
arima.mle does not do MLE, despite its name.)  One isssue here is that most
packages do not ensure that the returned coefficients are valid for a
stationary invertible process: arima0 (by default) does.

The standard errors are part of the `preliminary' bit: they are waiting for
a better optimizer.  The `0' on arima0 indicates that it is intended to be
replaced fairly soon.

> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

That is a matter of definition. The signs of each of the AR and MA
coefficients are often swapped, so I would not be at all surprised that
SPSS is different. R is intended to be consistent with S-PLUS (as
documented in Venables & Ripley, at least).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov  8 07:51:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Nov 1999 07:51:47 +0000 (GMT)
Subject: [R] loading precedence in requires()
In-Reply-To: <199911080033.NAA23172@aqua.mcs.vuw.ac.nz>
Message-ID: <Pine.GSO.4.05.9911080727320.7214-100000@auk.stats>

[ Moved to R-devel as it is a think this is a development issue. ]

On Mon, 8 Nov 1999, Ray Brownrigg wrote:

> It appears that requires(), when it appears in the .First.lib of a
> package, will load the required package *after* the package requiring
> it, i.e. the 'required' package appears earlier in the search list than
> the package requiring it.
> 
> This will cause problems if a package (deliberately) masks any of the
> functions in the required package. I.e. the expected masking does not
> occur.
> 
> Apart from expecting the end-user to issue a library() call for the
> required package before the requiring package, are there any
> workarounds for this, or is such deliberate masking considered to be a
> no-no?

At present in R (unlike S) packages are effectively thought of as equal,
and searched in inverse order of loading. Unlike S, library (and hence
require) has no way to set the position in the ordering, nor can a library
`database' be re-attached in a different place in the order by attach().
(The latter is a common trick in .First.lib in S.)

I have two ideas for now:

(a) Write a package foo containing just a .First.lib with

require(bar)
require(foo2)

and put the real code in foo2.

(b) in the .First.lib for package foo, use something like

.First.lib <- function (...) 
{
    s <- search()
    require(bar)
    if (length(search()) > length(s)) {
        detach("package:foo")
        library(foo)
    }
}

In general such masking (presumably of a system library or why not enhance
bar?) is confusing and leads to support difficulties. It is a headache for
S-PLUS where Harrell's Design and Hmisc mask many system functions, and one
gets used to asking: "are you using Design or Hmisc?" if there are reports
of strange behaviour in one's own code.  My view has become `only mask if
you wish to correct something, and try to ge the original changed'.

However, question to R-devel: should we add to library and require
argument(s) to say where they should go in the search list?  S3 has
first=T (and defaults to last), and S-PLUS 5 has both first=T and pos
(which can be a number or database, and the library is inserted just before
the one specified, and always before main).  The most flexible scheme might
be to have both before= and after= for names or numbers.

Ross is planning changes in this area that may make the re-attach idea
feasible in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  9 08:11:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Nov 1999 08:11:17 +0000 (GMT)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911090759220.26939-100000@auk.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but
> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

Mr Hammour sent me the data privately. Running

arima0(y0, order=c(2,1,2), delta=-1)

I get

Call:
arima0(x = y0, order = c(2, 1, 2), delta = -1)

Coefficients:
    ar1      ar2      ma1      ma2  
-0.7686   0.1519  -0.1143  -0.8857  

Approx standard errors:
   ar1     ar2     ma1     ma2  
0.1917  0.0912  0.1765  0.1762  

sigma^2 estimated as 109859:  log likelihood = -890.65,  aic = 1789.3

[Using the default delta of 0.01 in this case gives inaccurate results:
but it is a very badly determined model.]

SPSS had

Number of residuals  123
Standard error       337.30778
Log likelihood       -890.6952
AIC                  1789.3904
SBC                  1800.6391

           Variables in the Model:

                B         SEB      T-RATIO   APPROX. PROB.

AR1    -.78319350   .16013797   -4.8907421       .00000318
AR2     .16191191   .09435030    1.7160719       .08875107
MA1     .07993592   .54769107     .1459508       .88420721
MA2     .91762463   .49337224    1.8599032       .06536851


>Warning # 16567.  Command name: ARIMA
>Our tests have determined that the estimated model lies close to the
>boundary of the invertibility region.  Although the moving average
>parameters are probably correctly estimated, their standard errors and
>covariances should be considered suspect.

So (up to the MA sign change, a matter of definition) the estimates
differ by 1 se or so. However, SPSS has given a warning, and the
log-likelihoods are similar but R's is larger. This suggests that

- There is no practical difference between the results, and

- R's optimizer has done a better job.

- R works on transformed scale and so has more chance of getting se's
  close to the boundary (but the error distribution will be very far from
  normal).

- This is not a good model for the data.

If there is a bug at all here, it would appear to be in SPSS.

Moral: take warnings seriously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Nov 10 01:32:54 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 10 Nov 1999 02:32:54 +0100 (MET)
Subject: R.bug.report (PR#315)
Message-ID: <199911100132.CAA14250@pubhealth.ku.dk>

Again I would like to express my deepest appreciation to all those
working so selflessly on the development of R for us all to use it 
freely (and it is such a joy to use!)

Rashid Nassar


== Possible bug:

1.
boxplot()
This is an old behavior that I had reported before, but as it is still
there, it may not ba a bug (although it looks like one to me).  "qfcut"
is numeric, "st" is a factor:

> plot(qfcut~st)      # works
> plot(st,qfcut)      #	works
> boxplot(qfcut~st)   # works
> boxplot(st,qfcut)   # doesn't work
Error: "range" not meaningful for factors

== The following are minor typos, etc. in help screens, <<error>> [[suggested]]:

2.
?boxplot.default
   names: group labels which <<while>> [[will]] be printed under each 
               boxplot.

3.                              
?par
   adj: The value of `adj' determines the way in which
             text strings are justified.  A value of `0' pro-
             duces <<right>> left-justified text, ...

4.    
?abline
 (end of 1st paragraph of Description):
        .... through the origin, otherwise, the first 2 val-
        ues are taken to be the <<slope and intercept>> [[intercept and
        slope]]. (since the first parameter is interpreted as the intercept).

== The following are suggestions offered with a great deal of
   (appropriate) diffidence:

5.    
?tapply (also perhaps ?lapply, ?sapply, ?apply)
   I think it would be useful to add `aggregate' to the "See Also:" list.
   Without V&R I would not have known about aggregate.

6.
?persp
  d: a value which can be used to vary the strength of
             the perspective transformation.  Values of `d'
             greater than 1 will lessen the perspective effect
             and values less and 1 will exaggerate it.
  
     I think it may be useful if the value of d  for no perspective 
             effect is also given (looks to be d=10?)

7.
It is great that `boxplot' has a data=  parameter; can `plot' (as in
`plot.default') have one too?  (no answer needed-- I know if not, there 
is a good reason for it :)


Thanks again.  -Rashid

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, qfc, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 10:01:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 11:01:04 +0100
Subject: R.bug.report (PR#315)
In-Reply-To: rnassar@duke.edu's message of "Wed, 10 Nov 1999 02:32:54 +0100 (MET)"
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <x2wvrq64yn.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> == Possible bug:
> 
> 1.
...> 
> 2.
...
> 3.                              
...> 
> 4.    
...
> 7.
> 

Rashid, thank you for your contributions, but this kind of report is
impossible to process in a rational way. There is no single category
into which it fits (although I've put a "TooMuchAtOnce" category in
the repository), the subject field gives no clue to the character of
the bug, and every time one pulls it out, one has to recheck every
item to see whether it has been fixed or not, and it will live in the
repository as long as there are remaining issues . Could you please
resubmit as several independent reports?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 10:41:30 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 11:41:30 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101041.LAA18434@pubhealth.ku.dk>

R 0.65.1 (and R-devel 09/11/99)

> z <- data.frame(a=1:3)
> b <- rep(NA, 3)
> mode(b)
[1] "logical"
# how many of you expected that? I had forgotten!
> zz <- cbind(z, b)
> zz
  a  b
1 1 NA
2 2 NA
3 3 NA
> class(zz$b)
[1] "factor"

whereas in S it is NULL and zz$b is of mode "numeric".

The same thing happens with data.frame

zz <- data.frame(a, b)

gives zz$b as a factor in R and numeric in S.

I don't think this is a desirable difference, at least with all NAs!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 11:14:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 12:14:33 +0100
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 10 Nov 1999 11:41:30 +0100 (MET)"
References: <199911101041.LAA18434@pubhealth.ku.dk>
Message-ID: <x2n1sm61k6.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> R 0.65.1 (and R-devel 09/11/99)
> 
> > z <- data.frame(a=1:3)
> > b <- rep(NA, 3)
> > mode(b)
> [1] "logical"
> # how many of you expected that? I had forgotten!
> > zz <- cbind(z, b)
> > zz
>   a  b
> 1 1 NA
> 2 2 NA
> 3 3 NA
> > class(zz$b)
> [1] "factor"
> 
> whereas in S it is NULL and zz$b is of mode "numeric".
> 
> The same thing happens with data.frame
> 
> zz <- data.frame(a, b)
> 
> gives zz$b as a factor in R and numeric in S.
> 
> I don't think this is a desirable difference, at least with all NAs!

Hmmm. Notice that in *both* R and S3,

> class(data.frame(x=TRUE)$x)
[1] "factor"

And in both dialects, NA is a logical constant. So S3 is doing a
special exception for all-NA logical vectors. Of course, we could just
clone that...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 11:59:43 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 12:59:43 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101159.MAA19623@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 10 Nov 1999 12:14:33 +0100
> 
> ripley@stats.ox.ac.uk writes:
> 
> > R 0.65.1 (and R-devel 09/11/99)
> > 
> > > z <- data.frame(a=1:3)
> > > b <- rep(NA, 3)
> > > mode(b)
> > [1] "logical"
> > # how many of you expected that? I had forgotten!
> > > zz <- cbind(z, b)
> > > zz
> >   a  b
> > 1 1 NA
> > 2 2 NA
> > 3 3 NA
> > > class(zz$b)
> > [1] "factor"
> > 
> > whereas in S it is NULL and zz$b is of mode "numeric".
> > 
> > The same thing happens with data.frame
> > 
> > zz <- data.frame(a, b)
> > 
> > gives zz$b as a factor in R and numeric in S.
> > 
> > I don't think this is a desirable difference, at least with all NAs!
> 
> Hmmm. Notice that in *both* R and S3,
> 
> > class(data.frame(x=TRUE)$x)
> [1] "factor"
> 
> And in both dialects, NA is a logical constant. So S3 is doing a
> special exception for all-NA logical vectors. Of course, we could just
> clone that...

It isn't: I was using the S4-style data frame code in my copy of
S-PLUS 3.4 (it is needed for some recent extensions) and had not
noticed.  And S4 keeps these logical, which seems much more desirable
to me.  In both R and S it is a quirk that

z$b <- b

and 

z <- cbind(z, b)

are different, but not in S4 nor in S3+library(df)

I withdraw this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 13:19:26 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 10 Nov 1999 14:19:26 +0100 (MET)
Subject: plot() bugs (PR#317)
Message-ID: <199911101319.OAA21606@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1
OS: Linux Redhat 6.1
Submission from: (NULL) (193.62.250.209)


Try this:

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))

spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10

plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed
difference$
points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

Bugs:
1. The y-axis numbering labels are shifted down and are not centred on the
hash-marks.
BTW, weren't the labels in normal (nonrotated) orientation before this version?
I didn't have to use las before

2. This is an old bug: only the first plotted sysmbol has the correct size.
(Squares
in this example). The others are not scaled up as cex should make them.

These comments are based on inspection of the .ps form of the plot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 14:53:17 1999
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Wed, 10 Nov 1999 14:53:17 +0000 (GMT)
Subject: plot() bugs (PR#317)
In-Reply-To: <199911101319.OAA21606@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>



On Wed, 10 Nov 1999 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 65.1
> OS: Linux Redhat 6.1
> Submission from: (NULL) (193.62.250.209)
> 
The code got a bit mangled when pasting into web page

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))
 
spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10
 
plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed difference (deg/s)",ylab="d'", las=1)

points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

I have since tried mkh, but it seems to have no effect.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 10 13:58:36 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Nov 1999 14:58:36 +0100 (MET)
Subject: R.bug.report (PR#315)
In-Reply-To: <199911100132.CAA14250@pubhealth.ku.dk>
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <14377.31244.674152.34117@gargle.gargle.HOWL>

>>>>> On Wed, 10 Nov 1999 02:32:54 +0100 (MET), rnassar@duke.edu (Rashid
>>>>> Nassar) said:

    RNa> Again I would like to express my deepest appreciation to all those
    RNa> working so selflessly on the development of R for us all to use it 
    RNa> freely (and it is such a joy to use!)

    RNa> Rashid Nassar

    RNa> == Possible bug:

    RNa> 1.
    RNa> boxplot()
    RNa> This is an old behavior that I had reported before, but as it is still
    RNa> there, it may not ba a bug (although it looks like one to me).  "qfcut"
    RNa> is numeric, "st" is a factor:

    >> plot(qfcut~st)      # works
    >> plot(st,qfcut)      #	works
okay that was plot  which has  TWO arguments if not used with a formula

    >> boxplot(qfcut~st)   # works
    >> boxplot(st,qfcut)   # doesn't work
    RNa> Error: "range" not meaningful for factors

This is not a bug.
boxplot() either has a formula or "x, ..." arguments
which must be `single boxplot' components  (read  "?boxplot.default").


    RNa> == The following are minor typos, etc. in help screens, <<error>> [[suggested]]:


    RNa> 2.
    RNa> ?boxplot.default
    RNa> names: group labels which <<while>> [[will]] be printed under each 
    RNa> boxplot.
ok, done.

    RNa> 3.                              
    RNa> ?par
    RNa> adj: The value of `adj' determines the way in which
    RNa> text strings are justified.  A value of `0' pro-
    RNa> duces <<right>> left-justified text, ...
ok, done.

    RNa> 4.    
    RNa> ?abline
    RNa> (end of 1st paragraph of Description):
    RNa> .... through the origin, otherwise, the first 2 val-
    RNa> ues are taken to be the <<slope and intercept>> [[intercept and
    RNa> slope]]. (since the first parameter is interpreted as the intercept).
ok, done.

    RNa> == The following are suggestions offered with a great deal of
    RNa> (appropriate) diffidence:

    RNa> 5.    
    RNa> ?tapply (also perhaps ?lapply, ?sapply, ?apply)
    RNa> I think it would be useful to add `aggregate' to the "See Also:" list.
    RNa> Without V&R I would not have known about aggregate.
ok, done. [tapply and apply]

    RNa> 6.
    RNa> ?persp
    RNa> d: a value which can be used to vary the strength of
    RNa> the perspective transformation.  Values of `d'
    RNa> greater than 1 will lessen the perspective effect
    RNa> and values less and 1 will exaggerate it.
  
    RNa> I think it may be useful if the value of d  for no perspective 
    RNa> effect is also given (looks to be d=10?)

(this should be discussed on R-help;  there's more to it,..
 I don't see through that myself.
 It certainly would be useful if the documentation was enlarged here.

 Want to study the source: src/main/persp3d.c

    RNa> 7.
    RNa> It is great that `boxplot' has a data=  parameter; can `plot' (as in
    RNa> `plot.default') have one too?  (no answer needed-- I know if not, there 
    RNa> is a good reason for it :)

boxplot doesn't.  
It's  boxplot.formula(.) which *has* a data argument;
and so does  plot.formula() !

Thank you for your feedback, Rashid.
and yes (as Peter said), please, next time try to put things like these in
about 2 or 3 parts.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 14:12:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 15:12:15 +0100
Subject: plot() bugs (PR#317)
In-Reply-To: Bill Simpson's message of "Wed, 10 Nov 1999 14:53:17 +0000 (GMT)"
References: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>
Message-ID: <x2emdy5tc0.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi@gcal.ac.uk> writes:


> #default plot symbols and lettering are too small, need to scale up

Wait for 0.90.0 (in a couple of weeks) or try a snapshot of it and
then complain that they are now too large....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov 10 14:48:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Nov 1999 09:48:14 -0500
Subject: finding Rd syntax errors
Message-ID: <382985AE.C3FD1C22@bank-banque-canada.ca>

I seem to recall mention of some argument to R INSTALL which makes it
pass along more information about syntax errors in Rd files, but I can't
find the message or any mention of this feature in the help. Could
someone please remind me, or am I dreaming? (If this truely is possible
perhaps it should be documented under INSTALL.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 00:48:49 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 01:48:49 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911110048.BAA27356@pubhealth.ku.dk>


<<insert bug report here>>

> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
Error: length of dimnames must match that of dims
> 

Changing:

dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

To:

dimnames = if (length(dn)==0) NULL else 
	   if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

seems to fix this.

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 02:40:37 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 03:40:37 +0100 (MET)
Subject: expand.grid returns vector for single arg (PR#319)
Message-ID: <199911110240.DAA27576@pubhealth.ku.dk>


<<insert bug report here>>

IMHO,

expand.grid(1:3)

should return an object of class "data.frame".

Instead I get 

> class(expand.grid(1:3))
NULL

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:Rbqtl, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Thu Nov 11 03:56:34 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Thu, 11 Nov 1999 04:56:34 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911110356.EAA27675@pubhealth.ku.dk>


Hi, all.

The help file for tapply says that if simplify is true, and the result of
the calculation is always a scalar, then tapply will return a vector.

Nonetheless:

> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
> is.vector(t1)  
[1] FALSE 
> is.array(t1) 
[1] TRUE
> 

I have found this in version 0.65.1 on an SGI running Irix 6.5, and on a
Mac running Linux-PPC.  I've also seen it on an Intel machine running
RedHat 6.0.

I noticed this because some results that I expected to be vectors couldn't
be combined into a data frame (Error: can't coerce array into a
data.frame).

It seems that the check and conversion simply never happens.  One way to
fix this is to simply add these few lines to the end of the function (just
before the value "ansmat" is returned: 

  if(length(dim(ansmat)) == 1){
    dim(ansmat) <- NULL
    names(ansmat) <- namelist[[1]]
  }

I wouldn't be surprised to find that there's a more elegant way to do
this.  Perhaps ansmat[index] should be returned instead of ansmat?  But I
haven't tested this extensively, so I don't know whether it might break
something else.

Hope this report helps.

Thanks for the terrific software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Thu Nov 11 06:57:58 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Thu, 11 Nov 1999 17:57:58 +1100 (EST)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911110657.RAA18539@leonard.anu.edu.au>

I've just installed Mandrake Linux, then compiled R-0.65.1 .
Whether because I omitted some necessary items when I selected
software for installion, or because they anyway needed to be
loaded afterwards, I found it necessary to load the following
packages in order to compile R-0.65.1
  pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
  XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

In addition I had the problem which Jack Fenner (jnf@pcisys.net;
6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
I used his solution, i.e. after running ./configure
edit the src/main/Makefile

Two lines down from
$(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
is a line that starts $(LDCMD)
Add -L /usr/X11R6/lib before $(DLLFLAGS)
and -lX11 at the end of the line (which was line 122 in my Makefile).
(NB minus ell X eleven)

After that, make and make install ran just fine.



John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:14:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:14:39 +0000 (GMT)
Subject: expand.grid returns vector for single arg (PR#319)
In-Reply-To: <199911110240.DAA27576@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911110711130.21442-100000@auk.stats>

On Thu, 11 Nov 1999 cberry@tajo.ucsd.edu wrote:

> IMHO,
> 
> expand.grid(1:3)
> 
> should return an object of class "data.frame".

[using 0.65.1 it returns its argument if there is just one]

It will in 0.90.0: this has already been altered:

BUG FIXES

...

    o   expand.grid returns a data frame even for one arg


I am not sure that is what I think it should do (no expanding goes on)
but it is what the documentation says and the prototype does.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:35:16 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:35:16 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <Pine.GSO.4.05.9911110726330.21442-100000@auk.stats>

On Thu, 11 Nov 1999, John Maindonald wrote:

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

The RedHat equivalent needs their equivalents (but is it not XFree88...?),
so this is not at all surprising.

> In addition I had the problem which Jack Fenner (jnf@pcisys.net;
> 6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
> i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
> I used his solution, i.e. after running ./configure
> edit the src/main/Makefile
> 
> Two lines down from
> $(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
> is a line that starts $(LDCMD)
> Add -L /usr/X11R6/lib before $(DLLFLAGS)
> and -lX11 at the end of the line (which was line 122 in my Makefile).
> (NB minus ell X eleven)

I find it much easier to do this using LIBS in config.site (but you can use
the command line or ~/.Rconf ...).  Something like

LIBS="-L /usr/X11R6/lib -lX11"

should do this for you.  I wonder though whether you need to re-configure
after adding the rpms, and to remove config.cache before doing so?  I
would really have expected configure to find out how to use X libraries,
but only if the relevant devel package was already installed. 

Since you will need to do this again for each release, it might be
worth trying these:

rm config.cache
./configure
[try make, if that fails]
rm config.cache
LIBS="-L /usr/X11R6/lib -lX11" ./configure [Bash syntax]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:26:11 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:26:11 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111026.LAA01320@pubhealth.ku.dk>

Thanks a lot, Chuck!

>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

yes.
I've committed the patch as follows
(starting at line 59 in  src/library/base/R/apply.R) :

     if(len.a > 0 && len.a %% d2 == 0)
 	return(array(ans, c(len.a %/% d2, d.ans),
-		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
-		     else c(list(ans.names), dn.ans)))
+		     dimnames = if(length(dn)) {
+                         if(is.null(dn.ans)) list(ans.names,NULL)
+                         else c(list(ans.names), dn.ans)}))
     return(ans)


Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:54:10 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:54:10 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111054.LAA01914@pubhealth.ku.dk>

>>>>> "MatW" == Matthew Wiener <mcw@ln.nimh.nih.gov> writes:

    MatW> The help file for tapply says that if simplify is true, and the
    MatW> result of the calculation is always a scalar, then tapply will
    MatW> return a vector.

    MatW> Nonetheless:

    >> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
    >> is.vector(t1)  
    R> [1] FALSE 
    >> is.array(t1) 
    R> [1] TRUE

    <....> 

all correct.

The question really is if the bug is in the code or the documentation.

Here you get a 1D array, something quite rare (but appearing more and more
in recent discussions...).

One could argue that the current behavior of tapply() to always return an
array if simplify = TRUE  is more consistent, than what the doc says should
happen (coercing 1D arrays to vectors).
Otoh, the protoype  *does* return a vector in this case,
and 1D arrays can be a pain... in other places.

I'm pro fixing this.
and I'll do if I don't hear protests..


    MatW>   <....>

    MatW> Hope this report helps.

yes indeed, thank you!
R's quality is growing partly because of such fine bug reports!

    MatW> Thanks for the terrific software.

you're welcome!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 11 11:46:35 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Nov 1999 12:46:35 +0100
Subject: tapply not simplifying to vector? (PR#320)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 11 Nov 1999 11:54:10 +0100 (MET)"
References: <199911111054.LAA01914@pubhealth.ku.dk>
Message-ID: <x266z92quc.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I'm pro fixing this.
> and I'll do if I don't hear protests..

Protest!...

> tapply(Ozone,list(Month=Month),mean,na.rm=T)
Month
      May      June      July    August September 
 23.61538  29.44444  59.11538  59.96154  31.44828 

Notice the "Month" in the output.

> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

Notice that the Month is the tag name of the single component of the
dimnames vector, it will disappear if you try coercing it to a vector.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 15:49:08 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 16:49:08 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111549.QAA07201@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I'm pro fixing this.
    >> and I'll do if I don't hear protests..

    PD> Protest!...

    >> tapply(Ozone,list(Month=Month),mean,na.rm=T)
    PD> Month
    PD> May      June      July    August September 
    PD> 23.61538  29.44444  59.11538  59.96154  31.44828 

    PD> Notice the "Month" in the output.

    >> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
    PD> structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
    PD> 59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    PD> Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

    PD> Notice that the Month is the tag name of the single component of the
    PD> dimnames vector, it will disappear if you try coercing it to a vector.

Completely agree with your argument.
 --> I'll change the documentation

Kurt: Another (R<->S) difference for the FAQ.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 16:55:56 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 17:55:56 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111655.RAA07580@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Thanks a lot, Chuck!
>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >>> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

    MM> yes.
    MM> I've committed the patch as follows
    MM> (starting at line 59 in  src/library/base/R/apply.R) :

    MM> if(len.a > 0 && len.a %% d2 == 0)
    MM> return(array(ans, c(len.a %/% d2, d.ans),
    MM> -		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
    MM> -		     else c(list(ans.names), dn.ans)))
    MM> +		     dimnames = if(length(dn)) {
    MM> +                         if(is.null(dn.ans)) list(ans.names,NULL)
    MM> +                         else c(list(ans.names), dn.ans)}))
    MM> return(ans)

which is unfortunately wrong (thank, PD!). 
A more correct patch has src/library/base/R/apply.R ending with

    if(len.a > 0 && len.a %% d2 == 0)
	return(array(ans, c(len.a %/% d2, d.ans),
                     if(is.null(dn.ans)) {
                         if(!is.null(ans.names)) list(ans.names,NULL)
                     } else c(list(ans.names), dn.ans)))
    return(ans)
}

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 14:38:51 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 09:38:51 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <382C267B.A7116CC8@bank-banque-canada.ca>

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

My experience with Mandrake was that if you install "everything" then R 0.65.1
compiles without problem. (It does not automatically recognize gnome, but I
don't think it is suppose to and I'm not sure what that adds.) If you only
install selected components from the Mandrake checklist, like C development and
everything else you think you might need, then you don't get fortran and some
other things you need.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 14:55:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 15:55:34 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Paul Gilbert's message of "Fri, 12 Nov 1999 09:38:51 -0500"
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca>
Message-ID: <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My experience with Mandrake was that if you install "everything" then R 0.65.1
> compiles without problem. (It does not automatically recognize gnome, but I
> don't think it is suppose to and I'm not sure what that adds.) 

It's not supposed to unless you configure --with-gnome, which does
work on RH6.1, so why not on Mandrake.

Currently that adds a couple of cute buttons and umpteen new bugs....
It's still experimental, and some of the crucial experiments are not
in yet, but Lyndon Drake says he's going to try some CORBA integration
with Gnumeric soon, which to my mind is where the really interesting
stuff begins.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 15:06:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 10:06:38 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121508.QAA09070@stat.math.ethz.ch>


>  Currently that adds a couple of cute buttons and umpteen new bugs....
>  It's still experimental, and some of the crucial experiments are not
>  in yet, but Lyndon Drake says he's going to try some CORBA integration
>  with Gnumeric soon, which to my mind is where the really interesting
>  stuff begins.
> -- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

Well, the CORBA integration with Gnumeric does not require the GNOME
material in R.  The dynamic CORBA material is sitting on
www.omegahat.org waiting for people to use it.

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 15:12:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 10:12:25 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca> <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>
Message-ID: <382C2E59.B9D83AEA@bank-banque-canada.ca>

>It's not supposed to unless you configure --with-gnome, which does
>work on RH6.1, so why not on Mandrake.

I expect it works with Mandrake, I didn't try. At first I was a little surprized
by configure's message, something like  "Gnome: no". I thought configure
couldn't recognize that I was running Gnome, but after quickly scanning
configure I decided it had to be specified. Perhaps a message like "not
specified" would be less confusing than "no" for things like this?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 12 15:27:31 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 12 Nov 1999 15:27:31 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121527.PAA12731@toucan.stats.ox.ac.uk>


> Date: Fri, 12 Nov 1999 10:12:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
[Quoting PD]

> >It's not supposed to unless you configure --with-gnome, which does
> >work on RH6.1, so why not on Mandrake.
> 
> I expect it works with Mandrake, I didn't try. At first I was a little 
surprized
> by configure's message, something like  "Gnome: no". I thought configure
> couldn't recognize that I was running Gnome, but after quickly scanning
> configure I decided it had to be specified. Perhaps a message like "not
> specified" would be less confusing than "no" for things like this?

I would suggest that the Gnome message does not appear at all unless
--with-gnome is specified (if at all).  After all, there are lots of
other things we do not put there (perl, blas, hdf5, readline, ...)
that concern many more users.

How to install Gnome support is in the INSTALL file. I have found it
very tricky, as both too early and too late versions of the support
files failed. Last time I tried libglade 0.7 (the then current one) did
not work, but 0.3 still does despite the remark in that file about
needing `libglade 0.5 or later'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 16:04:22 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 08:04:22 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 10:06:38 -0500"
References: <199911121508.QAA09070@stat.math.ethz.ch>
Message-ID: <87g0ybvgqh.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> Well, the CORBA integration with Gnumeric does not require
    DTL> the GNOME material in R.  The dynamic CORBA material is
    DTL> sitting on www.omegahat.org waiting for people to use it.

Sure, but they are two slightly different things.  R/GNOME/CORBA is
more for standard desktop integration, a bit away from the user; GNOME
is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
need some work, but theoretically will be quite interesting for
user-land stuff. 

(ob-reason for posting to R-devel:
	Has anyone ever seen the error message:
	"Abort."
	with R?  Thomas hadn't either, and suggested running under
	gdb, which I hope to, late this afternoon -- it's occuring
	during a library call, in particular, the R/OMEGAHAT/CORBA
	package, Duncan :-(...). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 16:39:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 17:39:00 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: rossini@biostat.washington.edu's message of "12 Nov 1999 08:04:22 -0800"
References: <199911121508.QAA09070@stat.math.ethz.ch> <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <x2aeojr7ff.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

> (ob-reason for posting to R-devel:
> 	Has anyone ever seen the error message:
> 	"Abort."
> 	with R?  Thomas hadn't either, and suggested running under
> 	gdb, which I hope to, late this afternoon -- it's occuring
> 	during a library call, in particular, the R/OMEGAHAT/CORBA
> 	package, Duncan :-(...). 

I think that happens when the program calls abort(), which seems to
happen (potentially) two times in memory.c and thrice in saveload.c.
For the Windows version, there are three cases in regex.c.

Both cases in memory.c happen if one bumps into an object with an
invalid typeof field during garbage collection. The ones in saveload.c
all seem to be in the HDF5 code (where it would seem to be a bit of an
overkill!). The ones in regex seem to be related to inconsistencies in
the compiled regexp code. My guess would be that there's a memory
corruption going on, triggering one of the traps in memory.c.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 16:48:01 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 11:48:01 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121649.RAA12920@stat.math.ethz.ch>


> Cc: Duncan Temple Lang <duncan@rice.research.bell-labs.com>,
>         R-devel@stat.math.ethz.ch
> 
> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> > (ob-reason for posting to R-devel:
> > 	Has anyone ever seen the error message:
> > 	"Abort."
> > 	with R?  Thomas hadn't either, and suggested running under
> > 	gdb, which I hope to, late this afternoon -- it's occuring
> > 	during a library call, in particular, the R/OMEGAHAT/CORBA
> > 	package, Duncan :-(...). 
> 
> I think that happens when the program calls abort(), which seems to
> happen (potentially) two times in memory.c and thrice in saveload.c.
> For the Windows version, there are three cases in regex.c.
> 
> Both cases in memory.c happen if one bumps into an object with an
> invalid typeof field during garbage collection. The ones in saveload.c
> all seem to be in the HDF5 code (where it would seem to be a bit of an
> overkill!). The ones in regex seem to be related to inconsistencies in
> the compiled regexp code. My guess would be that there's a memory
> corruption going on, triggering one of the traps in memory.c.
> 

It is going to be tricky to diagnose an abort() call without the
actual R command that caused it. My guess would be that there is an
exception being thrown in the Orbacus libraries and that is
propogating its way to abort.


Tony.
>> Sure, but they are two slightly different things.  R/GNOME/CORBA is
>> more for standard desktop integration, a bit away from the user; GNOME
>> is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
>> need some work, but theoretically will be quite interesting for
>> user-land stuff. 

Well the code for integrating R with Gnumeric is not "stable" either.
In fact I am not sure how much, if any, exists at this point. So
comparing the stability Gnome and the R/CORBA mechanism is
irrelevant. Even if there was that connection at the C level, more
would be needed to actual map data from R to CORBA and vice-versa.
This is what the dynamic CORBA facility in R does via "remote references".

Additionally, the R-S/CORBA interfaces are pretty solid here. A few
bug reports to omega-remote@omegahat.org (with perhaps a little more
information than above ;-)) will probably get them fixed pretty
rapidly.






> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 17:04:11 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 09:04:11 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 11:48:01 -0500"
References: <199911121650.IAA17314@mail.biostat.washington.edu>
Message-ID: <87wvrny73o.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> It is going to be tricky to diagnose an abort() call without
    DTL> the actual R command that caused it. My guess would be that
    DTL> there is an exception being thrown in the Orbacus libraries
    DTL> and that is propogating its way to abort.

I think you are right (i.e. that it's in the orbacus stuff).

It happened with the first 5 R-CORBA calls I tried, sigh... (I can't
recall exactly this morning, but follow the manual for a few minutes,
and modulo changing some names to localize, they all Aborted.

More this afternoon...  (I can't send a bug report without a
traceback!)

    DTL> Additionally, the R-S/CORBA interfaces are pretty solid
    DTL> here. A few bug reports to omega-remote@omegahat.org (with
    DTL> perhaps a little more information than above ;-)) will
    DTL> probably get them fixed pretty rapidly.

Sounds good...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Nov 13 12:53:20 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 13 Nov 1999 12:53:20 +0000 (GMT)
Subject: image()
Message-ID: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>

May I raise the issue of the behaviour of image()?  In image() dim(z) is
supposed to be c(length(x), length(y)).  This suggests that the user is
supplying the midpoints of the rectangles.  For all but the outer
rectangles this is true.  The outer rectangles, however, are only
displayed in half width.  So it is not possible to show correctly an image
plot of equally-spaced abscissa.  I would hazard a guess that these kinds
of plots make up the bulk of calls to image() either directly or after a
simple transformation (eg starting with boundary values rather than
midpoints).

Can I suggest that the code for image() be modified to show full
rectangles for all values on the basis that x and y are midpoints? 
According to my code for R (which is a bit out of date!) the minimum
change would require 4 lines to be modified in the function do_image of
plot3d.c.  The alternative, which I think would be more transparent, would
be to call the function do_image with boundary values having previously
made the appropriate calculations in image() according to whether
midpoints or boundary values are supplied.  Something like this happens in
S+ (although not very transparently!).

I would be happy to detail these changes if they were thought appropriate.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeitler@corecomm.net  Sat Nov 13 13:55:45 1999
From: zeitler@corecomm.net (zeitler@corecomm.net)
Date: Sat, 13 Nov 1999 14:55:45 +0100 (MET)
Subject: configure script error (PR#321)
Message-ID: <199911131355.OAA23608@pubhealth.ku.dk>

Full_Name: David Zeitler
Version: 0.65.1
OS: Linux Mandrake
Submission from: (NULL) (209.81.240.221)


Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
conftest.c to test int and double compatibility between g77 and gcc. This didn't

show up when compiling on my K6 machine, but did on my Celeron notebook. The K6
reports as an i586 processor and the Celeron reports i686. This appears to be
the
only difference between the two builds.

The problem shows up as a failure of this test listed in the configure.log as
line 2107. After adding ${CFLAGS}, the build ran to completion normally on both
machines.

Orginal line 2158:
      if ${CC-cc} -c conftest.c 1>&5 2>&5; then

New line 2158:
      if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 13 15:05:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Nov 1999 16:05:12 +0100
Subject: configure script error (PR#321)
In-Reply-To: zeitler@corecomm.net's message of "Sat, 13 Nov 1999 14:55:45 +0100 (MET)"
References: <199911131355.OAA23608@pubhealth.ku.dk>
Message-ID: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>

zeitler@corecomm.net writes:

> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
....

>       if ${CC-cc} -c conftest.c 1>&5 2>&5; then
> 
> New line 2158:
>       if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

The configure script is autogenerated from configure.in and
aclocal.m4, so fixes by line number is not too useful. In my sources
it was now line 1987. Thanks anyway.

That'll be l.424 of the current aclocal.m4, inside
AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

I'll leave it for those who actually understand autoconf to check that
your fix is correct.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat Nov 13 21:20:19 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 13 Nov 1999 22:20:19 +0100 (MET)
Subject: patches for alpha
Message-ID: <Pine.OSF.4.10.9911132108130.27388-100000@zidsrv.sci.uni-klu.ac.at>


Recently I reviewed my RPM spec files for DU 4.0, and noticed that I
forgot to post some problems + patches:

1. ./configure fails to choose a PIC flag, I simply removed the
AC_MSG_ERROR and it works. There is actually no PIC flag for DEC cc (with
DU 4.0E)
--- ./configure.in.alpha-patch  Mon Aug 23 06:36:28 1999
+++ ./configure.in      Sun Sep 12 17:38:27 1999
@@ -541,7 +541,9 @@
       -bI:\$(R_HOME)/etc/R.exp -lc -lm"
     ;;
   alpha*osf*)
+    ldcmd="f77 -g -nofor_main -fpe3 "
     cpicflags=
+    shlibld=f77
     shlibldflags=-shared
     ;;
   alpha*linux)
@@ -612,7 +614,7 @@
 : ${CPICFLAGS=${cpicflags}}
 if test -z "${CPICFLAGS}"; then
   AC_MSG_WARN([Could not determine CPICFLAGS.])
-  AC_MSG_ERROR([See the file INSTALL for more information.])
+#  AC_MSG_ERROR([See the file INSTALL for more information.])
 fi
 : ${FPICFLAGS=${fpicflags}}
 : ${SHLIBLD=${shlibld}}

May be some autoconf expert could provide an solution like
if arch!=alpha then AC_MSG_ERROR ?

1.a depending does not work, I added some lines to Makeconf.in:
My automake is automake-1.4
--- ./Makeconf.in.alpha-patch   Thu Aug 19 00:24:49 1999
+++ ./Makeconf.in       Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 .SUFFIXES:
 .SUFFIXES: .c .f .d .o

-@depend_rules_frag@
+# added for alpha (autoconf broken?):
+.c.d:
+       @echo "making $@ from $<"
+       @$(CC) -M $(ALL_CPPFLAGS) $(ALL_CFLAGS) $< >$@
 .c.o:
        $(CC) $(ALL_CPPFLAGS) $(ALL_CFLAGS) -c $< -o $@
 @f77_rules_frag@


2. aclocal.m4 has many wrong C preprocessor directives "#define"s and
"#include"s with "#" not in column 1 (DEC cc wants it there) 

That means
 
       #define SOMETHING

does not work, but 

#define SOMETHING 

or (for indenting together with neighbour lines)

#       define SOMETHING

works.

Here is the patch:
--- ./aclocal.m4.alpha-ac-patch	Tue Oct 26 13:32:08 1999
+++ ./aclocal.m4	Tue Oct 26 13:33:46 1999
@@ -388,13 +388,13 @@
       ${FC} -c ${FFLAGS} conftestf.f 1>&AC_FD_CC 2>&AC_FD_CC
       changequote(, )
       cat > conftest.c <<EOF
-        #include <math.h>
-	#include "confdefs.h"
-	#ifdef HAVE_F77_UNDERSCORE
-	# define F77_SYMBOL(x)   x ## _
-	#else
-	# define F77_SYMBOL(x)   x
-	#endif
+#      include <math.h>
+#      include "confdefs.h"
+#      ifdef HAVE_F77_UNDERSCORE
+#        define F77_SYMBOL(x)   x ## _
+#      else
+#        define F77_SYMBOL(x)   x
+#      endif
 
 	extern void F77_SYMBOL(cftest)(int *a, int *b,
 	  double *x, double *y);
@@ -502,10 +502,10 @@
 	  changequote(<<, >>)dnl
 	  <<
 	  int main () {
-	  #include <fpu_control.h>
-	  #if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
+#        include <fpu_control.h>
+#        if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
 	    return(_FPU_DEFAULT != _FPU_IEEE);
-	  #endif
+#        endif
 	    return(0);
 	  }
 	  >>,
@@ -527,7 +527,7 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <stdlib.h>
+#      include <stdlib.h>
 	int main () {
 	  int *p = calloc(0, sizeof(int));
 	  return(p == 0);
@@ -550,14 +550,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_FINITE
+#      ifdef HAVE_FINITE
 	  return(finite(1./0.) | finite(0./0.) | finite(-1./0.));
-	#else
+#      else
 	  return(0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -577,14 +577,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_ISNAN
+#      ifdef HAVE_ISNAN
 	  return(!(log(0.) == -1. / 0. && isnan(log(-1.))));
-	#else
+#      else
 	  return(log(0.) != -1. / 0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -622,8 +622,8 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include <ieeefp.h>
+#      include <math.h>
+#      include <ieeefp.h>
 	int main () {
 	  double x = 0;
 	  fpsetmask(0); x = x / x; return (x != x);

3. multiple declaration of mkString, const char* did not work:
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration,
parameter 1 has a different type than specified in an earlier declaration
of this function. (mismatparam)
SEXP mkString(const char *s)

Also another "#" not in column 1.

One solution is the following, but I'm not sure if the move from const
char* to char* breaks something. I also don't know why const char* did not
work.

My bison is 
root@delta[src]# bison -V
GNU Bison version 1.25

--- ./src/include/Rinternals.h.alpha-patch	Sun Sep 12 17:41:57 1999
+++ ./src/include/Rinternals.h	Sun Sep 12 17:43:37 1999
@@ -361,7 +361,7 @@
 SEXP matchArgs(SEXP, SEXP);
 SEXP matchPar(char*, SEXP*);
 SEXP mkChar(const char*);
-SEXP mkString(const char*);
+SEXP mkString(char*);
 SEXP namesgets(SEXP, SEXP);
 int ncols(SEXP);
 int nrows(SEXP);
--- ./src/main/gram.y.alpha-patch	Tue Aug 10 10:56:17 1999
+++ ./src/main/gram.y	Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 SEXP		mkFloat(char *);
 SEXP		mkInteger(char *);
 SEXP		mkNA(void);
-SEXP		mkString(const char *);
+/* problems with multiple declarations of mkString in DEC cc ?:*/
+#ifndef _R_INTERNALS_H_
+SEXP		mkString(char *);
+#endif
 SEXP		mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1365,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(char *s)
 {
     SEXP t;
 
@@ -1623,9 +1628,9 @@
 		SourcePtr = FunctionSource + 8;
 	    }
 	    FunctionStart[FunctionLevel] = SourcePtr - 8;
-	    #if 0
+#          if 0
 	    printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-	    #endif
+#          endif
 	}
 	return kw;
     }



ALbrecht
 
-------------------------------------------------------------------------------
Albrecht Gebhardt                   email   : albrecht.gebhardt@uni-klu.ac.at
Institut fuer Mathematik            Tel.    : (++43 463) 2700/832
Universitaet Klagenfurt             Fax     : (++43 463) 2700/834
Villacher Str. 161
A-9020 Klagenfurt, Austria
-------------------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgri@hal.stat.unipd.it  Sun Nov 14 17:17:09 1999
From: mgri@hal.stat.unipd.it (mgri@hal.stat.unipd.it)
Date: Sun, 14 Nov 1999 18:17:09 +0100 (MET)
Subject: bug in arma.sim (PR#322)
Message-ID: <199911141717.SAA26416@pubhealth.ku.dk>

Dear Sir,

I think I found a bug in the function arma.sim, which is defined in
the help page of the function filter:

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, ma, sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}

I am using R version 0.65.0 under Linux. If I understand correctly the
way the function arma.sim is supposed to work, the instruction

arma.sim(n=200, ar=0.5, ma=0.5, sigma=1.2)

should generate values from an ARMA(1,1) model. However, the values
generated seem to come from an AR(1) model. I think this is due to the
instruction x <- filter(x, ma, sides=1) in the definition of
arma.sim, which doesn't produce the desired result. The function
defined below gives the output that my understanding of the
procedures involved would make me expect.

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{  
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, c(1,ma), sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}


I simply changed

x <- filter(x, ma, sides=1)

to

x <- filter(x, c(1,ma), sides=1)


Also, I wonder whether it would be more appropriate to write

rnorm(n+100, 0, sigma)

instead of

rnorm(n+100, 0, sigma^2)

since rnorm requires the standard deviation rather than the variance.


Best regards,

Matteo Grigoletto
mgri@hal.stat.unipd.it

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 19:20:46 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 19:20:46 +0000 (GMT)
Subject: bug in arma.sim (PR#322)
In-Reply-To: <199911141717.SAA26416@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>

On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:

> I think I found a bug in the function arma.sim, which is defined in
> the help page of the function filter:

[...]

Yes, that has not been tested since filter was altered for S-PLUS
compatibility.

Fixed for 0.90.0 (due out on Friday)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 22:50:42 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 14 Nov 1999 23:50:42 +0100 (MET)
Subject: { and } in examples get confused in help (PR#323)
Message-ID: <199911142250.XAA27208@pubhealth.ku.dk>

Take a look at ?image, or the html version:

     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^{-r/6{))
...
     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^}-r/6}))


The {} {} pairing has become {{ }}.  Looks like a bug in the 
marking/unmarking code in Rdconvlib.pl


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 14 23:12:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 00:12:52 +0100
Subject: bug in arma.sim (PR#322)
In-Reply-To: Prof Brian D Ripley's message of "Sun, 14 Nov 1999 19:20:46 +0000 (GMT)"
References: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>
Message-ID: <x2ogcwsm4r.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:
> 
> > I think I found a bug in the function arma.sim, which is defined in
> > the help page of the function filter:
> 
> [...]
> 
> Yes, that has not been tested since filter was altered for S-PLUS
> compatibility.
> 
> Fixed for 0.90.0 (due out on Friday)

...Monday, actually. November 22.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 23:10:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 23:10:26 +0000 (GMT)
Subject: image()
In-Reply-To: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
Message-ID: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>

On Sat, 13 Nov 1999, Jonathan Rougier wrote:

> May I raise the issue of the behaviour of image()?  In image() dim(z) is
> supposed to be c(length(x), length(y)).  This suggests that the user is
> supplying the midpoints of the rectangles.  For all but the outer
> rectangles this is true.  The outer rectangles, however, are only
> displayed in half width.  So it is not possible to show correctly an image
> plot of equally-spaced abscissa.  I would hazard a guess that these kinds
> of plots make up the bulk of calls to image() either directly or after a
> simple transformation (eg starting with boundary values rather than
> midpoints).
> 
> Can I suggest that the code for image() be modified to show full
> rectangles for all values on the basis that x and y are midpoints? 
> According to my code for R (which is a bit out of date!) the minimum
> change would require 4 lines to be modified in the function do_image of
> plot3d.c.  The alternative, which I think would be more transparent, would
> be to call the function do_image with boundary values having previously
> made the appropriate calculations in image() according to whether
> midpoints or boundary values are supplied.  Something like this happens in
> S+ (although not very transparently!).

I needed this in hurry this weekend for some fMRI plots. I've altered
image so that if z is m x n, x can be of length m or m+1 and y of length n
or n+1.  If x is of length m it supplies the midpoints, if of length m+1
it supplies the boundaries of the cells. (All S compatible.)  The internal
call is made with the boundary values.  The outer cells are plotted
in full width.

The one change is if m=1 or n=1. I reckon that is an error, but S
and R previously filled the whole width. Does anyone want that behaviour?
At present those cases are an error.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 15 08:38:40 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Nov 1999 09:38:40 +0100 (MET)
Subject: image()
In-Reply-To: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
References: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
 <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
Message-ID: <14383.50832.260276.838244@gargle.gargle.HOWL>

>>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
>>>>> <ripley@stats.ox.ac.uk> said:

    BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
    >> May I raise the issue of the behaviour of image()?  In image()
    >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
    >> that the user is supplying the midpoints of the rectangles.  For all
    >> but the outer rectangles this is true.  The outer rectangles,
    >> however, are only displayed in half width.  So it is not possible to
    >> show correctly an image plot of equally-spaced abscissa.  I would
    >> hazard a guess that these kinds of plots make up the bulk of calls
    >> to image() either directly or after a simple transformation (eg
    >> starting with boundary values rather than midpoints).
    >> 
    >> Can I suggest that the code for image() be modified to show full
    >> rectangles for all values on the basis that x and y are midpoints?
    >> According to my code for R (which is a bit out of date!) the minimum
    >> change would require 4 lines to be modified in the function do_image
    >> of plot3d.c.  The alternative, which I think would be more
    >> transparent, would be to call the function do_image with boundary
    >> values having previously made the appropriate calculations in
    >> image() according to whether midpoints or boundary values are
    >> supplied.  Something like this happens in S+ (although not very
    >> transparently!).

    BDR> I needed this in hurry this weekend for some fMRI plots. I've
    BDR> altered image so that if z is m x n, x can be of length m or m+1
    BDR> and y of length n or n+1.  If x is of length m it supplies the
    BDR> midpoints, if of length m+1 it supplies the boundaries of the
    BDR> cells. (All S compatible.)  The internal call is made with the
    BDR> boundary values.  The outer cells are plotted in full width.

Excellent, thank you!

    BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
    BDR> and R previously filled the whole width. Does anyone want that
    BDR> behaviour?

yes, I do.
- If I remember properly, I even spent an hour or so to make this work in R:
 When I was porting the wavethresh package,
 one of the multiresolution plots didn't work in R, first, because  image()
 didn't work for 1x1 images.

- Also, for the matter of completeness and consistency, I think this just
  should work.

    BDR>   At present those cases are an error.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 15 09:00:06 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 15 Nov 1999 09:00:06 +0000 (GMT)
Subject: image()
In-Reply-To: <14383.50832.260276.838244@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.9911150857190.23496-100000@auk.stats>

On Mon, 15 Nov 1999, Martin Maechler wrote:

> >>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
> >>>>> <ripley@stats.ox.ac.uk> said:
> 
>     BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
>     >> May I raise the issue of the behaviour of image()?  In image()
>     >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
>     >> that the user is supplying the midpoints of the rectangles.  For all
>     >> but the outer rectangles this is true.  The outer rectangles,
>     >> however, are only displayed in half width.  So it is not possible to
>     >> show correctly an image plot of equally-spaced abscissa.  I would
>     >> hazard a guess that these kinds of plots make up the bulk of calls
>     >> to image() either directly or after a simple transformation (eg
>     >> starting with boundary values rather than midpoints).
>     >> 
>     >> Can I suggest that the code for image() be modified to show full
>     >> rectangles for all values on the basis that x and y are midpoints?
>     >> According to my code for R (which is a bit out of date!) the minimum
>     >> change would require 4 lines to be modified in the function do_image
>     >> of plot3d.c.  The alternative, which I think would be more
>     >> transparent, would be to call the function do_image with boundary
>     >> values having previously made the appropriate calculations in
>     >> image() according to whether midpoints or boundary values are
>     >> supplied.  Something like this happens in S+ (although not very
>     >> transparently!).
> 
>     BDR> I needed this in hurry this weekend for some fMRI plots. I've
>     BDR> altered image so that if z is m x n, x can be of length m or m+1
>     BDR> and y of length n or n+1.  If x is of length m it supplies the
>     BDR> midpoints, if of length m+1 it supplies the boundaries of the
>     BDR> cells. (All S compatible.)  The internal call is made with the
>     BDR> boundary values.  The outer cells are plotted in full width.
> 
> Excellent, thank you!
> 
>     BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
>     BDR> and R previously filled the whole width. Does anyone want that
>     BDR> behaviour?
> 
> yes, I do.
> - If I remember properly, I even spent an hour or so to make this work in R:
>  When I was porting the wavethresh package,
>  one of the multiresolution plots didn't work in R, first, because  image()
>  didn't work for 1x1 images.
> 
> - Also, for the matter of completeness and consistency, I think this just
>   should work.
> 
>     BDR>   At present those cases are an error.
> 
OK, I know how to do it and will implement it soon (but probably not
today).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 10:10:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 11:10:30 +0100 (CET)
Subject: configure script error (PR#321)
In-Reply-To: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
References: <199911131355.OAA23608@pubhealth.ku.dk>
 <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
Message-ID: <14383.56342.286716.695484@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> zeitler@corecomm.net writes:
>> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
> ....

>> if ${CC-cc} -c conftest.c 1>&5 2>&5; then
>> 
>> New line 2158:
>> if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

> The configure script is autogenerated from configure.in and
> aclocal.m4, so fixes by line number is not too useful. In my sources
> it was now line 1987. Thanks anyway.

Thanks for the report.

> That'll be l.424 of the current aclocal.m4, inside
> AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

> I'll leave it for those who actually understand autoconf to check that
> your fix is correct.

Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 12:50:08 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 13:50:08 +0100 (CET)
Subject: AW: [R] read.table problems
In-Reply-To: <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca>
 <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
Message-ID: <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>

>>>>> =?iso-8859-1?Q?Jens Oehlschl=E4gel-Akiyoshi?= writes:

> Below is a fix for read.table() to better read in CSV-files.

>> # try this
>> cat("1;2,3\n4;5,6\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1;2,3
> 4;5,6
>> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
>   V1  V2
> 1  1 2.3
> 2  4 5.6

I am not sure we should do this.

If you are trying to read in German-format numbers, this should be
doable by setting the locale accordingly.  Does anyone know whether
strtod() will work this way?

> BTW: I think read.table() or it's documentation needs another fix,
>      because of the following:


>> cat("1 2\n3 4\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1 2
> 3 4
>> read.table("d:/temp/t.dat", as.is=TRUE)$V1
> [1] "1" "3"


> Citing from the help file:

>       as.is: the default behavior of `read.table' is to convert
>              non-numeric variables to factors.  The variable
>              `as.is' controls this conversion.  Its value is
>              either a vector of logicals (values are recycled
>              if necessary), or a vector of numeric indices
>              which specify which columns should be left as
>              character strings.

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 13:07:43 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 14:07:43 +0100
Subject: AW: [R] read.table problems
In-Reply-To: Kurt Hornik's message of "Mon, 15 Nov 1999 13:50:08 +0100 (CET)"
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca> <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel> <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>
Message-ID: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
> >   V1  V2
> > 1  1 2.3
> > 2  4 5.6
> 
> I am not sure we should do this.
> 
> If you are trying to read in German-format numbers, this should be
> doable by setting the locale accordingly.  Does anyone know whether
> strtod() will work this way?

Only too well, I'm afraid. AFAIR we specifically do *not* localize
LC_NUMERIC for that reason. Will also affect as.numeric(), etc., causing
general panic. Besides, we'll always have problems with not knowing
the locale in which a .csv was created.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kmb28@cus.cam.ac.uk  Mon Nov 15 13:38:41 1999
From: kmb28@cus.cam.ac.uk (kmb28@cus.cam.ac.uk)
Date: Mon, 15 Nov 1999 14:38:41 +0100 (MET)
Subject: R 0.65.1 config bug (PR#324)
Message-ID: <199911151338.OAA06120@pubhealth.ku.dk>

install@herb1:~/R-0.65.1> ./configure --help

....
--with-gnome            use GNOME (if available)
--with-gnome-includes   Specify location of GNOME headers
--with-gnome-libs       Specify location of GNOME libs
--with-gnome            Specify prefix for GNOME files

Is that last one correct?
Keith
-- 
Keith Briggs, King's College Research Centre and Department of Plant 
Sciences, University of Cambridge, Downing Street, Cambridge CB2 3EA 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 15 15:48:02 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 15 Nov 1999 10:48:02 -0500
Subject: univariate ar dimension
Message-ID: <38302B32.E6BE37D1@bank-banque-canada.ca>

I have now cleaned out most of the old R-bug work-arounds in my DSE
library and will soon have a version for CRAN, but with 0.90 imminent I
will probably wait for that. The remaining mask I use is a replacement
for ar in the ts library, to make $ar in the result an array rather than
a vector even in the univariate case. The reason for doing this is to
avoid always needing to code the univariate case as a special exception.
The change should not affect any univariate code which assumes the
result is a vector, since an Nx1x1 array can still be indexed as a
vector. My fix is consistent with Splus (3.3), however, I am not sure if
the ts library result is considered a feature or a bug. It would be good
to resolve this for 0.90 so I can either remove my fix or put in a more
permanent work-around.

Paul Gilbert
_________
# the second to last line is a fix for ar in the ts library
ar <- function (x, aic = TRUE, order.max = NULL,
         method = c("yule-walker", "burg", "ols", "mle"),
         na.action = na.fail, series = deparse(substitute(x)),  ...)
{ # it is not clear why quote around "y=w" are necessary.
    res <- switch(match.arg(method),
            "yule-walker" = ar.yw(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            burg = ar.burg(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            ols = ar.ols(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            mle = ar.mle(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...))
    res$call <- match.call()
    if (! is.array(res$ar)) res$ar <- array(res$ar,
c(length(res$ar),1,1)) #fix
    res
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Mon Nov 15 15:43:04 1999
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Mon, 15 Nov 1999 16:43:04 +0100
Subject: AW: [R] read.table problems
In-Reply-To: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>
Message-ID: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>


Two short remarks

1) I still do changes on my version of read.table() as I might need a proper
csv.reader during the next days,
   so perhaps you might want to wait

2) Of course an alternative to patching read.table() is renaming my version
to e.g. read.table.csv()
   (but it is not a full csv.reader yet)

Here is an update, which by default strips quotation marks enclosing
colnames, character data or numeric data
With this version you can read in csv data such that

 "white.begin"  ,  "predy"   , "x"     , "y"
 "       asdf"  ,  0.367985  , "25.34" , 0

gives as resulting col.names instead of

> names(temp)
[1] "\"highq\"" "\"lowq\""  "\"predy\"" "\"x\""     "\"y\""

> names(temp)
[1] "highq" "lowq"  "predy" "x"     "y"

and as resulting data

 "       asdf", 0.367985, 25.34, 0

however it will fail on character data containing the separator or quotation
marks

Best regards


Jens Oehlschlägel-Akiyoshi



read.table <-
function (file
, header = FALSE
, sep = ""
, row.names
, col.names
, as.is = FALSE
, na.strings = "NA"
, skip = 0
, dec.sep = '.'                ## added by JOA
, strip.white = TRUE           ## added by JOA, set to FALSE for backward
compatibility
, quotation.mark = '"'         ## added by JOA
, strip.quotation.marks = TRUE ## added by JOA, set to FALSE for backward
compatibility
)
{
    ##### remark: this version of read.table seems to works fine for
numerical csv data
    ##### but will fail on character data containing the separator or
quotation marks
    ### Start JOA changes
    ## could have a warning
    #if (strip.white && sep[1] %in% c("", " ", "\t"))warning("read.table:
strip.white AND with white space seperator !?")
    ## .Internal(type.convert) calls do_typecvt() which calls C-library
function strtod() which uses '.' as dec.sep
    ## thus let's replace other dec.sep here
    if (dec.sep[1]==sep[1])stop("parsing rule violation: sep must not equal
dec.sep")
    type.convert <- function(x, na.strings = "NA", as.is = FALSE,
dec=dec.sep){
    	if (dec[1]!="."){
    	  # R-developers may know a more efficient internal function to replace
characters
    	  # I also don't know whether it is efficient to change parameters
before calling .Internal
    	  # however it seems to work
    	  # In case a global option$dec.sep is introduced, this fix needs to be
adapted
    	  x <- gsub(dec[1], '.', x, ignore.case=FALSE, extended=FALSE)
    	}
      .Internal(type.convert(x, na.strings, as.is))
    }
    quoted.string.matcher <- paste('\(^', quotation.mark, '\)\(.*\)\(',
quotation.mark, '$\)', sep='')
    unquote <- function(text, quoted.string)sub(quoted.string.matcher,
'\\2', text, extended=T)
    ### Stop JOA changes

    row.lens <- count.fields(file, sep, skip)
    nlines <- length(row.lens)
    rlabp <- nlines > 1 && (row.lens[2] - row.lens[1]) == 1
    if (rlabp && missing(header))
        header <- TRUE
    if (header) {
        col.names <- scan(file, what = "", sep = sep, nlines = 1,
            strip.white = strip.white, # added by JOA
            quiet = TRUE, skip = skip)
        skip <- skip + 1
        row.lens <- row.lens[-1]
        nlines <- nlines - 1
    }
    if (strip.quotation.marks) col.names <- unquote(col.names) ## added by
JOA
    else if (missing(col.names))
        col.names <- paste("V", 1:row.lens[1], sep = "")
    cols <- unique(row.lens)
    if (length(cols) != 1) {
        cat("\nrow.lens=\n")
        print(row.lens)
        stop("all rows must have the same length.")
    }
    what <- rep(list(""), cols)
    if (rlabp)
        col.names <- c("row.names", col.names)
    names(what) <- col.names
    data <- scan(file = file, what = what, sep = sep, skip = skip,
        na.strings = na.strings,
        strip.white = strip.white, ## added by JOA
        quiet = TRUE)

    if (cols != length(data)) {
        warning(paste("cols =", cols, " != length(data) =", length(data)))
        cols <- length(data)
    }
    if (is.logical(as.is)) {
        as.is <- rep(as.is, length = cols)
    }
    else if (is.numeric(as.is)) {
        if (any(as.is < 1 | as.is > cols))
            stop("invalid numeric as.is expression")
        i <- rep(FALSE, cols)
        i[as.is] <- TRUE
        as.is <- i
    }
    else if (length(as.is) != cols)
        stop(paste("as.is has the wrong length", length(as.is),
            "!= cols =", cols))

   ## Start changed by JOA
   if (strip.quotation.marks) {
         for (i in 1:cols)
             if (as.is[i])
                 data[[i]] <- unquote(data[[i]])
             else
                 data[[i]] <- type.convert( unquote(data[[i]]) )
   } else {
       for (i in 1:cols) if (!as.is[i])
           data[[i]] <- type.convert(data[[i]])
   }
   ## Stop changed by JOA

    if (missing(row.names)) {
        if (rlabp) {
            row.names <- data[[1]]
            data <- data[-1]
        }
        else row.names <- as.character(1:nlines)
    }
    else if (is.null(row.names)) {
        row.names <- as.character(1:nlines)
    }
    else if (is.character(row.names)) {
        if (length(row.names) == 1) {
            rowvar <- (1:cols)[match(col.names, row.names, 0) ==
                1]
            row.names <- data[[rowvar]]
            data <- data[-rowvar]
        }
    }
    else if (is.numeric(row.names) && length(row.names) == 1) {
        rlabp <- row.names
        row.names <- data[[rlabp]]
        data <- data[-rlabp]
    }
    else stop("invalid row.names specification")
    class(data) <- "data.frame"
    row.names(data) <- row.names
    data
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 16:14:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 17:14:53 +0100
Subject: AW: [R] read.table problems
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Mon, 15 Nov 1999 16:43:04 +0100"
References: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>
Message-ID: <x2n1sfu3ya.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Two short remarks
> 
> 1) I still do changes on my version of read.table() as I might need a proper
> csv.reader during the next days,
>    so perhaps you might want to wait
> 
> 2) Of course an alternative to patching read.table() is renaming my version
> to e.g. read.table.csv()
>    (but it is not a full csv.reader yet)

...and it isn't realistically going to be without surgery on the
internals of scan and count.fields. So, since there is a feature
freeze on for 0.90, we should hold back but try to get something like
this into the next version. There are a couple of other ideas that I'd
like to pursue at that point too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 15 20:47:01 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 15 Nov 1999 15:47:01 -0500
Subject: (G)UI for R and in R
In-Reply-To: Your message of "12 Nov 1999 08:04:22 PST."
 <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <199911152047.PAA18728@infiniti.ece.cmu.edu>


Hi,

  I've followed the discussions about the object explorer thingy et
al. last week.  I'll add below my thoughts about what a GUI could do
and how it could be done.  This matrix shows along which "axes" I think
to evaluate how R will fit into my tool box in the future.  It may or
may not be interesting for the developers on this list -- I was just a
bit confused about what some people want and how they get there.
  I'm _not_ asking for answers for the questions below.  (I can easily
find out that a solution to R+CGI is Rweb.)  I'm interested in whether
I forgot some major idea or realization path...

Usage -- what are the interfaces for?

1) for data input or exchange
   Can I drop my data from a spread sheet into R?  Can I get results
back into a (spreadsheet) application?  Can I request data from a database?
dto. with "high-level" constructs in R?  Can I call R from a CGI
script?  Can another application "drive" my R session?

2) for help with writing R scripts
   Does R help me with a graphical introspection tool?  I guess this
is what the object explorer is meant for.  Can I bring up a list of
objects and kinda click my way to the attributes of the object?  its
data?  (Not unusual scenario: And why does apply not work this time?
Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
a function and send it to an editor?  Find out where it came from?

3) for "clients"
   Can I package an R program so that others aren't stuck with a
static analysis of the data?  Can I add menus/options/etc. so that
others can twiddle my view of the data (possibly without understanding
R)?  Sometimes, this is very simple stuff, like maybe somebody would
rather see relative than abs. frequency.  Why not give them a button
and a plot device instead of a static picture?


How -- what are my options to program an interface?

1/2) approaches for data import/export - stuff I've seen mentioned is use
of CORBA, SQL, DCOM, other D&D protocols.  Yes, they all do different
things, but the underlying question is: Why do I export my data to
file to then call read.table in R?  Why doesn't R just "know" about my
data?  Could I mark a table in another program, then go to my R prompt
and say "new.data <- import.from.selection ()"?  If I can attach
data.frames, why not a data base?
  Also, who is in the driver's seat?  In option 1 it's R where R
queries for data.  In option 2 it's another application that ask R to
perform services (calculations, model fitting, etc.) on its behalf.

3) "low-level" approach for the GUI part - use a system dependent
library (like X, Xt, Gnome and the Windows equivalents).  This hurts
if you move between platforms.  It also means lots of code and need
for a compiler.  I actually also put the Java solutions here -- Java
helps to stay (mostly) platform-independent but is low-level in its
approach to UI programming.  This may be different if you rely on
Swing or other GUI classes.  If you don't, you'll have to write a
decent amount of code.

4) "high-level" approach for the GUI part - I'd put scripting
languages here.  Actually, the tcl/tk interface wasn't mentioned last
week but appears, at least to me, to be a promising approach.  You
can piece an interface together rather quickly in tcl/tk and you don't
have to touch a compiler.

5) "high-level" approach to GUI but with R commands - I don't like 1
and only "kind of" 2 because they require me to go outside of R.  I'd
like to program a menubar (with a help entry), some buttons, multiple
canvases (each e.g. an X11 device and a frame around with a button
"send to printer"), with R functions.  (Of course, I see that this in
turn goes back to either 1 or 2.  But only once for the authors of the
interface functions.)

Option 5 goes into the direction of a visual R - I don't want to
write a for loop to calculate the mean of a data vector.  I want to
say "mean(v)".  Along the same line, I want to say
  fam.select <- choice (title="Link function", c("gaussian", "poisson"),
                       exactly.one=T);
  ...
  glm (..., family=query(fam.select), ...)
This gives the user a menu, allowing him/her to influence
calculations.  And I don't have to think about radio buttions or
geometry managers or whatever.

But then, would this be part of R or do you want to keep stuff like
this outside?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Mon Nov 15 21:08:06 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Mon, 15 Nov 1999 22:08:06 +0100 (MET)
Subject: xlim, ylim problem in barplot (PR#325)
Message-ID: <199911152108.WAA09550@pubhealth.ku.dk>

Hi, all.

The lower bound in a barplot (or the left bound if you're making a
horizontal barplot) is -0.01 no matter what.  This causes problems if
you're making a barplot of small values (say, < .001), as most of the plot
is taken up with blank space beneath the axis, and the bars are squeezed
in at the top.  The fix seems to be simple: replace lines

41:      xlim <- range(-0.01, height) 
59:      ylim <- range(-0.01, height)

by the following:

41:      xlim <- range(max(-0.01, -0.01 * height), height) 
59:      ylim <- range(max(-0.01, -0.01 * height), height)

This seems to work for small negative numbers as well.

Thanks again for the software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 21:39:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 22:39:20 +0100
Subject: xlim, ylim problem in barplot (PR#325)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Mon, 15 Nov 1999 22:08:06 +0100 (MET)"
References: <199911152108.WAA09550@pubhealth.ku.dk>
Message-ID: <x2hfinh1tj.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> Hi, all.
> 
> The lower bound in a barplot (or the left bound if you're making a
> horizontal barplot) is -0.01 no matter what.  This causes problems if
> you're making a barplot of small values (say, < .001), as most of the plot
> is taken up with blank space beneath the axis, and the bars are squeezed
> in at the top.  The fix seems to be simple: replace lines
> 
> 41:      xlim <- range(-0.01, height) 
> 59:      ylim <- range(-0.01, height)
> 
> by the following:
> 
> 41:      xlim <- range(max(-0.01, -0.01 * height), height) 
> 59:      ylim <- range(max(-0.01, -0.01 * height), height)
> 
> This seems to work for small negative numbers as well.

or simply range(-0.01*height,height) 

That one might just be sneaked into the upcoming release....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Nov 15 22:05:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Nov 1999 16:05:22 -0600
Subject: (G)UI for R and in R
In-Reply-To: Thomas Vogels's message of "Mon, 15 Nov 1999 15:47:01 -0500"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu>
Message-ID: <6r4sen9zrx.fsf@franz.stat.wisc.edu>

First, let me say that I come from the command-line-oriented world and
most of the time I find that graphical user interfaces just get in the
way.  Like many people who use implementations of the S language
(i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
preferred environment for running and editing S code is emacs with the
ESS package.

My responses on a GUI for writing scripts are from this perspective
but I do recognize that many people find a GUI much more comfortable
than trying to remember lots of archane function names and, in the
case of emacs, keystrokes.

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> 2) for help with writing R scripts
>    Does R help me with a graphical introspection tool?  I guess this
> is what the object explorer is meant for.  Can I bring up a list of
> objects and kinda click my way to the attributes of the object?  its
> data?  (Not unusual scenario: And why does apply not work this time?
> Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> a function and send it to an editor?  Find out where it came from?

(BTW, I think you mean "graphical inspection tool".)  Although not a
substitute for graphical inspection, I find Martin Maechler's "str"
function to be invaluable when I am trying to remember the structure
of various objects, including (and perhaps especially) those for which
I designed the structure.

As far as editing a function definition, there are excellent
facilities within ESS for that.  Object name completion within ESS is
by itself worth the price of learning to use the mode.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 00:53:13 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Tue, 16 Nov 1999 13:53:13 +1300
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911121527.PAA12731@toucan.stats.ox.ac.uk>; from Prof Brian Ripley on Fri, Nov 12, 1999 at 03:27:31PM +0000
References: <199911121527.PAA12731@toucan.stats.ox.ac.uk>
Message-ID: <19991116135313.C8605@stat1.stat.auckland.ac.nz>

On Fri, Nov 12, 1999 at 03:27:31PM +0000, Prof Brian Ripley wrote:
> 
> > Date: Fri, 12 Nov 1999 10:12:25 -0500
> > From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > 
> [Quoting PD]
> 
> > >It's not supposed to unless you configure --with-gnome, which does
> > >work on RH6.1, so why not on Mandrake.
> > 
> > I expect it works with Mandrake, I didn't try. At first I was a little 
> surprized
> > by configure's message, something like  "Gnome: no". I thought configure
> > couldn't recognize that I was running Gnome, but after quickly scanning
> > configure I decided it had to be specified. Perhaps a message like "not
> > specified" would be less confusing than "no" for things like this?
> 
> How to install Gnome support is in the INSTALL file. I have found it
> very tricky, as both too early and too late versions of the support
> files failed. Last time I tried libglade 0.7 (the then current one) did
> not work, but 0.3 still does despite the remark in that file about
> needing `libglade 0.5 or later'.

Actually, you will get some segfaults and misplaced GUI items with earlier
libglades than 0.5.

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:51:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:51:23 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911160751.IAA11396@pubhealth.ku.dk>

I was getting worried. 0.65 is the first version that I had not been
able to crash. Well the following gives a seg fault on Intel RH5.2
with R0.65.1:
plot(rnorm(20),xlab=expression(mu[Inf]))
You can guess what I was trying to do, as I used infty first and that
did not work. (I now know the correct formula.)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:57:00 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911160757.IAA11504@pubhealth.ku.dk>

The following matrix of normed likelihoods should give a smooth
surface but instead gives a series of spikes in both persp and contour
(the dim labels are the axes values). I know an algorithm cannot be
infallible but it would be nice to have some parameters to control the
smoothing. (It takes close to an hour to produce this matrix on a
Pentium II 300mh. It was after that that it crashed with the Inf in my
previous bug message...)
  Jim

"like" <-
structure(c(0.00176391675079333, 0.00146923361143409, 0.000118873942550920, 
2.60033028913311e-06, 1.36792992686478e-07, 1.8246691363054e-08, 
3.70167824680542e-09, 9.3435105158372e-10, 2.65488573122080e-10, 
8.02477512258327e-11, 2.49374837366522e-11, 7.79989625462184e-12, 
2.42313836128e-12, 7.41635672535047e-13, 2.22582213352616e-13, 
6.53529934129183e-14, 1.87592482515789e-14, 5.26673348630621e-15, 
1.44811282825086e-15, 3.90678315206886e-16, 1.03661464711976e-16, 
0.000357163904115257, 0.00646880985207886, 0.00663283207618763, 
0.0006059775621534, 1.21364454274087e-05, 1.80805906201527e-07, 
4.32774824739439e-08, 7.10745665416504e-09, 1.49838488962873e-09, 
3.63085812144783e-10, 9.50968657445326e-11, 2.5947561761174e-11, 
7.20856405305296e-12, 2.00980008827208e-12, 5.57310934761386e-13, 
1.52876329921416e-13, 4.13626490878394e-14, 1.10248761462956e-14, 
2.89491661046771e-15, 7.49510768794562e-16, 1.91634151378621e-16, 
3.07815510765707e-06, 0.000842181964429961, 0.0191090902323545, 
0.0242142517038679, 0.0025500207241197, 5.00789710794291e-05, 
2.23383985740275e-07, 2.32292942996531e-10, 1.46732078349253e-13, 
3.68779458410766e-16, 4.40310716451135e-10, 1.00615855772164e-10, 
2.42780131405657e-11, 6.03418238957602e-12, 1.52070970641775e-12, 
3.84738608832168e-13, 9.7118421208109e-14, 2.43727608742882e-14, 
6.0703200390455e-15, 1.49975407591609e-15, 3.67743639034840e-16, 
1.73726268058860e-08, 5.6077403337573e-06, 0.00165385022367381, 
0.0459164322410669, 0.0716297725686465, 0.00882904283150518, 
0.000179278272111563, 1.60177707812379e-06, 1.64900664911929e-07, 
1.78009575764431e-08, 2.65523682169734e-09, 4.76742738255559e-10, 
9.5704507548558e-11, 2.05674605214745e-11, 4.60601964796226e-12, 
1.05660190825881e-12, 2.45557822201462e-13, 5.74149524761638e-14, 
1.34489585256116e-14, 3.14879289081088e-15, 7.36195777222565e-16, 
4.89497216471075e-10, 3.81542617663398e-08, 9.09401919276533e-06, 
0.00275857826337638, 0.0909868934673163, 0.172758831413262, 0.0251503663306111, 
0.000549189356381134, 6.31352952358429e-06, 2.68961061449807e-07, 
2.3542509728124e-08, 2.97462447665947e-09, 4.64066856401819e-10, 
8.2401204449613e-11, 1.58824099088396e-11, 3.22710254273834e-12, 
6.78416160046776e-13, 1.45781121121843e-13, 3.17710965274086e-14, 
6.98813199754939e-15, 1.54686370477970e-15, 3.47818999816463e-11, 
1.24676135382412e-09, 7.47555356513558e-08, 1.33070547402354e-05, 
0.00398944889318836, 0.151170953683526, 0.343008298678816, 0.0591272231401392, 
0.00142894699562673, 1.33907834497016e-05, 3.93659041601088e-07, 
2.78925562712552e-08, 2.99820042629106e-09, 4.08906587960769e-10, 
6.46521841575397e-11, 1.12526828683000e-11, 2.08843221915706e-12, 
4.0497894062659e-13, 8.09694435253555e-14, 1.65467499310321e-14, 
3.4370548505308e-15, 2.36576283045907e-18, 9.6063453887084e-11, 
2.77556814791118e-09, 1.30655321075467e-07, 1.77439204853078e-05, 
0.00510559845838645, 0.214466920173550, 0.567639160458647, 0.115409841304071, 
0.00314993314454434, 2.62121724290019e-05, 5.22127208541793e-07, 
2.98270603284278e-08, 2.73794692447261e-09, 3.28356740333764e-10, 
4.65286665769768e-11, 7.36102946837208e-12, 1.25596058135938e-12, 
2.26061516010492e-13, 4.23051443667433e-14, 8.15300298593863e-15, 
3.99072715883438e-22, 2.83505501562795e-14, 2.29827820215666e-10, 
5.41529050920267e-09, 2.04082809865002e-07, 2.17246335811100e-05, 
0.00589627815433526, 0.264755146645107, 0.794255221042976, 0.188611633044143, 
0.0058892450264806, 4.81497713458769e-05, 5.23480571790264e-07, 
2.90107005693282e-08, 2.28108910907203e-09, 2.41888199776289e-10, 
3.09098051610835e-11, 4.47297169082052e-12, 7.05971252516243e-13, 
1.18646681896628e-13, 2.09007567575968e-14, 8.06100365206625e-25, 
2.18287769171281e-12, 3.07070436176694e-11, 4.77976958766606e-10, 
9.29640006576001e-09, 2.85897928086818e-07, 2.45914840639008e-05, 
0.00625816114089017, 0.289727465683434, 0.954240423750235, 0.260767136275309, 
0.00937565110886506, 8.04807869366302e-05, 4.13417517052559e-07, 
2.58678609575225e-08, 1.74581722289468e-09, 1.64522993158554e-10, 
1.90706199624332e-11, 2.53949873007858e-12, 3.72937444797563e-13, 
5.88524940943896e-14, 3.65274225587674e-33, 4.9389582496641e-13, 
5.65186883970257e-12, 6.65975799830656e-11, 8.6809873616086e-10, 
1.41133330282008e-08, 3.60982749125254e-07, 2.59299077617796e-05, 
0.00620782524427522, 0.286042286522196, 1, 0.308581298903377, 
0.012787802505642, 0.000119814119096249, 3.89699972443826e-07, 
4.28239635744095e-09, 1.23578822564739e-09, 1.03967816983612e-10, 
1.09920523132901e-11, 1.35456065143129e-12, 1.86115310490081e-13, 
1.56145767292107e-41, 1.33774563914851e-13, 1.31018253984329e-12, 
1.26291081169715e-11, 1.25596067133136e-10, 1.38451927615464e-09, 
1.90623084689258e-08, 4.13346862060707e-07, 2.57000620053891e-05, 
0.00584257176393386, 0.258897858120271, 0.928289223693575, 0.316472953831898, 
0.0150604098742057, 0.000157636305579563, 4.66131468431873e-07, 
1.02471388660295e-09, 8.14501436992245e-10, 6.14139871202027e-11, 
5.95236937841971e-12, 6.82398718856752e-13, 3.59696367652483e-45, 
4.17012864602969e-14, 3.61582027534016e-13, 2.99359617683961e-12, 
2.44700291837697e-11, 2.07141151264903e-10, 1.95144184735262e-09, 
2.3063051089858e-08, 4.32380395847584e-07, 2.42199262846122e-05, 
0.00528608113143016, 0.217875130836358, 0.774532881221181, 0.284901732794224, 
0.0154537854803841, 0.000183185641023271, 7.49559849539294e-07, 
7.11024159705725e-09, 5.03182614447118e-10, 3.41104188233311e-11, 
3.04474903274232e-12, 2.91565192035724e-49, 1.45537916525653e-14, 
1.14411789285803e-13, 8.40641488198468e-13, 5.92035604270047e-12, 
4.13543450691788e-11, 3.00704186586863e-10, 2.44790109904596e-09, 
2.51842772491441e-08, 4.16658016813605e-07, 2.2030173910067e-05, 
0.00464757376571756, 0.172524827842122, 0.588668692999348, 0.227992352386208, 
0.0139517782319954, 0.000188633229943610, 8.86576659202643e-07, 
8.13397456171407e-09, 2.93295902434683e-10, 1.79158142536354e-11, 
7.45440431708058e-47, 5.57324949893741e-15, 4.04199649080243e-14, 
2.69734042179215e-13, 1.68938567781956e-12, 1.01927093362378e-11, 
6.13516958431207e-11, 3.86968272588105e-10, 2.75370252448967e-09, 
2.50248238015754e-08, 3.7340350663148e-07, 1.97272833278079e-05, 
0.00400365893374786, 0.129796777376395, 0.412414570496338, 0.164160599019082, 
0.0111950329180545, 0.000173055912545285, 8.82222548801061e-07, 
4.80789035062023e-09, 1.62361855274262e-10, 4.83378466824916e-56, 
8.87835079570885e-18, 6.32443372364351e-17, 4.07759026116548e-16, 
2.41133621758854e-15, 1.32984475458358e-14, 6.98407810862943e-14, 
3.5876395093759e-13, 1.86752746531279e-12, 1.03460205332741e-11, 
6.5602704947161e-11, 5.36647863367684e-10, 7.15363285132962e-09, 
2.90880056585854e-07, 3.40712247087175e-05, 0.000889612332838851, 
0.00257111974780624, 0.000787883478550474, 3.37033079485353e-05, 
3.19292591662659e-07, 1.25686609615895e-09, 2.20162002662816e-172, 
1.18597942112121e-48, 6.527184937565e-15, 3.76449635250464e-14, 
1.98306897773082e-13, 9.70704477624762e-13, 4.51159875267329e-12, 
2.04683300082797e-11, 9.4028641613087e-11, 4.60396075448249e-10, 
2.59711739759405e-09, 1.92985480623786e-08, 2.52186810950586e-07, 
1.66549678505953e-05, 0.00284973810807315, 0.0647861189211352, 
0.164928028751616, 0.0648087223198986, 0.00527057924509832, 0.000105880347544938, 
6.77764435724914e-07, 2.28917610742849e-62, 4.77089470347806e-16, 
2.90684328179923e-15, 1.58418783461786e-14, 7.81422076667516e-14, 
3.54025380712877e-13, 1.49985566240899e-12, 6.0772181174916e-12, 
2.42262881670020e-11, 9.86595400000035e-11, 4.32695300245282e-10, 
2.21589694896341e-09, 1.52732771943930e-08, 1.95128248997183e-07, 
1.6227265119312e-05, 0.00236310192186473, 0.0433722389788253, 
0.0956364137992563, 0.0362445630341557, 0.00315366776340453, 
7.16975146683838e-05, 5.80651995967573e-63, 2.34504934024876e-16, 
1.36875718371988e-15, 7.1042764643222e-15, 3.31337397882331e-14, 
1.40655421593731e-13, 5.51935966365771e-13, 2.04006223917774e-12, 
7.26797589881895e-12, 2.56974962454299e-11, 9.37288857779561e-11, 
3.72485772585405e-10, 1.75589938246813e-09, 1.14398993072651e-08, 
1.48193436103776e-07, 1.63921456901643e-05, 0.00193532901795850, 
0.028105645771033, 0.052765310952557, 0.0189719774467987, 0.00174369601611880
), .Dim = c(21, 18), .Dimnames = list(c("1.4", "1.42", "1.44", 
"1.46", "1.48", "1.5", "1.52", "1.54", "1.56", "1.58", "1.6", 
"1.62", "1.64", "1.66", "1.68", "1.7", "1.72", "1.74", "1.76", 
"1.78", "1.8"), c("2.32", "2.345", "2.37", "2.395", "2.42", "2.445", 
"2.47", "2.495", "2.52", "2.545", "2.57", "2.595", "2.62", "2.645", 
"2.67", "2.695", "2.72", "2.745")))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 09:19:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 10:19:17 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 16 Nov 1999 08:51:23 +0100 (MET)"
References: <199911160751.IAA11396@pubhealth.ku.dk>
Message-ID: <x21z9qlroq.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> I was getting worried. 0.65 is the first version that I had not been
> able to crash. Well the following gives a seg fault on Intel RH5.2
> with R0.65.1:
> plot(rnorm(20),xlab=expression(mu[Inf]))
> You can guess what I was trying to do, as I used infty first and that
> did not work. (I now know the correct formula.)
>   Jim

Doesn't crash in my version of 0.90pre...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 10:21:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 11:21:31 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Peter Dalgaard BSA's message of "16 Nov 1999 10:19:17 +0100"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> jlindsey@alpha.luc.ac.be writes:
> 
> > I was getting worried. 0.65 is the first version that I had not been
> > able to crash. Well the following gives a seg fault on Intel RH5.2
> > with R0.65.1:
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> > You can guess what I was trying to do, as I used infty first and that
> > did not work. (I now know the correct formula.)
> >   Jim
> 
> Doesn't crash in my version of 0.90pre...

..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
session? If so, try running it under R -d gdb (just type "r" to run
the program) and tell us where it crashed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 11:03:08 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 12:03:08 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911161103.MAA15162@pubhealth.ku.dk>

> From: jlindsey@alpha.luc.ac.be
> Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> 
> The following matrix of normed likelihoods should give a smooth
> surface but instead gives a series of spikes in both persp and contour
> (the dim labels are the axes values). I know an algorithm cannot be
> infallible but it would be nice to have some parameters to control the
> smoothing. (It takes close to an hour to produce this matrix on a
> Pentium II 300mh. It was after that that it crashed with the Inf in my
> previous bug message...)


I am sorry, but I don't understand. contour does not do any
smoothing, but interpolates assuming smoothness.  The data
appears to me to be a series of spikes just off the diagonal, and not
what contour thinks of as a smooth surface.  It is common to 
interpolate the data from such a coarse grid before contouring.

persp just plots the data with visual linear interpolation.

> round(like*100,0)
     2.32 2.345 2.37 2.395 2.42 2.445 2.47 2.495 2.52 2.545 2.57 2.595 2.62
1.4     0     0    0     0    0     0    0     0    0     0    0     0    0
1.42    0     1    0     0    0     0    0     0    0     0    0     0    0
1.44    0     1    2     0    0     0    0     0    0     0    0     0    0
1.46    0     0    2     5    0     0    0     0    0     0    0     0    0
1.48    0     0    0     7    9     0    0     0    0     0    0     0    0
1.5     0     0    0     1   17    15    1     0    0     0    0     0    0
1.52    0     0    0     0    3    34   21     1    0     0    0     0    0
1.54    0     0    0     0    0     6   57    26    1     0    0     0    0
1.56    0     0    0     0    0     0   12    79   29     1    0     0    0
1.58    0     0    0     0    0     0    0    19   95    29    1     0    0
1.6     0     0    0     0    0     0    0     1   26   100   26     1    0
1.62    0     0    0     0    0     0    0     0    1    31   93    22    0
1.64    0     0    0     0    0     0    0     0    0     1   32    77   17
1.66    0     0    0     0    0     0    0     0    0     0    2    28   59
1.68    0     0    0     0    0     0    0     0    0     0    0     2   23
1.7     0     0    0     0    0     0    0     0    0     0    0     0    1
1.72    0     0    0     0    0     0    0     0    0     0    0     0    0
1.74    0     0    0     0    0     0    0     0    0     0    0     0    0
1.76    0     0    0     0    0     0    0     0    0     0    0     0    0
1.78    0     0    0     0    0     0    0     0    0     0    0     0    0
1.8     0     0    0     0    0     0    0     0    0     0    0     0    0
     2.645 2.67 2.695 2.72 2.745
1.4      0    0     0    0     0
1.42     0    0     0    0     0
1.44     0    0     0    0     0
1.46     0    0     0    0     0
1.48     0    0     0    0     0
1.5      0    0     0    0     0
1.52     0    0     0    0     0
1.54     0    0     0    0     0
1.56     0    0     0    0     0
1.58     0    0     0    0     0
1.6      0    0     0    0     0
1.62     0    0     0    0     0
1.64     0    0     0    0     0
1.66    13    0     0    0     0
1.68    41    0     0    0     0
1.7     16    0     6    0     0
1.72     1    0    16    4     0
1.74     0    0     6   10     3
1.76     0    0     1    4     5
1.78     0    0     0    0     2
1.8      0    0     0    0     0


If I do some interpolation

library(akima)
x <- as.numeric(rownames(like))
y <- as.numeric(colnames(like))
xx <- expand.grid(x=x, y=y)
like1 <- interp(xx$x, xx$y, like, seq(1.4, 1.8, len=50), seq(2.3, 2.8, len=50))
contour(like1$x, like1$y,like1$z)

I get a slightly smoother result, but still five peaks.  (Are the
values for col=2.67 correct?)

I guess you need to evaluate this on a finer grid near the diagonal,
and probably adjust the coordinate system to get enough resolution
on the anti-diagonal.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 13:15:59 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 14:15:59 +0100
Subject: spikes in contour and persp (PR#327)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 16 Nov 1999 12:03:08 +0100 (MET)"
References: <199911161103.MAA15162@pubhealth.ku.dk>
Message-ID: <x21z9q37cg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > From: jlindsey@alpha.luc.ac.be
> > Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> > 
> > The following matrix of normed likelihoods should give a smooth
> > surface but instead gives a series of spikes in both persp and contour
> > (the dim labels are the axes values). I know an algorithm cannot be
> > infallible but it would be nice to have some parameters to control the
> > smoothing. (It takes close to an hour to produce this matrix on a
> > Pentium II 300mh. It was after that that it crashed with the Inf in my
> > previous bug message...)
> 
> 
> I am sorry, but I don't understand. contour does not do any
> smoothing, but interpolates assuming smoothness.  The data
> appears to me to be a series of spikes just off the diagonal, and not
> what contour thinks of as a smooth surface.  It is common to 
> interpolate the data from such a coarse grid before contouring.
> 
> persp just plots the data with visual linear interpolation.
> 

To elaborate a little: The contouring is of course algorithm
dependent.

Let's look at a section of the data:

    1   17    15    1     0    0  
    0    3    34   21     1    0  
    0    0     6   57    26    1  
    0    0     0   12    79   29  

One contouring method works by linear interpolation on triangles, so when
creating the line for, say z=25, it will draw four lines *around* 34,
then one connecting the 21-57 line, the 6-57, the 12-57 and the 12-79
and on the other end 21-26 (diag) 26-1 (vertical) 26-1 (horizontal) and 1-29.
This gives two disjoint contours and an apparent peak at 34. The
algorithm in R is pretty similar to this as far as I recall.

Alternatively one could have bilinear interpolation which would fit a
curve with a saddlepoint to the square

34 21
 6 57

and draw one connected contour. However, bilinear interpolation is a
bit of a pain, because the contours are not lines, but pieces of a
hyperbola, which is not nearly as easy to draw. And if the contour
level is close enough to 34, you'll get the peak effect anyway.

In any case, this is not a bug, it's an algorithm with shortcomings.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 13:51:25 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 14:51:25 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>> jlindsey@alpha.luc.ac.be writes:
>> 
>> > I was getting worried. 0.65 is the first version that I had not been
>> > able to crash. Well the following gives a seg fault on Intel RH5.2
>> > with R0.65.1:
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> > You can guess what I was trying to do, as I used infty first and that
>> > did not work. (I now know the correct formula.)
>> >   Jim
>> 
>> Doesn't crash in my version of 0.90pre...

> ..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
> session? If so, try running it under R -d gdb (just type "r" to run
> the program) and tell us where it crashed.

You rang?

> plot(rnorm(20),xlab=expression(mu[Inf]))

Program received signal SIGSEGV, Segmentation fault.
0x4019a3ce in   ()
(gdb) bt
#0  0x4019a3ce in   ()
#1  0x4019798e in   ()
#2  0x4019100e in   ()
#3  0x4018d81c in vfprintf ()
#4  0x401980b3 in vsprintf ()
#5  0x40193351 in sprintf ()
#6  0x80cc359 in asChar (x=0x20202020)
    at /home/Hornik/src/apps/R/r-devel/R/src/main/util.c:200
#7  0x20202020 in ?? ()

Helpful?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sunadmin@statistik.uni-dortmund.de  Tue Nov 16 14:21:35 1999
From: sunadmin@statistik.uni-dortmund.de (sunadmin@statistik.uni-dortmund.de)
Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161421.PAA18504@pubhealth.ku.dk>

Full_Name: Thomas Langhans
Version: 0.65
OS: Solaris 7
Submission from: (NULL) (129.217.131.31)


I tried to install the package "leap" on our Sun Enterprise 400 running Solaris
7,
but it fails: cause the g77 doesn't compiles the fortran-sources properly, I 
translated them with f2c to c-source.
Running R INSTALL produces the following message:
Installing package `leaps' ...
 libs
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
leapshdr.o
ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
leapshdr.o -lF77 -lI77
 R
 help
 >>> Building/Updating help pages for package `leaps'
     Formats: text html latex example 
 DONE (leaps)
DONE (INSTALL)

So anything seems to be fine. But any time I load the library, R raises an
error:

> library(leaps)
Error in dyn.load(file) : unable to load shared library
"/sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so":
  ld.so.1: /sw/sun4_55/R-0.65.0/lib/R/bin/R.binary: fatal: relocation error:
file /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so: symbol sig_die:
referenced symbol not found

The same error do I get when I install the package "ppr". Other packages work
fine.

I hope somebody can help me, cause these librarys are very important for a
running project
at our departement.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:15:57 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 16 Nov 1999 16:15:57 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161515.QAA19438@pubhealth.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:18:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 16:18:26 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Kurt Hornik's message of "Tue, 16 Nov 1999 14:51:25 +0100 (CET)"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk> <x27lji3ff8.fsf@blueberry.kubism.ku.dk> <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
Message-ID: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 16:21:19 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 17:21:19 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161621.RAA20059@pubhealth.ku.dk>


> From: sunadmin@statistik.uni-dortmund.de
> Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: Installation of package fails (PR#328)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Thomas Langhans
> Version: 0.65
> OS: Solaris 7
> Submission from: (NULL) (129.217.131.31)
> 
> 
> I tried to install the package "leap" on our Sun Enterprise 400 running 
Solaris
> 7,
> but it fails: cause the g77 doesn't compiles the fortran-sources properly,

What is the error message?  They work for me.

>  I translated them with f2c to c-source.
> Running R INSTALL produces the following message:
> Installing package `leaps' ...
>  libs
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
> leapshdr.o
> ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
> leapshdr.o -lF77 -lI77

Are those the libraries for g77? They look like those for f77 to me.
Do you have the current version (2.0) of leaps?  Does by any chance 
leaps/src/Makefile exist?  If so try deleting it.

AFAIK g77 on Solaris should have -lg2c -lm in FLIBS: that is what 
my installation (gcc-2.95 on Solaris 2.6) gives. If you use f2c, you
need -lf2c -lm.

> The same error do I get when I install the package "ppr". Other packages work
> fine.

Um. That is obselete, and its code is in package modreg, which must
have been installed at the original build. So that suggests your setup
is OK, but that a Makefile is wrong.


If you really get stuck I can let you have a pre-compiled version for leaps.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:44 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 16 Nov 1999 18:02:44 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161702.SAA20336@pubhealth.ku.dk>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 18:02:47 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
 <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
 <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.36407.473934.711315@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 21:39:19 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 10:39:19 +1300
Subject: (G)UI for R and in R
In-Reply-To: <6r4sen9zrx.fsf@franz.stat.wisc.edu>; from Douglas Bates on Mon, Nov 15, 1999 at 04:05:22PM -0600
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu>
Message-ID: <19991117103919.C13694@stat1.stat.auckland.ac.nz>

On Mon, Nov 15, 1999 at 04:05:22PM -0600, Douglas Bates wrote:
> First, let me say that I come from the command-line-oriented world and
> most of the time I find that graphical user interfaces just get in the
> way.  Like many people who use implementations of the S language
> (i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
> preferred environment for running and editing S code is emacs with the
> ESS package.
> 
> My responses on a GUI for writing scripts are from this perspective
> but I do recognize that many people find a GUI much more comfortable
> than trying to remember lots of archane function names and, in the
> case of emacs, keystrokes.
> 

People who are interested in the GUI side of things might want to look at
http://stat.auckland.ac.nz/~lyndon/xmldef.html, which I did a couple of
months ago.  This is aimed at helping people construct function calls.  I
would also like to come up with an interface for something like wizards,
which would take beginners through the process of something like reading
in a dataset, and performing some analysis on it.  However, I am *not* a
stats person, so I would need some help with this.

The general idea is that if we specify GUI interfaces using an XML file
format, then implementing the interface on a particular platform is
fairly simple.

> Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:
> 
> > 2) for help with writing R scripts
> >    Does R help me with a graphical introspection tool?  I guess this
> > is what the object explorer is meant for.  Can I bring up a list of
> > objects and kinda click my way to the attributes of the object?  its
> > data?  (Not unusual scenario: And why does apply not work this time?
> > Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> > a function and send it to an editor?  Find out where it came from?
> 
> (BTW, I think you mean "graphical inspection tool".)  Although not a
> substitute for graphical inspection, I find Martin Maechler's "str"
> function to be invaluable when I am trying to remember the structure
> of various objects, including (and perhaps especially) those for which
> I designed the structure.
> 
> As far as editing a function definition, there are excellent
> facilities within ESS for that.  Object name completion within ESS is
> by itself worth the price of learning to use the mode.

Editing is one of my main todo items.  What features of ESS are really
important to people (object name completion is already something I want
to do)?

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 21:59:28 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 13:59:28 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 10:39:19 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz>
Message-ID: <87bt8um727.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Editing is one of my main todo items.  What features of ESS
    LD> are really important to people (object name completion is
    LD> already something I want to do)?

The ones important to me:

- Versioning of objects (i.e. placing text versions of R functions
  under version control)
- literate data analysis/programming
- ability to send R code to multiple processes

and most importantly: 
- Emacs key-bindings 
:-).

In general, I think the third is useful for a GUI, the first would be
nice, and the 4th would be crucial -- probably VI bindings, as
well... 

Now for some less cynical feedback: Looking at your XML code, it'd be
nice to have a means of bringing up an example, i.e. a filled out
screen with an additional text window which described what could be
done (you do/are having a help-feature-window-thingy, right)?

I.e. create a button on the window which would show examples for
read.table for a tab-sep'd file, CSV file, etc...  This would
literally be the R-ex files GUI'd up (gooey'd up... I like that one,
and so would my 2-year old :-), with a text window described what
each or a selected one would do.

Tres cool, and we can't really do that to the same extent with ESS
(well, we can dump code from the help buffer, but it's really run, not 
an example!). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 22:38:00 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 11:38:00 +1300
Subject: (G)UI for R and in R
In-Reply-To: <87bt8um727.fsf@alpha.cfas.washington.edu>; from A.J. Rossini on Tue, Nov 16, 1999 at 01:59:28PM -0800
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu>
Message-ID: <19991117113800.D13694@stat1.stat.auckland.ac.nz>

On Tue, Nov 16, 1999 at 01:59:28PM -0800, A.J. Rossini wrote:
> 
> >>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:
> 
>     LD> Editing is one of my main todo items.  What features of ESS
>     LD> are really important to people (object name completion is
>     LD> already something I want to do)?
> 
> The ones important to me:
> 
> - Versioning of objects (i.e. placing text versions of R functions
>   under version control)
> - literate data analysis/programming
> - ability to send R code to multiple processes
> 
> and most importantly: 
> - Emacs key-bindings 
> :-).
> 
> In general, I think the third is useful for a GUI, the first would be
> nice, and the 4th would be crucial -- probably VI bindings, as
> well... 
> 

The first is probably not possible.  I think that this is not too difficult
in Emacs because there is already code to do version control.  The third is
also difficult, simply because an editor is created for a particular R
process.  Copy and paste would work, though :-).

Could you explain the second item (literate data analysis/programming)?  I
have a vague understanding of literate programming (mostly in the context
of Web), but I don't know very much about it.

The fourth item might actually be possible in the next major version of
GTK+ (the widget set that Gnome uses).  However, that's a little way off.

Based on this, I'd say that it will be pretty difficult to replicate ESS's
functionality.  I guess some people will be sticking with Emacs (strange
people... ;-).

> Now for some less cynical feedback: Looking at your XML code, it'd be
> nice to have a means of bringing up an example, i.e. a filled out
> screen with an additional text window which described what could be
> done (you do/are having a help-feature-window-thingy, right)?
> 
> I.e. create a button on the window which would show examples for
> read.table for a tab-sep'd file, CSV file, etc...  This would
> literally be the R-ex files GUI'd up (gooey'd up... I like that one,
> and so would my 2-year old :-), with a text window described what
> each or a selected one would do.
> 
> Tres cool, and we can't really do that to the same extent with ESS
> (well, we can dump code from the help buffer, but it's really run, not 
> an example!). 

Very cool idea.  I'll have a think about how to do it (finding the time
to actually implement it is another matter).

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 22:54:54 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 14:54:54 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 11:38:00 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu> <19991117113800.D13694@stat1.stat.auckland.ac.nz>
Message-ID: <87u2mmkpxd.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Based on this, I'd say that it will be pretty difficult to
    LD> replicate ESS's functionality.  I guess some people will be
    LD> sticking with Emacs (strange people... ;-).

But you should be able to get object completions and the emacs/vi
keybindings :-).  Those are the basic needs...

Syntax highlighting would be nice, if easily possible.

    >> Now for some less cynical feedback: Looking at your XML code,
    >> it'd be nice to have a means of bringing up an example, i.e. a
    >> filled out screen with an additional text window which
    >> described what could be done (you do/are having a
    >> help-feature-window-thingy, right)?
    >>
    >> I.e. create a button on the window which would show examples
    >> for read.table for a tab-sep'd file, CSV file, etc...  This
    >> would literally be the R-ex files GUI'd up (gooey'd up... I
    >> like that one, and so would my 2-year old :-), with a text
    >> window described what each or a selected one would do.
    >>
    >> Tres cool, and we can't really do that to the same extent with
    >> ESS (well, we can dump code from the help buffer, but it's
    >> really run, not an example!).

    LD> Very cool idea.  I'll have a think about how to do it (finding
    LD> the time to actually implement it is another matter).

Actually, it isn't too hard.  Read up on what XSL (the XML
Stylesheets) can do.  Basically, 

XML interface ->  what you described, under one path (my-interface.xml)
	      ->  the wizards/examples, under another path 
		  (my-example-and-wizards.xml)

and then the 2 new *.xml files are used for corresponding stuff...

Best of all, all the information is there in the documentation!  (the
R-ex stuff, I mean).

The catch?  You need an XSLT engine written in C (or C++).  I think
there are a few in C++ (I know there are for Python and Java) but have 
no pointers.  

For a decent powerpoint example on XSLT which I found incredible lucid
(it's GPL'd -- weird notion, MS formatted information publically
available), see:
	http://www.xfront.org/xsl.html
and follow the links...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 20 18:26:33 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 20 Nov 1999 19:26:33 +0100 (MET)
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
Message-ID: <199911201826.TAA28900@pubhealth.ku.dk>

Dear Sirs,

I had the following (reproducible) problem:

g1 <- gl(3,4)
g2 <- gl(2,2,12)
y <- rnorm(12)
AA <- aggregate(y,list(g1,g2),mean)

print(AA,2)                       # I should've said 'digits=2' but ... 
Segmentation fault (core dumped)

# print(AA)  and  print(AA,digits=2) work as expected

Many thanks,  -Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 20 20:33:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Nov 1999 21:33:34 +0100
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
In-Reply-To: rnassar@duke.edu's message of "Sat, 20 Nov 1999 19:26:33 +0100 (MET)"
References: <199911201826.TAA28900@pubhealth.ku.dk>
Message-ID: <x2903shpi9.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> Dear Sirs,
> 
> I had the following (reproducible) problem:
> 
> g1 <- gl(3,4)
> g2 <- gl(2,2,12)
> y <- rnorm(12)
> AA <- aggregate(y,list(g1,g2),mean)
> 
> print(AA,2)                       # I should've said 'digits=2' but ... 
> Segmentation fault (core dumped)

Still there in 0.90.0 pre, looks easy to fix. Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911210615.HAA11567@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
--same as PR#257
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
--Is this a bug? Seems to be as documented and as the prototype

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 323 *
Subject:  { and } in examples get confused in help 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 14 Nov 1999 22:51:43 GMT
* PR# 324 *
Subject: R 0.65.1 config bug
From: "Dr K.M. Briggs" <kmb28@cus.cam.ac.uk>
Date: Mon, 15 Nov 1999 13:38:42 +0000 (GMT)
* PR# 325 *
Subject: xlim, ylim problem in barplot
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Mon, 15 Nov 1999 16:07:43 -0500 (EST)
* PR# 326 *
Subject: Inf in expression
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:51:13 +0100 (MET)
* PR# 327 *
Subject: spikes in contour and persp
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:56:57 +0100 (MET)
* PR# 328 *
Subject: Installation of package fails
From: sunadmin@statistik.uni-dortmund.de
Date: Tue, 16 Nov 1999 15:21:34 +0100 (MET)
* PR# 329 *
Subject: ´óÁ¿¹©Ó¦»ÆÓñÊ¯
From: "superabcd" <superabcd@21cn.com>
Date: Fri, 19 Nov 1999 18:51:24
* PR# 330 *
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 20 Nov 1999 13:22:21 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Nov 21 19:48:44 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 21 Nov 1999 20:48:44 +0100 (MET)
Subject: continuous key press results in core dump (PR#331)
Message-ID: <199911211948.UAA01574@pubhealth.ku.dk>

I  encountered this today (I admit it is a result of downright abuse)

Segmentation fault under abnormal conditions (as when stupid finger
accidentally leaned on key): 

at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
characters but NOT when enclosed in " ", and not if numbers. 

> 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
[1] 1.234568e+157
> zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
Segmentation fault (core dumped)

Again, many thanks and best wishes,

Rashid
--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 20:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Nov 1999 21:58:36 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: rnassar@duke.edu's message of "Sun, 21 Nov 1999 20:48:44 +0100 (MET)"
References: <199911211948.UAA01574@pubhealth.ku.dk>
Message-ID: <x2bt8nef43.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> I  encountered this today (I admit it is a result of downright abuse)
> 
> Segmentation fault under abnormal conditions (as when stupid finger
> accidentally leaned on key): 

...which is exactly why this kind of fault mustn't happen.

> at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
> characters but NOT when enclosed in " ", and not if numbers. 
> 
> > 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
> [1] 1.234568e+157
> > zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
> Segmentation fault (core dumped)

Yup, in dstruct.c we have

static int ddVal(SEXP name)
{
    char buf[128], *endp, *val;
    int rval;

    strcpy(buf, CHAR(name));

..which at the very least has to have a str*n*cpy in order not to
corrupt the stack if CHAR(name) is too large. Or perhaps better:
allocate buf explicitly instead of via a stack variable.

Not sure I'll be able to get it fixed tonight though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 23:24:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 00:24:19 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: Peter Dalgaard BSA's message of "21 Nov 1999 21:58:36 +0100"
References: <199911211948.UAA01574@pubhealth.ku.dk> <x2bt8nef43.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ln7r5syk.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Yup, in dstruct.c we have
> 
> static int ddVal(SEXP name)
> {
>     char buf[128], *endp, *val;
>     int rval;
> 
>     strcpy(buf, CHAR(name));
> 
> ..which at the very least has to have a str*n*cpy in order not to
> corrupt the stack if CHAR(name) is too large. Or perhaps better:
> allocate buf explicitly instead of via a stack variable.
> 
> Not sure I'll be able to get it fixed tonight though.

Squished. That buffer should never have been there in the first place...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:13:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:13:34 -0500
Subject: R-0.90.0 untar
Message-ID: <38396BAE.FB736CBD@bank-banque-canada.ca>

 I had a couple of problems getting R 0.90.0.  In case anyone has
similar problems, I though I would mention them.

1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
service does not seem to be available. Perhaps this is intended. I only
discovered it because I thought the file I got through Netscape might be
corrupted. (I don't understand why Netscape ftp://... should work but
anonymous ftp does not.)

2/ From Netscape (Linux) with
ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
or
http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
onto my file server works. However, if I try to untar on a workstation
in a directory mounted from the file server, it fails with lots of
messages about "Error while closing: Operation not permitted." I suspect
this may be a peculiar combination of user/group ownerships (perhaps not
all with the same ids on my workstation and server), but I have never
had the problem before (not even with R-devel from a few days ago).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 22 16:30:54 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Nov 1999 17:30:54 +0100 (MET)
Subject: R-0.90.0 untar
In-Reply-To: <38396BAE.FB736CBD@bank-banque-canada.ca>
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <14393.28606.63116.442782@gargle.gargle.HOWL>

>>>>> On Mon, 22 Nov 1999 11:13:34 -0500, Paul Gilbert <pgilbert@bank-banque-canada.ca> said:

    PaulG>  I had a couple of problems getting R 0.90.0.  In case anyone
    PaulG> has similar problems, I though I would mention them.

    PaulG> 1/ I can't use "ftp cvs.r-project.org" from either home or
    PaulG> work. The ftp service does not seem to be available. Perhaps
    PaulG> this is intended. I only discovered it because I thought the
    PaulG> file I got through Netscape might be corrupted. (I don't
    PaulG> understand why Netscape ftp://... should work but anonymous ftp
    PaulG> does not.)

anonymous FTP (through emacs' ange-ftp/efs) works fine for me.

    PaulG> 2/ From Netscape (Linux) with
    PaulG> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz or
    PaulG> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

    PaulG> I get a file which gunzips ok. Also tar -xf in /tmp or when
    PaulG> signed onto my file server works. However, if I try to untar on
    PaulG> a workstation in a directory mounted from the file server, it
    PaulG> fails with lots of messages about "Error while closing:
    PaulG> Operation not permitted." I suspect this may be a peculiar
    PaulG> combination of user/group ownerships (perhaps not all with the
    PaulG> same ids on my workstation and server), but I have never had the
    PaulG> problem before (not even with R-devel from a few days ago).

same big problem for me.
I thought it was because had other big problems today,
but the reason seems these funny permissions.

tar tfvz R-0.90.0.tgz
lists most files with permissions

-rw-rwSr--

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 16:47:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 17:47:41 +0100
Subject: R-0.90.0 untar
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:13:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <x27lja1niq.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

>  I had a couple of problems getting R 0.90.0.  In case anyone has
> similar problems, I though I would mention them.
> 
> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
> service does not seem to be available. Perhaps this is intended. I only
> discovered it because I thought the file I got through Netscape might be
> corrupted. (I don't understand why Netscape ftp://... should work but
> anonymous ftp does not.)

Works from here. The machine doesn't like you to login using 'guest'
but insists on 'anonymous', though. Also, tcp-wrappers may get you if
you login from a system with no valid DNS entry.
 
> 2/ From Netscape (Linux) with
> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> or
> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> 
> I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
> onto my file server works. However, if I try to untar on a workstation
> in a directory mounted from the file server, it fails with lots of
> messages about "Error while closing: Operation not permitted." I suspect
> this may be a peculiar combination of user/group ownerships (perhaps not
> all with the same ids on my workstation and server), but I have never
> had the problem before (not even with R-devel from a few days ago).

???? I see it too. There's an S bit set in the tar file for those files
that won't install. But what the %/&%/ is it doing there? I'll have a
look. Presumably, that's a permission change which requires setuid
root to set, and the file system is mounted w/o root permission.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:52:27 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:52:27 -0500
Subject: R 0.90.0 configure
Message-ID: <383974CA.F27D565D@bank-banque-canada.ca>

After working around previously mentioned untar problems I tried
./configure, which failed immediately because of improper permissions on
config.site. When I changed the permissions on config.site it failed
with:

./configure:  ./config.site:   Input/output error.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:11:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:11:00 +0100
Subject: R 0.90.0 configure
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:52:27 -0500"
References: <383974CA.F27D565D@bank-banque-canada.ca>
Message-ID: <x24see1mfv.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> After working around previously mentioned untar problems I tried
> ./configure, which failed immediately because of improper permissions on
> config.site. When I changed the permissions on config.site it failed
> with:
> 
> ./configure:  ./config.site:   Input/output error.

I've put up new versions without the offending setgid bit. Please
retry. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 22 17:18:47 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 22 Nov 1999 12:18:47 -0500
Subject: R-0.90.0 untar
In-Reply-To: Your message of "Mon, 22 Nov 1999 17:30:54 +0100."
 <14393.28606.63116.442782@gargle.gargle.HOWL>
Message-ID: <199911221718.MAA19296@infiniti.ece.cmu.edu>


Martin Maechler <maechler@stat.math.ethz.ch> writes:

Martin> tar tfvz R-0.90.0.tgz
Martin> lists most files with permissions
Martin> 
Martin> -rw-rwSr--

One reason you may get these warnings is when you try this in AFS
land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
the set-gid bit and it wouldn't make much sense anyway for AFS.

So I'm not surprised that some people see a different behavior between
local untaring and untaring on a mounted disk.

Hmm, the odd thing may be that I usually see the set-gid bit only for
directories (where it's "standard" to have them for a Linux box).

	-tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:34:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:34:53 +0100
Subject: R-0.90.0 untar
In-Reply-To: Thomas Vogels's message of "Mon, 22 Nov 1999 12:18:47 -0500"
References: <199911221718.MAA19296@infiniti.ece.cmu.edu>
Message-ID: <x21z9i1lc2.fsf@blueberry.kubism.ku.dk>

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> Martin> tar tfvz R-0.90.0.tgz
> Martin> lists most files with permissions
> Martin> 
> Martin> -rw-rwSr--
> 
> One reason you may get these warnings is when you try this in AFS
> land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
> the set-gid bit and it wouldn't make much sense anyway for AFS.
> 
> So I'm not surprised that some people see a different behavior between
> local untaring and untaring on a mounted disk.
> 
> Hmm, the odd thing may be that I usually see the set-gid bit only for
> directories (where it's "standard" to have them for a Linux box).

Probably when we setgid our development directories the files in CVS
got setgid as well. (chmod -R will do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:37:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:37:34 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk>
Message-ID: <38397F5E.EF7C01AE@bank-banque-canada.ca>

>> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The
ftp
>> service does not seem to be available. Perhaps this is intended. I
only
>> discovered it because I thought the file I got through Netscape might
be
>> corrupted. (I don't understand why Netscape ftp://... should work but

>> anonymous ftp does not.)

>Works from here. The machine doesn't like you to login using 'guest'
>but insists on 'anonymous', though. Also, tcp-wrappers may get you if
>you login from a system with no valid DNS entry.

I'm working behind a firewall in both cases, at home using IPmasq.
IPmasq should give a valid IP address, but very possibly there is no DNS
entry for my home IP address. The IP masq address will not be the same
as my workstation address. From work, the firewall will change the IP
address of my workstation and replace it with one that should resolve ok
by DNS. In any case, I've never had serious trouble with ftp from either
home or work.

At home my system just waits to timeout, but at work I can break out and
I get the message "Service not available, remote server has closed the
connection." Are you sure you don't have some special priveldges coming
from an "r-project.org" domain? Certainly ftp could be set up for that.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:44:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:44:25 -0500
Subject: R 0.90.0 configure
References: <383974CA.F27D565D@bank-banque-canada.ca> <x24see1mfv.fsf@blueberry.kubism.ku.dk>
Message-ID: <383980F9.47F7651A@bank-banque-canada.ca>

>I've put up new versions without the offending setgid bit. Please
retry.

That looks better. Untar is ok and configure seems to be working. It
will be a few minutes before I compile.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:48:08 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:48:08 +0100
Subject: ftp cvs.r-project.org
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 12:37:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca>
Message-ID: <x2u2mezacn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Wouldn't think so, but I can recheck from home (which is masqueraded
via an ISP, like your setup). Still wouldn't explain your differences
from Netscape ftp://.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 22 17:54:09 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 Nov 1999 17:54:09 +0000 (GMT)
Subject: ftp cvs.r-project.org
Message-ID: <199911221754.RAA11594@toucan.stats.ox.ac.uk>

> Date: Mon, 22 Nov 1999 12:37:34 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Well, I am not coming from one, and it works for me. Indeed, as I am
behind a compulsory proxy, it is not me that the Wisconsin machine sees
but a UK public proxy machine.  Connections to Wisconsin from here are
extremely slow today, and I have had lots of problems with timeouts to
that machine on other days. It might be worth trying on another day.

Using http with wget is probably a quicker route, as http is a more
flexible protocol.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 20:06:29 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 15:06:29 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3839A244.A4BCF69E@bank-banque-canada.ca>

PD>Wouldn't think so, but I can recheck from home (which is masqueraded
PD>via an ISP, like your setup). Still wouldn't explain your differences

PD>from Netscape ftp://.
Please let me know what you find from home. I just re-tried Netscape
ftp:// and  it would not work either, which makes more sense. I must
have been trying too many things at the same time this morning. Netscape
http works fine. Wisconsin certainly was not  slow for me this morning
(R downloaded in less than a minute) but it seems to be having some
trouble now.

BDR>Well, I am not coming from one, and it works for me. Indeed, as I am

BDR>behind a compulsory proxy...
This is similar to what I'm doing from work, but only http and not ftp
work for me. I'll try to get our security guru to see if he can tell
what's wrong. I usually do use http, for the reasons you mention, but I
was trying to narrow down the source of other problems I was having this
morning when I ran into the ftp difficulty.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:14:01 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:14:01 +0100 (MET)
Subject: compile error for mkString on alpha (PR#332)
Message-ID: <199911231414.PAA25164@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


I had to apply the following patch to be able to compile on 
an alpha with DU 4.0E:
###############################################
--- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
+++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
@@ -56,7 +56,8 @@
 SEXP           mkFloat(char *);
 SEXP           mkInteger(char *);
 SEXP           mkNA(void);
-SEXP           mkString(const char *);
+typedef const char cchar;
+SEXP           mkString(cchar *);
 SEXP           mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1363,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(cchar *s)
 {
     SEXP t;
 
################################################
Without the patch I got:

cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^
cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
referenced type of the pointer value "SourceLine" is "unsigned char", which is
not compatible 
with "const signed char". (ptrmismatch)
                    STRING(source)[lines++]  = mkChar(SourceLine);
------------------------------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
1 has a different type than specified in an earlier declaration of this
function. (mism
atparam)
SEXP mkString(const char *s)
-----^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
of "mkString" is not compatible with the type of a previous declaration of
"mkString" at
 line number 59 in file ../../../R/src/main/gram.y. (notcompat)
SEXP mkString(const char *s)
-----^

Then I looked at the preprocessed sources:
cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -E gram.c > gram.E

grep -n mkString gram.E 
8915:SEXP mkString(const char*);
9564:SEXP               mkString(const char *);
11995:SEXP mkString( char *s)
12179:    protect(yylval = mkString(yytext));

I don't know why the third occurrence of "mkString(const char*);" 
(line 11995 of preproccessor output) has the "const" removed, it is present in
the 
source! But the trick with typedefing "const char" to "cconst" in the patch
above works. 


BTW, there are many warnings about mixing "char" and "unsigned char", 
not only in gram.c!

Albrecht



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:23:39 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:23:39 +0100 (MET)
Subject: cpp problem on alpha (PR#333)
Message-ID: <199911231423.PAA25427@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


There is one wrong indented preprocessor directive in src/main/gram.y


cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^

the patch is:
#############################
--- gram.y.orig       Thu Oct  7 19:10:12 1999
+++ gram.y      Tue Nov 23 15:19:31 1999
@@ -1623,9 +1624,9 @@
                SourcePtr = FunctionSource + 8;
            }
            FunctionStart[FunctionLevel] = SourcePtr - 8;
-           #if 0
+#           if 0
            printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-           #endif
+#           endif
        }
        return kw;
     }
#############################

without the patch I got lots of debugging output with parse()

Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 23 15:26:50 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Nov 1999 10:26:50 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <383AB23A.D6B389CE@bank-banque-canada.ca>

I just looked at the "ftp cvs.r-project.org" problem with one of our security
people and it appears that cvs.r-project.org is doing an "ident" back to the
host trying to come in. He says it is the first time he has every seen ftp
request an ident, and that we are not likely going to turn on responding to
ident since it is a possible security hole.

My IPmasq machine at home also does not return ident requests (tcp port 113), so
that is the reason it doesn't work either.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:29:59 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:29:59 +0100 (MET)
Subject: [R] problems with postscript device (PR#334)
Message-ID: <199911231529.QAA25929@pubhealth.ku.dk>

> From:          "Alvaro A. Novo" <novo@uiuc.edu>

Alvaro A. Novo wrote:
> 
> I would suggest that you use instead:
> 
>  plot(1:10,1:10,pch=1:5, cex=0.4)
> 			 ^^^^^^^
> 
> cex = 1 being the default.

You have to look at the postscript file, that is generated by the 
commands I gave in my mail!
The problem is that, even when using cex=0.4, the symbols have a 
different size! Also, symbol number 1 (the circle) is *not* effected 
by the cex-option (maybe because it is too small to be made any 
smaller).
This all concerns only the postscript device.

The only solution I see is not to use the circle-symbol for the
postscript device

Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:31:38 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:31:38 +0100 (MET)
Subject: (Fwd) [R] problems with postscript device (PR#335)
Message-ID: <199911231531.QAA25960@pubhealth.ku.dk>

Hi,

I first sent this mail only to the help list.
But it seems to be a bug worth of fixing.

Wolfgang Koller

------- Forwarded Message Follows -------
From:          "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Organization:  University of Economics, Vienna
To:            r-help@stat.math.ethz.ch
Date:          Tue, 23 Nov 1999 15:14:23 CET (+0100)
Subject:       [R] problems with postscript device

Hi!

The postscript device in 0.90 does not produce symbols (pch=) as it 
should. E.g.:


postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
plot(1:10,1:10,pch=1:5)
legend(1,9,letters[1:5],pch=1:5)
dev.off()

The result looks quite different compared to the X-windows version. 
The symbol 1 (pch=1) is much to small, while the other symbols 
seem to big.

Is it a bug? How can I work it around?


Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 15:48:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 16:48:04 +0100 (MET)
Subject: [R] problems with postscript device (PR#336)
Message-ID: <199911231548.QAA26178@pubhealth.ku.dk>

>>>>> "WoKo" == Wolfgang Koller <koller2@fgr.wu-wien.ac.at> writes:

    WoKo> Hi!  The postscript device in 0.90 does not produce symbols
    WoKo> (pch=) as it should. E.g.:


    WoKo> postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
    WoKo> plot(1:10,1:10,pch=1:5)
    WoKo> legend(1,9,letters[1:5],pch=1:5)
    WoKo> dev.off()

    WoKo> The result looks quite different compared to the X-windows
    WoKo> version.  The symbol 1 (pch=1) is much to small, while the other
    WoKo> symbols seem to big.

    WoKo> Is it a bug?
yes, definitely.
there's a second (less severe) bug, too :

The second symbol (triangle)
is \Delta /\  on x11 (and postscript in R <= 0.65)
          --    __
but is \Lambda  \/  for postscript in R 0.90.0..

    WoKo> How can I work it around?

as you said: by not using  pch=1.... :-)
a patch will probably appear "soon"...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 16:42:28 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 17:42:28 +0100 (MET)
Subject: as.name() is not idempotent (PR#337)
Message-ID: <199911231642.RAA26657@pubhealth.ku.dk>


 as.name(as.name("ss"))

gives an error in R (0.90 and earlier)
but should of course give the same as simply

 as.name("ss") 

This reminds me of similar bug/problem... which I don't recall.

Yes, I should build tests like these into  "make test-Specific" ..
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 23
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Tue Nov 23 16:43:17 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Tue, 23 Nov 1999 17:43:17 +0100 (MET)
Subject: rbind problem (PR#338)
Message-ID: <199911231643.RAA26680@pubhealth.ku.dk>


In the new version 0.90.0, rbind won't take a vector and a matrix from me,
but works OK if I coerce the vector to a matrix.  The following was run on
a new session (i.e., no prior work), and has been duplicated on 2
machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
6.0.

Either case works fine in version 0.65.1.




> t3 <- c(.5, .5)  
> t4 <- matrix(rnorm(8), 4, 2)  
> t3 
[1] 0.5 0.5 
> t4
     [,1]       [,2] 
[1,]  1.0701582 -0.40888504 
[2,] -0.2961581 -1.73051884 
[3,]  0.6191254  0.05958328 
[4,] -1.3844937  0.81863361 
> dim(t3) <- c(1,2)            (make vector a matrix)
> rbind(t3, t4) 
           [,1] [,2] 
[1,]  0.5000000  0.50000000    (so OK when vector coerced)
[2,]  1.0701582 -0.40888504
[3,] -0.2961581 -1.73051884 
[4,]  0.6191254  0.05958328 
[5,] -1.3844937  0.81863361 
> 
> t3 <- c(.5, .5)              (reassign t3 as a vector)
> dim(t3) 
NULL 
> 
> rbind(t3, t4) 

Process R segmentation violation (core dumped) at Tue Nov 23 11:28:05 1999

--------------------------------------------------------------------------

Am I missing something?  Has anyone else come across this problem?  Or is
this a new feature?  I don't see anything in the documentation; indeed,
it says (in the help for cbind and rbind):

When the arguments consist of a mix of matrices and vectors the number of
columns (rosw) of the result is determined by the number of columns (rows)
of the matrix arguments. Any vectors have their values recycled or
subsetted to achieve this length. 

Thanks,

Matt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 17:41:58 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 09:41:58 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911230924150.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 mcw@ln.nimh.nih.gov wrote:

> 
> In the new version 0.90.0, rbind won't take a vector and a matrix from me,
> but works OK if I coerce the vector to a matrix.  The following was run on
> a new session (i.e., no prior work), and has been duplicated on 2
> machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
> 6.0.

Ok, this is an interesting problem in rbind when there are no names and a 
matrix and a vector and deparse_level=1

The reason we segfault is basically
	(gdb) print nrows(R_NilValue)
	$59 = 1076101128
which seems like a bad idea

At lines 1328ff we have a bug where we iterate over the number of rows of
"u", forgetting that after line 1315 u points to the (nonexistent)
dimnames rather than to the matrix.

I'm testing a fix.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:12:24 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:12:24 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231008180.18031-100000@wompom.biostat.washington.edu>


Ok, here's a patch:

	-thomas


*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 09:40:25 1999
***************
*** 1299,1305 ****
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
--- 1299,1305 ----
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
***************
*** 1312,1323 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(u);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(u) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(u)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {
--- 1312,1323 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(v);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(v) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(v)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:14:23 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 23 Nov 1999 19:14:23 +0100 (MET)
Subject: cbind problem (PR#339)
Message-ID: <199911231814.TAA27174@pubhealth.ku.dk>


Probably related to the rbind problem:

> mm<-matrix(0,2,2)
> nn<-c(1,2)
> cbind(mm,nn)
       nn  
[1,] 0  0 1
[2,] 0  0 2
> dimnames(cbind(mm,nn))
[[1]]
NULL

[[2]]
[1] ""   "nn" ""  

The column names are wrong (though at least no segfault this time)


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Nov 23 18:31:33 1999
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Tue, 23 Nov 1999 19:31:33 +0100 (MET)
Subject: "outer" argument in mtext (PR#340)
Message-ID: <199911231831.TAA27225@pubhealth.ku.dk>

mtext(..., outer = TRUE) does not seem to center the text in the outer
margins as it did previously.  Reproduce with

 example(plot.profile.nls, package = "nls")

On versions of the development sources before November 17 this
produced main and subtitles that were centered horizontally on the
page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
is centered over the figure in the upper left the the subtitle
(from mtext("..", side = 1, outer = TRUE)) is centered under the
figure on the lower right.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:splines, package:nls, Autoloads, package:base

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:39:38 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:39:38 -0800 (PST)
Subject: cbind problem (PR#339)
In-Reply-To: <199911231814.TAA27174@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231038330.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 thomas@biostat.washington.edu wrote:

> 
> Probably related to the rbind problem:
> 
Yep.

Patch:

*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 10:16:47 1999
***************
*** 1087,1093 ****
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
--- 1087,1093 ----
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
***************
*** 1100,1112 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(u);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(u) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(u)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {
--- 1100,1112 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(v);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(v) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(v)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chong@stat.purdue.edu  Wed Nov 24 05:18:58 1999
From: chong@stat.purdue.edu (chong@stat.purdue.edu)
Date: Wed, 24 Nov 1999 06:18:58 +0100 (MET)
Subject: [R] problems with postscript device (PR#341)
Message-ID: <199911240518.GAA28976@pubhealth.ku.dk>


   From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
   Organization: University of Economics, Vienna
   Date: Tue, 23 Nov 1999 16:29:22 CET (+0100)
   MIME-Version: 1.0
   Content-type: text/plain; charset=US-ASCII
   Content-transfer-encoding: 7BIT
   CC: r-bugs@biostat.ku.dk, r-help@stat.math.ethz.ch
   References: <153DF9230E8@fgr.wu-wien.ac.at>
   X-mailer: Pegasus Mail for Windows (v2.53/R1)
   Sender: owner-r-help@stat.math.ethz.ch
   Precedence: bulk

   > From:          "Alvaro A. Novo" <novo@uiuc.edu>

   Alvaro A. Novo wrote:
   > 
   > I would suggest that you use instead:
   > 
   >  plot(1:10,1:10,pch=1:5, cex=0.4)
   > 			 ^^^^^^^
   > 
   > cex = 1 being the default.

   You have to look at the postscript file, that is generated by the 
   commands I gave in my mail!
   The problem is that, even when using cex=0.4, the symbols have a 
   different size! Also, symbol number 1 (the circle) is *not* effected 
   by the cex-option (maybe because it is too small to be made any 
   smaller).
   This all concerns only the postscript device.

   The only solution I see is not to use the circle-symbol for the
   postscript device

   Wolfgang Koller



   ----------------------------------------------------------
   Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
   Forschungsinstitut fuer Europafragen
   Wirtschaftsuniversitaet Wien
   Althanstrasse 39-45, 1090 Wien, Austria
   -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
   r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
   Send "info", "help", or "[un]subscribe"
   (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
   _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


I have encountered the same problem and reported about 5 months ago.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 07:19:16 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 08:19:16 +0100 (CET)
Subject: as.name() is not idempotent (PR#337)
In-Reply-To: <199911231642.RAA26657@pubhealth.ku.dk>
References: <199911231642.RAA26657@pubhealth.ku.dk>
Message-ID: <14395.37236.157663.144059@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>  as.name(as.name("ss"))

> gives an error in R (0.90 and earlier)
> but should of course give the same as simply

>  as.name("ss") 

> This reminds me of similar bug/problem... which I don't recall.

> Yes, I should build tests like these into  "make test-Specific" ..

But not before fixing it, hopefully :-)

>From a brief glance at the code in coerce.c:

SEXP coerceVector(SEXP v, SEXPTYPE type)
{
    SEXP ans = R_NilValue;      /* -Wall */
    if (TYPEOF(v) == type)
        return v;

    switch (TYPEOF(v)) {
#ifdef NOTYET
    case NILSXP:
        ans = coerceNull(v, type);
        break;
    case SYMSXP:
        ans = coerceSymbol(v, type);
        break;
#endif

So you simply need to write coerceSymbol() and move the #ifdef.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:17:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:17:30 +0100 (CET)
Subject: cpp problem on alpha (PR#333)
In-Reply-To: <199911231423.PAA25427@pubhealth.ku.dk>
References: <199911231423.PAA25427@pubhealth.ku.dk>
Message-ID: <14395.62330.716926.100631@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> There is one wrong indented preprocessor directive in src/main/gram.y


> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:19:19 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:19:19 +0100 (CET)
Subject: compile error for mkString on alpha (PR#332)
In-Reply-To: <199911231414.PAA25164@pubhealth.ku.dk>
References: <199911231414.PAA25164@pubhealth.ku.dk>
Message-ID: <14395.62439.277210.722216@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> I had to apply the following patch to be able to compile on 
> an alpha with DU 4.0E:
> ###############################################
> --- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
> +++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
> @@ -56,7 +56,8 @@
>  SEXP           mkFloat(char *);
>  SEXP           mkInteger(char *);
>  SEXP           mkNA(void);
> -SEXP           mkString(const char *);
> +typedef const char cchar;
> +SEXP           mkString(cchar *);
>  SEXP           mkTrue(void);
 
>  /* Internal lexer / parser state variables */
> @@ -1362,7 +1363,7 @@
>  }
 
 
> -SEXP mkString(const char *s)
> +SEXP mkString(cchar *s)
>  {
>      SEXP t;
 
> ################################################
> Without the patch I got:

> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
> referenced type of the pointer value "SourceLine" is "unsigned char", which is
> not compatible 
> with "const signed char". (ptrmismatch)
>                     STRING(source)[lines++]  = mkChar(SourceLine);
> ------------------------------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
> 1 has a different type than specified in an earlier declaration of this
> function. (mism
> atparam)
> SEXP mkString(const char *s)
> -----^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
> of "mkString" is not compatible with the type of a previous declaration of
> "mkString" at
>  line number 59 in file ../../../R/src/main/gram.y. (notcompat)
> SEXP mkString(const char *s)
> -----^

> Then I looked at the preprocessed sources:
> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -E gram.c > gram.E

> grep -n mkString gram.E 
> 8915:SEXP mkString(const char*);
> 9564:SEXP               mkString(const char *);
> 11995:SEXP mkString( char *s)
> 12179:    protect(yylval = mkString(yytext));

> I don't know why the third occurrence of "mkString(const char*);" 
> (line 11995 of preproccessor output) has the "const" removed, it is present in
> the 
> source! But the trick with typedefing "const char" to "cconst" in the patch
> above works. 


> BTW, there are many warnings about mixing "char" and "unsigned char", 
> not only in gram.c!

> Albrecht

I am not sure that this is the right way of fixing it.  configure has a
macro called AC_C_CONST which checks whether the C compiler fully
supports the `const' keyword.  If not, `const' is defined empty.

Can you look at you Rconfig.h and see if anything is done about const
there?  Can you also look at config.log?

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Nov 24 14:26:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Wed, 24 Nov 1999 15:26:11 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911241426.PAA07010@pubhealth.ku.dk>

It seems to me the following should work (in fact, it comes from
someone's SPlus file). Instead, it reads the first 8 lines and then
spits out syntax errors. Using nlines=36 works. Using nmax does not.
Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
 1   3   5   no   1  
 2   1   0  yes   1  
 3   2   4   no   2
 4   1   0  yes   2  
 5   1   4   no   3 
 6   1   0  yes   3 
 7   1   5   no   4  
 8   0   1  yes   4  
 9   4   1   no   5  
10   1   0  yes   5   
11   4   5   no   6 
12   1   0  yes   6  
13   5   3   no   7  
14   1   0  yes   7  
15   4   4   no   8  
16   1   0  yes   8 
17   3   2   no   9  
18   1   0  yes   9  
19   8   1   no  10  
20   0   1  yes  10   
21   5   1   no  11   
22   1   0  yes  11  
23   8   1   no  12 
24   1   0  yes  12  
25   5   3   no  13 
26   1   0  yes  13  
27   4   1   no  14  
28   1   0  yes  14  
29   4   2   no  15  
30   1   0  yes  15  
31   7   1   no  16 
32   1   0  yes  16  
33   4   2   no  17  
34   0   1  yes  17  
35   5   3   no  18 
36   1   0  yes  18  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 24 19:34:16 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 24 Nov 1999 20:34:16 +0100 (MET)
Subject: rbind invisible return value (PR#343)
Message-ID: <199911241934.UAA09286@pubhealth.ku.dk>


An assignment in an argument sometimes makes rbind return invisibly

> rbind(diag(3),a<-1:3)
> print(rbind(diag(3),a<-1:3))
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1
[4,]    1    2    3

> version
         _                           
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    99.0                        
year     1999                        
month    November                    
day      23                          
language R 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 24 20:02:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Nov 1999 21:02:31 +0100
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: bates@stat.wisc.edu's message of "Tue, 23 Nov 1999 19:31:33 +0100 (MET)"
References: <199911231831.TAA27225@pubhealth.ku.dk>
Message-ID: <x2yabnmze0.fsf@blueberry.kubism.ku.dk>

bates@stat.wisc.edu writes:

> mtext(..., outer = TRUE) does not seem to center the text in the outer
> margins as it did previously.  Reproduce with
> 
>  example(plot.profile.nls, package = "nls")
> 
> On versions of the development sources before November 17 this
> produced main and subtitles that were centered horizontally on the
> page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
> is centered over the figure in the upper left the the subtitle
> (from mtext("..", side = 1, outer = TRUE)) is centered under the
> figure on the lower right.

It only does this if las=1, as got entered into the plot.profile.nls
example on November 16, by yourself... It's still a bug, but are you
sure you got that part tested?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 25 09:13:53 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 25 Nov 1999 10:13:53 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911250913.KAA13013@pubhealth.ku.dk>

>>>>> "Jim" == Jim Lindsey <jlindsey@alpha.luc.ac.be> writes:

    Jim> It seems to me the following should work (in fact, it comes from
    Jim> someone's SPlus file). Instead, it reads the first 8 lines and then
    Jim> spits out syntax errors. Using nlines=36 works. Using nmax does not.
    Jim> Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

Yes, a bug.
This is true with both R versions 0.65 and 0.90 ("R90.0" does *not* exist)

Btw, "nmax" *does* work --- however *not* according to documentation ---

## easier to test if you use a named file instead of stdin) :

> str(j1 <- scan(file="/u/maechler/R/jl-scan.dat",
+            list(i=0,r1=0,r2=0,lull="",day=""),nmax=5*36))
Read 36 lines
List of 5
 $ i   : num [1:36] 1 2 3 4 5 6 7 8 9 10 ...
 $ r1  : num [1:36] 3 1 2 1 1 1 1 0 4 1 ...
 $ r2  : num [1:36] 5 0 4 0 4 0 5 1 1 0 ...
 $ lull: chr [1:36] "no" "yes" "no" "yes" "no" "yes" "no" "yes" "no" "yes" ...
 $ day : chr [1:36] "1" "1" "2" "2" "3" "3" "4" "4" "5" "5" "6" "6" "7" "7" ...


    Jim> junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
    Jim> 1   3   5   no   1  
    Jim> 2   1   0  yes   1  
    Jim> 3   2   4   no   2
    Jim> 4   1   0  yes   2  
    Jim> 5   1   4   no   3 
    Jim> 6   1   0  yes   3 
    Jim> 7   1   5   no   4  
    Jim> 8   0   1  yes   4  
    Jim> 9   4   1   no   5  
    Jim> 10   1   0  yes   5   
    Jim> 11   4   5   no   6 
    Jim> 12   1   0  yes   6  
    Jim> 13   5   3   no   7  
    Jim> 14   1   0  yes   7  
    Jim> 15   4   4   no   8  
    Jim> 16   1   0  yes   8 
    Jim> 17   3   2   no   9  
    Jim> 18   1   0  yes   9  
    Jim> 19   8   1   no  10  
    Jim> 20   0   1  yes  10   
    Jim> 21   5   1   no  11   
    Jim> 22   1   0  yes  11  
    Jim> 23   8   1   no  12 
    Jim> 24   1   0  yes  12  
    Jim> 25   5   3   no  13 
    Jim> 26   1   0  yes  13  
    Jim> 27   4   1   no  14  
    Jim> 28   1   0  yes  14  
    Jim> 29   4   2   no  15  
    Jim> 30   1   0  yes  15  
    Jim> 31   7   1   no  16 
    Jim> 32   1   0  yes  16  
    Jim> 33   4   2   no  17  
    Jim> 34   0   1  yes  17  
    Jim> 35   5   3   no  18 
    Jim> 36   1   0  yes  18  


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:55:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:55:19 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: chong@stat.purdue.edu's message of "Wed, 24 Nov 1999 06:18:58 +0100 (MET)"
References: <199911240518.GAA28976@pubhealth.ku.dk>
Message-ID: <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>

chong@stat.purdue.edu writes:

> I have encountered the same problem and reported about 5 months ago.

Wasn't there in 0.65.1 ....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:59:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:59:27 +0100
Subject: rbind invisible return value (PR#343)
In-Reply-To: thomas@biostat.washington.edu's message of "Wed, 24 Nov 1999 20:34:16 +0100 (MET)"
References: <199911241934.UAA09286@pubhealth.ku.dk>
Message-ID: <x27lj6rg4w.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> An assignment in an argument sometimes makes rbind return invisibly
> 
> > rbind(diag(3),a<-1:3)
> > print(rbind(diag(3),a<-1:3))
>      [,1] [,2] [,3]
> [1,]    1    0    0
> [2,]    0    1    0
> [3,]    0    0    1
> [4,]    1    2    3

Ditto with cbind(). Not new, 0.65.1 does likewise.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 14:12:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 15:12:25 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: Peter Dalgaard BSA's message of "25 Nov 1999 11:55:19 +0100"
References: <199911240518.GAA28976@pubhealth.ku.dk> <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2yabmpsmu.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> chong@stat.purdue.edu writes:
> 
> > I have encountered the same problem and reported about 5 months ago.
> 
> Wasn't there in 0.65.1 ....

Here's a patch:

Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.9
diff -u -r1.9 devPS.c
--- devPS.c     1999/10/07 18:10:11     1.9
+++ devPS.c     1999/11/25 13:06:44
@@ -824,7 +824,7 @@
     if(pointsize < 6.0) pointsize = 6.0;
     if(pointsize > pd->maxpointsize) pointsize = pd->maxpointsize;
     dd->dp.ps = pointsize;
-    dd->dp.cra[0] = (6.0 / 12.0) * pointsize;
+    dd->dp.cra[0] = 0.9 * pointsize; 
     dd->dp.cra[1] = 1.2 * pointsize;
 
     /* Character Addressing Offsets */
Index: src/main/graphics.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/graphics.c,v
retrieving revision 1.57
diff -u -r1.57 graphics.c
--- graphics.c  1999/11/18 16:50:08     1.57
+++ graphics.c  1999/11/25 13:06:44
@@ -3555,7 +3555,7 @@
 #ifdef OLDSYMSIZE
 #define GSTR_0  GStrWidth("0", INCHES, dd)
 #else
-#define GSTR_0  xDevtoInch(dd->dp.cra[0] * 0.66, dd) * dd->gp.cex
+#define GSTR_0  dd->dp.cra[0] * 0.66 * dd->gp.ipr[0] * dd->gp.cex
 /* NOTE: This cex is already multiplied with cexbase */
 #endif /* Draw one of the R special symbols. */
 void GSymbol(double x, double y, int coords, int pch, DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Nov 25 16:54:04 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Nov 1999 17:54:04 +0100 (MET)
Subject: segfault in garbage collection (PR#344)
Message-ID: <199911251654.RAA20039@pubhealth.ku.dk>


The following statements yield a seg.fault:
R --vanilla --nsize 500K

x <- rep(letters,10000)
f <- function(x) {z<-paste("\"",x,"\"",sep=""); z}
y <- f(x)
Segmentation fault


If a turn gcinfo on, I get

Garbage collection [nr. 1]...
387529 cons cells free (75%)
3807 Kbytes of heap free (62%)
Garbage collection [nr. 2]...
273868 cons cells free (53%)
1015 Kbytes of heap free (17%)
Garbage collection [nr. 3]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 4]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)

...(always the same)

and finally (after a long time)

Garbage collection [nr. 508]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 509]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)

Segmentation fault

Debugging yields

Program received signal SIGSEGV, Segmentation fault.
0x807d249 in errorcall (call=0x4062ec04, 
    format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
    at /home/Leisch/src/r-release/R/src/main/errors.c:192
192     {


I reproduced this bug on a 2nd machine, even with the same number
of Garbage collections.

-aw

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 25
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 17:01:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 18:01:22 +0100
Subject: segfault in garbage collection (PR#344)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of "Thu, 25 Nov 1999 17:54:04 +0100 (MET)"
References: <199911251654.RAA20039@pubhealth.ku.dk>
Message-ID: <x2puwypkt9.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x807d249 in errorcall (call=0x4062ec04, 
>     format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
>     at /home/Leisch/src/r-release/R/src/main/errors.c:192
> 192     {
> 
> 
> I reproduced this bug on a 2nd machine, even with the same number
> of Garbage collections.

Oh, drats.... I fixed the same bug with cons cells just before the
release. Change the error() to errorcall(R_NilValue) to fix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Nov 25 18:52:24 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Nov 1999 12:52:24 -0600
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: Peter Dalgaard BSA's message of "24 Nov 1999 21:02:31 +0100"
References: <199911231831.TAA27225@pubhealth.ku.dk> <x2yabnmze0.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r903mmmjb.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> It only does this if las=1, as got entered into the plot.profile.nls
> example on November 16, by yourself... It's still a bug, but are you
> sure you got that part tested?

You're right.  I hadn't tested the version with las = 1.  I had
thought the change would be harmless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mhdelsemme@ulg.ac.be  Fri Nov 26 09:54:24 1999
From: mhdelsemme@ulg.ac.be (mhdelsemme@ulg.ac.be)
Date: Fri, 26 Nov 1999 10:54:24 +0100 (MET)
Subject: Bug in version 65.0 (PR#345)
Message-ID: <199911260954.KAA24881@pubhealth.ku.dk>

Full_Name: Marie-Hélène Delsemme
Version: 65.0
OS: 
Submission from: (NULL) (139.165.164.139)


My students found this error when I was teaching but it seems to be
reproductible

Starting using a R65.0 seesion, if you resize the program window (using the
small x of square at the upper right corner) the cursor is no longer available
and the intire system seems to be blocked.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 26 10:08:42 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Nov 1999 10:08:42 +0000 (GMT)
Subject: Bug in version 65.0 (PR#345)
In-Reply-To: <199911260954.KAA24881@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911261000410.20322-100000@auk.stats>

On Fri, 26 Nov 1999 mhdelsemme@ulg.ac.be wrote:

> Full_Name: Marie-Hélène Delsemme
> Version: 65.0
> OS: 

[How do you run R without an OS?]

> Submission from: (NULL) (139.165.164.139)
> 
> 
> My students found this error when I was teaching but it seems to be
> reproductible
> 
> Starting using a R65.0 seesion, if you resize the program window (using the
> small x of square at the upper right corner) the cursor is no longer available
> and the intire system seems to be blocked.

Um. Is that a Windows version (although the small x in the square closes
the window on Windows)?  If so 0.65.0 (there is no 65.0) was never released
except as a test version, and that never from the official repository. This
is a known bug in the GUI in that and 0.64.2 on Windows.

Please upgrade at least to 0.65.1 and preferably to 0.90.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Nov 26 21:07:09 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 16:07:09 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
Message-ID: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>

Hello,
I have been trying to debug a problem with R-0.90.0 (this bug was in
0.65.1, too). The following code results in seg faults.  It doesn't
seg-fault on Linux/intel.

> memory.profile()
> gc()

As long as I don't execute memory.profile(), there is no problem with
garbage collection.  So I think that memory.profile() screws up the
heap in some way.

When it seg-faults, it dies in the function compactPhase() in memory.c,

    while (vfrom < R_VTop) {
        s = BACKPOINTER(*vfrom);
        switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */

it segfaults becuase s becomes a pointer to 0x0, when the while loop is
almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
and R_VTop = 0x20001841198).

I tried to see what's going on in do_memoryprofile() in memory.c by
stepping with gdb, but I couldn't see what was going wrong (well, to be
honest, I didn't fully understand what was going on).

I thought someone may have some insights about the problem or strategy to
debug this problem.  I wanted to set some kind of watch point, so the 
gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
really good at gdb yet, so I'm wondering if someone can help.

Thanks,
Naoki

platform alpha-unknown-linux
arch     alpha              
os       linux              
system   alpha, linux       
status   Patched            
major    0                  
minor    90.0               
year     1999               
month    November           
day      22                 
language R                  


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 21:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Nov 1999 22:27:54 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Naoki Takebayashi's message of "Fri, 26 Nov 1999 16:07:09 -0500 (EST)"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>
Message-ID: <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>

Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:

> Hello,
> I have been trying to debug a problem with R-0.90.0 (this bug was in
> 0.65.1, too). The following code results in seg faults.  It doesn't
> seg-fault on Linux/intel.
> 
> > memory.profile()
> > gc()
> 
> As long as I don't execute memory.profile(), there is no problem with
> garbage collection.  So I think that memory.profile() screws up the
> heap in some way.
> 
> When it seg-faults, it dies in the function compactPhase() in memory.c,
> 
>     while (vfrom < R_VTop) {
>         s = BACKPOINTER(*vfrom);
>         switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */
> 
> it segfaults becuase s becomes a pointer to 0x0, when the while loop is
> almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
> and R_VTop = 0x20001841198).
> 
> I tried to see what's going on in do_memoryprofile() in memory.c by
> stepping with gdb, but I couldn't see what was going wrong (well, to be
> honest, I didn't fully understand what was going on).
> 
> I thought someone may have some insights about the problem or strategy to
> debug this problem.  I wanted to set some kind of watch point, so the 
> gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
> really good at gdb yet, so I'm wondering if someone can help.

The gdb command would be 'watch *0x20001840ef8' (it's important to use
the address as a number so that one gets a hardware watchpoint), but
are you sure that's the right address to watch? I'd try the address of
s itself ('p &s' to print it). Also, what happens if you turn
gctorture() on just before the call to memory.profile? Usually slows
things down horribly, but causes a crash much closer to the actual
damage.

Happy hunting...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 23:55:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 00:55:04 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Peter Dalgaard BSA's message of "26 Nov 1999 22:27:54 +0100"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu> <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:
> 
> > Hello,
> > I have been trying to debug a problem with R-0.90.0 (this bug was in
> > 0.65.1, too). The following code results in seg faults.  It doesn't
> > seg-fault on Linux/intel.
> > 
> > > memory.profile()
> > > gc()
...
> The gdb command would be 'watch *0x20001840ef8' (it's important to use
> the address as a number so that one gets a hardware watchpoint), but

Doh! Never mind gdb, sometimes you just need to look at the code:

    PROTECT(ans = allocVector(INTSXP, 21));
    PROTECT(nms = allocVector(STRSXP, 21));
    for (i = 0; i < 21; i++) {
        STRING(ans)[i] = 0;
        STRING(nms)[i] = R_BlankString;
    }

Try making that INTEGER(ans)[i] = 0 ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sat Nov 27 01:32:42 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 20:32:42 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.10.9911262020570.3852-100000@sunflower.bio.indiana.edu>

Thank you, Peter!
This fixed the problem. So 0.9.0 passes "make check" on Linux/alpha now!!

> Doh! Never mind gdb, sometimes you just need to look at the code:
> 
>     PROTECT(ans = allocVector(INTSXP, 21));
>     PROTECT(nms = allocVector(STRSXP, 21));
>     for (i = 0; i < 21; i++) {
>         STRING(ans)[i] = 0;
>         STRING(nms)[i] = R_BlankString;
>     }
> 
> Try making that INTEGER(ans)[i] = 0 ...


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 02:01:11 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 03:01:11 +0100 (MET)
Subject: .Rprofile results in corruption of .RData? (PR#346)
Message-ID: <199911270201.DAA01513@pubhealth.ku.dk>

It could be that the following may be due to something wrong that I managed
to do (I cannot think what...) but I submit this report in case it is something
that you want to know about (I have solved the problem by removing .Rprofile as
I describe below).

1.  After compiling/installing R 0.90 (an uneventful process), it
worked perfectly the first time, and it read .RData written by the
previous version, but later it would not read .RData (written by
current version).  I finally traced the problem to
  ~/.Rprofile  which somehow seemed to cause .RData to be corrupted when 
R writes it, causing R to give the following message and abort next time 
it is run:

Error: unresolved node during restore 
Fatal error: unable to restore saved data
 (remove .RData or increase memory)

2. Nothing in  .Rprofile  seemed suspicious.

3. I removed  .Rprofile, and the problem disappeared (of course, the  corrupted
.RData file still could not be read, but what R now saved as .RData 
it could read subsequently.)

4. I copied  Rprofile  from
  /usr/local/lib/R/library/base/R
to my home directory and renamed it  .Rprofile  without otherwise
modifying it.  The problem reappeared.

5. I removed ~/.Rprofile, and edited  Rprofile in /usr/local/.../R 
   (to remove significance stars and set emacs as the editor).  
   Now everything works perfectly again (as long as there is no
  .Rprofile in the home directory or in my working directory.

I apologize if this is some problem I caused during installation and is
not a problem with R, in which case please ignore this report.  I would be
more than glad to try out things if you think this might be something
suspicious that is happening that should be looked into.  The problem on
my computer is quite reproducible and does not appear to be related to the 
size or content of .RData. 

Thank you again for R!

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From steland@euv-frankfurt-o.de  Sat Nov 27 10:30:21 1999
From: steland@euv-frankfurt-o.de (steland@euv-frankfurt-o.de)
Date: Sat, 27 Nov 1999 11:30:21 +0100 (MET)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
Message-ID: <199911271030.LAA02408@pubhealth.ku.dk>

Full_Name: Ansgar Steland
Version: 0.90.0
OS: Linux 6.1 FreeBSD 3.2
Submission from: (NULL) (62.104.196.10)


Dear R Team,

Yesterday I downloaded R 0.90.0 and the current versions of some
packages (tseries, quadprog,...).
I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
I also re-build all packages required by tseries.


I checked out portfolio.optim (package: tseries).
It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
(More precisely, the example in the documentation of portfolio.optim crashed.)

Simply reinstalling R 0.65.0 fixed the problem! Now the example works.

I suppose there is a problem with the code of the solve.QP function 
of the package quadprog.
Perhaps it uses internal R functions whose argument lists have changed or sthg.
like this, I don't know.

Below you find some output.


Output for R 0.90.0 (OS: SuSe Linux 6.1):
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.90.0  (November 22, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

           This is a preliminary time series package for R
           See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)
Segmentation fault
ansgar@alpha:~ > res$pw     

Output after 'cd R-0.65.0; make install':
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.65.0  (August 27, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

      This is a preliminary time series package for R 0.65
      See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)       
> res$pw
[1] 0.5 0.5
>       

------------------------------------------------------------------
Hope this report helps the R developers.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 11:22:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 12:22:18 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: rnassar@duke.edu's message of "Sat, 27 Nov 1999 03:01:11 +0100 (MET)"
References: <199911270201.DAA01513@pubhealth.ku.dk>
Message-ID: <x27lj42n85.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> It could be that the following may be due to something wrong that I
> managed to do (I cannot think what...) but I submit this report in
> case it is something that you want to know about (I have solved the
> problem by removing .Rprofile as I describe below).

We've had a similar problem report before, but it was nearly
impossible to investigate because all there was to go on was the
corrupted .RData (which, incidentally was readable after changing the
error() in OffsetToNode to a warning(), something we should perhaps
make permanent?)

This could be an important lead on an elusive bug. Do you think that
you could provide a minimal set of instructions that reproduce the
situation? (As it stands, I cannot see whether it happens to you
because of a particular call in .Rprofile, because of a specific mix
of settings, or simply because .Rprofile has been called at all.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Nov 27 13:37:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 27 Nov 1999 13:37:18 +0000 (GMT)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
In-Reply-To: <199911271030.LAA02408@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911271333120.26405-100000@auk.stats>

This problem is not to do with quadprog nor tseries but rbind. It is
already solved in the current R-release snapshot, and if you need this
to work under 0.90.0, I suggest you download the current daily
snapshot and build that.


On Sat, 27 Nov 1999 steland@euv-frankfurt-o.de wrote:

> Full_Name: Ansgar Steland
> Version: 0.90.0
> OS: Linux 6.1 FreeBSD 3.2
> Submission from: (NULL) (62.104.196.10)
> 
> 
> Yesterday I downloaded R 0.90.0 and the current versions of some
> packages (tseries, quadprog,...).
> I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
> I also re-build all packages required by tseries.
> 
> 
> I checked out portfolio.optim (package: tseries).
> It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
> (More precisely, the example in the documentation of portfolio.optim crashed.)
> 
> Simply reinstalling R 0.65.0 fixed the problem! Now the example works.
> 
> I suppose there is a problem with the code of the solve.QP function 
> of the package quadprog.
> Perhaps it uses internal R functions whose argument lists have changed or sthg.
> like this, I don't know.

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 14:47:08 1999
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 27 Nov 1999 09:47:08 -0500 (EST)
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: <x27lj42n85.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>

Here is a minimum set of instructions to reproduce the problem on my 
computer:

1. remove/rename any .Rprofile in home or current directories.

2. rename .RData file

3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
   untarred/compiled/installed) to the home directory.

4. rename ~/Rprofile to ~/.Rprofile.  

(I'm trying to ensure that neither of my existing .Rprofile and .RData files 
are involved in the test, and that only the "distribution" Rprofile, when 
copied to the home directory and renamed to .Rprofile is the trigger for 
the problem, i.e. simply the existence of a valid .Rprofile file)

5. Run R, then q() and save .RData  (or save.image() and then quite 
without further saving upon quitting.)  (It makes no difference if you did 
anything within R, or whether you simply saved an 'empty' file)

6. Run R again.  It cannot read .RData and aborts.

7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
run it again, and it works perfectly.

I hope this helps, and as I said, I'd be glad to try out specific
instructions on my computer or try to answer any questions.  I have a
vague recollection that a few versions earlier, I had a problem that I
solved by using as ~/.Rprofile a copy of Rprofile that came with the new
version, and that solved the problem at that time.)

Thank you and best regards,

Rashid

On 27 Nov 1999, Peter Dalgaard BSA wrote:

> Date: 27 Nov 1999 12:22:18 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: .Rprofile results in corruption of .RData? (PR#346)
> 
> rnassar@duke.edu writes:
> 
> > It could be that the following may be due to something wrong that I
> > managed to do (I cannot think what...) but I submit this report in
> > case it is something that you want to know about (I have solved the
> > problem by removing .Rprofile as I describe below).
> 
> We've had a similar problem report before, but it was nearly
> impossible to investigate because all there was to go on was the
> corrupted .RData (which, incidentally was readable after changing the
> error() in OffsetToNode to a warning(), something we should perhaps
> make permanent?)
> 
> This could be an important lead on an elusive bug. Do you think that
> you could provide a minimal set of instructions that reproduce the
> situation? (As it stands, I cannot see whether it happens to you
> because of a particular call in .Rprofile, because of a specific mix
> of settings, or simply because .Rprofile has been called at all.)
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Sat Nov 27 16:04:06 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Sat, 27 Nov 1999 17:04:06 +0100 (MET)
Subject: size of text and numbers in graphs (PR#349)
Message-ID: <199911271604.RAA03032@pubhealth.ku.dk>

Hi!

Since installation of R 0.90 there are problems with the size 
of text and numbers also in the x11-device (I reported about similar 
problems with the postscript device recently). For numbers and 
letters a different size is used:

plot(1:10,1:10,type="n")
text(2,8,"F5F5F5F5F5")
text(2,7,"F5F5F5F5F5",cex=2)

The same problem is also found in the postscript device.
The difference is small but clearly visible.

Thanks for fixing soon!


Wolfgang Koller


----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 17:45:55 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 18:45:55 +0100 (MET)
Subject: rstandard forgotten? (PR#350)
Message-ID: <199911271745.SAA03303@pubhealth.ku.dk>

I was just wondering whether implementation of   rstandard  mentioned under 
?influence.measures  had been forgotten? 
(I am aware that MASS has standardized residuals)

Thanks-- and no need to reply.

Rashid Nassar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 18:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 19:58:36 +0100
Subject: size of text and numbers in graphs (PR#349)
In-Reply-To: koller2@fgr.wu-wien.ac.at's message of "Sat, 27 Nov 1999 17:04:06 +0100 (MET)"
References: <199911271604.RAA03032@pubhealth.ku.dk>
Message-ID: <x2iu2nsqw3.fsf@blueberry.kubism.ku.dk>

koller2@fgr.wu-wien.ac.at writes:

> Hi!
> 
> Since installation of R 0.90 there are problems with the size 
> of text and numbers also in the x11-device (I reported about similar 
> problems with the postscript device recently). For numbers and 
> letters a different size is used:
> 
> plot(1:10,1:10,type="n")
> text(2,8,"F5F5F5F5F5")
> text(2,7,"F5F5F5F5F5",cex=2)
> 
> The same problem is also found in the postscript device.
> The difference is small but clearly visible.
> 
> Thanks for fixing soon!

It's not a bug. The fonts are designed that way (capital letters one
pixel taller than numbers in some sizes). Try for instance running
xfontsel with

-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 23:00:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Nov 1999 00:00:52 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: Rashid Nassar's message of "Sat, 27 Nov 1999 09:47:08 -0500 (EST)"
References: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>
Message-ID: <x2wvr31qvv.fsf@blueberry.kubism.ku.dk>

Rashid Nassar <rnassar@duke.edu> writes:

> Here is a minimum set of instructions to reproduce the problem on my 
> computer:
> 
> 1. remove/rename any .Rprofile in home or current directories.
> 
> 2. rename .RData file
> 
> 3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
>    untarred/compiled/installed) to the home directory.
> 
> 4. rename ~/Rprofile to ~/.Rprofile.  
> 
> (I'm trying to ensure that neither of my existing .Rprofile and .RData files 
> are involved in the test, and that only the "distribution" Rprofile, when 
> copied to the home directory and renamed to .Rprofile is the trigger for 
> the problem, i.e. simply the existence of a valid .Rprofile file)
> 
> 5. Run R, then q() and save .RData  (or save.image() and then quite 
> without further saving upon quitting.)  (It makes no difference if you did 
> anything within R, or whether you simply saved an 'empty' file)
> 
> 6. Run R again.  It cannot read .RData and aborts.
> 
> 7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
> run it again, and it works perfectly.

OK, I think I see it.

(a) You're not supposed to do that! The system Rprofile is always
executed, so personal .Rprofile files should just contain your own
modifications.

(b) It boils down to the single line:

.AutoloadEnv <- pos.to.env(2)

and I suspect that the trouble is that it contains a pointer to something
on the search path which is not getting saved along with the
workspace. You can create the problem entirely without Rprofile like
this:

> x<-pos.to.env(2)
> save("x",file="junk")
> load("junk")
Error in load("junk") : unresolved node during restore
> rm(x)
> load("junk")
Error in load("junk") : unresolved node during restore
> ls()
character(0)

Looks more than a bit nasty to fix....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@astro.ocis.temple.edu  Sun Nov 28 02:38:29 1999
From: rmh@astro.ocis.temple.edu (Richard M. Heiberger)
Date: Sat, 27 Nov 1999 21:38:29 -0500 (EST)
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
Message-ID: <199911280238.VAA32405@tempest.ocis.temple.edu>

A better solution is to get the current ESS 5.1.11.  We added the noreadline
command sometime after 5.0.  With the newer ESS you should not need to make
any changes.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov 28 16:22:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 28 Nov 1999 17:22:30 +0100 (CET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
References: <14398.57453.765951.973990@fangorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
Message-ID: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 26 Nov 1999, Kurt Hornik wrote:
>> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
>> understand what is going on.  configure checks (via AC_C_CONST) whether
>> `const' works fine.  If not, it defines const as empty in Rdefines.h.
>> This in turn gets included in all of our source files.  So how can it
>> happen that const is empty in one place and not in another?

> Look in gram.c:

> #ifndef __cplusplus
> #ifndef __STDC__
> #define const
> #endif
> #endif

> comes before the forward declaration and the definition. We have ANSI
> compilers, so this does not happen to us.

> I don't know how to tell bison to behave!

I know :-)

In bison-xy/src/output.c, replace the unconditional

  /* Make "const" do nothing if not in ANSI C.  */
  fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
\n#endif\n\n");

by something more useful :-)

But seriously, what is going on here?  Autoconf says

 - Macro: AC_C_CONST
     If the C compiler does not fully support the keyword `const',
     define `const' to be empty.  Some C compilers that do not define
     `__STDC__' do support `const'; some compilers that define
     `__STDC__' do not completely support `const'.  Programs can simply
     use `const' as if every C compiler supported it; for those that
     don't, the `Makefile' or configuration header file will define it
     as empty.

so how can we deal with the situation where __STDC__ is not defined by
the compiler but `const' still works?

One solution would be to mimic Bison's rule in addition to the autoconf
magic, so that we define const as empty when __STDC__ is not defined,
even if const works.

???

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Nov 29 09:20:32 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 29 Nov 1999 10:20:32 +0100 (MET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.10.9911291007520.5856-100000@zidsrv.sci.uni-klu.ac.at>

On Sun, 28 Nov 1999, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
> 
> > On Fri, 26 Nov 1999, Kurt Hornik wrote:
> >> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
> >> understand what is going on.  configure checks (via AC_C_CONST) whether
> >> `const' works fine.  If not, it defines const as empty in Rdefines.h.
> >> This in turn gets included in all of our source files.  So how can it
> >> happen that const is empty in one place and not in another?
> 
> > Look in gram.c:
> 
> > #ifndef __cplusplus
> > #ifndef __STDC__
> > #define const
> > #endif
> > #endif
> 
> > comes before the forward declaration and the definition. We have ANSI
> > compilers, so this does not happen to us.
> 
> > I don't know how to tell bison to behave!
> 
> I know :-)
> 
> In bison-xy/src/output.c, replace the unconditional
> 
>   /* Make "const" do nothing if not in ANSI C.  */
>   fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
> \n#endif\n\n");
> 
> by something more useful :-)
> 
> But seriously, what is going on here?  Autoconf says
> 
>  - Macro: AC_C_CONST
>      If the C compiler does not fully support the keyword `const',
>      define `const' to be empty.  Some C compilers that do not define
>      `__STDC__' do support `const'; some compilers that define
>      `__STDC__' do not completely support `const'.  Programs can simply
>      use `const' as if every C compiler supported it; for those that
>      don't, the `Makefile' or configuration header file will define it
>      as empty.
> 
> so how can we deal with the situation where __STDC__ is not defined by
> the compiler but `const' still works?
> 
> One solution would be to mimic Bison's rule in addition to the autoconf
> magic, so that we define const as empty when __STDC__ is not defined,
> even if const works.
> 

Wouldn't it be better to force CPPFLAGS to contain "-std" or "-std1" for 
CC=cc on alpha? We compile most of our freeware stuff (kde,...) for Tru64
with this option ("std1") (From time to time I forget about it ;(, this
happened with R-0.65/90) 

I just compiled 0.90.0 successful with "-std1". 

"man cc" says the following about the -std options:
################### man cc /-std #######################################
-std[n]

Directs the compiler to produce warnings for language constructs that are
not standard in the language. The default is -std0. The following values
are accepted:

-std

Enforces the ANSI C standard, but allows some common programming practices
disallowed by the standard. The -std flag causes the macro __STDC__=0 to
be passed to the preprocessor.

-std0

Enforces the K&R programming style, with certain ANSI extensions in areas
where the K & R behavior is undefined or ambiguous.  In general, -std0
compiles most pre-ANSI C programs and produces expected results. The -std0
flag causes the __STDC__ macro to be undefined.

-std1 

Strictly enforces the ANSI C standard and all its prohibitions (such as
those that apply to the handling of void types, the definition of lvalues
in expressions, the mixing of integrals and pointers, and the modification
of rvalues).  This flag does not, however, restrict the name space defined
by the DIGITAL UNIX implementation to only reserved names as specified by
ANSI C. The -std1 flag causes the macro __STDC__=1 to be passed to the
preprocessor.  Note that the -std1 flag also affects linker defined
symbols.  See ld(1) for more information.

None of the -std* flags restrict or expand the name space defined by the
DIGITAL UNIX implementation (for example, items declared in system header
files).  To restrict the name space so that only ANSI C reserved names are
made visible from the system header files listed in the ANSI C standard,
use the _ANSI_C_SOURCE macro.  For details on _ANSI_C_SOURCE and other
standard macros, see standards(5).
################ end man #########################################

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Nov 29 14:53:31 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Nov 1999 15:53:31 +0100 (MET)
Subject: rbind crash (PR#351)
Message-ID: <199911291453.PAA15918@pubhealth.ku.dk>

Well here is my (first) segmentation fault for this version (R0.90.0)
on Intel RH5.2:

x <- matrix(0,nrow=1,ncol=3)
y <- c(0.1,10,0.01)
rbind(x,y)

 Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 29 15:00:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Nov 1999 16:00:32 +0100
Subject: rbind crash (PR#351)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Nov 1999 15:53:31 +0100 (MET)"
References: <199911291453.PAA15918@pubhealth.ku.dk>
Message-ID: <x24se5qr5b.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> Well here is my (first) segmentation fault for this version (R0.90.0)
> on Intel RH5.2:
> 
> x <- matrix(0,nrow=1,ncol=3)
> y <- c(0.1,10,0.01)
> rbind(x,y)

Fixed already. Should be in the snapshots, but Martin seems to be
having problems with those at the moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 29 15:33:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 29 Nov 1999 10:33:25 -0500
Subject: cross reference wishlist item
Message-ID: <38429CC5.497C52DD@bank-banque-canada.ca>

It would be nice for checking documentation to be able to generate the
"see also" cross references (e.g. the list of functions where dev2bitmap
is linked as a "see also" reference.) Perhaps this already exists?

(BTW, it would be useful to have a "see also" reference to dev2bitmap in
the help for postscript and for Devices.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Mon Nov 29 23:02:59 1999
From: gilb@home.com (Paul Gilbert)
Date: Mon, 29 Nov 1999 18:02:59 -0500
Subject: install.packages warning
Message-ID: <38430621.AAC6DA49@home.com>

I mis-spelled "chron" and with

    install.packages(c("tseries", "cron"))

I get tseries installed ok and cron fails as it should, but I think the
warning could be more suggestive of the problem:

Warning messages:
1: argument `lib' is missing: using /apps/R/library in:
install.packages(c("tseries", "cron"))
2: Download of package cron failed in: download.packages(pkglist,
destdir = tmpd, available = available,

Also, it would be nice if update.packages did install.packages in the
case where a package is not already installed, and it would be nice to
be able to pass "--quiet" to wget.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 29 17:21:55 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 29 Nov 1999 17:21:55 +0000 (GMT)
Subject: cross reference wishlist item
Message-ID: <199911291721.RAA02685@toucan.stats.ox.ac.uk>


> Date: Mon, 29 Nov 1999 10:33:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> It would be nice for checking documentation to be able to generate the
> "see also" cross references (e.g. the list of functions where dev2bitmap
> is linked as a "see also" reference.) Perhaps this already exists?

Not that I know of, but it is a 30 second Perl / grep script surely.

grep \\link\{Devices\} *.Rd

works for me. (There are no xrefs to dev2bitmap.)


> (BTW, it would be useful to have a "see also" reference to dev2bitmap in
> the help for postscript and for Devices.)

That is sort of deliberate. dev2bitmap is something of a stopgap:
Windows already has png, jpeg and bmp devices, and we hope to have those on
Unix shortly.  But I'll sort that out for now.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 30 13:28:12 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 30 Nov 1999 14:28:12 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301328.OAA28224@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: Linux + Tru64
Submission from: (NULL) (143.205.61.72)


This is where example(krige) from library(sgeostat) stops with R 0.90.0:

krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
Error in length(x) == nrow(z) : comparison (1) is possible only for vector
types

in previous versions of R the above image() call worked, because image()
did the transformation 

  grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))

iself. (BTW, contour() didn't)

Was this change of behaviour in image() made intentionally? 

Anyway I will change the Rd help page for krige in sgeostat to
...
image(grid$x, grid$y, matrix(grid$krige$zhat,length(grid$x),length(grid$x)), add
= T)
...


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 30 14:16:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Nov 1999 15:16:55 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301416.PAA29330@pubhealth.ku.dk>

[...]

> This is where example(krige) from library(sgeostat) stops with R 0.90.0:
> 
> krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
> Error in length(x) == nrow(z) : comparison (1) is possible only for vector
> types
> 
> in previous versions of R the above image() call worked, because image()
> did the transformation 
> 
>   grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))
> 
> iself. (BTW, contour() didn't)

(In fact, it just ignored dim(z) which therefore could be null.)

> Was this change of behaviour in image() made intentionally? 

Yes, to allow a more general specification of x and y, for S compatibility
(and general usefulness!).


I believe this is a bug in sgeostat not in R: it has long been
documented that z should be a matrix. What has happened is that we
now make use of the documented behaviour.  Suppose z were of length 90,
and each of x and y were of length 10. That is now ambiguous (and BTW,
just gave the wrong plot in 0.65.1, something that has caught me
more than once).

I will add a more specific error message testing that z is a matrix.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 30 20:22:57 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 30 Nov 1999 21:22:57 +0100 (MET)
Subject: R CMD check xxx location (PR#353)
Message-ID: <199911302022.VAA02016@pubhealth.ku.dk>

Very minor bug:
"R CMD check " puts results in a slightly different place than it suggests. In
the example below they are in   check-syskern rather than syskern/check-syskern.

Paul Gilbert
_______

[3] gilp/dse : R CMD check syskern
Checking package `syskern' ...
 Massaging examples into `syskern-Ex.R' ...
 Running examples in package `syskern' ...
 OK
 Results of `check' are available in directory syskern/check-syskern
[4] gilp/dse : ls  syskern/check-syskern
syskern/check-syskern: No such file or directory
[5] gilp/dse : ls check-syskern
syskern-Ex.R          syskern-Ex.Rout       syskern-Examples.ps
[6] /home/mfa5/gilp/dse :



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov  1 08:39:11 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 1 Nov 1999 09:39:11 +0100 (MET)
Subject: as.data.frame(NULL) & as.data.frame(list()) & bug in dput(.)
Message-ID: <14365.20911.924993.572835@gargle.gargle.HOWL>


{Connected to the bug report on expand.grid(.) and my fix to it..}

[Following the spirt of arrays where parts of dim() can be 0]
I would like for these two to give the "same"
or at least, both to give a data.frame with 0 observations of 0 variables.

Currently [R 0.65.1 and pre-0.90]

    > str(d0 <- as.data.frame(list()))
    `data.frame':  0 obs. of  0 variable:
     list()

    > dput(d0) ## BUG
    NULL

    > as.data.frame(NULL)
    Error in as.data.frame.default(NULL) : can't coerce NULL into a data.frame

and
    > str(dn0 <- as.data.frame(numeric(0)))
    `data.frame':  0 obs. of  1 variable:
     $ x: num 

    > dput(dn0)
    structure(list(x = numeric(0)), .Names = "x", class = "data.frame")

(S-plus 5.1 is almost the same, but uses "X" instead of "x" for a name)
-----

Comments?
If I don't get any, I'd only change  as.data.frame such that
as.data.frame(NULL) === as.data.frame(list())  |-->  0 x 0 data.frame

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov  1 16:26:13 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 01 Nov 1999 11:26:13 -0500
Subject: package description
Message-ID: <381DBF25.36FC4480@bank-banque-canada.ca>

It would be nice in the building of help for packages if there were some

mechanism to provide a few paragraphs of general description for the
package. (If this is already there I've missed it.) In the html help it
would be possible to do this by looking for some special file (e.g.
"General_Description") in the man directory and putting a link to that
at the top of 00Index.html, but I don't now if this approach would work
with other help formats.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov  1 16:44:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 1 Nov 1999 16:44:37 +0000 (GMT)
Subject: package description
Message-ID: <199911011644.QAA20354@toucan.stats.ox.ac.uk>


> Date: Mon, 01 Nov 1999 11:26:13 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: r-devel <r-devel@stat.math.ethz.ch>
> Subject: package description
> 
> It would be nice in the building of help for packages if there were some
> mechanism to provide a few paragraphs of general description for the
> package. (If this is already there I've missed it.) In the html help it
> would be possible to do this by looking for some special file (e.g.
> "General_Description") in the man directory and putting a link to that
> at the top of 00Index.html, but I don't now if this approach would work
> with other help formats.

It will not, not even for the html format as 00Index.html is
auto-generated by R INSTALL.  There is nothing to prevent there being a
Rd file containing the description and some suitable \name or \alias
(package:foo, for example).  This could be formalized, for example by a
special name (`Description') being placed first in the list.

That is my understanding of the purpose of library(help=foo) in the S
world, but it seems to be used rarely within R packages. That is, the
file INDEX could contain more than just the list of public functions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:32:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 16:32:15 -0500
Subject: bug in sample
In-Reply-To: <199910312320.AAA20291@pubhealth.ku.dk>; from Ray.Brownrigg@mcs.vuw.ac.nz on Mon, Nov 01, 1999 at 12:20:56AM +0100
References: <199910312320.AAA20291@pubhealth.ku.dk>
Message-ID: <19991101163215.P13888@jimmy.harvard.edu>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:33:17 1999
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Mon, 1 Nov 1999 22:33:17 +0100 (MET)
Subject: bug in sample (PR#305)
Message-ID: <199911012133.WAA01606@pubhealth.ku.dk>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov  1 21:58:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 1999 22:58:42 +0100
Subject: bug in sample (PR#305)
In-Reply-To: rgentlem@jimmy.harvard.edu's message of "Mon, 1 Nov 1999 22:33:17 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk>
Message-ID: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>

rgentlem@jimmy.harvard.edu writes:

> The following appears to be a bug in 0.90
> 
> > x<-sample(10,1:4,rep=T)
> > x
> [1] 8
> > ?sample
> >  x<-sample(10,1:4,rep=T)
> > x
> [1] 5
> 
> Of course, I forgot the syntax but I still don't like the result.

Weelll... the code seems to indicate that that is the intended result:
if length(x) == 1  and x>=1, you get samples from 1:x and since size
is non-vectorized, only the 1st element takes and you get samples of
size 1.

Splus3.4 does likewise, although it does give a warning:
  Numerical expression has 4 elements: only the first used...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 22:03:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 17:03:15 -0500
Subject: bug in sample (PR#305)- apologies
In-Reply-To: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Nov 01, 1999 at 10:58:42PM +0100
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
Message-ID: <19991101170315.Q13888@jimmy.harvard.edu>

Oops,
  Somehow I'm not connecting with my mailer properly today...

  What I wanted to point out was the lack of a warning there and the
  following:

> y<-sample(3)
> y
[1] 2 3 1
> v<-as.factor(y)
> is.numeric(v)
[1] TRUE

  Whereas in Splus:

>  y<-sample(3)
>  v<-as.factor(y)
> is.numeric(v)
[1] F

  Did I miss a discussion of this (I would prefer if is.numeric was
false for factors).

 robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:11:09 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 01 Nov 1999 16:11:09 -0600
Subject: problem with "[[<-"
Message-ID: <qxpzowx3ls2.fsf@ludwig.stat.wisc.edu>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:16:29 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Mon, 1 Nov 1999 23:16:29 +0100 (MET)
Subject: problem with "[[<-" (PR#306)
Message-ID: <199911012216.XAA01868@pubhealth.ku.dk>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov  2 09:47:20 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Nov 1999 10:47:20 +0100 (MET)
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: <19991101170315.Q13888@jimmy.harvard.edu>
References: <199911012133.WAA01606@pubhealth.ku.dk>
 <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
 <19991101170315.Q13888@jimmy.harvard.edu>
Message-ID: <14366.45864.342308.408958@gargle.gargle.HOWL>

Before turning this into a new bug report (not connected to sample() at all):
{ factor() behavior redesigning must be done carefully... }
Some detective work reveals

R versions from 0.50 to 0.61.3  all give

  is.numeric(gl(3,5,15)) 
			 |-> FALSE

Since R version 0.62.1 (June 15, 1998),
the above gives TRUE.
  
The NEWS for 0.62[.1] has

    o	All internal mechanisms to support factors and data.frames have
	been removed.  These are now entirely supported by interpreted
	code!  `is.unordered' has been eliminated.  Thanks to John
	Chambers for allowing the distribution of his StatLib code.

i.e., they change occurded when we dropped the internal factor type...

--

Yes, my gut feeling also says that the current behavior is wrong...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Nov  2 10:04:20 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 2 Nov 1999 11:04:20 +0100 (CET)
Subject: package description
In-Reply-To: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
Message-ID: <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 1 Nov 1999 16:44:37 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Mon, 01 Nov 1999 11:26:13 -0500
>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
>> To: r-devel <r-devel@stat.math.ethz.ch>
>> Subject: package description
>> 
>> It would be nice in the building of help for packages if there were some
>> mechanism to provide a few paragraphs of general description for the
>> package. (If this is already there I've missed it.) In the html help it
>> would be possible to do this by looking for some special file (e.g.
>> "General_Description") in the man directory and putting a link to that
>> at the top of 00Index.html, but I don't now if this approach would work
>> with other help formats.

PBR> It will not, not even for the html format as 00Index.html is
PBR> auto-generated by R INSTALL.  There is nothing to prevent there being a
PBR> Rd file containing the description and some suitable \name or \alias
PBR> (package:foo, for example).  This could be formalized, for example by a
PBR> special name (`Description') being placed first in the list.

PBR> That is my understanding of the purpose of library(help=foo) in the S
PBR> world, but it seems to be used rarely within R packages. That is, the
PBR> file INDEX could contain more than just the list of public functions.

we can put the contents of the DESCRIPTION file on top of 00Index.html
and cat both DESCRIPTION and 00Index for library(help=foo). Would this
do what you want?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:15:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:15:54 +0100
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: Martin Maechler's message of "Tue, 2 Nov 1999 10:47:20 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk> <19991101170315.Q13888@jimmy.harvard.edu> <14366.45864.342308.408958@gargle.gargle.HOWL>
Message-ID: <x2hfj5kxlx.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Before turning this into a new bug report (not connected to sample() at all):
> { factor() behavior redesigning must be done carefully... }
> Some detective work reveals
> 
> R versions from 0.50 to 0.61.3  all give
> 
>   is.numeric(gl(3,5,15)) 
> 			 |-> FALSE
> 
> Since R version 0.62.1 (June 15, 1998),
> the above gives TRUE.
>   
> The NEWS for 0.62[.1] has
> 
>     o	All internal mechanisms to support factors and data.frames have
> 	been removed.  These are now entirely supported by interpreted
> 	code!  `is.unordered' has been eliminated.  Thanks to John
> 	Chambers for allowing the distribution of his StatLib code.
> 
> i.e., they change occurded when we dropped the internal factor type...
> 
> --
> 
> Yes, my gut feeling also says that the current behavior is wrong...

We did have some debate over it at some point. The interesting thing
is that Splus has:

> mode(factor(letters[1:3]))
[1] "numeric"
> is.numeric(factor(letters[1:3]))
[1] F

> x<-1:3
> class(x)<-"foo"
> is.numeric(x)
[1] T
> attr(x,"levels")<-3:1
> is.numeric(x)
[1] T
> class(x)<-"facto"
> is.numeric(x) 
[1] T
> class(x)<-"factor"
> is.numeric(x)
[1] F

...which doesn't strike me as particularly logical. I believe that we
then decided not to be bug-compatible on this issue. What are the good
reasons to behave the Splus way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:55:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:55:32 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: saikat@stat.wisc.edu's message of "Mon, 1 Nov 1999 23:16:29 +0100 (MET)"
References: <199911012216.XAA01868@pubhealth.ku.dk>
Message-ID: <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>

saikat@stat.wisc.edu writes:

> This works in 0.65.1 but not in 0.90.0.
> 
> > form <- ~ a | b
> > form[[2]][[3]] <- as.name("u")
> Error: Object "u" not found

Ow! Obviously, eval() is called once too many. Robert?

The problem is that one gets to

"[[<-"(*tmp*, 3, value = u)

and the evaluator naturally tries to evaluate u.

> I can get around this as follows
> 
> > form.1 <- form[[2]]
> > form.1[[3]] <- as.name("u")
> > form[[2]] <- form.1
> > form
> ~a | u

..or form[[2]][[3]]<-quote(quote(u)), but that one is not likely to
last through a bugfix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 14:55:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 15:55:18 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: Peter Dalgaard BSA's message of "02 Nov 1999 11:55:32 +0100"
References: <199911012216.XAA01868@pubhealth.ku.dk> <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266zlkko9.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> saikat@stat.wisc.edu writes:
> 
> > This works in 0.65.1 but not in 0.90.0.
> > 
> > > form <- ~ a | b
> > > form[[2]][[3]] <- as.name("u")
> > Error: Object "u" not found
> 
> Ow! Obviously, eval() is called once too many. Robert?

Fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov  2 15:25:33 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 02 Nov 1999 10:25:33 -0500
Subject: package description
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk> <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>
Message-ID: <381F026D.685C82B6@bank-banque-canada.ca>

>we can put the contents of the DESCRIPTION file on top of 00Index.html
>and cat both DESCRIPTION and 00Index for library(help=foo). Would this
>do what you want?

I'm thinking of a description which would be several paragraphs, so I would
rather link to it from 00Index than place all the text in 00Index above the
links to the individual help for  functions. I thought DESCRIPTION was suppose
to be a fairly short standard form with some things like version, requires,
author, licence, ..., and perhaps it would be better not to clutter it with the
kind of description I'm thinking about.

I've been playing a bit by putting my description in a file
00General_Description.Rd, which usually puts it at the top since that is fairly
high on the collating sequence. I think it would be better if there was a
standard name that is guaranteed to get a link at the top of 00Index.html. Also,
it would be nice to have a system which would work with help formats other than
html.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Nov  2 21:05:33 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 2 Nov 1999 22:05:33 +0100 (MET)
Subject: bugs in scan() (PR#307)
Message-ID: <199911022105.WAA14753@pubhealth.ku.dk>

[I originally sent this to R-bugs@stat.math.ethz.ch and it didn't
bounce, but when I received no response I thought I had better check to
see if I had the correct address.]

System: Sun Solaris 2.5.1
R: Version 0.65.1 Release (October 07, 1999)

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':

> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:

> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Tue Nov  2 21:14:35 1999
From: umehlig@uni-bremen.de (umehlig@uni-bremen.de)
Date: Tue, 2 Nov 1999 22:14:35 +0100 (MET)
Subject: R abnormal exit when plotting lm (PR#308)
Message-ID: <199911022114.WAA14796@pubhealth.ku.dk>

<<insert bug report here>>
I had a "abnormal" exit of R plotting a fitted linear model. here's
the last few lines of the R session:
-------------------------------------------------------------------
> plot(blstrhz.lm)
Hit <Return> to see next plot:
Hit <Return> to see next plot:
Hit <Return> to see next plot:
X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  53 (X_CreatePixmap)
      Value in failed request:  0x0
            Serial number of failed request:  16548
	            Current serial number in output stream:  16554

		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
			                                                                                 
-------------------------------------------------------------------
Which additional information do you need to find out whether this is
a bug?

Thanks for your attention,
Ulf Mehlig

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rmutil, package:gnlm, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 22:16:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 23:16:05 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: umehlig@uni-bremen.de's message of "Tue, 2 Nov 1999 22:14:35 +0100 (MET)"
References: <199911022114.WAA14796@pubhealth.ku.dk>
Message-ID: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>

umehlig@uni-bremen.de writes:

> <<insert bug report here>>
> I had a "abnormal" exit of R plotting a fitted linear model. here's
> the last few lines of the R session:
> -------------------------------------------------------------------
> > plot(blstrhz.lm)
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> X Error of failed request:  BadValue (integer parameter out of range for operation)
>   Major opcode of failed request:  53 (X_CreatePixmap)
>       Value in failed request:  0x0
>             Serial number of failed request:  16548
> 	            Current serial number in output stream:  16554
> 
> 		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
> 			                                                                                 
> -------------------------------------------------------------------
> Which additional information do you need to find out whether this is
> a bug?

None. It's a bug...

However, to have a chance of fixing it (and knowing whether it got
fixed!), we'd need to either have instructions to reproduce the crash,
or at the very least detailed information on where things went wrong.
Can you make it happen again when running under a debugger?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hdreau@cybercable.fr  Tue Nov  2 23:04:47 1999
From: hdreau@cybercable.fr (hdreau@cybercable.fr)
Date: Wed, 3 Nov 1999 00:04:47 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <199911022304.AAA15279@pubhealth.ku.dk>

Full_Name: Hervé Dréau
Version: not  applicable
OS: not  applicable
Submission from: (NULL) (212.198.234.254)


Here's the listing of difference in version and existence between the PACKAGES
file found in the contrib directory and the content of the directory.
This cause a problem with the automatic install (and upgrade) of packages 

NISTnls
0.9-1 
NISTnls_0.9-2.tar.gz

bats not found in /R/src/contrib

VR_5.3pl037-2.tar.gz not found in PACKAGES

coda 
0.4-5 
coda_0.4-7.tar.gz 

Package: mclust
1.0-1 
mclust_1.1-1.tar.gz

nnet not found in /R/src/contrib
ppr not found in /R/src/contrib

ratetables_1.0-2.tar.gz not found in PACKAGES

rmtools not found in /R/src/contrib

 rpart
1.0-6  rpart_1.0-7.tar.gz

sfb not found in /R/src/contrib
spatial not found in /R/src/contrib

splines
2.0-3 splines_2.0-6.tar.gz

survival4
1.1-0 survival4_1.4-0.tar.gz

Best regard 
Hervé Dréau

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov  3 07:56:06 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Nov 1999 08:56:06 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib (PR#310)
Message-ID: <199911030756.IAA16843@pubhealth.ku.dk>

Yesterday I asked privately which mirror's PACKAGES file this was after an
earlier post, as I could not (and still cannot) get to Vienna. But AFAIK

rpart's entry had been updated after I reported that one
rmtools is not on CRAN
bats is in devel, not in the contrib directory
ppr is in Old, not in the contrib directory
nnet and spatial are nowhere (as part of VR), and VR is not a package
  but a package bundle: we know those are not yet covered by
  update.packages.

The update mechanism does depend on a consistent naming scheme, with
DESCRIPTION entires and file names matching. Fritz Leisch is working on a
checker, but we do rely on authors at present. For example. the DESCRIPTION
file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!


On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:

> Full_Name: Hervé Dréau
> Version: not  applicable
> OS: not  applicable

Sorry, those _are_ applicable. The Unix and Windows versions of
update.packages are quite distinct. I have assumed Unix was meant.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Herve Dreau <hdreau@cybercable.fr>  Wed Nov  3 08:37:04 1999
From: Herve Dreau <hdreau@cybercable.fr> (Herve Dreau)
Date: Wed, 3 Nov 1999 09:37:04 +0100
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <19991103093704.A24803@raoul.fr>



Le mer, 03 nov 1999 08:53:58 Prof Brian D Ripleya écrit :
> Yesterday I asked privately which mirror's PACKAGES file this was after an
> earlier post, as I could not (and still cannot) get to Vienna. But AFAIK
> 

Sorry but I have had replied to you privatelly yesterday.

In this lost (?) mail i said :

 Thank you for your response.
 I use the master CRAN server, I notice some network weekness, but i think 
 if it is the master server all other are just mirror, and the PACKAGES file
 may be  the most recent in the master server.
 After your mail, i compare the content of the PACKAGES file in master CRAN
 and in some mirrors and i found that the tuwien one is the more accurate.
 
 The mirror in italy is particulary old (timestamp on the PACKAGES file is near one
 year old).
 The PACKAGES file in ethz.ch is nearly the same as the one in tuwien (minus the new (?)
  norm package).
 
 Her's a little (and quickly) summary of the discrepancy between the file PACKAGES and 
 the content  of the contrib directory in tuwien

... inserted the report send to r-bug


> rpart's entry had been updated after I reported that one
> rmtools is not on CRAN
> bats is in devel, not in the contrib directory
> ppr is in Old, not in the contrib directory
> nnet and spatial are nowhere (as part of VR), and VR is not a package
>   but a package bundle: we know those are not yet covered by
>   update.packages.

Perhaps but i think all the entry in PACKAGES are listed by 
CRAN.packages()
could not verify in this time : the url at tuwien is unreachable
but using another mirror :
CRAN.packages(CRAN="http://lib.stat.cmu.edu/R/CRAN")
[10,] "bats"                                 "0.1-2" 
[49,] "rmtools"                              "0.2"   
[43,] "ppr"                                  "1.1-2" 
[54,] "spatial"                              "5.3pl035-1"
[38,] "nnet"                                 "5.3pl035-1"
[43,] "ppr"                                  "1.1-2"     

It's only confusing to list packages that are unavailable and cause "false"
error message.

> 
> The update mechanism does depend on a consistent naming scheme, with
> DESCRIPTION entires and file names matching. Fritz Leisch is working on a
> checker, but we do rely on authors at present. For example. the DESCRIPTION
> file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!
> 
> 
> On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:
> 
> > Full_Name: Hervé Dréau
> > Version: not  applicable
> > OS: not  applicable
> 
> Sorry, those _are_ applicable. The Unix and Windows versions of
> update.packages are quite distinct. I have assumed Unix was meant.

Perhaps but it's not related to my version of R it's only a comparison
between the content of a file and the listing of a directory.
If that matter :
OS linux Redhat 6.1
R 0.65.1

Best regards

Hervé Dréau



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  3 09:28:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 Nov 1999 10:28:53 +0100 (MET)
Subject: remark on the difference between R-bugs and R-devel
In-Reply-To: <19991103093704.A24803@raoul.fr>
References: <19991103093704.A24803@raoul.fr>
Message-ID: <14368.85.106153.940547@gargle.gargle.HOWL>

Dear Hervé,
(and everyone else helping us!)

thank you for all your bug reports,..

One thing: 
 If you reply to messages with a (PR#nnn) in the subject,
 it would be most useful if you sent them (CC or TO) to R-bugs rather than
 R-devel. 
 Only then do they enter the WWW R bugs archive as followup messages to the
 bug #nnn.  

R-bugs "forwards" all messages to R-devel. So, one doesn't need to give
both R-bugs and R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  3 15:56:25 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 3 Nov 1999 16:56:25 +0100 (MET)
Subject: Dimnamenames (PR#257)
Message-ID: <199911031556.QAA23767@pubhealth.ku.dk>


I've just started digging into Andreas's old report:

> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
>  dimnames(a[,,1]) # losing component names
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"

Now, this would be fairly easily fixed (I think) which would also make
it compatible with S3. But what should one do about a[,1,1]?  This
would generally be a vector with a .Names attribute, onto which there
is no way of attaching a name. The obvious idea would be to force it
to be a 1d array instead, i.e.

structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 

rather than

structure(c(0,0), .Names = c("1","2"))

Does this sound safe? Generally, such 1-d arrays behave like vectors,
and noone has reported trouble with the fact that the result of table
can be a 1d array. From some viewpoints it seems odd to have different
behaviour depending on whether something is named or not, but it
*would* be nice to have the label retained on rows extracted from a
table...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Wed Nov  3 16:33:19 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Wed, 3 Nov 1999 16:33:19 +0000 (GMT)
Subject: Dimnamenames (PR#257)
In-Reply-To: <199911031556.QAA23767@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991103161959.11496G-100000@laplace>

Hi Peter,

On Wed, 3 Nov 1999 p.dalgaard@biostat.ku.dk wrote:

> Now, this would be fairly easily fixed (I think) which would also make
> it compatible with S3. But what should one do about a[,1,1]?  This
> would generally be a vector with a .Names attribute, onto which there
> is no way of attaching a name. The obvious idea would be to force it
> to be a 1d array instead, i.e.
> 
> structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 
> 
> rather than
> 
> structure(c(0,0), .Names = c("1","2"))
> 
> Does this sound safe?

I'm not sure.  Aren't you duplicating the functionality provided by the
drop flag?  After all, if the names were important then presumably the
subscription would have been a[,1,1, drop=FALSE] anyhow.  I like the
concept of a vector in this situation and suspect that in my lazy code I
have stuff that checks for a dim attribute whan checking arguments to
functions, which would be a problem.  Perhaps it would be better to pass
the name as a different attribute, eg

structure(c(0, 0), .Names = c("1","2"), .dnm = "hansi")

But it would be great to have the names fixed!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Thu Nov  4 06:46:52 1999
From: umehlig@uni-bremen.de (Ulf Mehlig)
Date: Thu, 4 Nov 1999 07:46:52 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
 (p.dalgaard@biostat.ku.dk)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
Message-ID: <199911040646.HAA02246@pandora3.localnet>


 > None. It's a bug...
 > 
 > However, to have a chance of fixing it (and knowing whether it got
 > fixed!), we'd need to either have instructions to reproduce the crash,
 > or at the very least detailed information on where things went wrong.
 > Can you make it happen again when running under a debugger?

Unfortunately, I'm a little bit short of time now, but after the 20th
I will give a try! (I still have a hardcopy of the session, and I will
try to reproduce it step by step. By "running under a debugger" you
mean "R -d gdb", I suppose?).

Many thanks for your attention,
Ulf

-- 
======================================================================
Ulf Mehlig    <umehlig@zmt.uni-bremen.de>
              Center for Tropical Marine Ecology/ZMT, Bremen, Germany
----------------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Wed Nov  3 22:17:41 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Wed, 3 Nov 1999 23:17:41 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911032217.XAA25203@pubhealth.ku.dk>

If .../<pkg>/man/ contains a filename beginning with [, such as
[.datetimes, Rdconvlib.pl cannot convert that help file into latex at
INSTALL time.  [Using --no-latex is a workaround.]

The error given is:

# R INSTALL ssCatalogues
:
 help
 >>> Building/Updating help pages for package `ssCatalogues'
     Formats: text html latex example
/^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
1322, <rdfile> chunk 36.
:

Unfortunately the script stops at that point, so none of the following
help files are installed.

Ray Brownrigg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 08:20:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 09:20:51 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911040820.JAA27177@pubhealth.ku.dk>

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:

    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into latex at
    Ray> INSTALL time.  [Using --no-latex is a workaround.]

    Ray> The error given is:

    Ray> # R INSTALL ssCatalogues
    Ray> :
    Ray> help
    >>>> Building/Updating help pages for package `ssCatalogues'
    Ray> Formats: text html latex example
    Ray> /^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
    Ray> 1322, <rdfile> chunk 36.
    Ray> :

    Ray> Unfortunately the script stops at that point, so none of the following
    Ray> help files are installed.

Well, the bug is more that of documentation of what is allowed for *.Rd
file names.

For portability, we even had to give up having e.g., 
both
	Alias.Rd 
and	alias.Rd

I'd say the rule must contain

>>>> |  For portability reasons, R source files must start with  |
>>>> |     [a-zA-Z]						 |
>>>> |  and should be unique within a package if lowercased.	 |

Maybe we even have to consider more restrictions..

Should this be put into the 
       FAQ,  ?library (...base/man/library.Rd), and/or
       doc/manual/writing-Rd.tex
?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Nov  4 09:09:05 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 4 Nov 1999 10:09:05 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040909.KAA27898@pubhealth.ku.dk>

I get crashes when I call R without any arguments and having no
environment variables R_PROFILE and RPROFILE.

The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
is called with a null ptr as filename (because this is the outcome 
of getenv()).

Although most compilers seem to interpret this as "file not found",
this is an undefined behavior concerning to all C standards I could get
hold of.

A request in comp.lang.c gave the following response:
...
Your program should crash. If you might get a NULL pointer as
a filename, you should have a conditional statement to handle
that case.
...

So I would suggest to test for the return value of getenv, before 
using it as filename in fopen.

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Nov  4 09:50:55 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 4 Nov 1999 10:50:55 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040950.KAA28506@pubhealth.ku.dk>

On Thu, Nov 04, 1999 at 10:09:05AM +0100, hoffmann@ehmgs2.et.tu-dresden.de wrote:
> 
> The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
> is called with a null ptr as filename (because this is the outcome 
> of getenv()).
> 
> Although most compilers seem to interpret this as "file not found",
> this is an undefined behavior concerning to all C standards I could get
> hold of.
> 
> A request in comp.lang.c gave the following response:
> ...
> Your program should crash. If you might get a NULL pointer as
> a filename, you should have a conditional statement to handle
> that case.
> ...
>

The same happens also under Windows where, for this reason, 
'R_fopen' is defined as
 
FILE *R_fopen(const char *filename, const char *mode)
{
    if (!filename)
	return NULL;
    return (fopen(filename, mode));
}

g.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 09:56:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 10:56:58 +0100
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
In-Reply-To: guido@hal.stat.unipd.it's message of "Thu, 4 Nov 1999 10:50:55 +0100 (MET)"
References: <199911040950.KAA28506@pubhealth.ku.dk>
Message-ID: <x2k8ny8tqt.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> The same happens also under Windows where, for this reason, 
> 'R_fopen' is defined as
>  
> FILE *R_fopen(const char *filename, const char *mode)
> {
>     if (!filename)
> 	return NULL;
>     return (fopen(filename, mode));
> }

..which I was just in the process of implementing for the Unix
version.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Nov  4 11:23:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:23:44 +0000 (GMT)
Subject: New codes() methods
Message-ID: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>

Hi Everyone,

Can I suggest a couple of new `codes' methods.  I know codes is a bit
dodgy (at least, according to the comments in codes.factor), but for what
it's worth I like to extract codes from data frames of factors, for which
the following two functions (which operate recursively) are helpful:

"codes.default" <-
function(x)
{
    if (is.list(x))
      lapply(x, codes)
    else
      codes(factor(x))
}

"codes.data.frame" <-
function(x)
{
    row.names <- attr(x, "row.names")
    data.frame(codes(as.list(x)), row.names = row.names)
}

#### Hence:

lvl <- ordered(c("L", "H"), c("L", "H"))
llist <- rep(list(lvl), 4)
codes(llist)			# list of codes
expand.grid(llist)		# data frame of factors
codes(expand.grid(llist))	# data frame of codes

The non-list default behaviour is for data frames that mix factors with
other stuff: the usual codes(factor(1:10)) caveat (from the help file) 
still applies, of course!  Note that using codes on an array will produce
a vector as the dim attribute is lost, eg

codes(matrix(1:12, 3, 4))	# shocking!

but although I toyed with the idea of mapping matrices to data frames in
the default function I thought in the end that this was making a
presumption about the interpretation of the rows and columns that was not
justified.  After all, you could still do

codes(as.data.frame(matrix(1:12, 3, 4)))

if the presumption *was* justified.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 11:34:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 12:34:56 +0100
Subject: New codes() methods
In-Reply-To: Jonathan Rougier's message of "Thu, 4 Nov 1999 11:23:44 +0000 (GMT)"
References: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>
Message-ID: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:


> Can I suggest a couple of new `codes' methods.  I know codes is a bit
> dodgy (at least, according to the comments in codes.factor), but for what
> it's worth I like to extract codes from data frames of factors, for which
> the following two functions (which operate recursively) are helpful:
> 
> "codes.default" <-
> function(x)
> {
>     if (is.list(x))
>       lapply(x, codes)
>     else
>       codes(factor(x))
> }
> 
> "codes.data.frame" <-
> function(x)
> {
>     row.names <- attr(x, "row.names")
>     data.frame(codes(as.list(x)), row.names = row.names)
> }

Looks quite nice. Two things have me worried, though:

1) do we really want to convert anything to factors? (try factor(rnorm(10000)))
2) if a dataframe contains a matrix, it gets converted to something
   with incompatible lengths
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Thu Nov  4 11:48:06 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:48:06 +0000 (GMT)
Subject: New codes() methods
In-Reply-To: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.991104114005.16942B-100000@laplace>

Hi Peter,

On 4 Nov 1999, Peter Dalgaard BSA wrote:

> Looks quite nice. Two things have me worried, though:
> 
> 1) do we really want to convert anything to factors? (try factor(rnorm(10000)))

I agree that this would be undesirable, but not necessarily wrong!

> 2) if a dataframe contains a matrix, it gets converted to something
>    with incompatible lengths

This was part of my motivation for including a matrix case in the default
behaviour, but in the end I thought that the error message might be
justified!  But the alternative would be

    ...
    else if (is.matrix(x))
      apply(t(x), 1, codes)
    else
      codes(factor(x))

but, as I mentioned before, this makes an unwarranted assumption about the
interpretation of the rows and columns of x.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 15:49:21 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 04 Nov 1999 09:49:21 -0600
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 4 Nov 1999 09:20:51 +0100 (MET)"
References: <199911040820.JAA27177@pubhealth.ku.dk>
Message-ID: <qxpr9i6ntoe.fsf@ludwig.stat.wisc.edu>

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
  Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
  Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
  Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

  maechler> Well, the bug is more that of documentation of what is
  maechler> allowed for *.Rd file names.

I do not think that the problem is with the file names here. It occurs
in line 1335 of Rdconvlib.pl (0.90.0 development version). You can get
around it by escaping the spacial characters in $blocks{"name"}.

The following patch does just that.

============================================================
--- Rdconvlib.pl Thu Nov  4 07:45:11 1999
+++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
@@ -1332,7 +1332,7 @@
       print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
        if $debug;
       printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
-       unless /^$blocks{"name"}$/;
+       unless /^\Q$blocks{"name"}$/;
     }
     foreach (@keywords) {
       printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Nov  4 16:50:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 4 Nov 1999 17:50:14 +0100 (CET)
Subject: Version numbers of CRAN packages
Message-ID: <14369.47430.288003.211178@galadriel.ci.tuwien.ac.at>

Hi,

For all future submissions to CRAN only the version number in the
DESCRIPTION file is used, i.e., I have changed my scripts to
automatically rename the package accordingly! I hope this ensures some
consistency until I have a more rigorous package checker.

Best,
Fritz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 17:20:46 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 18:20:46 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041720.SAA04538@pubhealth.ku.dk>

>>>>> "Saikat" == Saikat DebRoy <saikat@stat.wisc.edu> writes:

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:
>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
    Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

    maechler> Well, the bug is more that of documentation of what is
    maechler> allowed for *.Rd file names.

    Saikat> I do not think that the problem is with the file names here. It
    Saikat> occurs in line 1335 of Rdconvlib.pl (0.90.0 development
    Saikat> version). You can get around it by escaping the spacial
    Saikat> characters in $blocks{"name"}.

I see, sounds plausible.  We don't have  \name{..}s  with funny chars in
them till now (even though we do have \alias{}es).


    Saikat> The following patch does just that.

    Saikat> ============================================================
    Saikat> --- Rdconvlib.pl Thu Nov  4 07:45:11 1999
    Saikat> +++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
    Saikat> @@ -1332,7 +1332,7 @@
    Saikat> print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
    Saikat> if $debug;
    Saikat> printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
    Saikat> -       unless /^$blocks{"name"}$/;
    Saikat> +       unless /^\Q$blocks{"name"}$/;
    Saikat> }
    Saikat> foreach (@keywords) {
    Saikat> printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}

Good idea to use Perl's \Q feature,
but my  perl online help says

     \Q		quote regexp metacharacters till \E
					    -------
so, you probably should also add a delimiting \E,  shouldn't you ?

Thanks again, Saikat !

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 17:41:18 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 4 Nov 1999 18:41:18 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041741.SAA04610@pubhealth.ku.dk>

>>>>> "Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

  Martin> Good idea to use Perl's \Q feature, but my perl online help
  Martin> says

  Martin>      \Q quote regexp metacharacters till \E
  Martin>                                     -------
  Martin> so, you probably should also add a delimiting \E, shouldn't you ?

Yes - you are correct. So that line should be changed to

        unless /^\Q$blocks{"name"}\E$/;

Thanks for spotting that.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Fri Nov  5 18:10:24 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Fri, 5 Nov 1999 19:10:24 +0100 (MET)
Subject: rpart problem (PR#313)
Message-ID: <199911051810.TAA14930@pubhealth.ku.dk>

* * * Just the Facts * * *
call to rpart() with a factor response gives
the error message:

"Error: first argument is array, but not matrix."

* * * Example Code * * * 
==============================================
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(rpart)
> x _ 1:50
> y _ as.factor(rbinom(50,1,.5))
> fit _ rpart(y~x,method="class")
Error: first argument is array, but not matrix.
> 

* * * Version Information * * *
==============================================

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rpart, Autoloads, package:base


* * * Unsolicited Hypothesis * * * 

In rpart(), I believe this line causes the error message:

        temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
nobs/init$counts)

Thanks for your attention.

David


David M. Potter
Mathematical & Statistical Sciences
Pfizer Central Research
PO Box 8003/832
Groton, CT 06340-8003
Tel 860-715-1769 ; Fax 860-715-5445
potterdm@groton.pfizer.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  5 19:03:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 Nov 1999 19:03:17 +0000 (GMT)
Subject: rpart problem (PR#313)
In-Reply-To: <199911051810.TAA14930@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911051900140.14373-100000@auk.stats>

On Fri, 5 Nov 1999 david_m_potter@groton.pfizer.com wrote:

> * * * Just the Facts * * *
> call to rpart() with a factor response gives
> the error message:
> 
> "Error: first argument is array, but not matrix."

This is an error in diag() for 0.65.1, only. It will be fixed in the next
release. (It was discussed on r-devel a few days ago.)

> In rpart(), I believe this line causes the error message:
> 
>         temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
> nobs/init$counts)

Yes. put an as.vector inside the argument to diag, for now, or fix diag to
be

function (x = 1, nrow, ncol = n) 
{
    if (is.matrix(x) && nargs() == 1) {
        if ((m <- min(dim(x))) == 0) 
            return(numeric(0))
        y <- c(x)[1 + 0:(m - 1) * (dim(x)[1] + 1)]
        nms <- dimnames(x)
        if (is.list(nms) && !any(sapply(nms, is.null)) && all((nm <-nms[[1]][1:m]) == 
            nms[[2]][1:m])) 
            names(y) <- nm
        return(y)
    }
    if (is.array(x) && length(dim(x)) != 1) 
#                   ^^^^^^^^^^^^^^^^^^^^^^

        stop("first argument is array, but not matrix.")
    if (missing(x)) 
        n <- nrow
    else if (length(x) == 1 && missing(nrow) && missing(ncol)) {
        n <- as.integer(x)
        x <- 1
    }
    else n <- length(x)
    if (!missing(nrow)) 
        n <- nrow
    p <- ncol
    y <- array(0, c(n, p))
    if ((m <- min(n, p)) > 0) 
        y[1 + 0:(m - 1) * (n + 1)] <- x
    y
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911070615.HAA04998@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
* PR# 295 *
Subject: free heap < 0
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:36:35 -0700 (PDT)
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
* PR# 297 *
Subject: explicit weights=NULL fails in glm,lm
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 25 Oct 1999 10:34:28 -0700 (PDT)
* PR# 298 *
Subject: dodgy list operation
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Tue, 26 Oct 1999 14:46:11 +0100 (BST)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
* PR# 300 *
Subject: Plotting bug in R
From: Stephen Turner <S.R.E.Turner@statslab.cam.ac.uk>
Date: Wed, 27 Oct 1999 17:31:01 +0100 (GMT)
* PR# 301 *
Subject: expand.grid()
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Thu, 28 Oct 1999 17:23:02 +0100 (BST)
* PR# 302 *
Subject: modreg buggy: uninitialized variable in sinerp.f
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Sat, 30 Oct 99 13:24:14 +0100
* PR# 303 *
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF))
From: ntakebay@bio.indiana.edu
Date: Sun, 31 Oct 1999 01:29:05 +0200 (MET DST)
* PR# 304 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Mon, 1 Nov 1999 12:20:33 +1300 (NZDT)
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
* PR# 306 *
Subject: problem with "[[<-"
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 01 Nov 1999 16:11:09 -0600
* PR# 307 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 3 Nov 1999 10:05:26 +1300 (NZDT)
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
* PR# 310 *
Subject: Re: discrepancy between PACKAGES file and contents of the contrib
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 3 Nov 1999 07:53:58 +0000 (GMT)
* PR# 311 *
Subject: bug in Rdconvlib.pl converting to latex
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Thu, 4 Nov 1999 11:16:49 +1300 (NZDT)
* PR# 312 *
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen
From: Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de>
Date: Thu, 4 Nov 1999 10:08:45 +0100 (MET)
* PR# 313 *
Subject: rpart problem
From: "Potter, David M" <david_m_potter@groton.pfizer.com>
Date: Fri, 5 Nov 1999 13:09:50 -0500 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 11:52:37 1999
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 7 Nov 1999 11:52:37 +0000 (GMT)
Subject: Rdefines.h
In-Reply-To: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>
Message-ID: <Pine.GSO.4.05.9911071143380.5037-100000@toucan.stats>

On Wed, 27 Oct 1999, Berwin Turlach wrote:

> may I request the following two changes to Rdefines.h (R 0.65.1)?
> 
> 1.) Change line 106 from
>         #define Free(p)        R_chk_free( (void *)(p) )
> to
>         #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL
> 
> 2.)  Add after line 79:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> a new line 80:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> #define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> The rationale behind both changes is to become more compatible with
> S.h from S-PLUS.  

Following discussions with Berwin I have adopted these (with a few extra
parentheses) for the R-devel version, although (Warning!) we discovered
that Free in S-PLUS 5.1 does not NULL the pointer, although S-PLUS 3.x
and 4.x do.  So truly portable code should not rely on this.

The exact nature of S.h is under re-consideration, as there are
considerable differences between S versions. My inclination is to use the 
best of S3 and S4 and provide definitions of the new macros that can be
used in S3 too, but undoubtedly back-compatibility will rear its head.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Sun Nov  7 16:56:47 1999
From: hammour@msn.com (hammour@msn.com)
Date: Sun, 7 Nov 1999 17:56:47 +0100 (MET)
Subject: arima0() (PR#314)
Message-ID: <199911071656.RAA19948@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: rw0651
OS: windows 95
Submission from: (NULL) (63.23.128.44)


Although I know that "ts package" is preliminary, I wanted to compare the
results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
standard errors of coefficients from R and real figures from SPSS. I changed
"delta" in R to match that used by SPSS, I received results with no NaNs but
different from those from SPSS specially in MA coefficients. They came out
negative numbers while positive from SPSS. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 18:07:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 7 Nov 1999 18:07:47 +0000 (GMT Standard Time)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.9911071753460.316-100000@tern.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but

Can you please submit a full and reproducible example, as the FAQ suggests?

Does SPSS in fact do maximum likelihood estimation?  Last time I looked it
used an approximation. (You do need to be careful: for example S-PLUS's
arima.mle does not do MLE, despite its name.)  One isssue here is that most
packages do not ensure that the returned coefficients are valid for a
stationary invertible process: arima0 (by default) does.

The standard errors are part of the `preliminary' bit: they are waiting for
a better optimizer.  The `0' on arima0 indicates that it is intended to be
replaced fairly soon.

> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

That is a matter of definition. The signs of each of the AR and MA
coefficients are often swapped, so I would not be at all surprised that
SPSS is different. R is intended to be consistent with S-PLUS (as
documented in Venables & Ripley, at least).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov  8 07:51:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Nov 1999 07:51:47 +0000 (GMT)
Subject: [R] loading precedence in requires()
In-Reply-To: <199911080033.NAA23172@aqua.mcs.vuw.ac.nz>
Message-ID: <Pine.GSO.4.05.9911080727320.7214-100000@auk.stats>

[ Moved to R-devel as it is a think this is a development issue. ]

On Mon, 8 Nov 1999, Ray Brownrigg wrote:

> It appears that requires(), when it appears in the .First.lib of a
> package, will load the required package *after* the package requiring
> it, i.e. the 'required' package appears earlier in the search list than
> the package requiring it.
> 
> This will cause problems if a package (deliberately) masks any of the
> functions in the required package. I.e. the expected masking does not
> occur.
> 
> Apart from expecting the end-user to issue a library() call for the
> required package before the requiring package, are there any
> workarounds for this, or is such deliberate masking considered to be a
> no-no?

At present in R (unlike S) packages are effectively thought of as equal,
and searched in inverse order of loading. Unlike S, library (and hence
require) has no way to set the position in the ordering, nor can a library
`database' be re-attached in a different place in the order by attach().
(The latter is a common trick in .First.lib in S.)

I have two ideas for now:

(a) Write a package foo containing just a .First.lib with

require(bar)
require(foo2)

and put the real code in foo2.

(b) in the .First.lib for package foo, use something like

.First.lib <- function (...) 
{
    s <- search()
    require(bar)
    if (length(search()) > length(s)) {
        detach("package:foo")
        library(foo)
    }
}

In general such masking (presumably of a system library or why not enhance
bar?) is confusing and leads to support difficulties. It is a headache for
S-PLUS where Harrell's Design and Hmisc mask many system functions, and one
gets used to asking: "are you using Design or Hmisc?" if there are reports
of strange behaviour in one's own code.  My view has become `only mask if
you wish to correct something, and try to ge the original changed'.

However, question to R-devel: should we add to library and require
argument(s) to say where they should go in the search list?  S3 has
first=T (and defaults to last), and S-PLUS 5 has both first=T and pos
(which can be a number or database, and the library is inserted just before
the one specified, and always before main).  The most flexible scheme might
be to have both before= and after= for names or numbers.

Ross is planning changes in this area that may make the re-attach idea
feasible in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  9 08:11:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Nov 1999 08:11:17 +0000 (GMT)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911090759220.26939-100000@auk.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but
> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

Mr Hammour sent me the data privately. Running

arima0(y0, order=c(2,1,2), delta=-1)

I get

Call:
arima0(x = y0, order = c(2, 1, 2), delta = -1)

Coefficients:
    ar1      ar2      ma1      ma2  
-0.7686   0.1519  -0.1143  -0.8857  

Approx standard errors:
   ar1     ar2     ma1     ma2  
0.1917  0.0912  0.1765  0.1762  

sigma^2 estimated as 109859:  log likelihood = -890.65,  aic = 1789.3

[Using the default delta of 0.01 in this case gives inaccurate results:
but it is a very badly determined model.]

SPSS had

Number of residuals  123
Standard error       337.30778
Log likelihood       -890.6952
AIC                  1789.3904
SBC                  1800.6391

           Variables in the Model:

                B         SEB      T-RATIO   APPROX. PROB.

AR1    -.78319350   .16013797   -4.8907421       .00000318
AR2     .16191191   .09435030    1.7160719       .08875107
MA1     .07993592   .54769107     .1459508       .88420721
MA2     .91762463   .49337224    1.8599032       .06536851


>Warning # 16567.  Command name: ARIMA
>Our tests have determined that the estimated model lies close to the
>boundary of the invertibility region.  Although the moving average
>parameters are probably correctly estimated, their standard errors and
>covariances should be considered suspect.

So (up to the MA sign change, a matter of definition) the estimates
differ by 1 se or so. However, SPSS has given a warning, and the
log-likelihoods are similar but R's is larger. This suggests that

- There is no practical difference between the results, and

- R's optimizer has done a better job.

- R works on transformed scale and so has more chance of getting se's
  close to the boundary (but the error distribution will be very far from
  normal).

- This is not a good model for the data.

If there is a bug at all here, it would appear to be in SPSS.

Moral: take warnings seriously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Nov 10 01:32:54 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 10 Nov 1999 02:32:54 +0100 (MET)
Subject: R.bug.report (PR#315)
Message-ID: <199911100132.CAA14250@pubhealth.ku.dk>

Again I would like to express my deepest appreciation to all those
working so selflessly on the development of R for us all to use it 
freely (and it is such a joy to use!)

Rashid Nassar


== Possible bug:

1.
boxplot()
This is an old behavior that I had reported before, but as it is still
there, it may not ba a bug (although it looks like one to me).  "qfcut"
is numeric, "st" is a factor:

> plot(qfcut~st)      # works
> plot(st,qfcut)      #	works
> boxplot(qfcut~st)   # works
> boxplot(st,qfcut)   # doesn't work
Error: "range" not meaningful for factors

== The following are minor typos, etc. in help screens, <<error>> [[suggested]]:

2.
?boxplot.default
   names: group labels which <<while>> [[will]] be printed under each 
               boxplot.

3.                              
?par
   adj: The value of `adj' determines the way in which
             text strings are justified.  A value of `0' pro-
             duces <<right>> left-justified text, ...

4.    
?abline
 (end of 1st paragraph of Description):
        .... through the origin, otherwise, the first 2 val-
        ues are taken to be the <<slope and intercept>> [[intercept and
        slope]]. (since the first parameter is interpreted as the intercept).

== The following are suggestions offered with a great deal of
   (appropriate) diffidence:

5.    
?tapply (also perhaps ?lapply, ?sapply, ?apply)
   I think it would be useful to add `aggregate' to the "See Also:" list.
   Without V&R I would not have known about aggregate.

6.
?persp
  d: a value which can be used to vary the strength of
             the perspective transformation.  Values of `d'
             greater than 1 will lessen the perspective effect
             and values less and 1 will exaggerate it.
  
     I think it may be useful if the value of d  for no perspective 
             effect is also given (looks to be d=10?)

7.
It is great that `boxplot' has a data=  parameter; can `plot' (as in
`plot.default') have one too?  (no answer needed-- I know if not, there 
is a good reason for it :)


Thanks again.  -Rashid

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, qfc, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 10:01:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 11:01:04 +0100
Subject: R.bug.report (PR#315)
In-Reply-To: rnassar@duke.edu's message of "Wed, 10 Nov 1999 02:32:54 +0100 (MET)"
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <x2wvrq64yn.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> == Possible bug:
> 
> 1.
...> 
> 2.
...
> 3.                              
...> 
> 4.    
...
> 7.
> 

Rashid, thank you for your contributions, but this kind of report is
impossible to process in a rational way. There is no single category
into which it fits (although I've put a "TooMuchAtOnce" category in
the repository), the subject field gives no clue to the character of
the bug, and every time one pulls it out, one has to recheck every
item to see whether it has been fixed or not, and it will live in the
repository as long as there are remaining issues . Could you please
resubmit as several independent reports?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 10:41:30 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 11:41:30 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101041.LAA18434@pubhealth.ku.dk>

R 0.65.1 (and R-devel 09/11/99)

> z <- data.frame(a=1:3)
> b <- rep(NA, 3)
> mode(b)
[1] "logical"
# how many of you expected that? I had forgotten!
> zz <- cbind(z, b)
> zz
  a  b
1 1 NA
2 2 NA
3 3 NA
> class(zz$b)
[1] "factor"

whereas in S it is NULL and zz$b is of mode "numeric".

The same thing happens with data.frame

zz <- data.frame(a, b)

gives zz$b as a factor in R and numeric in S.

I don't think this is a desirable difference, at least with all NAs!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 11:14:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 12:14:33 +0100
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 10 Nov 1999 11:41:30 +0100 (MET)"
References: <199911101041.LAA18434@pubhealth.ku.dk>
Message-ID: <x2n1sm61k6.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> R 0.65.1 (and R-devel 09/11/99)
> 
> > z <- data.frame(a=1:3)
> > b <- rep(NA, 3)
> > mode(b)
> [1] "logical"
> # how many of you expected that? I had forgotten!
> > zz <- cbind(z, b)
> > zz
>   a  b
> 1 1 NA
> 2 2 NA
> 3 3 NA
> > class(zz$b)
> [1] "factor"
> 
> whereas in S it is NULL and zz$b is of mode "numeric".
> 
> The same thing happens with data.frame
> 
> zz <- data.frame(a, b)
> 
> gives zz$b as a factor in R and numeric in S.
> 
> I don't think this is a desirable difference, at least with all NAs!

Hmmm. Notice that in *both* R and S3,

> class(data.frame(x=TRUE)$x)
[1] "factor"

And in both dialects, NA is a logical constant. So S3 is doing a
special exception for all-NA logical vectors. Of course, we could just
clone that...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 11:59:43 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 12:59:43 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101159.MAA19623@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 10 Nov 1999 12:14:33 +0100
> 
> ripley@stats.ox.ac.uk writes:
> 
> > R 0.65.1 (and R-devel 09/11/99)
> > 
> > > z <- data.frame(a=1:3)
> > > b <- rep(NA, 3)
> > > mode(b)
> > [1] "logical"
> > # how many of you expected that? I had forgotten!
> > > zz <- cbind(z, b)
> > > zz
> >   a  b
> > 1 1 NA
> > 2 2 NA
> > 3 3 NA
> > > class(zz$b)
> > [1] "factor"
> > 
> > whereas in S it is NULL and zz$b is of mode "numeric".
> > 
> > The same thing happens with data.frame
> > 
> > zz <- data.frame(a, b)
> > 
> > gives zz$b as a factor in R and numeric in S.
> > 
> > I don't think this is a desirable difference, at least with all NAs!
> 
> Hmmm. Notice that in *both* R and S3,
> 
> > class(data.frame(x=TRUE)$x)
> [1] "factor"
> 
> And in both dialects, NA is a logical constant. So S3 is doing a
> special exception for all-NA logical vectors. Of course, we could just
> clone that...

It isn't: I was using the S4-style data frame code in my copy of
S-PLUS 3.4 (it is needed for some recent extensions) and had not
noticed.  And S4 keeps these logical, which seems much more desirable
to me.  In both R and S it is a quirk that

z$b <- b

and 

z <- cbind(z, b)

are different, but not in S4 nor in S3+library(df)

I withdraw this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 13:19:26 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 10 Nov 1999 14:19:26 +0100 (MET)
Subject: plot() bugs (PR#317)
Message-ID: <199911101319.OAA21606@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1
OS: Linux Redhat 6.1
Submission from: (NULL) (193.62.250.209)


Try this:

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))

spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10

plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed
difference$
points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

Bugs:
1. The y-axis numbering labels are shifted down and are not centred on the
hash-marks.
BTW, weren't the labels in normal (nonrotated) orientation before this version?
I didn't have to use las before

2. This is an old bug: only the first plotted sysmbol has the correct size.
(Squares
in this example). The others are not scaled up as cex should make them.

These comments are based on inspection of the .ps form of the plot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 14:53:17 1999
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Wed, 10 Nov 1999 14:53:17 +0000 (GMT)
Subject: plot() bugs (PR#317)
In-Reply-To: <199911101319.OAA21606@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>



On Wed, 10 Nov 1999 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 65.1
> OS: Linux Redhat 6.1
> Submission from: (NULL) (193.62.250.209)
> 
The code got a bit mangled when pasting into web page

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))
 
spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10
 
plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed difference (deg/s)",ylab="d'", las=1)

points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

I have since tried mkh, but it seems to have no effect.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 10 13:58:36 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Nov 1999 14:58:36 +0100 (MET)
Subject: R.bug.report (PR#315)
In-Reply-To: <199911100132.CAA14250@pubhealth.ku.dk>
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <14377.31244.674152.34117@gargle.gargle.HOWL>

>>>>> On Wed, 10 Nov 1999 02:32:54 +0100 (MET), rnassar@duke.edu (Rashid
>>>>> Nassar) said:

    RNa> Again I would like to express my deepest appreciation to all those
    RNa> working so selflessly on the development of R for us all to use it 
    RNa> freely (and it is such a joy to use!)

    RNa> Rashid Nassar

    RNa> == Possible bug:

    RNa> 1.
    RNa> boxplot()
    RNa> This is an old behavior that I had reported before, but as it is still
    RNa> there, it may not ba a bug (although it looks like one to me).  "qfcut"
    RNa> is numeric, "st" is a factor:

    >> plot(qfcut~st)      # works
    >> plot(st,qfcut)      #	works
okay that was plot  which has  TWO arguments if not used with a formula

    >> boxplot(qfcut~st)   # works
    >> boxplot(st,qfcut)   # doesn't work
    RNa> Error: "range" not meaningful for factors

This is not a bug.
boxplot() either has a formula or "x, ..." arguments
which must be `single boxplot' components  (read  "?boxplot.default").


    RNa> == The following are minor typos, etc. in help screens, <<error>> [[suggested]]:


    RNa> 2.
    RNa> ?boxplot.default
    RNa> names: group labels which <<while>> [[will]] be printed under each 
    RNa> boxplot.
ok, done.

    RNa> 3.                              
    RNa> ?par
    RNa> adj: The value of `adj' determines the way in which
    RNa> text strings are justified.  A value of `0' pro-
    RNa> duces <<right>> left-justified text, ...
ok, done.

    RNa> 4.    
    RNa> ?abline
    RNa> (end of 1st paragraph of Description):
    RNa> .... through the origin, otherwise, the first 2 val-
    RNa> ues are taken to be the <<slope and intercept>> [[intercept and
    RNa> slope]]. (since the first parameter is interpreted as the intercept).
ok, done.

    RNa> == The following are suggestions offered with a great deal of
    RNa> (appropriate) diffidence:

    RNa> 5.    
    RNa> ?tapply (also perhaps ?lapply, ?sapply, ?apply)
    RNa> I think it would be useful to add `aggregate' to the "See Also:" list.
    RNa> Without V&R I would not have known about aggregate.
ok, done. [tapply and apply]

    RNa> 6.
    RNa> ?persp
    RNa> d: a value which can be used to vary the strength of
    RNa> the perspective transformation.  Values of `d'
    RNa> greater than 1 will lessen the perspective effect
    RNa> and values less and 1 will exaggerate it.
  
    RNa> I think it may be useful if the value of d  for no perspective 
    RNa> effect is also given (looks to be d=10?)

(this should be discussed on R-help;  there's more to it,..
 I don't see through that myself.
 It certainly would be useful if the documentation was enlarged here.

 Want to study the source: src/main/persp3d.c

    RNa> 7.
    RNa> It is great that `boxplot' has a data=  parameter; can `plot' (as in
    RNa> `plot.default') have one too?  (no answer needed-- I know if not, there 
    RNa> is a good reason for it :)

boxplot doesn't.  
It's  boxplot.formula(.) which *has* a data argument;
and so does  plot.formula() !

Thank you for your feedback, Rashid.
and yes (as Peter said), please, next time try to put things like these in
about 2 or 3 parts.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 14:12:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 15:12:15 +0100
Subject: plot() bugs (PR#317)
In-Reply-To: Bill Simpson's message of "Wed, 10 Nov 1999 14:53:17 +0000 (GMT)"
References: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>
Message-ID: <x2emdy5tc0.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi@gcal.ac.uk> writes:


> #default plot symbols and lettering are too small, need to scale up

Wait for 0.90.0 (in a couple of weeks) or try a snapshot of it and
then complain that they are now too large....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov 10 14:48:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Nov 1999 09:48:14 -0500
Subject: finding Rd syntax errors
Message-ID: <382985AE.C3FD1C22@bank-banque-canada.ca>

I seem to recall mention of some argument to R INSTALL which makes it
pass along more information about syntax errors in Rd files, but I can't
find the message or any mention of this feature in the help. Could
someone please remind me, or am I dreaming? (If this truely is possible
perhaps it should be documented under INSTALL.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 00:48:49 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 01:48:49 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911110048.BAA27356@pubhealth.ku.dk>


<<insert bug report here>>

> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
Error: length of dimnames must match that of dims
> 

Changing:

dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

To:

dimnames = if (length(dn)==0) NULL else 
	   if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

seems to fix this.

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 02:40:37 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 03:40:37 +0100 (MET)
Subject: expand.grid returns vector for single arg (PR#319)
Message-ID: <199911110240.DAA27576@pubhealth.ku.dk>


<<insert bug report here>>

IMHO,

expand.grid(1:3)

should return an object of class "data.frame".

Instead I get 

> class(expand.grid(1:3))
NULL

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:Rbqtl, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Thu Nov 11 03:56:34 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Thu, 11 Nov 1999 04:56:34 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911110356.EAA27675@pubhealth.ku.dk>


Hi, all.

The help file for tapply says that if simplify is true, and the result of
the calculation is always a scalar, then tapply will return a vector.

Nonetheless:

> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
> is.vector(t1)  
[1] FALSE 
> is.array(t1) 
[1] TRUE
> 

I have found this in version 0.65.1 on an SGI running Irix 6.5, and on a
Mac running Linux-PPC.  I've also seen it on an Intel machine running
RedHat 6.0.

I noticed this because some results that I expected to be vectors couldn't
be combined into a data frame (Error: can't coerce array into a
data.frame).

It seems that the check and conversion simply never happens.  One way to
fix this is to simply add these few lines to the end of the function (just
before the value "ansmat" is returned: 

  if(length(dim(ansmat)) == 1){
    dim(ansmat) <- NULL
    names(ansmat) <- namelist[[1]]
  }

I wouldn't be surprised to find that there's a more elegant way to do
this.  Perhaps ansmat[index] should be returned instead of ansmat?  But I
haven't tested this extensively, so I don't know whether it might break
something else.

Hope this report helps.

Thanks for the terrific software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Thu Nov 11 06:57:58 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Thu, 11 Nov 1999 17:57:58 +1100 (EST)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911110657.RAA18539@leonard.anu.edu.au>

I've just installed Mandrake Linux, then compiled R-0.65.1 .
Whether because I omitted some necessary items when I selected
software for installion, or because they anyway needed to be
loaded afterwards, I found it necessary to load the following
packages in order to compile R-0.65.1
  pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
  XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

In addition I had the problem which Jack Fenner (jnf@pcisys.net;
6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
I used his solution, i.e. after running ./configure
edit the src/main/Makefile

Two lines down from
$(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
is a line that starts $(LDCMD)
Add -L /usr/X11R6/lib before $(DLLFLAGS)
and -lX11 at the end of the line (which was line 122 in my Makefile).
(NB minus ell X eleven)

After that, make and make install ran just fine.



John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:14:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:14:39 +0000 (GMT)
Subject: expand.grid returns vector for single arg (PR#319)
In-Reply-To: <199911110240.DAA27576@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911110711130.21442-100000@auk.stats>

On Thu, 11 Nov 1999 cberry@tajo.ucsd.edu wrote:

> IMHO,
> 
> expand.grid(1:3)
> 
> should return an object of class "data.frame".

[using 0.65.1 it returns its argument if there is just one]

It will in 0.90.0: this has already been altered:

BUG FIXES

...

    o   expand.grid returns a data frame even for one arg


I am not sure that is what I think it should do (no expanding goes on)
but it is what the documentation says and the prototype does.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:35:16 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:35:16 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <Pine.GSO.4.05.9911110726330.21442-100000@auk.stats>

On Thu, 11 Nov 1999, John Maindonald wrote:

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

The RedHat equivalent needs their equivalents (but is it not XFree88...?),
so this is not at all surprising.

> In addition I had the problem which Jack Fenner (jnf@pcisys.net;
> 6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
> i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
> I used his solution, i.e. after running ./configure
> edit the src/main/Makefile
> 
> Two lines down from
> $(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
> is a line that starts $(LDCMD)
> Add -L /usr/X11R6/lib before $(DLLFLAGS)
> and -lX11 at the end of the line (which was line 122 in my Makefile).
> (NB minus ell X eleven)

I find it much easier to do this using LIBS in config.site (but you can use
the command line or ~/.Rconf ...).  Something like

LIBS="-L /usr/X11R6/lib -lX11"

should do this for you.  I wonder though whether you need to re-configure
after adding the rpms, and to remove config.cache before doing so?  I
would really have expected configure to find out how to use X libraries,
but only if the relevant devel package was already installed. 

Since you will need to do this again for each release, it might be
worth trying these:

rm config.cache
./configure
[try make, if that fails]
rm config.cache
LIBS="-L /usr/X11R6/lib -lX11" ./configure [Bash syntax]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:26:11 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:26:11 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111026.LAA01320@pubhealth.ku.dk>

Thanks a lot, Chuck!

>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

yes.
I've committed the patch as follows
(starting at line 59 in  src/library/base/R/apply.R) :

     if(len.a > 0 && len.a %% d2 == 0)
 	return(array(ans, c(len.a %/% d2, d.ans),
-		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
-		     else c(list(ans.names), dn.ans)))
+		     dimnames = if(length(dn)) {
+                         if(is.null(dn.ans)) list(ans.names,NULL)
+                         else c(list(ans.names), dn.ans)}))
     return(ans)


Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:54:10 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:54:10 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111054.LAA01914@pubhealth.ku.dk>

>>>>> "MatW" == Matthew Wiener <mcw@ln.nimh.nih.gov> writes:

    MatW> The help file for tapply says that if simplify is true, and the
    MatW> result of the calculation is always a scalar, then tapply will
    MatW> return a vector.

    MatW> Nonetheless:

    >> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
    >> is.vector(t1)  
    R> [1] FALSE 
    >> is.array(t1) 
    R> [1] TRUE

    <....> 

all correct.

The question really is if the bug is in the code or the documentation.

Here you get a 1D array, something quite rare (but appearing more and more
in recent discussions...).

One could argue that the current behavior of tapply() to always return an
array if simplify = TRUE  is more consistent, than what the doc says should
happen (coercing 1D arrays to vectors).
Otoh, the protoype  *does* return a vector in this case,
and 1D arrays can be a pain... in other places.

I'm pro fixing this.
and I'll do if I don't hear protests..


    MatW>   <....>

    MatW> Hope this report helps.

yes indeed, thank you!
R's quality is growing partly because of such fine bug reports!

    MatW> Thanks for the terrific software.

you're welcome!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 11 11:46:35 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Nov 1999 12:46:35 +0100
Subject: tapply not simplifying to vector? (PR#320)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 11 Nov 1999 11:54:10 +0100 (MET)"
References: <199911111054.LAA01914@pubhealth.ku.dk>
Message-ID: <x266z92quc.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I'm pro fixing this.
> and I'll do if I don't hear protests..

Protest!...

> tapply(Ozone,list(Month=Month),mean,na.rm=T)
Month
      May      June      July    August September 
 23.61538  29.44444  59.11538  59.96154  31.44828 

Notice the "Month" in the output.

> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

Notice that the Month is the tag name of the single component of the
dimnames vector, it will disappear if you try coercing it to a vector.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 15:49:08 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 16:49:08 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111549.QAA07201@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I'm pro fixing this.
    >> and I'll do if I don't hear protests..

    PD> Protest!...

    >> tapply(Ozone,list(Month=Month),mean,na.rm=T)
    PD> Month
    PD> May      June      July    August September 
    PD> 23.61538  29.44444  59.11538  59.96154  31.44828 

    PD> Notice the "Month" in the output.

    >> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
    PD> structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
    PD> 59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    PD> Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

    PD> Notice that the Month is the tag name of the single component of the
    PD> dimnames vector, it will disappear if you try coercing it to a vector.

Completely agree with your argument.
 --> I'll change the documentation

Kurt: Another (R<->S) difference for the FAQ.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 16:55:56 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 17:55:56 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111655.RAA07580@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Thanks a lot, Chuck!
>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >>> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

    MM> yes.
    MM> I've committed the patch as follows
    MM> (starting at line 59 in  src/library/base/R/apply.R) :

    MM> if(len.a > 0 && len.a %% d2 == 0)
    MM> return(array(ans, c(len.a %/% d2, d.ans),
    MM> -		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
    MM> -		     else c(list(ans.names), dn.ans)))
    MM> +		     dimnames = if(length(dn)) {
    MM> +                         if(is.null(dn.ans)) list(ans.names,NULL)
    MM> +                         else c(list(ans.names), dn.ans)}))
    MM> return(ans)

which is unfortunately wrong (thank, PD!). 
A more correct patch has src/library/base/R/apply.R ending with

    if(len.a > 0 && len.a %% d2 == 0)
	return(array(ans, c(len.a %/% d2, d.ans),
                     if(is.null(dn.ans)) {
                         if(!is.null(ans.names)) list(ans.names,NULL)
                     } else c(list(ans.names), dn.ans)))
    return(ans)
}

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 14:38:51 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 09:38:51 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <382C267B.A7116CC8@bank-banque-canada.ca>

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

My experience with Mandrake was that if you install "everything" then R 0.65.1
compiles without problem. (It does not automatically recognize gnome, but I
don't think it is suppose to and I'm not sure what that adds.) If you only
install selected components from the Mandrake checklist, like C development and
everything else you think you might need, then you don't get fortran and some
other things you need.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 14:55:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 15:55:34 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Paul Gilbert's message of "Fri, 12 Nov 1999 09:38:51 -0500"
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca>
Message-ID: <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My experience with Mandrake was that if you install "everything" then R 0.65.1
> compiles without problem. (It does not automatically recognize gnome, but I
> don't think it is suppose to and I'm not sure what that adds.) 

It's not supposed to unless you configure --with-gnome, which does
work on RH6.1, so why not on Mandrake.

Currently that adds a couple of cute buttons and umpteen new bugs....
It's still experimental, and some of the crucial experiments are not
in yet, but Lyndon Drake says he's going to try some CORBA integration
with Gnumeric soon, which to my mind is where the really interesting
stuff begins.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 15:06:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 10:06:38 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121508.QAA09070@stat.math.ethz.ch>


>  Currently that adds a couple of cute buttons and umpteen new bugs....
>  It's still experimental, and some of the crucial experiments are not
>  in yet, but Lyndon Drake says he's going to try some CORBA integration
>  with Gnumeric soon, which to my mind is where the really interesting
>  stuff begins.
> -- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

Well, the CORBA integration with Gnumeric does not require the GNOME
material in R.  The dynamic CORBA material is sitting on
www.omegahat.org waiting for people to use it.

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 15:12:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 10:12:25 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca> <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>
Message-ID: <382C2E59.B9D83AEA@bank-banque-canada.ca>

>It's not supposed to unless you configure --with-gnome, which does
>work on RH6.1, so why not on Mandrake.

I expect it works with Mandrake, I didn't try. At first I was a little surprized
by configure's message, something like  "Gnome: no". I thought configure
couldn't recognize that I was running Gnome, but after quickly scanning
configure I decided it had to be specified. Perhaps a message like "not
specified" would be less confusing than "no" for things like this?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 12 15:27:31 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 12 Nov 1999 15:27:31 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121527.PAA12731@toucan.stats.ox.ac.uk>


> Date: Fri, 12 Nov 1999 10:12:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
[Quoting PD]

> >It's not supposed to unless you configure --with-gnome, which does
> >work on RH6.1, so why not on Mandrake.
> 
> I expect it works with Mandrake, I didn't try. At first I was a little 
surprized
> by configure's message, something like  "Gnome: no". I thought configure
> couldn't recognize that I was running Gnome, but after quickly scanning
> configure I decided it had to be specified. Perhaps a message like "not
> specified" would be less confusing than "no" for things like this?

I would suggest that the Gnome message does not appear at all unless
--with-gnome is specified (if at all).  After all, there are lots of
other things we do not put there (perl, blas, hdf5, readline, ...)
that concern many more users.

How to install Gnome support is in the INSTALL file. I have found it
very tricky, as both too early and too late versions of the support
files failed. Last time I tried libglade 0.7 (the then current one) did
not work, but 0.3 still does despite the remark in that file about
needing `libglade 0.5 or later'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 16:04:22 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 08:04:22 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 10:06:38 -0500"
References: <199911121508.QAA09070@stat.math.ethz.ch>
Message-ID: <87g0ybvgqh.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> Well, the CORBA integration with Gnumeric does not require
    DTL> the GNOME material in R.  The dynamic CORBA material is
    DTL> sitting on www.omegahat.org waiting for people to use it.

Sure, but they are two slightly different things.  R/GNOME/CORBA is
more for standard desktop integration, a bit away from the user; GNOME
is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
need some work, but theoretically will be quite interesting for
user-land stuff. 

(ob-reason for posting to R-devel:
	Has anyone ever seen the error message:
	"Abort."
	with R?  Thomas hadn't either, and suggested running under
	gdb, which I hope to, late this afternoon -- it's occuring
	during a library call, in particular, the R/OMEGAHAT/CORBA
	package, Duncan :-(...). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 16:39:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 17:39:00 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: rossini@biostat.washington.edu's message of "12 Nov 1999 08:04:22 -0800"
References: <199911121508.QAA09070@stat.math.ethz.ch> <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <x2aeojr7ff.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

> (ob-reason for posting to R-devel:
> 	Has anyone ever seen the error message:
> 	"Abort."
> 	with R?  Thomas hadn't either, and suggested running under
> 	gdb, which I hope to, late this afternoon -- it's occuring
> 	during a library call, in particular, the R/OMEGAHAT/CORBA
> 	package, Duncan :-(...). 

I think that happens when the program calls abort(), which seems to
happen (potentially) two times in memory.c and thrice in saveload.c.
For the Windows version, there are three cases in regex.c.

Both cases in memory.c happen if one bumps into an object with an
invalid typeof field during garbage collection. The ones in saveload.c
all seem to be in the HDF5 code (where it would seem to be a bit of an
overkill!). The ones in regex seem to be related to inconsistencies in
the compiled regexp code. My guess would be that there's a memory
corruption going on, triggering one of the traps in memory.c.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 16:48:01 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 11:48:01 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121649.RAA12920@stat.math.ethz.ch>


> Cc: Duncan Temple Lang <duncan@rice.research.bell-labs.com>,
>         R-devel@stat.math.ethz.ch
> 
> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> > (ob-reason for posting to R-devel:
> > 	Has anyone ever seen the error message:
> > 	"Abort."
> > 	with R?  Thomas hadn't either, and suggested running under
> > 	gdb, which I hope to, late this afternoon -- it's occuring
> > 	during a library call, in particular, the R/OMEGAHAT/CORBA
> > 	package, Duncan :-(...). 
> 
> I think that happens when the program calls abort(), which seems to
> happen (potentially) two times in memory.c and thrice in saveload.c.
> For the Windows version, there are three cases in regex.c.
> 
> Both cases in memory.c happen if one bumps into an object with an
> invalid typeof field during garbage collection. The ones in saveload.c
> all seem to be in the HDF5 code (where it would seem to be a bit of an
> overkill!). The ones in regex seem to be related to inconsistencies in
> the compiled regexp code. My guess would be that there's a memory
> corruption going on, triggering one of the traps in memory.c.
> 

It is going to be tricky to diagnose an abort() call without the
actual R command that caused it. My guess would be that there is an
exception being thrown in the Orbacus libraries and that is
propogating its way to abort.


Tony.
>> Sure, but they are two slightly different things.  R/GNOME/CORBA is
>> more for standard desktop integration, a bit away from the user; GNOME
>> is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
>> need some work, but theoretically will be quite interesting for
>> user-land stuff. 

Well the code for integrating R with Gnumeric is not "stable" either.
In fact I am not sure how much, if any, exists at this point. So
comparing the stability Gnome and the R/CORBA mechanism is
irrelevant. Even if there was that connection at the C level, more
would be needed to actual map data from R to CORBA and vice-versa.
This is what the dynamic CORBA facility in R does via "remote references".

Additionally, the R-S/CORBA interfaces are pretty solid here. A few
bug reports to omega-remote@omegahat.org (with perhaps a little more
information than above ;-)) will probably get them fixed pretty
rapidly.






> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 17:04:11 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 09:04:11 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 11:48:01 -0500"
References: <199911121650.IAA17314@mail.biostat.washington.edu>
Message-ID: <87wvrny73o.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> It is going to be tricky to diagnose an abort() call without
    DTL> the actual R command that caused it. My guess would be that
    DTL> there is an exception being thrown in the Orbacus libraries
    DTL> and that is propogating its way to abort.

I think you are right (i.e. that it's in the orbacus stuff).

It happened with the first 5 R-CORBA calls I tried, sigh... (I can't
recall exactly this morning, but follow the manual for a few minutes,
and modulo changing some names to localize, they all Aborted.

More this afternoon...  (I can't send a bug report without a
traceback!)

    DTL> Additionally, the R-S/CORBA interfaces are pretty solid
    DTL> here. A few bug reports to omega-remote@omegahat.org (with
    DTL> perhaps a little more information than above ;-)) will
    DTL> probably get them fixed pretty rapidly.

Sounds good...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Nov 13 12:53:20 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 13 Nov 1999 12:53:20 +0000 (GMT)
Subject: image()
Message-ID: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>

May I raise the issue of the behaviour of image()?  In image() dim(z) is
supposed to be c(length(x), length(y)).  This suggests that the user is
supplying the midpoints of the rectangles.  For all but the outer
rectangles this is true.  The outer rectangles, however, are only
displayed in half width.  So it is not possible to show correctly an image
plot of equally-spaced abscissa.  I would hazard a guess that these kinds
of plots make up the bulk of calls to image() either directly or after a
simple transformation (eg starting with boundary values rather than
midpoints).

Can I suggest that the code for image() be modified to show full
rectangles for all values on the basis that x and y are midpoints? 
According to my code for R (which is a bit out of date!) the minimum
change would require 4 lines to be modified in the function do_image of
plot3d.c.  The alternative, which I think would be more transparent, would
be to call the function do_image with boundary values having previously
made the appropriate calculations in image() according to whether
midpoints or boundary values are supplied.  Something like this happens in
S+ (although not very transparently!).

I would be happy to detail these changes if they were thought appropriate.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeitler@corecomm.net  Sat Nov 13 13:55:45 1999
From: zeitler@corecomm.net (zeitler@corecomm.net)
Date: Sat, 13 Nov 1999 14:55:45 +0100 (MET)
Subject: configure script error (PR#321)
Message-ID: <199911131355.OAA23608@pubhealth.ku.dk>

Full_Name: David Zeitler
Version: 0.65.1
OS: Linux Mandrake
Submission from: (NULL) (209.81.240.221)


Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
conftest.c to test int and double compatibility between g77 and gcc. This didn't

show up when compiling on my K6 machine, but did on my Celeron notebook. The K6
reports as an i586 processor and the Celeron reports i686. This appears to be
the
only difference between the two builds.

The problem shows up as a failure of this test listed in the configure.log as
line 2107. After adding ${CFLAGS}, the build ran to completion normally on both
machines.

Orginal line 2158:
      if ${CC-cc} -c conftest.c 1>&5 2>&5; then

New line 2158:
      if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 13 15:05:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Nov 1999 16:05:12 +0100
Subject: configure script error (PR#321)
In-Reply-To: zeitler@corecomm.net's message of "Sat, 13 Nov 1999 14:55:45 +0100 (MET)"
References: <199911131355.OAA23608@pubhealth.ku.dk>
Message-ID: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>

zeitler@corecomm.net writes:

> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
....

>       if ${CC-cc} -c conftest.c 1>&5 2>&5; then
> 
> New line 2158:
>       if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

The configure script is autogenerated from configure.in and
aclocal.m4, so fixes by line number is not too useful. In my sources
it was now line 1987. Thanks anyway.

That'll be l.424 of the current aclocal.m4, inside
AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

I'll leave it for those who actually understand autoconf to check that
your fix is correct.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat Nov 13 21:20:19 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 13 Nov 1999 22:20:19 +0100 (MET)
Subject: patches for alpha
Message-ID: <Pine.OSF.4.10.9911132108130.27388-100000@zidsrv.sci.uni-klu.ac.at>


Recently I reviewed my RPM spec files for DU 4.0, and noticed that I
forgot to post some problems + patches:

1. ./configure fails to choose a PIC flag, I simply removed the
AC_MSG_ERROR and it works. There is actually no PIC flag for DEC cc (with
DU 4.0E)
--- ./configure.in.alpha-patch  Mon Aug 23 06:36:28 1999
+++ ./configure.in      Sun Sep 12 17:38:27 1999
@@ -541,7 +541,9 @@
       -bI:\$(R_HOME)/etc/R.exp -lc -lm"
     ;;
   alpha*osf*)
+    ldcmd="f77 -g -nofor_main -fpe3 "
     cpicflags=
+    shlibld=f77
     shlibldflags=-shared
     ;;
   alpha*linux)
@@ -612,7 +614,7 @@
 : ${CPICFLAGS=${cpicflags}}
 if test -z "${CPICFLAGS}"; then
   AC_MSG_WARN([Could not determine CPICFLAGS.])
-  AC_MSG_ERROR([See the file INSTALL for more information.])
+#  AC_MSG_ERROR([See the file INSTALL for more information.])
 fi
 : ${FPICFLAGS=${fpicflags}}
 : ${SHLIBLD=${shlibld}}

May be some autoconf expert could provide an solution like
if arch!=alpha then AC_MSG_ERROR ?

1.a depending does not work, I added some lines to Makeconf.in:
My automake is automake-1.4
--- ./Makeconf.in.alpha-patch   Thu Aug 19 00:24:49 1999
+++ ./Makeconf.in       Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 .SUFFIXES:
 .SUFFIXES: .c .f .d .o

-@depend_rules_frag@
+# added for alpha (autoconf broken?):
+.c.d:
+       @echo "making $@ from $<"
+       @$(CC) -M $(ALL_CPPFLAGS) $(ALL_CFLAGS) $< >$@
 .c.o:
        $(CC) $(ALL_CPPFLAGS) $(ALL_CFLAGS) -c $< -o $@
 @f77_rules_frag@


2. aclocal.m4 has many wrong C preprocessor directives "#define"s and
"#include"s with "#" not in column 1 (DEC cc wants it there) 

That means
 
       #define SOMETHING

does not work, but 

#define SOMETHING 

or (for indenting together with neighbour lines)

#       define SOMETHING

works.

Here is the patch:
--- ./aclocal.m4.alpha-ac-patch	Tue Oct 26 13:32:08 1999
+++ ./aclocal.m4	Tue Oct 26 13:33:46 1999
@@ -388,13 +388,13 @@
       ${FC} -c ${FFLAGS} conftestf.f 1>&AC_FD_CC 2>&AC_FD_CC
       changequote(, )
       cat > conftest.c <<EOF
-        #include <math.h>
-	#include "confdefs.h"
-	#ifdef HAVE_F77_UNDERSCORE
-	# define F77_SYMBOL(x)   x ## _
-	#else
-	# define F77_SYMBOL(x)   x
-	#endif
+#      include <math.h>
+#      include "confdefs.h"
+#      ifdef HAVE_F77_UNDERSCORE
+#        define F77_SYMBOL(x)   x ## _
+#      else
+#        define F77_SYMBOL(x)   x
+#      endif
 
 	extern void F77_SYMBOL(cftest)(int *a, int *b,
 	  double *x, double *y);
@@ -502,10 +502,10 @@
 	  changequote(<<, >>)dnl
 	  <<
 	  int main () {
-	  #include <fpu_control.h>
-	  #if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
+#        include <fpu_control.h>
+#        if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
 	    return(_FPU_DEFAULT != _FPU_IEEE);
-	  #endif
+#        endif
 	    return(0);
 	  }
 	  >>,
@@ -527,7 +527,7 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <stdlib.h>
+#      include <stdlib.h>
 	int main () {
 	  int *p = calloc(0, sizeof(int));
 	  return(p == 0);
@@ -550,14 +550,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_FINITE
+#      ifdef HAVE_FINITE
 	  return(finite(1./0.) | finite(0./0.) | finite(-1./0.));
-	#else
+#      else
 	  return(0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -577,14 +577,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_ISNAN
+#      ifdef HAVE_ISNAN
 	  return(!(log(0.) == -1. / 0. && isnan(log(-1.))));
-	#else
+#      else
 	  return(log(0.) != -1. / 0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -622,8 +622,8 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include <ieeefp.h>
+#      include <math.h>
+#      include <ieeefp.h>
 	int main () {
 	  double x = 0;
 	  fpsetmask(0); x = x / x; return (x != x);

3. multiple declaration of mkString, const char* did not work:
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration,
parameter 1 has a different type than specified in an earlier declaration
of this function. (mismatparam)
SEXP mkString(const char *s)

Also another "#" not in column 1.

One solution is the following, but I'm not sure if the move from const
char* to char* breaks something. I also don't know why const char* did not
work.

My bison is 
root@delta[src]# bison -V
GNU Bison version 1.25

--- ./src/include/Rinternals.h.alpha-patch	Sun Sep 12 17:41:57 1999
+++ ./src/include/Rinternals.h	Sun Sep 12 17:43:37 1999
@@ -361,7 +361,7 @@
 SEXP matchArgs(SEXP, SEXP);
 SEXP matchPar(char*, SEXP*);
 SEXP mkChar(const char*);
-SEXP mkString(const char*);
+SEXP mkString(char*);
 SEXP namesgets(SEXP, SEXP);
 int ncols(SEXP);
 int nrows(SEXP);
--- ./src/main/gram.y.alpha-patch	Tue Aug 10 10:56:17 1999
+++ ./src/main/gram.y	Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 SEXP		mkFloat(char *);
 SEXP		mkInteger(char *);
 SEXP		mkNA(void);
-SEXP		mkString(const char *);
+/* problems with multiple declarations of mkString in DEC cc ?:*/
+#ifndef _R_INTERNALS_H_
+SEXP		mkString(char *);
+#endif
 SEXP		mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1365,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(char *s)
 {
     SEXP t;
 
@@ -1623,9 +1628,9 @@
 		SourcePtr = FunctionSource + 8;
 	    }
 	    FunctionStart[FunctionLevel] = SourcePtr - 8;
-	    #if 0
+#          if 0
 	    printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-	    #endif
+#          endif
 	}
 	return kw;
     }



ALbrecht
 
-------------------------------------------------------------------------------
Albrecht Gebhardt                   email   : albrecht.gebhardt@uni-klu.ac.at
Institut fuer Mathematik            Tel.    : (++43 463) 2700/832
Universitaet Klagenfurt             Fax     : (++43 463) 2700/834
Villacher Str. 161
A-9020 Klagenfurt, Austria
-------------------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgri@hal.stat.unipd.it  Sun Nov 14 17:17:09 1999
From: mgri@hal.stat.unipd.it (mgri@hal.stat.unipd.it)
Date: Sun, 14 Nov 1999 18:17:09 +0100 (MET)
Subject: bug in arma.sim (PR#322)
Message-ID: <199911141717.SAA26416@pubhealth.ku.dk>

Dear Sir,

I think I found a bug in the function arma.sim, which is defined in
the help page of the function filter:

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, ma, sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}

I am using R version 0.65.0 under Linux. If I understand correctly the
way the function arma.sim is supposed to work, the instruction

arma.sim(n=200, ar=0.5, ma=0.5, sigma=1.2)

should generate values from an ARMA(1,1) model. However, the values
generated seem to come from an AR(1) model. I think this is due to the
instruction x <- filter(x, ma, sides=1) in the definition of
arma.sim, which doesn't produce the desired result. The function
defined below gives the output that my understanding of the
procedures involved would make me expect.

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{  
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, c(1,ma), sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}


I simply changed

x <- filter(x, ma, sides=1)

to

x <- filter(x, c(1,ma), sides=1)


Also, I wonder whether it would be more appropriate to write

rnorm(n+100, 0, sigma)

instead of

rnorm(n+100, 0, sigma^2)

since rnorm requires the standard deviation rather than the variance.


Best regards,

Matteo Grigoletto
mgri@hal.stat.unipd.it

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 19:20:46 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 19:20:46 +0000 (GMT)
Subject: bug in arma.sim (PR#322)
In-Reply-To: <199911141717.SAA26416@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>

On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:

> I think I found a bug in the function arma.sim, which is defined in
> the help page of the function filter:

[...]

Yes, that has not been tested since filter was altered for S-PLUS
compatibility.

Fixed for 0.90.0 (due out on Friday)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 22:50:42 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 14 Nov 1999 23:50:42 +0100 (MET)
Subject: { and } in examples get confused in help (PR#323)
Message-ID: <199911142250.XAA27208@pubhealth.ku.dk>

Take a look at ?image, or the html version:

     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^{-r/6{))
...
     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^}-r/6}))


The {} {} pairing has become {{ }}.  Looks like a bug in the 
marking/unmarking code in Rdconvlib.pl


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 14 23:12:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 00:12:52 +0100
Subject: bug in arma.sim (PR#322)
In-Reply-To: Prof Brian D Ripley's message of "Sun, 14 Nov 1999 19:20:46 +0000 (GMT)"
References: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>
Message-ID: <x2ogcwsm4r.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:
> 
> > I think I found a bug in the function arma.sim, which is defined in
> > the help page of the function filter:
> 
> [...]
> 
> Yes, that has not been tested since filter was altered for S-PLUS
> compatibility.
> 
> Fixed for 0.90.0 (due out on Friday)

...Monday, actually. November 22.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 23:10:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 23:10:26 +0000 (GMT)
Subject: image()
In-Reply-To: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
Message-ID: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>

On Sat, 13 Nov 1999, Jonathan Rougier wrote:

> May I raise the issue of the behaviour of image()?  In image() dim(z) is
> supposed to be c(length(x), length(y)).  This suggests that the user is
> supplying the midpoints of the rectangles.  For all but the outer
> rectangles this is true.  The outer rectangles, however, are only
> displayed in half width.  So it is not possible to show correctly an image
> plot of equally-spaced abscissa.  I would hazard a guess that these kinds
> of plots make up the bulk of calls to image() either directly or after a
> simple transformation (eg starting with boundary values rather than
> midpoints).
> 
> Can I suggest that the code for image() be modified to show full
> rectangles for all values on the basis that x and y are midpoints? 
> According to my code for R (which is a bit out of date!) the minimum
> change would require 4 lines to be modified in the function do_image of
> plot3d.c.  The alternative, which I think would be more transparent, would
> be to call the function do_image with boundary values having previously
> made the appropriate calculations in image() according to whether
> midpoints or boundary values are supplied.  Something like this happens in
> S+ (although not very transparently!).

I needed this in hurry this weekend for some fMRI plots. I've altered
image so that if z is m x n, x can be of length m or m+1 and y of length n
or n+1.  If x is of length m it supplies the midpoints, if of length m+1
it supplies the boundaries of the cells. (All S compatible.)  The internal
call is made with the boundary values.  The outer cells are plotted
in full width.

The one change is if m=1 or n=1. I reckon that is an error, but S
and R previously filled the whole width. Does anyone want that behaviour?
At present those cases are an error.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 15 08:38:40 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Nov 1999 09:38:40 +0100 (MET)
Subject: image()
In-Reply-To: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
References: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
 <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
Message-ID: <14383.50832.260276.838244@gargle.gargle.HOWL>

>>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
>>>>> <ripley@stats.ox.ac.uk> said:

    BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
    >> May I raise the issue of the behaviour of image()?  In image()
    >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
    >> that the user is supplying the midpoints of the rectangles.  For all
    >> but the outer rectangles this is true.  The outer rectangles,
    >> however, are only displayed in half width.  So it is not possible to
    >> show correctly an image plot of equally-spaced abscissa.  I would
    >> hazard a guess that these kinds of plots make up the bulk of calls
    >> to image() either directly or after a simple transformation (eg
    >> starting with boundary values rather than midpoints).
    >> 
    >> Can I suggest that the code for image() be modified to show full
    >> rectangles for all values on the basis that x and y are midpoints?
    >> According to my code for R (which is a bit out of date!) the minimum
    >> change would require 4 lines to be modified in the function do_image
    >> of plot3d.c.  The alternative, which I think would be more
    >> transparent, would be to call the function do_image with boundary
    >> values having previously made the appropriate calculations in
    >> image() according to whether midpoints or boundary values are
    >> supplied.  Something like this happens in S+ (although not very
    >> transparently!).

    BDR> I needed this in hurry this weekend for some fMRI plots. I've
    BDR> altered image so that if z is m x n, x can be of length m or m+1
    BDR> and y of length n or n+1.  If x is of length m it supplies the
    BDR> midpoints, if of length m+1 it supplies the boundaries of the
    BDR> cells. (All S compatible.)  The internal call is made with the
    BDR> boundary values.  The outer cells are plotted in full width.

Excellent, thank you!

    BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
    BDR> and R previously filled the whole width. Does anyone want that
    BDR> behaviour?

yes, I do.
- If I remember properly, I even spent an hour or so to make this work in R:
 When I was porting the wavethresh package,
 one of the multiresolution plots didn't work in R, first, because  image()
 didn't work for 1x1 images.

- Also, for the matter of completeness and consistency, I think this just
  should work.

    BDR>   At present those cases are an error.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 15 09:00:06 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 15 Nov 1999 09:00:06 +0000 (GMT)
Subject: image()
In-Reply-To: <14383.50832.260276.838244@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.9911150857190.23496-100000@auk.stats>

On Mon, 15 Nov 1999, Martin Maechler wrote:

> >>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
> >>>>> <ripley@stats.ox.ac.uk> said:
> 
>     BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
>     >> May I raise the issue of the behaviour of image()?  In image()
>     >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
>     >> that the user is supplying the midpoints of the rectangles.  For all
>     >> but the outer rectangles this is true.  The outer rectangles,
>     >> however, are only displayed in half width.  So it is not possible to
>     >> show correctly an image plot of equally-spaced abscissa.  I would
>     >> hazard a guess that these kinds of plots make up the bulk of calls
>     >> to image() either directly or after a simple transformation (eg
>     >> starting with boundary values rather than midpoints).
>     >> 
>     >> Can I suggest that the code for image() be modified to show full
>     >> rectangles for all values on the basis that x and y are midpoints?
>     >> According to my code for R (which is a bit out of date!) the minimum
>     >> change would require 4 lines to be modified in the function do_image
>     >> of plot3d.c.  The alternative, which I think would be more
>     >> transparent, would be to call the function do_image with boundary
>     >> values having previously made the appropriate calculations in
>     >> image() according to whether midpoints or boundary values are
>     >> supplied.  Something like this happens in S+ (although not very
>     >> transparently!).
> 
>     BDR> I needed this in hurry this weekend for some fMRI plots. I've
>     BDR> altered image so that if z is m x n, x can be of length m or m+1
>     BDR> and y of length n or n+1.  If x is of length m it supplies the
>     BDR> midpoints, if of length m+1 it supplies the boundaries of the
>     BDR> cells. (All S compatible.)  The internal call is made with the
>     BDR> boundary values.  The outer cells are plotted in full width.
> 
> Excellent, thank you!
> 
>     BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
>     BDR> and R previously filled the whole width. Does anyone want that
>     BDR> behaviour?
> 
> yes, I do.
> - If I remember properly, I even spent an hour or so to make this work in R:
>  When I was porting the wavethresh package,
>  one of the multiresolution plots didn't work in R, first, because  image()
>  didn't work for 1x1 images.
> 
> - Also, for the matter of completeness and consistency, I think this just
>   should work.
> 
>     BDR>   At present those cases are an error.
> 
OK, I know how to do it and will implement it soon (but probably not
today).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 10:10:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 11:10:30 +0100 (CET)
Subject: configure script error (PR#321)
In-Reply-To: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
References: <199911131355.OAA23608@pubhealth.ku.dk>
 <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
Message-ID: <14383.56342.286716.695484@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> zeitler@corecomm.net writes:
>> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
> ....

>> if ${CC-cc} -c conftest.c 1>&5 2>&5; then
>> 
>> New line 2158:
>> if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

> The configure script is autogenerated from configure.in and
> aclocal.m4, so fixes by line number is not too useful. In my sources
> it was now line 1987. Thanks anyway.

Thanks for the report.

> That'll be l.424 of the current aclocal.m4, inside
> AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

> I'll leave it for those who actually understand autoconf to check that
> your fix is correct.

Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 12:50:08 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 13:50:08 +0100 (CET)
Subject: AW: [R] read.table problems
In-Reply-To: <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca>
 <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
Message-ID: <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>

>>>>> =?iso-8859-1?Q?Jens Oehlschl=E4gel-Akiyoshi?= writes:

> Below is a fix for read.table() to better read in CSV-files.

>> # try this
>> cat("1;2,3\n4;5,6\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1;2,3
> 4;5,6
>> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
>   V1  V2
> 1  1 2.3
> 2  4 5.6

I am not sure we should do this.

If you are trying to read in German-format numbers, this should be
doable by setting the locale accordingly.  Does anyone know whether
strtod() will work this way?

> BTW: I think read.table() or it's documentation needs another fix,
>      because of the following:


>> cat("1 2\n3 4\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1 2
> 3 4
>> read.table("d:/temp/t.dat", as.is=TRUE)$V1
> [1] "1" "3"


> Citing from the help file:

>       as.is: the default behavior of `read.table' is to convert
>              non-numeric variables to factors.  The variable
>              `as.is' controls this conversion.  Its value is
>              either a vector of logicals (values are recycled
>              if necessary), or a vector of numeric indices
>              which specify which columns should be left as
>              character strings.

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 13:07:43 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 14:07:43 +0100
Subject: AW: [R] read.table problems
In-Reply-To: Kurt Hornik's message of "Mon, 15 Nov 1999 13:50:08 +0100 (CET)"
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca> <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel> <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>
Message-ID: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
> >   V1  V2
> > 1  1 2.3
> > 2  4 5.6
> 
> I am not sure we should do this.
> 
> If you are trying to read in German-format numbers, this should be
> doable by setting the locale accordingly.  Does anyone know whether
> strtod() will work this way?

Only too well, I'm afraid. AFAIR we specifically do *not* localize
LC_NUMERIC for that reason. Will also affect as.numeric(), etc., causing
general panic. Besides, we'll always have problems with not knowing
the locale in which a .csv was created.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kmb28@cus.cam.ac.uk  Mon Nov 15 13:38:41 1999
From: kmb28@cus.cam.ac.uk (kmb28@cus.cam.ac.uk)
Date: Mon, 15 Nov 1999 14:38:41 +0100 (MET)
Subject: R 0.65.1 config bug (PR#324)
Message-ID: <199911151338.OAA06120@pubhealth.ku.dk>

install@herb1:~/R-0.65.1> ./configure --help

....
--with-gnome            use GNOME (if available)
--with-gnome-includes   Specify location of GNOME headers
--with-gnome-libs       Specify location of GNOME libs
--with-gnome            Specify prefix for GNOME files

Is that last one correct?
Keith
-- 
Keith Briggs, King's College Research Centre and Department of Plant 
Sciences, University of Cambridge, Downing Street, Cambridge CB2 3EA 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 15 15:48:02 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 15 Nov 1999 10:48:02 -0500
Subject: univariate ar dimension
Message-ID: <38302B32.E6BE37D1@bank-banque-canada.ca>

I have now cleaned out most of the old R-bug work-arounds in my DSE
library and will soon have a version for CRAN, but with 0.90 imminent I
will probably wait for that. The remaining mask I use is a replacement
for ar in the ts library, to make $ar in the result an array rather than
a vector even in the univariate case. The reason for doing this is to
avoid always needing to code the univariate case as a special exception.
The change should not affect any univariate code which assumes the
result is a vector, since an Nx1x1 array can still be indexed as a
vector. My fix is consistent with Splus (3.3), however, I am not sure if
the ts library result is considered a feature or a bug. It would be good
to resolve this for 0.90 so I can either remove my fix or put in a more
permanent work-around.

Paul Gilbert
_________
# the second to last line is a fix for ar in the ts library
ar <- function (x, aic = TRUE, order.max = NULL,
         method = c("yule-walker", "burg", "ols", "mle"),
         na.action = na.fail, series = deparse(substitute(x)),  ...)
{ # it is not clear why quote around "y=w" are necessary.
    res <- switch(match.arg(method),
            "yule-walker" = ar.yw(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            burg = ar.burg(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            ols = ar.ols(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            mle = ar.mle(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...))
    res$call <- match.call()
    if (! is.array(res$ar)) res$ar <- array(res$ar,
c(length(res$ar),1,1)) #fix
    res
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Mon Nov 15 15:43:04 1999
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Mon, 15 Nov 1999 16:43:04 +0100
Subject: AW: [R] read.table problems
In-Reply-To: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>
Message-ID: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>


Two short remarks

1) I still do changes on my version of read.table() as I might need a proper
csv.reader during the next days,
   so perhaps you might want to wait

2) Of course an alternative to patching read.table() is renaming my version
to e.g. read.table.csv()
   (but it is not a full csv.reader yet)

Here is an update, which by default strips quotation marks enclosing
colnames, character data or numeric data
With this version you can read in csv data such that

 "white.begin"  ,  "predy"   , "x"     , "y"
 "       asdf"  ,  0.367985  , "25.34" , 0

gives as resulting col.names instead of

> names(temp)
[1] "\"highq\"" "\"lowq\""  "\"predy\"" "\"x\""     "\"y\""

> names(temp)
[1] "highq" "lowq"  "predy" "x"     "y"

and as resulting data

 "       asdf", 0.367985, 25.34, 0

however it will fail on character data containing the separator or quotation
marks

Best regards


Jens Oehlschlägel-Akiyoshi



read.table <-
function (file
, header = FALSE
, sep = ""
, row.names
, col.names
, as.is = FALSE
, na.strings = "NA"
, skip = 0
, dec.sep = '.'                ## added by JOA
, strip.white = TRUE           ## added by JOA, set to FALSE for backward
compatibility
, quotation.mark = '"'         ## added by JOA
, strip.quotation.marks = TRUE ## added by JOA, set to FALSE for backward
compatibility
)
{
    ##### remark: this version of read.table seems to works fine for
numerical csv data
    ##### but will fail on character data containing the separator or
quotation marks
    ### Start JOA changes
    ## could have a warning
    #if (strip.white && sep[1] %in% c("", " ", "\t"))warning("read.table:
strip.white AND with white space seperator !?")
    ## .Internal(type.convert) calls do_typecvt() which calls C-library
function strtod() which uses '.' as dec.sep
    ## thus let's replace other dec.sep here
    if (dec.sep[1]==sep[1])stop("parsing rule violation: sep must not equal
dec.sep")
    type.convert <- function(x, na.strings = "NA", as.is = FALSE,
dec=dec.sep){
    	if (dec[1]!="."){
    	  # R-developers may know a more efficient internal function to replace
characters
    	  # I also don't know whether it is efficient to change parameters
before calling .Internal
    	  # however it seems to work
    	  # In case a global option$dec.sep is introduced, this fix needs to be
adapted
    	  x <- gsub(dec[1], '.', x, ignore.case=FALSE, extended=FALSE)
    	}
      .Internal(type.convert(x, na.strings, as.is))
    }
    quoted.string.matcher <- paste('\(^', quotation.mark, '\)\(.*\)\(',
quotation.mark, '$\)', sep='')
    unquote <- function(text, quoted.string)sub(quoted.string.matcher,
'\\2', text, extended=T)
    ### Stop JOA changes

    row.lens <- count.fields(file, sep, skip)
    nlines <- length(row.lens)
    rlabp <- nlines > 1 && (row.lens[2] - row.lens[1]) == 1
    if (rlabp && missing(header))
        header <- TRUE
    if (header) {
        col.names <- scan(file, what = "", sep = sep, nlines = 1,
            strip.white = strip.white, # added by JOA
            quiet = TRUE, skip = skip)
        skip <- skip + 1
        row.lens <- row.lens[-1]
        nlines <- nlines - 1
    }
    if (strip.quotation.marks) col.names <- unquote(col.names) ## added by
JOA
    else if (missing(col.names))
        col.names <- paste("V", 1:row.lens[1], sep = "")
    cols <- unique(row.lens)
    if (length(cols) != 1) {
        cat("\nrow.lens=\n")
        print(row.lens)
        stop("all rows must have the same length.")
    }
    what <- rep(list(""), cols)
    if (rlabp)
        col.names <- c("row.names", col.names)
    names(what) <- col.names
    data <- scan(file = file, what = what, sep = sep, skip = skip,
        na.strings = na.strings,
        strip.white = strip.white, ## added by JOA
        quiet = TRUE)

    if (cols != length(data)) {
        warning(paste("cols =", cols, " != length(data) =", length(data)))
        cols <- length(data)
    }
    if (is.logical(as.is)) {
        as.is <- rep(as.is, length = cols)
    }
    else if (is.numeric(as.is)) {
        if (any(as.is < 1 | as.is > cols))
            stop("invalid numeric as.is expression")
        i <- rep(FALSE, cols)
        i[as.is] <- TRUE
        as.is <- i
    }
    else if (length(as.is) != cols)
        stop(paste("as.is has the wrong length", length(as.is),
            "!= cols =", cols))

   ## Start changed by JOA
   if (strip.quotation.marks) {
         for (i in 1:cols)
             if (as.is[i])
                 data[[i]] <- unquote(data[[i]])
             else
                 data[[i]] <- type.convert( unquote(data[[i]]) )
   } else {
       for (i in 1:cols) if (!as.is[i])
           data[[i]] <- type.convert(data[[i]])
   }
   ## Stop changed by JOA

    if (missing(row.names)) {
        if (rlabp) {
            row.names <- data[[1]]
            data <- data[-1]
        }
        else row.names <- as.character(1:nlines)
    }
    else if (is.null(row.names)) {
        row.names <- as.character(1:nlines)
    }
    else if (is.character(row.names)) {
        if (length(row.names) == 1) {
            rowvar <- (1:cols)[match(col.names, row.names, 0) ==
                1]
            row.names <- data[[rowvar]]
            data <- data[-rowvar]
        }
    }
    else if (is.numeric(row.names) && length(row.names) == 1) {
        rlabp <- row.names
        row.names <- data[[rlabp]]
        data <- data[-rlabp]
    }
    else stop("invalid row.names specification")
    class(data) <- "data.frame"
    row.names(data) <- row.names
    data
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 16:14:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 17:14:53 +0100
Subject: AW: [R] read.table problems
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Mon, 15 Nov 1999 16:43:04 +0100"
References: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>
Message-ID: <x2n1sfu3ya.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Two short remarks
> 
> 1) I still do changes on my version of read.table() as I might need a proper
> csv.reader during the next days,
>    so perhaps you might want to wait
> 
> 2) Of course an alternative to patching read.table() is renaming my version
> to e.g. read.table.csv()
>    (but it is not a full csv.reader yet)

...and it isn't realistically going to be without surgery on the
internals of scan and count.fields. So, since there is a feature
freeze on for 0.90, we should hold back but try to get something like
this into the next version. There are a couple of other ideas that I'd
like to pursue at that point too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 15 20:47:01 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 15 Nov 1999 15:47:01 -0500
Subject: (G)UI for R and in R
In-Reply-To: Your message of "12 Nov 1999 08:04:22 PST."
 <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <199911152047.PAA18728@infiniti.ece.cmu.edu>


Hi,

  I've followed the discussions about the object explorer thingy et
al. last week.  I'll add below my thoughts about what a GUI could do
and how it could be done.  This matrix shows along which "axes" I think
to evaluate how R will fit into my tool box in the future.  It may or
may not be interesting for the developers on this list -- I was just a
bit confused about what some people want and how they get there.
  I'm _not_ asking for answers for the questions below.  (I can easily
find out that a solution to R+CGI is Rweb.)  I'm interested in whether
I forgot some major idea or realization path...

Usage -- what are the interfaces for?

1) for data input or exchange
   Can I drop my data from a spread sheet into R?  Can I get results
back into a (spreadsheet) application?  Can I request data from a database?
dto. with "high-level" constructs in R?  Can I call R from a CGI
script?  Can another application "drive" my R session?

2) for help with writing R scripts
   Does R help me with a graphical introspection tool?  I guess this
is what the object explorer is meant for.  Can I bring up a list of
objects and kinda click my way to the attributes of the object?  its
data?  (Not unusual scenario: And why does apply not work this time?
Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
a function and send it to an editor?  Find out where it came from?

3) for "clients"
   Can I package an R program so that others aren't stuck with a
static analysis of the data?  Can I add menus/options/etc. so that
others can twiddle my view of the data (possibly without understanding
R)?  Sometimes, this is very simple stuff, like maybe somebody would
rather see relative than abs. frequency.  Why not give them a button
and a plot device instead of a static picture?


How -- what are my options to program an interface?

1/2) approaches for data import/export - stuff I've seen mentioned is use
of CORBA, SQL, DCOM, other D&D protocols.  Yes, they all do different
things, but the underlying question is: Why do I export my data to
file to then call read.table in R?  Why doesn't R just "know" about my
data?  Could I mark a table in another program, then go to my R prompt
and say "new.data <- import.from.selection ()"?  If I can attach
data.frames, why not a data base?
  Also, who is in the driver's seat?  In option 1 it's R where R
queries for data.  In option 2 it's another application that ask R to
perform services (calculations, model fitting, etc.) on its behalf.

3) "low-level" approach for the GUI part - use a system dependent
library (like X, Xt, Gnome and the Windows equivalents).  This hurts
if you move between platforms.  It also means lots of code and need
for a compiler.  I actually also put the Java solutions here -- Java
helps to stay (mostly) platform-independent but is low-level in its
approach to UI programming.  This may be different if you rely on
Swing or other GUI classes.  If you don't, you'll have to write a
decent amount of code.

4) "high-level" approach for the GUI part - I'd put scripting
languages here.  Actually, the tcl/tk interface wasn't mentioned last
week but appears, at least to me, to be a promising approach.  You
can piece an interface together rather quickly in tcl/tk and you don't
have to touch a compiler.

5) "high-level" approach to GUI but with R commands - I don't like 1
and only "kind of" 2 because they require me to go outside of R.  I'd
like to program a menubar (with a help entry), some buttons, multiple
canvases (each e.g. an X11 device and a frame around with a button
"send to printer"), with R functions.  (Of course, I see that this in
turn goes back to either 1 or 2.  But only once for the authors of the
interface functions.)

Option 5 goes into the direction of a visual R - I don't want to
write a for loop to calculate the mean of a data vector.  I want to
say "mean(v)".  Along the same line, I want to say
  fam.select <- choice (title="Link function", c("gaussian", "poisson"),
                       exactly.one=T);
  ...
  glm (..., family=query(fam.select), ...)
This gives the user a menu, allowing him/her to influence
calculations.  And I don't have to think about radio buttions or
geometry managers or whatever.

But then, would this be part of R or do you want to keep stuff like
this outside?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Mon Nov 15 21:08:06 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Mon, 15 Nov 1999 22:08:06 +0100 (MET)
Subject: xlim, ylim problem in barplot (PR#325)
Message-ID: <199911152108.WAA09550@pubhealth.ku.dk>

Hi, all.

The lower bound in a barplot (or the left bound if you're making a
horizontal barplot) is -0.01 no matter what.  This causes problems if
you're making a barplot of small values (say, < .001), as most of the plot
is taken up with blank space beneath the axis, and the bars are squeezed
in at the top.  The fix seems to be simple: replace lines

41:      xlim <- range(-0.01, height) 
59:      ylim <- range(-0.01, height)

by the following:

41:      xlim <- range(max(-0.01, -0.01 * height), height) 
59:      ylim <- range(max(-0.01, -0.01 * height), height)

This seems to work for small negative numbers as well.

Thanks again for the software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 21:39:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 22:39:20 +0100
Subject: xlim, ylim problem in barplot (PR#325)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Mon, 15 Nov 1999 22:08:06 +0100 (MET)"
References: <199911152108.WAA09550@pubhealth.ku.dk>
Message-ID: <x2hfinh1tj.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> Hi, all.
> 
> The lower bound in a barplot (or the left bound if you're making a
> horizontal barplot) is -0.01 no matter what.  This causes problems if
> you're making a barplot of small values (say, < .001), as most of the plot
> is taken up with blank space beneath the axis, and the bars are squeezed
> in at the top.  The fix seems to be simple: replace lines
> 
> 41:      xlim <- range(-0.01, height) 
> 59:      ylim <- range(-0.01, height)
> 
> by the following:
> 
> 41:      xlim <- range(max(-0.01, -0.01 * height), height) 
> 59:      ylim <- range(max(-0.01, -0.01 * height), height)
> 
> This seems to work for small negative numbers as well.

or simply range(-0.01*height,height) 

That one might just be sneaked into the upcoming release....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Nov 15 22:05:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Nov 1999 16:05:22 -0600
Subject: (G)UI for R and in R
In-Reply-To: Thomas Vogels's message of "Mon, 15 Nov 1999 15:47:01 -0500"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu>
Message-ID: <6r4sen9zrx.fsf@franz.stat.wisc.edu>

First, let me say that I come from the command-line-oriented world and
most of the time I find that graphical user interfaces just get in the
way.  Like many people who use implementations of the S language
(i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
preferred environment for running and editing S code is emacs with the
ESS package.

My responses on a GUI for writing scripts are from this perspective
but I do recognize that many people find a GUI much more comfortable
than trying to remember lots of archane function names and, in the
case of emacs, keystrokes.

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> 2) for help with writing R scripts
>    Does R help me with a graphical introspection tool?  I guess this
> is what the object explorer is meant for.  Can I bring up a list of
> objects and kinda click my way to the attributes of the object?  its
> data?  (Not unusual scenario: And why does apply not work this time?
> Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> a function and send it to an editor?  Find out where it came from?

(BTW, I think you mean "graphical inspection tool".)  Although not a
substitute for graphical inspection, I find Martin Maechler's "str"
function to be invaluable when I am trying to remember the structure
of various objects, including (and perhaps especially) those for which
I designed the structure.

As far as editing a function definition, there are excellent
facilities within ESS for that.  Object name completion within ESS is
by itself worth the price of learning to use the mode.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 00:53:13 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Tue, 16 Nov 1999 13:53:13 +1300
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911121527.PAA12731@toucan.stats.ox.ac.uk>; from Prof Brian Ripley on Fri, Nov 12, 1999 at 03:27:31PM +0000
References: <199911121527.PAA12731@toucan.stats.ox.ac.uk>
Message-ID: <19991116135313.C8605@stat1.stat.auckland.ac.nz>

On Fri, Nov 12, 1999 at 03:27:31PM +0000, Prof Brian Ripley wrote:
> 
> > Date: Fri, 12 Nov 1999 10:12:25 -0500
> > From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > 
> [Quoting PD]
> 
> > >It's not supposed to unless you configure --with-gnome, which does
> > >work on RH6.1, so why not on Mandrake.
> > 
> > I expect it works with Mandrake, I didn't try. At first I was a little 
> surprized
> > by configure's message, something like  "Gnome: no". I thought configure
> > couldn't recognize that I was running Gnome, but after quickly scanning
> > configure I decided it had to be specified. Perhaps a message like "not
> > specified" would be less confusing than "no" for things like this?
> 
> How to install Gnome support is in the INSTALL file. I have found it
> very tricky, as both too early and too late versions of the support
> files failed. Last time I tried libglade 0.7 (the then current one) did
> not work, but 0.3 still does despite the remark in that file about
> needing `libglade 0.5 or later'.

Actually, you will get some segfaults and misplaced GUI items with earlier
libglades than 0.5.

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:51:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:51:23 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911160751.IAA11396@pubhealth.ku.dk>

I was getting worried. 0.65 is the first version that I had not been
able to crash. Well the following gives a seg fault on Intel RH5.2
with R0.65.1:
plot(rnorm(20),xlab=expression(mu[Inf]))
You can guess what I was trying to do, as I used infty first and that
did not work. (I now know the correct formula.)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:57:00 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911160757.IAA11504@pubhealth.ku.dk>

The following matrix of normed likelihoods should give a smooth
surface but instead gives a series of spikes in both persp and contour
(the dim labels are the axes values). I know an algorithm cannot be
infallible but it would be nice to have some parameters to control the
smoothing. (It takes close to an hour to produce this matrix on a
Pentium II 300mh. It was after that that it crashed with the Inf in my
previous bug message...)
  Jim

"like" <-
structure(c(0.00176391675079333, 0.00146923361143409, 0.000118873942550920, 
2.60033028913311e-06, 1.36792992686478e-07, 1.8246691363054e-08, 
3.70167824680542e-09, 9.3435105158372e-10, 2.65488573122080e-10, 
8.02477512258327e-11, 2.49374837366522e-11, 7.79989625462184e-12, 
2.42313836128e-12, 7.41635672535047e-13, 2.22582213352616e-13, 
6.53529934129183e-14, 1.87592482515789e-14, 5.26673348630621e-15, 
1.44811282825086e-15, 3.90678315206886e-16, 1.03661464711976e-16, 
0.000357163904115257, 0.00646880985207886, 0.00663283207618763, 
0.0006059775621534, 1.21364454274087e-05, 1.80805906201527e-07, 
4.32774824739439e-08, 7.10745665416504e-09, 1.49838488962873e-09, 
3.63085812144783e-10, 9.50968657445326e-11, 2.5947561761174e-11, 
7.20856405305296e-12, 2.00980008827208e-12, 5.57310934761386e-13, 
1.52876329921416e-13, 4.13626490878394e-14, 1.10248761462956e-14, 
2.89491661046771e-15, 7.49510768794562e-16, 1.91634151378621e-16, 
3.07815510765707e-06, 0.000842181964429961, 0.0191090902323545, 
0.0242142517038679, 0.0025500207241197, 5.00789710794291e-05, 
2.23383985740275e-07, 2.32292942996531e-10, 1.46732078349253e-13, 
3.68779458410766e-16, 4.40310716451135e-10, 1.00615855772164e-10, 
2.42780131405657e-11, 6.03418238957602e-12, 1.52070970641775e-12, 
3.84738608832168e-13, 9.7118421208109e-14, 2.43727608742882e-14, 
6.0703200390455e-15, 1.49975407591609e-15, 3.67743639034840e-16, 
1.73726268058860e-08, 5.6077403337573e-06, 0.00165385022367381, 
0.0459164322410669, 0.0716297725686465, 0.00882904283150518, 
0.000179278272111563, 1.60177707812379e-06, 1.64900664911929e-07, 
1.78009575764431e-08, 2.65523682169734e-09, 4.76742738255559e-10, 
9.5704507548558e-11, 2.05674605214745e-11, 4.60601964796226e-12, 
1.05660190825881e-12, 2.45557822201462e-13, 5.74149524761638e-14, 
1.34489585256116e-14, 3.14879289081088e-15, 7.36195777222565e-16, 
4.89497216471075e-10, 3.81542617663398e-08, 9.09401919276533e-06, 
0.00275857826337638, 0.0909868934673163, 0.172758831413262, 0.0251503663306111, 
0.000549189356381134, 6.31352952358429e-06, 2.68961061449807e-07, 
2.3542509728124e-08, 2.97462447665947e-09, 4.64066856401819e-10, 
8.2401204449613e-11, 1.58824099088396e-11, 3.22710254273834e-12, 
6.78416160046776e-13, 1.45781121121843e-13, 3.17710965274086e-14, 
6.98813199754939e-15, 1.54686370477970e-15, 3.47818999816463e-11, 
1.24676135382412e-09, 7.47555356513558e-08, 1.33070547402354e-05, 
0.00398944889318836, 0.151170953683526, 0.343008298678816, 0.0591272231401392, 
0.00142894699562673, 1.33907834497016e-05, 3.93659041601088e-07, 
2.78925562712552e-08, 2.99820042629106e-09, 4.08906587960769e-10, 
6.46521841575397e-11, 1.12526828683000e-11, 2.08843221915706e-12, 
4.0497894062659e-13, 8.09694435253555e-14, 1.65467499310321e-14, 
3.4370548505308e-15, 2.36576283045907e-18, 9.6063453887084e-11, 
2.77556814791118e-09, 1.30655321075467e-07, 1.77439204853078e-05, 
0.00510559845838645, 0.214466920173550, 0.567639160458647, 0.115409841304071, 
0.00314993314454434, 2.62121724290019e-05, 5.22127208541793e-07, 
2.98270603284278e-08, 2.73794692447261e-09, 3.28356740333764e-10, 
4.65286665769768e-11, 7.36102946837208e-12, 1.25596058135938e-12, 
2.26061516010492e-13, 4.23051443667433e-14, 8.15300298593863e-15, 
3.99072715883438e-22, 2.83505501562795e-14, 2.29827820215666e-10, 
5.41529050920267e-09, 2.04082809865002e-07, 2.17246335811100e-05, 
0.00589627815433526, 0.264755146645107, 0.794255221042976, 0.188611633044143, 
0.0058892450264806, 4.81497713458769e-05, 5.23480571790264e-07, 
2.90107005693282e-08, 2.28108910907203e-09, 2.41888199776289e-10, 
3.09098051610835e-11, 4.47297169082052e-12, 7.05971252516243e-13, 
1.18646681896628e-13, 2.09007567575968e-14, 8.06100365206625e-25, 
2.18287769171281e-12, 3.07070436176694e-11, 4.77976958766606e-10, 
9.29640006576001e-09, 2.85897928086818e-07, 2.45914840639008e-05, 
0.00625816114089017, 0.289727465683434, 0.954240423750235, 0.260767136275309, 
0.00937565110886506, 8.04807869366302e-05, 4.13417517052559e-07, 
2.58678609575225e-08, 1.74581722289468e-09, 1.64522993158554e-10, 
1.90706199624332e-11, 2.53949873007858e-12, 3.72937444797563e-13, 
5.88524940943896e-14, 3.65274225587674e-33, 4.9389582496641e-13, 
5.65186883970257e-12, 6.65975799830656e-11, 8.6809873616086e-10, 
1.41133330282008e-08, 3.60982749125254e-07, 2.59299077617796e-05, 
0.00620782524427522, 0.286042286522196, 1, 0.308581298903377, 
0.012787802505642, 0.000119814119096249, 3.89699972443826e-07, 
4.28239635744095e-09, 1.23578822564739e-09, 1.03967816983612e-10, 
1.09920523132901e-11, 1.35456065143129e-12, 1.86115310490081e-13, 
1.56145767292107e-41, 1.33774563914851e-13, 1.31018253984329e-12, 
1.26291081169715e-11, 1.25596067133136e-10, 1.38451927615464e-09, 
1.90623084689258e-08, 4.13346862060707e-07, 2.57000620053891e-05, 
0.00584257176393386, 0.258897858120271, 0.928289223693575, 0.316472953831898, 
0.0150604098742057, 0.000157636305579563, 4.66131468431873e-07, 
1.02471388660295e-09, 8.14501436992245e-10, 6.14139871202027e-11, 
5.95236937841971e-12, 6.82398718856752e-13, 3.59696367652483e-45, 
4.17012864602969e-14, 3.61582027534016e-13, 2.99359617683961e-12, 
2.44700291837697e-11, 2.07141151264903e-10, 1.95144184735262e-09, 
2.3063051089858e-08, 4.32380395847584e-07, 2.42199262846122e-05, 
0.00528608113143016, 0.217875130836358, 0.774532881221181, 0.284901732794224, 
0.0154537854803841, 0.000183185641023271, 7.49559849539294e-07, 
7.11024159705725e-09, 5.03182614447118e-10, 3.41104188233311e-11, 
3.04474903274232e-12, 2.91565192035724e-49, 1.45537916525653e-14, 
1.14411789285803e-13, 8.40641488198468e-13, 5.92035604270047e-12, 
4.13543450691788e-11, 3.00704186586863e-10, 2.44790109904596e-09, 
2.51842772491441e-08, 4.16658016813605e-07, 2.2030173910067e-05, 
0.00464757376571756, 0.172524827842122, 0.588668692999348, 0.227992352386208, 
0.0139517782319954, 0.000188633229943610, 8.86576659202643e-07, 
8.13397456171407e-09, 2.93295902434683e-10, 1.79158142536354e-11, 
7.45440431708058e-47, 5.57324949893741e-15, 4.04199649080243e-14, 
2.69734042179215e-13, 1.68938567781956e-12, 1.01927093362378e-11, 
6.13516958431207e-11, 3.86968272588105e-10, 2.75370252448967e-09, 
2.50248238015754e-08, 3.7340350663148e-07, 1.97272833278079e-05, 
0.00400365893374786, 0.129796777376395, 0.412414570496338, 0.164160599019082, 
0.0111950329180545, 0.000173055912545285, 8.82222548801061e-07, 
4.80789035062023e-09, 1.62361855274262e-10, 4.83378466824916e-56, 
8.87835079570885e-18, 6.32443372364351e-17, 4.07759026116548e-16, 
2.41133621758854e-15, 1.32984475458358e-14, 6.98407810862943e-14, 
3.5876395093759e-13, 1.86752746531279e-12, 1.03460205332741e-11, 
6.5602704947161e-11, 5.36647863367684e-10, 7.15363285132962e-09, 
2.90880056585854e-07, 3.40712247087175e-05, 0.000889612332838851, 
0.00257111974780624, 0.000787883478550474, 3.37033079485353e-05, 
3.19292591662659e-07, 1.25686609615895e-09, 2.20162002662816e-172, 
1.18597942112121e-48, 6.527184937565e-15, 3.76449635250464e-14, 
1.98306897773082e-13, 9.70704477624762e-13, 4.51159875267329e-12, 
2.04683300082797e-11, 9.4028641613087e-11, 4.60396075448249e-10, 
2.59711739759405e-09, 1.92985480623786e-08, 2.52186810950586e-07, 
1.66549678505953e-05, 0.00284973810807315, 0.0647861189211352, 
0.164928028751616, 0.0648087223198986, 0.00527057924509832, 0.000105880347544938, 
6.77764435724914e-07, 2.28917610742849e-62, 4.77089470347806e-16, 
2.90684328179923e-15, 1.58418783461786e-14, 7.81422076667516e-14, 
3.54025380712877e-13, 1.49985566240899e-12, 6.0772181174916e-12, 
2.42262881670020e-11, 9.86595400000035e-11, 4.32695300245282e-10, 
2.21589694896341e-09, 1.52732771943930e-08, 1.95128248997183e-07, 
1.6227265119312e-05, 0.00236310192186473, 0.0433722389788253, 
0.0956364137992563, 0.0362445630341557, 0.00315366776340453, 
7.16975146683838e-05, 5.80651995967573e-63, 2.34504934024876e-16, 
1.36875718371988e-15, 7.1042764643222e-15, 3.31337397882331e-14, 
1.40655421593731e-13, 5.51935966365771e-13, 2.04006223917774e-12, 
7.26797589881895e-12, 2.56974962454299e-11, 9.37288857779561e-11, 
3.72485772585405e-10, 1.75589938246813e-09, 1.14398993072651e-08, 
1.48193436103776e-07, 1.63921456901643e-05, 0.00193532901795850, 
0.028105645771033, 0.052765310952557, 0.0189719774467987, 0.00174369601611880
), .Dim = c(21, 18), .Dimnames = list(c("1.4", "1.42", "1.44", 
"1.46", "1.48", "1.5", "1.52", "1.54", "1.56", "1.58", "1.6", 
"1.62", "1.64", "1.66", "1.68", "1.7", "1.72", "1.74", "1.76", 
"1.78", "1.8"), c("2.32", "2.345", "2.37", "2.395", "2.42", "2.445", 
"2.47", "2.495", "2.52", "2.545", "2.57", "2.595", "2.62", "2.645", 
"2.67", "2.695", "2.72", "2.745")))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 09:19:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 10:19:17 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 16 Nov 1999 08:51:23 +0100 (MET)"
References: <199911160751.IAA11396@pubhealth.ku.dk>
Message-ID: <x21z9qlroq.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> I was getting worried. 0.65 is the first version that I had not been
> able to crash. Well the following gives a seg fault on Intel RH5.2
> with R0.65.1:
> plot(rnorm(20),xlab=expression(mu[Inf]))
> You can guess what I was trying to do, as I used infty first and that
> did not work. (I now know the correct formula.)
>   Jim

Doesn't crash in my version of 0.90pre...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 10:21:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 11:21:31 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Peter Dalgaard BSA's message of "16 Nov 1999 10:19:17 +0100"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> jlindsey@alpha.luc.ac.be writes:
> 
> > I was getting worried. 0.65 is the first version that I had not been
> > able to crash. Well the following gives a seg fault on Intel RH5.2
> > with R0.65.1:
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> > You can guess what I was trying to do, as I used infty first and that
> > did not work. (I now know the correct formula.)
> >   Jim
> 
> Doesn't crash in my version of 0.90pre...

..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
session? If so, try running it under R -d gdb (just type "r" to run
the program) and tell us where it crashed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 11:03:08 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 12:03:08 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911161103.MAA15162@pubhealth.ku.dk>

> From: jlindsey@alpha.luc.ac.be
> Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> 
> The following matrix of normed likelihoods should give a smooth
> surface but instead gives a series of spikes in both persp and contour
> (the dim labels are the axes values). I know an algorithm cannot be
> infallible but it would be nice to have some parameters to control the
> smoothing. (It takes close to an hour to produce this matrix on a
> Pentium II 300mh. It was after that that it crashed with the Inf in my
> previous bug message...)


I am sorry, but I don't understand. contour does not do any
smoothing, but interpolates assuming smoothness.  The data
appears to me to be a series of spikes just off the diagonal, and not
what contour thinks of as a smooth surface.  It is common to 
interpolate the data from such a coarse grid before contouring.

persp just plots the data with visual linear interpolation.

> round(like*100,0)
     2.32 2.345 2.37 2.395 2.42 2.445 2.47 2.495 2.52 2.545 2.57 2.595 2.62
1.4     0     0    0     0    0     0    0     0    0     0    0     0    0
1.42    0     1    0     0    0     0    0     0    0     0    0     0    0
1.44    0     1    2     0    0     0    0     0    0     0    0     0    0
1.46    0     0    2     5    0     0    0     0    0     0    0     0    0
1.48    0     0    0     7    9     0    0     0    0     0    0     0    0
1.5     0     0    0     1   17    15    1     0    0     0    0     0    0
1.52    0     0    0     0    3    34   21     1    0     0    0     0    0
1.54    0     0    0     0    0     6   57    26    1     0    0     0    0
1.56    0     0    0     0    0     0   12    79   29     1    0     0    0
1.58    0     0    0     0    0     0    0    19   95    29    1     0    0
1.6     0     0    0     0    0     0    0     1   26   100   26     1    0
1.62    0     0    0     0    0     0    0     0    1    31   93    22    0
1.64    0     0    0     0    0     0    0     0    0     1   32    77   17
1.66    0     0    0     0    0     0    0     0    0     0    2    28   59
1.68    0     0    0     0    0     0    0     0    0     0    0     2   23
1.7     0     0    0     0    0     0    0     0    0     0    0     0    1
1.72    0     0    0     0    0     0    0     0    0     0    0     0    0
1.74    0     0    0     0    0     0    0     0    0     0    0     0    0
1.76    0     0    0     0    0     0    0     0    0     0    0     0    0
1.78    0     0    0     0    0     0    0     0    0     0    0     0    0
1.8     0     0    0     0    0     0    0     0    0     0    0     0    0
     2.645 2.67 2.695 2.72 2.745
1.4      0    0     0    0     0
1.42     0    0     0    0     0
1.44     0    0     0    0     0
1.46     0    0     0    0     0
1.48     0    0     0    0     0
1.5      0    0     0    0     0
1.52     0    0     0    0     0
1.54     0    0     0    0     0
1.56     0    0     0    0     0
1.58     0    0     0    0     0
1.6      0    0     0    0     0
1.62     0    0     0    0     0
1.64     0    0     0    0     0
1.66    13    0     0    0     0
1.68    41    0     0    0     0
1.7     16    0     6    0     0
1.72     1    0    16    4     0
1.74     0    0     6   10     3
1.76     0    0     1    4     5
1.78     0    0     0    0     2
1.8      0    0     0    0     0


If I do some interpolation

library(akima)
x <- as.numeric(rownames(like))
y <- as.numeric(colnames(like))
xx <- expand.grid(x=x, y=y)
like1 <- interp(xx$x, xx$y, like, seq(1.4, 1.8, len=50), seq(2.3, 2.8, len=50))
contour(like1$x, like1$y,like1$z)

I get a slightly smoother result, but still five peaks.  (Are the
values for col=2.67 correct?)

I guess you need to evaluate this on a finer grid near the diagonal,
and probably adjust the coordinate system to get enough resolution
on the anti-diagonal.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 13:15:59 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 14:15:59 +0100
Subject: spikes in contour and persp (PR#327)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 16 Nov 1999 12:03:08 +0100 (MET)"
References: <199911161103.MAA15162@pubhealth.ku.dk>
Message-ID: <x21z9q37cg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > From: jlindsey@alpha.luc.ac.be
> > Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> > 
> > The following matrix of normed likelihoods should give a smooth
> > surface but instead gives a series of spikes in both persp and contour
> > (the dim labels are the axes values). I know an algorithm cannot be
> > infallible but it would be nice to have some parameters to control the
> > smoothing. (It takes close to an hour to produce this matrix on a
> > Pentium II 300mh. It was after that that it crashed with the Inf in my
> > previous bug message...)
> 
> 
> I am sorry, but I don't understand. contour does not do any
> smoothing, but interpolates assuming smoothness.  The data
> appears to me to be a series of spikes just off the diagonal, and not
> what contour thinks of as a smooth surface.  It is common to 
> interpolate the data from such a coarse grid before contouring.
> 
> persp just plots the data with visual linear interpolation.
> 

To elaborate a little: The contouring is of course algorithm
dependent.

Let's look at a section of the data:

    1   17    15    1     0    0  
    0    3    34   21     1    0  
    0    0     6   57    26    1  
    0    0     0   12    79   29  

One contouring method works by linear interpolation on triangles, so when
creating the line for, say z=25, it will draw four lines *around* 34,
then one connecting the 21-57 line, the 6-57, the 12-57 and the 12-79
and on the other end 21-26 (diag) 26-1 (vertical) 26-1 (horizontal) and 1-29.
This gives two disjoint contours and an apparent peak at 34. The
algorithm in R is pretty similar to this as far as I recall.

Alternatively one could have bilinear interpolation which would fit a
curve with a saddlepoint to the square

34 21
 6 57

and draw one connected contour. However, bilinear interpolation is a
bit of a pain, because the contours are not lines, but pieces of a
hyperbola, which is not nearly as easy to draw. And if the contour
level is close enough to 34, you'll get the peak effect anyway.

In any case, this is not a bug, it's an algorithm with shortcomings.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 13:51:25 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 14:51:25 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>> jlindsey@alpha.luc.ac.be writes:
>> 
>> > I was getting worried. 0.65 is the first version that I had not been
>> > able to crash. Well the following gives a seg fault on Intel RH5.2
>> > with R0.65.1:
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> > You can guess what I was trying to do, as I used infty first and that
>> > did not work. (I now know the correct formula.)
>> >   Jim
>> 
>> Doesn't crash in my version of 0.90pre...

> ..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
> session? If so, try running it under R -d gdb (just type "r" to run
> the program) and tell us where it crashed.

You rang?

> plot(rnorm(20),xlab=expression(mu[Inf]))

Program received signal SIGSEGV, Segmentation fault.
0x4019a3ce in   ()
(gdb) bt
#0  0x4019a3ce in   ()
#1  0x4019798e in   ()
#2  0x4019100e in   ()
#3  0x4018d81c in vfprintf ()
#4  0x401980b3 in vsprintf ()
#5  0x40193351 in sprintf ()
#6  0x80cc359 in asChar (x=0x20202020)
    at /home/Hornik/src/apps/R/r-devel/R/src/main/util.c:200
#7  0x20202020 in ?? ()

Helpful?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sunadmin@statistik.uni-dortmund.de  Tue Nov 16 14:21:35 1999
From: sunadmin@statistik.uni-dortmund.de (sunadmin@statistik.uni-dortmund.de)
Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161421.PAA18504@pubhealth.ku.dk>

Full_Name: Thomas Langhans
Version: 0.65
OS: Solaris 7
Submission from: (NULL) (129.217.131.31)


I tried to install the package "leap" on our Sun Enterprise 400 running Solaris
7,
but it fails: cause the g77 doesn't compiles the fortran-sources properly, I 
translated them with f2c to c-source.
Running R INSTALL produces the following message:
Installing package `leaps' ...
 libs
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
leapshdr.o
ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
leapshdr.o -lF77 -lI77
 R
 help
 >>> Building/Updating help pages for package `leaps'
     Formats: text html latex example 
 DONE (leaps)
DONE (INSTALL)

So anything seems to be fine. But any time I load the library, R raises an
error:

> library(leaps)
Error in dyn.load(file) : unable to load shared library
"/sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so":
  ld.so.1: /sw/sun4_55/R-0.65.0/lib/R/bin/R.binary: fatal: relocation error:
file /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so: symbol sig_die:
referenced symbol not found

The same error do I get when I install the package "ppr". Other packages work
fine.

I hope somebody can help me, cause these librarys are very important for a
running project
at our departement.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:15:57 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 16 Nov 1999 16:15:57 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161515.QAA19438@pubhealth.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:18:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 16:18:26 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Kurt Hornik's message of "Tue, 16 Nov 1999 14:51:25 +0100 (CET)"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk> <x27lji3ff8.fsf@blueberry.kubism.ku.dk> <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
Message-ID: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 16:21:19 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 17:21:19 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161621.RAA20059@pubhealth.ku.dk>


> From: sunadmin@statistik.uni-dortmund.de
> Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: Installation of package fails (PR#328)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Thomas Langhans
> Version: 0.65
> OS: Solaris 7
> Submission from: (NULL) (129.217.131.31)
> 
> 
> I tried to install the package "leap" on our Sun Enterprise 400 running 
Solaris
> 7,
> but it fails: cause the g77 doesn't compiles the fortran-sources properly,

What is the error message?  They work for me.

>  I translated them with f2c to c-source.
> Running R INSTALL produces the following message:
> Installing package `leaps' ...
>  libs
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
> leapshdr.o
> ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
> leapshdr.o -lF77 -lI77

Are those the libraries for g77? They look like those for f77 to me.
Do you have the current version (2.0) of leaps?  Does by any chance 
leaps/src/Makefile exist?  If so try deleting it.

AFAIK g77 on Solaris should have -lg2c -lm in FLIBS: that is what 
my installation (gcc-2.95 on Solaris 2.6) gives. If you use f2c, you
need -lf2c -lm.

> The same error do I get when I install the package "ppr". Other packages work
> fine.

Um. That is obselete, and its code is in package modreg, which must
have been installed at the original build. So that suggests your setup
is OK, but that a Makefile is wrong.


If you really get stuck I can let you have a pre-compiled version for leaps.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:44 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 16 Nov 1999 18:02:44 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161702.SAA20336@pubhealth.ku.dk>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 18:02:47 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
 <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
 <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.36407.473934.711315@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 21:39:19 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 10:39:19 +1300
Subject: (G)UI for R and in R
In-Reply-To: <6r4sen9zrx.fsf@franz.stat.wisc.edu>; from Douglas Bates on Mon, Nov 15, 1999 at 04:05:22PM -0600
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu>
Message-ID: <19991117103919.C13694@stat1.stat.auckland.ac.nz>

On Mon, Nov 15, 1999 at 04:05:22PM -0600, Douglas Bates wrote:
> First, let me say that I come from the command-line-oriented world and
> most of the time I find that graphical user interfaces just get in the
> way.  Like many people who use implementations of the S language
> (i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
> preferred environment for running and editing S code is emacs with the
> ESS package.
> 
> My responses on a GUI for writing scripts are from this perspective
> but I do recognize that many people find a GUI much more comfortable
> than trying to remember lots of archane function names and, in the
> case of emacs, keystrokes.
> 

People who are interested in the GUI side of things might want to look at
http://stat.auckland.ac.nz/~lyndon/xmldef.html, which I did a couple of
months ago.  This is aimed at helping people construct function calls.  I
would also like to come up with an interface for something like wizards,
which would take beginners through the process of something like reading
in a dataset, and performing some analysis on it.  However, I am *not* a
stats person, so I would need some help with this.

The general idea is that if we specify GUI interfaces using an XML file
format, then implementing the interface on a particular platform is
fairly simple.

> Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:
> 
> > 2) for help with writing R scripts
> >    Does R help me with a graphical introspection tool?  I guess this
> > is what the object explorer is meant for.  Can I bring up a list of
> > objects and kinda click my way to the attributes of the object?  its
> > data?  (Not unusual scenario: And why does apply not work this time?
> > Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> > a function and send it to an editor?  Find out where it came from?
> 
> (BTW, I think you mean "graphical inspection tool".)  Although not a
> substitute for graphical inspection, I find Martin Maechler's "str"
> function to be invaluable when I am trying to remember the structure
> of various objects, including (and perhaps especially) those for which
> I designed the structure.
> 
> As far as editing a function definition, there are excellent
> facilities within ESS for that.  Object name completion within ESS is
> by itself worth the price of learning to use the mode.

Editing is one of my main todo items.  What features of ESS are really
important to people (object name completion is already something I want
to do)?

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 21:59:28 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 13:59:28 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 10:39:19 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz>
Message-ID: <87bt8um727.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Editing is one of my main todo items.  What features of ESS
    LD> are really important to people (object name completion is
    LD> already something I want to do)?

The ones important to me:

- Versioning of objects (i.e. placing text versions of R functions
  under version control)
- literate data analysis/programming
- ability to send R code to multiple processes

and most importantly: 
- Emacs key-bindings 
:-).

In general, I think the third is useful for a GUI, the first would be
nice, and the 4th would be crucial -- probably VI bindings, as
well... 

Now for some less cynical feedback: Looking at your XML code, it'd be
nice to have a means of bringing up an example, i.e. a filled out
screen with an additional text window which described what could be
done (you do/are having a help-feature-window-thingy, right)?

I.e. create a button on the window which would show examples for
read.table for a tab-sep'd file, CSV file, etc...  This would
literally be the R-ex files GUI'd up (gooey'd up... I like that one,
and so would my 2-year old :-), with a text window described what
each or a selected one would do.

Tres cool, and we can't really do that to the same extent with ESS
(well, we can dump code from the help buffer, but it's really run, not 
an example!). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 22:38:00 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 11:38:00 +1300
Subject: (G)UI for R and in R
In-Reply-To: <87bt8um727.fsf@alpha.cfas.washington.edu>; from A.J. Rossini on Tue, Nov 16, 1999 at 01:59:28PM -0800
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu>
Message-ID: <19991117113800.D13694@stat1.stat.auckland.ac.nz>

On Tue, Nov 16, 1999 at 01:59:28PM -0800, A.J. Rossini wrote:
> 
> >>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:
> 
>     LD> Editing is one of my main todo items.  What features of ESS
>     LD> are really important to people (object name completion is
>     LD> already something I want to do)?
> 
> The ones important to me:
> 
> - Versioning of objects (i.e. placing text versions of R functions
>   under version control)
> - literate data analysis/programming
> - ability to send R code to multiple processes
> 
> and most importantly: 
> - Emacs key-bindings 
> :-).
> 
> In general, I think the third is useful for a GUI, the first would be
> nice, and the 4th would be crucial -- probably VI bindings, as
> well... 
> 

The first is probably not possible.  I think that this is not too difficult
in Emacs because there is already code to do version control.  The third is
also difficult, simply because an editor is created for a particular R
process.  Copy and paste would work, though :-).

Could you explain the second item (literate data analysis/programming)?  I
have a vague understanding of literate programming (mostly in the context
of Web), but I don't know very much about it.

The fourth item might actually be possible in the next major version of
GTK+ (the widget set that Gnome uses).  However, that's a little way off.

Based on this, I'd say that it will be pretty difficult to replicate ESS's
functionality.  I guess some people will be sticking with Emacs (strange
people... ;-).

> Now for some less cynical feedback: Looking at your XML code, it'd be
> nice to have a means of bringing up an example, i.e. a filled out
> screen with an additional text window which described what could be
> done (you do/are having a help-feature-window-thingy, right)?
> 
> I.e. create a button on the window which would show examples for
> read.table for a tab-sep'd file, CSV file, etc...  This would
> literally be the R-ex files GUI'd up (gooey'd up... I like that one,
> and so would my 2-year old :-), with a text window described what
> each or a selected one would do.
> 
> Tres cool, and we can't really do that to the same extent with ESS
> (well, we can dump code from the help buffer, but it's really run, not 
> an example!). 

Very cool idea.  I'll have a think about how to do it (finding the time
to actually implement it is another matter).

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 22:54:54 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 14:54:54 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 11:38:00 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu> <19991117113800.D13694@stat1.stat.auckland.ac.nz>
Message-ID: <87u2mmkpxd.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Based on this, I'd say that it will be pretty difficult to
    LD> replicate ESS's functionality.  I guess some people will be
    LD> sticking with Emacs (strange people... ;-).

But you should be able to get object completions and the emacs/vi
keybindings :-).  Those are the basic needs...

Syntax highlighting would be nice, if easily possible.

    >> Now for some less cynical feedback: Looking at your XML code,
    >> it'd be nice to have a means of bringing up an example, i.e. a
    >> filled out screen with an additional text window which
    >> described what could be done (you do/are having a
    >> help-feature-window-thingy, right)?
    >>
    >> I.e. create a button on the window which would show examples
    >> for read.table for a tab-sep'd file, CSV file, etc...  This
    >> would literally be the R-ex files GUI'd up (gooey'd up... I
    >> like that one, and so would my 2-year old :-), with a text
    >> window described what each or a selected one would do.
    >>
    >> Tres cool, and we can't really do that to the same extent with
    >> ESS (well, we can dump code from the help buffer, but it's
    >> really run, not an example!).

    LD> Very cool idea.  I'll have a think about how to do it (finding
    LD> the time to actually implement it is another matter).

Actually, it isn't too hard.  Read up on what XSL (the XML
Stylesheets) can do.  Basically, 

XML interface ->  what you described, under one path (my-interface.xml)
	      ->  the wizards/examples, under another path 
		  (my-example-and-wizards.xml)

and then the 2 new *.xml files are used for corresponding stuff...

Best of all, all the information is there in the documentation!  (the
R-ex stuff, I mean).

The catch?  You need an XSLT engine written in C (or C++).  I think
there are a few in C++ (I know there are for Python and Java) but have 
no pointers.  

For a decent powerpoint example on XSLT which I found incredible lucid
(it's GPL'd -- weird notion, MS formatted information publically
available), see:
	http://www.xfront.org/xsl.html
and follow the links...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 20 18:26:33 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 20 Nov 1999 19:26:33 +0100 (MET)
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
Message-ID: <199911201826.TAA28900@pubhealth.ku.dk>

Dear Sirs,

I had the following (reproducible) problem:

g1 <- gl(3,4)
g2 <- gl(2,2,12)
y <- rnorm(12)
AA <- aggregate(y,list(g1,g2),mean)

print(AA,2)                       # I should've said 'digits=2' but ... 
Segmentation fault (core dumped)

# print(AA)  and  print(AA,digits=2) work as expected

Many thanks,  -Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 20 20:33:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Nov 1999 21:33:34 +0100
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
In-Reply-To: rnassar@duke.edu's message of "Sat, 20 Nov 1999 19:26:33 +0100 (MET)"
References: <199911201826.TAA28900@pubhealth.ku.dk>
Message-ID: <x2903shpi9.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> Dear Sirs,
> 
> I had the following (reproducible) problem:
> 
> g1 <- gl(3,4)
> g2 <- gl(2,2,12)
> y <- rnorm(12)
> AA <- aggregate(y,list(g1,g2),mean)
> 
> print(AA,2)                       # I should've said 'digits=2' but ... 
> Segmentation fault (core dumped)

Still there in 0.90.0 pre, looks easy to fix. Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911210615.HAA11567@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
--same as PR#257
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
--Is this a bug? Seems to be as documented and as the prototype

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 323 *
Subject:  { and } in examples get confused in help 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 14 Nov 1999 22:51:43 GMT
* PR# 324 *
Subject: R 0.65.1 config bug
From: "Dr K.M. Briggs" <kmb28@cus.cam.ac.uk>
Date: Mon, 15 Nov 1999 13:38:42 +0000 (GMT)
* PR# 325 *
Subject: xlim, ylim problem in barplot
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Mon, 15 Nov 1999 16:07:43 -0500 (EST)
* PR# 326 *
Subject: Inf in expression
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:51:13 +0100 (MET)
* PR# 327 *
Subject: spikes in contour and persp
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:56:57 +0100 (MET)
* PR# 328 *
Subject: Installation of package fails
From: sunadmin@statistik.uni-dortmund.de
Date: Tue, 16 Nov 1999 15:21:34 +0100 (MET)
* PR# 329 *
Subject: ´óÁ¿¹©Ó¦»ÆÓñÊ¯
From: "superabcd" <superabcd@21cn.com>
Date: Fri, 19 Nov 1999 18:51:24
* PR# 330 *
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 20 Nov 1999 13:22:21 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Nov 21 19:48:44 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 21 Nov 1999 20:48:44 +0100 (MET)
Subject: continuous key press results in core dump (PR#331)
Message-ID: <199911211948.UAA01574@pubhealth.ku.dk>

I  encountered this today (I admit it is a result of downright abuse)

Segmentation fault under abnormal conditions (as when stupid finger
accidentally leaned on key): 

at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
characters but NOT when enclosed in " ", and not if numbers. 

> 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
[1] 1.234568e+157
> zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
Segmentation fault (core dumped)

Again, many thanks and best wishes,

Rashid
--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 20:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Nov 1999 21:58:36 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: rnassar@duke.edu's message of "Sun, 21 Nov 1999 20:48:44 +0100 (MET)"
References: <199911211948.UAA01574@pubhealth.ku.dk>
Message-ID: <x2bt8nef43.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> I  encountered this today (I admit it is a result of downright abuse)
> 
> Segmentation fault under abnormal conditions (as when stupid finger
> accidentally leaned on key): 

...which is exactly why this kind of fault mustn't happen.

> at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
> characters but NOT when enclosed in " ", and not if numbers. 
> 
> > 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
> [1] 1.234568e+157
> > zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
> Segmentation fault (core dumped)

Yup, in dstruct.c we have

static int ddVal(SEXP name)
{
    char buf[128], *endp, *val;
    int rval;

    strcpy(buf, CHAR(name));

..which at the very least has to have a str*n*cpy in order not to
corrupt the stack if CHAR(name) is too large. Or perhaps better:
allocate buf explicitly instead of via a stack variable.

Not sure I'll be able to get it fixed tonight though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 23:24:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 00:24:19 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: Peter Dalgaard BSA's message of "21 Nov 1999 21:58:36 +0100"
References: <199911211948.UAA01574@pubhealth.ku.dk> <x2bt8nef43.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ln7r5syk.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Yup, in dstruct.c we have
> 
> static int ddVal(SEXP name)
> {
>     char buf[128], *endp, *val;
>     int rval;
> 
>     strcpy(buf, CHAR(name));
> 
> ..which at the very least has to have a str*n*cpy in order not to
> corrupt the stack if CHAR(name) is too large. Or perhaps better:
> allocate buf explicitly instead of via a stack variable.
> 
> Not sure I'll be able to get it fixed tonight though.

Squished. That buffer should never have been there in the first place...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:13:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:13:34 -0500
Subject: R-0.90.0 untar
Message-ID: <38396BAE.FB736CBD@bank-banque-canada.ca>

 I had a couple of problems getting R 0.90.0.  In case anyone has
similar problems, I though I would mention them.

1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
service does not seem to be available. Perhaps this is intended. I only
discovered it because I thought the file I got through Netscape might be
corrupted. (I don't understand why Netscape ftp://... should work but
anonymous ftp does not.)

2/ From Netscape (Linux) with
ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
or
http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
onto my file server works. However, if I try to untar on a workstation
in a directory mounted from the file server, it fails with lots of
messages about "Error while closing: Operation not permitted." I suspect
this may be a peculiar combination of user/group ownerships (perhaps not
all with the same ids on my workstation and server), but I have never
had the problem before (not even with R-devel from a few days ago).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 22 16:30:54 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Nov 1999 17:30:54 +0100 (MET)
Subject: R-0.90.0 untar
In-Reply-To: <38396BAE.FB736CBD@bank-banque-canada.ca>
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <14393.28606.63116.442782@gargle.gargle.HOWL>

>>>>> On Mon, 22 Nov 1999 11:13:34 -0500, Paul Gilbert <pgilbert@bank-banque-canada.ca> said:

    PaulG>  I had a couple of problems getting R 0.90.0.  In case anyone
    PaulG> has similar problems, I though I would mention them.

    PaulG> 1/ I can't use "ftp cvs.r-project.org" from either home or
    PaulG> work. The ftp service does not seem to be available. Perhaps
    PaulG> this is intended. I only discovered it because I thought the
    PaulG> file I got through Netscape might be corrupted. (I don't
    PaulG> understand why Netscape ftp://... should work but anonymous ftp
    PaulG> does not.)

anonymous FTP (through emacs' ange-ftp/efs) works fine for me.

    PaulG> 2/ From Netscape (Linux) with
    PaulG> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz or
    PaulG> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

    PaulG> I get a file which gunzips ok. Also tar -xf in /tmp or when
    PaulG> signed onto my file server works. However, if I try to untar on
    PaulG> a workstation in a directory mounted from the file server, it
    PaulG> fails with lots of messages about "Error while closing:
    PaulG> Operation not permitted." I suspect this may be a peculiar
    PaulG> combination of user/group ownerships (perhaps not all with the
    PaulG> same ids on my workstation and server), but I have never had the
    PaulG> problem before (not even with R-devel from a few days ago).

same big problem for me.
I thought it was because had other big problems today,
but the reason seems these funny permissions.

tar tfvz R-0.90.0.tgz
lists most files with permissions

-rw-rwSr--

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 16:47:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 17:47:41 +0100
Subject: R-0.90.0 untar
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:13:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <x27lja1niq.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

>  I had a couple of problems getting R 0.90.0.  In case anyone has
> similar problems, I though I would mention them.
> 
> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
> service does not seem to be available. Perhaps this is intended. I only
> discovered it because I thought the file I got through Netscape might be
> corrupted. (I don't understand why Netscape ftp://... should work but
> anonymous ftp does not.)

Works from here. The machine doesn't like you to login using 'guest'
but insists on 'anonymous', though. Also, tcp-wrappers may get you if
you login from a system with no valid DNS entry.
 
> 2/ From Netscape (Linux) with
> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> or
> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> 
> I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
> onto my file server works. However, if I try to untar on a workstation
> in a directory mounted from the file server, it fails with lots of
> messages about "Error while closing: Operation not permitted." I suspect
> this may be a peculiar combination of user/group ownerships (perhaps not
> all with the same ids on my workstation and server), but I have never
> had the problem before (not even with R-devel from a few days ago).

???? I see it too. There's an S bit set in the tar file for those files
that won't install. But what the %/&%/ is it doing there? I'll have a
look. Presumably, that's a permission change which requires setuid
root to set, and the file system is mounted w/o root permission.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:52:27 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:52:27 -0500
Subject: R 0.90.0 configure
Message-ID: <383974CA.F27D565D@bank-banque-canada.ca>

After working around previously mentioned untar problems I tried
./configure, which failed immediately because of improper permissions on
config.site. When I changed the permissions on config.site it failed
with:

./configure:  ./config.site:   Input/output error.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:11:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:11:00 +0100
Subject: R 0.90.0 configure
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:52:27 -0500"
References: <383974CA.F27D565D@bank-banque-canada.ca>
Message-ID: <x24see1mfv.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> After working around previously mentioned untar problems I tried
> ./configure, which failed immediately because of improper permissions on
> config.site. When I changed the permissions on config.site it failed
> with:
> 
> ./configure:  ./config.site:   Input/output error.

I've put up new versions without the offending setgid bit. Please
retry. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 22 17:18:47 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 22 Nov 1999 12:18:47 -0500
Subject: R-0.90.0 untar
In-Reply-To: Your message of "Mon, 22 Nov 1999 17:30:54 +0100."
 <14393.28606.63116.442782@gargle.gargle.HOWL>
Message-ID: <199911221718.MAA19296@infiniti.ece.cmu.edu>


Martin Maechler <maechler@stat.math.ethz.ch> writes:

Martin> tar tfvz R-0.90.0.tgz
Martin> lists most files with permissions
Martin> 
Martin> -rw-rwSr--

One reason you may get these warnings is when you try this in AFS
land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
the set-gid bit and it wouldn't make much sense anyway for AFS.

So I'm not surprised that some people see a different behavior between
local untaring and untaring on a mounted disk.

Hmm, the odd thing may be that I usually see the set-gid bit only for
directories (where it's "standard" to have them for a Linux box).

	-tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:34:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:34:53 +0100
Subject: R-0.90.0 untar
In-Reply-To: Thomas Vogels's message of "Mon, 22 Nov 1999 12:18:47 -0500"
References: <199911221718.MAA19296@infiniti.ece.cmu.edu>
Message-ID: <x21z9i1lc2.fsf@blueberry.kubism.ku.dk>

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> Martin> tar tfvz R-0.90.0.tgz
> Martin> lists most files with permissions
> Martin> 
> Martin> -rw-rwSr--
> 
> One reason you may get these warnings is when you try this in AFS
> land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
> the set-gid bit and it wouldn't make much sense anyway for AFS.
> 
> So I'm not surprised that some people see a different behavior between
> local untaring and untaring on a mounted disk.
> 
> Hmm, the odd thing may be that I usually see the set-gid bit only for
> directories (where it's "standard" to have them for a Linux box).

Probably when we setgid our development directories the files in CVS
got setgid as well. (chmod -R will do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:37:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:37:34 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk>
Message-ID: <38397F5E.EF7C01AE@bank-banque-canada.ca>

>> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The
ftp
>> service does not seem to be available. Perhaps this is intended. I
only
>> discovered it because I thought the file I got through Netscape might
be
>> corrupted. (I don't understand why Netscape ftp://... should work but

>> anonymous ftp does not.)

>Works from here. The machine doesn't like you to login using 'guest'
>but insists on 'anonymous', though. Also, tcp-wrappers may get you if
>you login from a system with no valid DNS entry.

I'm working behind a firewall in both cases, at home using IPmasq.
IPmasq should give a valid IP address, but very possibly there is no DNS
entry for my home IP address. The IP masq address will not be the same
as my workstation address. From work, the firewall will change the IP
address of my workstation and replace it with one that should resolve ok
by DNS. In any case, I've never had serious trouble with ftp from either
home or work.

At home my system just waits to timeout, but at work I can break out and
I get the message "Service not available, remote server has closed the
connection." Are you sure you don't have some special priveldges coming
from an "r-project.org" domain? Certainly ftp could be set up for that.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:44:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:44:25 -0500
Subject: R 0.90.0 configure
References: <383974CA.F27D565D@bank-banque-canada.ca> <x24see1mfv.fsf@blueberry.kubism.ku.dk>
Message-ID: <383980F9.47F7651A@bank-banque-canada.ca>

>I've put up new versions without the offending setgid bit. Please
retry.

That looks better. Untar is ok and configure seems to be working. It
will be a few minutes before I compile.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:48:08 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:48:08 +0100
Subject: ftp cvs.r-project.org
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 12:37:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca>
Message-ID: <x2u2mezacn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Wouldn't think so, but I can recheck from home (which is masqueraded
via an ISP, like your setup). Still wouldn't explain your differences
from Netscape ftp://.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 22 17:54:09 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 Nov 1999 17:54:09 +0000 (GMT)
Subject: ftp cvs.r-project.org
Message-ID: <199911221754.RAA11594@toucan.stats.ox.ac.uk>

> Date: Mon, 22 Nov 1999 12:37:34 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Well, I am not coming from one, and it works for me. Indeed, as I am
behind a compulsory proxy, it is not me that the Wisconsin machine sees
but a UK public proxy machine.  Connections to Wisconsin from here are
extremely slow today, and I have had lots of problems with timeouts to
that machine on other days. It might be worth trying on another day.

Using http with wget is probably a quicker route, as http is a more
flexible protocol.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 20:06:29 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 15:06:29 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3839A244.A4BCF69E@bank-banque-canada.ca>

PD>Wouldn't think so, but I can recheck from home (which is masqueraded
PD>via an ISP, like your setup). Still wouldn't explain your differences

PD>from Netscape ftp://.
Please let me know what you find from home. I just re-tried Netscape
ftp:// and  it would not work either, which makes more sense. I must
have been trying too many things at the same time this morning. Netscape
http works fine. Wisconsin certainly was not  slow for me this morning
(R downloaded in less than a minute) but it seems to be having some
trouble now.

BDR>Well, I am not coming from one, and it works for me. Indeed, as I am

BDR>behind a compulsory proxy...
This is similar to what I'm doing from work, but only http and not ftp
work for me. I'll try to get our security guru to see if he can tell
what's wrong. I usually do use http, for the reasons you mention, but I
was trying to narrow down the source of other problems I was having this
morning when I ran into the ftp difficulty.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:14:01 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:14:01 +0100 (MET)
Subject: compile error for mkString on alpha (PR#332)
Message-ID: <199911231414.PAA25164@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


I had to apply the following patch to be able to compile on 
an alpha with DU 4.0E:
###############################################
--- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
+++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
@@ -56,7 +56,8 @@
 SEXP           mkFloat(char *);
 SEXP           mkInteger(char *);
 SEXP           mkNA(void);
-SEXP           mkString(const char *);
+typedef const char cchar;
+SEXP           mkString(cchar *);
 SEXP           mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1363,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(cchar *s)
 {
     SEXP t;
 
################################################
Without the patch I got:

cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^
cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
referenced type of the pointer value "SourceLine" is "unsigned char", which is
not compatible 
with "const signed char". (ptrmismatch)
                    STRING(source)[lines++]  = mkChar(SourceLine);
------------------------------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
1 has a different type than specified in an earlier declaration of this
function. (mism
atparam)
SEXP mkString(const char *s)
-----^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
of "mkString" is not compatible with the type of a previous declaration of
"mkString" at
 line number 59 in file ../../../R/src/main/gram.y. (notcompat)
SEXP mkString(const char *s)
-----^

Then I looked at the preprocessed sources:
cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -E gram.c > gram.E

grep -n mkString gram.E 
8915:SEXP mkString(const char*);
9564:SEXP               mkString(const char *);
11995:SEXP mkString( char *s)
12179:    protect(yylval = mkString(yytext));

I don't know why the third occurrence of "mkString(const char*);" 
(line 11995 of preproccessor output) has the "const" removed, it is present in
the 
source! But the trick with typedefing "const char" to "cconst" in the patch
above works. 


BTW, there are many warnings about mixing "char" and "unsigned char", 
not only in gram.c!

Albrecht



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:23:39 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:23:39 +0100 (MET)
Subject: cpp problem on alpha (PR#333)
Message-ID: <199911231423.PAA25427@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


There is one wrong indented preprocessor directive in src/main/gram.y


cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^

the patch is:
#############################
--- gram.y.orig       Thu Oct  7 19:10:12 1999
+++ gram.y      Tue Nov 23 15:19:31 1999
@@ -1623,9 +1624,9 @@
                SourcePtr = FunctionSource + 8;
            }
            FunctionStart[FunctionLevel] = SourcePtr - 8;
-           #if 0
+#           if 0
            printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-           #endif
+#           endif
        }
        return kw;
     }
#############################

without the patch I got lots of debugging output with parse()

Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 23 15:26:50 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Nov 1999 10:26:50 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <383AB23A.D6B389CE@bank-banque-canada.ca>

I just looked at the "ftp cvs.r-project.org" problem with one of our security
people and it appears that cvs.r-project.org is doing an "ident" back to the
host trying to come in. He says it is the first time he has every seen ftp
request an ident, and that we are not likely going to turn on responding to
ident since it is a possible security hole.

My IPmasq machine at home also does not return ident requests (tcp port 113), so
that is the reason it doesn't work either.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:29:59 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:29:59 +0100 (MET)
Subject: [R] problems with postscript device (PR#334)
Message-ID: <199911231529.QAA25929@pubhealth.ku.dk>

> From:          "Alvaro A. Novo" <novo@uiuc.edu>

Alvaro A. Novo wrote:
> 
> I would suggest that you use instead:
> 
>  plot(1:10,1:10,pch=1:5, cex=0.4)
> 			 ^^^^^^^
> 
> cex = 1 being the default.

You have to look at the postscript file, that is generated by the 
commands I gave in my mail!
The problem is that, even when using cex=0.4, the symbols have a 
different size! Also, symbol number 1 (the circle) is *not* effected 
by the cex-option (maybe because it is too small to be made any 
smaller).
This all concerns only the postscript device.

The only solution I see is not to use the circle-symbol for the
postscript device

Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:31:38 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:31:38 +0100 (MET)
Subject: (Fwd) [R] problems with postscript device (PR#335)
Message-ID: <199911231531.QAA25960@pubhealth.ku.dk>

Hi,

I first sent this mail only to the help list.
But it seems to be a bug worth of fixing.

Wolfgang Koller

------- Forwarded Message Follows -------
From:          "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Organization:  University of Economics, Vienna
To:            r-help@stat.math.ethz.ch
Date:          Tue, 23 Nov 1999 15:14:23 CET (+0100)
Subject:       [R] problems with postscript device

Hi!

The postscript device in 0.90 does not produce symbols (pch=) as it 
should. E.g.:


postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
plot(1:10,1:10,pch=1:5)
legend(1,9,letters[1:5],pch=1:5)
dev.off()

The result looks quite different compared to the X-windows version. 
The symbol 1 (pch=1) is much to small, while the other symbols 
seem to big.

Is it a bug? How can I work it around?


Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 15:48:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 16:48:04 +0100 (MET)
Subject: [R] problems with postscript device (PR#336)
Message-ID: <199911231548.QAA26178@pubhealth.ku.dk>

>>>>> "WoKo" == Wolfgang Koller <koller2@fgr.wu-wien.ac.at> writes:

    WoKo> Hi!  The postscript device in 0.90 does not produce symbols
    WoKo> (pch=) as it should. E.g.:


    WoKo> postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
    WoKo> plot(1:10,1:10,pch=1:5)
    WoKo> legend(1,9,letters[1:5],pch=1:5)
    WoKo> dev.off()

    WoKo> The result looks quite different compared to the X-windows
    WoKo> version.  The symbol 1 (pch=1) is much to small, while the other
    WoKo> symbols seem to big.

    WoKo> Is it a bug?
yes, definitely.
there's a second (less severe) bug, too :

The second symbol (triangle)
is \Delta /\  on x11 (and postscript in R <= 0.65)
          --    __
but is \Lambda  \/  for postscript in R 0.90.0..

    WoKo> How can I work it around?

as you said: by not using  pch=1.... :-)
a patch will probably appear "soon"...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 16:42:28 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 17:42:28 +0100 (MET)
Subject: as.name() is not idempotent (PR#337)
Message-ID: <199911231642.RAA26657@pubhealth.ku.dk>


 as.name(as.name("ss"))

gives an error in R (0.90 and earlier)
but should of course give the same as simply

 as.name("ss") 

This reminds me of similar bug/problem... which I don't recall.

Yes, I should build tests like these into  "make test-Specific" ..
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 23
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Tue Nov 23 16:43:17 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Tue, 23 Nov 1999 17:43:17 +0100 (MET)
Subject: rbind problem (PR#338)
Message-ID: <199911231643.RAA26680@pubhealth.ku.dk>


In the new version 0.90.0, rbind won't take a vector and a matrix from me,
but works OK if I coerce the vector to a matrix.  The following was run on
a new session (i.e., no prior work), and has been duplicated on 2
machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
6.0.

Either case works fine in version 0.65.1.




> t3 <- c(.5, .5)  
> t4 <- matrix(rnorm(8), 4, 2)  
> t3 
[1] 0.5 0.5 
> t4
     [,1]       [,2] 
[1,]  1.0701582 -0.40888504 
[2,] -0.2961581 -1.73051884 
[3,]  0.6191254  0.05958328 
[4,] -1.3844937  0.81863361 
> dim(t3) <- c(1,2)            (make vector a matrix)
> rbind(t3, t4) 
           [,1] [,2] 
[1,]  0.5000000  0.50000000    (so OK when vector coerced)
[2,]  1.0701582 -0.40888504
[3,] -0.2961581 -1.73051884 
[4,]  0.6191254  0.05958328 
[5,] -1.3844937  0.81863361 
> 
> t3 <- c(.5, .5)              (reassign t3 as a vector)
> dim(t3) 
NULL 
> 
> rbind(t3, t4) 

Process R segmentation violation (core dumped) at Tue Nov 23 11:28:05 1999

--------------------------------------------------------------------------

Am I missing something?  Has anyone else come across this problem?  Or is
this a new feature?  I don't see anything in the documentation; indeed,
it says (in the help for cbind and rbind):

When the arguments consist of a mix of matrices and vectors the number of
columns (rosw) of the result is determined by the number of columns (rows)
of the matrix arguments. Any vectors have their values recycled or
subsetted to achieve this length. 

Thanks,

Matt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 17:41:58 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 09:41:58 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911230924150.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 mcw@ln.nimh.nih.gov wrote:

> 
> In the new version 0.90.0, rbind won't take a vector and a matrix from me,
> but works OK if I coerce the vector to a matrix.  The following was run on
> a new session (i.e., no prior work), and has been duplicated on 2
> machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
> 6.0.

Ok, this is an interesting problem in rbind when there are no names and a 
matrix and a vector and deparse_level=1

The reason we segfault is basically
	(gdb) print nrows(R_NilValue)
	$59 = 1076101128
which seems like a bad idea

At lines 1328ff we have a bug where we iterate over the number of rows of
"u", forgetting that after line 1315 u points to the (nonexistent)
dimnames rather than to the matrix.

I'm testing a fix.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:12:24 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:12:24 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231008180.18031-100000@wompom.biostat.washington.edu>


Ok, here's a patch:

	-thomas


*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 09:40:25 1999
***************
*** 1299,1305 ****
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
--- 1299,1305 ----
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
***************
*** 1312,1323 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(u);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(u) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(u)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {
--- 1312,1323 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(v);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(v) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(v)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:14:23 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 23 Nov 1999 19:14:23 +0100 (MET)
Subject: cbind problem (PR#339)
Message-ID: <199911231814.TAA27174@pubhealth.ku.dk>


Probably related to the rbind problem:

> mm<-matrix(0,2,2)
> nn<-c(1,2)
> cbind(mm,nn)
       nn  
[1,] 0  0 1
[2,] 0  0 2
> dimnames(cbind(mm,nn))
[[1]]
NULL

[[2]]
[1] ""   "nn" ""  

The column names are wrong (though at least no segfault this time)


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Nov 23 18:31:33 1999
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Tue, 23 Nov 1999 19:31:33 +0100 (MET)
Subject: "outer" argument in mtext (PR#340)
Message-ID: <199911231831.TAA27225@pubhealth.ku.dk>

mtext(..., outer = TRUE) does not seem to center the text in the outer
margins as it did previously.  Reproduce with

 example(plot.profile.nls, package = "nls")

On versions of the development sources before November 17 this
produced main and subtitles that were centered horizontally on the
page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
is centered over the figure in the upper left the the subtitle
(from mtext("..", side = 1, outer = TRUE)) is centered under the
figure on the lower right.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:splines, package:nls, Autoloads, package:base

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:39:38 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:39:38 -0800 (PST)
Subject: cbind problem (PR#339)
In-Reply-To: <199911231814.TAA27174@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231038330.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 thomas@biostat.washington.edu wrote:

> 
> Probably related to the rbind problem:
> 
Yep.

Patch:

*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 10:16:47 1999
***************
*** 1087,1093 ****
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
--- 1087,1093 ----
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
***************
*** 1100,1112 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(u);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(u) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(u)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {
--- 1100,1112 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(v);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(v) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(v)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chong@stat.purdue.edu  Wed Nov 24 05:18:58 1999
From: chong@stat.purdue.edu (chong@stat.purdue.edu)
Date: Wed, 24 Nov 1999 06:18:58 +0100 (MET)
Subject: [R] problems with postscript device (PR#341)
Message-ID: <199911240518.GAA28976@pubhealth.ku.dk>


   From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
   Organization: University of Economics, Vienna
   Date: Tue, 23 Nov 1999 16:29:22 CET (+0100)
   MIME-Version: 1.0
   Content-type: text/plain; charset=US-ASCII
   Content-transfer-encoding: 7BIT
   CC: r-bugs@biostat.ku.dk, r-help@stat.math.ethz.ch
   References: <153DF9230E8@fgr.wu-wien.ac.at>
   X-mailer: Pegasus Mail for Windows (v2.53/R1)
   Sender: owner-r-help@stat.math.ethz.ch
   Precedence: bulk

   > From:          "Alvaro A. Novo" <novo@uiuc.edu>

   Alvaro A. Novo wrote:
   > 
   > I would suggest that you use instead:
   > 
   >  plot(1:10,1:10,pch=1:5, cex=0.4)
   > 			 ^^^^^^^
   > 
   > cex = 1 being the default.

   You have to look at the postscript file, that is generated by the 
   commands I gave in my mail!
   The problem is that, even when using cex=0.4, the symbols have a 
   different size! Also, symbol number 1 (the circle) is *not* effected 
   by the cex-option (maybe because it is too small to be made any 
   smaller).
   This all concerns only the postscript device.

   The only solution I see is not to use the circle-symbol for the
   postscript device

   Wolfgang Koller



   ----------------------------------------------------------
   Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
   Forschungsinstitut fuer Europafragen
   Wirtschaftsuniversitaet Wien
   Althanstrasse 39-45, 1090 Wien, Austria
   -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
   r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
   Send "info", "help", or "[un]subscribe"
   (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
   _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


I have encountered the same problem and reported about 5 months ago.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 07:19:16 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 08:19:16 +0100 (CET)
Subject: as.name() is not idempotent (PR#337)
In-Reply-To: <199911231642.RAA26657@pubhealth.ku.dk>
References: <199911231642.RAA26657@pubhealth.ku.dk>
Message-ID: <14395.37236.157663.144059@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>  as.name(as.name("ss"))

> gives an error in R (0.90 and earlier)
> but should of course give the same as simply

>  as.name("ss") 

> This reminds me of similar bug/problem... which I don't recall.

> Yes, I should build tests like these into  "make test-Specific" ..

But not before fixing it, hopefully :-)

>From a brief glance at the code in coerce.c:

SEXP coerceVector(SEXP v, SEXPTYPE type)
{
    SEXP ans = R_NilValue;      /* -Wall */
    if (TYPEOF(v) == type)
        return v;

    switch (TYPEOF(v)) {
#ifdef NOTYET
    case NILSXP:
        ans = coerceNull(v, type);
        break;
    case SYMSXP:
        ans = coerceSymbol(v, type);
        break;
#endif

So you simply need to write coerceSymbol() and move the #ifdef.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:17:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:17:30 +0100 (CET)
Subject: cpp problem on alpha (PR#333)
In-Reply-To: <199911231423.PAA25427@pubhealth.ku.dk>
References: <199911231423.PAA25427@pubhealth.ku.dk>
Message-ID: <14395.62330.716926.100631@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> There is one wrong indented preprocessor directive in src/main/gram.y


> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:19:19 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:19:19 +0100 (CET)
Subject: compile error for mkString on alpha (PR#332)
In-Reply-To: <199911231414.PAA25164@pubhealth.ku.dk>
References: <199911231414.PAA25164@pubhealth.ku.dk>
Message-ID: <14395.62439.277210.722216@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> I had to apply the following patch to be able to compile on 
> an alpha with DU 4.0E:
> ###############################################
> --- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
> +++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
> @@ -56,7 +56,8 @@
>  SEXP           mkFloat(char *);
>  SEXP           mkInteger(char *);
>  SEXP           mkNA(void);
> -SEXP           mkString(const char *);
> +typedef const char cchar;
> +SEXP           mkString(cchar *);
>  SEXP           mkTrue(void);
 
>  /* Internal lexer / parser state variables */
> @@ -1362,7 +1363,7 @@
>  }
 
 
> -SEXP mkString(const char *s)
> +SEXP mkString(cchar *s)
>  {
>      SEXP t;
 
> ################################################
> Without the patch I got:

> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
> referenced type of the pointer value "SourceLine" is "unsigned char", which is
> not compatible 
> with "const signed char". (ptrmismatch)
>                     STRING(source)[lines++]  = mkChar(SourceLine);
> ------------------------------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
> 1 has a different type than specified in an earlier declaration of this
> function. (mism
> atparam)
> SEXP mkString(const char *s)
> -----^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
> of "mkString" is not compatible with the type of a previous declaration of
> "mkString" at
>  line number 59 in file ../../../R/src/main/gram.y. (notcompat)
> SEXP mkString(const char *s)
> -----^

> Then I looked at the preprocessed sources:
> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -E gram.c > gram.E

> grep -n mkString gram.E 
> 8915:SEXP mkString(const char*);
> 9564:SEXP               mkString(const char *);
> 11995:SEXP mkString( char *s)
> 12179:    protect(yylval = mkString(yytext));

> I don't know why the third occurrence of "mkString(const char*);" 
> (line 11995 of preproccessor output) has the "const" removed, it is present in
> the 
> source! But the trick with typedefing "const char" to "cconst" in the patch
> above works. 


> BTW, there are many warnings about mixing "char" and "unsigned char", 
> not only in gram.c!

> Albrecht

I am not sure that this is the right way of fixing it.  configure has a
macro called AC_C_CONST which checks whether the C compiler fully
supports the `const' keyword.  If not, `const' is defined empty.

Can you look at you Rconfig.h and see if anything is done about const
there?  Can you also look at config.log?

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Nov 24 14:26:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Wed, 24 Nov 1999 15:26:11 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911241426.PAA07010@pubhealth.ku.dk>

It seems to me the following should work (in fact, it comes from
someone's SPlus file). Instead, it reads the first 8 lines and then
spits out syntax errors. Using nlines=36 works. Using nmax does not.
Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
 1   3   5   no   1  
 2   1   0  yes   1  
 3   2   4   no   2
 4   1   0  yes   2  
 5   1   4   no   3 
 6   1   0  yes   3 
 7   1   5   no   4  
 8   0   1  yes   4  
 9   4   1   no   5  
10   1   0  yes   5   
11   4   5   no   6 
12   1   0  yes   6  
13   5   3   no   7  
14   1   0  yes   7  
15   4   4   no   8  
16   1   0  yes   8 
17   3   2   no   9  
18   1   0  yes   9  
19   8   1   no  10  
20   0   1  yes  10   
21   5   1   no  11   
22   1   0  yes  11  
23   8   1   no  12 
24   1   0  yes  12  
25   5   3   no  13 
26   1   0  yes  13  
27   4   1   no  14  
28   1   0  yes  14  
29   4   2   no  15  
30   1   0  yes  15  
31   7   1   no  16 
32   1   0  yes  16  
33   4   2   no  17  
34   0   1  yes  17  
35   5   3   no  18 
36   1   0  yes  18  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 24 19:34:16 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 24 Nov 1999 20:34:16 +0100 (MET)
Subject: rbind invisible return value (PR#343)
Message-ID: <199911241934.UAA09286@pubhealth.ku.dk>


An assignment in an argument sometimes makes rbind return invisibly

> rbind(diag(3),a<-1:3)
> print(rbind(diag(3),a<-1:3))
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1
[4,]    1    2    3

> version
         _                           
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    99.0                        
year     1999                        
month    November                    
day      23                          
language R 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 24 20:02:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Nov 1999 21:02:31 +0100
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: bates@stat.wisc.edu's message of "Tue, 23 Nov 1999 19:31:33 +0100 (MET)"
References: <199911231831.TAA27225@pubhealth.ku.dk>
Message-ID: <x2yabnmze0.fsf@blueberry.kubism.ku.dk>

bates@stat.wisc.edu writes:

> mtext(..., outer = TRUE) does not seem to center the text in the outer
> margins as it did previously.  Reproduce with
> 
>  example(plot.profile.nls, package = "nls")
> 
> On versions of the development sources before November 17 this
> produced main and subtitles that were centered horizontally on the
> page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
> is centered over the figure in the upper left the the subtitle
> (from mtext("..", side = 1, outer = TRUE)) is centered under the
> figure on the lower right.

It only does this if las=1, as got entered into the plot.profile.nls
example on November 16, by yourself... It's still a bug, but are you
sure you got that part tested?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 25 09:13:53 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 25 Nov 1999 10:13:53 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911250913.KAA13013@pubhealth.ku.dk>

>>>>> "Jim" == Jim Lindsey <jlindsey@alpha.luc.ac.be> writes:

    Jim> It seems to me the following should work (in fact, it comes from
    Jim> someone's SPlus file). Instead, it reads the first 8 lines and then
    Jim> spits out syntax errors. Using nlines=36 works. Using nmax does not.
    Jim> Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

Yes, a bug.
This is true with both R versions 0.65 and 0.90 ("R90.0" does *not* exist)

Btw, "nmax" *does* work --- however *not* according to documentation ---

## easier to test if you use a named file instead of stdin) :

> str(j1 <- scan(file="/u/maechler/R/jl-scan.dat",
+            list(i=0,r1=0,r2=0,lull="",day=""),nmax=5*36))
Read 36 lines
List of 5
 $ i   : num [1:36] 1 2 3 4 5 6 7 8 9 10 ...
 $ r1  : num [1:36] 3 1 2 1 1 1 1 0 4 1 ...
 $ r2  : num [1:36] 5 0 4 0 4 0 5 1 1 0 ...
 $ lull: chr [1:36] "no" "yes" "no" "yes" "no" "yes" "no" "yes" "no" "yes" ...
 $ day : chr [1:36] "1" "1" "2" "2" "3" "3" "4" "4" "5" "5" "6" "6" "7" "7" ...


    Jim> junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
    Jim> 1   3   5   no   1  
    Jim> 2   1   0  yes   1  
    Jim> 3   2   4   no   2
    Jim> 4   1   0  yes   2  
    Jim> 5   1   4   no   3 
    Jim> 6   1   0  yes   3 
    Jim> 7   1   5   no   4  
    Jim> 8   0   1  yes   4  
    Jim> 9   4   1   no   5  
    Jim> 10   1   0  yes   5   
    Jim> 11   4   5   no   6 
    Jim> 12   1   0  yes   6  
    Jim> 13   5   3   no   7  
    Jim> 14   1   0  yes   7  
    Jim> 15   4   4   no   8  
    Jim> 16   1   0  yes   8 
    Jim> 17   3   2   no   9  
    Jim> 18   1   0  yes   9  
    Jim> 19   8   1   no  10  
    Jim> 20   0   1  yes  10   
    Jim> 21   5   1   no  11   
    Jim> 22   1   0  yes  11  
    Jim> 23   8   1   no  12 
    Jim> 24   1   0  yes  12  
    Jim> 25   5   3   no  13 
    Jim> 26   1   0  yes  13  
    Jim> 27   4   1   no  14  
    Jim> 28   1   0  yes  14  
    Jim> 29   4   2   no  15  
    Jim> 30   1   0  yes  15  
    Jim> 31   7   1   no  16 
    Jim> 32   1   0  yes  16  
    Jim> 33   4   2   no  17  
    Jim> 34   0   1  yes  17  
    Jim> 35   5   3   no  18 
    Jim> 36   1   0  yes  18  


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:55:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:55:19 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: chong@stat.purdue.edu's message of "Wed, 24 Nov 1999 06:18:58 +0100 (MET)"
References: <199911240518.GAA28976@pubhealth.ku.dk>
Message-ID: <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>

chong@stat.purdue.edu writes:

> I have encountered the same problem and reported about 5 months ago.

Wasn't there in 0.65.1 ....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:59:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:59:27 +0100
Subject: rbind invisible return value (PR#343)
In-Reply-To: thomas@biostat.washington.edu's message of "Wed, 24 Nov 1999 20:34:16 +0100 (MET)"
References: <199911241934.UAA09286@pubhealth.ku.dk>
Message-ID: <x27lj6rg4w.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> An assignment in an argument sometimes makes rbind return invisibly
> 
> > rbind(diag(3),a<-1:3)
> > print(rbind(diag(3),a<-1:3))
>      [,1] [,2] [,3]
> [1,]    1    0    0
> [2,]    0    1    0
> [3,]    0    0    1
> [4,]    1    2    3

Ditto with cbind(). Not new, 0.65.1 does likewise.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 14:12:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 15:12:25 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: Peter Dalgaard BSA's message of "25 Nov 1999 11:55:19 +0100"
References: <199911240518.GAA28976@pubhealth.ku.dk> <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2yabmpsmu.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> chong@stat.purdue.edu writes:
> 
> > I have encountered the same problem and reported about 5 months ago.
> 
> Wasn't there in 0.65.1 ....

Here's a patch:

Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.9
diff -u -r1.9 devPS.c
--- devPS.c     1999/10/07 18:10:11     1.9
+++ devPS.c     1999/11/25 13:06:44
@@ -824,7 +824,7 @@
     if(pointsize < 6.0) pointsize = 6.0;
     if(pointsize > pd->maxpointsize) pointsize = pd->maxpointsize;
     dd->dp.ps = pointsize;
-    dd->dp.cra[0] = (6.0 / 12.0) * pointsize;
+    dd->dp.cra[0] = 0.9 * pointsize; 
     dd->dp.cra[1] = 1.2 * pointsize;
 
     /* Character Addressing Offsets */
Index: src/main/graphics.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/graphics.c,v
retrieving revision 1.57
diff -u -r1.57 graphics.c
--- graphics.c  1999/11/18 16:50:08     1.57
+++ graphics.c  1999/11/25 13:06:44
@@ -3555,7 +3555,7 @@
 #ifdef OLDSYMSIZE
 #define GSTR_0  GStrWidth("0", INCHES, dd)
 #else
-#define GSTR_0  xDevtoInch(dd->dp.cra[0] * 0.66, dd) * dd->gp.cex
+#define GSTR_0  dd->dp.cra[0] * 0.66 * dd->gp.ipr[0] * dd->gp.cex
 /* NOTE: This cex is already multiplied with cexbase */
 #endif /* Draw one of the R special symbols. */
 void GSymbol(double x, double y, int coords, int pch, DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Nov 25 16:54:04 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Nov 1999 17:54:04 +0100 (MET)
Subject: segfault in garbage collection (PR#344)
Message-ID: <199911251654.RAA20039@pubhealth.ku.dk>


The following statements yield a seg.fault:
R --vanilla --nsize 500K

x <- rep(letters,10000)
f <- function(x) {z<-paste("\"",x,"\"",sep=""); z}
y <- f(x)
Segmentation fault


If a turn gcinfo on, I get

Garbage collection [nr. 1]...
387529 cons cells free (75%)
3807 Kbytes of heap free (62%)
Garbage collection [nr. 2]...
273868 cons cells free (53%)
1015 Kbytes of heap free (17%)
Garbage collection [nr. 3]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 4]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)

...(always the same)

and finally (after a long time)

Garbage collection [nr. 508]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 509]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)

Segmentation fault

Debugging yields

Program received signal SIGSEGV, Segmentation fault.
0x807d249 in errorcall (call=0x4062ec04, 
    format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
    at /home/Leisch/src/r-release/R/src/main/errors.c:192
192     {


I reproduced this bug on a 2nd machine, even with the same number
of Garbage collections.

-aw

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 25
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 17:01:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 18:01:22 +0100
Subject: segfault in garbage collection (PR#344)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of "Thu, 25 Nov 1999 17:54:04 +0100 (MET)"
References: <199911251654.RAA20039@pubhealth.ku.dk>
Message-ID: <x2puwypkt9.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x807d249 in errorcall (call=0x4062ec04, 
>     format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
>     at /home/Leisch/src/r-release/R/src/main/errors.c:192
> 192     {
> 
> 
> I reproduced this bug on a 2nd machine, even with the same number
> of Garbage collections.

Oh, drats.... I fixed the same bug with cons cells just before the
release. Change the error() to errorcall(R_NilValue) to fix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Nov 25 18:52:24 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Nov 1999 12:52:24 -0600
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: Peter Dalgaard BSA's message of "24 Nov 1999 21:02:31 +0100"
References: <199911231831.TAA27225@pubhealth.ku.dk> <x2yabnmze0.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r903mmmjb.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> It only does this if las=1, as got entered into the plot.profile.nls
> example on November 16, by yourself... It's still a bug, but are you
> sure you got that part tested?

You're right.  I hadn't tested the version with las = 1.  I had
thought the change would be harmless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mhdelsemme@ulg.ac.be  Fri Nov 26 09:54:24 1999
From: mhdelsemme@ulg.ac.be (mhdelsemme@ulg.ac.be)
Date: Fri, 26 Nov 1999 10:54:24 +0100 (MET)
Subject: Bug in version 65.0 (PR#345)
Message-ID: <199911260954.KAA24881@pubhealth.ku.dk>

Full_Name: Marie-Hélène Delsemme
Version: 65.0
OS: 
Submission from: (NULL) (139.165.164.139)


My students found this error when I was teaching but it seems to be
reproductible

Starting using a R65.0 seesion, if you resize the program window (using the
small x of square at the upper right corner) the cursor is no longer available
and the intire system seems to be blocked.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 26 10:08:42 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Nov 1999 10:08:42 +0000 (GMT)
Subject: Bug in version 65.0 (PR#345)
In-Reply-To: <199911260954.KAA24881@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911261000410.20322-100000@auk.stats>

On Fri, 26 Nov 1999 mhdelsemme@ulg.ac.be wrote:

> Full_Name: Marie-Hélène Delsemme
> Version: 65.0
> OS: 

[How do you run R without an OS?]

> Submission from: (NULL) (139.165.164.139)
> 
> 
> My students found this error when I was teaching but it seems to be
> reproductible
> 
> Starting using a R65.0 seesion, if you resize the program window (using the
> small x of square at the upper right corner) the cursor is no longer available
> and the intire system seems to be blocked.

Um. Is that a Windows version (although the small x in the square closes
the window on Windows)?  If so 0.65.0 (there is no 65.0) was never released
except as a test version, and that never from the official repository. This
is a known bug in the GUI in that and 0.64.2 on Windows.

Please upgrade at least to 0.65.1 and preferably to 0.90.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Nov 26 21:07:09 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 16:07:09 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
Message-ID: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>

Hello,
I have been trying to debug a problem with R-0.90.0 (this bug was in
0.65.1, too). The following code results in seg faults.  It doesn't
seg-fault on Linux/intel.

> memory.profile()
> gc()

As long as I don't execute memory.profile(), there is no problem with
garbage collection.  So I think that memory.profile() screws up the
heap in some way.

When it seg-faults, it dies in the function compactPhase() in memory.c,

    while (vfrom < R_VTop) {
        s = BACKPOINTER(*vfrom);
        switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */

it segfaults becuase s becomes a pointer to 0x0, when the while loop is
almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
and R_VTop = 0x20001841198).

I tried to see what's going on in do_memoryprofile() in memory.c by
stepping with gdb, but I couldn't see what was going wrong (well, to be
honest, I didn't fully understand what was going on).

I thought someone may have some insights about the problem or strategy to
debug this problem.  I wanted to set some kind of watch point, so the 
gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
really good at gdb yet, so I'm wondering if someone can help.

Thanks,
Naoki

platform alpha-unknown-linux
arch     alpha              
os       linux              
system   alpha, linux       
status   Patched            
major    0                  
minor    90.0               
year     1999               
month    November           
day      22                 
language R                  


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 21:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Nov 1999 22:27:54 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Naoki Takebayashi's message of "Fri, 26 Nov 1999 16:07:09 -0500 (EST)"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>
Message-ID: <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>

Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:

> Hello,
> I have been trying to debug a problem with R-0.90.0 (this bug was in
> 0.65.1, too). The following code results in seg faults.  It doesn't
> seg-fault on Linux/intel.
> 
> > memory.profile()
> > gc()
> 
> As long as I don't execute memory.profile(), there is no problem with
> garbage collection.  So I think that memory.profile() screws up the
> heap in some way.
> 
> When it seg-faults, it dies in the function compactPhase() in memory.c,
> 
>     while (vfrom < R_VTop) {
>         s = BACKPOINTER(*vfrom);
>         switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */
> 
> it segfaults becuase s becomes a pointer to 0x0, when the while loop is
> almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
> and R_VTop = 0x20001841198).
> 
> I tried to see what's going on in do_memoryprofile() in memory.c by
> stepping with gdb, but I couldn't see what was going wrong (well, to be
> honest, I didn't fully understand what was going on).
> 
> I thought someone may have some insights about the problem or strategy to
> debug this problem.  I wanted to set some kind of watch point, so the 
> gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
> really good at gdb yet, so I'm wondering if someone can help.

The gdb command would be 'watch *0x20001840ef8' (it's important to use
the address as a number so that one gets a hardware watchpoint), but
are you sure that's the right address to watch? I'd try the address of
s itself ('p &s' to print it). Also, what happens if you turn
gctorture() on just before the call to memory.profile? Usually slows
things down horribly, but causes a crash much closer to the actual
damage.

Happy hunting...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 23:55:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 00:55:04 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Peter Dalgaard BSA's message of "26 Nov 1999 22:27:54 +0100"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu> <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:
> 
> > Hello,
> > I have been trying to debug a problem with R-0.90.0 (this bug was in
> > 0.65.1, too). The following code results in seg faults.  It doesn't
> > seg-fault on Linux/intel.
> > 
> > > memory.profile()
> > > gc()
...
> The gdb command would be 'watch *0x20001840ef8' (it's important to use
> the address as a number so that one gets a hardware watchpoint), but

Doh! Never mind gdb, sometimes you just need to look at the code:

    PROTECT(ans = allocVector(INTSXP, 21));
    PROTECT(nms = allocVector(STRSXP, 21));
    for (i = 0; i < 21; i++) {
        STRING(ans)[i] = 0;
        STRING(nms)[i] = R_BlankString;
    }

Try making that INTEGER(ans)[i] = 0 ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sat Nov 27 01:32:42 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 20:32:42 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.10.9911262020570.3852-100000@sunflower.bio.indiana.edu>

Thank you, Peter!
This fixed the problem. So 0.9.0 passes "make check" on Linux/alpha now!!

> Doh! Never mind gdb, sometimes you just need to look at the code:
> 
>     PROTECT(ans = allocVector(INTSXP, 21));
>     PROTECT(nms = allocVector(STRSXP, 21));
>     for (i = 0; i < 21; i++) {
>         STRING(ans)[i] = 0;
>         STRING(nms)[i] = R_BlankString;
>     }
> 
> Try making that INTEGER(ans)[i] = 0 ...


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 02:01:11 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 03:01:11 +0100 (MET)
Subject: .Rprofile results in corruption of .RData? (PR#346)
Message-ID: <199911270201.DAA01513@pubhealth.ku.dk>

It could be that the following may be due to something wrong that I managed
to do (I cannot think what...) but I submit this report in case it is something
that you want to know about (I have solved the problem by removing .Rprofile as
I describe below).

1.  After compiling/installing R 0.90 (an uneventful process), it
worked perfectly the first time, and it read .RData written by the
previous version, but later it would not read .RData (written by
current version).  I finally traced the problem to
  ~/.Rprofile  which somehow seemed to cause .RData to be corrupted when 
R writes it, causing R to give the following message and abort next time 
it is run:

Error: unresolved node during restore 
Fatal error: unable to restore saved data
 (remove .RData or increase memory)

2. Nothing in  .Rprofile  seemed suspicious.

3. I removed  .Rprofile, and the problem disappeared (of course, the  corrupted
.RData file still could not be read, but what R now saved as .RData 
it could read subsequently.)

4. I copied  Rprofile  from
  /usr/local/lib/R/library/base/R
to my home directory and renamed it  .Rprofile  without otherwise
modifying it.  The problem reappeared.

5. I removed ~/.Rprofile, and edited  Rprofile in /usr/local/.../R 
   (to remove significance stars and set emacs as the editor).  
   Now everything works perfectly again (as long as there is no
  .Rprofile in the home directory or in my working directory.

I apologize if this is some problem I caused during installation and is
not a problem with R, in which case please ignore this report.  I would be
more than glad to try out things if you think this might be something
suspicious that is happening that should be looked into.  The problem on
my computer is quite reproducible and does not appear to be related to the 
size or content of .RData. 

Thank you again for R!

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From steland@euv-frankfurt-o.de  Sat Nov 27 10:30:21 1999
From: steland@euv-frankfurt-o.de (steland@euv-frankfurt-o.de)
Date: Sat, 27 Nov 1999 11:30:21 +0100 (MET)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
Message-ID: <199911271030.LAA02408@pubhealth.ku.dk>

Full_Name: Ansgar Steland
Version: 0.90.0
OS: Linux 6.1 FreeBSD 3.2
Submission from: (NULL) (62.104.196.10)


Dear R Team,

Yesterday I downloaded R 0.90.0 and the current versions of some
packages (tseries, quadprog,...).
I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
I also re-build all packages required by tseries.


I checked out portfolio.optim (package: tseries).
It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
(More precisely, the example in the documentation of portfolio.optim crashed.)

Simply reinstalling R 0.65.0 fixed the problem! Now the example works.

I suppose there is a problem with the code of the solve.QP function 
of the package quadprog.
Perhaps it uses internal R functions whose argument lists have changed or sthg.
like this, I don't know.

Below you find some output.


Output for R 0.90.0 (OS: SuSe Linux 6.1):
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.90.0  (November 22, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

           This is a preliminary time series package for R
           See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)
Segmentation fault
ansgar@alpha:~ > res$pw     

Output after 'cd R-0.65.0; make install':
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.65.0  (August 27, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

      This is a preliminary time series package for R 0.65
      See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)       
> res$pw
[1] 0.5 0.5
>       

------------------------------------------------------------------
Hope this report helps the R developers.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 11:22:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 12:22:18 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: rnassar@duke.edu's message of "Sat, 27 Nov 1999 03:01:11 +0100 (MET)"
References: <199911270201.DAA01513@pubhealth.ku.dk>
Message-ID: <x27lj42n85.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> It could be that the following may be due to something wrong that I
> managed to do (I cannot think what...) but I submit this report in
> case it is something that you want to know about (I have solved the
> problem by removing .Rprofile as I describe below).

We've had a similar problem report before, but it was nearly
impossible to investigate because all there was to go on was the
corrupted .RData (which, incidentally was readable after changing the
error() in OffsetToNode to a warning(), something we should perhaps
make permanent?)

This could be an important lead on an elusive bug. Do you think that
you could provide a minimal set of instructions that reproduce the
situation? (As it stands, I cannot see whether it happens to you
because of a particular call in .Rprofile, because of a specific mix
of settings, or simply because .Rprofile has been called at all.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Nov 27 13:37:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 27 Nov 1999 13:37:18 +0000 (GMT)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
In-Reply-To: <199911271030.LAA02408@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911271333120.26405-100000@auk.stats>

This problem is not to do with quadprog nor tseries but rbind. It is
already solved in the current R-release snapshot, and if you need this
to work under 0.90.0, I suggest you download the current daily
snapshot and build that.


On Sat, 27 Nov 1999 steland@euv-frankfurt-o.de wrote:

> Full_Name: Ansgar Steland
> Version: 0.90.0
> OS: Linux 6.1 FreeBSD 3.2
> Submission from: (NULL) (62.104.196.10)
> 
> 
> Yesterday I downloaded R 0.90.0 and the current versions of some
> packages (tseries, quadprog,...).
> I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
> I also re-build all packages required by tseries.
> 
> 
> I checked out portfolio.optim (package: tseries).
> It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
> (More precisely, the example in the documentation of portfolio.optim crashed.)
> 
> Simply reinstalling R 0.65.0 fixed the problem! Now the example works.
> 
> I suppose there is a problem with the code of the solve.QP function 
> of the package quadprog.
> Perhaps it uses internal R functions whose argument lists have changed or sthg.
> like this, I don't know.

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 14:47:08 1999
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 27 Nov 1999 09:47:08 -0500 (EST)
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: <x27lj42n85.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>

Here is a minimum set of instructions to reproduce the problem on my 
computer:

1. remove/rename any .Rprofile in home or current directories.

2. rename .RData file

3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
   untarred/compiled/installed) to the home directory.

4. rename ~/Rprofile to ~/.Rprofile.  

(I'm trying to ensure that neither of my existing .Rprofile and .RData files 
are involved in the test, and that only the "distribution" Rprofile, when 
copied to the home directory and renamed to .Rprofile is the trigger for 
the problem, i.e. simply the existence of a valid .Rprofile file)

5. Run R, then q() and save .RData  (or save.image() and then quite 
without further saving upon quitting.)  (It makes no difference if you did 
anything within R, or whether you simply saved an 'empty' file)

6. Run R again.  It cannot read .RData and aborts.

7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
run it again, and it works perfectly.

I hope this helps, and as I said, I'd be glad to try out specific
instructions on my computer or try to answer any questions.  I have a
vague recollection that a few versions earlier, I had a problem that I
solved by using as ~/.Rprofile a copy of Rprofile that came with the new
version, and that solved the problem at that time.)

Thank you and best regards,

Rashid

On 27 Nov 1999, Peter Dalgaard BSA wrote:

> Date: 27 Nov 1999 12:22:18 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: .Rprofile results in corruption of .RData? (PR#346)
> 
> rnassar@duke.edu writes:
> 
> > It could be that the following may be due to something wrong that I
> > managed to do (I cannot think what...) but I submit this report in
> > case it is something that you want to know about (I have solved the
> > problem by removing .Rprofile as I describe below).
> 
> We've had a similar problem report before, but it was nearly
> impossible to investigate because all there was to go on was the
> corrupted .RData (which, incidentally was readable after changing the
> error() in OffsetToNode to a warning(), something we should perhaps
> make permanent?)
> 
> This could be an important lead on an elusive bug. Do you think that
> you could provide a minimal set of instructions that reproduce the
> situation? (As it stands, I cannot see whether it happens to you
> because of a particular call in .Rprofile, because of a specific mix
> of settings, or simply because .Rprofile has been called at all.)
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Sat Nov 27 16:04:06 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Sat, 27 Nov 1999 17:04:06 +0100 (MET)
Subject: size of text and numbers in graphs (PR#349)
Message-ID: <199911271604.RAA03032@pubhealth.ku.dk>

Hi!

Since installation of R 0.90 there are problems with the size 
of text and numbers also in the x11-device (I reported about similar 
problems with the postscript device recently). For numbers and 
letters a different size is used:

plot(1:10,1:10,type="n")
text(2,8,"F5F5F5F5F5")
text(2,7,"F5F5F5F5F5",cex=2)

The same problem is also found in the postscript device.
The difference is small but clearly visible.

Thanks for fixing soon!


Wolfgang Koller


----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 17:45:55 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 18:45:55 +0100 (MET)
Subject: rstandard forgotten? (PR#350)
Message-ID: <199911271745.SAA03303@pubhealth.ku.dk>

I was just wondering whether implementation of   rstandard  mentioned under 
?influence.measures  had been forgotten? 
(I am aware that MASS has standardized residuals)

Thanks-- and no need to reply.

Rashid Nassar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 18:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 19:58:36 +0100
Subject: size of text and numbers in graphs (PR#349)
In-Reply-To: koller2@fgr.wu-wien.ac.at's message of "Sat, 27 Nov 1999 17:04:06 +0100 (MET)"
References: <199911271604.RAA03032@pubhealth.ku.dk>
Message-ID: <x2iu2nsqw3.fsf@blueberry.kubism.ku.dk>

koller2@fgr.wu-wien.ac.at writes:

> Hi!
> 
> Since installation of R 0.90 there are problems with the size 
> of text and numbers also in the x11-device (I reported about similar 
> problems with the postscript device recently). For numbers and 
> letters a different size is used:
> 
> plot(1:10,1:10,type="n")
> text(2,8,"F5F5F5F5F5")
> text(2,7,"F5F5F5F5F5",cex=2)
> 
> The same problem is also found in the postscript device.
> The difference is small but clearly visible.
> 
> Thanks for fixing soon!

It's not a bug. The fonts are designed that way (capital letters one
pixel taller than numbers in some sizes). Try for instance running
xfontsel with

-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 23:00:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Nov 1999 00:00:52 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: Rashid Nassar's message of "Sat, 27 Nov 1999 09:47:08 -0500 (EST)"
References: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>
Message-ID: <x2wvr31qvv.fsf@blueberry.kubism.ku.dk>

Rashid Nassar <rnassar@duke.edu> writes:

> Here is a minimum set of instructions to reproduce the problem on my 
> computer:
> 
> 1. remove/rename any .Rprofile in home or current directories.
> 
> 2. rename .RData file
> 
> 3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
>    untarred/compiled/installed) to the home directory.
> 
> 4. rename ~/Rprofile to ~/.Rprofile.  
> 
> (I'm trying to ensure that neither of my existing .Rprofile and .RData files 
> are involved in the test, and that only the "distribution" Rprofile, when 
> copied to the home directory and renamed to .Rprofile is the trigger for 
> the problem, i.e. simply the existence of a valid .Rprofile file)
> 
> 5. Run R, then q() and save .RData  (or save.image() and then quite 
> without further saving upon quitting.)  (It makes no difference if you did 
> anything within R, or whether you simply saved an 'empty' file)
> 
> 6. Run R again.  It cannot read .RData and aborts.
> 
> 7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
> run it again, and it works perfectly.

OK, I think I see it.

(a) You're not supposed to do that! The system Rprofile is always
executed, so personal .Rprofile files should just contain your own
modifications.

(b) It boils down to the single line:

.AutoloadEnv <- pos.to.env(2)

and I suspect that the trouble is that it contains a pointer to something
on the search path which is not getting saved along with the
workspace. You can create the problem entirely without Rprofile like
this:

> x<-pos.to.env(2)
> save("x",file="junk")
> load("junk")
Error in load("junk") : unresolved node during restore
> rm(x)
> load("junk")
Error in load("junk") : unresolved node during restore
> ls()
character(0)

Looks more than a bit nasty to fix....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@astro.ocis.temple.edu  Sun Nov 28 02:38:29 1999
From: rmh@astro.ocis.temple.edu (Richard M. Heiberger)
Date: Sat, 27 Nov 1999 21:38:29 -0500 (EST)
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
Message-ID: <199911280238.VAA32405@tempest.ocis.temple.edu>

A better solution is to get the current ESS 5.1.11.  We added the noreadline
command sometime after 5.0.  With the newer ESS you should not need to make
any changes.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov 28 16:22:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 28 Nov 1999 17:22:30 +0100 (CET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
References: <14398.57453.765951.973990@fangorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
Message-ID: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 26 Nov 1999, Kurt Hornik wrote:
>> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
>> understand what is going on.  configure checks (via AC_C_CONST) whether
>> `const' works fine.  If not, it defines const as empty in Rdefines.h.
>> This in turn gets included in all of our source files.  So how can it
>> happen that const is empty in one place and not in another?

> Look in gram.c:

> #ifndef __cplusplus
> #ifndef __STDC__
> #define const
> #endif
> #endif

> comes before the forward declaration and the definition. We have ANSI
> compilers, so this does not happen to us.

> I don't know how to tell bison to behave!

I know :-)

In bison-xy/src/output.c, replace the unconditional

  /* Make "const" do nothing if not in ANSI C.  */
  fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
\n#endif\n\n");

by something more useful :-)

But seriously, what is going on here?  Autoconf says

 - Macro: AC_C_CONST
     If the C compiler does not fully support the keyword `const',
     define `const' to be empty.  Some C compilers that do not define
     `__STDC__' do support `const'; some compilers that define
     `__STDC__' do not completely support `const'.  Programs can simply
     use `const' as if every C compiler supported it; for those that
     don't, the `Makefile' or configuration header file will define it
     as empty.

so how can we deal with the situation where __STDC__ is not defined by
the compiler but `const' still works?

One solution would be to mimic Bison's rule in addition to the autoconf
magic, so that we define const as empty when __STDC__ is not defined,
even if const works.

???

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Nov 29 09:20:32 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 29 Nov 1999 10:20:32 +0100 (MET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.10.9911291007520.5856-100000@zidsrv.sci.uni-klu.ac.at>

On Sun, 28 Nov 1999, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
> 
> > On Fri, 26 Nov 1999, Kurt Hornik wrote:
> >> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
> >> understand what is going on.  configure checks (via AC_C_CONST) whether
> >> `const' works fine.  If not, it defines const as empty in Rdefines.h.
> >> This in turn gets included in all of our source files.  So how can it
> >> happen that const is empty in one place and not in another?
> 
> > Look in gram.c:
> 
> > #ifndef __cplusplus
> > #ifndef __STDC__
> > #define const
> > #endif
> > #endif
> 
> > comes before the forward declaration and the definition. We have ANSI
> > compilers, so this does not happen to us.
> 
> > I don't know how to tell bison to behave!
> 
> I know :-)
> 
> In bison-xy/src/output.c, replace the unconditional
> 
>   /* Make "const" do nothing if not in ANSI C.  */
>   fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
> \n#endif\n\n");
> 
> by something more useful :-)
> 
> But seriously, what is going on here?  Autoconf says
> 
>  - Macro: AC_C_CONST
>      If the C compiler does not fully support the keyword `const',
>      define `const' to be empty.  Some C compilers that do not define
>      `__STDC__' do support `const'; some compilers that define
>      `__STDC__' do not completely support `const'.  Programs can simply
>      use `const' as if every C compiler supported it; for those that
>      don't, the `Makefile' or configuration header file will define it
>      as empty.
> 
> so how can we deal with the situation where __STDC__ is not defined by
> the compiler but `const' still works?
> 
> One solution would be to mimic Bison's rule in addition to the autoconf
> magic, so that we define const as empty when __STDC__ is not defined,
> even if const works.
> 

Wouldn't it be better to force CPPFLAGS to contain "-std" or "-std1" for 
CC=cc on alpha? We compile most of our freeware stuff (kde,...) for Tru64
with this option ("std1") (From time to time I forget about it ;(, this
happened with R-0.65/90) 

I just compiled 0.90.0 successful with "-std1". 

"man cc" says the following about the -std options:
################### man cc /-std #######################################
-std[n]

Directs the compiler to produce warnings for language constructs that are
not standard in the language. The default is -std0. The following values
are accepted:

-std

Enforces the ANSI C standard, but allows some common programming practices
disallowed by the standard. The -std flag causes the macro __STDC__=0 to
be passed to the preprocessor.

-std0

Enforces the K&R programming style, with certain ANSI extensions in areas
where the K & R behavior is undefined or ambiguous.  In general, -std0
compiles most pre-ANSI C programs and produces expected results. The -std0
flag causes the __STDC__ macro to be undefined.

-std1 

Strictly enforces the ANSI C standard and all its prohibitions (such as
those that apply to the handling of void types, the definition of lvalues
in expressions, the mixing of integrals and pointers, and the modification
of rvalues).  This flag does not, however, restrict the name space defined
by the DIGITAL UNIX implementation to only reserved names as specified by
ANSI C. The -std1 flag causes the macro __STDC__=1 to be passed to the
preprocessor.  Note that the -std1 flag also affects linker defined
symbols.  See ld(1) for more information.

None of the -std* flags restrict or expand the name space defined by the
DIGITAL UNIX implementation (for example, items declared in system header
files).  To restrict the name space so that only ANSI C reserved names are
made visible from the system header files listed in the ANSI C standard,
use the _ANSI_C_SOURCE macro.  For details on _ANSI_C_SOURCE and other
standard macros, see standards(5).
################ end man #########################################

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Nov 29 14:53:31 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Nov 1999 15:53:31 +0100 (MET)
Subject: rbind crash (PR#351)
Message-ID: <199911291453.PAA15918@pubhealth.ku.dk>

Well here is my (first) segmentation fault for this version (R0.90.0)
on Intel RH5.2:

x <- matrix(0,nrow=1,ncol=3)
y <- c(0.1,10,0.01)
rbind(x,y)

 Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 29 15:00:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Nov 1999 16:00:32 +0100
Subject: rbind crash (PR#351)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Nov 1999 15:53:31 +0100 (MET)"
References: <199911291453.PAA15918@pubhealth.ku.dk>
Message-ID: <x24se5qr5b.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> Well here is my (first) segmentation fault for this version (R0.90.0)
> on Intel RH5.2:
> 
> x <- matrix(0,nrow=1,ncol=3)
> y <- c(0.1,10,0.01)
> rbind(x,y)

Fixed already. Should be in the snapshots, but Martin seems to be
having problems with those at the moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 29 15:33:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 29 Nov 1999 10:33:25 -0500
Subject: cross reference wishlist item
Message-ID: <38429CC5.497C52DD@bank-banque-canada.ca>

It would be nice for checking documentation to be able to generate the
"see also" cross references (e.g. the list of functions where dev2bitmap
is linked as a "see also" reference.) Perhaps this already exists?

(BTW, it would be useful to have a "see also" reference to dev2bitmap in
the help for postscript and for Devices.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Mon Nov 29 23:02:59 1999
From: gilb@home.com (Paul Gilbert)
Date: Mon, 29 Nov 1999 18:02:59 -0500
Subject: install.packages warning
Message-ID: <38430621.AAC6DA49@home.com>

I mis-spelled "chron" and with

    install.packages(c("tseries", "cron"))

I get tseries installed ok and cron fails as it should, but I think the
warning could be more suggestive of the problem:

Warning messages:
1: argument `lib' is missing: using /apps/R/library in:
install.packages(c("tseries", "cron"))
2: Download of package cron failed in: download.packages(pkglist,
destdir = tmpd, available = available,

Also, it would be nice if update.packages did install.packages in the
case where a package is not already installed, and it would be nice to
be able to pass "--quiet" to wget.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 29 17:21:55 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 29 Nov 1999 17:21:55 +0000 (GMT)
Subject: cross reference wishlist item
Message-ID: <199911291721.RAA02685@toucan.stats.ox.ac.uk>


> Date: Mon, 29 Nov 1999 10:33:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> It would be nice for checking documentation to be able to generate the
> "see also" cross references (e.g. the list of functions where dev2bitmap
> is linked as a "see also" reference.) Perhaps this already exists?

Not that I know of, but it is a 30 second Perl / grep script surely.

grep \\link\{Devices\} *.Rd

works for me. (There are no xrefs to dev2bitmap.)


> (BTW, it would be useful to have a "see also" reference to dev2bitmap in
> the help for postscript and for Devices.)

That is sort of deliberate. dev2bitmap is something of a stopgap:
Windows already has png, jpeg and bmp devices, and we hope to have those on
Unix shortly.  But I'll sort that out for now.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 30 13:28:12 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 30 Nov 1999 14:28:12 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301328.OAA28224@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: Linux + Tru64
Submission from: (NULL) (143.205.61.72)


This is where example(krige) from library(sgeostat) stops with R 0.90.0:

krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
Error in length(x) == nrow(z) : comparison (1) is possible only for vector
types

in previous versions of R the above image() call worked, because image()
did the transformation 

  grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))

iself. (BTW, contour() didn't)

Was this change of behaviour in image() made intentionally? 

Anyway I will change the Rd help page for krige in sgeostat to
...
image(grid$x, grid$y, matrix(grid$krige$zhat,length(grid$x),length(grid$x)), add
= T)
...


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 30 14:16:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Nov 1999 15:16:55 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301416.PAA29330@pubhealth.ku.dk>

[...]

> This is where example(krige) from library(sgeostat) stops with R 0.90.0:
> 
> krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
> Error in length(x) == nrow(z) : comparison (1) is possible only for vector
> types
> 
> in previous versions of R the above image() call worked, because image()
> did the transformation 
> 
>   grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))
> 
> iself. (BTW, contour() didn't)

(In fact, it just ignored dim(z) which therefore could be null.)

> Was this change of behaviour in image() made intentionally? 

Yes, to allow a more general specification of x and y, for S compatibility
(and general usefulness!).


I believe this is a bug in sgeostat not in R: it has long been
documented that z should be a matrix. What has happened is that we
now make use of the documented behaviour.  Suppose z were of length 90,
and each of x and y were of length 10. That is now ambiguous (and BTW,
just gave the wrong plot in 0.65.1, something that has caught me
more than once).

I will add a more specific error message testing that z is a matrix.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 30 20:22:57 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 30 Nov 1999 21:22:57 +0100 (MET)
Subject: R CMD check xxx location (PR#353)
Message-ID: <199911302022.VAA02016@pubhealth.ku.dk>

Very minor bug:
"R CMD check " puts results in a slightly different place than it suggests. In
the example below they are in   check-syskern rather than syskern/check-syskern.

Paul Gilbert
_______

[3] gilp/dse : R CMD check syskern
Checking package `syskern' ...
 Massaging examples into `syskern-Ex.R' ...
 Running examples in package `syskern' ...
 OK
 Results of `check' are available in directory syskern/check-syskern
[4] gilp/dse : ls  syskern/check-syskern
syskern/check-syskern: No such file or directory
[5] gilp/dse : ls check-syskern
syskern-Ex.R          syskern-Ex.Rout       syskern-Examples.ps
[6] /home/mfa5/gilp/dse :



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov  1 08:39:11 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 1 Nov 1999 09:39:11 +0100 (MET)
Subject: as.data.frame(NULL) & as.data.frame(list()) & bug in dput(.)
Message-ID: <14365.20911.924993.572835@gargle.gargle.HOWL>


{Connected to the bug report on expand.grid(.) and my fix to it..}

[Following the spirt of arrays where parts of dim() can be 0]
I would like for these two to give the "same"
or at least, both to give a data.frame with 0 observations of 0 variables.

Currently [R 0.65.1 and pre-0.90]

    > str(d0 <- as.data.frame(list()))
    `data.frame':  0 obs. of  0 variable:
     list()

    > dput(d0) ## BUG
    NULL

    > as.data.frame(NULL)
    Error in as.data.frame.default(NULL) : can't coerce NULL into a data.frame

and
    > str(dn0 <- as.data.frame(numeric(0)))
    `data.frame':  0 obs. of  1 variable:
     $ x: num 

    > dput(dn0)
    structure(list(x = numeric(0)), .Names = "x", class = "data.frame")

(S-plus 5.1 is almost the same, but uses "X" instead of "x" for a name)
-----

Comments?
If I don't get any, I'd only change  as.data.frame such that
as.data.frame(NULL) === as.data.frame(list())  |-->  0 x 0 data.frame

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov  1 16:26:13 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 01 Nov 1999 11:26:13 -0500
Subject: package description
Message-ID: <381DBF25.36FC4480@bank-banque-canada.ca>

It would be nice in the building of help for packages if there were some

mechanism to provide a few paragraphs of general description for the
package. (If this is already there I've missed it.) In the html help it
would be possible to do this by looking for some special file (e.g.
"General_Description") in the man directory and putting a link to that
at the top of 00Index.html, but I don't now if this approach would work
with other help formats.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov  1 16:44:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 1 Nov 1999 16:44:37 +0000 (GMT)
Subject: package description
Message-ID: <199911011644.QAA20354@toucan.stats.ox.ac.uk>


> Date: Mon, 01 Nov 1999 11:26:13 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: r-devel <r-devel@stat.math.ethz.ch>
> Subject: package description
> 
> It would be nice in the building of help for packages if there were some
> mechanism to provide a few paragraphs of general description for the
> package. (If this is already there I've missed it.) In the html help it
> would be possible to do this by looking for some special file (e.g.
> "General_Description") in the man directory and putting a link to that
> at the top of 00Index.html, but I don't now if this approach would work
> with other help formats.

It will not, not even for the html format as 00Index.html is
auto-generated by R INSTALL.  There is nothing to prevent there being a
Rd file containing the description and some suitable \name or \alias
(package:foo, for example).  This could be formalized, for example by a
special name (`Description') being placed first in the list.

That is my understanding of the purpose of library(help=foo) in the S
world, but it seems to be used rarely within R packages. That is, the
file INDEX could contain more than just the list of public functions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:32:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 16:32:15 -0500
Subject: bug in sample
In-Reply-To: <199910312320.AAA20291@pubhealth.ku.dk>; from Ray.Brownrigg@mcs.vuw.ac.nz on Mon, Nov 01, 1999 at 12:20:56AM +0100
References: <199910312320.AAA20291@pubhealth.ku.dk>
Message-ID: <19991101163215.P13888@jimmy.harvard.edu>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 21:33:17 1999
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Mon, 1 Nov 1999 22:33:17 +0100 (MET)
Subject: bug in sample (PR#305)
Message-ID: <199911012133.WAA01606@pubhealth.ku.dk>

The following appears to be a bug in 0.90

> x<-sample(10,1:4,rep=T)
> x
[1] 8
> ?sample
>  x<-sample(10,1:4,rep=T)
> x
[1] 5

Of course, I forgot the syntax but I still don't like the result.


-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov  1 21:58:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Nov 1999 22:58:42 +0100
Subject: bug in sample (PR#305)
In-Reply-To: rgentlem@jimmy.harvard.edu's message of "Mon, 1 Nov 1999 22:33:17 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk>
Message-ID: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>

rgentlem@jimmy.harvard.edu writes:

> The following appears to be a bug in 0.90
> 
> > x<-sample(10,1:4,rep=T)
> > x
> [1] 8
> > ?sample
> >  x<-sample(10,1:4,rep=T)
> > x
> [1] 5
> 
> Of course, I forgot the syntax but I still don't like the result.

Weelll... the code seems to indicate that that is the intended result:
if length(x) == 1  and x>=1, you get samples from 1:x and since size
is non-vectorized, only the 1st element takes and you get samples of
size 1.

Splus3.4 does likewise, although it does give a warning:
  Numerical expression has 4 elements: only the first used...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Mon Nov  1 22:03:15 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 1 Nov 1999 17:03:15 -0500
Subject: bug in sample (PR#305)- apologies
In-Reply-To: <x21za9ri0d.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Nov 01, 1999 at 10:58:42PM +0100
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
Message-ID: <19991101170315.Q13888@jimmy.harvard.edu>

Oops,
  Somehow I'm not connecting with my mailer properly today...

  What I wanted to point out was the lack of a warning there and the
  following:

> y<-sample(3)
> y
[1] 2 3 1
> v<-as.factor(y)
> is.numeric(v)
[1] TRUE

  Whereas in Splus:

>  y<-sample(3)
>  v<-as.factor(y)
> is.numeric(v)
[1] F

  Did I miss a discussion of this (I would prefer if is.numeric was
false for factors).

 robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:11:09 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 01 Nov 1999 16:11:09 -0600
Subject: problem with "[[<-"
Message-ID: <qxpzowx3ls2.fsf@ludwig.stat.wisc.edu>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Mon Nov  1 22:16:29 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Mon, 1 Nov 1999 23:16:29 +0100 (MET)
Subject: problem with "[[<-" (PR#306)
Message-ID: <199911012216.XAA01868@pubhealth.ku.dk>

This works in 0.65.1 but not in 0.90.0.

> form <- ~ a | b
> form[[2]][[3]] <- as.name("u")
Error: Object "u" not found

I can get around this as follows

> form.1 <- form[[2]]
> form.1[[3]] <- as.name("u")
> form[[2]] <- form.1
> form
~a | u

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 90.0
 year = 1999
 month = October
 day = 28
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Nov  2 09:47:20 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Nov 1999 10:47:20 +0100 (MET)
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: <19991101170315.Q13888@jimmy.harvard.edu>
References: <199911012133.WAA01606@pubhealth.ku.dk>
 <x21za9ri0d.fsf@blueberry.kubism.ku.dk>
 <19991101170315.Q13888@jimmy.harvard.edu>
Message-ID: <14366.45864.342308.408958@gargle.gargle.HOWL>

Before turning this into a new bug report (not connected to sample() at all):
{ factor() behavior redesigning must be done carefully... }
Some detective work reveals

R versions from 0.50 to 0.61.3  all give

  is.numeric(gl(3,5,15)) 
			 |-> FALSE

Since R version 0.62.1 (June 15, 1998),
the above gives TRUE.
  
The NEWS for 0.62[.1] has

    o	All internal mechanisms to support factors and data.frames have
	been removed.  These are now entirely supported by interpreted
	code!  `is.unordered' has been eliminated.  Thanks to John
	Chambers for allowing the distribution of his StatLib code.

i.e., they change occurded when we dropped the internal factor type...

--

Yes, my gut feeling also says that the current behavior is wrong...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Nov  2 10:04:20 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 2 Nov 1999 11:04:20 +0100 (CET)
Subject: package description
In-Reply-To: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk>
Message-ID: <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 1 Nov 1999 16:44:37 +0000 (GMT),
>>>>> Prof Brian Ripley (PBR) wrote:

>> Date: Mon, 01 Nov 1999 11:26:13 -0500
>> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
>> To: r-devel <r-devel@stat.math.ethz.ch>
>> Subject: package description
>> 
>> It would be nice in the building of help for packages if there were some
>> mechanism to provide a few paragraphs of general description for the
>> package. (If this is already there I've missed it.) In the html help it
>> would be possible to do this by looking for some special file (e.g.
>> "General_Description") in the man directory and putting a link to that
>> at the top of 00Index.html, but I don't now if this approach would work
>> with other help formats.

PBR> It will not, not even for the html format as 00Index.html is
PBR> auto-generated by R INSTALL.  There is nothing to prevent there being a
PBR> Rd file containing the description and some suitable \name or \alias
PBR> (package:foo, for example).  This could be formalized, for example by a
PBR> special name (`Description') being placed first in the list.

PBR> That is my understanding of the purpose of library(help=foo) in the S
PBR> world, but it seems to be used rarely within R packages. That is, the
PBR> file INDEX could contain more than just the list of public functions.

we can put the contents of the DESCRIPTION file on top of 00Index.html
and cat both DESCRIPTION and 00Index for library(help=foo). Would this
do what you want?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:15:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:15:54 +0100
Subject: is.numeric(factor(...))  {was: bug in sample (PR#305)}
In-Reply-To: Martin Maechler's message of "Tue, 2 Nov 1999 10:47:20 +0100 (MET)"
References: <199911012133.WAA01606@pubhealth.ku.dk> <x21za9ri0d.fsf@blueberry.kubism.ku.dk> <19991101170315.Q13888@jimmy.harvard.edu> <14366.45864.342308.408958@gargle.gargle.HOWL>
Message-ID: <x2hfj5kxlx.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Before turning this into a new bug report (not connected to sample() at all):
> { factor() behavior redesigning must be done carefully... }
> Some detective work reveals
> 
> R versions from 0.50 to 0.61.3  all give
> 
>   is.numeric(gl(3,5,15)) 
> 			 |-> FALSE
> 
> Since R version 0.62.1 (June 15, 1998),
> the above gives TRUE.
>   
> The NEWS for 0.62[.1] has
> 
>     o	All internal mechanisms to support factors and data.frames have
> 	been removed.  These are now entirely supported by interpreted
> 	code!  `is.unordered' has been eliminated.  Thanks to John
> 	Chambers for allowing the distribution of his StatLib code.
> 
> i.e., they change occurded when we dropped the internal factor type...
> 
> --
> 
> Yes, my gut feeling also says that the current behavior is wrong...

We did have some debate over it at some point. The interesting thing
is that Splus has:

> mode(factor(letters[1:3]))
[1] "numeric"
> is.numeric(factor(letters[1:3]))
[1] F

> x<-1:3
> class(x)<-"foo"
> is.numeric(x)
[1] T
> attr(x,"levels")<-3:1
> is.numeric(x)
[1] T
> class(x)<-"facto"
> is.numeric(x) 
[1] T
> class(x)<-"factor"
> is.numeric(x)
[1] F

...which doesn't strike me as particularly logical. I believe that we
then decided not to be bug-compatible on this issue. What are the good
reasons to behave the Splus way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 10:55:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 11:55:32 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: saikat@stat.wisc.edu's message of "Mon, 1 Nov 1999 23:16:29 +0100 (MET)"
References: <199911012216.XAA01868@pubhealth.ku.dk>
Message-ID: <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>

saikat@stat.wisc.edu writes:

> This works in 0.65.1 but not in 0.90.0.
> 
> > form <- ~ a | b
> > form[[2]][[3]] <- as.name("u")
> Error: Object "u" not found

Ow! Obviously, eval() is called once too many. Robert?

The problem is that one gets to

"[[<-"(*tmp*, 3, value = u)

and the evaluator naturally tries to evaluate u.

> I can get around this as follows
> 
> > form.1 <- form[[2]]
> > form.1[[3]] <- as.name("u")
> > form[[2]] <- form.1
> > form
> ~a | u

..or form[[2]][[3]]<-quote(quote(u)), but that one is not likely to
last through a bugfix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 14:55:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 15:55:18 +0100
Subject: problem with "[[<-" (PR#306)
In-Reply-To: Peter Dalgaard BSA's message of "02 Nov 1999 11:55:32 +0100"
References: <199911012216.XAA01868@pubhealth.ku.dk> <x2bt9dkvrv.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266zlkko9.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> saikat@stat.wisc.edu writes:
> 
> > This works in 0.65.1 but not in 0.90.0.
> > 
> > > form <- ~ a | b
> > > form[[2]][[3]] <- as.name("u")
> > Error: Object "u" not found
> 
> Ow! Obviously, eval() is called once too many. Robert?

Fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov  2 15:25:33 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 02 Nov 1999 10:25:33 -0500
Subject: package description
References: <199911011644.QAA20354@toucan.stats.ox.ac.uk> <14366.46884.957696.816264@galadriel.ci.tuwien.ac.at>
Message-ID: <381F026D.685C82B6@bank-banque-canada.ca>

>we can put the contents of the DESCRIPTION file on top of 00Index.html
>and cat both DESCRIPTION and 00Index for library(help=foo). Would this
>do what you want?

I'm thinking of a description which would be several paragraphs, so I would
rather link to it from 00Index than place all the text in 00Index above the
links to the individual help for  functions. I thought DESCRIPTION was suppose
to be a fairly short standard form with some things like version, requires,
author, licence, ..., and perhaps it would be better not to clutter it with the
kind of description I'm thinking about.

I've been playing a bit by putting my description in a file
00General_Description.Rd, which usually puts it at the top since that is fairly
high on the collating sequence. I think it would be better if there was a
standard name that is guaranteed to get a link at the top of 00Index.html. Also,
it would be nice to have a system which would work with help formats other than
html.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Nov  2 21:05:33 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 2 Nov 1999 22:05:33 +0100 (MET)
Subject: bugs in scan() (PR#307)
Message-ID: <199911022105.WAA14753@pubhealth.ku.dk>

[I originally sent this to R-bugs@stat.math.ethz.ch and it didn't
bounce, but when I received no response I thought I had better check to
see if I had the correct address.]

System: Sun Solaris 2.5.1
R: Version 0.65.1 Release (October 07, 1999)

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':

> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:

> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Tue Nov  2 21:14:35 1999
From: umehlig@uni-bremen.de (umehlig@uni-bremen.de)
Date: Tue, 2 Nov 1999 22:14:35 +0100 (MET)
Subject: R abnormal exit when plotting lm (PR#308)
Message-ID: <199911022114.WAA14796@pubhealth.ku.dk>

<<insert bug report here>>
I had a "abnormal" exit of R plotting a fitted linear model. here's
the last few lines of the R session:
-------------------------------------------------------------------
> plot(blstrhz.lm)
Hit <Return> to see next plot:
Hit <Return> to see next plot:
Hit <Return> to see next plot:
X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  53 (X_CreatePixmap)
      Value in failed request:  0x0
            Serial number of failed request:  16548
	            Current serial number in output stream:  16554

		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
			                                                                                 
-------------------------------------------------------------------
Which additional information do you need to find out whether this is
a bug?

Thanks for your attention,
Ulf Mehlig

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rmutil, package:gnlm, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov  2 22:16:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Nov 1999 23:16:05 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: umehlig@uni-bremen.de's message of "Tue, 2 Nov 1999 22:14:35 +0100 (MET)"
References: <199911022114.WAA14796@pubhealth.ku.dk>
Message-ID: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>

umehlig@uni-bremen.de writes:

> <<insert bug report here>>
> I had a "abnormal" exit of R plotting a fitted linear model. here's
> the last few lines of the R session:
> -------------------------------------------------------------------
> > plot(blstrhz.lm)
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> X Error of failed request:  BadValue (integer parameter out of range for operation)
>   Major opcode of failed request:  53 (X_CreatePixmap)
>       Value in failed request:  0x0
>             Serial number of failed request:  16548
> 	            Current serial number in output stream:  16554
> 
> 		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
> 			                                                                                 
> -------------------------------------------------------------------
> Which additional information do you need to find out whether this is
> a bug?

None. It's a bug...

However, to have a chance of fixing it (and knowing whether it got
fixed!), we'd need to either have instructions to reproduce the crash,
or at the very least detailed information on where things went wrong.
Can you make it happen again when running under a debugger?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hdreau@cybercable.fr  Tue Nov  2 23:04:47 1999
From: hdreau@cybercable.fr (hdreau@cybercable.fr)
Date: Wed, 3 Nov 1999 00:04:47 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <199911022304.AAA15279@pubhealth.ku.dk>

Full_Name: Hervé Dréau
Version: not  applicable
OS: not  applicable
Submission from: (NULL) (212.198.234.254)


Here's the listing of difference in version and existence between the PACKAGES
file found in the contrib directory and the content of the directory.
This cause a problem with the automatic install (and upgrade) of packages 

NISTnls
0.9-1 
NISTnls_0.9-2.tar.gz

bats not found in /R/src/contrib

VR_5.3pl037-2.tar.gz not found in PACKAGES

coda 
0.4-5 
coda_0.4-7.tar.gz 

Package: mclust
1.0-1 
mclust_1.1-1.tar.gz

nnet not found in /R/src/contrib
ppr not found in /R/src/contrib

ratetables_1.0-2.tar.gz not found in PACKAGES

rmtools not found in /R/src/contrib

 rpart
1.0-6  rpart_1.0-7.tar.gz

sfb not found in /R/src/contrib
spatial not found in /R/src/contrib

splines
2.0-3 splines_2.0-6.tar.gz

survival4
1.1-0 survival4_1.4-0.tar.gz

Best regard 
Hervé Dréau

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov  3 07:56:06 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Nov 1999 08:56:06 +0100 (MET)
Subject: discrepancy between PACKAGES file and contents of the contrib (PR#310)
Message-ID: <199911030756.IAA16843@pubhealth.ku.dk>

Yesterday I asked privately which mirror's PACKAGES file this was after an
earlier post, as I could not (and still cannot) get to Vienna. But AFAIK

rpart's entry had been updated after I reported that one
rmtools is not on CRAN
bats is in devel, not in the contrib directory
ppr is in Old, not in the contrib directory
nnet and spatial are nowhere (as part of VR), and VR is not a package
  but a package bundle: we know those are not yet covered by
  update.packages.

The update mechanism does depend on a consistent naming scheme, with
DESCRIPTION entires and file names matching. Fritz Leisch is working on a
checker, but we do rely on authors at present. For example. the DESCRIPTION
file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!


On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:

> Full_Name: Hervé Dréau
> Version: not  applicable
> OS: not  applicable

Sorry, those _are_ applicable. The Unix and Windows versions of
update.packages are quite distinct. I have assumed Unix was meant.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Herve Dreau <hdreau@cybercable.fr>  Wed Nov  3 08:37:04 1999
From: Herve Dreau <hdreau@cybercable.fr> (Herve Dreau)
Date: Wed, 3 Nov 1999 09:37:04 +0100
Subject: discrepancy between PACKAGES file and contents of the contrib directory (PR#309)
Message-ID: <19991103093704.A24803@raoul.fr>



Le mer, 03 nov 1999 08:53:58 Prof Brian D Ripleya écrit :
> Yesterday I asked privately which mirror's PACKAGES file this was after an
> earlier post, as I could not (and still cannot) get to Vienna. But AFAIK
> 

Sorry but I have had replied to you privatelly yesterday.

In this lost (?) mail i said :

 Thank you for your response.
 I use the master CRAN server, I notice some network weekness, but i think 
 if it is the master server all other are just mirror, and the PACKAGES file
 may be  the most recent in the master server.
 After your mail, i compare the content of the PACKAGES file in master CRAN
 and in some mirrors and i found that the tuwien one is the more accurate.
 
 The mirror in italy is particulary old (timestamp on the PACKAGES file is near one
 year old).
 The PACKAGES file in ethz.ch is nearly the same as the one in tuwien (minus the new (?)
  norm package).
 
 Her's a little (and quickly) summary of the discrepancy between the file PACKAGES and 
 the content  of the contrib directory in tuwien

... inserted the report send to r-bug


> rpart's entry had been updated after I reported that one
> rmtools is not on CRAN
> bats is in devel, not in the contrib directory
> ppr is in Old, not in the contrib directory
> nnet and spatial are nowhere (as part of VR), and VR is not a package
>   but a package bundle: we know those are not yet covered by
>   update.packages.

Perhaps but i think all the entry in PACKAGES are listed by 
CRAN.packages()
could not verify in this time : the url at tuwien is unreachable
but using another mirror :
CRAN.packages(CRAN="http://lib.stat.cmu.edu/R/CRAN")
[10,] "bats"                                 "0.1-2" 
[49,] "rmtools"                              "0.2"   
[43,] "ppr"                                  "1.1-2" 
[54,] "spatial"                              "5.3pl035-1"
[38,] "nnet"                                 "5.3pl035-1"
[43,] "ppr"                                  "1.1-2"     

It's only confusing to list packages that are unavailable and cause "false"
error message.

> 
> The update mechanism does depend on a consistent naming scheme, with
> DESCRIPTION entires and file names matching. Fritz Leisch is working on a
> checker, but we do rely on authors at present. For example. the DESCRIPTION
> file in splines_2.0-6.tar.gz has version 2.0-3. Authors: please do check!
> 
> 
> On Wed, 3 Nov 1999 hdreau@cybercable.fr wrote:
> 
> > Full_Name: Hervé Dréau
> > Version: not  applicable
> > OS: not  applicable
> 
> Sorry, those _are_ applicable. The Unix and Windows versions of
> update.packages are quite distinct. I have assumed Unix was meant.

Perhaps but it's not related to my version of R it's only a comparison
between the content of a file and the listing of a directory.
If that matter :
OS linux Redhat 6.1
R 0.65.1

Best regards

Hervé Dréau



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov  3 09:28:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 Nov 1999 10:28:53 +0100 (MET)
Subject: remark on the difference between R-bugs and R-devel
In-Reply-To: <19991103093704.A24803@raoul.fr>
References: <19991103093704.A24803@raoul.fr>
Message-ID: <14368.85.106153.940547@gargle.gargle.HOWL>

Dear Hervé,
(and everyone else helping us!)

thank you for all your bug reports,..

One thing: 
 If you reply to messages with a (PR#nnn) in the subject,
 it would be most useful if you sent them (CC or TO) to R-bugs rather than
 R-devel. 
 Only then do they enter the WWW R bugs archive as followup messages to the
 bug #nnn.  

R-bugs "forwards" all messages to R-devel. So, one doesn't need to give
both R-bugs and R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov  3 15:56:25 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 3 Nov 1999 16:56:25 +0100 (MET)
Subject: Dimnamenames (PR#257)
Message-ID: <199911031556.QAA23767@pubhealth.ku.dk>


I've just started digging into Andreas's old report:

> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
>  dimnames(a[,,1]) # losing component names
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"

Now, this would be fairly easily fixed (I think) which would also make
it compatible with S3. But what should one do about a[,1,1]?  This
would generally be a vector with a .Names attribute, onto which there
is no way of attaching a name. The obvious idea would be to force it
to be a 1d array instead, i.e.

structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 

rather than

structure(c(0,0), .Names = c("1","2"))

Does this sound safe? Generally, such 1-d arrays behave like vectors,
and noone has reported trouble with the fact that the result of table
can be a 1d array. From some viewpoints it seems odd to have different
behaviour depending on whether something is named or not, but it
*would* be nice to have the label retained on rows extracted from a
table...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Wed Nov  3 16:33:19 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Wed, 3 Nov 1999 16:33:19 +0000 (GMT)
Subject: Dimnamenames (PR#257)
In-Reply-To: <199911031556.QAA23767@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991103161959.11496G-100000@laplace>

Hi Peter,

On Wed, 3 Nov 1999 p.dalgaard@biostat.ku.dk wrote:

> Now, this would be fairly easily fixed (I think) which would also make
> it compatible with S3. But what should one do about a[,1,1]?  This
> would generally be a vector with a .Names attribute, onto which there
> is no way of attaching a name. The obvious idea would be to force it
> to be a 1d array instead, i.e.
> 
> structure(c(0,0), .Dim = 2, .Dimnames = structure(list(hansi=c("1","2")))) 
> 
> rather than
> 
> structure(c(0,0), .Names = c("1","2"))
> 
> Does this sound safe?

I'm not sure.  Aren't you duplicating the functionality provided by the
drop flag?  After all, if the names were important then presumably the
subscription would have been a[,1,1, drop=FALSE] anyhow.  I like the
concept of a vector in this situation and suspect that in my lazy code I
have stuff that checks for a dim attribute whan checking arguments to
functions, which would be a problem.  Perhaps it would be better to pass
the name as a different attribute, eg

structure(c(0, 0), .Names = c("1","2"), .dnm = "hansi")

But it would be great to have the names fixed!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From umehlig@uni-bremen.de  Thu Nov  4 06:46:52 1999
From: umehlig@uni-bremen.de (Ulf Mehlig)
Date: Thu, 4 Nov 1999 07:46:52 +0100
Subject: R abnormal exit when plotting lm (PR#308)
In-Reply-To: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
 (p.dalgaard@biostat.ku.dk)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
Message-ID: <199911040646.HAA02246@pandora3.localnet>


 > None. It's a bug...
 > 
 > However, to have a chance of fixing it (and knowing whether it got
 > fixed!), we'd need to either have instructions to reproduce the crash,
 > or at the very least detailed information on where things went wrong.
 > Can you make it happen again when running under a debugger?

Unfortunately, I'm a little bit short of time now, but after the 20th
I will give a try! (I still have a hardcopy of the session, and I will
try to reproduce it step by step. By "running under a debugger" you
mean "R -d gdb", I suppose?).

Many thanks for your attention,
Ulf

-- 
======================================================================
Ulf Mehlig    <umehlig@zmt.uni-bremen.de>
              Center for Tropical Marine Ecology/ZMT, Bremen, Germany
----------------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Wed Nov  3 22:17:41 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Wed, 3 Nov 1999 23:17:41 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911032217.XAA25203@pubhealth.ku.dk>

If .../<pkg>/man/ contains a filename beginning with [, such as
[.datetimes, Rdconvlib.pl cannot convert that help file into latex at
INSTALL time.  [Using --no-latex is a workaround.]

The error given is:

# R INSTALL ssCatalogues
:
 help
 >>> Building/Updating help pages for package `ssCatalogues'
     Formats: text html latex example
/^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
1322, <rdfile> chunk 36.
:

Unfortunately the script stops at that point, so none of the following
help files are installed.

Ray Brownrigg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 08:20:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 09:20:51 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911040820.JAA27177@pubhealth.ku.dk>

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:

    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into latex at
    Ray> INSTALL time.  [Using --no-latex is a workaround.]

    Ray> The error given is:

    Ray> # R INSTALL ssCatalogues
    Ray> :
    Ray> help
    >>>> Building/Updating help pages for package `ssCatalogues'
    Ray> Formats: text html latex example
    Ray> /^[.datetimes$/: unmatched [] in regexp at /vol/R/etc/Rdconvlib.pl line
    Ray> 1322, <rdfile> chunk 36.
    Ray> :

    Ray> Unfortunately the script stops at that point, so none of the following
    Ray> help files are installed.

Well, the bug is more that of documentation of what is allowed for *.Rd
file names.

For portability, we even had to give up having e.g., 
both
	Alias.Rd 
and	alias.Rd

I'd say the rule must contain

>>>> |  For portability reasons, R source files must start with  |
>>>> |     [a-zA-Z]						 |
>>>> |  and should be unique within a package if lowercased.	 |

Maybe we even have to consider more restrictions..

Should this be put into the 
       FAQ,  ?library (...base/man/library.Rd), and/or
       doc/manual/writing-Rd.tex
?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Nov  4 09:09:05 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 4 Nov 1999 10:09:05 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040909.KAA27898@pubhealth.ku.dk>

I get crashes when I call R without any arguments and having no
environment variables R_PROFILE and RPROFILE.

The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
is called with a null ptr as filename (because this is the outcome 
of getenv()).

Although most compilers seem to interpret this as "file not found",
this is an undefined behavior concerning to all C standards I could get
hold of.

A request in comp.lang.c gave the following response:
...
Your program should crash. If you might get a NULL pointer as
a filename, you should have a conditional statement to handle
that case.
...

So I would suggest to test for the return value of getenv, before 
using it as filename in fopen.

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Nov  4 09:50:55 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 4 Nov 1999 10:50:55 +0100 (MET)
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
Message-ID: <199911040950.KAA28506@pubhealth.ku.dk>

On Thu, Nov 04, 1999 at 10:09:05AM +0100, hoffmann@ehmgs2.et.tu-dresden.de wrote:
> 
> The reason is, that in unix/sys-common.c in R_OpenSiteFile() fopen 
> is called with a null ptr as filename (because this is the outcome 
> of getenv()).
> 
> Although most compilers seem to interpret this as "file not found",
> this is an undefined behavior concerning to all C standards I could get
> hold of.
> 
> A request in comp.lang.c gave the following response:
> ...
> Your program should crash. If you might get a NULL pointer as
> a filename, you should have a conditional statement to handle
> that case.
> ...
>

The same happens also under Windows where, for this reason, 
'R_fopen' is defined as
 
FILE *R_fopen(const char *filename, const char *mode)
{
    if (!filename)
	return NULL;
    return (fopen(filename, mode));
}

g.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 09:56:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 10:56:58 +0100
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen (PR#312)
In-Reply-To: guido@hal.stat.unipd.it's message of "Thu, 4 Nov 1999 10:50:55 +0100 (MET)"
References: <199911040950.KAA28506@pubhealth.ku.dk>
Message-ID: <x2k8ny8tqt.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> The same happens also under Windows where, for this reason, 
> 'R_fopen' is defined as
>  
> FILE *R_fopen(const char *filename, const char *mode)
> {
>     if (!filename)
> 	return NULL;
>     return (fopen(filename, mode));
> }

..which I was just in the process of implementing for the Unix
version.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Nov  4 11:23:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:23:44 +0000 (GMT)
Subject: New codes() methods
Message-ID: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>

Hi Everyone,

Can I suggest a couple of new `codes' methods.  I know codes is a bit
dodgy (at least, according to the comments in codes.factor), but for what
it's worth I like to extract codes from data frames of factors, for which
the following two functions (which operate recursively) are helpful:

"codes.default" <-
function(x)
{
    if (is.list(x))
      lapply(x, codes)
    else
      codes(factor(x))
}

"codes.data.frame" <-
function(x)
{
    row.names <- attr(x, "row.names")
    data.frame(codes(as.list(x)), row.names = row.names)
}

#### Hence:

lvl <- ordered(c("L", "H"), c("L", "H"))
llist <- rep(list(lvl), 4)
codes(llist)			# list of codes
expand.grid(llist)		# data frame of factors
codes(expand.grid(llist))	# data frame of codes

The non-list default behaviour is for data frames that mix factors with
other stuff: the usual codes(factor(1:10)) caveat (from the help file) 
still applies, of course!  Note that using codes on an array will produce
a vector as the dim attribute is lost, eg

codes(matrix(1:12, 3, 4))	# shocking!

but although I toyed with the idea of mapping matrices to data frames in
the default function I thought in the end that this was making a
presumption about the interpretation of the rows and columns that was not
justified.  After all, you could still do

codes(as.data.frame(matrix(1:12, 3, 4)))

if the presumption *was* justified.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov  4 11:34:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Nov 1999 12:34:56 +0100
Subject: New codes() methods
In-Reply-To: Jonathan Rougier's message of "Thu, 4 Nov 1999 11:23:44 +0000 (GMT)"
References: <Pine.GSO.3.96.991104110533.16942A-100000@laplace>
Message-ID: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:


> Can I suggest a couple of new `codes' methods.  I know codes is a bit
> dodgy (at least, according to the comments in codes.factor), but for what
> it's worth I like to extract codes from data frames of factors, for which
> the following two functions (which operate recursively) are helpful:
> 
> "codes.default" <-
> function(x)
> {
>     if (is.list(x))
>       lapply(x, codes)
>     else
>       codes(factor(x))
> }
> 
> "codes.data.frame" <-
> function(x)
> {
>     row.names <- attr(x, "row.names")
>     data.frame(codes(as.list(x)), row.names = row.names)
> }

Looks quite nice. Two things have me worried, though:

1) do we really want to convert anything to factors? (try factor(rnorm(10000)))
2) if a dataframe contains a matrix, it gets converted to something
   with incompatible lengths
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Thu Nov  4 11:48:06 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Thu, 4 Nov 1999 11:48:06 +0000 (GMT)
Subject: New codes() methods
In-Reply-To: <x2aeou8p7j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.991104114005.16942B-100000@laplace>

Hi Peter,

On 4 Nov 1999, Peter Dalgaard BSA wrote:

> Looks quite nice. Two things have me worried, though:
> 
> 1) do we really want to convert anything to factors? (try factor(rnorm(10000)))

I agree that this would be undesirable, but not necessarily wrong!

> 2) if a dataframe contains a matrix, it gets converted to something
>    with incompatible lengths

This was part of my motivation for including a matrix case in the default
behaviour, but in the end I thought that the error message might be
justified!  But the alternative would be

    ...
    else if (is.matrix(x))
      apply(t(x), 1, codes)
    else
      codes(factor(x))

but, as I mentioned before, this makes an unwarranted assumption about the
interpretation of the rows and columns of x.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 15:49:21 1999
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 04 Nov 1999 09:49:21 -0600
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 4 Nov 1999 09:20:51 +0100 (MET)"
References: <199911040820.JAA27177@pubhealth.ku.dk>
Message-ID: <qxpr9i6ntoe.fsf@ludwig.stat.wisc.edu>

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
  Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
  Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
  Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

  maechler> Well, the bug is more that of documentation of what is
  maechler> allowed for *.Rd file names.

I do not think that the problem is with the file names here. It occurs
in line 1335 of Rdconvlib.pl (0.90.0 development version). You can get
around it by escaping the spacial characters in $blocks{"name"}.

The following patch does just that.

============================================================
--- Rdconvlib.pl Thu Nov  4 07:45:11 1999
+++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
@@ -1332,7 +1332,7 @@
       print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
        if $debug;
       printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
-       unless /^$blocks{"name"}$/;
+       unless /^\Q$blocks{"name"}$/;
     }
     foreach (@keywords) {
       printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Nov  4 16:50:14 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 4 Nov 1999 17:50:14 +0100 (CET)
Subject: Version numbers of CRAN packages
Message-ID: <14369.47430.288003.211178@galadriel.ci.tuwien.ac.at>

Hi,

For all future submissions to CRAN only the version number in the
DESCRIPTION file is used, i.e., I have changed my scripts to
automatically rename the package accordingly! I hope this ensures some
consistency until I have a more rigorous package checker.

Best,
Fritz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov  4 17:20:46 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 4 Nov 1999 18:20:46 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041720.SAA04538@pubhealth.ku.dk>

>>>>> "Saikat" == Saikat DebRoy <saikat@stat.wisc.edu> writes:

>>>>> "maechler" == maechler  <maechler@stat.math.ethz.ch> writes:
>>>>> "Ray" == Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz> writes:
    Ray> If .../<pkg>/man/ contains a filename beginning with [, such as
    Ray> [.datetimes, Rdconvlib.pl cannot convert that help file into
    Ray> latex at INSTALL time.  [Using --no-latex is a workaround.]

    maechler> Well, the bug is more that of documentation of what is
    maechler> allowed for *.Rd file names.

    Saikat> I do not think that the problem is with the file names here. It
    Saikat> occurs in line 1335 of Rdconvlib.pl (0.90.0 development
    Saikat> version). You can get around it by escaping the spacial
    Saikat> characters in $blocks{"name"}.

I see, sounds plausible.  We don't have  \name{..}s  with funny chars in
them till now (even though we do have \alias{}es).


    Saikat> The following patch does just that.

    Saikat> ============================================================
    Saikat> --- Rdconvlib.pl Thu Nov  4 07:45:11 1999
    Saikat> +++ Rdconvlib.pl Thu Nov  4 09:57:43 1999
    Saikat> @@ -1332,7 +1332,7 @@
    Saikat> print STDERR "rdoc2l: alias='$_', code2l(.)='$c', latex_c_a(.)='$a'\n"
    Saikat> if $debug;
    Saikat> printf latexout "\\alias\{%s\}\{%s\}\n", $a, $blocks{"name"}
    Saikat> -       unless /^$blocks{"name"}$/;
    Saikat> +       unless /^\Q$blocks{"name"}$/;
    Saikat> }
    Saikat> foreach (@keywords) {
    Saikat> printf latexout "\\keyword\{%s\}\{%s\}\n", $_, $blocks{"name"}

Good idea to use Perl's \Q feature,
but my  perl online help says

     \Q		quote regexp metacharacters till \E
					    -------
so, you probably should also add a delimiting \E,  shouldn't you ?

Thanks again, Saikat !

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Nov  4 17:41:18 1999
From: saikat@stat.wisc.edu (saikat@stat.wisc.edu)
Date: Thu, 4 Nov 1999 18:41:18 +0100 (MET)
Subject: bug in Rdconvlib.pl converting to latex (PR#311)
Message-ID: <199911041741.SAA04610@pubhealth.ku.dk>

>>>>> "Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

  Martin> Good idea to use Perl's \Q feature, but my perl online help
  Martin> says

  Martin>      \Q quote regexp metacharacters till \E
  Martin>                                     -------
  Martin> so, you probably should also add a delimiting \E, shouldn't you ?

Yes - you are correct. So that line should be changed to

        unless /^\Q$blocks{"name"}\E$/;

Thanks for spotting that.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Fri Nov  5 18:10:24 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Fri, 5 Nov 1999 19:10:24 +0100 (MET)
Subject: rpart problem (PR#313)
Message-ID: <199911051810.TAA14930@pubhealth.ku.dk>

* * * Just the Facts * * *
call to rpart() with a factor response gives
the error message:

"Error: first argument is array, but not matrix."

* * * Example Code * * * 
==============================================
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(rpart)
> x _ 1:50
> y _ as.factor(rbinom(50,1,.5))
> fit _ rpart(y~x,method="class")
Error: first argument is array, but not matrix.
> 

* * * Version Information * * *
==============================================

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rpart, Autoloads, package:base


* * * Unsolicited Hypothesis * * * 

In rpart(), I believe this line causes the error message:

        temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
nobs/init$counts)

Thanks for your attention.

David


David M. Potter
Mathematical & Statistical Sciences
Pfizer Central Research
PO Box 8003/832
Groton, CT 06340-8003
Tel 860-715-1769 ; Fax 860-715-5445
potterdm@groton.pfizer.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov  5 19:03:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 Nov 1999 19:03:17 +0000 (GMT)
Subject: rpart problem (PR#313)
In-Reply-To: <199911051810.TAA14930@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911051900140.14373-100000@auk.stats>

On Fri, 5 Nov 1999 david_m_potter@groton.pfizer.com wrote:

> * * * Just the Facts * * *
> call to rpart() with a factor response gives
> the error message:
> 
> "Error: first argument is array, but not matrix."

This is an error in diag() for 0.65.1, only. It will be fixed in the next
release. (It was discussed on r-devel a few days ago.)

> In rpart(), I believe this line causes the error message:
> 
>         temp <- rp$dnode[, -(1:3)] %*% diag(init$parms[1:numclass] *
> nobs/init$counts)

Yes. put an as.vector inside the argument to diag, for now, or fix diag to
be

function (x = 1, nrow, ncol = n) 
{
    if (is.matrix(x) && nargs() == 1) {
        if ((m <- min(dim(x))) == 0) 
            return(numeric(0))
        y <- c(x)[1 + 0:(m - 1) * (dim(x)[1] + 1)]
        nms <- dimnames(x)
        if (is.list(nms) && !any(sapply(nms, is.null)) && all((nm <-nms[[1]][1:m]) == 
            nms[[2]][1:m])) 
            names(y) <- nm
        return(y)
    }
    if (is.array(x) && length(dim(x)) != 1) 
#                   ^^^^^^^^^^^^^^^^^^^^^^

        stop("first argument is array, but not matrix.")
    if (missing(x)) 
        n <- nrow
    else if (length(x) == 1 && missing(nrow) && missing(ncol)) {
        n <- as.integer(x)
        x <- 1
    }
    else n <- length(x)
    if (!missing(nrow)) 
        n <- nrow
    p <- ncol
    y <- array(0, c(n, p))
    if ((m <- min(n, p)) > 0) 
        y[1 + 0:(m - 1) * (n + 1)] <- x
    y
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911070615.HAA04998@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
* PR# 295 *
Subject: free heap < 0
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:36:35 -0700 (PDT)
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
* PR# 297 *
Subject: explicit weights=NULL fails in glm,lm
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 25 Oct 1999 10:34:28 -0700 (PDT)
* PR# 298 *
Subject: dodgy list operation
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Tue, 26 Oct 1999 14:46:11 +0100 (BST)
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
* PR# 300 *
Subject: Plotting bug in R
From: Stephen Turner <S.R.E.Turner@statslab.cam.ac.uk>
Date: Wed, 27 Oct 1999 17:31:01 +0100 (GMT)
* PR# 301 *
Subject: expand.grid()
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Thu, 28 Oct 1999 17:23:02 +0100 (BST)
* PR# 302 *
Subject: modreg buggy: uninitialized variable in sinerp.f
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Sat, 30 Oct 99 13:24:14 +0100
* PR# 303 *
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF))
From: ntakebay@bio.indiana.edu
Date: Sun, 31 Oct 1999 01:29:05 +0200 (MET DST)
* PR# 304 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Mon, 1 Nov 1999 12:20:33 +1300 (NZDT)
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
* PR# 306 *
Subject: problem with "[[<-"
From: Saikat DebRoy <saikat@stat.wisc.edu>
Date: 01 Nov 1999 16:11:09 -0600
* PR# 307 *
Subject: bugs in scan()
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 3 Nov 1999 10:05:26 +1300 (NZDT)
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
* PR# 310 *
Subject: Re: discrepancy between PACKAGES file and contents of the contrib
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 3 Nov 1999 07:53:58 +0000 (GMT)
* PR# 311 *
Subject: bug in Rdconvlib.pl converting to latex
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Thu, 4 Nov 1999 11:16:49 +1300 (NZDT)
* PR# 312 *
Subject: R_OpenSiteFile: Do not use a null ptr as filename in fopen
From: Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de>
Date: Thu, 4 Nov 1999 10:08:45 +0100 (MET)
* PR# 313 *
Subject: rpart problem
From: "Potter, David M" <david_m_potter@groton.pfizer.com>
Date: Fri, 5 Nov 1999 13:09:50 -0500 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 11:52:37 1999
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 7 Nov 1999 11:52:37 +0000 (GMT)
Subject: Rdefines.h
In-Reply-To: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>
Message-ID: <Pine.GSO.4.05.9911071143380.5037-100000@toucan.stats>

On Wed, 27 Oct 1999, Berwin Turlach wrote:

> may I request the following two changes to Rdefines.h (R 0.65.1)?
> 
> 1.) Change line 106 from
>         #define Free(p)        R_chk_free( (void *)(p) )
> to
>         #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL
> 
> 2.)  Add after line 79:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> a new line 80:
> #define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> #define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
> 
> The rationale behind both changes is to become more compatible with
> S.h from S-PLUS.  

Following discussions with Berwin I have adopted these (with a few extra
parentheses) for the R-devel version, although (Warning!) we discovered
that Free in S-PLUS 5.1 does not NULL the pointer, although S-PLUS 3.x
and 4.x do.  So truly portable code should not rely on this.

The exact nature of S.h is under re-consideration, as there are
considerable differences between S versions. My inclination is to use the 
best of S3 and S4 and provide definitions of the new macros that can be
used in S3 too, but undoubtedly back-compatibility will rear its head.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Sun Nov  7 16:56:47 1999
From: hammour@msn.com (hammour@msn.com)
Date: Sun, 7 Nov 1999 17:56:47 +0100 (MET)
Subject: arima0() (PR#314)
Message-ID: <199911071656.RAA19948@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: rw0651
OS: windows 95
Submission from: (NULL) (63.23.128.44)


Although I know that "ts package" is preliminary, I wanted to compare the
results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
standard errors of coefficients from R and real figures from SPSS. I changed
"delta" in R to match that used by SPSS, I received results with no NaNs but
different from those from SPSS specially in MA coefficients. They came out
negative numbers while positive from SPSS. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov  7 18:07:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 7 Nov 1999 18:07:47 +0000 (GMT Standard Time)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.9911071753460.316-100000@tern.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but

Can you please submit a full and reproducible example, as the FAQ suggests?

Does SPSS in fact do maximum likelihood estimation?  Last time I looked it
used an approximation. (You do need to be careful: for example S-PLUS's
arima.mle does not do MLE, despite its name.)  One isssue here is that most
packages do not ensure that the returned coefficients are valid for a
stationary invertible process: arima0 (by default) does.

The standard errors are part of the `preliminary' bit: they are waiting for
a better optimizer.  The `0' on arima0 indicates that it is intended to be
replaced fairly soon.

> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

That is a matter of definition. The signs of each of the AR and MA
coefficients are often swapped, so I would not be at all surprised that
SPSS is different. R is intended to be consistent with S-PLUS (as
documented in Venables & Ripley, at least).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov  8 07:51:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Nov 1999 07:51:47 +0000 (GMT)
Subject: [R] loading precedence in requires()
In-Reply-To: <199911080033.NAA23172@aqua.mcs.vuw.ac.nz>
Message-ID: <Pine.GSO.4.05.9911080727320.7214-100000@auk.stats>

[ Moved to R-devel as it is a think this is a development issue. ]

On Mon, 8 Nov 1999, Ray Brownrigg wrote:

> It appears that requires(), when it appears in the .First.lib of a
> package, will load the required package *after* the package requiring
> it, i.e. the 'required' package appears earlier in the search list than
> the package requiring it.
> 
> This will cause problems if a package (deliberately) masks any of the
> functions in the required package. I.e. the expected masking does not
> occur.
> 
> Apart from expecting the end-user to issue a library() call for the
> required package before the requiring package, are there any
> workarounds for this, or is such deliberate masking considered to be a
> no-no?

At present in R (unlike S) packages are effectively thought of as equal,
and searched in inverse order of loading. Unlike S, library (and hence
require) has no way to set the position in the ordering, nor can a library
`database' be re-attached in a different place in the order by attach().
(The latter is a common trick in .First.lib in S.)

I have two ideas for now:

(a) Write a package foo containing just a .First.lib with

require(bar)
require(foo2)

and put the real code in foo2.

(b) in the .First.lib for package foo, use something like

.First.lib <- function (...) 
{
    s <- search()
    require(bar)
    if (length(search()) > length(s)) {
        detach("package:foo")
        library(foo)
    }
}

In general such masking (presumably of a system library or why not enhance
bar?) is confusing and leads to support difficulties. It is a headache for
S-PLUS where Harrell's Design and Hmisc mask many system functions, and one
gets used to asking: "are you using Design or Hmisc?" if there are reports
of strange behaviour in one's own code.  My view has become `only mask if
you wish to correct something, and try to ge the original changed'.

However, question to R-devel: should we add to library and require
argument(s) to say where they should go in the search list?  S3 has
first=T (and defaults to last), and S-PLUS 5 has both first=T and pos
(which can be a number or database, and the library is inserted just before
the one specified, and always before main).  The most flexible scheme might
be to have both before= and after= for names or numbers.

Ross is planning changes in this area that may make the re-attach idea
feasible in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov  9 08:11:17 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Nov 1999 08:11:17 +0000 (GMT)
Subject: arima0() (PR#314)
In-Reply-To: <199911071656.RAA19948@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911090759220.26939-100000@auk.stats>

On Sun, 7 Nov 1999 hammour@msn.com wrote:

> Full_Name: Ahmad Abu Hammour
> Version: rw0651
> OS: windows 95
> Submission from: (NULL) (63.23.128.44)
> 
> 
> Although I know that "ts package" is preliminary, I wanted to compare the
> results from R and SPSS. I ran ARIMA(2,1,2) in both softwares. I got NaN in
> standard errors of coefficients from R and real figures from SPSS. I changed
> "delta" in R to match that used by SPSS, I received results with no NaNs but
> different from those from SPSS specially in MA coefficients. They came out
> negative numbers while positive from SPSS. 

Mr Hammour sent me the data privately. Running

arima0(y0, order=c(2,1,2), delta=-1)

I get

Call:
arima0(x = y0, order = c(2, 1, 2), delta = -1)

Coefficients:
    ar1      ar2      ma1      ma2  
-0.7686   0.1519  -0.1143  -0.8857  

Approx standard errors:
   ar1     ar2     ma1     ma2  
0.1917  0.0912  0.1765  0.1762  

sigma^2 estimated as 109859:  log likelihood = -890.65,  aic = 1789.3

[Using the default delta of 0.01 in this case gives inaccurate results:
but it is a very badly determined model.]

SPSS had

Number of residuals  123
Standard error       337.30778
Log likelihood       -890.6952
AIC                  1789.3904
SBC                  1800.6391

           Variables in the Model:

                B         SEB      T-RATIO   APPROX. PROB.

AR1    -.78319350   .16013797   -4.8907421       .00000318
AR2     .16191191   .09435030    1.7160719       .08875107
MA1     .07993592   .54769107     .1459508       .88420721
MA2     .91762463   .49337224    1.8599032       .06536851


>Warning # 16567.  Command name: ARIMA
>Our tests have determined that the estimated model lies close to the
>boundary of the invertibility region.  Although the moving average
>parameters are probably correctly estimated, their standard errors and
>covariances should be considered suspect.

So (up to the MA sign change, a matter of definition) the estimates
differ by 1 se or so. However, SPSS has given a warning, and the
log-likelihoods are similar but R's is larger. This suggests that

- There is no practical difference between the results, and

- R's optimizer has done a better job.

- R works on transformed scale and so has more chance of getting se's
  close to the boundary (but the error distribution will be very far from
  normal).

- This is not a good model for the data.

If there is a bug at all here, it would appear to be in SPSS.

Moral: take warnings seriously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Nov 10 01:32:54 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 10 Nov 1999 02:32:54 +0100 (MET)
Subject: R.bug.report (PR#315)
Message-ID: <199911100132.CAA14250@pubhealth.ku.dk>

Again I would like to express my deepest appreciation to all those
working so selflessly on the development of R for us all to use it 
freely (and it is such a joy to use!)

Rashid Nassar


== Possible bug:

1.
boxplot()
This is an old behavior that I had reported before, but as it is still
there, it may not ba a bug (although it looks like one to me).  "qfcut"
is numeric, "st" is a factor:

> plot(qfcut~st)      # works
> plot(st,qfcut)      #	works
> boxplot(qfcut~st)   # works
> boxplot(st,qfcut)   # doesn't work
Error: "range" not meaningful for factors

== The following are minor typos, etc. in help screens, <<error>> [[suggested]]:

2.
?boxplot.default
   names: group labels which <<while>> [[will]] be printed under each 
               boxplot.

3.                              
?par
   adj: The value of `adj' determines the way in which
             text strings are justified.  A value of `0' pro-
             duces <<right>> left-justified text, ...

4.    
?abline
 (end of 1st paragraph of Description):
        .... through the origin, otherwise, the first 2 val-
        ues are taken to be the <<slope and intercept>> [[intercept and
        slope]]. (since the first parameter is interpreted as the intercept).

== The following are suggestions offered with a great deal of
   (appropriate) diffidence:

5.    
?tapply (also perhaps ?lapply, ?sapply, ?apply)
   I think it would be useful to add `aggregate' to the "See Also:" list.
   Without V&R I would not have known about aggregate.

6.
?persp
  d: a value which can be used to vary the strength of
             the perspective transformation.  Values of `d'
             greater than 1 will lessen the perspective effect
             and values less and 1 will exaggerate it.
  
     I think it may be useful if the value of d  for no perspective 
             effect is also given (looks to be d=10?)

7.
It is great that `boxplot' has a data=  parameter; can `plot' (as in
`plot.default') have one too?  (no answer needed-- I know if not, there 
is a good reason for it :)


Thanks again.  -Rashid

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, qfc, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 10:01:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 11:01:04 +0100
Subject: R.bug.report (PR#315)
In-Reply-To: rnassar@duke.edu's message of "Wed, 10 Nov 1999 02:32:54 +0100 (MET)"
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <x2wvrq64yn.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> == Possible bug:
> 
> 1.
...> 
> 2.
...
> 3.                              
...> 
> 4.    
...
> 7.
> 

Rashid, thank you for your contributions, but this kind of report is
impossible to process in a rational way. There is no single category
into which it fits (although I've put a "TooMuchAtOnce" category in
the repository), the subject field gives no clue to the character of
the bug, and every time one pulls it out, one has to recheck every
item to see whether it has been fixed or not, and it will live in the
repository as long as there are remaining issues . Could you please
resubmit as several independent reports?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 10:41:30 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 11:41:30 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101041.LAA18434@pubhealth.ku.dk>

R 0.65.1 (and R-devel 09/11/99)

> z <- data.frame(a=1:3)
> b <- rep(NA, 3)
> mode(b)
[1] "logical"
# how many of you expected that? I had forgotten!
> zz <- cbind(z, b)
> zz
  a  b
1 1 NA
2 2 NA
3 3 NA
> class(zz$b)
[1] "factor"

whereas in S it is NULL and zz$b is of mode "numeric".

The same thing happens with data.frame

zz <- data.frame(a, b)

gives zz$b as a factor in R and numeric in S.

I don't think this is a desirable difference, at least with all NAs!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 11:14:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 12:14:33 +0100
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 10 Nov 1999 11:41:30 +0100 (MET)"
References: <199911101041.LAA18434@pubhealth.ku.dk>
Message-ID: <x2n1sm61k6.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> R 0.65.1 (and R-devel 09/11/99)
> 
> > z <- data.frame(a=1:3)
> > b <- rep(NA, 3)
> > mode(b)
> [1] "logical"
> # how many of you expected that? I had forgotten!
> > zz <- cbind(z, b)
> > zz
>   a  b
> 1 1 NA
> 2 2 NA
> 3 3 NA
> > class(zz$b)
> [1] "factor"
> 
> whereas in S it is NULL and zz$b is of mode "numeric".
> 
> The same thing happens with data.frame
> 
> zz <- data.frame(a, b)
> 
> gives zz$b as a factor in R and numeric in S.
> 
> I don't think this is a desirable difference, at least with all NAs!

Hmmm. Notice that in *both* R and S3,

> class(data.frame(x=TRUE)$x)
[1] "factor"

And in both dialects, NA is a logical constant. So S3 is doing a
special exception for all-NA logical vectors. Of course, we could just
clone that...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Nov 10 11:59:43 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Nov 1999 12:59:43 +0100 (MET)
Subject: data.frame, cbind is inconsistent with S on logicals (PR#316)
Message-ID: <199911101159.MAA19623@pubhealth.ku.dk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 10 Nov 1999 12:14:33 +0100
> 
> ripley@stats.ox.ac.uk writes:
> 
> > R 0.65.1 (and R-devel 09/11/99)
> > 
> > > z <- data.frame(a=1:3)
> > > b <- rep(NA, 3)
> > > mode(b)
> > [1] "logical"
> > # how many of you expected that? I had forgotten!
> > > zz <- cbind(z, b)
> > > zz
> >   a  b
> > 1 1 NA
> > 2 2 NA
> > 3 3 NA
> > > class(zz$b)
> > [1] "factor"
> > 
> > whereas in S it is NULL and zz$b is of mode "numeric".
> > 
> > The same thing happens with data.frame
> > 
> > zz <- data.frame(a, b)
> > 
> > gives zz$b as a factor in R and numeric in S.
> > 
> > I don't think this is a desirable difference, at least with all NAs!
> 
> Hmmm. Notice that in *both* R and S3,
> 
> > class(data.frame(x=TRUE)$x)
> [1] "factor"
> 
> And in both dialects, NA is a logical constant. So S3 is doing a
> special exception for all-NA logical vectors. Of course, we could just
> clone that...

It isn't: I was using the S4-style data frame code in my copy of
S-PLUS 3.4 (it is needed for some recent extensions) and had not
noticed.  And S4 keeps these logical, which seems much more desirable
to me.  In both R and S it is a quirk that

z$b <- b

and 

z <- cbind(z, b)

are different, but not in S4 nor in S3+library(df)

I withdraw this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 13:19:26 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 10 Nov 1999 14:19:26 +0100 (MET)
Subject: plot() bugs (PR#317)
Message-ID: <199911101319.OAA21606@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 65.1
OS: Linux Redhat 6.1
Submission from: (NULL) (193.62.250.209)


Try this:

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))

spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10

plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed
difference$
points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

Bugs:
1. The y-axis numbering labels are shifted down and are not centred on the
hash-marks.
BTW, weren't the labels in normal (nonrotated) orientation before this version?
I didn't have to use las before

2. This is an old bug: only the first plotted sysmbol has the correct size.
(Squares
in this example). The others are not scaled up as cex should make them.

These comments are based on inspection of the .ps form of the plot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Nov 10 14:53:17 1999
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Wed, 10 Nov 1999 14:53:17 +0000 (GMT)
Subject: plot() bugs (PR#317)
In-Reply-To: <199911101319.OAA21606@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>



On Wed, 10 Nov 1999 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 65.1
> OS: Linux Redhat 6.1
> Submission from: (NULL) (193.62.250.209)
> 
The code got a bit mangled when pasting into web page

#default plot symbols and lettering are too small, need to scale up
par(cex=2,mex=.7)
par(mar=c(5,5,1,1))
 
spdiff<-c(1,2,3,4,5)
dpdet<-c(1,2,3,4,5)/10
dpsp<-c(2,3,4,5,6)/10
dpdir<-c(2,4,6,8,10)/10
 
plot(spdiff,dpdet,pch=15,ylim=c(0,max(dpdet,dpsp,dpdir)),xlab="Speed difference (deg/s)",ylab="d'", las=1)

points(spdiff,dpdir,pch=16)
points(spdiff,dpsp,pch=17)

I have since tried mkh, but it seems to have no effect.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Nov 10 13:58:36 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Nov 1999 14:58:36 +0100 (MET)
Subject: R.bug.report (PR#315)
In-Reply-To: <199911100132.CAA14250@pubhealth.ku.dk>
References: <199911100132.CAA14250@pubhealth.ku.dk>
Message-ID: <14377.31244.674152.34117@gargle.gargle.HOWL>

>>>>> On Wed, 10 Nov 1999 02:32:54 +0100 (MET), rnassar@duke.edu (Rashid
>>>>> Nassar) said:

    RNa> Again I would like to express my deepest appreciation to all those
    RNa> working so selflessly on the development of R for us all to use it 
    RNa> freely (and it is such a joy to use!)

    RNa> Rashid Nassar

    RNa> == Possible bug:

    RNa> 1.
    RNa> boxplot()
    RNa> This is an old behavior that I had reported before, but as it is still
    RNa> there, it may not ba a bug (although it looks like one to me).  "qfcut"
    RNa> is numeric, "st" is a factor:

    >> plot(qfcut~st)      # works
    >> plot(st,qfcut)      #	works
okay that was plot  which has  TWO arguments if not used with a formula

    >> boxplot(qfcut~st)   # works
    >> boxplot(st,qfcut)   # doesn't work
    RNa> Error: "range" not meaningful for factors

This is not a bug.
boxplot() either has a formula or "x, ..." arguments
which must be `single boxplot' components  (read  "?boxplot.default").


    RNa> == The following are minor typos, etc. in help screens, <<error>> [[suggested]]:


    RNa> 2.
    RNa> ?boxplot.default
    RNa> names: group labels which <<while>> [[will]] be printed under each 
    RNa> boxplot.
ok, done.

    RNa> 3.                              
    RNa> ?par
    RNa> adj: The value of `adj' determines the way in which
    RNa> text strings are justified.  A value of `0' pro-
    RNa> duces <<right>> left-justified text, ...
ok, done.

    RNa> 4.    
    RNa> ?abline
    RNa> (end of 1st paragraph of Description):
    RNa> .... through the origin, otherwise, the first 2 val-
    RNa> ues are taken to be the <<slope and intercept>> [[intercept and
    RNa> slope]]. (since the first parameter is interpreted as the intercept).
ok, done.

    RNa> == The following are suggestions offered with a great deal of
    RNa> (appropriate) diffidence:

    RNa> 5.    
    RNa> ?tapply (also perhaps ?lapply, ?sapply, ?apply)
    RNa> I think it would be useful to add `aggregate' to the "See Also:" list.
    RNa> Without V&R I would not have known about aggregate.
ok, done. [tapply and apply]

    RNa> 6.
    RNa> ?persp
    RNa> d: a value which can be used to vary the strength of
    RNa> the perspective transformation.  Values of `d'
    RNa> greater than 1 will lessen the perspective effect
    RNa> and values less and 1 will exaggerate it.
  
    RNa> I think it may be useful if the value of d  for no perspective 
    RNa> effect is also given (looks to be d=10?)

(this should be discussed on R-help;  there's more to it,..
 I don't see through that myself.
 It certainly would be useful if the documentation was enlarged here.

 Want to study the source: src/main/persp3d.c

    RNa> 7.
    RNa> It is great that `boxplot' has a data=  parameter; can `plot' (as in
    RNa> `plot.default') have one too?  (no answer needed-- I know if not, there 
    RNa> is a good reason for it :)

boxplot doesn't.  
It's  boxplot.formula(.) which *has* a data argument;
and so does  plot.formula() !

Thank you for your feedback, Rashid.
and yes (as Peter said), please, next time try to put things like these in
about 2 or 3 parts.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 10 14:12:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Nov 1999 15:12:15 +0100
Subject: plot() bugs (PR#317)
In-Reply-To: Bill Simpson's message of "Wed, 10 Nov 1999 14:53:17 +0000 (GMT)"
References: <Pine.LNX.4.10.9911101450230.5124-100000@localhost.localdomain>
Message-ID: <x2emdy5tc0.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi@gcal.ac.uk> writes:


> #default plot symbols and lettering are too small, need to scale up

Wait for 0.90.0 (in a couple of weeks) or try a snapshot of it and
then complain that they are now too large....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Nov 10 14:48:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Nov 1999 09:48:14 -0500
Subject: finding Rd syntax errors
Message-ID: <382985AE.C3FD1C22@bank-banque-canada.ca>

I seem to recall mention of some argument to R INSTALL which makes it
pass along more information about syntax errors in Rd files, but I can't
find the message or any mention of this feature in the help. Could
someone please remind me, or am I dreaming? (If this truely is possible
perhaps it should be documented under INSTALL.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 00:48:49 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 01:48:49 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911110048.BAA27356@pubhealth.ku.dk>


<<insert bug report here>>

> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
Error: length of dimnames must match that of dims
> 

Changing:

dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

To:

dimnames = if (length(dn)==0) NULL else 
	   if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

seems to fix this.

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Thu Nov 11 02:40:37 1999
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Thu, 11 Nov 1999 03:40:37 +0100 (MET)
Subject: expand.grid returns vector for single arg (PR#319)
Message-ID: <199911110240.DAA27576@pubhealth.ku.dk>


<<insert bug report here>>

IMHO,

expand.grid(1:3)

should return an object of class "data.frame".

Instead I get 

> class(expand.grid(1:3))
NULL

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:Rbqtl, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Thu Nov 11 03:56:34 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Thu, 11 Nov 1999 04:56:34 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911110356.EAA27675@pubhealth.ku.dk>


Hi, all.

The help file for tapply says that if simplify is true, and the result of
the calculation is always a scalar, then tapply will return a vector.

Nonetheless:

> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
> is.vector(t1)  
[1] FALSE 
> is.array(t1) 
[1] TRUE
> 

I have found this in version 0.65.1 on an SGI running Irix 6.5, and on a
Mac running Linux-PPC.  I've also seen it on an Intel machine running
RedHat 6.0.

I noticed this because some results that I expected to be vectors couldn't
be combined into a data frame (Error: can't coerce array into a
data.frame).

It seems that the check and conversion simply never happens.  One way to
fix this is to simply add these few lines to the end of the function (just
before the value "ansmat" is returned: 

  if(length(dim(ansmat)) == 1){
    dim(ansmat) <- NULL
    names(ansmat) <- namelist[[1]]
  }

I wouldn't be surprised to find that there's a more elegant way to do
this.  Perhaps ansmat[index] should be returned instead of ansmat?  But I
haven't tested this extensively, so I don't know whether it might break
something else.

Hope this report helps.

Thanks for the terrific software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Thu Nov 11 06:57:58 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Thu, 11 Nov 1999 17:57:58 +1100 (EST)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911110657.RAA18539@leonard.anu.edu.au>

I've just installed Mandrake Linux, then compiled R-0.65.1 .
Whether because I omitted some necessary items when I selected
software for installion, or because they anyway needed to be
loaded afterwards, I found it necessary to load the following
packages in order to compile R-0.65.1
  pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
  XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

In addition I had the problem which Jack Fenner (jnf@pcisys.net;
6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
I used his solution, i.e. after running ./configure
edit the src/main/Makefile

Two lines down from
$(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
is a line that starts $(LDCMD)
Add -L /usr/X11R6/lib before $(DLLFLAGS)
and -lX11 at the end of the line (which was line 122 in my Makefile).
(NB minus ell X eleven)

After that, make and make install ran just fine.



John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:14:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:14:39 +0000 (GMT)
Subject: expand.grid returns vector for single arg (PR#319)
In-Reply-To: <199911110240.DAA27576@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911110711130.21442-100000@auk.stats>

On Thu, 11 Nov 1999 cberry@tajo.ucsd.edu wrote:

> IMHO,
> 
> expand.grid(1:3)
> 
> should return an object of class "data.frame".

[using 0.65.1 it returns its argument if there is just one]

It will in 0.90.0: this has already been altered:

BUG FIXES

...

    o   expand.grid returns a data frame even for one arg


I am not sure that is what I think it should do (no expanding goes on)
but it is what the documentation says and the prototype does.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Nov 11 07:35:16 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Nov 1999 07:35:16 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <Pine.GSO.4.05.9911110726330.21442-100000@auk.stats>

On Thu, 11 Nov 1999, John Maindonald wrote:

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

The RedHat equivalent needs their equivalents (but is it not XFree88...?),
so this is not at all surprising.

> In addition I had the problem which Jack Fenner (jnf@pcisys.net;
> 6 Sep 1999 message) noted for installation under Caldera Linux 2.2,
> i. e. /usr/X11R6/lib/libX11.so.6.1 was not getting linked.
> I used his solution, i.e. after running ./configure
> edit the src/main/Makefile
> 
> Two lines down from
> $(top_builddir)/bin/R.X11: $(OBJECTS) $(RLIBS)
> is a line that starts $(LDCMD)
> Add -L /usr/X11R6/lib before $(DLLFLAGS)
> and -lX11 at the end of the line (which was line 122 in my Makefile).
> (NB minus ell X eleven)

I find it much easier to do this using LIBS in config.site (but you can use
the command line or ~/.Rconf ...).  Something like

LIBS="-L /usr/X11R6/lib -lX11"

should do this for you.  I wonder though whether you need to re-configure
after adding the rpms, and to remove config.cache before doing so?  I
would really have expected configure to find out how to use X libraries,
but only if the relevant devel package was already installed. 

Since you will need to do this again for each release, it might be
worth trying these:

rm config.cache
./configure
[try make, if that fails]
rm config.cache
LIBS="-L /usr/X11R6/lib -lX11" ./configure [Bash syntax]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:26:11 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:26:11 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111026.LAA01320@pubhealth.ku.dk>

Thanks a lot, Chuck!

>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

yes.
I've committed the patch as follows
(starting at line 59 in  src/library/base/R/apply.R) :

     if(len.a > 0 && len.a %% d2 == 0)
 	return(array(ans, c(len.a %/% d2, d.ans),
-		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
-		     else c(list(ans.names), dn.ans)))
+		     dimnames = if(length(dn)) {
+                         if(is.null(dn.ans)) list(ans.names,NULL)
+                         else c(list(ans.names), dn.ans)}))
     return(ans)


Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 10:54:10 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 11:54:10 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111054.LAA01914@pubhealth.ku.dk>

>>>>> "MatW" == Matthew Wiener <mcw@ln.nimh.nih.gov> writes:

    MatW> The help file for tapply says that if simplify is true, and the
    MatW> result of the calculation is always a scalar, then tapply will
    MatW> return a vector.

    MatW> Nonetheless:

    >> t1 <- tapply(runif(10), rep(1:5, 2), mean)  
    >> is.vector(t1)  
    R> [1] FALSE 
    >> is.array(t1) 
    R> [1] TRUE

    <....> 

all correct.

The question really is if the bug is in the code or the documentation.

Here you get a 1D array, something quite rare (but appearing more and more
in recent discussions...).

One could argue that the current behavior of tapply() to always return an
array if simplify = TRUE  is more consistent, than what the doc says should
happen (coercing 1D arrays to vectors).
Otoh, the protoype  *does* return a vector in this case,
and 1D arrays can be a pain... in other places.

I'm pro fixing this.
and I'll do if I don't hear protests..


    MatW>   <....>

    MatW> Hope this report helps.

yes indeed, thank you!
R's quality is growing partly because of such fine bug reports!

    MatW> Thanks for the terrific software.

you're welcome!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 11 11:46:35 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Nov 1999 12:46:35 +0100
Subject: tapply not simplifying to vector? (PR#320)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 11 Nov 1999 11:54:10 +0100 (MET)"
References: <199911111054.LAA01914@pubhealth.ku.dk>
Message-ID: <x266z92quc.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I'm pro fixing this.
> and I'll do if I don't hear protests..

Protest!...

> tapply(Ozone,list(Month=Month),mean,na.rm=T)
Month
      May      June      July    August September 
 23.61538  29.44444  59.11538  59.96154  31.44828 

Notice the "Month" in the output.

> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

Notice that the Month is the tag name of the single component of the
dimnames vector, it will disappear if you try coercing it to a vector.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 15:49:08 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 16:49:08 +0100 (MET)
Subject: tapply not simplifying to vector? (PR#320)
Message-ID: <199911111549.QAA07201@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I'm pro fixing this.
    >> and I'll do if I don't hear protests..

    PD> Protest!...

    >> tapply(Ozone,list(Month=Month),mean,na.rm=T)
    PD> Month
    PD> May      June      July    August September 
    PD> 23.61538  29.44444  59.11538  59.96154  31.44828 

    PD> Notice the "Month" in the output.

    >> dput(tapply(Ozone,list(Month=Month),mean,na.rm=T))
    PD> structure(c(23.6153846153846, 29.4444444444444, 59.1153846153846, 
    PD> 59.9615384615385, 31.4482758620690), .Dim = 5, .Dimnames = structure(list(
    PD> Month = c("May", "June", "July", "August", "September")), .Names = "Month"))

    PD> Notice that the Month is the tag name of the single component of the
    PD> dimnames vector, it will disappear if you try coercing it to a vector.

Completely agree with your argument.
 --> I'll change the documentation

Kurt: Another (R<->S) difference for the FAQ.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 11 16:55:56 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 11 Nov 1999 17:55:56 +0100 (MET)
Subject: dimname'less array breaks apply (PR#318)
Message-ID: <199911111655.RAA07580@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Thanks a lot, Chuck!
>>>>> "ChuckB" == Charles C Berry <cberry@tajo.ucsd.edu> writes:

    >>> apply(array(1:20,c(2,2,5)),2:3,function(x) x)
    ChuckB> Error: length of dimnames must match that of dims


    ChuckB> Changing:

    ChuckB> dimnames = if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> To:

    ChuckB> dimnames = if (length(dn)==0) NULL else 
    ChuckB> if (is.null(dn.ans)) list(ans.names, NULL) else c(list(ans.names), dn.ans)

    ChuckB> seems to fix this.

    MM> yes.
    MM> I've committed the patch as follows
    MM> (starting at line 59 in  src/library/base/R/apply.R) :

    MM> if(len.a > 0 && len.a %% d2 == 0)
    MM> return(array(ans, c(len.a %/% d2, d.ans),
    MM> -		     dimnames = if(is.null(dn.ans)) list(ans.names,NULL)
    MM> -		     else c(list(ans.names), dn.ans)))
    MM> +		     dimnames = if(length(dn)) {
    MM> +                         if(is.null(dn.ans)) list(ans.names,NULL)
    MM> +                         else c(list(ans.names), dn.ans)}))
    MM> return(ans)

which is unfortunately wrong (thank, PD!). 
A more correct patch has src/library/base/R/apply.R ending with

    if(len.a > 0 && len.a %% d2 == 0)
	return(array(ans, c(len.a %/% d2, d.ans),
                     if(is.null(dn.ans)) {
                         if(!is.null(ans.names)) list(ans.names,NULL)
                     } else c(list(ans.names), dn.ans)))
    return(ans)
}

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 14:38:51 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 09:38:51 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au>
Message-ID: <382C267B.A7116CC8@bank-banque-canada.ca>

> I've just installed Mandrake Linux, then compiled R-0.65.1 .
> Whether because I omitted some necessary items when I selected
> software for installion, or because they anyway needed to be
> loaded afterwards, I found it necessary to load the following
> packages in order to compile R-0.65.1
>   pgcc-g77-1.1.3-3mdk.i586.rpm        (Fortran g77 compiler)
>   XFree66-devel-3.3.5-3mdk.i586.rpm   (X.h etc header files)

My experience with Mandrake was that if you install "everything" then R 0.65.1
compiles without problem. (It does not automatically recognize gnome, but I
don't think it is suppose to and I'm not sure what that adds.) If you only
install selected components from the Mandrake checklist, like C development and
everything else you think you might need, then you don't get fortran and some
other things you need.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 14:55:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 15:55:34 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Paul Gilbert's message of "Fri, 12 Nov 1999 09:38:51 -0500"
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca>
Message-ID: <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My experience with Mandrake was that if you install "everything" then R 0.65.1
> compiles without problem. (It does not automatically recognize gnome, but I
> don't think it is suppose to and I'm not sure what that adds.) 

It's not supposed to unless you configure --with-gnome, which does
work on RH6.1, so why not on Mandrake.

Currently that adds a couple of cute buttons and umpteen new bugs....
It's still experimental, and some of the crucial experiments are not
in yet, but Lyndon Drake says he's going to try some CORBA integration
with Gnumeric soon, which to my mind is where the really interesting
stuff begins.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 15:06:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 10:06:38 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121508.QAA09070@stat.math.ethz.ch>


>  Currently that adds a couple of cute buttons and umpteen new bugs....
>  It's still experimental, and some of the crucial experiments are not
>  in yet, but Lyndon Drake says he's going to try some CORBA integration
>  with Gnumeric soon, which to my mind is where the really interesting
>  stuff begins.
> -- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

Well, the CORBA integration with Gnumeric does not require the GNOME
material in R.  The dynamic CORBA material is sitting on
www.omegahat.org waiting for people to use it.

D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Nov 12 15:12:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Nov 1999 10:12:25 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
References: <199911110657.RAA18539@leonard.anu.edu.au> <382C267B.A7116CC8@bank-banque-canada.ca> <x2ln83rc7t.fsf@blueberry.kubism.ku.dk>
Message-ID: <382C2E59.B9D83AEA@bank-banque-canada.ca>

>It's not supposed to unless you configure --with-gnome, which does
>work on RH6.1, so why not on Mandrake.

I expect it works with Mandrake, I didn't try. At first I was a little surprized
by configure's message, something like  "Gnome: no". I thought configure
couldn't recognize that I was running Gnome, but after quickly scanning
configure I decided it had to be specified. Perhaps a message like "not
specified" would be less confusing than "no" for things like this?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Nov 12 15:27:31 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 12 Nov 1999 15:27:31 +0000 (GMT)
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121527.PAA12731@toucan.stats.ox.ac.uk>


> Date: Fri, 12 Nov 1999 10:12:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
[Quoting PD]

> >It's not supposed to unless you configure --with-gnome, which does
> >work on RH6.1, so why not on Mandrake.
> 
> I expect it works with Mandrake, I didn't try. At first I was a little 
surprized
> by configure's message, something like  "Gnome: no". I thought configure
> couldn't recognize that I was running Gnome, but after quickly scanning
> configure I decided it had to be specified. Perhaps a message like "not
> specified" would be less confusing than "no" for things like this?

I would suggest that the Gnome message does not appear at all unless
--with-gnome is specified (if at all).  After all, there are lots of
other things we do not put there (perl, blas, hdf5, readline, ...)
that concern many more users.

How to install Gnome support is in the INSTALL file. I have found it
very tricky, as both too early and too late versions of the support
files failed. Last time I tried libglade 0.7 (the then current one) did
not work, but 0.3 still does despite the remark in that file about
needing `libglade 0.5 or later'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 16:04:22 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 08:04:22 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 10:06:38 -0500"
References: <199911121508.QAA09070@stat.math.ethz.ch>
Message-ID: <87g0ybvgqh.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> Well, the CORBA integration with Gnumeric does not require
    DTL> the GNOME material in R.  The dynamic CORBA material is
    DTL> sitting on www.omegahat.org waiting for people to use it.

Sure, but they are two slightly different things.  R/GNOME/CORBA is
more for standard desktop integration, a bit away from the user; GNOME
is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
need some work, but theoretically will be quite interesting for
user-land stuff. 

(ob-reason for posting to R-devel:
	Has anyone ever seen the error message:
	"Abort."
	with R?  Thomas hadn't either, and suggested running under
	gdb, which I hope to, late this afternoon -- it's occuring
	during a library call, in particular, the R/OMEGAHAT/CORBA
	package, Duncan :-(...). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 12 16:39:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Nov 1999 17:39:00 +0100
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: rossini@biostat.washington.edu's message of "12 Nov 1999 08:04:22 -0800"
References: <199911121508.QAA09070@stat.math.ethz.ch> <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <x2aeojr7ff.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

> (ob-reason for posting to R-devel:
> 	Has anyone ever seen the error message:
> 	"Abort."
> 	with R?  Thomas hadn't either, and suggested running under
> 	gdb, which I hope to, late this afternoon -- it's occuring
> 	during a library call, in particular, the R/OMEGAHAT/CORBA
> 	package, Duncan :-(...). 

I think that happens when the program calls abort(), which seems to
happen (potentially) two times in memory.c and thrice in saveload.c.
For the Windows version, there are three cases in regex.c.

Both cases in memory.c happen if one bumps into an object with an
invalid typeof field during garbage collection. The ones in saveload.c
all seem to be in the HDF5 code (where it would seem to be a bit of an
overkill!). The ones in regex seem to be related to inconsistencies in
the compiled regexp code. My guess would be that there's a memory
corruption going on, triggering one of the traps in memory.c.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Fri Nov 12 16:48:01 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Nov 1999 11:48:01 -0500
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
Message-ID: <199911121649.RAA12920@stat.math.ethz.ch>


> Cc: Duncan Temple Lang <duncan@rice.research.bell-labs.com>,
>         R-devel@stat.math.ethz.ch
> 
> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> > (ob-reason for posting to R-devel:
> > 	Has anyone ever seen the error message:
> > 	"Abort."
> > 	with R?  Thomas hadn't either, and suggested running under
> > 	gdb, which I hope to, late this afternoon -- it's occuring
> > 	during a library call, in particular, the R/OMEGAHAT/CORBA
> > 	package, Duncan :-(...). 
> 
> I think that happens when the program calls abort(), which seems to
> happen (potentially) two times in memory.c and thrice in saveload.c.
> For the Windows version, there are three cases in regex.c.
> 
> Both cases in memory.c happen if one bumps into an object with an
> invalid typeof field during garbage collection. The ones in saveload.c
> all seem to be in the HDF5 code (where it would seem to be a bit of an
> overkill!). The ones in regex seem to be related to inconsistencies in
> the compiled regexp code. My guess would be that there's a memory
> corruption going on, triggering one of the traps in memory.c.
> 

It is going to be tricky to diagnose an abort() call without the
actual R command that caused it. My guess would be that there is an
exception being thrown in the Orbacus libraries and that is
propogating its way to abort.


Tony.
>> Sure, but they are two slightly different things.  R/GNOME/CORBA is
>> more for standard desktop integration, a bit away from the user; GNOME
>> is pretty useful/stable these days.  R/OMEGAHAT/CORBA still seems to
>> need some work, but theoretically will be quite interesting for
>> user-land stuff. 

Well the code for integrating R with Gnumeric is not "stable" either.
In fact I am not sure how much, if any, exists at this point. So
comparing the stability Gnome and the R/CORBA mechanism is
irrelevant. Even if there was that connection at the C level, more
would be needed to actual map data from R to CORBA and vice-versa.
This is what the dynamic CORBA facility in R does via "remote references".

Additionally, the R-S/CORBA interfaces are pretty solid here. A few
bug reports to omega-remote@omegahat.org (with perhaps a little more
information than above ;-)) will probably get them fixed pretty
rapidly.






> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Nov 12 17:04:11 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 12 Nov 1999 09:04:11 -0800
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: Duncan Temple Lang's message of "Fri, 12 Nov 1999 11:48:01 -0500"
References: <199911121650.IAA17314@mail.biostat.washington.edu>
Message-ID: <87wvrny73o.fsf@alpha.cfas.washington.edu>


>>>>> "DTL" == Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:


    DTL> It is going to be tricky to diagnose an abort() call without
    DTL> the actual R command that caused it. My guess would be that
    DTL> there is an exception being thrown in the Orbacus libraries
    DTL> and that is propogating its way to abort.

I think you are right (i.e. that it's in the orbacus stuff).

It happened with the first 5 R-CORBA calls I tried, sigh... (I can't
recall exactly this morning, but follow the manual for a few minutes,
and modulo changing some names to localize, they all Aborted.

More this afternoon...  (I can't send a bug report without a
traceback!)

    DTL> Additionally, the R-S/CORBA interfaces are pretty solid
    DTL> here. A few bug reports to omega-remote@omegahat.org (with
    DTL> perhaps a little more information than above ;-)) will
    DTL> probably get them fixed pretty rapidly.

Sounds good...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Nov 13 12:53:20 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 13 Nov 1999 12:53:20 +0000 (GMT)
Subject: image()
Message-ID: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>

May I raise the issue of the behaviour of image()?  In image() dim(z) is
supposed to be c(length(x), length(y)).  This suggests that the user is
supplying the midpoints of the rectangles.  For all but the outer
rectangles this is true.  The outer rectangles, however, are only
displayed in half width.  So it is not possible to show correctly an image
plot of equally-spaced abscissa.  I would hazard a guess that these kinds
of plots make up the bulk of calls to image() either directly or after a
simple transformation (eg starting with boundary values rather than
midpoints).

Can I suggest that the code for image() be modified to show full
rectangles for all values on the basis that x and y are midpoints? 
According to my code for R (which is a bit out of date!) the minimum
change would require 4 lines to be modified in the function do_image of
plot3d.c.  The alternative, which I think would be more transparent, would
be to call the function do_image with boundary values having previously
made the appropriate calculations in image() according to whether
midpoints or boundary values are supplied.  Something like this happens in
S+ (although not very transparently!).

I would be happy to detail these changes if they were thought appropriate.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeitler@corecomm.net  Sat Nov 13 13:55:45 1999
From: zeitler@corecomm.net (zeitler@corecomm.net)
Date: Sat, 13 Nov 1999 14:55:45 +0100 (MET)
Subject: configure script error (PR#321)
Message-ID: <199911131355.OAA23608@pubhealth.ku.dk>

Full_Name: David Zeitler
Version: 0.65.1
OS: Linux Mandrake
Submission from: (NULL) (209.81.240.221)


Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
conftest.c to test int and double compatibility between g77 and gcc. This didn't

show up when compiling on my K6 machine, but did on my Celeron notebook. The K6
reports as an i586 processor and the Celeron reports i686. This appears to be
the
only difference between the two builds.

The problem shows up as a failure of this test listed in the configure.log as
line 2107. After adding ${CFLAGS}, the build ran to completion normally on both
machines.

Orginal line 2158:
      if ${CC-cc} -c conftest.c 1>&5 2>&5; then

New line 2158:
      if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 13 15:05:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Nov 1999 16:05:12 +0100
Subject: configure script error (PR#321)
In-Reply-To: zeitler@corecomm.net's message of "Sat, 13 Nov 1999 14:55:45 +0100 (MET)"
References: <199911131355.OAA23608@pubhealth.ku.dk>
Message-ID: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>

zeitler@corecomm.net writes:

> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
....

>       if ${CC-cc} -c conftest.c 1>&5 2>&5; then
> 
> New line 2158:
>       if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

The configure script is autogenerated from configure.in and
aclocal.m4, so fixes by line number is not too useful. In my sources
it was now line 1987. Thanks anyway.

That'll be l.424 of the current aclocal.m4, inside
AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

I'll leave it for those who actually understand autoconf to check that
your fix is correct.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat Nov 13 21:20:19 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 13 Nov 1999 22:20:19 +0100 (MET)
Subject: patches for alpha
Message-ID: <Pine.OSF.4.10.9911132108130.27388-100000@zidsrv.sci.uni-klu.ac.at>


Recently I reviewed my RPM spec files for DU 4.0, and noticed that I
forgot to post some problems + patches:

1. ./configure fails to choose a PIC flag, I simply removed the
AC_MSG_ERROR and it works. There is actually no PIC flag for DEC cc (with
DU 4.0E)
--- ./configure.in.alpha-patch  Mon Aug 23 06:36:28 1999
+++ ./configure.in      Sun Sep 12 17:38:27 1999
@@ -541,7 +541,9 @@
       -bI:\$(R_HOME)/etc/R.exp -lc -lm"
     ;;
   alpha*osf*)
+    ldcmd="f77 -g -nofor_main -fpe3 "
     cpicflags=
+    shlibld=f77
     shlibldflags=-shared
     ;;
   alpha*linux)
@@ -612,7 +614,7 @@
 : ${CPICFLAGS=${cpicflags}}
 if test -z "${CPICFLAGS}"; then
   AC_MSG_WARN([Could not determine CPICFLAGS.])
-  AC_MSG_ERROR([See the file INSTALL for more information.])
+#  AC_MSG_ERROR([See the file INSTALL for more information.])
 fi
 : ${FPICFLAGS=${fpicflags}}
 : ${SHLIBLD=${shlibld}}

May be some autoconf expert could provide an solution like
if arch!=alpha then AC_MSG_ERROR ?

1.a depending does not work, I added some lines to Makeconf.in:
My automake is automake-1.4
--- ./Makeconf.in.alpha-patch   Thu Aug 19 00:24:49 1999
+++ ./Makeconf.in       Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 .SUFFIXES:
 .SUFFIXES: .c .f .d .o

-@depend_rules_frag@
+# added for alpha (autoconf broken?):
+.c.d:
+       @echo "making $@ from $<"
+       @$(CC) -M $(ALL_CPPFLAGS) $(ALL_CFLAGS) $< >$@
 .c.o:
        $(CC) $(ALL_CPPFLAGS) $(ALL_CFLAGS) -c $< -o $@
 @f77_rules_frag@


2. aclocal.m4 has many wrong C preprocessor directives "#define"s and
"#include"s with "#" not in column 1 (DEC cc wants it there) 

That means
 
       #define SOMETHING

does not work, but 

#define SOMETHING 

or (for indenting together with neighbour lines)

#       define SOMETHING

works.

Here is the patch:
--- ./aclocal.m4.alpha-ac-patch	Tue Oct 26 13:32:08 1999
+++ ./aclocal.m4	Tue Oct 26 13:33:46 1999
@@ -388,13 +388,13 @@
       ${FC} -c ${FFLAGS} conftestf.f 1>&AC_FD_CC 2>&AC_FD_CC
       changequote(, )
       cat > conftest.c <<EOF
-        #include <math.h>
-	#include "confdefs.h"
-	#ifdef HAVE_F77_UNDERSCORE
-	# define F77_SYMBOL(x)   x ## _
-	#else
-	# define F77_SYMBOL(x)   x
-	#endif
+#      include <math.h>
+#      include "confdefs.h"
+#      ifdef HAVE_F77_UNDERSCORE
+#        define F77_SYMBOL(x)   x ## _
+#      else
+#        define F77_SYMBOL(x)   x
+#      endif
 
 	extern void F77_SYMBOL(cftest)(int *a, int *b,
 	  double *x, double *y);
@@ -502,10 +502,10 @@
 	  changequote(<<, >>)dnl
 	  <<
 	  int main () {
-	  #include <fpu_control.h>
-	  #if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
+#        include <fpu_control.h>
+#        if defined(_FPU_DEFAULT) && defined(_FPU_IEEE)
 	    return(_FPU_DEFAULT != _FPU_IEEE);
-	  #endif
+#        endif
 	    return(0);
 	  }
 	  >>,
@@ -527,7 +527,7 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <stdlib.h>
+#      include <stdlib.h>
 	int main () {
 	  int *p = calloc(0, sizeof(int));
 	  return(p == 0);
@@ -550,14 +550,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_FINITE
+#      ifdef HAVE_FINITE
 	  return(finite(1./0.) | finite(0./0.) | finite(-1./0.));
-	#else
+#      else
 	  return(0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -577,14 +577,14 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include "confdefs.h"
+#      include <math.h>
+#      include "confdefs.h"
 	int main () {
-	#ifdef HAVE_ISNAN
+#      ifdef HAVE_ISNAN
 	  return(!(log(0.) == -1. / 0. && isnan(log(-1.))));
-	#else
+#      else
 	  return(log(0.) != -1. / 0);
-	#endif
+#      endif
 	}
 	>>,
 	changequote([, ])dnl
@@ -622,8 +622,8 @@
       AC_TRY_RUN(
 	changequote(<<, >>)dnl
 	<<
-	#include <math.h>
-	#include <ieeefp.h>
+#      include <math.h>
+#      include <ieeefp.h>
 	int main () {
 	  double x = 0;
 	  fpsetmask(0); x = x / x; return (x != x);

3. multiple declaration of mkString, const char* did not work:
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration,
parameter 1 has a different type than specified in an earlier declaration
of this function. (mismatparam)
SEXP mkString(const char *s)

Also another "#" not in column 1.

One solution is the following, but I'm not sure if the move from const
char* to char* breaks something. I also don't know why const char* did not
work.

My bison is 
root@delta[src]# bison -V
GNU Bison version 1.25

--- ./src/include/Rinternals.h.alpha-patch	Sun Sep 12 17:41:57 1999
+++ ./src/include/Rinternals.h	Sun Sep 12 17:43:37 1999
@@ -361,7 +361,7 @@
 SEXP matchArgs(SEXP, SEXP);
 SEXP matchPar(char*, SEXP*);
 SEXP mkChar(const char*);
-SEXP mkString(const char*);
+SEXP mkString(char*);
 SEXP namesgets(SEXP, SEXP);
 int ncols(SEXP);
 int nrows(SEXP);
--- ./src/main/gram.y.alpha-patch	Tue Aug 10 10:56:17 1999
+++ ./src/main/gram.y	Sun Sep 12 17:38:27 1999
@@ -56,7 +56,10 @@
 SEXP		mkFloat(char *);
 SEXP		mkInteger(char *);
 SEXP		mkNA(void);
-SEXP		mkString(const char *);
+/* problems with multiple declarations of mkString in DEC cc ?:*/
+#ifndef _R_INTERNALS_H_
+SEXP		mkString(char *);
+#endif
 SEXP		mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1365,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(char *s)
 {
     SEXP t;
 
@@ -1623,9 +1628,9 @@
 		SourcePtr = FunctionSource + 8;
 	    }
 	    FunctionStart[FunctionLevel] = SourcePtr - 8;
-	    #if 0
+#          if 0
 	    printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-	    #endif
+#          endif
 	}
 	return kw;
     }



ALbrecht
 
-------------------------------------------------------------------------------
Albrecht Gebhardt                   email   : albrecht.gebhardt@uni-klu.ac.at
Institut fuer Mathematik            Tel.    : (++43 463) 2700/832
Universitaet Klagenfurt             Fax     : (++43 463) 2700/834
Villacher Str. 161
A-9020 Klagenfurt, Austria
-------------------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mgri@hal.stat.unipd.it  Sun Nov 14 17:17:09 1999
From: mgri@hal.stat.unipd.it (mgri@hal.stat.unipd.it)
Date: Sun, 14 Nov 1999 18:17:09 +0100 (MET)
Subject: bug in arma.sim (PR#322)
Message-ID: <199911141717.SAA26416@pubhealth.ku.dk>

Dear Sir,

I think I found a bug in the function arma.sim, which is defined in
the help page of the function filter:

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, ma, sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}

I am using R version 0.65.0 under Linux. If I understand correctly the
way the function arma.sim is supposed to work, the instruction

arma.sim(n=200, ar=0.5, ma=0.5, sigma=1.2)

should generate values from an ARMA(1,1) model. However, the values
generated seem to come from an AR(1) model. I think this is due to the
instruction x <- filter(x, ma, sides=1) in the definition of
arma.sim, which doesn't produce the desired result. The function
defined below gives the output that my understanding of the
procedures involved would make me expect.

arma.sim <- function(n, ar = NULL, ma = NULL, sigma = 1.0)
{  
    x <- ts(rnorm(n+100, 0, sigma^2), start = -99)
    if(length(ma)) x <- filter(x, c(1,ma), sides=1)
    if(length(ar)) x <- filter(x, ar, method="recursive")
    as.ts(x[-(1:100)])
}


I simply changed

x <- filter(x, ma, sides=1)

to

x <- filter(x, c(1,ma), sides=1)


Also, I wonder whether it would be more appropriate to write

rnorm(n+100, 0, sigma)

instead of

rnorm(n+100, 0, sigma^2)

since rnorm requires the standard deviation rather than the variance.


Best regards,

Matteo Grigoletto
mgri@hal.stat.unipd.it

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 19:20:46 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 19:20:46 +0000 (GMT)
Subject: bug in arma.sim (PR#322)
In-Reply-To: <199911141717.SAA26416@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>

On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:

> I think I found a bug in the function arma.sim, which is defined in
> the help page of the function filter:

[...]

Yes, that has not been tested since filter was altered for S-PLUS
compatibility.

Fixed for 0.90.0 (due out on Friday)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 22:50:42 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 14 Nov 1999 23:50:42 +0100 (MET)
Subject: { and } in examples get confused in help (PR#323)
Message-ID: <199911142250.XAA27208@pubhealth.ku.dk>

Take a look at ?image, or the html version:

     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^{-r/6{))
...
     image(z, axes=F, main="Math can be beautiful ...",
           xlab=expression(cos(r^2) * e^}-r/6}))


The {} {} pairing has become {{ }}.  Looks like a bug in the 
marking/unmarking code in Rdconvlib.pl


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 14 23:12:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 00:12:52 +0100
Subject: bug in arma.sim (PR#322)
In-Reply-To: Prof Brian D Ripley's message of "Sun, 14 Nov 1999 19:20:46 +0000 (GMT)"
References: <Pine.GSO.4.05.9911141919260.13227-100000@auk.stats>
Message-ID: <x2ogcwsm4r.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Sun, 14 Nov 1999 mgri@hal.stat.unipd.it wrote:
> 
> > I think I found a bug in the function arma.sim, which is defined in
> > the help page of the function filter:
> 
> [...]
> 
> Yes, that has not been tested since filter was altered for S-PLUS
> compatibility.
> 
> Fixed for 0.90.0 (due out on Friday)

...Monday, actually. November 22.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Nov 14 23:10:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 14 Nov 1999 23:10:26 +0000 (GMT)
Subject: image()
In-Reply-To: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
Message-ID: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>

On Sat, 13 Nov 1999, Jonathan Rougier wrote:

> May I raise the issue of the behaviour of image()?  In image() dim(z) is
> supposed to be c(length(x), length(y)).  This suggests that the user is
> supplying the midpoints of the rectangles.  For all but the outer
> rectangles this is true.  The outer rectangles, however, are only
> displayed in half width.  So it is not possible to show correctly an image
> plot of equally-spaced abscissa.  I would hazard a guess that these kinds
> of plots make up the bulk of calls to image() either directly or after a
> simple transformation (eg starting with boundary values rather than
> midpoints).
> 
> Can I suggest that the code for image() be modified to show full
> rectangles for all values on the basis that x and y are midpoints? 
> According to my code for R (which is a bit out of date!) the minimum
> change would require 4 lines to be modified in the function do_image of
> plot3d.c.  The alternative, which I think would be more transparent, would
> be to call the function do_image with boundary values having previously
> made the appropriate calculations in image() according to whether
> midpoints or boundary values are supplied.  Something like this happens in
> S+ (although not very transparently!).

I needed this in hurry this weekend for some fMRI plots. I've altered
image so that if z is m x n, x can be of length m or m+1 and y of length n
or n+1.  If x is of length m it supplies the midpoints, if of length m+1
it supplies the boundaries of the cells. (All S compatible.)  The internal
call is made with the boundary values.  The outer cells are plotted
in full width.

The one change is if m=1 or n=1. I reckon that is an error, but S
and R previously filled the whole width. Does anyone want that behaviour?
At present those cases are an error.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 15 08:38:40 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Nov 1999 09:38:40 +0100 (MET)
Subject: image()
In-Reply-To: <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
References: <Pine.GSO.3.96.991113123408.4357A-100000@laplace>
 <Pine.GSO.4.05.9911142306110.2464-100000@auk.stats>
Message-ID: <14383.50832.260276.838244@gargle.gargle.HOWL>

>>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
>>>>> <ripley@stats.ox.ac.uk> said:

    BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
    >> May I raise the issue of the behaviour of image()?  In image()
    >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
    >> that the user is supplying the midpoints of the rectangles.  For all
    >> but the outer rectangles this is true.  The outer rectangles,
    >> however, are only displayed in half width.  So it is not possible to
    >> show correctly an image plot of equally-spaced abscissa.  I would
    >> hazard a guess that these kinds of plots make up the bulk of calls
    >> to image() either directly or after a simple transformation (eg
    >> starting with boundary values rather than midpoints).
    >> 
    >> Can I suggest that the code for image() be modified to show full
    >> rectangles for all values on the basis that x and y are midpoints?
    >> According to my code for R (which is a bit out of date!) the minimum
    >> change would require 4 lines to be modified in the function do_image
    >> of plot3d.c.  The alternative, which I think would be more
    >> transparent, would be to call the function do_image with boundary
    >> values having previously made the appropriate calculations in
    >> image() according to whether midpoints or boundary values are
    >> supplied.  Something like this happens in S+ (although not very
    >> transparently!).

    BDR> I needed this in hurry this weekend for some fMRI plots. I've
    BDR> altered image so that if z is m x n, x can be of length m or m+1
    BDR> and y of length n or n+1.  If x is of length m it supplies the
    BDR> midpoints, if of length m+1 it supplies the boundaries of the
    BDR> cells. (All S compatible.)  The internal call is made with the
    BDR> boundary values.  The outer cells are plotted in full width.

Excellent, thank you!

    BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
    BDR> and R previously filled the whole width. Does anyone want that
    BDR> behaviour?

yes, I do.
- If I remember properly, I even spent an hour or so to make this work in R:
 When I was porting the wavethresh package,
 one of the multiresolution plots didn't work in R, first, because  image()
 didn't work for 1x1 images.

- Also, for the matter of completeness and consistency, I think this just
  should work.

    BDR>   At present those cases are an error.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Nov 15 09:00:06 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 15 Nov 1999 09:00:06 +0000 (GMT)
Subject: image()
In-Reply-To: <14383.50832.260276.838244@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.9911150857190.23496-100000@auk.stats>

On Mon, 15 Nov 1999, Martin Maechler wrote:

> >>>>> On Sun, 14 Nov 1999 23:10:26 +0000 (GMT), Prof Brian D Ripley
> >>>>> <ripley@stats.ox.ac.uk> said:
> 
>     BDR> On Sat, 13 Nov 1999, Jonathan Rougier wrote:
>     >> May I raise the issue of the behaviour of image()?  In image()
>     >> dim(z) is supposed to be c(length(x), length(y)).  This suggests
>     >> that the user is supplying the midpoints of the rectangles.  For all
>     >> but the outer rectangles this is true.  The outer rectangles,
>     >> however, are only displayed in half width.  So it is not possible to
>     >> show correctly an image plot of equally-spaced abscissa.  I would
>     >> hazard a guess that these kinds of plots make up the bulk of calls
>     >> to image() either directly or after a simple transformation (eg
>     >> starting with boundary values rather than midpoints).
>     >> 
>     >> Can I suggest that the code for image() be modified to show full
>     >> rectangles for all values on the basis that x and y are midpoints?
>     >> According to my code for R (which is a bit out of date!) the minimum
>     >> change would require 4 lines to be modified in the function do_image
>     >> of plot3d.c.  The alternative, which I think would be more
>     >> transparent, would be to call the function do_image with boundary
>     >> values having previously made the appropriate calculations in
>     >> image() according to whether midpoints or boundary values are
>     >> supplied.  Something like this happens in S+ (although not very
>     >> transparently!).
> 
>     BDR> I needed this in hurry this weekend for some fMRI plots. I've
>     BDR> altered image so that if z is m x n, x can be of length m or m+1
>     BDR> and y of length n or n+1.  If x is of length m it supplies the
>     BDR> midpoints, if of length m+1 it supplies the boundaries of the
>     BDR> cells. (All S compatible.)  The internal call is made with the
>     BDR> boundary values.  The outer cells are plotted in full width.
> 
> Excellent, thank you!
> 
>     BDR> The one change is if m=1 or n=1. I reckon that is an error, but S
>     BDR> and R previously filled the whole width. Does anyone want that
>     BDR> behaviour?
> 
> yes, I do.
> - If I remember properly, I even spent an hour or so to make this work in R:
>  When I was porting the wavethresh package,
>  one of the multiresolution plots didn't work in R, first, because  image()
>  didn't work for 1x1 images.
> 
> - Also, for the matter of completeness and consistency, I think this just
>   should work.
> 
>     BDR>   At present those cases are an error.
> 
OK, I know how to do it and will implement it soon (but probably not
today).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 10:10:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 11:10:30 +0100 (CET)
Subject: configure script error (PR#321)
In-Reply-To: <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
References: <199911131355.OAA23608@pubhealth.ku.dk>
 <x2yac2zb2v.fsf@blueberry.kubism.ku.dk>
Message-ID: <14383.56342.286716.695484@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> zeitler@corecomm.net writes:
>> Line 2158 of configure is missing the ${CFLAGS} entry on the compilation of 
> ....

>> if ${CC-cc} -c conftest.c 1>&5 2>&5; then
>> 
>> New line 2158:
>> if ${CC-cc} -c ${CFLAGS} conftest.c 1>&5 2>&5; then

> The configure script is autogenerated from configure.in and
> aclocal.m4, so fixes by line number is not too useful. In my sources
> it was now line 1987. Thanks anyway.

Thanks for the report.

> That'll be l.424 of the current aclocal.m4, inside
> AC_DEFUN(R_PROG_F77_CC_COMPAT,<etc>.

> I'll leave it for those who actually understand autoconf to check that
> your fix is correct.

Fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Nov 15 12:50:08 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 15 Nov 1999 13:50:08 +0100 (CET)
Subject: AW: [R] read.table problems
In-Reply-To: <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca>
 <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel>
Message-ID: <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>

>>>>> =?iso-8859-1?Q?Jens Oehlschl=E4gel-Akiyoshi?= writes:

> Below is a fix for read.table() to better read in CSV-files.

>> # try this
>> cat("1;2,3\n4;5,6\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1;2,3
> 4;5,6
>> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
>   V1  V2
> 1  1 2.3
> 2  4 5.6

I am not sure we should do this.

If you are trying to read in German-format numbers, this should be
doable by setting the locale accordingly.  Does anyone know whether
strtod() will work this way?

> BTW: I think read.table() or it's documentation needs another fix,
>      because of the following:


>> cat("1 2\n3 4\n", file="d:/temp/t.dat")
>> system("cat d:/temp/t.dat", show=TRUE)
> 1 2
> 3 4
>> read.table("d:/temp/t.dat", as.is=TRUE)$V1
> [1] "1" "3"


> Citing from the help file:

>       as.is: the default behavior of `read.table' is to convert
>              non-numeric variables to factors.  The variable
>              `as.is' controls this conversion.  Its value is
>              either a vector of logicals (values are recycled
>              if necessary), or a vector of numeric indices
>              which specify which columns should be left as
>              character strings.

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 13:07:43 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 14:07:43 +0100
Subject: AW: [R] read.table problems
In-Reply-To: Kurt Hornik's message of "Mon, 15 Nov 1999 13:50:08 +0100 (CET)"
References: <199911101403.JAA24560@sirocco.cc.mcgill.ca> <000201bf2c7d$e05bccf0$a9021aac@joelschlaegel> <14384.384.648411.991018@fangorn.ci.tuwien.ac.at>
Message-ID: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >> read.table("d:/temp/t.dat", sep=";", dec.sep=",")
> >   V1  V2
> > 1  1 2.3
> > 2  4 5.6
> 
> I am not sure we should do this.
> 
> If you are trying to read in German-format numbers, this should be
> doable by setting the locale accordingly.  Does anyone know whether
> strtod() will work this way?

Only too well, I'm afraid. AFAIR we specifically do *not* localize
LC_NUMERIC for that reason. Will also affect as.numeric(), etc., causing
general panic. Besides, we'll always have problems with not knowing
the locale in which a .csv was created.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kmb28@cus.cam.ac.uk  Mon Nov 15 13:38:41 1999
From: kmb28@cus.cam.ac.uk (kmb28@cus.cam.ac.uk)
Date: Mon, 15 Nov 1999 14:38:41 +0100 (MET)
Subject: R 0.65.1 config bug (PR#324)
Message-ID: <199911151338.OAA06120@pubhealth.ku.dk>

install@herb1:~/R-0.65.1> ./configure --help

....
--with-gnome            use GNOME (if available)
--with-gnome-includes   Specify location of GNOME headers
--with-gnome-libs       Specify location of GNOME libs
--with-gnome            Specify prefix for GNOME files

Is that last one correct?
Keith
-- 
Keith Briggs, King's College Research Centre and Department of Plant 
Sciences, University of Cambridge, Downing Street, Cambridge CB2 3EA 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 15 15:48:02 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 15 Nov 1999 10:48:02 -0500
Subject: univariate ar dimension
Message-ID: <38302B32.E6BE37D1@bank-banque-canada.ca>

I have now cleaned out most of the old R-bug work-arounds in my DSE
library and will soon have a version for CRAN, but with 0.90 imminent I
will probably wait for that. The remaining mask I use is a replacement
for ar in the ts library, to make $ar in the result an array rather than
a vector even in the univariate case. The reason for doing this is to
avoid always needing to code the univariate case as a special exception.
The change should not affect any univariate code which assumes the
result is a vector, since an Nx1x1 array can still be indexed as a
vector. My fix is consistent with Splus (3.3), however, I am not sure if
the ts library result is considered a feature or a bug. It would be good
to resolve this for 0.90 so I can either remove my fix or put in a more
permanent work-around.

Paul Gilbert
_________
# the second to last line is a fix for ar in the ts library
ar <- function (x, aic = TRUE, order.max = NULL,
         method = c("yule-walker", "burg", "ols", "mle"),
         na.action = na.fail, series = deparse(substitute(x)),  ...)
{ # it is not clear why quote around "y=w" are necessary.
    res <- switch(match.arg(method),
            "yule-walker" = ar.yw(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            burg = ar.burg(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            ols = ar.ols(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...),
            mle = ar.mle(x, aic = aic, order.max = order.max,
                            na.action = na.action, series = series,
...))
    res$call <- match.call()
    if (! is.array(res$ar)) res$ar <- array(res$ar,
c(length(res$ar),1,1)) #fix
    res
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Mon Nov 15 15:43:04 1999
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Mon, 15 Nov 1999 16:43:04 +0100
Subject: AW: [R] read.table problems
In-Reply-To: <x2903zvr6o.fsf@blueberry.kubism.ku.dk>
Message-ID: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>


Two short remarks

1) I still do changes on my version of read.table() as I might need a proper
csv.reader during the next days,
   so perhaps you might want to wait

2) Of course an alternative to patching read.table() is renaming my version
to e.g. read.table.csv()
   (but it is not a full csv.reader yet)

Here is an update, which by default strips quotation marks enclosing
colnames, character data or numeric data
With this version you can read in csv data such that

 "white.begin"  ,  "predy"   , "x"     , "y"
 "       asdf"  ,  0.367985  , "25.34" , 0

gives as resulting col.names instead of

> names(temp)
[1] "\"highq\"" "\"lowq\""  "\"predy\"" "\"x\""     "\"y\""

> names(temp)
[1] "highq" "lowq"  "predy" "x"     "y"

and as resulting data

 "       asdf", 0.367985, 25.34, 0

however it will fail on character data containing the separator or quotation
marks

Best regards


Jens Oehlschlägel-Akiyoshi



read.table <-
function (file
, header = FALSE
, sep = ""
, row.names
, col.names
, as.is = FALSE
, na.strings = "NA"
, skip = 0
, dec.sep = '.'                ## added by JOA
, strip.white = TRUE           ## added by JOA, set to FALSE for backward
compatibility
, quotation.mark = '"'         ## added by JOA
, strip.quotation.marks = TRUE ## added by JOA, set to FALSE for backward
compatibility
)
{
    ##### remark: this version of read.table seems to works fine for
numerical csv data
    ##### but will fail on character data containing the separator or
quotation marks
    ### Start JOA changes
    ## could have a warning
    #if (strip.white && sep[1] %in% c("", " ", "\t"))warning("read.table:
strip.white AND with white space seperator !?")
    ## .Internal(type.convert) calls do_typecvt() which calls C-library
function strtod() which uses '.' as dec.sep
    ## thus let's replace other dec.sep here
    if (dec.sep[1]==sep[1])stop("parsing rule violation: sep must not equal
dec.sep")
    type.convert <- function(x, na.strings = "NA", as.is = FALSE,
dec=dec.sep){
    	if (dec[1]!="."){
    	  # R-developers may know a more efficient internal function to replace
characters
    	  # I also don't know whether it is efficient to change parameters
before calling .Internal
    	  # however it seems to work
    	  # In case a global option$dec.sep is introduced, this fix needs to be
adapted
    	  x <- gsub(dec[1], '.', x, ignore.case=FALSE, extended=FALSE)
    	}
      .Internal(type.convert(x, na.strings, as.is))
    }
    quoted.string.matcher <- paste('\(^', quotation.mark, '\)\(.*\)\(',
quotation.mark, '$\)', sep='')
    unquote <- function(text, quoted.string)sub(quoted.string.matcher,
'\\2', text, extended=T)
    ### Stop JOA changes

    row.lens <- count.fields(file, sep, skip)
    nlines <- length(row.lens)
    rlabp <- nlines > 1 && (row.lens[2] - row.lens[1]) == 1
    if (rlabp && missing(header))
        header <- TRUE
    if (header) {
        col.names <- scan(file, what = "", sep = sep, nlines = 1,
            strip.white = strip.white, # added by JOA
            quiet = TRUE, skip = skip)
        skip <- skip + 1
        row.lens <- row.lens[-1]
        nlines <- nlines - 1
    }
    if (strip.quotation.marks) col.names <- unquote(col.names) ## added by
JOA
    else if (missing(col.names))
        col.names <- paste("V", 1:row.lens[1], sep = "")
    cols <- unique(row.lens)
    if (length(cols) != 1) {
        cat("\nrow.lens=\n")
        print(row.lens)
        stop("all rows must have the same length.")
    }
    what <- rep(list(""), cols)
    if (rlabp)
        col.names <- c("row.names", col.names)
    names(what) <- col.names
    data <- scan(file = file, what = what, sep = sep, skip = skip,
        na.strings = na.strings,
        strip.white = strip.white, ## added by JOA
        quiet = TRUE)

    if (cols != length(data)) {
        warning(paste("cols =", cols, " != length(data) =", length(data)))
        cols <- length(data)
    }
    if (is.logical(as.is)) {
        as.is <- rep(as.is, length = cols)
    }
    else if (is.numeric(as.is)) {
        if (any(as.is < 1 | as.is > cols))
            stop("invalid numeric as.is expression")
        i <- rep(FALSE, cols)
        i[as.is] <- TRUE
        as.is <- i
    }
    else if (length(as.is) != cols)
        stop(paste("as.is has the wrong length", length(as.is),
            "!= cols =", cols))

   ## Start changed by JOA
   if (strip.quotation.marks) {
         for (i in 1:cols)
             if (as.is[i])
                 data[[i]] <- unquote(data[[i]])
             else
                 data[[i]] <- type.convert( unquote(data[[i]]) )
   } else {
       for (i in 1:cols) if (!as.is[i])
           data[[i]] <- type.convert(data[[i]])
   }
   ## Stop changed by JOA

    if (missing(row.names)) {
        if (rlabp) {
            row.names <- data[[1]]
            data <- data[-1]
        }
        else row.names <- as.character(1:nlines)
    }
    else if (is.null(row.names)) {
        row.names <- as.character(1:nlines)
    }
    else if (is.character(row.names)) {
        if (length(row.names) == 1) {
            rowvar <- (1:cols)[match(col.names, row.names, 0) ==
                1]
            row.names <- data[[rowvar]]
            data <- data[-rowvar]
        }
    }
    else if (is.numeric(row.names) && length(row.names) == 1) {
        rlabp <- row.names
        row.names <- data[[rlabp]]
        data <- data[-rlabp]
    }
    else stop("invalid row.names specification")
    class(data) <- "data.frame"
    row.names(data) <- row.names
    data
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 16:14:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 17:14:53 +0100
Subject: AW: [R] read.table problems
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Mon, 15 Nov 1999 16:43:04 +0100"
References: <000101bf2f80$1bef2500$a9021aac@joelschlaegel>
Message-ID: <x2n1sfu3ya.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Two short remarks
> 
> 1) I still do changes on my version of read.table() as I might need a proper
> csv.reader during the next days,
>    so perhaps you might want to wait
> 
> 2) Of course an alternative to patching read.table() is renaming my version
> to e.g. read.table.csv()
>    (but it is not a full csv.reader yet)

...and it isn't realistically going to be without surgery on the
internals of scan and count.fields. So, since there is a feature
freeze on for 0.90, we should hold back but try to get something like
this into the next version. There are a couple of other ideas that I'd
like to pursue at that point too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 15 20:47:01 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 15 Nov 1999 15:47:01 -0500
Subject: (G)UI for R and in R
In-Reply-To: Your message of "12 Nov 1999 08:04:22 PST."
 <87g0ybvgqh.fsf@alpha.cfas.washington.edu>
Message-ID: <199911152047.PAA18728@infiniti.ece.cmu.edu>


Hi,

  I've followed the discussions about the object explorer thingy et
al. last week.  I'll add below my thoughts about what a GUI could do
and how it could be done.  This matrix shows along which "axes" I think
to evaluate how R will fit into my tool box in the future.  It may or
may not be interesting for the developers on this list -- I was just a
bit confused about what some people want and how they get there.
  I'm _not_ asking for answers for the questions below.  (I can easily
find out that a solution to R+CGI is Rweb.)  I'm interested in whether
I forgot some major idea or realization path...

Usage -- what are the interfaces for?

1) for data input or exchange
   Can I drop my data from a spread sheet into R?  Can I get results
back into a (spreadsheet) application?  Can I request data from a database?
dto. with "high-level" constructs in R?  Can I call R from a CGI
script?  Can another application "drive" my R session?

2) for help with writing R scripts
   Does R help me with a graphical introspection tool?  I guess this
is what the object explorer is meant for.  Can I bring up a list of
objects and kinda click my way to the attributes of the object?  its
data?  (Not unusual scenario: And why does apply not work this time?
Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
a function and send it to an editor?  Find out where it came from?

3) for "clients"
   Can I package an R program so that others aren't stuck with a
static analysis of the data?  Can I add menus/options/etc. so that
others can twiddle my view of the data (possibly without understanding
R)?  Sometimes, this is very simple stuff, like maybe somebody would
rather see relative than abs. frequency.  Why not give them a button
and a plot device instead of a static picture?


How -- what are my options to program an interface?

1/2) approaches for data import/export - stuff I've seen mentioned is use
of CORBA, SQL, DCOM, other D&D protocols.  Yes, they all do different
things, but the underlying question is: Why do I export my data to
file to then call read.table in R?  Why doesn't R just "know" about my
data?  Could I mark a table in another program, then go to my R prompt
and say "new.data <- import.from.selection ()"?  If I can attach
data.frames, why not a data base?
  Also, who is in the driver's seat?  In option 1 it's R where R
queries for data.  In option 2 it's another application that ask R to
perform services (calculations, model fitting, etc.) on its behalf.

3) "low-level" approach for the GUI part - use a system dependent
library (like X, Xt, Gnome and the Windows equivalents).  This hurts
if you move between platforms.  It also means lots of code and need
for a compiler.  I actually also put the Java solutions here -- Java
helps to stay (mostly) platform-independent but is low-level in its
approach to UI programming.  This may be different if you rely on
Swing or other GUI classes.  If you don't, you'll have to write a
decent amount of code.

4) "high-level" approach for the GUI part - I'd put scripting
languages here.  Actually, the tcl/tk interface wasn't mentioned last
week but appears, at least to me, to be a promising approach.  You
can piece an interface together rather quickly in tcl/tk and you don't
have to touch a compiler.

5) "high-level" approach to GUI but with R commands - I don't like 1
and only "kind of" 2 because they require me to go outside of R.  I'd
like to program a menubar (with a help entry), some buttons, multiple
canvases (each e.g. an X11 device and a frame around with a button
"send to printer"), with R functions.  (Of course, I see that this in
turn goes back to either 1 or 2.  But only once for the authors of the
interface functions.)

Option 5 goes into the direction of a visual R - I don't want to
write a for loop to calculate the mean of a data vector.  I want to
say "mean(v)".  Along the same line, I want to say
  fam.select <- choice (title="Link function", c("gaussian", "poisson"),
                       exactly.one=T);
  ...
  glm (..., family=query(fam.select), ...)
This gives the user a menu, allowing him/her to influence
calculations.  And I don't have to think about radio buttions or
geometry managers or whatever.

But then, would this be part of R or do you want to keep stuff like
this outside?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Mon Nov 15 21:08:06 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Mon, 15 Nov 1999 22:08:06 +0100 (MET)
Subject: xlim, ylim problem in barplot (PR#325)
Message-ID: <199911152108.WAA09550@pubhealth.ku.dk>

Hi, all.

The lower bound in a barplot (or the left bound if you're making a
horizontal barplot) is -0.01 no matter what.  This causes problems if
you're making a barplot of small values (say, < .001), as most of the plot
is taken up with blank space beneath the axis, and the bars are squeezed
in at the top.  The fix seems to be simple: replace lines

41:      xlim <- range(-0.01, height) 
59:      ylim <- range(-0.01, height)

by the following:

41:      xlim <- range(max(-0.01, -0.01 * height), height) 
59:      ylim <- range(max(-0.01, -0.01 * height), height)

This seems to work for small negative numbers as well.

Thanks again for the software.

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 15 21:39:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Nov 1999 22:39:20 +0100
Subject: xlim, ylim problem in barplot (PR#325)
In-Reply-To: mcw@ln.nimh.nih.gov's message of "Mon, 15 Nov 1999 22:08:06 +0100 (MET)"
References: <199911152108.WAA09550@pubhealth.ku.dk>
Message-ID: <x2hfinh1tj.fsf@blueberry.kubism.ku.dk>

mcw@ln.nimh.nih.gov writes:

> Hi, all.
> 
> The lower bound in a barplot (or the left bound if you're making a
> horizontal barplot) is -0.01 no matter what.  This causes problems if
> you're making a barplot of small values (say, < .001), as most of the plot
> is taken up with blank space beneath the axis, and the bars are squeezed
> in at the top.  The fix seems to be simple: replace lines
> 
> 41:      xlim <- range(-0.01, height) 
> 59:      ylim <- range(-0.01, height)
> 
> by the following:
> 
> 41:      xlim <- range(max(-0.01, -0.01 * height), height) 
> 59:      ylim <- range(max(-0.01, -0.01 * height), height)
> 
> This seems to work for small negative numbers as well.

or simply range(-0.01*height,height) 

That one might just be sneaked into the upcoming release....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Nov 15 22:05:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Nov 1999 16:05:22 -0600
Subject: (G)UI for R and in R
In-Reply-To: Thomas Vogels's message of "Mon, 15 Nov 1999 15:47:01 -0500"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu>
Message-ID: <6r4sen9zrx.fsf@franz.stat.wisc.edu>

First, let me say that I come from the command-line-oriented world and
most of the time I find that graphical user interfaces just get in the
way.  Like many people who use implementations of the S language
(i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
preferred environment for running and editing S code is emacs with the
ESS package.

My responses on a GUI for writing scripts are from this perspective
but I do recognize that many people find a GUI much more comfortable
than trying to remember lots of archane function names and, in the
case of emacs, keystrokes.

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> 2) for help with writing R scripts
>    Does R help me with a graphical introspection tool?  I guess this
> is what the object explorer is meant for.  Can I bring up a list of
> objects and kinda click my way to the attributes of the object?  its
> data?  (Not unusual scenario: And why does apply not work this time?
> Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> a function and send it to an editor?  Find out where it came from?

(BTW, I think you mean "graphical inspection tool".)  Although not a
substitute for graphical inspection, I find Martin Maechler's "str"
function to be invaluable when I am trying to remember the structure
of various objects, including (and perhaps especially) those for which
I designed the structure.

As far as editing a function definition, there are excellent
facilities within ESS for that.  Object name completion within ESS is
by itself worth the price of learning to use the mode.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 00:53:13 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Tue, 16 Nov 1999 13:53:13 +1300
Subject: Compilation of R under Mandrake Linux 6.1 (helios)
In-Reply-To: <199911121527.PAA12731@toucan.stats.ox.ac.uk>; from Prof Brian Ripley on Fri, Nov 12, 1999 at 03:27:31PM +0000
References: <199911121527.PAA12731@toucan.stats.ox.ac.uk>
Message-ID: <19991116135313.C8605@stat1.stat.auckland.ac.nz>

On Fri, Nov 12, 1999 at 03:27:31PM +0000, Prof Brian Ripley wrote:
> 
> > Date: Fri, 12 Nov 1999 10:12:25 -0500
> > From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> > 
> [Quoting PD]
> 
> > >It's not supposed to unless you configure --with-gnome, which does
> > >work on RH6.1, so why not on Mandrake.
> > 
> > I expect it works with Mandrake, I didn't try. At first I was a little 
> surprized
> > by configure's message, something like  "Gnome: no". I thought configure
> > couldn't recognize that I was running Gnome, but after quickly scanning
> > configure I decided it had to be specified. Perhaps a message like "not
> > specified" would be less confusing than "no" for things like this?
> 
> How to install Gnome support is in the INSTALL file. I have found it
> very tricky, as both too early and too late versions of the support
> files failed. Last time I tried libglade 0.7 (the then current one) did
> not work, but 0.3 still does despite the remark in that file about
> needing `libglade 0.5 or later'.

Actually, you will get some segfaults and misplaced GUI items with earlier
libglades than 0.5.

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:51:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:51:23 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911160751.IAA11396@pubhealth.ku.dk>

I was getting worried. 0.65 is the first version that I had not been
able to crash. Well the following gives a seg fault on Intel RH5.2
with R0.65.1:
plot(rnorm(20),xlab=expression(mu[Inf]))
You can guess what I was trying to do, as I used infty first and that
did not work. (I now know the correct formula.)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue Nov 16 07:57:00 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911160757.IAA11504@pubhealth.ku.dk>

The following matrix of normed likelihoods should give a smooth
surface but instead gives a series of spikes in both persp and contour
(the dim labels are the axes values). I know an algorithm cannot be
infallible but it would be nice to have some parameters to control the
smoothing. (It takes close to an hour to produce this matrix on a
Pentium II 300mh. It was after that that it crashed with the Inf in my
previous bug message...)
  Jim

"like" <-
structure(c(0.00176391675079333, 0.00146923361143409, 0.000118873942550920, 
2.60033028913311e-06, 1.36792992686478e-07, 1.8246691363054e-08, 
3.70167824680542e-09, 9.3435105158372e-10, 2.65488573122080e-10, 
8.02477512258327e-11, 2.49374837366522e-11, 7.79989625462184e-12, 
2.42313836128e-12, 7.41635672535047e-13, 2.22582213352616e-13, 
6.53529934129183e-14, 1.87592482515789e-14, 5.26673348630621e-15, 
1.44811282825086e-15, 3.90678315206886e-16, 1.03661464711976e-16, 
0.000357163904115257, 0.00646880985207886, 0.00663283207618763, 
0.0006059775621534, 1.21364454274087e-05, 1.80805906201527e-07, 
4.32774824739439e-08, 7.10745665416504e-09, 1.49838488962873e-09, 
3.63085812144783e-10, 9.50968657445326e-11, 2.5947561761174e-11, 
7.20856405305296e-12, 2.00980008827208e-12, 5.57310934761386e-13, 
1.52876329921416e-13, 4.13626490878394e-14, 1.10248761462956e-14, 
2.89491661046771e-15, 7.49510768794562e-16, 1.91634151378621e-16, 
3.07815510765707e-06, 0.000842181964429961, 0.0191090902323545, 
0.0242142517038679, 0.0025500207241197, 5.00789710794291e-05, 
2.23383985740275e-07, 2.32292942996531e-10, 1.46732078349253e-13, 
3.68779458410766e-16, 4.40310716451135e-10, 1.00615855772164e-10, 
2.42780131405657e-11, 6.03418238957602e-12, 1.52070970641775e-12, 
3.84738608832168e-13, 9.7118421208109e-14, 2.43727608742882e-14, 
6.0703200390455e-15, 1.49975407591609e-15, 3.67743639034840e-16, 
1.73726268058860e-08, 5.6077403337573e-06, 0.00165385022367381, 
0.0459164322410669, 0.0716297725686465, 0.00882904283150518, 
0.000179278272111563, 1.60177707812379e-06, 1.64900664911929e-07, 
1.78009575764431e-08, 2.65523682169734e-09, 4.76742738255559e-10, 
9.5704507548558e-11, 2.05674605214745e-11, 4.60601964796226e-12, 
1.05660190825881e-12, 2.45557822201462e-13, 5.74149524761638e-14, 
1.34489585256116e-14, 3.14879289081088e-15, 7.36195777222565e-16, 
4.89497216471075e-10, 3.81542617663398e-08, 9.09401919276533e-06, 
0.00275857826337638, 0.0909868934673163, 0.172758831413262, 0.0251503663306111, 
0.000549189356381134, 6.31352952358429e-06, 2.68961061449807e-07, 
2.3542509728124e-08, 2.97462447665947e-09, 4.64066856401819e-10, 
8.2401204449613e-11, 1.58824099088396e-11, 3.22710254273834e-12, 
6.78416160046776e-13, 1.45781121121843e-13, 3.17710965274086e-14, 
6.98813199754939e-15, 1.54686370477970e-15, 3.47818999816463e-11, 
1.24676135382412e-09, 7.47555356513558e-08, 1.33070547402354e-05, 
0.00398944889318836, 0.151170953683526, 0.343008298678816, 0.0591272231401392, 
0.00142894699562673, 1.33907834497016e-05, 3.93659041601088e-07, 
2.78925562712552e-08, 2.99820042629106e-09, 4.08906587960769e-10, 
6.46521841575397e-11, 1.12526828683000e-11, 2.08843221915706e-12, 
4.0497894062659e-13, 8.09694435253555e-14, 1.65467499310321e-14, 
3.4370548505308e-15, 2.36576283045907e-18, 9.6063453887084e-11, 
2.77556814791118e-09, 1.30655321075467e-07, 1.77439204853078e-05, 
0.00510559845838645, 0.214466920173550, 0.567639160458647, 0.115409841304071, 
0.00314993314454434, 2.62121724290019e-05, 5.22127208541793e-07, 
2.98270603284278e-08, 2.73794692447261e-09, 3.28356740333764e-10, 
4.65286665769768e-11, 7.36102946837208e-12, 1.25596058135938e-12, 
2.26061516010492e-13, 4.23051443667433e-14, 8.15300298593863e-15, 
3.99072715883438e-22, 2.83505501562795e-14, 2.29827820215666e-10, 
5.41529050920267e-09, 2.04082809865002e-07, 2.17246335811100e-05, 
0.00589627815433526, 0.264755146645107, 0.794255221042976, 0.188611633044143, 
0.0058892450264806, 4.81497713458769e-05, 5.23480571790264e-07, 
2.90107005693282e-08, 2.28108910907203e-09, 2.41888199776289e-10, 
3.09098051610835e-11, 4.47297169082052e-12, 7.05971252516243e-13, 
1.18646681896628e-13, 2.09007567575968e-14, 8.06100365206625e-25, 
2.18287769171281e-12, 3.07070436176694e-11, 4.77976958766606e-10, 
9.29640006576001e-09, 2.85897928086818e-07, 2.45914840639008e-05, 
0.00625816114089017, 0.289727465683434, 0.954240423750235, 0.260767136275309, 
0.00937565110886506, 8.04807869366302e-05, 4.13417517052559e-07, 
2.58678609575225e-08, 1.74581722289468e-09, 1.64522993158554e-10, 
1.90706199624332e-11, 2.53949873007858e-12, 3.72937444797563e-13, 
5.88524940943896e-14, 3.65274225587674e-33, 4.9389582496641e-13, 
5.65186883970257e-12, 6.65975799830656e-11, 8.6809873616086e-10, 
1.41133330282008e-08, 3.60982749125254e-07, 2.59299077617796e-05, 
0.00620782524427522, 0.286042286522196, 1, 0.308581298903377, 
0.012787802505642, 0.000119814119096249, 3.89699972443826e-07, 
4.28239635744095e-09, 1.23578822564739e-09, 1.03967816983612e-10, 
1.09920523132901e-11, 1.35456065143129e-12, 1.86115310490081e-13, 
1.56145767292107e-41, 1.33774563914851e-13, 1.31018253984329e-12, 
1.26291081169715e-11, 1.25596067133136e-10, 1.38451927615464e-09, 
1.90623084689258e-08, 4.13346862060707e-07, 2.57000620053891e-05, 
0.00584257176393386, 0.258897858120271, 0.928289223693575, 0.316472953831898, 
0.0150604098742057, 0.000157636305579563, 4.66131468431873e-07, 
1.02471388660295e-09, 8.14501436992245e-10, 6.14139871202027e-11, 
5.95236937841971e-12, 6.82398718856752e-13, 3.59696367652483e-45, 
4.17012864602969e-14, 3.61582027534016e-13, 2.99359617683961e-12, 
2.44700291837697e-11, 2.07141151264903e-10, 1.95144184735262e-09, 
2.3063051089858e-08, 4.32380395847584e-07, 2.42199262846122e-05, 
0.00528608113143016, 0.217875130836358, 0.774532881221181, 0.284901732794224, 
0.0154537854803841, 0.000183185641023271, 7.49559849539294e-07, 
7.11024159705725e-09, 5.03182614447118e-10, 3.41104188233311e-11, 
3.04474903274232e-12, 2.91565192035724e-49, 1.45537916525653e-14, 
1.14411789285803e-13, 8.40641488198468e-13, 5.92035604270047e-12, 
4.13543450691788e-11, 3.00704186586863e-10, 2.44790109904596e-09, 
2.51842772491441e-08, 4.16658016813605e-07, 2.2030173910067e-05, 
0.00464757376571756, 0.172524827842122, 0.588668692999348, 0.227992352386208, 
0.0139517782319954, 0.000188633229943610, 8.86576659202643e-07, 
8.13397456171407e-09, 2.93295902434683e-10, 1.79158142536354e-11, 
7.45440431708058e-47, 5.57324949893741e-15, 4.04199649080243e-14, 
2.69734042179215e-13, 1.68938567781956e-12, 1.01927093362378e-11, 
6.13516958431207e-11, 3.86968272588105e-10, 2.75370252448967e-09, 
2.50248238015754e-08, 3.7340350663148e-07, 1.97272833278079e-05, 
0.00400365893374786, 0.129796777376395, 0.412414570496338, 0.164160599019082, 
0.0111950329180545, 0.000173055912545285, 8.82222548801061e-07, 
4.80789035062023e-09, 1.62361855274262e-10, 4.83378466824916e-56, 
8.87835079570885e-18, 6.32443372364351e-17, 4.07759026116548e-16, 
2.41133621758854e-15, 1.32984475458358e-14, 6.98407810862943e-14, 
3.5876395093759e-13, 1.86752746531279e-12, 1.03460205332741e-11, 
6.5602704947161e-11, 5.36647863367684e-10, 7.15363285132962e-09, 
2.90880056585854e-07, 3.40712247087175e-05, 0.000889612332838851, 
0.00257111974780624, 0.000787883478550474, 3.37033079485353e-05, 
3.19292591662659e-07, 1.25686609615895e-09, 2.20162002662816e-172, 
1.18597942112121e-48, 6.527184937565e-15, 3.76449635250464e-14, 
1.98306897773082e-13, 9.70704477624762e-13, 4.51159875267329e-12, 
2.04683300082797e-11, 9.4028641613087e-11, 4.60396075448249e-10, 
2.59711739759405e-09, 1.92985480623786e-08, 2.52186810950586e-07, 
1.66549678505953e-05, 0.00284973810807315, 0.0647861189211352, 
0.164928028751616, 0.0648087223198986, 0.00527057924509832, 0.000105880347544938, 
6.77764435724914e-07, 2.28917610742849e-62, 4.77089470347806e-16, 
2.90684328179923e-15, 1.58418783461786e-14, 7.81422076667516e-14, 
3.54025380712877e-13, 1.49985566240899e-12, 6.0772181174916e-12, 
2.42262881670020e-11, 9.86595400000035e-11, 4.32695300245282e-10, 
2.21589694896341e-09, 1.52732771943930e-08, 1.95128248997183e-07, 
1.6227265119312e-05, 0.00236310192186473, 0.0433722389788253, 
0.0956364137992563, 0.0362445630341557, 0.00315366776340453, 
7.16975146683838e-05, 5.80651995967573e-63, 2.34504934024876e-16, 
1.36875718371988e-15, 7.1042764643222e-15, 3.31337397882331e-14, 
1.40655421593731e-13, 5.51935966365771e-13, 2.04006223917774e-12, 
7.26797589881895e-12, 2.56974962454299e-11, 9.37288857779561e-11, 
3.72485772585405e-10, 1.75589938246813e-09, 1.14398993072651e-08, 
1.48193436103776e-07, 1.63921456901643e-05, 0.00193532901795850, 
0.028105645771033, 0.052765310952557, 0.0189719774467987, 0.00174369601611880
), .Dim = c(21, 18), .Dimnames = list(c("1.4", "1.42", "1.44", 
"1.46", "1.48", "1.5", "1.52", "1.54", "1.56", "1.58", "1.6", 
"1.62", "1.64", "1.66", "1.68", "1.7", "1.72", "1.74", "1.76", 
"1.78", "1.8"), c("2.32", "2.345", "2.37", "2.395", "2.42", "2.445", 
"2.47", "2.495", "2.52", "2.545", "2.57", "2.595", "2.62", "2.645", 
"2.67", "2.695", "2.72", "2.745")))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 09:19:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 10:19:17 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Tue, 16 Nov 1999 08:51:23 +0100 (MET)"
References: <199911160751.IAA11396@pubhealth.ku.dk>
Message-ID: <x21z9qlroq.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> I was getting worried. 0.65 is the first version that I had not been
> able to crash. Well the following gives a seg fault on Intel RH5.2
> with R0.65.1:
> plot(rnorm(20),xlab=expression(mu[Inf]))
> You can guess what I was trying to do, as I used infty first and that
> did not work. (I now know the correct formula.)
>   Jim

Doesn't crash in my version of 0.90pre...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 10:21:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 11:21:31 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Peter Dalgaard BSA's message of "16 Nov 1999 10:19:17 +0100"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> jlindsey@alpha.luc.ac.be writes:
> 
> > I was getting worried. 0.65 is the first version that I had not been
> > able to crash. Well the following gives a seg fault on Intel RH5.2
> > with R0.65.1:
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> > You can guess what I was trying to do, as I used infty first and that
> > did not work. (I now know the correct formula.)
> >   Jim
> 
> Doesn't crash in my version of 0.90pre...

..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
session? If so, try running it under R -d gdb (just type "r" to run
the program) and tell us where it crashed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 11:03:08 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 12:03:08 +0100 (MET)
Subject: spikes in contour and persp (PR#327)
Message-ID: <199911161103.MAA15162@pubhealth.ku.dk>

> From: jlindsey@alpha.luc.ac.be
> Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> 
> The following matrix of normed likelihoods should give a smooth
> surface but instead gives a series of spikes in both persp and contour
> (the dim labels are the axes values). I know an algorithm cannot be
> infallible but it would be nice to have some parameters to control the
> smoothing. (It takes close to an hour to produce this matrix on a
> Pentium II 300mh. It was after that that it crashed with the Inf in my
> previous bug message...)


I am sorry, but I don't understand. contour does not do any
smoothing, but interpolates assuming smoothness.  The data
appears to me to be a series of spikes just off the diagonal, and not
what contour thinks of as a smooth surface.  It is common to 
interpolate the data from such a coarse grid before contouring.

persp just plots the data with visual linear interpolation.

> round(like*100,0)
     2.32 2.345 2.37 2.395 2.42 2.445 2.47 2.495 2.52 2.545 2.57 2.595 2.62
1.4     0     0    0     0    0     0    0     0    0     0    0     0    0
1.42    0     1    0     0    0     0    0     0    0     0    0     0    0
1.44    0     1    2     0    0     0    0     0    0     0    0     0    0
1.46    0     0    2     5    0     0    0     0    0     0    0     0    0
1.48    0     0    0     7    9     0    0     0    0     0    0     0    0
1.5     0     0    0     1   17    15    1     0    0     0    0     0    0
1.52    0     0    0     0    3    34   21     1    0     0    0     0    0
1.54    0     0    0     0    0     6   57    26    1     0    0     0    0
1.56    0     0    0     0    0     0   12    79   29     1    0     0    0
1.58    0     0    0     0    0     0    0    19   95    29    1     0    0
1.6     0     0    0     0    0     0    0     1   26   100   26     1    0
1.62    0     0    0     0    0     0    0     0    1    31   93    22    0
1.64    0     0    0     0    0     0    0     0    0     1   32    77   17
1.66    0     0    0     0    0     0    0     0    0     0    2    28   59
1.68    0     0    0     0    0     0    0     0    0     0    0     2   23
1.7     0     0    0     0    0     0    0     0    0     0    0     0    1
1.72    0     0    0     0    0     0    0     0    0     0    0     0    0
1.74    0     0    0     0    0     0    0     0    0     0    0     0    0
1.76    0     0    0     0    0     0    0     0    0     0    0     0    0
1.78    0     0    0     0    0     0    0     0    0     0    0     0    0
1.8     0     0    0     0    0     0    0     0    0     0    0     0    0
     2.645 2.67 2.695 2.72 2.745
1.4      0    0     0    0     0
1.42     0    0     0    0     0
1.44     0    0     0    0     0
1.46     0    0     0    0     0
1.48     0    0     0    0     0
1.5      0    0     0    0     0
1.52     0    0     0    0     0
1.54     0    0     0    0     0
1.56     0    0     0    0     0
1.58     0    0     0    0     0
1.6      0    0     0    0     0
1.62     0    0     0    0     0
1.64     0    0     0    0     0
1.66    13    0     0    0     0
1.68    41    0     0    0     0
1.7     16    0     6    0     0
1.72     1    0    16    4     0
1.74     0    0     6   10     3
1.76     0    0     1    4     5
1.78     0    0     0    0     2
1.8      0    0     0    0     0


If I do some interpolation

library(akima)
x <- as.numeric(rownames(like))
y <- as.numeric(colnames(like))
xx <- expand.grid(x=x, y=y)
like1 <- interp(xx$x, xx$y, like, seq(1.4, 1.8, len=50), seq(2.3, 2.8, len=50))
contour(like1$x, like1$y,like1$z)

I get a slightly smoother result, but still five peaks.  (Are the
values for col=2.67 correct?)

I guess you need to evaluate this on a finer grid near the diagonal,
and probably adjust the coordinate system to get enough resolution
on the anti-diagonal.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 13:15:59 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 14:15:59 +0100
Subject: spikes in contour and persp (PR#327)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 16 Nov 1999 12:03:08 +0100 (MET)"
References: <199911161103.MAA15162@pubhealth.ku.dk>
Message-ID: <x21z9q37cg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > From: jlindsey@alpha.luc.ac.be
> > Date: Tue, 16 Nov 1999 08:57:00 +0100 (MET)
> > 
> > The following matrix of normed likelihoods should give a smooth
> > surface but instead gives a series of spikes in both persp and contour
> > (the dim labels are the axes values). I know an algorithm cannot be
> > infallible but it would be nice to have some parameters to control the
> > smoothing. (It takes close to an hour to produce this matrix on a
> > Pentium II 300mh. It was after that that it crashed with the Inf in my
> > previous bug message...)
> 
> 
> I am sorry, but I don't understand. contour does not do any
> smoothing, but interpolates assuming smoothness.  The data
> appears to me to be a series of spikes just off the diagonal, and not
> what contour thinks of as a smooth surface.  It is common to 
> interpolate the data from such a coarse grid before contouring.
> 
> persp just plots the data with visual linear interpolation.
> 

To elaborate a little: The contouring is of course algorithm
dependent.

Let's look at a section of the data:

    1   17    15    1     0    0  
    0    3    34   21     1    0  
    0    0     6   57    26    1  
    0    0     0   12    79   29  

One contouring method works by linear interpolation on triangles, so when
creating the line for, say z=25, it will draw four lines *around* 34,
then one connecting the 21-57 line, the 6-57, the 12-57 and the 12-79
and on the other end 21-26 (diag) 26-1 (vertical) 26-1 (horizontal) and 1-29.
This gives two disjoint contours and an apparent peak at 34. The
algorithm in R is pretty similar to this as far as I recall.

Alternatively one could have bilinear interpolation which would fit a
curve with a saddlepoint to the square

34 21
 6 57

and draw one connected contour. However, bilinear interpolation is a
bit of a pain, because the contours are not lines, but pieces of a
hyperbola, which is not nearly as easy to draw. And if the contour
level is close enough to 34, you'll get the peak effect anyway.

In any case, this is not a bug, it's an algorithm with shortcomings.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 13:51:25 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 14:51:25 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>> jlindsey@alpha.luc.ac.be writes:
>> 
>> > I was getting worried. 0.65 is the first version that I had not been
>> > able to crash. Well the following gives a seg fault on Intel RH5.2
>> > with R0.65.1:
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> > You can guess what I was trying to do, as I used infty first and that
>> > did not work. (I now know the correct formula.)
>> >   Jim
>> 
>> Doesn't crash in my version of 0.90pre...

> ..nor in 0.65.1 on RH6.1. Can you reproduce that on a freshly opened
> session? If so, try running it under R -d gdb (just type "r" to run
> the program) and tell us where it crashed.

You rang?

> plot(rnorm(20),xlab=expression(mu[Inf]))

Program received signal SIGSEGV, Segmentation fault.
0x4019a3ce in   ()
(gdb) bt
#0  0x4019a3ce in   ()
#1  0x4019798e in   ()
#2  0x4019100e in   ()
#3  0x4018d81c in vfprintf ()
#4  0x401980b3 in vsprintf ()
#5  0x40193351 in sprintf ()
#6  0x80cc359 in asChar (x=0x20202020)
    at /home/Hornik/src/apps/R/r-devel/R/src/main/util.c:200
#7  0x20202020 in ?? ()

Helpful?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sunadmin@statistik.uni-dortmund.de  Tue Nov 16 14:21:35 1999
From: sunadmin@statistik.uni-dortmund.de (sunadmin@statistik.uni-dortmund.de)
Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161421.PAA18504@pubhealth.ku.dk>

Full_Name: Thomas Langhans
Version: 0.65
OS: Solaris 7
Submission from: (NULL) (129.217.131.31)


I tried to install the package "leap" on our Sun Enterprise 400 running Solaris
7,
but it fails: cause the g77 doesn't compiles the fortran-sources properly, I 
translated them with f2c to c-source.
Running R INSTALL produces the following message:
Installing package `leaps' ...
 libs
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
leapshdr.o
ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
leapshdr.o -lF77 -lI77
 R
 help
 >>> Building/Updating help pages for package `leaps'
     Formats: text html latex example 
 DONE (leaps)
DONE (INSTALL)

So anything seems to be fine. But any time I load the library, R raises an
error:

> library(leaps)
Error in dyn.load(file) : unable to load shared library
"/sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so":
  ld.so.1: /sw/sun4_55/R-0.65.0/lib/R/bin/R.binary: fatal: relocation error:
file /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so: symbol sig_die:
referenced symbol not found

The same error do I get when I install the package "ppr". Other packages work
fine.

I hope somebody can help me, cause these librarys are very important for a
running project
at our departement.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:15:57 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 16 Nov 1999 16:15:57 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161515.QAA19438@pubhealth.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Nov 16 15:18:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Nov 1999 16:18:26 +0100
Subject: Inf in expression (PR#326)
In-Reply-To: Kurt Hornik's message of "Tue, 16 Nov 1999 14:51:25 +0100 (CET)"
References: <199911160751.IAA11396@pubhealth.ku.dk> <x21z9qlroq.fsf@blueberry.kubism.ku.dk> <x27lji3ff8.fsf@blueberry.kubism.ku.dk> <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
Message-ID: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> You rang?
> 
> > plot(rnorm(20),xlab=expression(mu[Inf]))
> 
> Program received signal SIGSEGV, Segmentation fault.

I think I fixed it. Could you try that again?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 16 16:21:19 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 16 Nov 1999 17:21:19 +0100 (MET)
Subject: Installation of package fails (PR#328)
Message-ID: <199911161621.RAA20059@pubhealth.ku.dk>


> From: sunadmin@statistik.uni-dortmund.de
> Date: Tue, 16 Nov 1999 15:21:35 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: Installation of package fails (PR#328)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Thomas Langhans
> Version: 0.65
> OS: Solaris 7
> Submission from: (NULL) (129.217.131.31)
> 
> 
> I tried to install the package "leap" on our Sun Enterprise 400 running 
Solaris
> 7,
> but it fails: cause the g77 doesn't compiles the fortran-sources properly,

What is the error message?  They work for me.

>  I translated them with f2c to c-source.
> Running R INSTALL produces the following message:
> Installing package `leaps' ...
>  libs
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leaps.c -o leaps.o
> gcc -g -O2 -fPIC -I/sw/sun4_55/R-0.65.0/lib/R/include -c leapshdr.c -o
> leapshdr.o
> ld -G -o /sw/sun4_55/R-0.65.0/lib/R/library/leaps/libs/leaps.so leaps.o
> leapshdr.o -lF77 -lI77

Are those the libraries for g77? They look like those for f77 to me.
Do you have the current version (2.0) of leaps?  Does by any chance 
leaps/src/Makefile exist?  If so try deleting it.

AFAIK g77 on Solaris should have -lg2c -lm in FLIBS: that is what 
my installation (gcc-2.95 on Solaris 2.6) gives. If you use f2c, you
need -lf2c -lm.

> The same error do I get when I install the package "ppr". Other packages work
> fine.

Um. That is obselete, and its code is in package modreg, which must
have been installed at the original build. So that suggests your setup
is OK, but that a Makefile is wrong.


If you really get stuck I can let you have a pre-compiled version for leaps.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:44 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt.Hornik@ci.tuwien.ac.at)
Date: Tue, 16 Nov 1999 18:02:44 +0100 (MET)
Subject: Inf in expression (PR#326)
Message-ID: <199911161702.SAA20336@pubhealth.ku.dk>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Nov 16 17:02:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 16 Nov 1999 18:02:47 +0100 (CET)
Subject: Inf in expression (PR#326)
In-Reply-To: <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
References: <199911160751.IAA11396@pubhealth.ku.dk>
 <x21z9qlroq.fsf@blueberry.kubism.ku.dk>
 <x27lji3ff8.fsf@blueberry.kubism.ku.dk>
 <14385.24925.150329.437552@aragorn.ci.tuwien.ac.at>
 <x2n1se1n3x.fsf@blueberry.kubism.ku.dk>
Message-ID: <14385.36407.473934.711315@aragorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> You rang?
>> 
>> > plot(rnorm(20),xlab=expression(mu[Inf]))
>> 
>> Program received signal SIGSEGV, Segmentation fault.

> I think I fixed it. Could you try that again?

Yes (to both).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 21:39:19 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 10:39:19 +1300
Subject: (G)UI for R and in R
In-Reply-To: <6r4sen9zrx.fsf@franz.stat.wisc.edu>; from Douglas Bates on Mon, Nov 15, 1999 at 04:05:22PM -0600
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu>
Message-ID: <19991117103919.C13694@stat1.stat.auckland.ac.nz>

On Mon, Nov 15, 1999 at 04:05:22PM -0600, Douglas Bates wrote:
> First, let me say that I come from the command-line-oriented world and
> most of the time I find that graphical user interfaces just get in the
> way.  Like many people who use implementations of the S language
> (i.e. S-PLUS 3.x, S-PLUS 5.x, and R) on Unix/Linux systems, my
> preferred environment for running and editing S code is emacs with the
> ESS package.
> 
> My responses on a GUI for writing scripts are from this perspective
> but I do recognize that many people find a GUI much more comfortable
> than trying to remember lots of archane function names and, in the
> case of emacs, keystrokes.
> 

People who are interested in the GUI side of things might want to look at
http://stat.auckland.ac.nz/~lyndon/xmldef.html, which I did a couple of
months ago.  This is aimed at helping people construct function calls.  I
would also like to come up with an interface for something like wizards,
which would take beginners through the process of something like reading
in a dataset, and performing some analysis on it.  However, I am *not* a
stats person, so I would need some help with this.

The general idea is that if we specify GUI interfaces using an XML file
format, then implementing the interface on a particular platform is
fairly simple.

> Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:
> 
> > 2) for help with writing R scripts
> >    Does R help me with a graphical introspection tool?  I guess this
> > is what the object explorer is meant for.  Can I bring up a list of
> > objects and kinda click my way to the attributes of the object?  its
> > data?  (Not unusual scenario: And why does apply not work this time?
> > Oh, wrong dimensions, I forgot the "drop=F" option...)  Can I click on
> > a function and send it to an editor?  Find out where it came from?
> 
> (BTW, I think you mean "graphical inspection tool".)  Although not a
> substitute for graphical inspection, I find Martin Maechler's "str"
> function to be invaluable when I am trying to remember the structure
> of various objects, including (and perhaps especially) those for which
> I designed the structure.
> 
> As far as editing a function definition, there are excellent
> facilities within ESS for that.  Object name completion within ESS is
> by itself worth the price of learning to use the mode.

Editing is one of my main todo items.  What features of ESS are really
important to people (object name completion is already something I want
to do)?

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 21:59:28 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 13:59:28 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 10:39:19 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz>
Message-ID: <87bt8um727.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Editing is one of my main todo items.  What features of ESS
    LD> are really important to people (object name completion is
    LD> already something I want to do)?

The ones important to me:

- Versioning of objects (i.e. placing text versions of R functions
  under version control)
- literate data analysis/programming
- ability to send R code to multiple processes

and most importantly: 
- Emacs key-bindings 
:-).

In general, I think the third is useful for a GUI, the first would be
nice, and the 4th would be crucial -- probably VI bindings, as
well... 

Now for some less cynical feedback: Looking at your XML code, it'd be
nice to have a means of bringing up an example, i.e. a filled out
screen with an additional text window which described what could be
done (you do/are having a help-feature-window-thingy, right)?

I.e. create a button on the window which would show examples for
read.table for a tab-sep'd file, CSV file, etc...  This would
literally be the R-ex files GUI'd up (gooey'd up... I like that one,
and so would my 2-year old :-), with a text window described what
each or a selected one would do.

Tres cool, and we can't really do that to the same extent with ESS
(well, we can dump code from the help buffer, but it's really run, not 
an example!). 

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Nov 16 22:38:00 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 17 Nov 1999 11:38:00 +1300
Subject: (G)UI for R and in R
In-Reply-To: <87bt8um727.fsf@alpha.cfas.washington.edu>; from A.J. Rossini on Tue, Nov 16, 1999 at 01:59:28PM -0800
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu>
Message-ID: <19991117113800.D13694@stat1.stat.auckland.ac.nz>

On Tue, Nov 16, 1999 at 01:59:28PM -0800, A.J. Rossini wrote:
> 
> >>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:
> 
>     LD> Editing is one of my main todo items.  What features of ESS
>     LD> are really important to people (object name completion is
>     LD> already something I want to do)?
> 
> The ones important to me:
> 
> - Versioning of objects (i.e. placing text versions of R functions
>   under version control)
> - literate data analysis/programming
> - ability to send R code to multiple processes
> 
> and most importantly: 
> - Emacs key-bindings 
> :-).
> 
> In general, I think the third is useful for a GUI, the first would be
> nice, and the 4th would be crucial -- probably VI bindings, as
> well... 
> 

The first is probably not possible.  I think that this is not too difficult
in Emacs because there is already code to do version control.  The third is
also difficult, simply because an editor is created for a particular R
process.  Copy and paste would work, though :-).

Could you explain the second item (literate data analysis/programming)?  I
have a vague understanding of literate programming (mostly in the context
of Web), but I don't know very much about it.

The fourth item might actually be possible in the next major version of
GTK+ (the widget set that Gnome uses).  However, that's a little way off.

Based on this, I'd say that it will be pretty difficult to replicate ESS's
functionality.  I guess some people will be sticking with Emacs (strange
people... ;-).

> Now for some less cynical feedback: Looking at your XML code, it'd be
> nice to have a means of bringing up an example, i.e. a filled out
> screen with an additional text window which described what could be
> done (you do/are having a help-feature-window-thingy, right)?
> 
> I.e. create a button on the window which would show examples for
> read.table for a tab-sep'd file, CSV file, etc...  This would
> literally be the R-ex files GUI'd up (gooey'd up... I like that one,
> and so would my 2-year old :-), with a text window described what
> each or a selected one would do.
> 
> Tres cool, and we can't really do that to the same extent with ESS
> (well, we can dump code from the help buffer, but it's really run, not 
> an example!). 

Very cool idea.  I'll have a think about how to do it (finding the time
to actually implement it is another matter).

-- 
Lyndon Drake                       | Desktop:      http://www.gnome.org
isenguard                          | Mail client:  http://www.mutt.org
ICQ#: 12558803                     | Editor:       http://www.vim.org
http://stat.auckland.ac.nz/~lyndon | OS:           http://www.linux.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Nov 16 22:54:54 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 16 Nov 1999 14:54:54 -0800
Subject: (G)UI for R and in R
In-Reply-To: Lyndon Drake's message of "Wed, 17 Nov 1999 11:38:00 +1300"
References: <199911152047.PAA18728@infiniti.ece.cmu.edu> <6r4sen9zrx.fsf@franz.stat.wisc.edu> <19991117103919.C13694@stat1.stat.auckland.ac.nz> <87bt8um727.fsf@alpha.cfas.washington.edu> <19991117113800.D13694@stat1.stat.auckland.ac.nz>
Message-ID: <87u2mmkpxd.fsf@alpha.cfas.washington.edu>


>>>>> "LD" == Lyndon Drake <lyndon@stat.auckland.ac.nz> writes:

    LD> Based on this, I'd say that it will be pretty difficult to
    LD> replicate ESS's functionality.  I guess some people will be
    LD> sticking with Emacs (strange people... ;-).

But you should be able to get object completions and the emacs/vi
keybindings :-).  Those are the basic needs...

Syntax highlighting would be nice, if easily possible.

    >> Now for some less cynical feedback: Looking at your XML code,
    >> it'd be nice to have a means of bringing up an example, i.e. a
    >> filled out screen with an additional text window which
    >> described what could be done (you do/are having a
    >> help-feature-window-thingy, right)?
    >>
    >> I.e. create a button on the window which would show examples
    >> for read.table for a tab-sep'd file, CSV file, etc...  This
    >> would literally be the R-ex files GUI'd up (gooey'd up... I
    >> like that one, and so would my 2-year old :-), with a text
    >> window described what each or a selected one would do.
    >>
    >> Tres cool, and we can't really do that to the same extent with
    >> ESS (well, we can dump code from the help buffer, but it's
    >> really run, not an example!).

    LD> Very cool idea.  I'll have a think about how to do it (finding
    LD> the time to actually implement it is another matter).

Actually, it isn't too hard.  Read up on what XSL (the XML
Stylesheets) can do.  Basically, 

XML interface ->  what you described, under one path (my-interface.xml)
	      ->  the wizards/examples, under another path 
		  (my-example-and-wizards.xml)

and then the 2 new *.xml files are used for corresponding stuff...

Best of all, all the information is there in the documentation!  (the
R-ex stuff, I mean).

The catch?  You need an XSLT engine written in C (or C++).  I think
there are a few in C++ (I know there are for Python and Java) but have 
no pointers.  

For a decent powerpoint example on XSLT which I found incredible lucid
(it's GPL'd -- weird notion, MS formatted information publically
available), see:
	http://www.xfront.org/xsl.html
and follow the links...

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 20 18:26:33 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 20 Nov 1999 19:26:33 +0100 (MET)
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
Message-ID: <199911201826.TAA28900@pubhealth.ku.dk>

Dear Sirs,

I had the following (reproducible) problem:

g1 <- gl(3,4)
g2 <- gl(2,2,12)
y <- rnorm(12)
AA <- aggregate(y,list(g1,g2),mean)

print(AA,2)                       # I should've said 'digits=2' but ... 
Segmentation fault (core dumped)

# print(AA)  and  print(AA,digits=2) work as expected

Many thanks,  -Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 20 20:33:34 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Nov 1999 21:33:34 +0100
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted) (PR#330)
In-Reply-To: rnassar@duke.edu's message of "Sat, 20 Nov 1999 19:26:33 +0100 (MET)"
References: <199911201826.TAA28900@pubhealth.ku.dk>
Message-ID: <x2903shpi9.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> Dear Sirs,
> 
> I had the following (reproducible) problem:
> 
> g1 <- gl(3,4)
> g2 <- gl(2,2,12)
> y <- rnorm(12)
> AA <- aggregate(y,list(g1,g2),mean)
> 
> print(AA,2)                       # I should've said 'digits=2' but ... 
> Segmentation fault (core dumped)

Still there in 0.90.0 pre, looks easy to fix. Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Nov 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Nov 1999 07:15:03 +0100
Subject: Bug list summary (automatic post)
Message-ID: <199911210615.HAA11567@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
--same as PR#257
* PR# 305 *
Subject: bug in sample
From: Robert Gentleman <rgentlem@jimmy.harvard.edu>
Date: Mon, 1 Nov 1999 16:32:15 -0500
--Is this a bug? Seems to be as documented and as the prototype

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 323 *
Subject:  { and } in examples get confused in help 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 14 Nov 1999 22:51:43 GMT
* PR# 324 *
Subject: R 0.65.1 config bug
From: "Dr K.M. Briggs" <kmb28@cus.cam.ac.uk>
Date: Mon, 15 Nov 1999 13:38:42 +0000 (GMT)
* PR# 325 *
Subject: xlim, ylim problem in barplot
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Mon, 15 Nov 1999 16:07:43 -0500 (EST)
* PR# 326 *
Subject: Inf in expression
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:51:13 +0100 (MET)
* PR# 327 *
Subject: spikes in contour and persp
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 16 Nov 1999 08:56:57 +0100 (MET)
* PR# 328 *
Subject: Installation of package fails
From: sunadmin@statistik.uni-dortmund.de
Date: Tue, 16 Nov 1999 15:21:34 +0100 (MET)
* PR# 329 *
Subject: ´óÁ¿¹©Ó¦»ÆÓñÊ¯
From: "superabcd" <superabcd@21cn.com>
Date: Fri, 19 Nov 1999 18:51:24
* PR# 330 *
Subject: seg.fault: 'print(aggregate(),n)' (digits= omitted)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 20 Nov 1999 13:22:21 -0500 (EST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Nov 21 19:48:44 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 21 Nov 1999 20:48:44 +0100 (MET)
Subject: continuous key press results in core dump (PR#331)
Message-ID: <199911211948.UAA01574@pubhealth.ku.dk>

I  encountered this today (I admit it is a result of downright abuse)

Segmentation fault under abnormal conditions (as when stupid finger
accidentally leaned on key): 

at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
characters but NOT when enclosed in " ", and not if numbers. 

> 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
[1] 1.234568e+157
> zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
Segmentation fault (core dumped)

Again, many thanks and best wishes,

Rashid
--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 20:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Nov 1999 21:58:36 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: rnassar@duke.edu's message of "Sun, 21 Nov 1999 20:48:44 +0100 (MET)"
References: <199911211948.UAA01574@pubhealth.ku.dk>
Message-ID: <x2bt8nef43.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> I  encountered this today (I admit it is a result of downright abuse)
> 
> Segmentation fault under abnormal conditions (as when stupid finger
> accidentally leaned on key): 

...which is exactly why this kind of fault mustn't happen.

> at 128 (at least by my count) "continuous" (zzzzzzzzz... or 123qwertyuio...)
> characters but NOT when enclosed in " ", and not if numbers. 
> 
> > 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678
> [1] 1.234568e+157
> > zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
> Segmentation fault (core dumped)

Yup, in dstruct.c we have

static int ddVal(SEXP name)
{
    char buf[128], *endp, *val;
    int rval;

    strcpy(buf, CHAR(name));

..which at the very least has to have a str*n*cpy in order not to
corrupt the stack if CHAR(name) is too large. Or perhaps better:
allocate buf explicitly instead of via a stack variable.

Not sure I'll be able to get it fixed tonight though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Nov 21 23:24:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 00:24:19 +0100
Subject: continuous key press results in core dump (PR#331)
In-Reply-To: Peter Dalgaard BSA's message of "21 Nov 1999 21:58:36 +0100"
References: <199911211948.UAA01574@pubhealth.ku.dk> <x2bt8nef43.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ln7r5syk.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Yup, in dstruct.c we have
> 
> static int ddVal(SEXP name)
> {
>     char buf[128], *endp, *val;
>     int rval;
> 
>     strcpy(buf, CHAR(name));
> 
> ..which at the very least has to have a str*n*cpy in order not to
> corrupt the stack if CHAR(name) is too large. Or perhaps better:
> allocate buf explicitly instead of via a stack variable.
> 
> Not sure I'll be able to get it fixed tonight though.

Squished. That buffer should never have been there in the first place...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:13:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:13:34 -0500
Subject: R-0.90.0 untar
Message-ID: <38396BAE.FB736CBD@bank-banque-canada.ca>

 I had a couple of problems getting R 0.90.0.  In case anyone has
similar problems, I though I would mention them.

1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
service does not seem to be available. Perhaps this is intended. I only
discovered it because I thought the file I got through Netscape might be
corrupted. (I don't understand why Netscape ftp://... should work but
anonymous ftp does not.)

2/ From Netscape (Linux) with
ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
or
http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
onto my file server works. However, if I try to untar on a workstation
in a directory mounted from the file server, it fails with lots of
messages about "Error while closing: Operation not permitted." I suspect
this may be a peculiar combination of user/group ownerships (perhaps not
all with the same ids on my workstation and server), but I have never
had the problem before (not even with R-devel from a few days ago).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Nov 22 16:30:54 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Nov 1999 17:30:54 +0100 (MET)
Subject: R-0.90.0 untar
In-Reply-To: <38396BAE.FB736CBD@bank-banque-canada.ca>
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <14393.28606.63116.442782@gargle.gargle.HOWL>

>>>>> On Mon, 22 Nov 1999 11:13:34 -0500, Paul Gilbert <pgilbert@bank-banque-canada.ca> said:

    PaulG>  I had a couple of problems getting R 0.90.0.  In case anyone
    PaulG> has similar problems, I though I would mention them.

    PaulG> 1/ I can't use "ftp cvs.r-project.org" from either home or
    PaulG> work. The ftp service does not seem to be available. Perhaps
    PaulG> this is intended. I only discovered it because I thought the
    PaulG> file I got through Netscape might be corrupted. (I don't
    PaulG> understand why Netscape ftp://... should work but anonymous ftp
    PaulG> does not.)

anonymous FTP (through emacs' ange-ftp/efs) works fine for me.

    PaulG> 2/ From Netscape (Linux) with
    PaulG> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz or
    PaulG> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz

    PaulG> I get a file which gunzips ok. Also tar -xf in /tmp or when
    PaulG> signed onto my file server works. However, if I try to untar on
    PaulG> a workstation in a directory mounted from the file server, it
    PaulG> fails with lots of messages about "Error while closing:
    PaulG> Operation not permitted." I suspect this may be a peculiar
    PaulG> combination of user/group ownerships (perhaps not all with the
    PaulG> same ids on my workstation and server), but I have never had the
    PaulG> problem before (not even with R-devel from a few days ago).

same big problem for me.
I thought it was because had other big problems today,
but the reason seems these funny permissions.

tar tfvz R-0.90.0.tgz
lists most files with permissions

-rw-rwSr--

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 16:47:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 17:47:41 +0100
Subject: R-0.90.0 untar
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:13:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca>
Message-ID: <x27lja1niq.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

>  I had a couple of problems getting R 0.90.0.  In case anyone has
> similar problems, I though I would mention them.
> 
> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The ftp
> service does not seem to be available. Perhaps this is intended. I only
> discovered it because I thought the file I got through Netscape might be
> corrupted. (I don't understand why Netscape ftp://... should work but
> anonymous ftp does not.)

Works from here. The machine doesn't like you to login using 'guest'
but insists on 'anonymous', though. Also, tcp-wrappers may get you if
you login from a system with no valid DNS entry.
 
> 2/ From Netscape (Linux) with
> ftp://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> or
> http://cvs.r-project.org/pub/CRAN/src/base/R-0.90.0.tgz
> 
> I get a file which gunzips ok. Also  tar -xf  in /tmp or when signed
> onto my file server works. However, if I try to untar on a workstation
> in a directory mounted from the file server, it fails with lots of
> messages about "Error while closing: Operation not permitted." I suspect
> this may be a peculiar combination of user/group ownerships (perhaps not
> all with the same ids on my workstation and server), but I have never
> had the problem before (not even with R-devel from a few days ago).

???? I see it too. There's an S bit set in the tar file for those files
that won't install. But what the %/&%/ is it doing there? I'll have a
look. Presumably, that's a permission change which requires setuid
root to set, and the file system is mounted w/o root permission.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 16:52:27 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 11:52:27 -0500
Subject: R 0.90.0 configure
Message-ID: <383974CA.F27D565D@bank-banque-canada.ca>

After working around previously mentioned untar problems I tried
./configure, which failed immediately because of improper permissions on
config.site. When I changed the permissions on config.site it failed
with:

./configure:  ./config.site:   Input/output error.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:11:00 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:11:00 +0100
Subject: R 0.90.0 configure
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 11:52:27 -0500"
References: <383974CA.F27D565D@bank-banque-canada.ca>
Message-ID: <x24see1mfv.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> After working around previously mentioned untar problems I tried
> ./configure, which failed immediately because of improper permissions on
> config.site. When I changed the permissions on config.site it failed
> with:
> 
> ./configure:  ./config.site:   Input/output error.

I've put up new versions without the offending setgid bit. Please
retry. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Nov 22 17:18:47 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 22 Nov 1999 12:18:47 -0500
Subject: R-0.90.0 untar
In-Reply-To: Your message of "Mon, 22 Nov 1999 17:30:54 +0100."
 <14393.28606.63116.442782@gargle.gargle.HOWL>
Message-ID: <199911221718.MAA19296@infiniti.ece.cmu.edu>


Martin Maechler <maechler@stat.math.ethz.ch> writes:

Martin> tar tfvz R-0.90.0.tgz
Martin> lists most files with permissions
Martin> 
Martin> -rw-rwSr--

One reason you may get these warnings is when you try this in AFS
land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
the set-gid bit and it wouldn't make much sense anyway for AFS.

So I'm not surprised that some people see a different behavior between
local untaring and untaring on a mounted disk.

Hmm, the odd thing may be that I usually see the set-gid bit only for
directories (where it's "standard" to have them for a Linux box).

	-tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:34:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:34:53 +0100
Subject: R-0.90.0 untar
In-Reply-To: Thomas Vogels's message of "Mon, 22 Nov 1999 12:18:47 -0500"
References: <199911221718.MAA19296@infiniti.ece.cmu.edu>
Message-ID: <x21z9i1lc2.fsf@blueberry.kubism.ku.dk>

Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> Martin> tar tfvz R-0.90.0.tgz
> Martin> lists most files with permissions
> Martin> 
> Martin> -rw-rwSr--
> 
> One reason you may get these warnings is when you try this in AFS
> land (maybe also with NFS).  As far as I can tell, AFS doesn't allow
> the set-gid bit and it wouldn't make much sense anyway for AFS.
> 
> So I'm not surprised that some people see a different behavior between
> local untaring and untaring on a mounted disk.
> 
> Hmm, the odd thing may be that I usually see the set-gid bit only for
> directories (where it's "standard" to have them for a Linux box).

Probably when we setgid our development directories the files in CVS
got setgid as well. (chmod -R will do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:37:34 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:37:34 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk>
Message-ID: <38397F5E.EF7C01AE@bank-banque-canada.ca>

>> 1/ I can't use "ftp cvs.r-project.org" from either home or work. The
ftp
>> service does not seem to be available. Perhaps this is intended. I
only
>> discovered it because I thought the file I got through Netscape might
be
>> corrupted. (I don't understand why Netscape ftp://... should work but

>> anonymous ftp does not.)

>Works from here. The machine doesn't like you to login using 'guest'
>but insists on 'anonymous', though. Also, tcp-wrappers may get you if
>you login from a system with no valid DNS entry.

I'm working behind a firewall in both cases, at home using IPmasq.
IPmasq should give a valid IP address, but very possibly there is no DNS
entry for my home IP address. The IP masq address will not be the same
as my workstation address. From work, the firewall will change the IP
address of my workstation and replace it with one that should resolve ok
by DNS. In any case, I've never had serious trouble with ftp from either
home or work.

At home my system just waits to timeout, but at work I can break out and
I get the message "Service not available, remote server has closed the
connection." Are you sure you don't have some special priveldges coming
from an "r-project.org" domain? Certainly ftp could be set up for that.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 17:44:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 12:44:25 -0500
Subject: R 0.90.0 configure
References: <383974CA.F27D565D@bank-banque-canada.ca> <x24see1mfv.fsf@blueberry.kubism.ku.dk>
Message-ID: <383980F9.47F7651A@bank-banque-canada.ca>

>I've put up new versions without the offending setgid bit. Please
retry.

That looks better. Untar is ok and configure seems to be working. It
will be a few minutes before I compile.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 22 17:48:08 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Nov 1999 18:48:08 +0100
Subject: ftp cvs.r-project.org
In-Reply-To: Paul Gilbert's message of "Mon, 22 Nov 1999 12:37:34 -0500"
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca>
Message-ID: <x2u2mezacn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Wouldn't think so, but I can recheck from home (which is masqueraded
via an ISP, like your setup). Still wouldn't explain your differences
from Netscape ftp://.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 22 17:54:09 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 Nov 1999 17:54:09 +0000 (GMT)
Subject: ftp cvs.r-project.org
Message-ID: <199911221754.RAA11594@toucan.stats.ox.ac.uk>

> Date: Mon, 22 Nov 1999 12:37:34 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> At home my system just waits to timeout, but at work I can break out and
> I get the message "Service not available, remote server has closed the
> connection." Are you sure you don't have some special priveldges coming
> from an "r-project.org" domain? Certainly ftp could be set up for that.

Well, I am not coming from one, and it works for me. Indeed, as I am
behind a compulsory proxy, it is not me that the Wisconsin machine sees
but a UK public proxy machine.  Connections to Wisconsin from here are
extremely slow today, and I have had lots of problems with timeouts to
that machine on other days. It might be worth trying on another day.

Using http with wget is probably a quicker route, as http is a more
flexible protocol.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 22 20:06:29 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Nov 1999 15:06:29 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3839A244.A4BCF69E@bank-banque-canada.ca>

PD>Wouldn't think so, but I can recheck from home (which is masqueraded
PD>via an ISP, like your setup). Still wouldn't explain your differences

PD>from Netscape ftp://.
Please let me know what you find from home. I just re-tried Netscape
ftp:// and  it would not work either, which makes more sense. I must
have been trying too many things at the same time this morning. Netscape
http works fine. Wisconsin certainly was not  slow for me this morning
(R downloaded in less than a minute) but it seems to be having some
trouble now.

BDR>Well, I am not coming from one, and it works for me. Indeed, as I am

BDR>behind a compulsory proxy...
This is similar to what I'm doing from work, but only http and not ftp
work for me. I'll try to get our security guru to see if he can tell
what's wrong. I usually do use http, for the reasons you mention, but I
was trying to narrow down the source of other problems I was having this
morning when I ran into the ftp difficulty.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:14:01 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:14:01 +0100 (MET)
Subject: compile error for mkString on alpha (PR#332)
Message-ID: <199911231414.PAA25164@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


I had to apply the following patch to be able to compile on 
an alpha with DU 4.0E:
###############################################
--- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
+++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
@@ -56,7 +56,8 @@
 SEXP           mkFloat(char *);
 SEXP           mkInteger(char *);
 SEXP           mkNA(void);
-SEXP           mkString(const char *);
+typedef const char cchar;
+SEXP           mkString(cchar *);
 SEXP           mkTrue(void);
 
 /* Internal lexer / parser state variables */
@@ -1362,7 +1363,7 @@
 }
 
 
-SEXP mkString(const char *s)
+SEXP mkString(cchar *s)
 {
     SEXP t;
 
################################################
Without the patch I got:

cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^
cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
referenced type of the pointer value "SourceLine" is "unsigned char", which is
not compatible 
with "const signed char". (ptrmismatch)
                    STRING(source)[lines++]  = mkChar(SourceLine);
------------------------------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
referenced type of the pointer value "buf" is "signed char", which is not
compatible with "un
signed char". (ptrmismatch)
                                 buf, 1024, 1) == 0) return R_NilValue;
---------------------------------^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
1 has a different type than specified in an earlier declaration of this
function. (mism
atparam)
SEXP mkString(const char *s)
-----^
cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
of "mkString" is not compatible with the type of a previous declaration of
"mkString" at
 line number 59 in file ../../../R/src/main/gram.y. (notcompat)
SEXP mkString(const char *s)
-----^

Then I looked at the preprocessed sources:
cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -E gram.c > gram.E

grep -n mkString gram.E 
8915:SEXP mkString(const char*);
9564:SEXP               mkString(const char *);
11995:SEXP mkString( char *s)
12179:    protect(yylval = mkString(yytext));

I don't know why the third occurrence of "mkString(const char*);" 
(line 11995 of preproccessor output) has the "const" removed, it is present in
the 
source! But the trick with typedefing "const char" to "cconst" in the patch
above works. 


BTW, there are many warnings about mixing "char" and "unsigned char", 
not only in gram.c!

Albrecht



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 23 14:23:39 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 23 Nov 1999 15:23:39 +0100 (MET)
Subject: cpp problem on alpha (PR#333)
Message-ID: <199911231423.PAA25427@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: osf4.0
Submission from: (NULL) (143.205.61.73)


There is one wrong indented preprocessor directive in src/main/gram.y


cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
-ieee_with_inexact -g -c gram.c -o gram.o
cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #if 0
------------^
cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
ignored, skipping to end of line. (ignoretokens)
            #endif
------------^

the patch is:
#############################
--- gram.y.orig       Thu Oct  7 19:10:12 1999
+++ gram.y      Tue Nov 23 15:19:31 1999
@@ -1623,9 +1624,9 @@
                SourcePtr = FunctionSource + 8;
            }
            FunctionStart[FunctionLevel] = SourcePtr - 8;
-           #if 0
+#           if 0
            printf("%d,%d\n",SourcePtr - FunctionSource, FunctionLevel);
-           #endif
+#           endif
        }
        return kw;
     }
#############################

without the patch I got lots of debugging output with parse()

Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 23 15:26:50 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Nov 1999 10:26:50 -0500
Subject: ftp cvs.r-project.org
References: <38396BAE.FB736CBD@bank-banque-canada.ca> <x27lja1niq.fsf@blueberry.kubism.ku.dk> <38397F5E.EF7C01AE@bank-banque-canada.ca> <x2u2mezacn.fsf@blueberry.kubism.ku.dk>
Message-ID: <383AB23A.D6B389CE@bank-banque-canada.ca>

I just looked at the "ftp cvs.r-project.org" problem with one of our security
people and it appears that cvs.r-project.org is doing an "ident" back to the
host trying to come in. He says it is the first time he has every seen ftp
request an ident, and that we are not likely going to turn on responding to
ident since it is a possible security hole.

My IPmasq machine at home also does not return ident requests (tcp port 113), so
that is the reason it doesn't work either.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:29:59 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:29:59 +0100 (MET)
Subject: [R] problems with postscript device (PR#334)
Message-ID: <199911231529.QAA25929@pubhealth.ku.dk>

> From:          "Alvaro A. Novo" <novo@uiuc.edu>

Alvaro A. Novo wrote:
> 
> I would suggest that you use instead:
> 
>  plot(1:10,1:10,pch=1:5, cex=0.4)
> 			 ^^^^^^^
> 
> cex = 1 being the default.

You have to look at the postscript file, that is generated by the 
commands I gave in my mail!
The problem is that, even when using cex=0.4, the symbols have a 
different size! Also, symbol number 1 (the circle) is *not* effected 
by the cex-option (maybe because it is too small to be made any 
smaller).
This all concerns only the postscript device.

The only solution I see is not to use the circle-symbol for the
postscript device

Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Tue Nov 23 15:31:38 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Tue, 23 Nov 1999 16:31:38 +0100 (MET)
Subject: (Fwd) [R] problems with postscript device (PR#335)
Message-ID: <199911231531.QAA25960@pubhealth.ku.dk>

Hi,

I first sent this mail only to the help list.
But it seems to be a bug worth of fixing.

Wolfgang Koller

------- Forwarded Message Follows -------
From:          "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Organization:  University of Economics, Vienna
To:            r-help@stat.math.ethz.ch
Date:          Tue, 23 Nov 1999 15:14:23 CET (+0100)
Subject:       [R] problems with postscript device

Hi!

The postscript device in 0.90 does not produce symbols (pch=) as it 
should. E.g.:


postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
plot(1:10,1:10,pch=1:5)
legend(1,9,letters[1:5],pch=1:5)
dev.off()

The result looks quite different compared to the X-windows version. 
The symbol 1 (pch=1) is much to small, while the other symbols 
seem to big.

Is it a bug? How can I work it around?


Wolfgang Koller



----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 15:48:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 16:48:04 +0100 (MET)
Subject: [R] problems with postscript device (PR#336)
Message-ID: <199911231548.QAA26178@pubhealth.ku.dk>

>>>>> "WoKo" == Wolfgang Koller <koller2@fgr.wu-wien.ac.at> writes:

    WoKo> Hi!  The postscript device in 0.90 does not produce symbols
    WoKo> (pch=) as it should. E.g.:


    WoKo> postscript(file="test.ps",width=8,height=6.4,horizontal=FALSE)
    WoKo> plot(1:10,1:10,pch=1:5)
    WoKo> legend(1,9,letters[1:5],pch=1:5)
    WoKo> dev.off()

    WoKo> The result looks quite different compared to the X-windows
    WoKo> version.  The symbol 1 (pch=1) is much to small, while the other
    WoKo> symbols seem to big.

    WoKo> Is it a bug?
yes, definitely.
there's a second (less severe) bug, too :

The second symbol (triangle)
is \Delta /\  on x11 (and postscript in R <= 0.65)
          --    __
but is \Lambda  \/  for postscript in R 0.90.0..

    WoKo> How can I work it around?

as you said: by not using  pch=1.... :-)
a patch will probably appear "soon"...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Nov 23 16:42:28 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 23 Nov 1999 17:42:28 +0100 (MET)
Subject: as.name() is not idempotent (PR#337)
Message-ID: <199911231642.RAA26657@pubhealth.ku.dk>


 as.name(as.name("ss"))

gives an error in R (0.90 and earlier)
but should of course give the same as simply

 as.name("ss") 

This reminds me of similar bug/problem... which I don't recall.

Yes, I should build tests like these into  "make test-Specific" ..
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 23
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcw@ln.nimh.nih.gov  Tue Nov 23 16:43:17 1999
From: mcw@ln.nimh.nih.gov (mcw@ln.nimh.nih.gov)
Date: Tue, 23 Nov 1999 17:43:17 +0100 (MET)
Subject: rbind problem (PR#338)
Message-ID: <199911231643.RAA26680@pubhealth.ku.dk>


In the new version 0.90.0, rbind won't take a vector and a matrix from me,
but works OK if I coerce the vector to a matrix.  The following was run on
a new session (i.e., no prior work), and has been duplicated on 2
machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
6.0.

Either case works fine in version 0.65.1.




> t3 <- c(.5, .5)  
> t4 <- matrix(rnorm(8), 4, 2)  
> t3 
[1] 0.5 0.5 
> t4
     [,1]       [,2] 
[1,]  1.0701582 -0.40888504 
[2,] -0.2961581 -1.73051884 
[3,]  0.6191254  0.05958328 
[4,] -1.3844937  0.81863361 
> dim(t3) <- c(1,2)            (make vector a matrix)
> rbind(t3, t4) 
           [,1] [,2] 
[1,]  0.5000000  0.50000000    (so OK when vector coerced)
[2,]  1.0701582 -0.40888504
[3,] -0.2961581 -1.73051884 
[4,]  0.6191254  0.05958328 
[5,] -1.3844937  0.81863361 
> 
> t3 <- c(.5, .5)              (reassign t3 as a vector)
> dim(t3) 
NULL 
> 
> rbind(t3, t4) 

Process R segmentation violation (core dumped) at Tue Nov 23 11:28:05 1999

--------------------------------------------------------------------------

Am I missing something?  Has anyone else come across this problem?  Or is
this a new feature?  I don't see anything in the documentation; indeed,
it says (in the help for cbind and rbind):

When the arguments consist of a mix of matrices and vectors the number of
columns (rosw) of the result is determined by the number of columns (rows)
of the matrix arguments. Any vectors have their values recycled or
subsetted to achieve this length. 

Thanks,

Matt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 17:41:58 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 09:41:58 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911230924150.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 mcw@ln.nimh.nih.gov wrote:

> 
> In the new version 0.90.0, rbind won't take a vector and a matrix from me,
> but works OK if I coerce the vector to a matrix.  The following was run on
> a new session (i.e., no prior work), and has been duplicated on 2
> machines: an SGI running Irix 6.5, and an Intel box running Red Hat Linux
> 6.0.

Ok, this is an interesting problem in rbind when there are no names and a 
matrix and a vector and deparse_level=1

The reason we segfault is basically
	(gdb) print nrows(R_NilValue)
	$59 = 1076101128
which seems like a bad idea

At lines 1328ff we have a bug where we iterate over the number of rows of
"u", forgetting that after line 1315 u points to the (nonexistent)
dimnames rather than to the matrix.

I'm testing a fix.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:12:24 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:12:24 -0800 (PST)
Subject: rbind problem (PR#338)
In-Reply-To: <199911231643.RAA26680@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231008180.18031-100000@wompom.biostat.washington.edu>


Ok, here's a patch:

	-thomas


*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 09:40:25 1999
***************
*** 1299,1305 ****
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
--- 1299,1305 ----
      }
      /* Adjustment of dimnames attributes. */
      if (have_rnames | have_cnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_rnames)
  	    nam = VECTOR(dn)[0] = allocVector(STRSXP, rows);
***************
*** 1312,1323 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(u);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(u) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(u)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {
--- 1312,1323 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetRowNames(v);
  
  		    if (have_cnames && GetColNames(dn) == R_NilValue
! 			&& GetColNames(v) != R_NilValue)
! 			SetColNames(dn, duplicate(GetColNames(v)));
  
  		    /* cbind() doesn't test have_?names BEFORE tnam!=Nil..:*/
  		    if (have_rnames) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:14:23 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 23 Nov 1999 19:14:23 +0100 (MET)
Subject: cbind problem (PR#339)
Message-ID: <199911231814.TAA27174@pubhealth.ku.dk>


Probably related to the rbind problem:

> mm<-matrix(0,2,2)
> nn<-c(1,2)
> cbind(mm,nn)
       nn  
[1,] 0  0 1
[2,] 0  0 2
> dimnames(cbind(mm,nn))
[[1]]
NULL

[[2]]
[1] ""   "nn" ""  

The column names are wrong (though at least no segfault this time)


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Nov 23 18:31:33 1999
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Tue, 23 Nov 1999 19:31:33 +0100 (MET)
Subject: "outer" argument in mtext (PR#340)
Message-ID: <199911231831.TAA27225@pubhealth.ku.dk>

mtext(..., outer = TRUE) does not seem to center the text in the outer
margins as it did previously.  Reproduce with

 example(plot.profile.nls, package = "nls")

On versions of the development sources before November 17 this
produced main and subtitles that were centered horizontally on the
page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
is centered over the figure in the upper left the the subtitle
(from mtext("..", side = 1, outer = TRUE)) is centered under the
figure on the lower right.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:splines, package:nls, Autoloads, package:base

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Nov 23 18:39:38 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 23 Nov 1999 10:39:38 -0800 (PST)
Subject: cbind problem (PR#339)
In-Reply-To: <199911231814.TAA27174@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911231038330.18031-100000@wompom.biostat.washington.edu>

On Tue, 23 Nov 1999 thomas@biostat.washington.edu wrote:

> 
> Probably related to the rbind problem:
> 
Yep.

Patch:

*** /usr/local/src/R-0.90.0/src/main/bind.c	Fri Nov 12 15:33:28 1999
--- /biostat/faculty0/thomas/Rarchive/r-devel/R/src/main/bind.c	Tue Nov 23 10:16:47 1999
***************
*** 1087,1093 ****
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
--- 1087,1093 ----
  
      /* Adjustment of dimnames attributes. */
      if (have_cnames | have_rnames) {
! 	SEXP nam, tnam,v;
  	PROTECT(dn = allocVector(VECSXP, 2));
  	if (have_cnames)
  	    nam = VECTOR(dn)[1] = allocVector(STRSXP, cols);
***************
*** 1100,1112 ****
  
  		if (isMatrix(u)) {
  
! 		    u = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(u);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(u) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(u)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {
--- 1100,1112 ----
  
  		if (isMatrix(u)) {
  
! 		    v = getAttrib(u, R_DimNamesSymbol);
! 		    tnam = GetColNames(v);
  
  		    if (have_rnames &&
  			GetRowNames(dn) == R_NilValue &&
! 			GetRowNames(v) != R_NilValue)
! 			SetRowNames(dn, duplicate(GetRowNames(v)));
  
  		    /* rbind() does this only  if(have_?names) .. : */
  		    if (tnam != R_NilValue) {

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chong@stat.purdue.edu  Wed Nov 24 05:18:58 1999
From: chong@stat.purdue.edu (chong@stat.purdue.edu)
Date: Wed, 24 Nov 1999 06:18:58 +0100 (MET)
Subject: [R] problems with postscript device (PR#341)
Message-ID: <199911240518.GAA28976@pubhealth.ku.dk>


   From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
   Organization: University of Economics, Vienna
   Date: Tue, 23 Nov 1999 16:29:22 CET (+0100)
   MIME-Version: 1.0
   Content-type: text/plain; charset=US-ASCII
   Content-transfer-encoding: 7BIT
   CC: r-bugs@biostat.ku.dk, r-help@stat.math.ethz.ch
   References: <153DF9230E8@fgr.wu-wien.ac.at>
   X-mailer: Pegasus Mail for Windows (v2.53/R1)
   Sender: owner-r-help@stat.math.ethz.ch
   Precedence: bulk

   > From:          "Alvaro A. Novo" <novo@uiuc.edu>

   Alvaro A. Novo wrote:
   > 
   > I would suggest that you use instead:
   > 
   >  plot(1:10,1:10,pch=1:5, cex=0.4)
   > 			 ^^^^^^^
   > 
   > cex = 1 being the default.

   You have to look at the postscript file, that is generated by the 
   commands I gave in my mail!
   The problem is that, even when using cex=0.4, the symbols have a 
   different size! Also, symbol number 1 (the circle) is *not* effected 
   by the cex-option (maybe because it is too small to be made any 
   smaller).
   This all concerns only the postscript device.

   The only solution I see is not to use the circle-symbol for the
   postscript device

   Wolfgang Koller



   ----------------------------------------------------------
   Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
   Forschungsinstitut fuer Europafragen
   Wirtschaftsuniversitaet Wien
   Althanstrasse 39-45, 1090 Wien, Austria
   -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
   r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
   Send "info", "help", or "[un]subscribe"
   (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
   _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


I have encountered the same problem and reported about 5 months ago.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 07:19:16 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 08:19:16 +0100 (CET)
Subject: as.name() is not idempotent (PR#337)
In-Reply-To: <199911231642.RAA26657@pubhealth.ku.dk>
References: <199911231642.RAA26657@pubhealth.ku.dk>
Message-ID: <14395.37236.157663.144059@aragorn.ci.tuwien.ac.at>

>>>>> maechler  writes:

>  as.name(as.name("ss"))

> gives an error in R (0.90 and earlier)
> but should of course give the same as simply

>  as.name("ss") 

> This reminds me of similar bug/problem... which I don't recall.

> Yes, I should build tests like these into  "make test-Specific" ..

But not before fixing it, hopefully :-)

>From a brief glance at the code in coerce.c:

SEXP coerceVector(SEXP v, SEXPTYPE type)
{
    SEXP ans = R_NilValue;      /* -Wall */
    if (TYPEOF(v) == type)
        return v;

    switch (TYPEOF(v)) {
#ifdef NOTYET
    case NILSXP:
        ans = coerceNull(v, type);
        break;
    case SYMSXP:
        ans = coerceSymbol(v, type);
        break;
#endif

So you simply need to write coerceSymbol() and move the #ifdef.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:17:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:17:30 +0100 (CET)
Subject: cpp problem on alpha (PR#333)
In-Reply-To: <199911231423.PAA25427@pubhealth.ku.dk>
References: <199911231423.PAA25427@pubhealth.ku.dk>
Message-ID: <14395.62330.716926.100631@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> There is one wrong indented preprocessor directive in src/main/gram.y


> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Nov 24 14:19:19 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Nov 1999 15:19:19 +0100 (CET)
Subject: compile error for mkString on alpha (PR#332)
In-Reply-To: <199911231414.PAA25164@pubhealth.ku.dk>
References: <199911231414.PAA25164@pubhealth.ku.dk>
Message-ID: <14395.62439.277210.722216@aragorn.ci.tuwien.ac.at>

>>>>> albrecht gebhardt writes:

> Full_Name: Albrecht Gebhardt
> Version: 0.90.0
> OS: osf4.0
> Submission from: (NULL) (143.205.61.73)


> I had to apply the following patch to be able to compile on 
> an alpha with DU 4.0E:
> ###############################################
> --- ./src/main/gram.y.mkString-patch    Tue Nov 23 12:16:29 1999
> +++ ./src/main/gram.y   Tue Nov 23 12:16:59 1999
> @@ -56,7 +56,8 @@
>  SEXP           mkFloat(char *);
>  SEXP           mkInteger(char *);
>  SEXP           mkNA(void);
> -SEXP           mkString(const char *);
> +typedef const char cchar;
> +SEXP           mkString(cchar *);
>  SEXP           mkTrue(void);
 
>  /* Internal lexer / parser state variables */
> @@ -1362,7 +1363,7 @@
>  }
 
 
> -SEXP mkString(const char *s)
> +SEXP mkString(cchar *s)
>  {
>      SEXP t;
 
> ################################################
> Without the patch I got:

> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -c gram.c -o gram.o
> cc: Warning: ../../../R/src/main/gram.y, line 1626: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #if 0
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1628: # not in column 1 is
> ignored, skipping to end of line. (ignoretokens)
>             #endif
> ------------^
> cc: Warning: ../../../R/src/main/gram.y, line 644: In this statement, the
> referenced type of the pointer value "SourceLine" is "unsigned char", which is
> not compatible 
> with "const signed char". (ptrmismatch)
>                     STRING(source)[lines++]  = mkChar(SourceLine);
> ------------------------------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1144: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Warning: ../../../R/src/main/gram.y, line 1177: In this statement, the
> referenced type of the pointer value "buf" is "signed char", which is not
> compatible with "un
> signed char". (ptrmismatch)
>                                  buf, 1024, 1) == 0) return R_NilValue;
> ---------------------------------^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, parameter
> 1 has a different type than specified in an earlier declaration of this
> function. (mism
> atparam)
> SEXP mkString(const char *s)
> -----^
> cc: Error: ../../../R/src/main/gram.y, line 1365: In this declaration, the type
> of "mkString" is not compatible with the type of a previous declaration of
> "mkString" at
>  line number 59 in file ../../../R/src/main/gram.y. (notcompat)
> SEXP mkString(const char *s)
> -----^

> Then I looked at the preprocessed sources:
> cc -I. -I../include -I../../src/include -I/usr/local/include -DHAVE_CONFIG_H
> -ieee_with_inexact -g -E gram.c > gram.E

> grep -n mkString gram.E 
> 8915:SEXP mkString(const char*);
> 9564:SEXP               mkString(const char *);
> 11995:SEXP mkString( char *s)
> 12179:    protect(yylval = mkString(yytext));

> I don't know why the third occurrence of "mkString(const char*);" 
> (line 11995 of preproccessor output) has the "const" removed, it is present in
> the 
> source! But the trick with typedefing "const char" to "cconst" in the patch
> above works. 


> BTW, there are many warnings about mixing "char" and "unsigned char", 
> not only in gram.c!

> Albrecht

I am not sure that this is the right way of fixing it.  configure has a
macro called AC_C_CONST which checks whether the C compiler fully
supports the `const' keyword.  If not, `const' is defined empty.

Can you look at you Rconfig.h and see if anything is done about const
there?  Can you also look at config.log?

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Nov 24 14:26:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Wed, 24 Nov 1999 15:26:11 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911241426.PAA07010@pubhealth.ku.dk>

It seems to me the following should work (in fact, it comes from
someone's SPlus file). Instead, it reads the first 8 lines and then
spits out syntax errors. Using nlines=36 works. Using nmax does not.
Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
 1   3   5   no   1  
 2   1   0  yes   1  
 3   2   4   no   2
 4   1   0  yes   2  
 5   1   4   no   3 
 6   1   0  yes   3 
 7   1   5   no   4  
 8   0   1  yes   4  
 9   4   1   no   5  
10   1   0  yes   5   
11   4   5   no   6 
12   1   0  yes   6  
13   5   3   no   7  
14   1   0  yes   7  
15   4   4   no   8  
16   1   0  yes   8 
17   3   2   no   9  
18   1   0  yes   9  
19   8   1   no  10  
20   0   1  yes  10   
21   5   1   no  11   
22   1   0  yes  11  
23   8   1   no  12 
24   1   0  yes  12  
25   5   3   no  13 
26   1   0  yes  13  
27   4   1   no  14  
28   1   0  yes  14  
29   4   2   no  15  
30   1   0  yes  15  
31   7   1   no  16 
32   1   0  yes  16  
33   4   2   no  17  
34   0   1  yes  17  
35   5   3   no  18 
36   1   0  yes  18  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Nov 24 19:34:16 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Wed, 24 Nov 1999 20:34:16 +0100 (MET)
Subject: rbind invisible return value (PR#343)
Message-ID: <199911241934.UAA09286@pubhealth.ku.dk>


An assignment in an argument sometimes makes rbind return invisibly

> rbind(diag(3),a<-1:3)
> print(rbind(diag(3),a<-1:3))
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1
[4,]    1    2    3

> version
         _                           
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    99.0                        
year     1999                        
month    November                    
day      23                          
language R 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Nov 24 20:02:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Nov 1999 21:02:31 +0100
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: bates@stat.wisc.edu's message of "Tue, 23 Nov 1999 19:31:33 +0100 (MET)"
References: <199911231831.TAA27225@pubhealth.ku.dk>
Message-ID: <x2yabnmze0.fsf@blueberry.kubism.ku.dk>

bates@stat.wisc.edu writes:

> mtext(..., outer = TRUE) does not seem to center the text in the outer
> margins as it did previously.  Reproduce with
> 
>  example(plot.profile.nls, package = "nls")
> 
> On versions of the development sources before November 17 this
> produced main and subtitles that were centered horizontally on the
> page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
> is centered over the figure in the upper left the the subtitle
> (from mtext("..", side = 1, outer = TRUE)) is centered under the
> figure on the lower right.

It only does this if las=1, as got entered into the plot.profile.nls
example on November 16, by yourself... It's still a bug, but are you
sure you got that part tested?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Nov 25 09:13:53 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 25 Nov 1999 10:13:53 +0100 (MET)
Subject: scan error (PR#342)
Message-ID: <199911250913.KAA13013@pubhealth.ku.dk>

>>>>> "Jim" == Jim Lindsey <jlindsey@alpha.luc.ac.be> writes:

    Jim> It seems to me the following should work (in fact, it comes from
    Jim> someone's SPlus file). Instead, it reads the first 8 lines and then
    Jim> spits out syntax errors. Using nlines=36 works. Using nmax does not.
    Jim> Intel RH5.2 with R90.0. Debugging shows it must be internal. Jim

Yes, a bug.
This is true with both R versions 0.65 and 0.90 ("R90.0" does *not* exist)

Btw, "nmax" *does* work --- however *not* according to documentation ---

## easier to test if you use a named file instead of stdin) :

> str(j1 <- scan(file="/u/maechler/R/jl-scan.dat",
+            list(i=0,r1=0,r2=0,lull="",day=""),nmax=5*36))
Read 36 lines
List of 5
 $ i   : num [1:36] 1 2 3 4 5 6 7 8 9 10 ...
 $ r1  : num [1:36] 3 1 2 1 1 1 1 0 4 1 ...
 $ r2  : num [1:36] 5 0 4 0 4 0 5 1 1 0 ...
 $ lull: chr [1:36] "no" "yes" "no" "yes" "no" "yes" "no" "yes" "no" "yes" ...
 $ day : chr [1:36] "1" "1" "2" "2" "3" "3" "4" "4" "5" "5" "6" "6" "7" "7" ...


    Jim> junk <- scan(file="",list(i=0,r1=0,r2=0,lull="",day=""),n=5*36)
    Jim> 1   3   5   no   1  
    Jim> 2   1   0  yes   1  
    Jim> 3   2   4   no   2
    Jim> 4   1   0  yes   2  
    Jim> 5   1   4   no   3 
    Jim> 6   1   0  yes   3 
    Jim> 7   1   5   no   4  
    Jim> 8   0   1  yes   4  
    Jim> 9   4   1   no   5  
    Jim> 10   1   0  yes   5   
    Jim> 11   4   5   no   6 
    Jim> 12   1   0  yes   6  
    Jim> 13   5   3   no   7  
    Jim> 14   1   0  yes   7  
    Jim> 15   4   4   no   8  
    Jim> 16   1   0  yes   8 
    Jim> 17   3   2   no   9  
    Jim> 18   1   0  yes   9  
    Jim> 19   8   1   no  10  
    Jim> 20   0   1  yes  10   
    Jim> 21   5   1   no  11   
    Jim> 22   1   0  yes  11  
    Jim> 23   8   1   no  12 
    Jim> 24   1   0  yes  12  
    Jim> 25   5   3   no  13 
    Jim> 26   1   0  yes  13  
    Jim> 27   4   1   no  14  
    Jim> 28   1   0  yes  14  
    Jim> 29   4   2   no  15  
    Jim> 30   1   0  yes  15  
    Jim> 31   7   1   no  16 
    Jim> 32   1   0  yes  16  
    Jim> 33   4   2   no  17  
    Jim> 34   0   1  yes  17  
    Jim> 35   5   3   no  18 
    Jim> 36   1   0  yes  18  


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:55:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:55:19 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: chong@stat.purdue.edu's message of "Wed, 24 Nov 1999 06:18:58 +0100 (MET)"
References: <199911240518.GAA28976@pubhealth.ku.dk>
Message-ID: <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>

chong@stat.purdue.edu writes:

> I have encountered the same problem and reported about 5 months ago.

Wasn't there in 0.65.1 ....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 10:59:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 11:59:27 +0100
Subject: rbind invisible return value (PR#343)
In-Reply-To: thomas@biostat.washington.edu's message of "Wed, 24 Nov 1999 20:34:16 +0100 (MET)"
References: <199911241934.UAA09286@pubhealth.ku.dk>
Message-ID: <x27lj6rg4w.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> An assignment in an argument sometimes makes rbind return invisibly
> 
> > rbind(diag(3),a<-1:3)
> > print(rbind(diag(3),a<-1:3))
>      [,1] [,2] [,3]
> [1,]    1    0    0
> [2,]    0    1    0
> [3,]    0    0    1
> [4,]    1    2    3

Ditto with cbind(). Not new, 0.65.1 does likewise.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 14:12:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 15:12:25 +0100
Subject: [R] problems with postscript device (PR#341)
In-Reply-To: Peter Dalgaard BSA's message of "25 Nov 1999 11:55:19 +0100"
References: <199911240518.GAA28976@pubhealth.ku.dk> <x2aeo2rgbs.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2yabmpsmu.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> chong@stat.purdue.edu writes:
> 
> > I have encountered the same problem and reported about 5 months ago.
> 
> Wasn't there in 0.65.1 ....

Here's a patch:

Index: src/main/devPS.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/devPS.c,v
retrieving revision 1.9
diff -u -r1.9 devPS.c
--- devPS.c     1999/10/07 18:10:11     1.9
+++ devPS.c     1999/11/25 13:06:44
@@ -824,7 +824,7 @@
     if(pointsize < 6.0) pointsize = 6.0;
     if(pointsize > pd->maxpointsize) pointsize = pd->maxpointsize;
     dd->dp.ps = pointsize;
-    dd->dp.cra[0] = (6.0 / 12.0) * pointsize;
+    dd->dp.cra[0] = 0.9 * pointsize; 
     dd->dp.cra[1] = 1.2 * pointsize;
 
     /* Character Addressing Offsets */
Index: src/main/graphics.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/main/graphics.c,v
retrieving revision 1.57
diff -u -r1.57 graphics.c
--- graphics.c  1999/11/18 16:50:08     1.57
+++ graphics.c  1999/11/25 13:06:44
@@ -3555,7 +3555,7 @@
 #ifdef OLDSYMSIZE
 #define GSTR_0  GStrWidth("0", INCHES, dd)
 #else
-#define GSTR_0  xDevtoInch(dd->dp.cra[0] * 0.66, dd) * dd->gp.cex
+#define GSTR_0  dd->dp.cra[0] * 0.66 * dd->gp.ipr[0] * dd->gp.cex
 /* NOTE: This cex is already multiplied with cexbase */
 #endif /* Draw one of the R special symbols. */
 void GSymbol(double x, double y, int coords, int pch, DevDesc *dd)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Nov 25 16:54:04 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Nov 1999 17:54:04 +0100 (MET)
Subject: segfault in garbage collection (PR#344)
Message-ID: <199911251654.RAA20039@pubhealth.ku.dk>


The following statements yield a seg.fault:
R --vanilla --nsize 500K

x <- rep(letters,10000)
f <- function(x) {z<-paste("\"",x,"\"",sep=""); z}
y <- f(x)
Segmentation fault


If a turn gcinfo on, I get

Garbage collection [nr. 1]...
387529 cons cells free (75%)
3807 Kbytes of heap free (62%)
Garbage collection [nr. 2]...
273868 cons cells free (53%)
1015 Kbytes of heap free (17%)
Garbage collection [nr. 3]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 4]...
208857 cons cells free (40%)
0 Kbytes of heap free (0%)

...(always the same)

and finally (after a long time)

Garbage collection [nr. 508]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)
Garbage collection [nr. 509]...
208859 cons cells free (40%)
0 Kbytes of heap free (0%)

Segmentation fault

Debugging yields

Program received signal SIGSEGV, Segmentation fault.
0x807d249 in errorcall (call=0x4062ec04, 
    format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
    at /home/Leisch/src/r-release/R/src/main/errors.c:192
192     {


I reproduced this bug on a 2nd machine, even with the same number
of Garbage collections.

-aw

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 25
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Nov 25 17:01:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Nov 1999 18:01:22 +0100
Subject: segfault in garbage collection (PR#344)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of "Thu, 25 Nov 1999 17:54:04 +0100 (MET)"
References: <199911251654.RAA20039@pubhealth.ku.dk>
Message-ID: <x2puwypkt9.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x807d249 in errorcall (call=0x4062ec04, 
>     format=0xbf801cc0 "heap memory (6144 Kb) exhausted [needed 0 Kb more]\n       See \"help(Memory)\" on how to increase the heap size.\n")
>     at /home/Leisch/src/r-release/R/src/main/errors.c:192
> 192     {
> 
> 
> I reproduced this bug on a 2nd machine, even with the same number
> of Garbage collections.

Oh, drats.... I fixed the same bug with cons cells just before the
release. Change the error() to errorcall(R_NilValue) to fix.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Nov 25 18:52:24 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Nov 1999 12:52:24 -0600
Subject: "outer" argument in mtext (PR#340)
In-Reply-To: Peter Dalgaard BSA's message of "24 Nov 1999 21:02:31 +0100"
References: <199911231831.TAA27225@pubhealth.ku.dk> <x2yabnmze0.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r903mmmjb.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> It only does this if las=1, as got entered into the plot.profile.nls
> example on November 16, by yourself... It's still a bug, but are you
> sure you got that part tested?

You're right.  I hadn't tested the version with las = 1.  I had
thought the change would be harmless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mhdelsemme@ulg.ac.be  Fri Nov 26 09:54:24 1999
From: mhdelsemme@ulg.ac.be (mhdelsemme@ulg.ac.be)
Date: Fri, 26 Nov 1999 10:54:24 +0100 (MET)
Subject: Bug in version 65.0 (PR#345)
Message-ID: <199911260954.KAA24881@pubhealth.ku.dk>

Full_Name: Marie-Hélène Delsemme
Version: 65.0
OS: 
Submission from: (NULL) (139.165.164.139)


My students found this error when I was teaching but it seems to be
reproductible

Starting using a R65.0 seesion, if you resize the program window (using the
small x of square at the upper right corner) the cursor is no longer available
and the intire system seems to be blocked.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Nov 26 10:08:42 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Nov 1999 10:08:42 +0000 (GMT)
Subject: Bug in version 65.0 (PR#345)
In-Reply-To: <199911260954.KAA24881@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911261000410.20322-100000@auk.stats>

On Fri, 26 Nov 1999 mhdelsemme@ulg.ac.be wrote:

> Full_Name: Marie-Hélène Delsemme
> Version: 65.0
> OS: 

[How do you run R without an OS?]

> Submission from: (NULL) (139.165.164.139)
> 
> 
> My students found this error when I was teaching but it seems to be
> reproductible
> 
> Starting using a R65.0 seesion, if you resize the program window (using the
> small x of square at the upper right corner) the cursor is no longer available
> and the intire system seems to be blocked.

Um. Is that a Windows version (although the small x in the square closes
the window on Windows)?  If so 0.65.0 (there is no 65.0) was never released
except as a test version, and that never from the official repository. This
is a known bug in the GUI in that and 0.64.2 on Windows.

Please upgrade at least to 0.65.1 and preferably to 0.90.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Nov 26 21:07:09 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 16:07:09 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
Message-ID: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>

Hello,
I have been trying to debug a problem with R-0.90.0 (this bug was in
0.65.1, too). The following code results in seg faults.  It doesn't
seg-fault on Linux/intel.

> memory.profile()
> gc()

As long as I don't execute memory.profile(), there is no problem with
garbage collection.  So I think that memory.profile() screws up the
heap in some way.

When it seg-faults, it dies in the function compactPhase() in memory.c,

    while (vfrom < R_VTop) {
        s = BACKPOINTER(*vfrom);
        switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */

it segfaults becuase s becomes a pointer to 0x0, when the while loop is
almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
and R_VTop = 0x20001841198).

I tried to see what's going on in do_memoryprofile() in memory.c by
stepping with gdb, but I couldn't see what was going wrong (well, to be
honest, I didn't fully understand what was going on).

I thought someone may have some insights about the problem or strategy to
debug this problem.  I wanted to set some kind of watch point, so the 
gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
really good at gdb yet, so I'm wondering if someone can help.

Thanks,
Naoki

platform alpha-unknown-linux
arch     alpha              
os       linux              
system   alpha, linux       
status   Patched            
major    0                  
minor    90.0               
year     1999               
month    November           
day      22                 
language R                  


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 21:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Nov 1999 22:27:54 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Naoki Takebayashi's message of "Fri, 26 Nov 1999 16:07:09 -0500 (EST)"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu>
Message-ID: <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>

Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:

> Hello,
> I have been trying to debug a problem with R-0.90.0 (this bug was in
> 0.65.1, too). The following code results in seg faults.  It doesn't
> seg-fault on Linux/intel.
> 
> > memory.profile()
> > gc()
> 
> As long as I don't execute memory.profile(), there is no problem with
> garbage collection.  So I think that memory.profile() screws up the
> heap in some way.
> 
> When it seg-faults, it dies in the function compactPhase() in memory.c,
> 
>     while (vfrom < R_VTop) {
>         s = BACKPOINTER(*vfrom);
>         switch (TYPEOF(s)) {    /* get size in bytes */  /* <- dies here */
> 
> it segfaults becuase s becomes a pointer to 0x0, when the while loop is
> almost finishing, i.e., vfrom is close to R_VTop (vfrom = 0x20001840ef8
> and R_VTop = 0x20001841198).
> 
> I tried to see what's going on in do_memoryprofile() in memory.c by
> stepping with gdb, but I couldn't see what was going wrong (well, to be
> honest, I didn't fully understand what was going on).
> 
> I thought someone may have some insights about the problem or strategy to
> debug this problem.  I wanted to set some kind of watch point, so the 
> gdb breaks when the address 0x20001840ef8 is changed.  But I'm not
> really good at gdb yet, so I'm wondering if someone can help.

The gdb command would be 'watch *0x20001840ef8' (it's important to use
the address as a number so that one gets a hardware watchpoint), but
are you sure that's the right address to watch? I'd try the address of
s itself ('p &s' to print it). Also, what happens if you turn
gctorture() on just before the call to memory.profile? Usually slows
things down horribly, but causes a crash much closer to the actual
damage.

Happy hunting...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Nov 26 23:55:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 00:55:04 +0100
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: Peter Dalgaard BSA's message of "26 Nov 1999 22:27:54 +0100"
References: <Pine.SOL.4.10.9911261537120.3852-100000@sunflower.bio.indiana.edu> <x2vh6pndt1.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Naoki Takebayashi <ntakebay@bio.indiana.edu> writes:
> 
> > Hello,
> > I have been trying to debug a problem with R-0.90.0 (this bug was in
> > 0.65.1, too). The following code results in seg faults.  It doesn't
> > seg-fault on Linux/intel.
> > 
> > > memory.profile()
> > > gc()
...
> The gdb command would be 'watch *0x20001840ef8' (it's important to use
> the address as a number so that one gets a hardware watchpoint), but

Doh! Never mind gdb, sometimes you just need to look at the code:

    PROTECT(ans = allocVector(INTSXP, 21));
    PROTECT(nms = allocVector(STRSXP, 21));
    for (i = 0; i < 21; i++) {
        STRING(ans)[i] = 0;
        STRING(nms)[i] = R_BlankString;
    }

Try making that INTEGER(ans)[i] = 0 ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sat Nov 27 01:32:42 1999
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Fri, 26 Nov 1999 20:32:42 -0500 (EST)
Subject: memory.profile() messes up the vector heap on Alpha/Linux?
In-Reply-To: <x2r9hc6c6f.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.10.9911262020570.3852-100000@sunflower.bio.indiana.edu>

Thank you, Peter!
This fixed the problem. So 0.9.0 passes "make check" on Linux/alpha now!!

> Doh! Never mind gdb, sometimes you just need to look at the code:
> 
>     PROTECT(ans = allocVector(INTSXP, 21));
>     PROTECT(nms = allocVector(STRSXP, 21));
>     for (i = 0; i < 21; i++) {
>         STRING(ans)[i] = 0;
>         STRING(nms)[i] = R_BlankString;
>     }
> 
> Try making that INTEGER(ans)[i] = 0 ...


Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 02:01:11 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 03:01:11 +0100 (MET)
Subject: .Rprofile results in corruption of .RData? (PR#346)
Message-ID: <199911270201.DAA01513@pubhealth.ku.dk>

It could be that the following may be due to something wrong that I managed
to do (I cannot think what...) but I submit this report in case it is something
that you want to know about (I have solved the problem by removing .Rprofile as
I describe below).

1.  After compiling/installing R 0.90 (an uneventful process), it
worked perfectly the first time, and it read .RData written by the
previous version, but later it would not read .RData (written by
current version).  I finally traced the problem to
  ~/.Rprofile  which somehow seemed to cause .RData to be corrupted when 
R writes it, causing R to give the following message and abort next time 
it is run:

Error: unresolved node during restore 
Fatal error: unable to restore saved data
 (remove .RData or increase memory)

2. Nothing in  .Rprofile  seemed suspicious.

3. I removed  .Rprofile, and the problem disappeared (of course, the  corrupted
.RData file still could not be read, but what R now saved as .RData 
it could read subsequently.)

4. I copied  Rprofile  from
  /usr/local/lib/R/library/base/R
to my home directory and renamed it  .Rprofile  without otherwise
modifying it.  The problem reappeared.

5. I removed ~/.Rprofile, and edited  Rprofile in /usr/local/.../R 
   (to remove significance stars and set emacs as the editor).  
   Now everything works perfectly again (as long as there is no
  .Rprofile in the home directory or in my working directory.

I apologize if this is some problem I caused during installation and is
not a problem with R, in which case please ignore this report.  I would be
more than glad to try out things if you think this might be something
suspicious that is happening that should be looked into.  The problem on
my computer is quite reproducible and does not appear to be related to the 
size or content of .RData. 

Thank you again for R!

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, Autoloads, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From steland@euv-frankfurt-o.de  Sat Nov 27 10:30:21 1999
From: steland@euv-frankfurt-o.de (steland@euv-frankfurt-o.de)
Date: Sat, 27 Nov 1999 11:30:21 +0100 (MET)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
Message-ID: <199911271030.LAA02408@pubhealth.ku.dk>

Full_Name: Ansgar Steland
Version: 0.90.0
OS: Linux 6.1 FreeBSD 3.2
Submission from: (NULL) (62.104.196.10)


Dear R Team,

Yesterday I downloaded R 0.90.0 and the current versions of some
packages (tseries, quadprog,...).
I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
I also re-build all packages required by tseries.


I checked out portfolio.optim (package: tseries).
It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
(More precisely, the example in the documentation of portfolio.optim crashed.)

Simply reinstalling R 0.65.0 fixed the problem! Now the example works.

I suppose there is a problem with the code of the solve.QP function 
of the package quadprog.
Perhaps it uses internal R functions whose argument lists have changed or sthg.
like this, I don't know.

Below you find some output.


Output for R 0.90.0 (OS: SuSe Linux 6.1):
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.90.0  (November 22, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

           This is a preliminary time series package for R
           See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)
Segmentation fault
ansgar@alpha:~ > res$pw     

Output after 'cd R-0.65.0; make install':
-----------------------------------------

R : Copyright 1999, The R Development Core Team
Version 0.65.0  (August 27, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(tseries)
Loading required package: ts

      This is a preliminary time series package for R 0.65
      See `library(help=ts)' for details.

> x <- rnorm (1000)
> dim(x) <- c(500,2)
> res <- portfolio.optim (x)       
> res$pw
[1] 0.5 0.5
>       

------------------------------------------------------------------
Hope this report helps the R developers.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 11:22:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 12:22:18 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: rnassar@duke.edu's message of "Sat, 27 Nov 1999 03:01:11 +0100 (MET)"
References: <199911270201.DAA01513@pubhealth.ku.dk>
Message-ID: <x27lj42n85.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> It could be that the following may be due to something wrong that I
> managed to do (I cannot think what...) but I submit this report in
> case it is something that you want to know about (I have solved the
> problem by removing .Rprofile as I describe below).

We've had a similar problem report before, but it was nearly
impossible to investigate because all there was to go on was the
corrupted .RData (which, incidentally was readable after changing the
error() in OffsetToNode to a warning(), something we should perhaps
make permanent?)

This could be an important lead on an elusive bug. Do you think that
you could provide a minimal set of instructions that reproduce the
situation? (As it stands, I cannot see whether it happens to you
because of a particular call in .Rprofile, because of a specific mix
of settings, or simply because .Rprofile has been called at all.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Nov 27 13:37:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 27 Nov 1999 13:37:18 +0000 (GMT)
Subject: portfolio.optim.default, Packages tseries quadprog (PR#348)
In-Reply-To: <199911271030.LAA02408@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9911271333120.26405-100000@auk.stats>

This problem is not to do with quadprog nor tseries but rbind. It is
already solved in the current R-release snapshot, and if you need this
to work under 0.90.0, I suggest you download the current daily
snapshot and build that.


On Sat, 27 Nov 1999 steland@euv-frankfurt-o.de wrote:

> Full_Name: Ansgar Steland
> Version: 0.90.0
> OS: Linux 6.1 FreeBSD 3.2
> Submission from: (NULL) (62.104.196.10)
> 
> 
> Yesterday I downloaded R 0.90.0 and the current versions of some
> packages (tseries, quadprog,...).
> I had no problems to build the program using FreeBSD 3.2 and SuSe Linux 6.1.
> I also re-build all packages required by tseries.
> 
> 
> I checked out portfolio.optim (package: tseries).
> It crashed under FreeBSD 3.2 and SuSe Linux 6.1.
> (More precisely, the example in the documentation of portfolio.optim crashed.)
> 
> Simply reinstalling R 0.65.0 fixed the problem! Now the example works.
> 
> I suppose there is a problem with the code of the solve.QP function 
> of the package quadprog.
> Perhaps it uses internal R functions whose argument lists have changed or sthg.
> like this, I don't know.

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 14:47:08 1999
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 27 Nov 1999 09:47:08 -0500 (EST)
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: <x27lj42n85.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>

Here is a minimum set of instructions to reproduce the problem on my 
computer:

1. remove/rename any .Rprofile in home or current directories.

2. rename .RData file

3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
   untarred/compiled/installed) to the home directory.

4. rename ~/Rprofile to ~/.Rprofile.  

(I'm trying to ensure that neither of my existing .Rprofile and .RData files 
are involved in the test, and that only the "distribution" Rprofile, when 
copied to the home directory and renamed to .Rprofile is the trigger for 
the problem, i.e. simply the existence of a valid .Rprofile file)

5. Run R, then q() and save .RData  (or save.image() and then quite 
without further saving upon quitting.)  (It makes no difference if you did 
anything within R, or whether you simply saved an 'empty' file)

6. Run R again.  It cannot read .RData and aborts.

7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
run it again, and it works perfectly.

I hope this helps, and as I said, I'd be glad to try out specific
instructions on my computer or try to answer any questions.  I have a
vague recollection that a few versions earlier, I had a problem that I
solved by using as ~/.Rprofile a copy of Rprofile that came with the new
version, and that solved the problem at that time.)

Thank you and best regards,

Rashid

On 27 Nov 1999, Peter Dalgaard BSA wrote:

> Date: 27 Nov 1999 12:22:18 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: .Rprofile results in corruption of .RData? (PR#346)
> 
> rnassar@duke.edu writes:
> 
> > It could be that the following may be due to something wrong that I
> > managed to do (I cannot think what...) but I submit this report in
> > case it is something that you want to know about (I have solved the
> > problem by removing .Rprofile as I describe below).
> 
> We've had a similar problem report before, but it was nearly
> impossible to investigate because all there was to go on was the
> corrupted .RData (which, incidentally was readable after changing the
> error() in OffsetToNode to a warning(), something we should perhaps
> make permanent?)
> 
> This could be an important lead on an elusive bug. Do you think that
> you could provide a minimal set of instructions that reproduce the
> situation? (As it stands, I cannot see whether it happens to you
> because of a particular call in .Rprofile, because of a specific mix
> of settings, or simply because .Rprofile has been called at all.)
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From koller2@fgr.wu-wien.ac.at  Sat Nov 27 16:04:06 1999
From: koller2@fgr.wu-wien.ac.at (koller2@fgr.wu-wien.ac.at)
Date: Sat, 27 Nov 1999 17:04:06 +0100 (MET)
Subject: size of text and numbers in graphs (PR#349)
Message-ID: <199911271604.RAA03032@pubhealth.ku.dk>

Hi!

Since installation of R 0.90 there are problems with the size 
of text and numbers also in the x11-device (I reported about similar 
problems with the postscript device recently). For numbers and 
letters a different size is used:

plot(1:10,1:10,type="n")
text(2,8,"F5F5F5F5F5")
text(2,7,"F5F5F5F5F5",cex=2)

The same problem is also found in the postscript device.
The difference is small but clearly visible.

Thanks for fixing soon!


Wolfgang Koller


----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Nov 27 17:45:55 1999
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sat, 27 Nov 1999 18:45:55 +0100 (MET)
Subject: rstandard forgotten? (PR#350)
Message-ID: <199911271745.SAA03303@pubhealth.ku.dk>

I was just wondering whether implementation of   rstandard  mentioned under 
?influence.measures  had been forgotten? 
(I am aware that MASS has standardized residuals)

Thanks-- and no need to reply.

Rashid Nassar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 18:58:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Nov 1999 19:58:36 +0100
Subject: size of text and numbers in graphs (PR#349)
In-Reply-To: koller2@fgr.wu-wien.ac.at's message of "Sat, 27 Nov 1999 17:04:06 +0100 (MET)"
References: <199911271604.RAA03032@pubhealth.ku.dk>
Message-ID: <x2iu2nsqw3.fsf@blueberry.kubism.ku.dk>

koller2@fgr.wu-wien.ac.at writes:

> Hi!
> 
> Since installation of R 0.90 there are problems with the size 
> of text and numbers also in the x11-device (I reported about similar 
> problems with the postscript device recently). For numbers and 
> letters a different size is used:
> 
> plot(1:10,1:10,type="n")
> text(2,8,"F5F5F5F5F5")
> text(2,7,"F5F5F5F5F5",cex=2)
> 
> The same problem is also found in the postscript device.
> The difference is small but clearly visible.
> 
> Thanks for fixing soon!

It's not a bug. The fonts are designed that way (capital letters one
pixel taller than numbers in some sizes). Try for instance running
xfontsel with

-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Nov 27 23:00:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Nov 1999 00:00:52 +0100
Subject: .Rprofile results in corruption of .RData? (PR#346)
In-Reply-To: Rashid Nassar's message of "Sat, 27 Nov 1999 09:47:08 -0500 (EST)"
References: <Pine.SOL.3.91.991127092401.22017A-100000@bio3.acpub.duke.edu>
Message-ID: <x2wvr31qvv.fsf@blueberry.kubism.ku.dk>

Rashid Nassar <rnassar@duke.edu> writes:

> Here is a minimum set of instructions to reproduce the problem on my 
> computer:
> 
> 1. remove/rename any .Rprofile in home or current directories.
> 
> 2. rename .RData file
> 
> 3. copy Rprofile (the "original" Rprofile that came with R-0.90 when R was
>    untarred/compiled/installed) to the home directory.
> 
> 4. rename ~/Rprofile to ~/.Rprofile.  
> 
> (I'm trying to ensure that neither of my existing .Rprofile and .RData files 
> are involved in the test, and that only the "distribution" Rprofile, when 
> copied to the home directory and renamed to .Rprofile is the trigger for 
> the problem, i.e. simply the existence of a valid .Rprofile file)
> 
> 5. Run R, then q() and save .RData  (or save.image() and then quite 
> without further saving upon quitting.)  (It makes no difference if you did 
> anything within R, or whether you simply saved an 'empty' file)
> 
> 6. Run R again.  It cannot read .RData and aborts.
> 
> 7. Remove .Rprofile and .RData and run, quit (to make a new .RData) and 
> run it again, and it works perfectly.

OK, I think I see it.

(a) You're not supposed to do that! The system Rprofile is always
executed, so personal .Rprofile files should just contain your own
modifications.

(b) It boils down to the single line:

.AutoloadEnv <- pos.to.env(2)

and I suspect that the trouble is that it contains a pointer to something
on the search path which is not getting saved along with the
workspace. You can create the problem entirely without Rprofile like
this:

> x<-pos.to.env(2)
> save("x",file="junk")
> load("junk")
Error in load("junk") : unresolved node during restore
> rm(x)
> load("junk")
Error in load("junk") : unresolved node during restore
> ls()
character(0)

Looks more than a bit nasty to fix....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@astro.ocis.temple.edu  Sun Nov 28 02:38:29 1999
From: rmh@astro.ocis.temple.edu (Richard M. Heiberger)
Date: Sat, 27 Nov 1999 21:38:29 -0500 (EST)
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
Message-ID: <199911280238.VAA32405@tempest.ocis.temple.edu>

A better solution is to get the current ESS 5.1.11.  We added the noreadline
command sometime after 5.0.  With the newer ESS you should not need to make
any changes.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Nov 28 16:22:30 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 28 Nov 1999 17:22:30 +0100 (CET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
References: <14398.57453.765951.973990@fangorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.9911262107250.14660-100000@auk.stats>
Message-ID: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 26 Nov 1999, Kurt Hornik wrote:
>> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
>> understand what is going on.  configure checks (via AC_C_CONST) whether
>> `const' works fine.  If not, it defines const as empty in Rdefines.h.
>> This in turn gets included in all of our source files.  So how can it
>> happen that const is empty in one place and not in another?

> Look in gram.c:

> #ifndef __cplusplus
> #ifndef __STDC__
> #define const
> #endif
> #endif

> comes before the forward declaration and the definition. We have ANSI
> compilers, so this does not happen to us.

> I don't know how to tell bison to behave!

I know :-)

In bison-xy/src/output.c, replace the unconditional

  /* Make "const" do nothing if not in ANSI C.  */
  fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
\n#endif\n\n");

by something more useful :-)

But seriously, what is going on here?  Autoconf says

 - Macro: AC_C_CONST
     If the C compiler does not fully support the keyword `const',
     define `const' to be empty.  Some C compilers that do not define
     `__STDC__' do support `const'; some compilers that define
     `__STDC__' do not completely support `const'.  Programs can simply
     use `const' as if every C compiler supported it; for those that
     don't, the `Makefile' or configuration header file will define it
     as empty.

so how can we deal with the situation where __STDC__ is not defined by
the compiler but `const' still works?

One solution would be to mimic Bison's rule in addition to the autoconf
magic, so that we define const as empty when __STDC__ is not defined,
even if const works.

???

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Nov 29 09:20:32 1999
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 29 Nov 1999 10:20:32 +0100 (MET)
Subject: [R] compiling R-0.90.0 on alpha-dec-osf4.0
In-Reply-To: <14401.22214.585152.433462@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.10.9911291007520.5856-100000@zidsrv.sci.uni-klu.ac.at>

On Sun, 28 Nov 1999, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
> 
> > On Fri, 26 Nov 1999, Kurt Hornik wrote:
> >> Albrecht Gebhardt had the same bug report a few days ago.  I don't quite
> >> understand what is going on.  configure checks (via AC_C_CONST) whether
> >> `const' works fine.  If not, it defines const as empty in Rdefines.h.
> >> This in turn gets included in all of our source files.  So how can it
> >> happen that const is empty in one place and not in another?
> 
> > Look in gram.c:
> 
> > #ifndef __cplusplus
> > #ifndef __STDC__
> > #define const
> > #endif
> > #endif
> 
> > comes before the forward declaration and the definition. We have ANSI
> > compilers, so this does not happen to us.
> 
> > I don't know how to tell bison to behave!
> 
> I know :-)
> 
> In bison-xy/src/output.c, replace the unconditional
> 
>   /* Make "const" do nothing if not in ANSI C.  */
>   fprintf (ftable, "#ifndef __cplusplus\n#ifndef __STDC__\n#define const\n#endif
> \n#endif\n\n");
> 
> by something more useful :-)
> 
> But seriously, what is going on here?  Autoconf says
> 
>  - Macro: AC_C_CONST
>      If the C compiler does not fully support the keyword `const',
>      define `const' to be empty.  Some C compilers that do not define
>      `__STDC__' do support `const'; some compilers that define
>      `__STDC__' do not completely support `const'.  Programs can simply
>      use `const' as if every C compiler supported it; for those that
>      don't, the `Makefile' or configuration header file will define it
>      as empty.
> 
> so how can we deal with the situation where __STDC__ is not defined by
> the compiler but `const' still works?
> 
> One solution would be to mimic Bison's rule in addition to the autoconf
> magic, so that we define const as empty when __STDC__ is not defined,
> even if const works.
> 

Wouldn't it be better to force CPPFLAGS to contain "-std" or "-std1" for 
CC=cc on alpha? We compile most of our freeware stuff (kde,...) for Tru64
with this option ("std1") (From time to time I forget about it ;(, this
happened with R-0.65/90) 

I just compiled 0.90.0 successful with "-std1". 

"man cc" says the following about the -std options:
################### man cc /-std #######################################
-std[n]

Directs the compiler to produce warnings for language constructs that are
not standard in the language. The default is -std0. The following values
are accepted:

-std

Enforces the ANSI C standard, but allows some common programming practices
disallowed by the standard. The -std flag causes the macro __STDC__=0 to
be passed to the preprocessor.

-std0

Enforces the K&R programming style, with certain ANSI extensions in areas
where the K & R behavior is undefined or ambiguous.  In general, -std0
compiles most pre-ANSI C programs and produces expected results. The -std0
flag causes the __STDC__ macro to be undefined.

-std1 

Strictly enforces the ANSI C standard and all its prohibitions (such as
those that apply to the handling of void types, the definition of lvalues
in expressions, the mixing of integrals and pointers, and the modification
of rvalues).  This flag does not, however, restrict the name space defined
by the DIGITAL UNIX implementation to only reserved names as specified by
ANSI C. The -std1 flag causes the macro __STDC__=1 to be passed to the
preprocessor.  Note that the -std1 flag also affects linker defined
symbols.  See ld(1) for more information.

None of the -std* flags restrict or expand the name space defined by the
DIGITAL UNIX implementation (for example, items declared in system header
files).  To restrict the name space so that only ANSI C reserved names are
made visible from the system header files listed in the ANSI C standard,
use the _ANSI_C_SOURCE macro.  For details on _ANSI_C_SOURCE and other
standard macros, see standards(5).
################ end man #########################################

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Nov 29 14:53:31 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Nov 1999 15:53:31 +0100 (MET)
Subject: rbind crash (PR#351)
Message-ID: <199911291453.PAA15918@pubhealth.ku.dk>

Well here is my (first) segmentation fault for this version (R0.90.0)
on Intel RH5.2:

x <- matrix(0,nrow=1,ncol=3)
y <- c(0.1,10,0.01)
rbind(x,y)

 Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Nov 29 15:00:32 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Nov 1999 16:00:32 +0100
Subject: rbind crash (PR#351)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Nov 1999 15:53:31 +0100 (MET)"
References: <199911291453.PAA15918@pubhealth.ku.dk>
Message-ID: <x24se5qr5b.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> Well here is my (first) segmentation fault for this version (R0.90.0)
> on Intel RH5.2:
> 
> x <- matrix(0,nrow=1,ncol=3)
> y <- c(0.1,10,0.01)
> rbind(x,y)

Fixed already. Should be in the snapshots, but Martin seems to be
having problems with those at the moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Nov 29 15:33:25 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 29 Nov 1999 10:33:25 -0500
Subject: cross reference wishlist item
Message-ID: <38429CC5.497C52DD@bank-banque-canada.ca>

It would be nice for checking documentation to be able to generate the
"see also" cross references (e.g. the list of functions where dev2bitmap
is linked as a "see also" reference.) Perhaps this already exists?

(BTW, it would be useful to have a "see also" reference to dev2bitmap in
the help for postscript and for Devices.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Mon Nov 29 23:02:59 1999
From: gilb@home.com (Paul Gilbert)
Date: Mon, 29 Nov 1999 18:02:59 -0500
Subject: install.packages warning
Message-ID: <38430621.AAC6DA49@home.com>

I mis-spelled "chron" and with

    install.packages(c("tseries", "cron"))

I get tseries installed ok and cron fails as it should, but I think the
warning could be more suggestive of the problem:

Warning messages:
1: argument `lib' is missing: using /apps/R/library in:
install.packages(c("tseries", "cron"))
2: Download of package cron failed in: download.packages(pkglist,
destdir = tmpd, available = available,

Also, it would be nice if update.packages did install.packages in the
case where a package is not already installed, and it would be nice to
be able to pass "--quiet" to wget.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Nov 29 17:21:55 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 29 Nov 1999 17:21:55 +0000 (GMT)
Subject: cross reference wishlist item
Message-ID: <199911291721.RAA02685@toucan.stats.ox.ac.uk>


> Date: Mon, 29 Nov 1999 10:33:25 -0500
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> It would be nice for checking documentation to be able to generate the
> "see also" cross references (e.g. the list of functions where dev2bitmap
> is linked as a "see also" reference.) Perhaps this already exists?

Not that I know of, but it is a 30 second Perl / grep script surely.

grep \\link\{Devices\} *.Rd

works for me. (There are no xrefs to dev2bitmap.)


> (BTW, it would be useful to have a "see also" reference to dev2bitmap in
> the help for postscript and for Devices.)

That is sort of deliberate. dev2bitmap is something of a stopgap:
Windows already has png, jpeg and bmp devices, and we hope to have those on
Unix shortly.  But I'll sort that out for now.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Nov 30 13:28:12 1999
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Tue, 30 Nov 1999 14:28:12 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301328.OAA28224@pubhealth.ku.dk>

Full_Name: Albrecht Gebhardt
Version: 0.90.0
OS: Linux + Tru64
Submission from: (NULL) (143.205.61.72)


This is where example(krige) from library(sgeostat) stops with R 0.90.0:

krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
Error in length(x) == nrow(z) : comparison (1) is possible only for vector
types

in previous versions of R the above image() call worked, because image()
did the transformation 

  grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))

iself. (BTW, contour() didn't)

Was this change of behaviour in image() made intentionally? 

Anyway I will change the Rd help page for krige in sgeostat to
...
image(grid$x, grid$y, matrix(grid$krige$zhat,length(grid$x),length(grid$x)), add
= T)
...


Albrecht

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Nov 30 14:16:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Nov 1999 15:16:55 +0100 (MET)
Subject: image stops detecting wrong sized z matrix (PR#352)
Message-ID: <199911301416.PAA29330@pubhealth.ku.dk>

[...]

> This is where example(krige) from library(sgeostat) stops with R 0.90.0:
> 
> krige> image(grid$x, grid$y, grid$krige$zhat, add = T)
> Error in length(x) == nrow(z) : comparison (1) is possible only for vector
> types
> 
> in previous versions of R the above image() call worked, because image()
> did the transformation 
> 
>   grid$krige$zhat -> matrix(grid$krige$zhat,length(grid$x),length(grid$x))
> 
> iself. (BTW, contour() didn't)

(In fact, it just ignored dim(z) which therefore could be null.)

> Was this change of behaviour in image() made intentionally? 

Yes, to allow a more general specification of x and y, for S compatibility
(and general usefulness!).


I believe this is a bug in sgeostat not in R: it has long been
documented that z should be a matrix. What has happened is that we
now make use of the documented behaviour.  Suppose z were of length 90,
and each of x and y were of length 10. That is now ambiguous (and BTW,
just gave the wrong plot in 0.65.1, something that has caught me
more than once).

I will add a more specific error message testing that z is a matrix.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Nov 30 20:22:57 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 30 Nov 1999 21:22:57 +0100 (MET)
Subject: R CMD check xxx location (PR#353)
Message-ID: <199911302022.VAA02016@pubhealth.ku.dk>

Very minor bug:
"R CMD check " puts results in a slightly different place than it suggests. In
the example below they are in   check-syskern rather than syskern/check-syskern.

Paul Gilbert
_______

[3] gilp/dse : R CMD check syskern
Checking package `syskern' ...
 Massaging examples into `syskern-Ex.R' ...
 Running examples in package `syskern' ...
 OK
 Results of `check' are available in directory syskern/check-syskern
[4] gilp/dse : ls  syskern/check-syskern
syskern/check-syskern: No such file or directory
[5] gilp/dse : ls check-syskern
syskern-Ex.R          syskern-Ex.Rout       syskern-Examples.ps
[6] /home/mfa5/gilp/dse :



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

