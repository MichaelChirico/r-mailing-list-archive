From mcdowella@mcdowella.demon.co.uk  Sun Jul  1 06:53:54 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Sun, 1 Jul 2001 07:53:54 +0200 (MET DST)
Subject: [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data (PR#1007)
Message-ID: <200107010553.HAA05244@pubhealth.ku.dk>

Full_Name: Andrew Grant McDowell
Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
OS: Windows 2K Professional (Consumer)
Submission from: (NULL) (194.222.243.209)


In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
johnt@tman.dnsalias.com writes
>Can someone help?  In R, I am generating a vector of 1000 samples from 
>Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the 
>vector has been drawn from a population of Bin (1000, 0.25).  I would
>expect a reasonably high p-value.....
>
>Either I am doing something wrong in R, or I am misunderstanding how this
>test should work (both quite possible)...
>
>
>Thanks,
>JT..
>
>
>
>> #### 1000 random samples from binomial dist with mean =.25, n=100...
>> o<-rbinom (1000, 100, .25)
>> mean (o);
>[1] 25.178
>> var (o);
>[1] 19.61193
>> ks.test (o, "pbinom", 100, .25);
>
>        One-sample Kolmogorov-Smirnov test 
>
>data:  o 
>D = 0.0967, p-value = 1.487e-08 
>alternative hypothesis: two.sided
>
>
>
>p-value is mighty small, leading me to reject the null hypothesis that
>the sample has been drawn from the Bin(100, 0.25) distribution!!!
>
>
>

Some more oddities:

> o<-rbinom(10000, 1, 0.25)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 7491
> length(o[o==1])
[1] 2509
> o<-rep(0,10000)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 10000
> length(o[o==1])
[1] 0

Here zeroing out the data does not change the reported D value

After playing about with
ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
for a bit I conjecture that ks.test() takes no account
whatsoever of ties, but merely sorts the input values
and looks for max (position/N - pbinom(value, 1, p)).
Anybody got the source handy?
-- 
A. G. McDowell

After 30 minutes of download, the relevant part of ks.test.R would appear to be

        METHOD <- "One-sample Kolmogorov-Smirnov test"
        n <- length(x)
        x <- y(sort(x), ...) - (0 : (n-1)) / n
        STATISTIC <- switch(alternative,
                            "two.sided" = max(c(x, 1/n - x)),
                            "greater" = max(1/n - x),
                            "less" = max(x))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul  1 07:50:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 1 Jul 2001 08:50:39 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107010650.IAA05352@pubhealth.ku.dk>

On Sun, 1 Jul 2001 mcdowella@mcdowella.demon.co.uk wrote:

> Full_Name: Andrew Grant McDowell
> Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
> OS: Windows 2K Professional (Consumer)
> Submission from: (NULL) (194.222.243.209)

Please upgrade: we've found a number of Win2k bugs and worked around them
since then, let alone teh bug fixes and improvements in R ....


> In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
> johnt@tman.dnsalias.com writes
> >Can someone help?  In R, I am generating a vector of 1000 samples from
> >Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the
> >vector has been drawn from a population of Bin (1000, 0.25).  I would
> >expect a reasonably high p-value.....

You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
extension) assume continuous distributions, so the distribution theory
is not valid in this case?

S-PLUS does stop you doing this:

> ks.gof(o, dist="binomial", size=100, prob=0.25)
Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
discrete distributions when sample size > 50, use the
       Chi-square test


> >Either I am doing something wrong in R, or I am misunderstanding how this
> >test should work (both quite possible)...
> >
> >
> >Thanks,
> >JT..
> >
> >
> >
> >> #### 1000 random samples from binomial dist with mean =.25, n=100...
> >> o<-rbinom (1000, 100, .25)
> >> mean (o);
> >[1] 25.178
> >> var (o);
> >[1] 19.61193
> >> ks.test (o, "pbinom", 100, .25);
> >
> >        One-sample Kolmogorov-Smirnov test
> >
> >data:  o
> >D = 0.0967, p-value = 1.487e-08
> >alternative hypothesis: two.sided
> >
> >
> >
> >p-value is mighty small, leading me to reject the null hypothesis that
> >the sample has been drawn from the Bin(100, 0.25) distribution!!!

That's OK.  That's not what you tested (see above).

An S language point: the `;' are unnecessary.


> Some more oddities:
>
> > o<-rbinom(10000, 1, 0.25)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 7491
> > length(o[o==1])
> [1] 2509
> > o<-rep(0,10000)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 10000
> > length(o[o==1])
> [1] 0
>
> Here zeroing out the data does not change the reported D value

Nor does it change the maximum discrepancy.

> ks.test(rep(1,10000), "pbinom", 1, 0.25)

        One-sample Kolmogorov-Smirnov test

data:  rep(1, 10000)
D = 1, p-value = < 2.2e-16
alternative hypothesis: two.sided

shows 0 is special here.

>
> After playing about with
> ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
> for a bit I conjecture that ks.test() takes no account
> whatsoever of ties, but merely sorts the input values
> and looks for max (position/N - pbinom(value, 1, p)).
> Anybody got the source handy?
>
> After 30 minutes of download, the relevant part of ks.test.R would appear to be

Eh? Just type ks.test in your R session for the source ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jul  1 16:00:01 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 1 Jul 2001 11:00:01 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107011056260.19217-100000@eno.Princeton.EDU>


  Don't know if this is useful to anyone, but here's a "poor man's"
solution I came up with to the CRAN indexing problem ... not as good as
having a full-text web link, but it does have some advantages. (1) it's
already done.  (2) it's relatively easy to download and store this
information off-line, and to update it periodically.  (3) it doesn't (now)
require any extra software.
  I'm sure it could be improved in many ways.
  Sorry if it duplicates existing or developing functionality.
  I haven't actually tested "create.index" below, but I've done all the
component pieces.

  Ben Bolker

get.ind <- function(pkg,CRAN=getOption("CRAN"),
                    descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                    local.ext=".INDEX.tmp") {
  download.file(paste(descrip,"/",pkg,".INDEX",sep=""),
                paste(pkg,local.ext,sep=""))
}

## strsplit produces zero-length chars if there are leading spaces
dropz <- function(x) {
  x[nchar(x)>0]
}

nwords <- function(x) {
  sapply(strsplit.words(x),function(z)length(dropz(z)))
}

strsplit.words <- function(x) {
  strsplit(gsub("[ \t]*"," ",x)," ")
}

tr.index <- function(fn) {
  ##  cat(fn,"\n")
  lines <- scan(fn,what=character(),sep="\n",quiet=TRUE)
  ret <- NULL
  if (length(lines)>0) {
    ## paste continuation lines together
    ## look for initial whitespace; might miss funny formats
    tablines <- grep("^[ \t]",lines)
    lines <- sub("^[\t ]*","",lines) ## now delete initial whitespace
    ## join "continuation sets" (sets of consecutive lines with leading whitespace)
    if (length(tablines)>0) {
      v <- 1:length(lines)
      csets <- v-cumsum(v %in% tablines)
      lines <- sapply(split(lines,csets),paste,collapse=" ")
    }
    pkgname <- gsub("/INDEX","",gsub("[\* ]*","",lines[1]))
    lines <- lines[-1]
    pkg <- rep(pkgname,length(lines))
    fun <- sapply(strsplit.words(lines),"[",1)
    descr <- sapply(strsplit.words(lines),function(z)paste(z[-1],collapse=" "))
    ret <- cbind(pkg,fun,descr)
    dimnames(ret) <- list(NULL,c("Package","Function","Description"))
  }
  ret
}

create.index <- function(CRAN=getOptions("CRAN"),
                         contrib.url=contriburl(CRAN),
                         descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index") {
  pkglist <- CRAN.packages(contrib.url=contrib.url)
  sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
                    local.ext=local.ext)
  indfiles <- list.files(pattern=paste("*",local.ext))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
  noquote(all.ind[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
                     grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()
search.ind("integrat?")
search.ind("adapt")
search.ind("permute")
search.ind("Durbin")

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon Jul  2 14:27:56 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 2 Jul 2001 15:27:56 +0200 (MET DST)
Subject: [Rd] ReleaseLargeFreeVectors SIGSEGV (?) (PR#1008)
Message-ID: <200107021327.PAA13094@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.3.0
OS: GNU/Linux RH6.2, 7.0, Debian 2.2
Submission from: (NULL) (158.37.100.64)


I'm working on interfacing ANN: A Library for Approximate Nearest Neighbor
Searching (http://www.cs.umd.edu/~mount/ANN/) to R, following up a prototype
package I tried in May 2000. ANN is written in C++; my C++ is very weak. Last
year
I didn't experience any problems with memory management, C++ did
its thing, and R did its. I have today recompiled R 1.1.1, and the original
trial
package installs OK, and all the examples can be run repeatedly with no crash.

Could I please ask for confirmation that this problem is on my package's
side and is not a result of the 1.2.0 and later memory handling changes?

I'm now getting replicable segmentation faults in the following context:

(ftp://reclus.nhh.no/pub/R) ann_0.2-2.tar.gz is the old trial package,
ann_0.2-2.pre3.tar.gz is the same with a single change to the shared libs flag
in
the Makefile, and ann_0.2-3.tar.gz is a revision dropping the makefile, since
R now includes C++ in Makeconf.

ann_0.2-3.tar.gz ran through (1.3.0) R CMD check & R CMD build cleanly. 
The examples now trigger the segfault, or it can be triggered in the older 
version by doing in 1.3.0:

> for (i in 1:100) example(ann)

or

> for (i in 1:100) example(nspairs)

or just by:

for (i in 1:100) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)


The typical gdb listing (shortened) is:

(in this case from)

> for (i in 1:100) example(nspairs)

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 311

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 304

....


Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x94727d0) at malloc.c:3023
#2  0x80a6b60 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a82b2 in RunGenCollect (size_needed=2000) at memory.c:1079
#4  0x80a9365 in R_gc_internal (size_needed=2000) at memory.c:1669
#5  0x80a9027 in Rf_allocVector (type=14, length=2000) at memory.c:1541
#6  0x808cb58 in Rf_duplicate (s=0x9548498) at duplicate.c:140
#7  0x80660fa in do_makelist (call=0x8a3f7c0, op=0x81a7c00, args=0x8239258, 
    rho=0x824e510) at builtin.c:367
#8  0x809136f in Rf_eval (e=0x8a3f7c0, rho=0x824e510) at eval.c:424
#9  0x8092cf1 in Rf_evalList (el=0x8a3ee30, rho=0x824e510) at eval.c:1171
#10 0x80912f8 in Rf_eval (e=0x8a3f750, rho=0x824e510) at eval.c:422
#11 0x8091089 in Rf_eval (e=0x824037c, rho=0x8240670) at eval.c:368
#12 0x8090ff4 in Rf_eval (e=0x88211a0, rho=0x8240670) at eval.c:345
#13 0x8092cf1 in Rf_evalList (el=0x8821ddc, rho=0x8240670) at eval.c:1171
#14 0x80912f8 in Rf_eval (e=0x8821dc0, rho=0x8240670) at eval.c:422
#15 0x80a4a9d in do_logic2 (call=0x8821c00, op=0x819f3e8, args=0x8821c1c, 
    env=0x8240670) at logic.c:192
#16 0x809119b in Rf_eval (e=0x8821c00, rho=0x8240670) at eval.c:401
#17 0x8091a64 in do_if (call=0x882292c, op=0x8198d74, args=0x8822948, 
    rho=0x8240670) at eval.c:665
#18 0x809119b in Rf_eval (e=0x882292c, rho=0x8240670) at eval.c:401
#19 0x8092394 in do_begin (call=0x8821820, op=0x819e81c, args=0x8821804, 
) at eval.c:887
...

I have also seen:

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8ab0b18) at malloc.c:3023
#2  0x40312204 in __builtin_vec_delete (ptr=0x8ab0b18)
   from /usr/local/lib/R/library/ann/libs/ann.so
#3  0x40307b5e in annDeallocPts (pa=@0xbfffd7a0) at ANN.cc:124
#4  0x4030733d in ANN_interface (xp=0x8cd8280, eps=@0x8e2a550, qp=0x8e2a5c8, 
    dnn=0x8d727f0, n_pts=@0x8dc7be8, k=@0x8dc7c08, dim=@0x8dc7c28, 
    q_pts=@0x8dc7c48, bucket_size=@0x8dc7c68, insplit=@0x8dc7c88, 
    inshrink=@0x8dc7ca8, priority=@0x8dc7cc8, maxpts=@0x8dc7ce8, nn=0x8ace0d0)
    at ANN_interface.cc:133
#5  0x808a557 in do_dotCode (call=0x8a3f098, op=0x81a7a5c, args=0x8a3d388, 
    env=0x8a4326c) at dotcode.c:1310
#6  0x809136f in Rf_eval (e=0x8a3f098, rho=0x8a4326c) at eval.c:424
#7  0x8092a67 in do_set (call=0x8a3f044, op=0x819e8c4, args=0x8a3f060, 
    rho=0x8a4326c) at eval.c:1092
....


and annDeallocPts() is the C++ deconstructor where:

void annDeallocPts(ANNpointArray &pa)		// deallocate points
{
    delete [] pa[0];				// dealloc coordinate storage
    delete [] pa;				// dealloc points
    pa = NULL;
}


platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    3.0              
year     2001             
month    06               
day      22     
language R
 
[rsb@reclus rsb]$ gcc -v
Reading specs from /usr/lib/gcc-lib/i586-mandrake-linux/2.95.3/specs
gcc version 2.95.3 19991030 (prerelease)
[rsb@reclus rsb]$ rpm -q gcc
gcc-2.95.2-7mdk
[rsb@reclus rsb]$ 

(Same on R 1.3.0 on RH70, gcc 2.96-85, Debian 2.2, gcc 2.95.2)

Debian gdb output:

> for (i in 1:10) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x400fbb69 in free () from /lib/libc.so.6
(gdb) bt
#0  0x400fbb69 in free () from /lib/libc.so.6
#1  0x400fb9fd in free () from /lib/libc.so.6
#2  0x80a3210 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a4932 in RunGenCollect (size_needed=20000) at memory.c:1079
#4  0x80a59bd in R_gc_internal (size_needed=20000) at memory.c:1669
#5  0x80a5687 in Rf_allocVector (type=14, length=20000) at memory.c:1541
#6  0x808a095 in Rf_duplicate (s=0x8fab148) at duplicate.c:140
#7  0x806a479 in ascommon (call=0x8268740, u=0x8fab148, type=18)
    at coerce.c:954


                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sherwin@nlm.nih.gov  Mon Jul  2 20:58:16 2001
From: sherwin@nlm.nih.gov (sherwin@nlm.nih.gov)
Date: Mon, 2 Jul 2001 21:58:16 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107021958.VAA15770@pubhealth.ku.dk>

Prof. Ripley,

Thanks for the tip on how to compile R. We successfully compiled the R until we
met another error:

Underfull \hbox (badness 10000) has occurred while \output is active
[]\T1/aer/m/n/10 null null null 
[881] [882] [883]
Underfull \vbox (badness 10000) has occurred while \output is active [884] 
Underfull \vbox (badness 10000) has occurred while \output is active [885]
[886] [887]
Underfull \vbox (badness 10000) has occurred while \output is active [888] 
[889] [890] [891]) [892]
No file refman.ind.
(refman.aux) )
(see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
enc><cmbsy7.pfb>
! Warning: pdftex (file cmbsy7.pfb):
Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
The name specified in map file was ignored
<cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
fb
! Warning: pdftex (file cmitt10.pfb):
glyph `quotedblright' undefined
><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
<cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
.pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
10.pfb> 
Output written on refman.pdf (897 pages, 3551555 bytes).
Transcript written on refman.log.
*** Error code 1
make: Fatal error: Command failed for target `refman.pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
*** Error code 1
make: Fatal error: Command failed for target `pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
*** Error code 1 (ignored)

Do you have any ideas about what might be wrong?

Thanks.
Ziying Sherwin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jul  2 21:26:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Jul 2001 22:26:14 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107022026.WAA15859@pubhealth.ku.dk>

On Mon, 2 Jul 2001, Ziying Sherwin wrote:

> Prof. Ripley,
>
> Thanks for the tip on how to compile R. We successfully compiled the R until we
> met another error:
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\T1/aer/m/n/10 null null null
> [881] [882] [883]
> Underfull \vbox (badness 10000) has occurred while \output is active [884]
> Underfull \vbox (badness 10000) has occurred while \output is active [885]
> [886] [887]
> Underfull \vbox (badness 10000) has occurred while \output is active [888]
> [889] [890] [891]) [892]
> No file refman.ind.
> (refman.aux) )
> (see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
> enc><cmbsy7.pfb>
> ! Warning: pdftex (file cmbsy7.pfb):
> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
> The name specified in map file was ignored
> <cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
> fb
> ! Warning: pdftex (file cmitt10.pfb):
> glyph `quotedblright' undefined
> ><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
> <cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
> .pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
> 10.pfb>
> Output written on refman.pdf (897 pages, 3551555 bytes).
> Transcript written on refman.log.
> *** Error code 1
> make: Fatal error: Command failed for target `refman.pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
> *** Error code 1
> make: Fatal error: Command failed for target `pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
> *** Error code 1 (ignored)
>
> Do you have any ideas about what might be wrong?


Yes. Your pdftex installation is corrupt.  Is the error message

> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map
file)!

not clear enough?  Get a correct pdftex installation, with a correct
psfonts.map file!

Looks like there might be more wrong than that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jul  2 23:31:51 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 3 Jul 2001 00:31:51 +0200 (MET DST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
Message-ID: <200107022231.AAA16296@pubhealth.ku.dk>

Brian
The following (which is new to rw1030) occurs with both
Windows 98 & Windows ME.  I have not tested behaviour
under Unix or Linux, but I expect it is no different.

text.rpart() prints unwanted NAs (presumably in the
splitting criterion position) on terminal nodes.

          Criterion <- factor(paste("Leaf", 1:5))
          Node <- factor(1:5)
          assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
          nobs <- dim(tree.df)[[1]]
          u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F, 
control = list(minsplit = 2, minbucket
                   = 1, cp = 9.999999999999998e-008))
          plot(u.tree, uniform=T)
          text(u.tree)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 3.0
  year = 2001
  month = 06
  day = 22
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcdowella@mcdowella.demon.co.uk  Tue Jul  3 05:45:52 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Tue, 3 Jul 2001 06:45:52 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data
Message-ID: <200107030445.GAA17035@pubhealth.ku.dk>

In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
Brian D Ripley <ripley@stats.ox.ac.uk> writes
>
>You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
>extension) assume continuous distributions, so the distribution theory
>is not valid in this case?
>
>S-PLUS does stop you doing this:
>
>> ks.gof(o, dist="binomial", size=100, prob=0.25)
>Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
>discrete distributions when sample size > 50, use the
>       Chi-square test
>

Thank you for your prompt reply to my bug report. While I agree that
the distribution theory for the Kolmogorov tests assumes a continuous
distribution, I would like to request a modification to the 
existing routines. The purpose of this would be to provide a result 
that would represent a conservative test in the case when the underlying
distribution is discrete.

This would be in accord with P 432 of the 3rd edition of "Practical
Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
and Arnold, both of which refer to Noether (1963) "Note on the
Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
reared on these and similar textbooks would be less surprised at the
behaviour of R if this modification was made, whereas users who do
not attempt to apply the Kolmogorov-Smirnov test to discrete
distributions would not notice any difference.

It would also be in accord with the behaviour of R in the two-sample
case, where the effect of the existing code seems to be to provide
a conservative test (since the statistic returned is no larger than
might be returned in any possible tie-breaking) coupled with a warning,
(to which I would have no objection in the one-sample case).

It seems to me that the following modification would suffice: replace

        x <- y(sort(x), ...) - (0 : (n-1)) / n

with

        x <- sort(x)
        untied <- c(x[1:n-1] != x[2:n], TRUE)
        x <- y(x, ...) - (0 : (n-1)) / n
        x <- x[untied]

Users dealing with data derived from continuous distributions would
not see any difference, because (except with very small probability 
due to floating point inaccuracy) they would never produce tied data.
-- 
A. G. McDowell

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:18:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 3 Jul 2001 07:18:26 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107030518.HAA17101@pubhealth.ku.dk>

On Tue, 3 Jul 2001, A. G. McDowell wrote:

> In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
> Brian D Ripley <ripley@stats.ox.ac.uk> writes
> >
> >You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
> >extension) assume continuous distributions, so the distribution theory
> >is not valid in this case?
> >
> >S-PLUS does stop you doing this:
> >
> >> ks.gof(o, dist="binomial", size=100, prob=0.25)
> >Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
> >discrete distributions when sample size > 50, use the
> >       Chi-square test
> >
>
> Thank you for your prompt reply to my bug report. While I agree that
> the distribution theory for the Kolmogorov tests assumes a continuous
> distribution, I would like to request a modification to the
> existing routines. The purpose of this would be to provide a result
> that would represent a conservative test in the case when the underlying
> distribution is discrete.
>
> This would be in accord with P 432 of the 3rd edition of "Practical
> Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
> Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
> and Arnold, both of which refer to Noether (1963) "Note on the
> Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
> reared on these and similar textbooks would be less surprised at the
> behaviour of R if this modification was made, whereas users who do
> not attempt to apply the Kolmogorov-Smirnov test to discrete
> distributions would not notice any difference.

(Hopefully readers of those textbooks would understand that the results you
reported as a bug *are* the behaviour of KS test.  Nowhere does R
say it has implemented a modified KS test.  The one data point we have
suggests otherwise ....)

> It would also be in accord with the behaviour of R in the two-sample
> case, where the effect of the existing code seems to be to provide
> a conservative test (since the statistic returned is no larger than
> might be returned in any possible tie-breaking) coupled with a warning,
> (to which I would have no objection in the one-sample case).
>
> It seems to me that the following modification would suffice: replace
>
>         x <- y(sort(x), ...) - (0 : (n-1)) / n
>
> with
>
>         x <- sort(x)
>         untied <- c(x[1:n-1] != x[2:n], TRUE)
>         x <- y(x, ...) - (0 : (n-1)) / n
>         x <- x[untied]

In your original examples, this reduces a sample of size 10000 to one of
size 101 or 2.  Conservative - yes.   Useful - very unlikely!

> Users dealing with data derived from continuous distributions would
> not see any difference, because (except with very small probability
> due to floating point inaccuracy) they would never produce tied data.

There are circumstances in which one would want the original KS definition
for all data sets, where one wnats the test value and not the p value.

I've added a warning, but I do not think we should be implementing a
different definition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:30:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 3 Jul 2001 06:30:27 +0100 (BST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
In-Reply-To: <200107022231.AAA16296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0107030622470.20830-100000@auk.stats>

On Tue, 3 Jul 2001 john.maindonald@anu.edu.au wrote:

> Brian
> The following (which is new to rw1030) occurs with both
> Windows 98 & Windows ME.  I have not tested behaviour
> under Unix or Linux, but I expect it is no different.

I think you mean this is a change from rpart 2.0-2 to 3.0-0: packages have
version numbers too!

It's a R/S difference (I would say an R bug) for which the workaround got
lost.  At the top of text.rpart insert

    FUN1 <- function(x, y, lab,...){
        ind <- lab != "NA"
        FUN(x[ind], y[ind], lab[ind], ...)
    }

and replace FUN by FUN1 inside if(splits) {} (but not at the end).

Fixed in rpart 3.0-1, so update.packages() will give this to you shortly.

The difference can be seen in

> plot(1:3)
> text(2, 3, NA)

S's behaviour is much more convenient and logical.


> text.rpart() prints unwanted NAs (presumably in the
> splitting criterion position) on terminal nodes.
>
>           Criterion <- factor(paste("Leaf", 1:5))
>           Node <- factor(1:5)
>           assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
>           nobs <- dim(tree.df)[[1]]
>           u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F,
> control = list(minsplit = 2, minbucket
>                    = 1, cp = 9.999999999999998e-008))
>           plot(u.tree, uniform=T)
>           text(u.tree)
>
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 3.0
>   year = 2001
>   month = 06
>   day = 22
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 09:42:30 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 10:42:30 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV began at 1.2.0
Message-ID: <200107030842.KAA18671@pubhealth.ku.dk>

This behaviour is confirmed for RH70, RH62, Debian 2.2 on 3 different
Pentium-class i386. I've checked back and package ann_0.2-2 works on
1.1.1, but fails with seg. faults on 1.2.0 (ann_0.2-2.pre3.tar.gz to
accommodate the change in Makeconf) and subsequent (1.2.0 checked today on
RH62 with gcc 2.95.3 19991030 (prerelease)).

It is most likely that 1.1.1 was too forgiving, and that better memory
management from 1.2.0 is uncovering bad code in the *.so, but could there
be an interaction between dynamic memory management in R >= 1.2 and C++
(g++)? (namespace???). It strikes me as odd that the SIGSEGV sometimes
comes from the C++ side (annDeallocPts - __builtin_vec_delete), and
sometimes from the R side (ReleaseLargeFreeVectors), with no pattern that
I can see.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 14:19:34 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 15:19:34 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV under 1.1.1 too
Message-ID: <200107031319.PAA22626@pubhealth.ku.dk>

It looks as though the problem isn't in R - I provoked a SIGSEGV under R
1.1.1 on RH62:

> for (i in 1:100) an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)
> for (i in 1:100) an1 <- ann(cbind(runif(1001), runif(1001)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at malloc.c:3111
3111    malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at
malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8849a38) at malloc.c:3023
#2  0x4002c814 in _rl_free_history_entry () from /usr/lib/libreadline.so.3
#3  0x4002ac0f in readline_internal_teardown () from
/usr/lib/libreadline.so.3
#4  0x4003a07e in rl_callback_read_char () from /usr/lib/libreadline.so.3
#5  0x80e4a8f in Rstd_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at sys-std.c:376
#6  0x80e2b6e in R_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at system.c:66
#7  0x8093618 in R_ReplConsole (rho=0x402dc338, savestack=0,
browselevel=0)
    at main.c:128
#8  0x8093e86 in run_Rmainloop () at main.c:454
#9  0x8093ec4 in Rf_mainloop () at main.c:468
#10 0x80e319a in main (ac=0, av=0xbffff934) at system.c:222

The first 100 calls went OK (as did 100 prior to that), but increasing the
number of points by one triggered the fault. It looks like memory
allocation on the C++ side, to which R >= 1.2.0 is more sensitive than
before. 

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Jul  3 21:36:00 2001
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 3 Jul 2001 22:36:00 +0200 (MET DST)
Subject: [Rd] plot.mts() with type="p" (PR#1010)
Message-ID: <200107032036.WAA25029@pubhealth.ku.dk>

There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
do a multiple point plot (this worked in 1.2.2).

Reproduce by:
> version
	 _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   
> plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  : 
        formal argument "type" matched by multiple actual arguments
> traceback()
3: plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, 
       col = col, bg = bg, pch = pch, ann = ann, type = "n", ...)
2: plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, col = col, 
       bg = bg, pch = pch, ann = ann, type = "n", ...)
1: plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> 
The problem is that plot.mts calls plot() with an explicit type = "n"
as well as ..., so the type argument is sent twice.

My short-term solution is to change plot.mts() so that:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = col, bg = bg, pch = pch, ann = ann, type = "n",
            ...)
becomes:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = 0, bg = bg, pch = pch, ann = ann, 
            ...)

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pauljohn@ukans.edu  Tue Jul  3 21:55:22 2001
From: pauljohn@ukans.edu (pauljohn@ukans.edu)
Date: Tue, 3 Jul 2001 22:55:22 +0200 (MET DST)
Subject: [Rd] R-intro suggestions part II (PR#1011)
Message-ID: <200107032055.WAA25430@pubhealth.ku.dk>

Brian Ripley said that, if I sent these here, they might find their way
to the R-intro team.  So, here is another installment:


Concerning this section:

Data permanency and removing objects.

This is the first place R-intro discusses objects.  I was thinking a
better discussion of objects and syntax is needed, perhaps here, or in
the later section "Objects, their modes and attributes."  I suggest
this:


The fact that R is an object-oriented approach to programming for
statistical analysis has pervasive implications.  If one has studied a
programming language like Java or C++, the notions of object and
method are not new.  For readers who have not studied languages like
that, perhaps we can offer a brief explanation.  An object is a "self
contained data holder" that can follow instructions (do calculations,
provide values).  One intention of this design is to keep things
separate if they belong that way, to reduce the risk that one
calculation accidentally influences the result of another.
Object-orientation also has important implications for the way the
different parts of a program fit together.  Since an object is
supposed to be able to carry out a certain set of actions (which are
called methods, but in R one often says "functions" or "procedures"),
then both the user and the programmer understand what the object can
be expected to do.  There are numerous implications of object
orientation that come into play "under the hood" of the R statistical
engine, but it is not important to delve into them from a user's point
of view.


There is one wrinkle about the syntax of R that we hasten to
emphasize.  In object-oriented computer languages, syntax typically
puts the object first, followed by the instruction, followed any needed
parameters.  In Java, to tell the object "regression" to calculate
estimates for vectors y and x, one would write something like:

   regression.estimate(y,x);

Assuming that object's class has an "estimate" method which knows how
to handle the input, we would be in business.

In R, the syntax is totally different.  Instead of thinking of the
object itself as the primary thing, the syntax in R is designed to use
the method name--the instruction--as the leading concept, and then the
object that is being acted upon is given as a parameter.

When a model gives a result in R, the result is almost invariably an
object, which can then be "poked and prodded" with other methods.
If a linear regression is calculated, for example:

resultObject <- lm(y~x)

the return value is an object.  But, unlike other object-oriented
languages, in R one would write summary(resultObject), or
coefficients(resultObject), rather than the Java style
result_object.summary() or some such thing, in order to investigate the
result.


Paul E. Johnson
Political Science
University of Kansas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Wed Jul  4 10:09:08 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Wed, 04 Jul 2001 11:09:08 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
References: <200107032036.WAA25029@pubhealth.ku.dk>
Message-ID: <3B42DD34.97377CA7@ci.tuwien.ac.at>

Ray.Brownrigg@mcs.vuw.ac.nz wrote:
> 
> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
> do a multiple point plot (this worked in 1.2.2).
>
> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>         formal argument "type" matched by multiple actual arguments

Yes, this seems to be a bug. The reason is the new panel argument in
plot.mts. Every single plot in plot.mts is set up by:

        plot(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             type="n", ...)
        panel(x[, i], col = col, bg = bg, pch = pch, ...)

And I suspect you don't really need to pass the ... argument to
plot(type="n") because what you really see is what panel produces after
that. If you remove the ... in plot the example above works. It also
works, if both commands are replaced by a single

        panel(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             ...)

Hope this helps
Achim


---------------------------
Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From canjels@yahoo.com  Wed Jul  4 12:53:58 2001
From: canjels@yahoo.com (canjels@yahoo.com)
Date: Wed, 4 Jul 2001 13:53:58 +0200 (MET DST)
Subject: [Rd] html help on R language (PR#1012)
Message-ID: <200107041153.NAA00020@pubhealth.ku.dk>

Full_Name: Eugene Canjels
Version: 1.3.0
OS: windows 98
Submission from: (NULL) (24.18.150.226)


Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to 
"..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

Also within file "..\R\rw1030\doc\html\packages.html" links to individual
packages don't work since they refer to the d: drive rather than the c: drive
where R is installed.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul  4 13:49:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Jul 2001 13:49:25 +0100 (GMT Daylight Time)
Subject: [Rd] html help on R language (PR#1012)
In-Reply-To: <200107041153.NAA00020@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0107041341150.932-100000@gannet>

On Wed, 4 Jul 2001 canjels@yahoo.com wrote:

> Full_Name: Eugene Canjels
> Version: 1.3.0
> OS: windows 98
> Submission from: (NULL) (24.18.150.226)
>
>
> Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to
> "..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

That's intentional: that file is only a stub under 1.3.0, as you will see
by looking at it.  Don't assume that all changes are bugs!

> Also within file "..\R\rw1030\doc\html\packages.html" links to individual
> packages don't work since they refer to the d: drive rather than the c: drive
> where R is installed.

You need to run link.html.help() after installation.  Using help.start()
or installing a package does it automatically for you, so most people would
never notice.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 21:47:07 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 16:47:07 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107041644440.2140-100000@eno.Princeton.EDU>



  OK, several boneheaded mistakes -- sorry.
  Replace the last two functions with the following:

create.index <- function(CRAN=getOption("CRAN"),
                         contriburl=contrib.url(CRAN),
                        descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index",
                         download=TRUE) {
  if (download) {
    pkglist <- CRAN.packages(contriburl=contriburl)
    sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
           local.ext=local.ext)
  }
  indfiles <- list.files(pattern=paste("*",local.ext,sep=""))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
noquote(indexmat[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
            grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:05:50 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 4 Jul 2001 23:05:50 +0200 (MET DST)
Subject: [Rd] typos (PR#1013)
Message-ID: <200107042105.XAA03159@pubhealth.ku.dk>


I think these are all current in R 1.3.0 ...

1. xfig: Note: "One" should be "Only" ?

2. package base, scale.html:
"who's default method" -> "whose default method"

3. "wierd" misspelled in base/html/Hershey.html

4. "details" is doubled under the "Details" section of
lib/R/library/base/html/deviance.html

5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

6. "argumetn" in list of arguments in help(complex)



Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:07:32 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 17:07:32 -0400 (EDT)
Subject: [Rd] feature request: readline
Message-ID: <Pine.GSO.4.33.0107041705430.2295-100000@eno.Princeton.EDU>


  Is there a reason that readline still has a 32-character limit for the
prompt, or is this just historical?

  Now that I/O is much expanded (thanks Dr. Ripley), readline() could be
replaced by:

readline <- function(prompt="") {
  cat(prompt)
  readLines(n=1)
}

  Ben Bolker

Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Jul  5 08:51:46 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 5 Jul 2001 09:51:46 +0200 (MET DST)
Subject: [Rd] documentation t.test (PR#1014)
Message-ID: <200107050751.JAA05129@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: R.1.2.3
OS: linux
Submission from: (NULL) (130.225.67.199)


In the package ctest (installed with R by default... it must be, since
I do not find it on the CRAN page listing the contributed packages),
the attribute of the object returned by the function t.test() holding the
degrees of freedom is documented as being parameters, while the attribute
name is parameter (no 's').

I do not feel that good to report such a small thing: I am an enthusiastic
R user for some time now. I hope this will be taken as an humble
contribution (I usually do not like people who only find typos to point out
in my work  =)     ).


All the best,



Laurent


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:12 +0200
Subject: [Rd] typos (PR#1013)
In-Reply-To: <200107042105.XAA03159@pubhealth.ku.dk>
References: <200107042105.XAA03159@pubhealth.ku.dk>
Message-ID: <15172.25640.30672.496758@mithrandir.hornik.net>

>>>>> bolker  writes:

> I think these are all current in R 1.3.0 ...

> 1. xfig: Note: "One" should be "Only" ?

> 2. package base, scale.html:
> "who's default method" -> "whose default method"

> 3. "wierd" misspelled in base/html/Hershey.html

> 4. "details" is doubled under the "Details" section of
> lib/R/library/base/html/deviance.html

> 5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

> 6. "argumetn" in list of arguments in help(complex)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:29 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:29 +0200
Subject: [Rd] documentation t.test (PR#1014)
In-Reply-To: <200107050751.JAA05129@pubhealth.ku.dk>
References: <200107050751.JAA05129@pubhealth.ku.dk>
Message-ID: <15172.25657.751757.892076@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: R.1.2.3
> OS: linux
> Submission from: (NULL) (130.225.67.199)


> In the package ctest (installed with R by default... it must be, since
> I do not find it on the CRAN page listing the contributed packages),
> the attribute of the object returned by the function t.test() holding
> the degrees of freedom is documented as being parameters, while the
> attribute name is parameter (no 's').

> I do not feel that good to report such a small thing: I am an
> enthusiastic R user for some time now. I hope this will be taken as an
> humble contribution (I usually do not like people who only find typos
> to point out in my work =) ).

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From con@maths.uwa.edu.au  Fri Jul  6 09:39:04 2001
From: con@maths.uwa.edu.au (con@maths.uwa.edu.au)
Date: Fri, 6 Jul 2001 10:39:04 +0200 (MET DST)
Subject: [Rd] R 1.3  on iMacs (PR#1015)
Message-ID: <200107060839.KAA14347@pubhealth.ku.dk>

Hi,

I have been trying to run R 1.3 on a Lab of iMacs running system 9.0. It
starts up fine but it wont accept any input from the keyboard. I can
select commands and use the copy and paste menu option and this works.

It works fine on my G4 running 9.04.

Apart from having to install the latest carbonlib, is there anything
else needed to get it running on system 9.0 on iMacs?

If you don't know of any problem then I will try to install 9.04 on one
of these machines and see if that helps.

Thanks for any feedback.
_____________________________________________________________________
Con Savas                                 email: con@maths.uwa.edu.au
Programmer                               http://maths.uwa.edu.au/~con
Department of Mathematics and Statistics                           
The University of Western Australia            Phone + 61 8 9380 3184
35 Stirling Hwy Crawley 6009                   Fax   + 61 8 9380 1028

He shall see the travail of his soul, and be satisfied:     Isaiah 53
_____________________________________________________________________

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jul  6 18:42:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 6 Jul 2001 10:42:10 -0700 (PDT)
Subject: [Rd] read.spss, R 1.3.0, win2k
Message-ID: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu>


read.spss() is giving "Rgui.exe has generated errors and will be
closed..." on all the files I have tried (the same happens with Rterm as
well). This is R1.3.0 and the current `foreign',under Win2k.

The problem doesn't happen under Linux on a different machine and
didn't happen with an earlier version of R and foreign under NT4 on a
different machine.

As I updated to a new computer, new OS and new version of R at the same
time I don't know which component is responsible. Has anyone used
read.spss() with R 1.3.0 under Windows?


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Fri Jul  6 21:23:15 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Fri, 6 Jul 2001 22:23:15 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062023.WAA19640@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.0
OS: Windows Me
Submission from: (NULL) (216.175.122.171)


I realized that the title of packages in the library index when they are in a
bundle is the title of the bundle and not the package. 

It looks like the TITLE file, which apparently is used for generating the
library index, takes the value of the bundle's title and not the package's
title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
the package's DESCRIPTION.in files concatenated), and found that the TITLE file
takes value of the *last* Title field, which happens to be the Title field of
the bundle.

Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
build?

My generated DESCRIPTION file looks like this:

Package: myPackage
Version: 0.1
Date: 2001/07/05
Title: The myBundle bundle - myPackage
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


Bundle: myBundle
Version: 0.6
Date: 2001/06/28
Title: The myBundle bundle
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


>R.version
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.0
year     2001
month    06
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jul  6 21:38:37 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Jul 2001 22:38:37 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062038.WAA19708@pubhealth.ku.dk>

On Fri, 6 Jul 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.0
> OS: Windows Me
> Submission from: (NULL) (216.175.122.171)
>
>
> I realized that the title of packages in the library index when they are in a
> bundle is the title of the bundle and not the package.
>
> It looks like the TITLE file, which apparently is used for generating the
> library index, takes the value of the bundle's title and not the package's
> title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
> the package's DESCRIPTION.in files concatenated), and found that the TITLE file
> takes value of the *last* Title field, which happens to be the Title field of
> the bundle.
>
> Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
> build?

Neither.  Bundles do not have Title nor Description fields, but
BundleDescription fields. In short, the bug is in your bundle.

Look harder at the example in R-exts, or read

  The Title field should give a short description of the package and not
  have any continuation lines.

Note: `the package'.


> My generated DESCRIPTION file looks like this:
>
> Package: myPackage
> Version: 0.1
> Date: 2001/07/05
> Title: The myBundle bundle - myPackage
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> Bundle: myBundle
> Version: 0.6
> Date: 2001/06/28
> Title: The myBundle bundle
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> >R.version
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107070515.HAA16549@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 07:54:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 08:54:41 +0200
Subject: [Rd] Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
References: <OFE06B18BD.552E3547-ONC1256A81.0059F5D8@netia.pl>
 <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
Message-ID: <15176.945.261022.940709@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> The first few errors mean that you don't have xdr support in the
> libraries you included. R checks for the headers rpc/rpc.h and
> rpc/xdr.h so you have those.

> Try man xdr and see if it requires an additional library.

Actually, I think configure is not smart enough about this.

We currently test for the headers but not for any xdr_* library
function.  As we say that only ISO C can be assumed and everything else
must be tested for, I think we must test for the library functions too.
But where?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 09:23:06 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 10:23:06 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
In-Reply-To: <3B42DD34.97377CA7@ci.tuwien.ac.at>
References: <200107032036.WAA25029@pubhealth.ku.dk>
 <3B42DD34.97377CA7@ci.tuwien.ac.at>
Message-ID: <15176.6250.339968.116003@mithrandir.hornik.net>

>>>>> Achim Zeileis writes:

> Ray.Brownrigg@mcs.vuw.ac.nz wrote:
>> 
>> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
>> do a multiple point plot (this worked in 1.2.2).
>> 
>> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
>> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>> formal argument "type" matched by multiple actual arguments

> Yes, this seems to be a bug. The reason is the new panel argument in
> plot.mts. Every single plot in plot.mts is set up by:

>         plot(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              type="n", ...)
>         panel(x[, i], col = col, bg = bg, pch = pch, ...)

> And I suspect you don't really need to pass the ... argument to
> plot(type="n") because what you really see is what panel produces
> after that. If you remove the ... in plot the example above works. It
> also works, if both commands are replaced by a single

>         panel(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              ...)

If this was only about plot.mts(), I'd say that the `...' are graphics
parameters and not additional arguments to the panel function, and hence
the behavior is as expected.  The desired effect can be obtained by
using `panel = points'.

Btw, we get the same for

R> data(USJudgeRatings)
R> pairs(USJudgeRatings, type = "l")
Error in plot.default(x[, j], x[, i], xlab = "", ylab = "", axes = FALSE,  : 
        formal argument "type" matched by multiple actual arguments

Ok but perhaps not too helpful.  In an ideal world, we should perhaps
match the `...' against the possible pars before passing them on.

However, I think there are more problems.

?plot.mts [why would I know to look for this anyway?  We need to do
something along the lines John suggested in Vienna: have a way to find
out about the possible args to plot() when calling it on a specific
object or class ...] says

plot(x, y = NULL, type = "l", xlim = NULL, ylim = NULL,
     xlab = "Time", ylab, log = "",
     col = par("col"), bg = NA, pch = par("pch"), cex = par("cex"),
     lty = par("lty"), lwd = par("lwd"),
     axes = TRUE, frame.plot = axes, ann = par("ann"),
     main = NULL, plot.type = c("multiple", "single"),
     xy.labels = n <= 150, xy.lines = do.lab, panel=lines, ...)

and this even has an explicit `type' argument!

Of course what happens is that what we see is the documentation for the
ts and not the mts method.

The short term fix would be to document plot.mts separately.

However, does plot.mts really need to be a function of its own with an
interface *different* from plot.ts?  We seem to be calling each other
vice versa anyway ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Jul  8 11:22:05 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
Message-ID: <200107081022.MAA23606@pubhealth.ku.dk>

#       r-bugs@r-project.org

The problem occurs when the model matrix has a single
column.

> elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
   distance=c(183,217,189,208,178,150,249))
> elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)

> predict(elastic.lm,se=T)
Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments

The fix is to replace 
  XRinv <- qr.Q(object$qr)[, p1]
with
  XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]

The statement is five lines above XRinv^2 %*% rep(res.var, p)

John Maindonald.

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3473        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 13:05:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jul 2001 14:05:24 +0200
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)"
References: <200107081022.MAA23606@pubhealth.ku.dk>
Message-ID: <x2y9pz7hiz.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

> #       r-bugs@r-project.org
> 
> The problem occurs when the model matrix has a single
> column.
> 
> > elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
>    distance=c(183,217,189,208,178,150,249))
> > elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)
> 
> > predict(elastic.lm,se=T)
> Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments
> 
> The fix is to replace 
>   XRinv <- qr.Q(object$qr)[, p1]
> with
>   XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]
> 
> The statement is five lines above XRinv^2 %*% rep(res.var, p)
> 

Ick! Thanks.

For a workaround, notice that

> predict(elastic.lm,se=T,new=elastic)
$fit
       1        2        3        4        5        6        7 
188.8946 221.7458 197.1074 205.3202 180.6818 172.4690 213.5330 

$se.fit
[1] 6.423642 7.540797 6.702930 6.982219 6.144353 5.865064 7.261508

$df
[1] 6

$residual.scale
[1] 17.79576


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Jul  8 23:00:59 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 08 Jul 2001 18:00:59 -0400
Subject: [Rd] Don't test my example; list of Rd macros?
Message-ID: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>

I'm pretty sure I've read here that it's possible to mark certain
lines in the \examples section so the Rcmd check doesn't run them
during its tests, but I can't find it now.  (I have one function that
takes user input; with no user present, the test stalls.)

More generally, is there a reference list somewhere of all of the Rd
macros?  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 23:35:47 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 00:35:47 +0200
Subject: [Rd] Don't test my example; list of Rd macros?
In-Reply-To: Duncan Murdoch's message of "Sun, 08 Jul 2001 18:00:59 -0400"
References: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>
Message-ID: <x2bsmv3v7g.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> I'm pretty sure I've read here that it's possible to mark certain
> lines in the \examples section so the Rcmd check doesn't run them
> during its tests, but I can't find it now.  (I have one function that
> takes user input; with no user present, the test stalls.)
> 
> More generally, is there a reference list somewhere of all of the Rd
> macros?  

\dontrun{}

Most of the stuff is documented in "Writing R extensions", section
"Writing R documentation"

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jul  9 11:57:31 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 09 Jul 2001 12:57:31 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de>
Message-ID: <3B498E1B.CEFB928@statistik.uni-dortmund.de>

Thomas Lumley wrote:
>
> read.spss() is giving "Rgui.exe has generated errors and will be
> closed..." on all the files I have tried (the same happens with Rterm as
> well). This is R1.3.0 and the current `foreign',under Win2k.
>
> The problem doesn't happen under Linux on a different machine and
> didn't happen with an earlier version of R and foreign under NT4 on a
> different machine.
>
> As I updated to a new computer, new OS and new version of R at the same
> time I don't know which component is responsible. Has anyone used
> read.spss() with R 1.3.0 under Windows?


[R-1.3.0, foreign_0.4-4, WinNT 4.0]

A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
ncol=2)", can be read in:

  read.spss("c:/test.sav")

$VAR00001
[1] 2 3

$VAR00002
[1] 3 5



But trying to read a non existant file crashes R on my machine:

  read.spss("c:/nonexistant.abc")  # R crashes


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul  9 15:07:34 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 16:07:34 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Uwe Ligges's message of "Mon, 09 Jul 2001 12:57:31 +0200"
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de> <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <x2bsmuci1l.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
> 
> 
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
> 
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
> 
>   read.spss("c:/test.sav")
> 
> $VAR00001
> [1] 2 3
> 
> $VAR00002
> [1] 3 5
> 
> 
> 
> But trying to read a non existant file crashes R on my machine:
> 
>   read.spss("c:/nonexistant.abc")  # R crashes

I think this is the difference between foreign_0.4-4 and -5, but not
likely the issue that Thomas had.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 19:41:31 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 11:41:31 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <20010708202636.26286.qmail@web9305.mail.yahoo.com>
Message-ID: <20010709184131.38498.qmail@web13903.mail.yahoo.com>


I'm defining the following functions:

> foo1 <- function(...) print(match.call())
> foo2 <- function(...) foo1(...)

My understanding is that foo2 defined as above should
behave exactly like foo1 (and also that this sort of
usage is quite common). However, what I'm getting is:

> foo1(a = F, b = list()); foo2(a = F, b = list())
foo1(a = F, b = list())
foo1(a = ..1, b = ..2)

However, if the values of the arguments are constants,
there appears to be no problem, e.g.:

> temp <- 10
> foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
+ b = 10, ab = FALSE)
foo1(a = temp, b = 10, ab = FALSE)
foo1(a = ..1, b = 10, ab = FALSE)

Any explanations/suggestions ?

Deepayan


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 20:06:41 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 15:06:41 -0400
Subject: [Rd] The ... argument
References: <20010709184131.38498.qmail@web13903.mail.yahoo.com>
Message-ID: <3B4A00C1.559953AE@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I'm defining the following functions:
> 
> > foo1 <- function(...) print(match.call())
> > foo2 <- function(...) foo1(...)
> 
> My understanding is that foo2 defined as above should
> behave exactly like foo1 (and also that this sort of
> usage is quite common). However, what I'm getting is:
> 
> > foo1(a = F, b = list()); foo2(a = F, b = list())
> foo1(a = F, b = list())
> foo1(a = ..1, b = ..2)
> 
> However, if the values of the arguments are constants,
> there appears to be no problem, e.g.:
> 
> > temp <- 10
> > foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
> + b = 10, ab = FALSE)
> foo1(a = temp, b = 10, ab = FALSE)
> foo1(a = ..1, b = 10, ab = FALSE)
> 
> Any explanations/suggestions ?
> 
> Deepayan

Well, "exactly like" is overstating it a bit.

You should get the same effect in terms of the computed results.

But the evaluator has to ensure that the usual rules of evaluation
apply.  In particular, that arguments only get evaluated when needed,
and (rather important!) only once per argument.

The semantics that does this is to imagine that variables ..1, ..2, etc.
are created in the environment of foo1 corresponding to the actual
arguments that matched ...

These arguments are what actually get passed around, ensuring that the
usual rules for evaluation are followed.  Which also explains why the
pseudo-variables aren't needed if the actual arguments are constants.

As for suggestions, you haven't said what you REALLY wanted to do, but
it sounds like you may want to do some substituting inside foo2.

By the way, this is not R-specific behavior.  It really follows from the
S language semantics, and S-Plus behaves the same way.

John

> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 20:36:51 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 12:36:51 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A00C1.559953AE@research.bell-labs.com>
Message-ID: <20010709193651.19049.qmail@web13904.mail.yahoo.com>


I think my earlier example didn't fully represent my
problem. I'm trying to evaluate the arguments passed
in via ... by:

foo1 <- function(...) {
    eval(as.list(match.call()[-1]))
}

foo2 <- function(...) foo1(...)

So now,

> foo1(a=F)          
$a
F

> foo2(a=F)
$a
..1




__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 21:30:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 16:30:56 -0400
Subject: [Rd] The ... argument
References: <20010709193651.19049.qmail@web13904.mail.yahoo.com>
Message-ID: <3B4A1480.DA7201C6@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I think my earlier example didn't fully represent my
> problem. I'm trying to evaluate the arguments passed
> in via ... by:
> 
> foo1 <- function(...) {
>     eval(as.list(match.call()[-1]))
> 

Why?

The way to get the _evaluated_ ... arguments is
  dotValues <- list(...)

See, for example, under "..." in the index to the "blue book".


> foo2 <- function(...) foo1(...)
> 
> So now,
> 
> > foo1(a=F)
> $a
> F
> 
> > foo2(a=F)
> $a
> ..1
> 
> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 21:48:34 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 13:48:34 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A1480.DA7201C6@research.bell-labs.com>
Message-ID: <20010709204834.59000.qmail@web13905.mail.yahoo.com>



--- John Chambers <jmc@research.bell-labs.com> wrote:
> Deepayan Sarkar wrote:
> > 
> > I think my earlier example didn't fully represent
> my
> > problem. I'm trying to evaluate the arguments
> passed
> > in via ... by:
> > 
> > foo1 <- function(...) {
> >     eval(as.list(match.call()[-1]))
> > 
> 
> Why?
> 
> The way to get the _evaluated_ ... arguments is
>   dotValues <- list(...)


Oops! Thanks a lot, everything works fine now.



__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 21:23:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 22:23:57 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
Message-ID: <15178.4829.208468.904765@mithrandir.hornik.net>

>>>>> Krzysztof Kopera writes:

> Sorry, but my mail program add "ODP" instead "Re" to subject of my
> previous letter.  My last problem is solved but I have new, serious
> problem with making internet module (under src/modules/internet),
> below is output after "make":

>         gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
> nanohttp.o sock.o sockconn.o
> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
> position
>     independent.  Use +z or +Z to recompile.
> collect2: ld returned 1 exit status

> Can you help me? Maybe anyone have experience in building R under
> HP-UX 11.00 or other HP-UX.

Maybe I am getting paranoid or it is too late at night but something
looks awfully wrong ... all modules should compile using PIC.  

This should really be done using .lo in the OBJECTS.  However, for
reasons I cannot remember the GUI modules which have been around for
some time use .o instead.  They get PIC, though, by

  ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

The modules added in 1.3.0 do not do this, which I think is wrong.

I'll be gone for a workshop for the next two days, and will look into
this on Thu.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 22:41:46 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 23:41:46 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <15178.4829.208468.904765@mithrandir.hornik.net>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
 <15178.4829.208468.904765@mithrandir.hornik.net>
Message-ID: <15178.9498.538675.711410@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Krzysztof Kopera writes:
>> Sorry, but my mail program add "ODP" instead "Re" to subject of my
>> previous letter.  My last problem is solved but I have new, serious
>> problem with making internet module (under src/modules/internet),
>> below is output after "make":

>> gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
>> nanohttp.o sock.o sockconn.o
>> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
>> position
>> independent.  Use +z or +Z to recompile.
>> collect2: ld returned 1 exit status

>> Can you help me? Maybe anyone have experience in building R under
>> HP-UX 11.00 or other HP-UX.

> Maybe I am getting paranoid or it is too late at night but something
> looks awfully wrong ... all modules should compile using PIC.  

> This should really be done using .lo in the OBJECTS.  However, for
> reasons I cannot remember the GUI modules which have been around for
> some time use .o instead.  They get PIC, though, by

>   ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

> The modules added in 1.3.0 do not do this, which I think is wrong.

> I'll be gone for a workshop for the next two days, and will look into
> this on Thu.

Actually ... done now.  Pls try again ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 15:32:27 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 16:32:27 +0200
Subject: [Rd] color NA is allowed, but "NA" is not ... (yet)
Message-ID: <15179.4603.473221.604700@gargle.gargle.HOWL>

In several places, we have the convention that col =  NA  means
`` don't draw '', e.g. for points() or rect().

For col = <vector> this only works when the vector is integer (numeric),
but not in other cases.  I think this is a bug, even though not in the
strict sense, since we don't seem to claim it should work..

Example:

   plot(1:10, col = c(1:4,NA,NA,4:1))

## fine

   (cc <- heat.colors(4))
   plot(1:10, col = c(cc, NA,NA,rev(cc)))

## gives error :

Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
	invalid color name

-------

Does anybody see a problem in making  "NA" for character colors behave the
same as NA for integer (numeric) ones ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 18:09:20 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 19:09:20 +0200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
In-Reply-To: <15179.4603.473221.604700@gargle.gargle.HOWL>
References: <15179.4603.473221.604700@gargle.gargle.HOWL>
Message-ID: <15179.14016.810372.917441@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In several places, we have the convention that col = NA means ``
    MM> don't draw '', e.g. for points() or rect().

    MM> For col = <vector> this only works when the vector is integer
    MM> (numeric), but not in other cases.  I think this is a bug, even
    MM> though not in the strict sense, since we don't seem to claim it
    MM> should work..

    MM> Example:

    MM>    plot(1:10, col = c(1:4,NA,NA,4:1))

    MM> ## fine

    MM>    (cc <- heat.colors(4)) plot(1:10, col = c(cc, NA,NA,rev(cc)))

    MM> ## gives error :

    MM> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg =
    MM> bg, lty = lty, : invalid color name

    MM> -------

    MM> Does anybody see a problem in making "NA" for character colors
    MM> behave the same as NA for integer (numeric) ones ?

And I have the patch ready (tested and documented) for this,
to be committed to "R-patched" i.e. to be in 1.3.1,
unless ....


Note however the following `misbehavior' (I think)  of segments() :

 n <- 8
 x <- 1:n
 ep <- 0.2
 cc <- c(1:4,NA,6:n)

   plot(x, col= cc, type='h')
 points(x, col= cc, cex=2)

 segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..

------

i.e. segments does not follow the general idea of 
 ``not drawing when color is NA ''

(note that there is no compatibility issue here, since S-plus
 does not allow NA colors--and vectorized ones in most cases--anyway.)

And this seems to be ``on purpose'' :
in  src/main/plot.c  in do_segments(), around line 1560, we have

	    dd->gp.col = INTEGER(col)[i % ncol];
	    if (dd->gp.col == NA_INTEGER)
		dd->gp.col = dd->dp.col;

which means in S language that col = NA will be translated to col = par("col")
Any reason why this would be a good idea ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jul 10 20:50:24 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 10 Jul 2001 21:50:24 +0200 (MET DST)
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
Message-ID: <200107101950.VAA11054@pubhealth.ku.dk>

This is related to the wishlist item 856 that Paul Gilbert submitted.

If there's a missing closing brace, a whole section can silently
disappear.  It would be nice if the help parser (or CHECK) checked for
matching braces in help files, and reported an error when they don't
match over the whole file, or when one section is started within
another one.

For example:

\name{test}
\alias{test}
\title{test}
\description{
This whole section will go missing, because I forgot
to close a brace on this reference:  \code{\link{test}

There may be more text afterwards, which wasn't supposed to
be included in the "code" section, but will be because of my
oversight; the next brace is supposed to close the description, but
leaves it open. When the parser sees "author", it forgets all about
this whole section.
}

\author{ Duncan Murdoch }

\keyword{test}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 10 23:58:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 10:58:30 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL>
Message-ID: <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>

Hi


> Note however the following `misbehavior' (I think)  of segments() :
>
>  n <- 8
>  x <- 1:n
>  ep <- 0.2
>  cc <- c(1:4,NA,6:n)
>
>    plot(x, col= cc, type='h')
>  points(x, col= cc, cex=2)
>
>  segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..
>
> ------
>
> i.e. segments does not follow the general idea of
>  ``not drawing when color is NA ''
>
> (note that there is no compatibility issue here, since S-plus
>  does not allow NA colors--and vectorized ones in most cases--anyway.)
>
> And this seems to be ``on purpose'' :
> in  src/main/plot.c  in do_segments(), around line 1560, we have
>
>     dd->gp.col = INTEGER(col)[i % ncol];
>     if (dd->gp.col == NA_INTEGER)
> dd->gp.col = dd->dp.col;
>
> which means in S language that col = NA will be translated to col =
par("col")
> Any reason why this would be a good idea ?


>From my memory of these things, this is how col=NA used to be treated in all
sorts of graphics functions.   In other words, segments() behaves like this
only because it hasn't been converted yet to the "new" interpretation of
col=NA (i.e., don't draw anything).

Paul

p.s.  we run into a bit of trouble with this issue for rect() and polygon().
Both use col=NA to indicate that the rect/polygon should not be FILLED, but
will still draw a border.  And its not so easy to just change the meaning of
col=NA -- we need to find a new way of specifying "don't fill, but do draw
the border".  One option would be col=NULL (?)

p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
rectangle.

p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
to use polygon(border=0) NOT to draw a border.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Jul 11 00:24:05 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 10 Jul 2001 19:24:05 -0400
Subject: [Rd] Object finalization
Message-ID: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>

I see some code in R to attach finalizers to external pointer references 
(Register[C]Finalizer).  Anyone have an example of how to code the 
finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
how to get it to operate on the pointer, since the pointer is not passed 
to the function when its called.  RegisterFinalizer takes an R closure, 
but how is it called from R (tried .Internal)?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Wed Jul 11 00:29:32 2001
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Wed, 11 Jul 2001 09:29:32 +1000
Subject: [Rd] stripchart() labels
Message-ID: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>

I propose to replace add a ... argument to stripchart(),
and to modiffy the following code fragment as shown.
[The only changes are the addition of ... arguments
in two calls to axis()]

plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
     box()
     if (vertical) {
         if (n > 1)
             axis(1, at = 1:n, lab = names(groups), ...)  # ... argument added
         axis(2)
     }
     else {
         axis(1)
         if (n > 1)
             axis(2, at = 1:n, lab = names(groups), ...)  # ... argument added
     }

Then one can do the following:
   data(PlantGrowth)
   attach(PlantGrowth)
   stripchart(weight~group, las=2)

or
   stripchart(weight~group, vertical=TRUE, las=2)

This is often the most effective way to deal with the problem
of overlapping labels, so that some labels do not appear.
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3473
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Jul 11 02:26:12 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 10 Jul 2001 20:26:12 -0500
Subject: [Rd] Object finalization
In-Reply-To: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>; from tklistaddr@keittlab.bio.sunysb.edu on Tue, Jul 10, 2001 at 07:24:05PM -0400
References: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>
Message-ID: <20010710202612.A11693@nokomis.stat.umn.edu>

On Tue, Jul 10, 2001 at 07:24:05PM -0400, Timothy H. Keitt wrote:
> I see some code in R to attach finalizers to external pointer references 
> (Register[C]Finalizer).  Anyone have an example of how to code the 
> finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
> how to get it to operate on the pointer, since the pointer is not passed 
> to the function when its called.  RegisterFinalizer takes an R closure, 
> but how is it called from R (tried .Internal)?
> 
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 

There is a writeup on this, including some example code, in

	http://www.stat.umn.edu/~luke/R/simpleref.html

(also available off http://developer.r-project.org/).  For the C
finalizer, the C function you register is of type R_CFinalizer_t,
defined as

	typedef void (*R_CFinalizer_t)(SEXP);

The SEXP it is called with is the external pointer object.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 03:06:39 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Tue, 10 Jul 2001 22:06:39 -0400 (EDT)
Subject: [Rd] Re: [R] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
Message-ID: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>

I have completed some work which allows fairly complete use of Computer
Modern fonts in R.

First, I have a quick bug fix to devPS.c: If an afm file could not be
loaded, R gives a "cannot read afm file" which should be followed by the
name of the file, but instead it is followed by garbage. Here is a patch
to devPS.c that fixes it:

1150c1150
< 	    warning("cannot read afm file %s", buf);
---
> 	    warning("cannot read afm file %s", p);
1156c1156
< 	warning("cannot read afm file %s", buf);
---
> 	warning("cannot read afm file sy______.afm");


my system is:
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

I think there may be similar problems with the error messages of the xfig
and pdf drivers, but I have not tried to understand them.

Before I send the pathches which allow use of CM fonts, I would like to
see whether there is interest in them or whether the changes I made would
be considered unacceptable. These changes allow CM fonts in
straight postscript output only. The basic idea is:

1) Extend the family option in the postscript driver to take a list of
five afm files instead of four. The fifth is for the symbol afm file. The
code changes for this are fairly clear.

2) Manipulate the CM fonts in the postscript file, merging them into new
fonts which are encoded with ISOLatin1 or Symbol encoding. This I
currently implemented by adding two new global variables like .ps.prolog.
One adds additional comments to the postscript file to allow the user
to request more resources in the postscript file, the second allows
the user to add commands to manipulate the fonts. When the second
variable is used, the default font reencoding is not used. This is not
very elegant and it leaves a lot up to the user, but the CM fonts are
really a special case and perhaps a function could be provided which sets
up the system for the CM fonts. The advantage is that this requires very
few changes to the original code.

3) Construct new afm files for the CM fonts which reflect the merged state
of the fonts that exist in the postscript file. I have done this, and
although it is not great to have to distribute customized afms, it is
simple to use now that it is done.

Currently I have this all working, although part (1) breaks old code that
doesn't specify a fifth afm file. This could of course be fixed by making
symbol added on if only four afms are given. Also changes reqired for (1)
may or may not break the other postscript related drivers.

What do you think? If you are interested, what is the best way for me to
package it up to submit it? Although the patches are small, the modified
afms are somewhat bulky to paste into email, but I have no experience with
cvs. Would an attached tarball of stuff be OK?

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Wed Jul 11 05:11:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 16:11:30 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>
Message-ID: <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>

Hi


> I propose to replace add a ... argument to stripchart(),
> and to modiffy the following code fragment as shown.
> [The only changes are the addition of ... arguments
> in two calls to axis()]
>
> plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
>      box()
>      if (vertical) {
>          if (n > 1)
>              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
added
>          axis(2)
>      }
>      else {
>          axis(1)
>          if (n > 1)
>              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
added
>      }
>
> Then one can do the following:
>    data(PlantGrowth)
>    attach(PlantGrowth)
>    stripchart(weight~group, las=2)
>
> or
>    stripchart(weight~group, vertical=TRUE, las=2)
>
> This is often the most effective way to deal with the problem
> of overlapping labels, so that some labels do not appear.


We should probably also pass the "..." to the call(s) to points() so that
you could do things like ...

    stripchart(weight~group, pch=21, col="blue", bg="lightblue")

... and "..." should probably get passed to the call to title() too.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jul 11 11:09:15 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 11 Jul 2001 12:09:15 +0200
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
References: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
 <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
Message-ID: <15180.9675.891306.920609@gargle.gargle.HOWL>

>>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:

    Brian> I have completed some work which allows fairly complete use of Computer
    Brian> Modern fonts in R.

    Brian> First, I have a quick bug fix to devPS.c: If an afm file could
    Brian> not be loaded, R gives a "cannot read afm file" which should be
    Brian> followed by the name of the file, but instead it is followed by
    Brian> garbage. Here is a patch to devPS.c that fixes it:

  1150c1150
  < 	    warning("cannot read afm file %s", buf);
  ---
  > 	    warning("cannot read afm file %s", p);
  1156c1156
  < 	warning("cannot read afm file %s", buf);
  ---
  > 	warning("cannot read afm file sy______.afm");

Thank, I've committed these for R-patched
       (and, could you please use  "diff -u" next time ?)

    ....

    Brian> I think there may be similar problems with the error messages of
    Brian> the xfig and pdf drivers, but I have not tried to understand
    Brian> them.

I've looked for them in devPS.c and fixed them analogously.
Can you tell me how to trigger them ??


    Brian>	<........... (omitted) ..........>

I do not really feel competent to answer your general question about the
usefulness of CM fonts via postscript() graphics.

In principle, I think it's a nice idea, since (La)TeX's default CM fonts
are still used quite a bit, and liked by many, and hence it would be quite 
neat to have the graphics using the same fonts.

As for how to `submit' your changes (*when* there is agreement that they
 are wanted): 
Consider putting up your code as *.tar.gz for FTP (or HTTP) and just
forward the URL to this list. 


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Wed Jul 11 12:25:52 2001
From: alobo@ija.csic.es (Agustin Lobo)
Date: Wed, 11 Jul 2001 13:25:52 +0200 (MET DST)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <3B4967CC.974635C4@bank-banque-canada.ca>
Message-ID: <Pine.OSF.3.96.1010711131757.20936C-100000@paleo.ija.csic.es>


I've seen that:

> min(c(NA,NA,NA),na.rm=T)
[1] 2147483647
Warning message: 
no finite arguments to min/max; returning extreme. in: min(..., na.rm =
na.rm) 

Would not be

numeric(0)

a more logical result? 

(I'm using this function in a program in which the vector
can often include NA's and, sometimes, a subseting can
leave only NA values).

Thanks

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo@ija.csic.es


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lcottret@yahoo.fr  Wed Jul 11 14:34:25 2001
From: lcottret@yahoo.fr (lcottret@yahoo.fr)
Date: Wed, 11 Jul 2001 15:34:25 +0200 (MET DST)
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
Message-ID: <200107111334.PAA16384@pubhealth.ku.dk>

Full_Name: Ludovic Cottret
Version: R 1.3.0
OS: Linux
Submission from: (NULL) (157.136.20.138)


I have a R function which call a C function by the instruction ".Call".
The first time I call the R function in a R session, it perfectly runs. But the
next 
times, R returns this error message :

Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
        .Call function name not in load table

The function name has disappeared !!
This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?

Thanks for your answers...
PS : Excuse my poor english...




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 14:49:31 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 11 Jul 2001 09:49:31 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107110931340.22363-100000@hussle.harvard.edu>

On Wed, 11 Jul 2001, Martin Maechler wrote:

> >>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:
>
>     Brian> First, I have a quick bug fix to devPS.c: If an afm file could
>     Brian> not be loaded, R gives a "cannot read afm file" which should be
>     Brian> followed by the name of the file, but instead it is followed by
>     Brian> garbage. Here is a patch to devPS.c that fixes it:
>
>   1150c1150
>   < 	    warning("cannot read afm file %s", buf);
>   ---
>   > 	    warning("cannot read afm file %s", p);
>   1156c1156
>   < 	warning("cannot read afm file %s", buf);
>   ---
>   > 	warning("cannot read afm file sy______.afm");
>
> Thank, I've committed these for R-patched
>        (and, could you please use  "diff -u" next time ?)
>
>     ....
>
>     Brian> I think there may be similar problems with the error messages of
>     Brian> the xfig and pdf drivers, but I have not tried to understand
>     Brian> them.
>
> I've looked for them in devPS.c and fixed them analogously.
> Can you tell me how to trigger them ??
>

They can be triggered by telling the postscript driver to load an afm file
that doesn't exist, e.g. :

postscript(family=c(doesnotexist1.afm, dne2.afm, dne3.afm, dne4.afm ), etc)

To trigger the problem with the pdf and xfig drivers, remove one of the
afm files from R's afm directory, e.g. hv______.afm and then use
family="Helvetica" in the pdf or xfig driver.


-- Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Jul 11 15:13:07 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 11 Jul 2001 10:13:07 -0400
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
In-Reply-To: <200107111334.PAA16384@pubhealth.ku.dk>; from lcottret@yahoo.fr on Wed, Jul 11, 2001 at 03:34:25PM +0200
References: <200107111334.PAA16384@pubhealth.ku.dk>
Message-ID: <20010711101307.E24919@jessie.research.bell-labs.com>

Hi Ludovic.

 There are at least two possible explanations for this behaviour.

  1)  There is a bug in the recently changed code in R to find 
     routines in C and Fortran libraries.

  2)  The routine that you are .Call()'ing is doing something
  that has confused the R internals and makes the next R commands
  not work, and potentially this is not reproducible.

If this is not proprietary or confidential code, you can send the C
code and instructions as to how to call it from R (that is, provide
simple values for the bankpath, accn, indexpath, key, beg and end
arguments), then I can see if the computations are potentially
writing over other values in memory.

Also, you can try a invoking a very simple .Call() routine 
many times to see if that displays the same failure. For example,
put the following C code in a file named simpleCall.c

#include "Rinternals.h"

SEXP
simpleCall() 
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}

Then, compile this with 
  R CMD SHLIB simpleCall.c

and call it from R in the following way

 > dyn.load("simpleCall.so")
 > for(i in 1:10) { print(.Call("simpleCall")) }

If this works, it won't determine whether it is 1) or 2) (or any other
possible reason), but if it doesn't work, we will have a lot more
information.

 Thanks,
   Duncan


lcottret@yahoo.fr wrote:
> Full_Name: Ludovic Cottret
> Version: R 1.3.0
> OS: Linux
> Submission from: (NULL) (157.136.20.138)
> 
> 
> I have a R function which call a C function by the instruction ".Call".
> The first time I call the R function in a R session, it perfectly runs. But the
> next 
> times, R returns this error message :
> 
> Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
>         .Call function name not in load table
> 
> The function name has disappeared !!
> This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?
> 
> Thanks for your answers...
> PS : Excuse my poor english...
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Jul 11 15:57:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 11 Jul 2001 07:57:35 -0700 (PDT)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <pine.osf.3.96.1010711131757.20936c_100000@paleo.ija.csic.es>
Message-ID: <Pine.LNX.4.33.0107110757350.25476@hymn03.u.washington.edu>

On Wed, 11 Jul 2001, Agustin Lobo wrote:

> 
> I've seen that:
> 
> > min(c(NA,NA,NA),na.rm=T)
> [1] 2147483647
> Warning message: 
> no finite arguments to min/max; returning extreme. in: min(..., na.rm =
> na.rm) 
> 
> Would not be
> 
> numeric(0)
> 
> a more logical result? 

It turns out that both NA and numeric(0) have disadvantages.  The problem with numeric(0) is that min() usually returns a vector of length 1 and doing comparisons like (min(x)<max(y)) would lead to an error if one of them had zero length. In many ways NA is the obvious result and is what S does, but using Inf has the effect that max(c(x,y)) is always the same as max(x,max(y)) and similar things. 

The result is more elegant with real numbers where the result is the IEEE Inf not just the largest number. Another minor advantage is that it automatically gives the correct nonparametric confidence intervals for quantiles as having infinite limits.
 

          -thomas




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:06:14 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:06:14 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL> <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CBFC6.6404FA30@stat.auckland.ac.nz>

Paul Murrell wrote:

> p.s.  we run into a bit of trouble with this issue for rect() and polygon().
> Both use col=NA to indicate that the rect/polygon should not be FILLED, but
> will still draw a border.  And its not so easy to just change the meaning of
> col=NA -- we need to find a new way of specifying "don't fill, but do draw
> the border".  One option would be col=NULL (?)

I'd like to reserve par=NULL to mean "use the current default value for
par".
This would make it possible to avoid ugliness like:
	bg = par("bg")
It would also make it possible to have sensible meanings for
	my.pars = list(...)
	polygon(x, y, col = my.pars$col)
If there was no "col" in the ... we get a sensible efect.

> p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
> rectangle.
> 
> p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
> to use polygon(border=0) NOT to draw a border.

I think the first of these is right and the second is a bug.
IMHO we do need a way of specifying different border and fill colours.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:16:20 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:16:20 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au> <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CC224.45E6752A@stat.auckland.ac.nz>

Paul Murrell wrote:
> 
> Hi
> 
> > I propose to replace add a ... argument to stripchart(),
> > and to modiffy the following code fragment as shown.
> > [The only changes are the addition of ... arguments
> > in two calls to axis()]
> >
> > plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
> >      box()
> >      if (vertical) {
> >          if (n > 1)
> >              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >          axis(2)
> >      }
> >      else {
> >          axis(1)
> >          if (n > 1)
> >              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >      }
> >
> > Then one can do the following:
> >    data(PlantGrowth)
> >    attach(PlantGrowth)
> >    stripchart(weight~group, las=2)
> >
> > or
> >    stripchart(weight~group, vertical=TRUE, las=2)
> >
> > This is often the most effective way to deal with the problem
> > of overlapping labels, so that some labels do not appear.
> 
> We should probably also pass the "..." to the call(s) to points() so that
> you could do things like ...
> 
>     stripchart(weight~group, pch=21, col="blue", bg="lightblue")
> 
> ... and "..." should probably get passed to the call to title() too.

I'd like to suggest a slightly different way of doing this.
There should be a ... in the outer function, but it should be used as
follows.

	outerfun <- function(x, y, ...) {
		pars <- list(...)
		...
		points(x, y, pch = pars$pch, col = pars$col)
		...
		title(main = pars$main, xlab = pars$xlab)
	}

This allows to be explicit about which parameter values get dispatched
to which
graphics functions.

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ce@biostat.ku.dk  Wed Jul 11 22:23:54 2001
From: ce@biostat.ku.dk (ce@biostat.ku.dk)
Date: Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)
Subject: [Rd] Extra lines when bty="n" (PR#1021)
Message-ID: <200107112123.XAA18465@pubhealth.ku.dk>

Full_Name: Claus Ekstrøm
Version: 1.2.0
OS: Linux (RedHat 7.1)
Submission from: (NULL) (212.54.75.68)


For some reason two extra lines keep appearing 
when making graphics with no box, bty="n" (a vertical line
along the leftmost side of the graphics region and a horizonal 
line along the bottom side). The lines are very visible if the 
plot is saved as a postscript file and is later included in 
a document.

Example code:

# postscript("test.ps")
y <- rnorm(100)
par(mar=c(0,0,0,0), bty="n")
plot(y)
# dev.off()


Claus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 12 00:04:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jul 2001 01:04:38 +0200
Subject: [Rd] Extra lines when bty="n" (PR#1021)
In-Reply-To: ce@biostat.ku.dk's message of "Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)"
References: <200107112123.XAA18465@pubhealth.ku.dk>
Message-ID: <x21ynn2hkp.fsf@blueberry.kubism.ku.dk>

ce@biostat.ku.dk writes:

> For some reason two extra lines keep appearing 
> when making graphics with no box, bty="n" (a vertical line
> along the leftmost side of the graphics region and a horizonal 
> line along the bottom side). The lines are very visible if the 
> plot is saved as a postscript file and is later included in 
> a document.
> 
> Example code:
> 
> # postscript("test.ps")
> y <- rnorm(100)
> par(mar=c(0,0,0,0), bty="n")
> plot(y)
> # dev.off()

You're seeing the top of the axes, which the mar=c(0,0,0,0) doesn't
quite chop off. (try it with mar=c(1,1,1,1)). You want axes=F
rather than the bty="n" setting.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jul 12 13:53:43 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 12 Jul 2001 14:53:43 +0200 (MET DST)
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
Message-ID: <200107121253.OAA23793@pubhealth.ku.dk>


`update.packages' fails when a package with incorrect Version field is
found in R_LIBS:

> update.packages()
trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
Content type `text/plain' length 49161 bytes
opened URL
.......... .......... .......... .......... ........
downloaded 48Kb

Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
        missing value where logical needed
In addition: Warning message: 
NAs introduced by coercion 

The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
contains:

Version: 4.13-3 (Gee version 98/1/27)

which after 

b <- as.integer(strsplit(b, "[\\.-]")[[1]]) 

in `newerVersion' looks like "4 13 NA" and thows the error above. 

Torsten


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul 12 17:23:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Jul 2001 18:23:22 +0200
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
In-Reply-To: <200107121253.OAA23793@pubhealth.ku.dk>
References: <200107121253.OAA23793@pubhealth.ku.dk>
Message-ID: <15181.52986.41879.904913@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> `update.packages' fails when a package with incorrect Version field is
> found in R_LIBS:

>> update.packages()
> trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
> Content type `text/plain' length 49161 bytes
> opened URL
> .......... .......... .......... .......... ........
> downloaded 48Kb

> Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
>         missing value where logical needed
> In addition: Warning message: 
> NAs introduced by coercion 

> The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
> contains:

> ...

Thanks.  Should be fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wild@stat.auckland.ac.nz  Fri Jul 13 01:48:55 2001
From: wild@stat.auckland.ac.nz (wild@stat.auckland.ac.nz)
Date: Fri, 13 Jul 2001 02:48:55 +0200 (MET DST)
Subject: [Rd] data function (PR#1023)
Message-ID: <200107130048.CAA26613@pubhealth.ku.dk>

Full_Name: Chris Wild
Version: 1.3
OS: MacOS8.6
Submission from: (NULL) (130.216.1.6)


data() is failing to read some files.
I cannot read in:
    stanford2.rda from survival library
    veteran.rda from survival library
    gehan.rda from MASS library

Problem does not exist in Windows version

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jul 13 09:57:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Jul 2001 09:57:43 +0100
Subject: [Rd] Addition to ?formula
Message-ID: <3B4EB807.BB3BA6E5@durham.ac.uk>

Hi everyone,

May I suggest that the function "all.vars" be added to the See Also
section of ?formula (as a formula object is a call).

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jul 13 10:56:01 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 13 Jul 2001 05:56:01 -0400
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
In-Reply-To: <15181.52415.857097.57828@mithrandir.hornik.net>
References: <200107101950.VAA11054@pubhealth.ku.dk> <15181.52415.857097.57828@mithrandir.hornik.net>
Message-ID: <d2htktoljmk7gtru83c9vnvasbi820a87q@4ax.com>

On Thu, 12 Jul 2001 18:13:51 +0200, you wrote:
>
>Why is this a bug report?

I'd say it's more of a "wishlist" item than a bug report.  It's only a
bug inasmuch as the response to user error is to silently do the wrong
thing.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 11:47:54 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 06:47:54 -0400
Subject: [Rd] AnonCVS
Message-ID: <3B4ED1DA.375070A6@warnes.net>


Hi All,

I would like to use anonymous cvs, but it appears not to be working
(again?).  There was a discussion back in Jan-Feb about whether to
continue supporting it, but it seemed that Tony Rossini got it working
and the discussion left off there.  Did someone decide to disable it, or
is it just not working properly?

Here's the details:


$ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login 
(Logging in to anoncvs@cvs.r-project.org)
CVS password: anoncvs

/home/rcvs/src: no such repository
cvs login: authorization failed: server cvs.r-project.org rejected
access to /home/rcvs/src for user anoncvs


BTW, I would like to see anonymous CVS continue to be available.  I
would like to use it to have an easy mechanism for creating patches that
are up-to date.  (IE, "cvs diff file.c")

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 12:01:56 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 07:01:56 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4ED524.244367EC@warnes.net>


Hi all,

I've just been working with a piece of fortran code (Leo Breiman's
random forest code) that needs a lot of arguments.  When I use .Fortran,
I get the message 'too many arguments in foreign function call'. 
Neither the help page for .Fortran (actually Foreign) nor "Writing R
Extensions" explains how many arguments are too many.  

Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
65.  

While it is possible to work around this limitation, it seems
arbitrary.  I propose increasing the arbitrary value to 255 and adding
appropriate documentation to the Foreign manual page.

Any objections/comments?

-Greg

-----Patch-Starts-Here------

diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
R-1.3.0-patched/src/library/base/man/Foreign.Rd
--- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
 \arguments{
   \item{name}{a character string giving the name of a C function or
     Fortran subroutine.}
-  \item{\dots}{arguments to be passed to the foreign function.}
+  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
     \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
     passed on to the foreign function.  If \code{FALSE}, the presence
of
Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
diff -ur R-1.3.0-orig/src/main/dotcode.c
R-1.3.0-patched/src/main/dotcode.c
--- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
+++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
@@ -372,7 +372,7 @@
     return args;
 }
 
-#define MAX_ARGS 65
+#define MAX_ARGS 255
 
 SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
 {
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Jul 13 12:27:36 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 13 Jul 2001 07:27:36 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <3B4ED524.244367EC@warnes.net>; from greg@warnes.net on Fri, Jul 13, 2001 at 07:01:56AM -0400
References: <3B4ED524.244367EC@warnes.net>
Message-ID: <20010713072736.C20268@jessie.research.bell-labs.com>

Gregory R. Warnes wrote:
> 
> Hi all,
> 
> I've just been working with a piece of fortran code (Leo Breiman's
> random forest code) that needs a lot of arguments.  When I use .Fortran,
> I get the message 'too many arguments in foreign function call'. 
> Neither the help page for .Fortran (actually Foreign) nor "Writing R
> Extensions" explains how many arguments are too many.  
> 
> Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
> 65.  
> 
> While it is possible to work around this limitation, it seems
> arbitrary.  I propose increasing the arbitrary value to 255 and adding
> appropriate documentation to the Foreign manual page.
> 
> Any objections/comments?


Unfortunately, it isn't quite as simple as that.  The code that uses
MAX_ARGS would also need to be extended and that involves adding the
remaining cases to the switch statement in do_dotCode() and
do_dotcall() in src/main/dotcode.c There's no reason why it can't be
done.  Somebody simply has to generate the appropriate code,
presumably programmatically with a little script.  I recall this was
extended in S4, but 64 was adequate for that context.

I imagine that there are some systems limit the number of arguments
one can have to a routine.

 D.


> 
> -Greg
> 
> -----Patch-Starts-Here------
> 
> diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
> R-1.3.0-patched/src/library/base/man/Foreign.Rd
> --- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
> 12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
> Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
>  \arguments{
>    \item{name}{a character string giving the name of a C function or
>      Fortran subroutine.}
> -  \item{\dots}{arguments to be passed to the foreign function.}
> +  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
> function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
>      \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
>      passed on to the foreign function.  If \code{FALSE}, the presence
> of
> Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
> diff -ur R-1.3.0-orig/src/main/dotcode.c
> R-1.3.0-patched/src/main/dotcode.c
> --- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
> +++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
> @@ -372,7 +372,7 @@
>      return args;
>  }
>  
> -#define MAX_ARGS 65
> +#define MAX_ARGS 255
>  
>  SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
>  {
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jul 13 15:09:16 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Jul 2001 16:09:16 +0200 (MET DST)
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
Message-ID: <200107131409.QAA01600@pubhealth.ku.dk>

Not too hard to fix, the following buglet (new in 1.3.0),
but I'm about to leave for one week (of vacation)..

Here is an example (for Linux) :

  lynne{sfs}214> cd /tmp
  lynne{sfs}215> mkdir blue
  lynne{sfs}216> cd blue
  /tmp/blue
  lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

  R : Copyright 2001, The R Development Core Team
  Version 1.3.0  (2001-06-22)

  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
  Type `license()' or `licence()' for distribution details.

  R is a collaborative project with many contributors.
  Type `contributors()' for more information.

  Type `demo()' for some demos, `help()' for on-line help, or
  `help.start()' for a HTML browser interface to help.
  Type `q()' to quit R.

  > data(package = "mva")
  Data sets in package `mva':


  Harman23.cor             Harman Example 2.3
  Harman74.cor             Harman Example 7.4
  ability.cov              Ability and Intelligence Tests

  Warning message: 
  package `blue' contains no datasets in: data(package = "mva") 
  > 
-------------------

See the warning line at the very end.
It's because of the new data() feature of looking for data sets in the
current directory...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 15:29:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 07:29:20 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <3B4ED1DA.375070A6@warnes.net>
References: <3B4ED1DA.375070A6@warnes.net>
Message-ID: <87pub4oqbj.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> Hi All,

    GRW> I would like to use anonymous cvs, but it appears not to be
    GRW> working (again?).  There was a discussion back in Jan-Feb
    GRW> about whether to continue supporting it, but it seemed that
    GRW> Tony Rossini got it working and the discussion left off
    GRW> there.  Did someone decide to disable it, or is it just not
    GRW> working properly?

    GRW> Here's the details:


    GRW> $ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> anoncvs

    GRW> /home/rcvs/src: no such repository cvs login: authorization
    GRW> failed: server cvs.r-project.org rejected access to
    GRW> /home/rcvs/src for user anoncvs

This is a problem with the set up.  It's actually:
        /home/rcvs/src/

Sigh.  I'm to blame.

Greg, I'm also to blame about other things, like not getting back in
touch.  I'll be in contact about various things.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:20:50 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:20:50 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <200107131607.JAA18455@cramer.stat.ucla.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
Message-ID: <87ofqoztp9.fsf@jeeves.blindglobe.net>


(sent to r-devel, in case anyone is interested)
>>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

    JdL> Great. Which modules are available for checkout ?  --- J.

(regarding R's anon cvs archive):

R  R-manuals  R-notes

(R = the "whole thing", and is probably the only one of interest -- at
the anoncvs level, we don't have a sophisticated module structure --
in fact, if there is one for the real archive, I don't know about it).

Looks like it nearly in sync with the main mirror, only 30 minutes of
of (a mirror of the???) main archive.

The modules and the timing of the sync I know; the rest is strictly
conjecture. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plastictyranny@aol.com  Fri Jul 13 17:26:08 2001
From: plastictyranny@aol.com (plastictyranny@aol.com)
Date: Fri, 13 Jul 2001 12:26:08 EDT
Subject: [Rd] AnonCVS
Message-ID: <d7.920102a.28807b20@aol.com>

Hey whats cvs?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:30:07 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:30:07 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <d7.920102a.28807b20@aol.com>
References: <d7.920102a.28807b20@aol.com>
Message-ID: <87d774zt9s.fsf@jeeves.blindglobe.net>

>>>>> "p" == plastictyranny  <plastictyranny@aol.com> writes:

    p> Hey whats cvs?

See http://cvshome.org/



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 17:30:29 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 12:30:29 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4F2225.C0311F18@warnes.net>

Duncan Templ Lang wrote:
> 
> Gregory R. Warnes wrote: 
> > 
> > Hi all, 
> > 
> > 
> > Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to 
> > 65. 
> > 
> > While it is possible to work around this limitation, it seems 
> > arbitrary. I propose increasing the arbitrary value to 255 and adding 
> > appropriate documentation to the Foreign manual page. 
> > 
> > Any objections/comments? 
> 
> Unfortunately, it isn't quite as simple as that. The code that uses 
> MAX_ARGS would also need to be extended and that involves adding the 
> remaining cases to the switch statement in do_dotCode() and 
> do_dotcall() in src/main/dotcode.c There's no reason why it can't be 
> done. Somebody simply has to generate the appropriate code, 
> presumably programmatically with a little script. I recall this was 
> extended in S4, but 64 was adequate for that context. 
> 
> I imagine that there are some systems limit the number of arguments 
> one can have to a routine. 
>

OK.  I wrote a little R script to generate the necessary case
statements.  Since these code chunks are rather large (7140 lines
each!), I modifed src/main/dotcode to #include the case statements from
the (new) files /src/main/dotcode_cases.c and  /src/main/dotcall_cases.c
.   I'm not sure that this is the best way to do this, but including
these code chunks in dotcode.c makes it unmanagable.  

While I was making and (this time) testing the changes, I noticed that
one declaration had the value 65 hardcoded rather than using MAX_ARGS.  

I've uploaded a tgz file containing the patch and the R script that
generated the case statement/call code to
ftp::/cran.r-project.org/incoming/dotcall_255.tgz

With this patch applied, the fortran subroutin I'm using now works fine
with 85 arguments.  I imagine that it should be tested on several
platforms to ensure that there isn't (as Duncan menioned) that a problem
with compilers/platforms restricting the number of arguments.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jul 13 17:59:12 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Jul 2001 11:59:12 -0500
Subject: [Rd] AnonCVS
In-Reply-To: <87ofqoztp9.fsf@jeeves.blindglobe.net>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <6rwv5cahpb.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 

Are there reasons for using anonymous cvs when anonymous rsync access
is available?  Quite frankly I don't understand why one would use
anonymous cvs instead of anonymous rsync.

(I do realize that with anonymous cvs you can read the CVS logs and
you can't do that with anonymous rsync but we make the logs available
in another form on developer.r-project.org.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jul 13 18:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jul 2001 19:06:12 +0200
Subject: [Rd] AnonCVS
In-Reply-To: rossini@blindglobe.net's message of "13 Jul 2001 09:20:50 -0700"
References: <200107131607.JAA18455@cramer.stat.ucla.edu> <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <x2hewgsqrf.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> (sent to r-devel, in case anyone is interested)
> >>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:
> 
>     JdL> Great. Which modules are available for checkout ?  --- J.
> 
> (regarding R's anon cvs archive):
> 
> R  R-manuals  R-notes
> 
> (R = the "whole thing", and is probably the only one of interest -- at
> the anoncvs level, we don't have a sophisticated module structure --
> in fact, if there is one for the real archive, I don't know about it).

[Mostly modules of historical interest, some modules relating to
the web pages on www.r-project.org and developer.r-project.org, course
materials, and the foreign package]

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 
> 
> best,
> -tony

Before people start doing this too much, we should probably get some
guidelines written down. In particular, there are quite a few things
done with CVS tags and a raw checkout of the R module might not be
what you want   .

[ assuming CVSROOT=:pserver:anoncvs@cvs.r-project.org:/home/rcvs/src/ ]

cvs co -r 1-3 R         # gives version 1.3.0
                        # earlier versions are R-1-2-3 etc.
    
cvs co -r 1-releases R  # gives the pre-release of 1.4.0
cvs co -r 1-3-patches R # gives the patched current version (1.3.1pre)

With no tag you get the bleeding-edge/large-changes version that
should eventually become 2.0.0. This was recently opened so there's
not really anything there yet.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 18:25:15 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 10:25:15 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <6rwv5cahpb.fsf@franz.stat.wisc.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
 <6rwv5cahpb.fsf@franz.stat.wisc.edu>
Message-ID: <87wv5cyc5g.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Looks like it nearly in sync with the main mirror, only 30
    >> minutes of of (a mirror of the???) main archive.
    >> 
    >> The modules and the timing of the sync I know; the rest is
    >> strictly conjecture.

    DB> Are there reasons for using anonymous cvs when anonymous rsync
    DB> access is available?  Quite frankly I don't understand why one
    DB> would use anonymous cvs instead of anonymous rsync.

Reason 1: to handle local changes on a bleeding-edge that one wants to
keep for various reasons, but which would be silly to send in as a
patch (you can then merge in upstream changes onto the local copy,
etc).  I've done that twice now with R, and assume that it'll happen
again.  Does rsync tell you which files have conflicts and do the
merge?

Reason 2: I can remember "cvs update" for a subdirectory; I can't
recall the incantation for rsync which would do the same thing.
(sure, it's 5 minutes of reading the manuals, I'd assume, but I don't
have that time).

Note that both of the above are incredibly valid for omegahat, less so
for R (2x isn't much, compared to the on-going major mods I've got
for omegahat).

Maybe more to the point: are there any reasons for sane
users/developers to do this?

:-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:08:13 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:08:13 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713180006.6FD3D36F9@sitemail.everyone.net>
References: <20010713180006.6FD3D36F9@sitemail.everyone.net>
Message-ID: <87sng0ya5u.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Its a bit annoying to specify the "-d ..." every time, but
    GRW> it'll work until you have time to fix it.

Fixed, but please verify.  
        
        /home/rcvs/src

should work, now (no trailing "/").

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:57:22 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:57:22 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713184728.1D63F36F9@sitemail.everyone.net>
References: <20010713184728.1D63F36F9@sitemail.everyone.net>
Message-ID: <87lmlsy7vx.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Now I get an entirely different error: warnes@haplo:~/R/Rcvs$
    GRW> cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> cvs [login aborted]: connect to cvs.r-project.org:2401
    GRW> failed: Connection refused

Fixed and verified, this time.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murphyk@cs.berkeley.edu  Fri Jul 13 23:10:39 2001
From: murphyk@cs.berkeley.edu (murphyk@cs.berkeley.edu)
Date: Sat, 14 Jul 2001 00:10:39 +0200 (MET DST)
Subject: [Rd] ordered factors in tree package - bug? (PR#1025)
Message-ID: <200107132210.AAA03388@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I am new to R, and didn't know which list to send this to, since it is a
bug report about a package, not about core R...

I have created a regression tree using 4 predictors: 3 are unordered
(binary) predictors, and the last is a date (integer), which I declare
to be an ordered factor. However, the tree treats the date as if it were
un-ordered, splitting into non-consecutive subsets.

My code

dat <- read.table("/home/cs/murphyk/R/Eugene/102.dat", header=TRUE)
dat$machine <- factor(dat$machine)
dat$TIM <- factor(dat$TIM)
dat$lid <- factor(dat$lid)
#dat$date <- factor(dat$date, ordered=TRUE)
dat$date <- ordered(dat$date)
tr <- tree(TRES ~ ., dat)

produces

 1) root 100 0.149300 0.2345  
   2) TIM: 111 47 0.020650 0.2011  
     4) date: 9,11 11 0.002673 0.1845 *
     5) date: 6,7,8,10,13,14,15,16,17,18,19 36 0.014060 0.2061 *
   3) TIM: 222 53 0.029490 0.2642  
     6) date: 6,7,11,12,14,15,18,19 28 0.010670 0.2539  
      12) lid: A 6 0.001350 0.2350 *
      13) lid: B 22 0.006582 0.2591 *
     7) date: 8,9,10,13,16,17 25 0.012620 0.2756  
      14) machine: 101 14 0.005750 0.2850 *
      15) machine: 102 11 0.004055 0.2636 *

and yet

> dat$date
  [1] 6  6  6  6  6  7  7  7  7  7  7  7  8  8  8  9  9  9  9  9  9  9 
9  9  10
 [26] 10 10 10 10 10 11 11 11 11 11 11 11 11 12 12 12 13 13 13 13 13 13
13 13 13
 [51] 13 13 14 14 14 14 14 14 14 15 15 15 15 15 15 15 15 15 15 16 16 16
16 16 16
 [76] 16 16 17 17 17 17 17 17 17 17 17 17 17 17 17 18 18 18 18 18 19 19
19 19 19
Levels:  6 < 7 < 8 < 9 < 10 < 11 < 12 < 13 < 14 < 15 < 16 < 17 < 18 < 19 
> is.ordered(dat$date)
[1] TRUE



Also, how do I deal with dates of the form dd/mm/yy, instead of just
integers? (In the above file, I used perl to extract the day, since I
new month and year were constant.)

I have attached the text file 102.dat, so you can easily reproduce the
above bug. I am using R 1.2.3 on linux. For future reference, is it
considered bad form to send attachments?


Kevin
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii;
 name="102.dat"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="102.dat"

date machine TIM lid TRES
6 101 222 B 0.24
6 102 222 B 0.26
6 102 111 B 0.20
6 102 222 B 0.24
6 101 111 A 0.20
7 102 111 A 0.20
7 101 111 B 0.25
7 102 222 B 0.27
7 101 111 A 0.18
7 102 111 A 0.18
7 101 222 B 0.28
7 102 222 B 0.24
8 102 111 B 0.21
8 101 222 B 0.25
8 101 222 B 0.29
9 101 222 B 0.28
9 101 111 A 0.17
9 102 222 A 0.27
9 101 111 A 0.21
9 102 111 A 0.16
9 101 111 A 0.21
9 102 111 A 0.18
9 101 111 A 0.18
9 102 111 A 0.18
10 102 222 B 0.30
10 101 222 B 0.29
10 102 222 A 0.25
10 101 222 B 0.29
10 102 222 B 0.23
10 102 111 A 0.20
11 102 222 B 0.24
11 101 111 A 0.17
11 102 111 A 0.18
11 102 222 A 0.26
11 102 111 A 0.20
11 102 222 B 0.28
11 101 111 A 0.19
11 102 222 A 0.23
12 101 222 B 0.26
12 101 222 B 0.24
12 102 222 B 0.26
13 101 222 B 0.27
13 102 222 B 0.28
13 102 222 B 0.26
13 101 111 A 0.20
13 101 111 A 0.20
13 102 222 B 0.27
13 102 111 A 0.19
13 102 222 A 0.24
13 101 111 A 0.24
13 101 222 B 0.30
13 102 222 B 0.25
14 101 111 B 0.21
14 102 222 B 0.25
14 102 222 B 0.28
14 101 222 B 0.23
14 102 111 A 0.21
14 101 111 A 0.19
14 101 222 B 0.26
15 102 222 A 0.25
15 102 111 A 0.21
15 101 222 B 0.28
15 102 222 A 0.22
15 101 111 A 0.23
15 102 222 A 0.23
15 101 222 B 0.27
15 102 222 B 0.23
15 101 222 B 0.27
15 102 222 B 0.28
16 101 222 A 0.28
16 101 222 B 0.27
16 101 111 A 0.20
16 101 222 B 0.34
16 101 222 B 0.27
16 102 111 A 0.24
16 102 111 A 0.21
16 102 111 B 0.17
17 102 111 A 0.20
17 101 111 A 0.20
17 102 111 A 0.17
17 101 222 A 0.29
17 102 222 B 0.27
17 101 222 B 0.27
17 102 111 B 0.22
17 102 222 B 0.28
17 101 111 A 0.20
17 101 111 A 0.20
17 101 111 B 0.20
17 101 222 B 0.30
17 101 111 A 0.22
18 101 222 B 0.28
18 101 111 B 0.26
18 101 111 A 0.18
18 102 111 B 0.21
18 101 222 A 0.22
19 101 111 B 0.21
19 102 111 A 0.21
19 101 222 B 0.26
19 101 111 A 0.22
19 102 111 A 0.20

--------------FF3F4C9902BE262E184667B2--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 10:40:53 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 11:40:53 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <200107131409.QAA01600@pubhealth.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
Message-ID: <15184.5029.853899.526774@mithrandir.hornik.net>

>>>>> maechler  writes:

> Not too hard to fix, the following buglet (new in 1.3.0),
> but I'm about to leave for one week (of vacation)..

> Here is an example (for Linux) :

>   lynne{sfs}214> cd /tmp
>   lynne{sfs}215> mkdir blue
>   lynne{sfs}216> cd blue
>   /tmp/blue
>   lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

>   R : Copyright 2001, The R Development Core Team
>   Version 1.3.0  (2001-06-22)

>   R is free software and comes with ABSOLUTELY NO WARRANTY.
>   You are welcome to redistribute it under certain conditions.
>   Type `license()' or `licence()' for distribution details.

>   R is a collaborative project with many contributors.
>   Type `contributors()' for more information.

>   Type `demo()' for some demos, `help()' for on-line help, or
>   `help.start()' for a HTML browser interface to help.
>   Type `q()' to quit R.

>> data(package = "mva")
>   Data sets in package `mva':


>   Harman23.cor             Harman Example 2.3
>   Harman74.cor             Harman Example 7.4
>   ability.cov              Ability and Intelligence Tests

>   Warning message: 
>   package `blue' contains no datasets in: data(package = "mva") 
>> 
> -------------------

> See the warning line at the very end.  It's because of the new data()
> feature of looking for data sets in the current directory...

Don't think that this is a new feature ...

Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
in the working directory needs rethinking.  Do we really want this?  If
so, then e.g. we need to fix warnings if there is a data dir but no
index (the working dir is not simply a `package' ...).

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jul 14 15:20:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jul 2001 16:20:27 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: Kurt Hornik's message of "Sat, 14 Jul 2001 11:40:53 +0200"
References: <200107131409.QAA01600@pubhealth.ku.dk> <15184.5029.853899.526774@mithrandir.hornik.net>
Message-ID: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Don't think that this is a new feature ...
> 
> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
> in the working directory needs rethinking.  Do we really want this?  If
> so, then e.g. we need to fix warnings if there is a data dir but no
> index (the working dir is not simply a `package' ...).

Yup. (I have one of those in one of my builddirs, so get reminded
about that from time to time. Just now I can't seem to reproduce it
though.)

I think we do want this feature but then I think I proposed it in the
first place.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 18:46:05 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 19:46:05 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
 <15184.5029.853899.526774@mithrandir.hornik.net>
 <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
Message-ID: <15184.34141.300494.134280@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> Don't think that this is a new feature ...
>> 
>> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
>> in the working directory needs rethinking.  Do we really want this?  If
>> so, then e.g. we need to fix warnings if there is a data dir but no
>> index (the working dir is not simply a `package' ...).

> Yup. (I have one of those in one of my builddirs, so get reminded
> about that from time to time. Just now I can't seem to reproduce it
> though.)

> I think we do want this feature but then I think I proposed it in the
> first place.

Are you happy with the current rules?  If so, I could modify the code to
be more reasonable with its warnings ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 21:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 22:52:51 +0200
Subject: [Rd] unbalanced braces in Rd files
Message-ID: <15184.45347.269756.435369@mithrandir.hornik.net>

Following requests by Duncan Murdoch and Paul Gilbert, I have included
some code for testing for unbalanced braces in Rd files into R CMD
check.  

Out of 147 packages on CRAN it found problems in 50 packages.  The ones
I looked into all were correctly identified, so I hope the code works
reasonably well ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jul 15 19:34:02 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jul 2001 13:34:02 -0500
Subject: [Rd] Access to cran.us.r-project.org
Message-ID: <6relrivy79.fsf@franz.stat.wisc.edu>

I am the maintainer of one of the CRAN mirrors in the U.S.,
cran.us.r-project.org.  It appears that this site has been
inaccessible since Friday.

This has me puzzled because I can connect to the same machine through
ssh and I can see that the http daemon (apache) is running.  In fact I
can make an http connection from this machine to this machine and from
other machines on any of our subnets to this machine.

My only theory is that something has changed at the interface between
our network and external networds so that it no longer forwards
incoming packets to port 80.  I can't check this easily myself because
my outside connection is from a computer running Windows and I don't
know anything about network diagnostics under Windows.

Could someone tell me 
 a) Does this site indeed appear to be down?
 b) If you try to trace the route to this site, where does the
 roadblock appear to be?
 c) Is there a way of finding out if the problem is specific to port
 80?

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Jul 15 19:46:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 Jul 2001 11:46:14 -0700
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: <6relrivy79.fsf@franz.stat.wisc.edu>
References: <6relrivy79.fsf@franz.stat.wisc.edu>
Message-ID: <8766cut4i1.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
    DB> cran.us.r-project.org.  It appears that this site has been
    DB> inaccessible since Friday.

    DB> This has me puzzled because I can connect to the same machine
    DB> through ssh and I can see that the http daemon (apache) is
    DB> running.  In fact I can make an http connection from this
    DB> machine to this machine and from other machines on any of our
    DB> subnets to this machine.

    DB> My only theory is that something has changed at the interface
    DB> between our network and external networds so that it no longer
    DB> forwards incoming packets to port 80.  I can't check this
    DB> easily myself because my outside connection is from a computer
    DB> running Windows and I don't know anything about network
    DB> diagnostics under Windows.

    DB> Could someone tell me a) Does this site indeed appear to be
    DB> down?  b) If you try to trace the route to this site, where
    DB> does the roadblock appear to be?  c) Is there a way of finding
    DB> out if the problem is specific to port 80?

Traceroute gets there. 

16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
108.532 ms
17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
109.648 ms  109.921 ms
18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
109.904 ms
19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
ms
20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
112.534 ms
21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
111.896 ms
root@jeeves:~
# # command used:    traceroute cran.us.r-project.org



telnet'ing to port 80 "hangs".  Lynx doesn't work either.

I could nmap it, but don't want to be viewed as a hacker... (I'd tell
you the ip-address of the machine in advance).

I think it might be a local config problem?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 00:12:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 01:12:54 +0200
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: rossini@blindglobe.net's message of "15 Jul 2001 11:46:14 -0700"
References: <6relrivy79.fsf@franz.stat.wisc.edu> <8766cut4i1.fsf@jeeves.blindglobe.net>
Message-ID: <x2y9pp947d.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:
> 
>     DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
>     DB> cran.us.r-project.org.  It appears that this site has been
>     DB> inaccessible since Friday.
> 
>     DB> This has me puzzled because I can connect to the same machine
>     DB> through ssh and I can see that the http daemon (apache) is
>     DB> running.  In fact I can make an http connection from this
>     DB> machine to this machine and from other machines on any of our
>     DB> subnets to this machine.
> 
>     DB> My only theory is that something has changed at the interface
>     DB> between our network and external networds so that it no longer
>     DB> forwards incoming packets to port 80.  I can't check this
>     DB> easily myself because my outside connection is from a computer
>     DB> running Windows and I don't know anything about network
>     DB> diagnostics under Windows.
> 
>     DB> Could someone tell me a) Does this site indeed appear to be
>     DB> down?  b) If you try to trace the route to this site, where
>     DB> does the roadblock appear to be?  c) Is there a way of finding
>     DB> out if the problem is specific to port 80?
> 
> Traceroute gets there. 
> 
> 16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
> 108.532 ms
> 17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
> 109.648 ms  109.921 ms
> 18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
> 109.904 ms
> 19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
> ms
> 20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
> 112.534 ms
> 21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
> 111.896 ms
> root@jeeves:~
> # # command used:    traceroute cran.us.r-project.org
> 
> 
> 
> telnet'ing to port 80 "hangs".  Lynx doesn't work either.
> 
> I could nmap it, but don't want to be viewed as a hacker... (I'd tell
> you the ip-address of the machine in advance).
> 
> I think it might be a local config problem?

developer.r-project.org is equally dead. For the same reason of
course. It *is* possible to connect locally, e.g.

lynx developer.r-project.org

works fine when issued on Franz. The apache server seems to have been
reset at 06:25 this morning and also at 11.19 yesterday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Mon Jul 16 07:52:14 2001
From: henrikb@braju.com (Henrik Bengtsson)
Date: Sun, 15 Jul 2001 23:52:14 -0700
Subject: [Rd] Function calls and UseMethod.
Message-ID: <KKEGJOGBELBHDIKPINBMCEHFCFAA.henrikb@braju.com>

Maybe the following have already been discussed, if not...

BACKGROUND: I am writing a class which should have the method get(). For
this (and a lot of other things) to work I have to redefine the default
get() like this:

if (!exists("get.default")) get.default <- get;
get <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("get", obj, ...);
}

and still I am not sure if this is bullet proof. Maybe someone else, i.e. in
a previously loaded library, has already modified the get() method.

SUGGESTION I: Would it be possible to have *all* function calls by default
using the UseMethod approach? What I suggest results in that there is no
need for people to actually write the UseMethod function wrappers, but it
should be done within [R]. Example:

myHelloWorld.default <- function() {
  cat("Hello world!\n");
}

and this should be able to be called just as

myHelloWorld()

without having to explicitly write

myHelloWorld <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("myHelloWorld", obj, ...)
}

I think this could clean up a lot of the "mess" of overloading and
redefining functions. It would also definitely remove on risk of overwriting
allready existing functions. I can see some problems how to implement this;
for instance, how would [R] know that myHelloWorld is a function call? I
know too little about the internal structure.

SUGGESTION II: If the first approach is not possible, what about "cleaning
up" the [R] code (base etc) and always write like get.default declarations
and not just get? Is there a reason not to?

Thanks

Henrik Bengtsson

150 Panoramic Way
Berkeley, CA 94704
(510) 647-3572
h e n r i k b @ b r a j u . c o m

PS. For some reason I mailed this message to r-announce-request@lists...
before. Sorry about that. DS.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 10:35:05 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)
Subject: [Rd] polyroot() (PR#751)
Message-ID: <200107160935.LAA10917@pubhealth.ku.dk>

In a bug report from Nov.28 2000, Li Dongfeng writes:

-----
I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.
----- (end Dongfeng)

This was analyzed somewhat, and it was found that polyroot() does
work, sort of, for lower degree polynomials, but becomes numerically
unstable when the degree is large. The exact result is
compiler-dependent, but the problem is still with us:

> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
 [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
[15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
[22] 1.8989308 1.9040403 1.9357768 1.9907273

It has been nagging us from the bug repository ever since.

Last night I got the bright idea of feeding that polynomial to the
TOMS-419 routine off of Netlib, and got results that agree with the
ones stated for S-PLUS. Now this *is* the algorithm that the one in R
is supposed to be a C transcription of, so there would seem to be a
transcription error somewhere...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Mon Jul 16 14:06:18 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Mon, 16 Jul 2001 15:06:18 +0200 (MET DST)
Subject: [Rd] make check failure on SGI-IRIX6.5 (PR#1026)
Message-ID: <200107161306.PAA13252@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched version
OS: SGI's IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


During the 'make check' step of the installation procedure, I had the following
error messages


> make test > rapportMakeTest
/bin/sh: /usr/local/bin//perl: arg list too long

----------
I've seen that already in my former life in the software industry.
It seems the SGI sh shell is rather more limitated by the length
of arg lists than it's linux conterpart (I do not know about the other OSs).

----------
>gmake[3]: *** [modreg-Ex.Rout] Bus error (core dumped)
gmake[3]: *** Deleting file `modreg-Ex.Rout'
gmake[2]: *** [test-Examples] Error 2
gmake[1]: *** [test-Examples] Error 2
gmake: *** [test-all-basics] Error 1
----------
I cannot (or rather I do not dare) make any hypothesis about this one...



Cheers,






Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 16 14:36:47 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Jul 2001 15:36:47 +0200
Subject: [Rd] forwarded message from Inge Monika
Message-ID: <15186.60911.557600.739@mithrandir.hornik.net>


--Hipsgkxbeg
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

This one was sent privately to me.


--Hipsgkxbeg
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from tuvok.kom.tuwien.ac.at (tuvok.kom.tuwien.ac.at [192.35.241.66])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id WAA28632
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:30:30 +0200
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by tuvok.kom.tuwien.ac.at (8.11.3/8.11.3) with ESMTP id f6DKY9i22708
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:34:09 +0200 (MEST)
Received: from postal1.lbl.gov (really [128.3.7.82]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15L9ea-000JL3C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 15:35:12 -0500 (CDT) 
Received: from SpamWall.lbl.gov (localhost [127.0.0.1])
	by postal1.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZA216368
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:11 -0700 (PDT)
Received: from lbl.gov (bugari.lbl.gov [131.243.225.136])
	by SpamWall.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZ9A16349
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:09 -0700 (PDT)
Message-ID: <3B4F5B85.76DDABF1@lbl.gov>
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-UIDL: 696a8ba40a8612f22281868799c93677
From: Inge Monika <imonika@lbl.gov>
Sender: imonika@lbl.gov
To: Kurt.Hornik@r-project.org
Subject: R memory problem
Date: Fri, 13 Jul 2001 13:35:18 -0700

Dear Kurt,

My name is Inge Monika. I'm currently using R version 1.3.0 to do
clustering analysis for my data set. My data set consists of 7 variables
and 21120 observations. Now, I have trouble increasing my vector size to
do the "emclust" function for my data. I only could increase my vector
size up to 2047M which is still too small. I keep getting an error
message "cannot allocate vector of size 82Kb" after I applied the
emclust function.
Could you tell me what's that mean?
And how can I solve that problem? My system administrator already
provide me with 2.5G swap space, but still I cannot increase my vector
size for more than 2047M.

I hope you could help me to solve this problem.
Thank you very much for your time and attention. I hope to hear from you
soon.

Sincerely,
Inge Monika


--Hipsgkxbeg--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Mon Jul 16 15:50:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 10:50:25 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>


I would like to create an R package that will depend on the ability to use
more than 65 parameters.  Would it be reasonable to expect this patch (or
something equivalent) to be part of , say R > 1.3.1 ?

Would it help if I submit an official bug report?

-Greg

 
  From: Gregory R. Warnes [mailto:greg@warnes.net]
  > 
  > Duncan Templ Lang wrote:
  > > 
  > > Gregory R. Warnes wrote: 
  > > > 
  > > > Hi all, 
  > > > 
  > > > 
  > > > Looking at the code in src/main/dotcode.c, I see that 
  > MAX_ARGS is set to 
  > > > 65. 
  > > > 
  > > > While it is possible to work around this limitation, it seems 
  > > > arbitrary. I propose increasing the arbitrary value to 
  > 255 and adding 
  > > > appropriate documentation to the Foreign manual page. 
  > > > 
  > > > Any objections/comments? 
  > > 
  > > Unfortunately, it isn't quite as simple as that. The code 
  > that uses 
  > > MAX_ARGS would also need to be extended and that involves 
  > adding the 
  > > remaining cases to the switch statement in do_dotCode() and 
  > > do_dotcall() in src/main/dotcode.c There's no reason why 
  > it can't be 
  > > done. Somebody simply has to generate the appropriate code, 
  > > presumably programmatically with a little script. I 
  > recall this was 
  > > extended in S4, but 64 was adequate for that context. 
  > > 
  > > I imagine that there are some systems limit the number of 
  > arguments 
  > > one can have to a routine. 
  > >
  > 
  > OK.  I wrote a little R script to generate the necessary case
  > statements.  Since these code chunks are rather large (7140 lines
  > each!), I modifed src/main/dotcode to #include the case 
  > statements from
  > the (new) files /src/main/dotcode_cases.c and  
  > /src/main/dotcall_cases.c
  > .   I'm not sure that this is the best way to do this, but including
  > these code chunks in dotcode.c makes it unmanagable.  
  > 
  > While I was making and (this time) testing the changes, I 
  > noticed that
  > one declaration had the value 65 hardcoded rather than 
  > using MAX_ARGS.  
  > 
  > I've uploaded a tgz file containing the patch and the R script that
  > generated the case statement/call code to
  > ftp::/cran.r-project.org/incoming/dotcall_255.tgz
  > 
  > With this patch applied, the fortran subroutin I'm using 
  > now works fine
  > with 85 arguments.  I imagine that it should be tested on several
  > platforms to ensure that there isn't (as Duncan menioned) 
  > that a problem
  > with compilers/platforms restricting the number of arguments.
  > 
  > -Greg
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-devel mailing list -- Read 
  > http://www.ci.tuwien.ac.at/~hornik/R/R-  > FAQ.html
  > Send 
  > "info", "help", or "[un]subscribe"
  > (in the 
  > "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
  > _._._._._._._._._._
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Jul 16 16:38:35 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Jul 2001 11:38:35 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
Message-ID: <cg26ltsuvfolq5qttamuifafiub2ttlbbk@4ax.com>

On Mon, 16 Jul 2001 10:50:25 -0400, you wrote in message
<5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>:

>
>I would like to create an R package that will depend on the ability to use
>more than 65 parameters.  Would it be reasonable to expect this patch (or
>something equivalent) to be part of , say R > 1.3.1 ?

People are slow to upgrade, so you might be better off in the short
run to somehow reduce the number of parameters below 65.  For example,
write a wrapper function that groups a number of scalar parameters
into one vector.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 17:43:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 18:43:18 +0200
Subject: [Rd] polyroot() (PR#751)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)"
References: <200107160935.LAA10917@pubhealth.ku.dk>
Message-ID: <x2k8189655.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

> In a bug report from Nov.28 2000, Li Dongfeng writes:
> 
> -----
> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.
> ----- (end Dongfeng)
> 
> This was analyzed somewhat, and it was found that polyroot() does
> work, sort of, for lower degree polynomials, but becomes numerically
> unstable when the degree is large. The exact result is
> compiler-dependent, but the problem is still with us:
> 
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
>  [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
> [15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
> [22] 1.8989308 1.9040403 1.9357768 1.9907273
> 
> It has been nagging us from the bug repository ever since.
> 
> Last night I got the bright idea of feeding that polynomial to the
> TOMS-419 routine off of Netlib, and got results that agree with the
> ones stated for S-PLUS. Now this *is* the algorithm that the one in R
> is supposed to be a C transcription of, so there would seem to be a
> transcription error somewhere...

Oops, something went wrong in the copying from the original report.
The test case is

 sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,
                   0,0,0,0,0,0,0,0,0,1,-2,1))))
                                          ^
                                        Fell out.

Anyways, the bug is fixed now. Here's the patch if anyone is in a
hurry:

$ cvs diff -u src/appl/cpoly.c 
Index: src/appl/cpoly.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/appl/cpoly.c,v
retrieving revision 1.23
diff -u -r1.23 cpoly.c
--- src/appl/cpoly.c    26 Apr 2001 15:28:35 -0000      1.23
+++ src/appl/cpoly.c    16 Jul 2001 16:33:59 -0000
@@ -646,7 +646,7 @@
 
     e = hypot(qr[0], qi[0]) * m_re / (a_re + m_re);
     for (i=0; i < n; i++)
-       e *= (ms + hypot(qr[i], qi[i]));
+       e = e*ms + hypot(qr[i], qi[i]);
 
     return e * (a_re + m_re) - mp * m_re;
 }
  
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jul 16 23:59:49 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 17 Jul 2001 10:59:49 +1200
Subject: [Rd] Re: argument ordering (was <blank>)
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
Message-ID: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>

Hi


---snip---
I am trying to change the number of the ticks on each axis, but every time I
can not succeed and receive the error message shown below even I use the
default values:

>plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
   Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
:
        location and label lengths differ, 6 != 3
---snip---


The problem is that the "lab" parameter is being passed down (via plot.ts)
to axis in a "..." argument, but it is being matched to the "labels"
argument in axis().

In other words, axis() thinks you are saying "labels=c(5, 5, 7)".   This is
not your fault;  it is an unfortunate interaction between partial matching
of argument names and the "..." argument.

A simple workaround would be ...

    op <- par(lab=c(5, 5, 7)
    plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
    par(op)

... a more long-term solution will require some more thought ...

[to R-devel:

    (i) could put the labels argument at the end of the list -- i.e.,
axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
using "lab" as an abbreviation for "labels" would then get consumed as a
par() setting (?)

    (ii) could put explicit "lab" argument in the list too -- i.e.,
axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

    (iii) ... ?]

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:30:26 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:30:26 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>


  From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
  > 
  > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
  > 
  > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
  > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
  > >   > >
  > >   > > I would like to create an R package that will depend on
  > >   > > the ability to use
  > >   > > more than 65 parameters.  Would it be reasonable to expect
  > >   > > this patch (or
  > >   > > something equivalent) to be part of , say R > 1.3.1 ?
  > >   >
  > >   > People are slow to upgrade, so you might be better 
  > >   > off in the short
  > >   > run to somehow reduce the number of parameters below 65.
  > >   > For example,
  > >   > write a wrapper function that groups a number of 
  > >   > scalar parameters
  > >   > into one vector.
  > >
  > > Actually, the whole point of the patch was to get out of 
  > > this.  I want to keep the code as close to what was written 
  > > by the original author and as
  > > simple as possible...
  > 
  > 
  > Sorry, but I don't see that.  You want to write the wrapper 
  > in R?  Why is
  > it not as simple to write it in C?  

It is, in fact *not* as simple to write it in C.  Now the user must go from
2 languages (R and FORTRAN) to 3.  

  > I really don't see the need to remove
  > the limitation in R (or even to have it as high as 65) 
  > since R now has
  > .External() which allows an unlimited list of arguments to 
  > be passed to C
  > code.  I can't believe that the natural R representation is 
  > 85 separate
  > objects, 

No the actual R representation isn't anywhere near 85 separate objects.  The
actual R representation is more like 10 objects.  The point is that existing
FORTRAN code---which is used for R, S-Plus, and for a stand alone
program---makes use of some 60 objects which need to be dynamically sized,
hence the other 25 parameters specifying object sizes.  Indeed many of these
objects are merely 'scratch space' for the code to work in.  Still, its
easier for the user to allocate these in R (and have R manage the memory)
than to write the equivalent code in C. 

  > so the natural way looks like a C wrapper 
  > translating between R
  > objects and Fortran pointers.  You can even copy selectively.
  > 
  > The argument is that new code should probably be using .Call (if S
  > compatibility is relevant) or .External rather than .C, at 
  > least provided
  > that a C wrapper is feasible.  Those interfaces seem very 
  > much under-used.
  > (Including by me, for S3-compatibility reasons.)

Brian, do you really expect everyone to get in the habit of writing C code
to translate R SEXP into appropriate C or Fortran objects?   For the large
number of cases where the objects to be passed to and from C/Fortran are
simple scalars and vectors it really makes sense to keep the code to do the
translation in a standard library routine like do_dotcode().  This keeps the
bugs down to a minimum and makes it as easy as possible for people to
interface code.

All I suggested doing was removing the arbitrary restriction to <= 65
parameters.  I even provided the code.  What's the problem?

  > 
  > -- 
  > Brian D. Ripley,                  ripley@stats.ox.ac.uk
  > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
  > University of Oxford,             Tel:  +44 1865 272861 (self)
  > 1 South Parks Road,                     +44 1865 272860 (secr)
  > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
  > 
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:52:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:52:30 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC7B@groexmbcr02.pfizer.com>

  > From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
  > 
  > Greg,
  >   you might be better off writing a wrapper,
  >    
  >   R->foo where foo has less than 65 args and does nothing more than
  >   unpack them and calls bar (the original) with as many args as you
  >   want, not much code change and not much cost...


Hi Rob,

[BTW, sorry about the crosspost to R-help.  Mean't to continue the
discussion on R-devel, but miss-typed.]

Actually, the original author used the function with 85 arguments in S-Plus.
Rather than adding a new wrapper function, I wanted to fix the (in my
opinion) artificial limit of 65 parameters and let them keep the same exact
source file between R and S-Plus.  

-Greg






  > 
  > -- 
  > +-----------------------------------------------------------
  > ----------------+
  > | Robert Gentleman                 phone : (617) 632-5250   
  >                 |
  > | Associate Professor              fax:   (617)  632-2444   
  >                 |
  > | Department of Biostatistics      office: M1B28
  > | Harvard School of Public Health  email: 
  > rgentlem@jimmy.dfci.harvard.edu   |
  > +-----------------------------------------------------------
  > ----------------+
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 01:09:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 02:09:52 +0200
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Mon, 16 Jul 2001 19:30:26 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <x2pub0pga7.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large
> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.
> 
> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

Some anxiety that there might be platforms that really don't allow
many parameters, I suppose. (As opposed to the arbitrary limit imposed
by R, essentially caused by the programmer giving up after

    case 65:
        retval = (SEXP)fun(
            cargs[0],  cargs[1],  cargs[2],  cargs[3],  cargs[4],
            cargs[5],  cargs[6],  cargs[7],  cargs[8],  cargs[9],
            cargs[10], cargs[11], cargs[12], cargs[13], cargs[14],
            cargs[15], cargs[16], cargs[17], cargs[18], cargs[19],
            cargs[20], cargs[21], cargs[22], cargs[23], cargs[24],
            cargs[25], cargs[26], cargs[27], cargs[28], cargs[29],
            cargs[30], cargs[31], cargs[32], cargs[33], cargs[34],
            cargs[35], cargs[36], cargs[37], cargs[38], cargs[39],
            cargs[40], cargs[41], cargs[42], cargs[43], cargs[44],
            cargs[45], cargs[46], cargs[47], cargs[48], cargs[49],
            cargs[50], cargs[51], cargs[52], cargs[53], cargs[54],
            cargs[55], cargs[56], cargs[57], cargs[58], cargs[59],
            cargs[60], cargs[61], cargs[62], cargs[63], cargs[64]);
        break;

There's obviously no portable and neat way of doing variable length
argument lists.)

You don't need to go via SEXPs to solve your problem, and in fact not
even to C. You could for instance use (pardon, my Fortran is getting
rusty): 

      subroutine doit(work, p, i)
      double precision work(1)
      integer p(59), i(25)
      call myfun(work(1),work(p(1)),work(p(2)),....,work(p(59)),
     +           i(1),...,i(25))
      return
      end
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 17 03:32:48 2001
From: paul@stat.auckland.ac.nz (paul@stat.auckland.ac.nz)
Date: Tue, 17 Jul 2001 04:32:48 +0200 (MET DST)
Subject: [Rd] Re: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200107170232.EAA16241@pubhealth.ku.dk>

Hi


> Also,
>       rect()
> fails similarly.
> This gives funny legend()s :
>  plot(1:10)
>  legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  op <- par(xpd = NA)
>  legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  ## pch = 1 also doesn't ?!?? ?? why??  It does here :
>  points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
>  ## and other pch's do here
>  legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
>  par(op)
> ## Note that there seems another peculiar clipping bug
> ##       with pch = 1 in legend


I believe the rect() problem has been fixed by the fix to PR #943 -- Martin,
can you confirm this please?

I believe the pch=1 problem is the same as reported in PR #943

Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 07:45:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 07:45:23 +0100 (BST)
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.31.0107170728290.21400-100000@auk.stats>

On Mon, 16 Jul 2001, Warnes, Gregory R wrote:

>
>   From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
>   >
>   > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
>   >
>   > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
>   > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
>   > >   > >
>   > >   > > I would like to create an R package that will depend on
>   > >   > > the ability to use
>   > >   > > more than 65 parameters.  Would it be reasonable to expect
>   > >   > > this patch (or
>   > >   > > something equivalent) to be part of , say R > 1.3.1 ?
>   > >   >
>   > >   > People are slow to upgrade, so you might be better
>   > >   > off in the short
>   > >   > run to somehow reduce the number of parameters below 65.
>   > >   > For example,
>   > >   > write a wrapper function that groups a number of
>   > >   > scalar parameters
>   > >   > into one vector.
>   > >
>   > > Actually, the whole point of the patch was to get out of
>   > > this.  I want to keep the code as close to what was written
>   > > by the original author and as
>   > > simple as possible...
>   >
>   >
>   > Sorry, but I don't see that.  You want to write the wrapper
>   > in R?  Why is
>   > it not as simple to write it in C?
>
> It is, in fact *not* as simple to write it in C.  Now the user must go from
> 2 languages (R and FORTRAN) to 3.

But the user is you, who knows C.  One can write the wrapper in Fortran
too, as ppr.f exemplifies.

>   > I really don't see the need to remove
>   > the limitation in R (or even to have it as high as 65)
>   > since R now has
>   > .External() which allows an unlimited list of arguments to
>   > be passed to C
>   > code.  I can't believe that the natural R representation is
>   > 85 separate
>   > objects,
>
> No the actual R representation isn't anywhere near 85 separate objects.  The
> actual R representation is more like 10 objects.  The point is that existing
> FORTRAN code---which is used for R, S-Plus, and for a stand alone
> program---makes use of some 60 objects which need to be dynamically sized,
> hence the other 25 parameters specifying object sizes.  Indeed many of these
> objects are merely 'scratch space' for the code to work in.  Still, its
> easier for the user to allocate these in R (and have R manage the memory)
> than to write the equivalent code in C.

Really?  Using R_alloc in C seems exactly equivalent to me.

>   > so the natural way looks like a C wrapper
>   > translating between R
>   > objects and Fortran pointers.  You can even copy selectively.
>   >
>   > The argument is that new code should probably be using .Call (if S
>   > compatibility is relevant) or .External rather than .C, at
>   > least provided
>   > that a C wrapper is feasible.  Those interfaces seem very
>   > much under-used.
>   > (Including by me, for S3-compatibility reasons.)
>
> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large

No, but I am suggesting that most package writers should.

> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.

In most cases it is one or two vectors.  Beyond that, the lack of
type-checking causes a large number of bugs, so I do think using .Call is
the way to keep `bugs down to a minimum'.

> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

1) Your code had as I understand it a different arbitrary restriction.

2) We don't know what the OS-specific limits are.  Certainly in the days of
S-PLUS for Windows 3.3 there were quite low limits on the total size of the
arguments in use.  These days I don't even know how to find out such
information.

3) We always have to weigh the support issues of changing the code to
support a rare case.  (I do believe it is rare: this is the first
instance I have seen in ca 14 years of listening to S and R programmers.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Tue Jul 17 12:36:44 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Tue, 17 Jul 2001 13:36:44 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171136.NAA19217@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


The function La.eigen, called by cmdscale in the package mva behaves an
unexplicable way (for me).

The following lines show what happened.
I tried the very same on linux, and it worked fine.




>a <- matrix(c(1,2,3,2),3,3)
>a
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    1    2
[3,]    3    2    1
>library(mva)
>cmdscale(a)
Error in La.eigen(Tmat, symmetric = TRUE) : 
	On entry to DSYEV  parameter number 8 had an illegal value



Regards,



Laurent



PS: I had trouble during the 'make check' installation step. I was pointed out
it was a known problem with modreg on SGIs. I think both things are
independant,
but, well, one never knows...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 12:48:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 13:48:59 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171136.NAA19217@pubhealth.ku.dk>
References: <200107171136.NAA19217@pubhealth.ku.dk>
Message-ID: <15188.9771.406214.712244@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)


> Hello,

> The function La.eigen, called by cmdscale in the package mva behaves
> an unexplicable way (for me).

> The following lines show what happened.  I tried the very same on
> linux, and it worked fine.

>> a <- matrix(c(1,2,3,2),3,3)
>> a
>      [,1] [,2] [,3]
> [1,]    1    2    3
> [2,]    2    1    2
> [3,]    3    2    1
>> library(mva)
>> cmdscale(a)
> Error in La.eigen(Tmat, symmetric = TRUE) : 
> 	On entry to DSYEV  parameter number 8 had an illegal value

I can confirm this on Naras's IRIX machine (in fact, was just about to
report this myself ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:02:12 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 17 Jul 2001 14:02:12 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171202.OAA19478@pubhealth.ku.dk>

On Tue, 17 Jul 2001, Kurt Hornik wrote:

> >>>>> laurent  writes:
>
> > Full_Name: Laurent Gautier
> > Version: 1.3.0-patched
> > OS: IRIX 6.5
> > Submission from: (NULL) (130.225.67.199)
>
>
> > Hello,
>
> > The function La.eigen, called by cmdscale in the package mva behaves
> > an unexplicable way (for me).
>
> > The following lines show what happened.  I tried the very same on
> > linux, and it worked fine.
>
> >> a <- matrix(c(1,2,3,2),3,3)
> >> a
> >      [,1] [,2] [,3]
> > [1,]    1    2    3
> > [2,]    2    1    2
> > [3,]    3    2    1
> >> library(mva)
> >> cmdscale(a)
> > Error in La.eigen(Tmat, symmetric = TRUE) :
> > 	On entry to DSYEV  parameter number 8 had an illegal value
>
> I can confirm this on Naras's IRIX machine (in fact, was just about to
> report this myself ...)

Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
is returned?  Alternatively, it may fail on the first dsyev call, in which
case I would guess that the wrong LAPACK routine is being found (and that's
a plausible explanation).

I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)

What BLAS is in use?  The intention is that the workspace is chosen large
enough to allow the BLAS to work efficiently: it might just be that
the BLAS is reporting erroneously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 17 13:13:59 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 17 Jul 2001 08:13:59 -0400
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171202.OAA19478@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Tue, Jul 17, 2001 at 02:02:12PM +0200
References: <200107171202.OAA19478@pubhealth.ku.dk>
Message-ID: <20010717081359.D27049@jessie.research.bell-labs.com>


For what it is worth, I saw this problem a few weeks ago but didn't
have time to investigate it in depth and managed to find a work
around.  It arose for me on Solaris, specifically when I was compiling
with the native C compiler cc and f77.  Switching to gcc and f77
removed the problem.  (There is a possibility that I have this
backwards, but I think my memory is correct on this point.)

D.


ripley@stats.ox.ac.uk wrote:
> On Tue, 17 Jul 2001, Kurt Hornik wrote:
> 
> > >>>>> laurent  writes:
> >
> > > Full_Name: Laurent Gautier
> > > Version: 1.3.0-patched
> > > OS: IRIX 6.5
> > > Submission from: (NULL) (130.225.67.199)
> >
> >
> > > Hello,
> >
> > > The function La.eigen, called by cmdscale in the package mva behaves
> > > an unexplicable way (for me).
> >
> > > The following lines show what happened.  I tried the very same on
> > > linux, and it worked fine.
> >
> > >> a <- matrix(c(1,2,3,2),3,3)
> > >> a
> > >      [,1] [,2] [,3]
> > > [1,]    1    2    3
> > > [2,]    2    1    2
> > > [3,]    3    2    1
> > >> library(mva)
> > >> cmdscale(a)
> > > Error in La.eigen(Tmat, symmetric = TRUE) :
> > > 	On entry to DSYEV  parameter number 8 had an illegal value
> >
> > I can confirm this on Naras's IRIX machine (in fact, was just about to
> > report this myself ...)
> 
> Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
> is returned?  Alternatively, it may fail on the first dsyev call, in which
> case I would guess that the wrong LAPACK routine is being found (and that's
> a plausible explanation).
> 
> I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)
> 
> What BLAS is in use?  The intention is that the workspace is chosen large
> enough to allow the BLAS to work efficiently: it might just be that
> the BLAS is reporting erroneously.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:54:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>

I've found the problem.  The read.spss code was free-ing not Free-ing
memory allocated by Calloc.  On most platforms that would work, but not on
Windows where Calloc/Free and calloc/free use separate memory managers.

This explains the randomness of the problems.

I'm solving this (and a few other things) in 0.4-6.
I will put up a pre-compiled version, so update.packages() should fetch it
tomorrow.


On Mon, 9 Jul 2001, Uwe Ligges wrote:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
>
>
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
>
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
>
>   read.spss("c:/test.sav")
>
> $VAR00001
> [1] 2 3
>
> $VAR00002
> [1] 3 5
>
>
>
> But trying to read a non existant file crashes R on my machine:
>
>   read.spss("c:/nonexistant.abc")  # R crashes

This is already solved in 0.4-5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 15:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 16:52:51 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <20010717081359.D27049@jessie.research.bell-labs.com>
References: <200107171202.OAA19478@pubhealth.ku.dk>
 <20010717081359.D27049@jessie.research.bell-labs.com>
Message-ID: <15188.20803.442122.659203@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> For what it is worth, I saw this problem a few weeks ago but didn't
> have time to investigate it in depth and managed to find a work
> around.  It arose for me on Solaris, specifically when I was compiling
> with the native C compiler cc and f77.  Switching to gcc and f77
> removed the problem.  (There is a possibility that I have this
> backwards, but I think my memory is correct on this point.)

Earlier today I tried

	stat.auckland		(solaris)
	rgmiller.stanford	(irix)

both with gcc and g77.  Make check went thru on solaris but irix had the
reported problems ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jul 17 16:41:47 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 17 Jul 2001 11:41:47 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
References: <Pine.WNT.4.31.0107161916001.1056-100000@tern.stats>
Message-ID: <3B545CBB.D9371BD0@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
> 
> >
> >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
> >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
> >   > >
> >   > >I would like to create an R package that will depend on
> >   > the ability to use
> >   > >more than 65 parameters.  Would it be reasonable to expect
> >   > this patch (or
> >   > >something equivalent) to be part of , say R > 1.3.1 ?
> >   >
> >   > People are slow to upgrade, so you might be better off in the short
> >   > run to somehow reduce the number of parameters below 65.
> >   > For example,
> >   > write a wrapper function that groups a number of scalar parameters
> >   > into one vector.
> >
> > Actually, the whole point of the patch was to get out of this.  I want to
> > keep the code as close to what was written by the original author and as
> > simple as possible...
> 
> Sorry, but I don't see that.  You want to write the wrapper in R?  Why is
> it not as simple to write it in C?  I really don't see the need to remove
> the limitation in R (or even to have it as high as 65) since R now has
> .External() which allows an unlimited list of arguments to be passed to C
> code.  I can't believe that the natural R representation is 85 separate
> objects, so the natural way looks like a C wrapper translating between R
> objects and Fortran pointers.  You can even copy selectively.
> 
> The argument is that new code should probably be using .Call (if S
> compatibility is relevant) or .External rather than .C, at least provided
> that a C wrapper is feasible.  Those interfaces seem very much under-used.
> (Including by me, for S3-compatibility reasons.)
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

The limitation to 65 arguments (or at any rate some fixed number) is
imposed by pretty fundamental limitations of C.  It applies to .External
and .Call as well as to .C, and any S language interface will have such
a limit unless it goes around the C calling mechanism (which in turn
would likely be devastating for portability).

It's understandable to want to create as little new C code as possible,
but since there has to be a limit, at some point we're saying "More than
N arguments to a subroutine are too confusing.  Simplify it before you
expose the interface to users."  65 seems a plausible value for N to me.

The example Greg describes with a bunch of scratch arrays is, in my
experience, usually best handled by a .Call to a C wrapper that uses C
macros from Appendix A of the green book to allocate the scratch space
(NEW_NUMERIC and NUMERIC_POINTER, for example).  That is usually only
marginally more work than writing the wrapper in R, is a good deal more
efficient, and hides the grosser ugliness from the end user better.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 16:48:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 17:48:02 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Prof Brian D Ripley's message of "Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>
Message-ID: <x2n1635zgt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> I've found the problem.  The read.spss code was free-ing not Free-ing
> memory allocated by Calloc.  On most platforms that would work, but not on
> Windows where Calloc/Free and calloc/free use separate memory managers.

Odd. The opposite problem (using calloc/Free) did give segfaults
on Linux.... (That's what caused the trouble when the .sav file had
illegal characters in variable names.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 17:03:20 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 18:03:20 +0200
Subject: [Rd] Re: argument ordering (was <blank>)
In-Reply-To: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
 <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
Message-ID: <15188.25032.28517.851384@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> ---snip---
> I am trying to change the number of the ticks on each axis, but every time I
> can not succeed and receive the error message shown below even I use the
> default values:

>> plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
>    Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
> :
>         location and label lengths differ, 6 != 3
> ---snip---


> The problem is that the "lab" parameter is being passed down (via
> plot.ts) to axis in a "..." argument, but it is being matched to the
> "labels" argument in axis().

> In other words, axis() thinks you are saying "labels=c(5, 5, 7)".
> This is not your fault; it is an unfortunate interaction between
> partial matching of argument names and the "..." argument.

What a nightmare ...

> A simple workaround would be ...

>     op <- par(lab=c(5, 5, 7)
>     plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
>     par(op)

[Argh.  Calling a method directly ... ]

> ... a more long-term solution will require some more thought ...

> [to R-devel:

>     (i) could put the labels argument at the end of the list -- i.e.,
> axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
> using "lab" as an abbreviation for "labels" would then get consumed as a
> par() setting (?)

>     (ii) could put explicit "lab" argument in the list too -- i.e.,
> axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

>     (iii) ... ?]

I think we need general guidance for dealing with the ``graphical
parameter'' args to plotting functions.  This includes issues of where
to evaluate and when to vectorize (or even how, ref my question about
recycling e.g. col by cases or variables when plotting a multivariate
time series).

In the above case, ?axis says that its `...' is

     ...: graphical parameters may also be passed as arguments to this
          function.

so we could take the plot.ts `...' list, pmatch its names against
names(par()), and pass the subscripted `...' on to axis().  [Expecting
loud screams.]

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Tue Jul 17 22:35:36 2001
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Tue, 17 Jul 2001 23:35:36 +0200 (MET DST)
Subject: [Rd] bug in the interface of ESS, R for linux, S+6 for linux (PR#1028)
Message-ID: <200107172135.XAA22403@pubhealth.ku.dk>


Object name completion doesn't work on linux.  On S+6 the problem
seems to be that ESS uses the argument `inherits' and S+6 is expecting
`inherit'

       . ".Last.value <- get(\".ess.lvsave\",inherits=T)\n") ; envir=1
       . "assign(\".ess.lvsave\",.Last.value,inherits=T)\n") ;envir=1
  -rw-r--r--   1 544      everyone     7170 Mar  1 13:55 essd-r.el

and

Version 6.0 Release 1 for Linux 2.2.12 : 2000
args(get) 
function(name, where = NULL, frame, inherit = F, immediate = T, meta = 0,
mode = "any")


R uses `inherits'

args(get)
function (x, pos = -1, envir = pos.to.env(pos), mode = "any", 
    inherits = TRUE) 


Andy Liaw <andy_liaw@merck.com> reports
> Actually, I just tried it in R on our Linux box and also had the similar
> problem, namely the completion wasn't able to complete "plo" or "rnor".  The
> info is:
> 
> 	   _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    3.0              
> year     2001             
> month    06               
> day      22               
> language R                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olefc@math.auc.dk  Wed Jul 18 14:14:23 2001
From: olefc@math.auc.dk (olefc@math.auc.dk)
Date: Wed, 18 Jul 2001 15:14:23 +0200 (MET DST)
Subject: [Rd] Rd2dvi - script (PR#1029)
Message-ID: <200107181314.PAA26681@pubhealth.ku.dk>

Full_Name: Ole Christensen
Version: 1.3.0
OS: Solaris
Submission from: (NULL) (130.225.48.2)


I have discovered a problem with script Rd2dvi for R-1.3.0 on our Solaris
machines.
When writing R CMD Rd2dvi Name_of_Package, then things go wrong with the 
conversion to Latex of the DESCRIPTION file in the package.

Having discussed the problem with our system administrator, he constructed a 
script illustrating the problem (see below: script a, and output b). 
It seems that our Solaris machines makes a further expansion in the shell
scripts 
than intended ( \\b  ->  \b  ->  <Backspace> ). 

We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux 2.0.36 
machine, where everything worked fine.

script a:

#!/user/flemming/aa/sh

Rd_DESCRIPTION_to_LaTeX () {
  echo '\\begin{description}'
  echo "\\begin{description}"
  echo "\\raggedright{}"
  echo "\\end{description}"
}

touch b
Rd_DESCRIPTION_to_LaTeX >> b

------

output b:

\begin{description}
egin{description}

aggedright{}
\end{description}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 18 16:47:25 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 18 Jul 2001 11:47:25 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107180933170.32196-100000@hussle.harvard.edu>

I have assembled the changes I have been working on to make TeX Computer
Modern fonts more fully usable in R. I have made the patches and support
files available at:

http://hussle.harvard.edu/~durso/CM_R.tar.gz

The diffs are against R-1.3.0. Let me know if there is a chance of these
changes being included in R or if you have any comments.

Thank you,
Brian D'Urso


My system:
----------
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jul 18 17:23:53 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 18 Jul 2001 12:23:53 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>


OK, to summarize and clarify a bit

1) I downloaded some code that existed in "pure" FORTRAN, FORTRAN+S-Plus,
and FORTRAN+R versions.  

2) I discovered that the primary difference between R and S-Plus version was
the use of a wrapper to reduce the number of arguments from 87 to 65.   When
I inquired why, the author of the code replied

	"R won't take more than 65 arguments to the FORTRAN code 
	(I have no idea why they would have this restriction, it
	seems ludicrous to me. Anyway, the 65 limit is why I combined 
	all those arguments (they were originally explicitly passed)."

He also noted that the 65 argument restriction is not present in Splus 5.

3) I posted a patch to change the limit on the number of parameters to .C,
.Fortran, and .Call from 65 to 255.  

4) I asked if this patch, or something like it would appear in the next
release of R because I wanted to create a package that used the exact same
(simpler) code for R and S-Plus.

5) There was a debate on the merit of using .Fortran to handle a large
number of arguments.  Most people suggested one of 

	- write a wrapper function Fortran C or that accepts some set of
arguments as a single 	vector and that calls the original Fortran function.

	- write a wrapper function using .Call or .External

Several reasons were put forth for *not* extending the number of permissible
arguments.  The core point seemed to be that there have been few reports of
problems with the restriction, and there is uncertainty about the maximum
number of arguments an operating system will support.

6) I still feel that it is a reasonable change to increase the number of
permitted arguments, at least to the same limits (whatever they are) imposed
by S-Plus.  This seems simpler than telling users that as soon as they hit
65 arguments they have to change their code or learn a new interface
mechanism.


-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jul 18 19:26:28 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jul 2001 20:26:28 +0200
Subject: [Rd] Summary:  too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Wed, 18 Jul 2001 12:23:53 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>
Message-ID: <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> 6) I still feel that it is a reasonable change to increase the number of
> permitted arguments, at least to the same limits (whatever they are) imposed
> by S-Plus.  This seems simpler than telling users that as soon as they hit
> 65 arguments they have to change their code or learn a new interface
> mechanism.

I think you missed one point that John was making: "N++". There has to
be a limit to the number of arguments, C does not allow you to code
anything else portably. Whatever limit we choose, someone is going to
bump into it sooner or later, and we can't just increase the limit
every time.  

Then there's the problem of portability between compilers. A little
Web search reveals that the minimum maximum number (sic) of arguments
that a C compiler may impose according to the C standard is 31. So
there may already be standards-compliant C compilers that cannot
compile R. Obviously none of those have appeared within our user
base...

That being said, I think 65 is a pretty weird limit to have. 2^N-1
would be a more obvious guess at a potential hard limit. So, since
we're already past 63, how about having a quick round of testing among
the R-devel readers to check out whether any of their systems would
break from inserting a limit of 127 or 255?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Jul 18 19:52:54 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Jul 2001 14:52:54 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <58mbltcds2jm49kiv533kpv8iqds8r796o@4ax.com>

>That being said, I think 65 is a pretty weird limit to have. 2^N-1 
>would be a more obvious guess at a potential hard limit. So, since 
>we're already past 63, how about having a quick round of testing among 
>the R-devel readers to check out whether any of their systems would 
>break from inserting a limit of 127 or 255? 

I'd guess there are different ways this could fail.  

1. The compiler might have a hard-coded upper limit on the number of
arguments to a function.
2. It might have an upper limit on the number of bytes of code
generated in a function, or in an object file. 

With 255 as the upper limit, the functions do_dotcall and do_dotCode
in dotcode.c will both be huge, so they might trigger the second kind
of failure. (I'd guess that no 16 bit compiler could handle them, for
instance, but nobody is compiling R on one of those.) It's probably
worth putting together a new dotcode.c version for people to test, not
just ask them to test for the first kind of failure.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Jul 18 20:00:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 18 Jul 2001 15:00:56 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com> <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B55DCE8.5E06BE6F@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > 6) I still feel that it is a reasonable change to increase the number of
> > permitted arguments, at least to the same limits (whatever they are) imposed
> > by S-Plus.  This seems simpler than telling users that as soon as they hit
> > 65 arguments they have to change their code or learn a new interface
> > mechanism.
> 
> I think you missed one point that John was making: "N++". There has to
> be a limit to the number of arguments, C does not allow you to code
> anything else portably. Whatever limit we choose, someone is going to
> bump into it sooner or later, and we can't just increase the limit
> every time.
> 
> Then there's the problem of portability between compilers. A little
> Web search reveals that the minimum maximum number (sic) of arguments
> that a C compiler may impose according to the C standard is 31. So
> there may already be standards-compliant C compilers that cannot
> compile R. Obviously none of those have appeared within our user
> base...
> 
> That being said, I think 65 is a pretty weird limit to have. 2^N-1
> would be a more obvious guess at a potential hard limit. So, since
> we're already past 63, how about having a quick round of testing among
> the R-devel readers to check out whether any of their systems would
> break from inserting a limit of 127 or 255?
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Empirical evidence is that the limit in S-Plus is 128.  (The call
manyArgs(N) constructs a .C with N arguments to a C routine (with 200
arguments)).

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(128)
[1] T

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(129)
Problem in .C("many_args",: Sorry, no more than 128 arguments allowed in
dynamic call, while calling subroutine many_args 

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lenn@bullsandbears.com  Thu Jul 19 15:47:28 2001
From: lenn@bullsandbears.com (lenn@bullsandbears.com)
Date: Thu, 19 Jul 2001 07:47:28 -0700
Subject: [Rd] Knowledge is Power cm
Message-ID: <200107190747406.SM00860@stat.math.ethz.ch>

               DON'T BE LEFT IN THE DARK AGES

Info and Data Center is an information-centric company that 
delivers remarkable information pertaining to specific, essential 
subjects as: marketing, education, philosophy, entertainment,
success, stocks and bonds, finances and psychology, as well as 
other subjects that can support your life and well being. This 
email is merely requesting to make such information available to 
you from time to time.

We know two things are truer NOW  more than ever before....

      Information is leverage and knowledge is Power!

Info and data center is committed to putting you in front of the
information curve and keeping you there!

If you would like to be deleted from this free opportunity simply
hit reply and then send, you will immediately be removed from 
our list.

Thank you in Advance
Lennis Fike,
V.P. Technologies
Info and Data Center, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Thu Jul 19 21:51:28 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Thu, 19 Jul 2001 15:51:28 -0500 (CDT)
Subject: [Rd] bug in eval
Message-ID: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>



Is this a bug ?


> foo <- function(a, ...)
+ {
+     tl <- substitute(list(a=a))
+ 
+     ## the foll two should give the same results
+     ## according to defaults for eval
+     
+     print(eval(tl ))
+     print(eval(tl, parent.frame()))
+ }
> 
> 
> foo1 <- function(...)
+ {
+     foo(...)
+ }
> 
> test <- function(a = 6)
+ {
+     foo1(a = a)
+ }
> 
> test(10)
$a
[1] 10

Error in eval(expr, envir, enclos) : Object "a" not found
> 
> str(eval)
function (expr, envir = parent.frame(), enclos = if (is.list(envir) || 
    is.pairlist(envir)) parent.frame())  
> 



I'm having similar problems with 

eval(expr, data, parent.frame()) # doesn't work

and

eval(expr, data) # works

where data is a data frame.

Deepayan

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 19 23:29:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jul 2001 00:29:00 +0200
Subject: [Rd] bug in eval
In-Reply-To: Deepayan Sarkar's message of "Thu, 19 Jul 2001 15:51:28 -0500 (CDT)"
References: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>
Message-ID: <x2elrcbljn.fsf@blueberry.kubism.ku.dk>

Deepayan Sarkar <deepayan@stat.wisc.edu> writes:

> Is this a bug ?
> 
> 
> > foo <- function(a, ...)
> + {
> +     tl <- substitute(list(a=a))
> + 
> +     ## the foll two should give the same results
> +     ## according to defaults for eval
> +     
> +     print(eval(tl ))
> +     print(eval(tl, parent.frame()))
> + }


Nope. This is not a bug, just confusing. The thing to note is that
default expressions are evaluated in the frame of the called function.
I.e. the parent.frame() referred to as the default for envir in eval()
is the caller of eval, whereas in eval(expr, parent.frame()) the
parent.frame() is evaluated in the callers frame, giving you the
grandparent of the eval call.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cook@biostat.wisc.edu  Fri Jul 20 16:56:37 2001
From: cook@biostat.wisc.edu (Tom Cook)
Date: Fri, 20 Jul 2001 10:56:37 -0500
Subject: [Rd] angle/density in barplots/polygon
Message-ID: <15192.21685.275846.586333@polaris.biostat.wisc.edu>

I'm trying to convert some S-Plus code which generates barplots and
other shaded area plots to R.  If I specify that I want hatching
using the angle and density arguments, the messages

1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 
2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

so apparently these features have yet to be implemented.  Is there a
newer version of R in which hatching has been implemented?  If not, is
there a timetable for implementing them?

Thanks,

Thomas Cook, PhD
Department of Biostatistics and Medical Informatics
University of Wisconsin                  email: cook@biostat.wisc.edu
209 WARF Building                           ph: (608) 263-2906
610 Walnut St.                             FAX: (608) 263-0415
Madison, Wisconsin 53705                
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul 21 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107210515.HAA29569@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1029 *
Subject: Rd2dvi - script
From: olefc@math.auc.dk
Date: Wed, 18 Jul 2001 15:14:21 +0200 (MET DST)
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1018 *
Subject: predict.lm(...., se=T), with 1-column model matrix
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 8 Jul 2001 19:35:26 +1000 (EST)
* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1021 *
Subject: Extra lines when bty="n"
From: ce@biostat.ku.dk
Date: Wed, 11 Jul 2001 23:23:53 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
* PR# 1025 *
Subject: ordered factors in tree package - bug?
From: Kevin Murphy <murphyk@cs.berkeley.edu>
Date: Fri, 13 Jul 2001 14:17:01 -0700
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
* PR# 1028 *
Subject: bug in the interface of ESS, R for linux, S+6 for linux
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 17 Jul 2001 17:38:49 -0400 (EDT)
* PR# 1027 *
Subject: cmdscale in package mva
From: laurent@cbs.dtu.dk
Date: Tue, 17 Jul 2001 13:36:43 +0200 (MET DST)
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 22 16:02:04 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 22 Jul 2001 17:02:04 +0200
Subject: [Rd] Rd2dvi - script (PR#1029)
In-Reply-To: <200107181314.PAA26681@pubhealth.ku.dk>
References: <200107181314.PAA26681@pubhealth.ku.dk>
Message-ID: <15194.60140.920991.208147@mithrandir.hornik.net>

>>>>> olefc  writes:

> Full_Name: Ole Christensen
> Version: 1.3.0
> OS: Solaris
> Submission from: (NULL) (130.225.48.2)


> I have discovered a problem with script Rd2dvi for R-1.3.0 on our
> Solaris machines.  When writing R CMD Rd2dvi Name_of_Package, then
> things go wrong with the conversion to Latex of the DESCRIPTION file
> in the package.

> Having discussed the problem with our system administrator, he
> constructed a script illustrating the problem (see below: script a,
> and output b).  It seems that our Solaris machines makes a further
> expansion in the shell scripts than intended ( \\b -> \b ->
> <Backspace> ).

> We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux
> 2.0.36 machine, where everything worked fine.

> ...

Thanks for pointing this out.

As newer versions of the autoconf manual point out

	The simple @code{echo} is probably the most surprising source of
	portability troubles.  It is not possible to use @samp{echo}
	portably unless both options and escape sequences are omitted.
	New applications which are not aiming at portability should use
	@samp{printf} instead of @samp{echo}.

	...

	Do not use backslashes in the arguments, as there is no
	consensus on their handling.

The problem is that Solaris builtin echo and /usr/bin/echo by default
interpret `\b' et al as special backslash-escaped sequences.

The solution is not to use echo for producing LaTeX text but here
documents instead.  Will fix.

[There is similar code in doc/manual/Makefile.in, but it does not use
any `recognized' escape sequences ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sc@paracelsus.fdm.uni-freiburg.de  Mon Jul 23 11:57:59 2001
From: sc@paracelsus.fdm.uni-freiburg.de (sc@paracelsus.fdm.uni-freiburg.de)
Date: Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
Message-ID: <200107231057.MAA19791@pubhealth.ku.dk>

I experienced the following problem with R 1.3.0 which is probably a
bug. The program hangs-up if 1.) a coordinate of segments is outside the
ploting region and 2.) the option log="x" is used.

##
## works fine
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)

##
## hang-up
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)


platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   

Obviously, a work-around is to ensure that segments falls within the
ploting region. 

Best regards,
-- 
Guido Schwarzer         sc@imbi.uni-freiburg.de | Phone: +49 (0)761 203 7702
German Cochrane Centre   http://www.cochrane.de | Fax:   +49 (0)761 203 7700
Institute of Medical Biometry and Medical Informatics
Stefan-Meier-Str. 26, D-79104 Freiburg       http://www.imbi.uni-freiburg.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 23 12:27:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jul 2001 13:27:23 +0200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
In-Reply-To: sc@paracelsus.fdm.uni-freiburg.de's message of "Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)"
References: <200107231057.MAA19791@pubhealth.ku.dk>
Message-ID: <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>

sc@paracelsus.fdm.uni-freiburg.de writes:

> I experienced the following problem with R 1.3.0 which is probably a
> bug. The program hangs-up if 1.) a coordinate of segments is outside the
> ploting region and 2.) the option log="x" is used.
> 
> ##
> ## works fine
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)
> 
> ##
> ## hang-up
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)

Confirmed on Linux, but seems to have disappeared in the patched
version. Not sure what caused the fix, though... My guess would be
that it is this change in CSclipline:

@@ -2464,6 +2466,7 @@
     yb = cr->yb;
     yt = cr->yt;
     if (dd->gp.xlog || dd->gp.ylog) {
+       double temp;
 
        GConvert(x1, y1, coords, NDC, dd);
        GConvert(x2, y2, coords, NDC, dd);
@@ -2475,6 +2478,17 @@
        cr2.yb = yb;
        cr2.yt = yt;
 
+        if (cr2.xr < cr2.xl) {
+            temp = cr2.xl;
+            cr2.xl = cr2.xr;
+            cr2.xr = temp;
+        }
+        if (cr2.yt < cr2.yb) {
+            temp = cr2.yb;
+            cr2.yb = cr2.yt;
+            cr2.yt = temp;
+        }
+
        x = xl;         /* keep -Wall happy */
        y = yb;         /* keep -Wall happy */
        while( c1 || c2 ) {


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jul 23 14:01:10 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 23 Jul 2001 15:01:10 +0200
Subject: [Rd] angle/density in barplots/polygon
In-Reply-To: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <15196.8214.373819.897167@gargle.gargle.HOWL>

>>>>> "Tom" == Tom Cook <cook@biostat.wisc.edu> writes:

    Tom> I'm trying to convert some S-Plus code which generates barplots and
    Tom> other shaded area plots to R.  If I specify that I want hatching
    Tom> using the angle and density arguments, the messages

    Tom> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 

    Tom> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

    Tom> so apparently these features have yet to be implemented.  Is there a
    Tom> newer version of R in which hatching has been implemented?  If not, is
    Tom> there a timetable for implementing them?

not really.  One of us (R core) has had this on his todo list for a while.
But then several of us don't see a big need, since hatching nowadays is
replaced by colors in many (I'd say most) situations.

If you send us the necessary patches to the R source code,
it will be in one of the development versions "real soon".  Note that R is
a GNU project relying on volunteer work from all over the world...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Jul 23 21:34:35 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Tue, 24 Jul 2001 08:34:35 +1200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
References: <200107231057.MAA19791@pubhealth.ku.dk> <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>
Message-ID: <004601c113b6$e2b3e2e0$175dd882@stat.auckland.ac.nz>

Hi


> > I experienced the following problem with R 1.3.0 which is probably a
> > bug. The program hangs-up if 1.) a coordinate of segments is outside the
> > ploting region and 2.) the option log="x" is used.
> >
> > ##
> > ## works fine
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
> >
> > ##
> > ## hang-up
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
>
> Confirmed on Linux, but seems to have disappeared in the patched
> version. Not sure what caused the fix, though... My guess would be
> that it is this change in CSclipline:


Yep, that went in during the fix-so-far to bug#997.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Mon Jul 23 23:25:57 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Mon, 23 Jul 2001 18:25:57 -0400
Subject: [Rd] Installing RSPython with R 1.3.0
References: <3B5CA086.9423C8C7@warnes.net>
Message-ID: <3B5CA475.BFABD484@warnes.net>


To get RSPython installed on my debian test box, I had to make a couple
of changes not listed in
ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 

1) I had to change $R_HOME/src/modules/X11 :

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) 

to

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

2) I had the same link problem with ctest, so I changed

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

to

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
-L$(R_HOME)/bin -lR


3)  Will all libraries that get loaded into R inside of python require
this?


If I try to load other 'recommended' packages that include C code I get
dyn.load erros, EG:

>>> RS.call("library","splines")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/local/lib/R/library/splines/libs/splines.so":
  /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
R_NaN
Error in function (package, help, lib.loc = .lib.loc, character.only =
FALSE,  :
        .First.lib failed
In the local error handler
In the local error handler
Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
        missing value where logical needed
In the local error handler
In the local error handler
Error in pos.to.env(pos) : invalid argument
In the local error handler
In the local error handler
Error in objects(lib.pos) : invalid envir= argument
In the local error handler
['RSPython', 'ctest', 'base']

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jul 23 23:38:51 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 15:38:51 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <87zo9vmft0.fsf@jeeves.blindglobe.net>



I'm not seeing this:

121$ python
Python 1.5.2 (#0, Apr 10 2001, 10:03:44)  [GCC 2.95.3 20010219
(prerelease)] on linux2
Copyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam
>>> import RS
Initialized R-Python interface package.
>>> RS.call("library","splines")
['splines', 'RSPython', 'ctest', 'base']
>>> 


for example.  

I made a slightly different set of changes (I didn't make the ones you
suggested, Greg).

I'd be happy to email a copy of the new version
(RSPython_0.3-1ajr.tar.gz, use as RSPython_0.3-1.tar.gz) which has
configure patched to find the Debian default locations of things; it
would be interesting to see if it works for you (it did for me on 2
Sid/unstable boxes).

best,
-tony



>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> To get RSPython installed on my debian test box, I had to
    GRW> make a couple of changes not listed in
    GRW> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html

    GRW> 1) I had to change $R_HOME/src/modules/X11 :

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS)

    GRW> to

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

    GRW> 2) I had the same link problem with ctest, so I changed

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

    GRW> to

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
    GRW> -L$(R_HOME)/bin -lR


    GRW> 3) Will all libraries that get loaded into R inside of python
    GRW> require this?


    GRW> If I try to load other 'recommended' packages that include C
    GRW> code I get dyn.load erros, EG:

    >>>> RS.call("library","splines")
    GRW> Error in dyn.load(x, as.logical(local), as.logical(now)) :
    GRW> unable to load shared library
    GRW> "/usr/local/lib/R/library/splines/libs/splines.so":
    GRW> /usr/local/lib/R/library/splines/libs/splines.so: undefined
    GRW> symbol: R_NaN Error in function (package, help, lib.loc =
    GRW> .lib.loc, character.only = FALSE, : .First.lib failed In the
    GRW> local error handler In the local error handler Error in if
    GRW> (!is.numeric(name) || name != (pos <- as.integer(name))) { :
    GRW> missing value where logical needed In the local error handler
    GRW> In the local error handler Error in pos.to.env(pos) : invalid
    GRW> argument In the local error handler In the local error
    GRW> handler Error in objects(lib.pos) : invalid envir= argument
    GRW> In the local error handler ['RSPython', 'ctest', 'base']

    GRW> -Greg _______________________________________________
    GRW> Omega-remote mailing list - Omega-remote@www.omegahat.org
    GRW> http://www.omegahat.org/mailman/listinfo/omega-remote




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 24 00:36:30 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 23 Jul 2001 19:36:30 -0400
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>; from greg@warnes.net on Mon, Jul 23, 2001 at 06:25:57PM -0400
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <20010723193625.C6947@jessie.research.bell-labs.com>



Hi Greg.

  What you are seeing is probably a result of using R embedded within another
application/system (Python in this case) but having R originally compiled
without support for R as a shared library. If you were to build R in the default
manner, i.e.
    configure
    make
and then re-configure to build as a shared library
    configure --enable-R-shlib
    make
the shared objects that make up the modules and package libraries
will not be rebuilt. Perhaps they should, but that is not currently
what happens.

 If you were to start afresh (e.g. make distclean) 
and then configure with shared library support
(
    configure --enable-R-shlib
    make
)
all should be well and all the .so's that R attempts to load will
also be linked against libR.so and so the symbols within R on which
they depend will be located.

  Hope this is the correct diagnosis of the problem.

     D.

Gregory R. Warnes wrote:
> 
> To get RSPython installed on my debian test box, I had to make a couple
> of changes not listed in
> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 
> 
> 1) I had to change $R_HOME/src/modules/X11 :
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) 
> 
> to
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR
> 
> 2) I had the same link problem with ctest, so I changed
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> 
> to
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> -L$(R_HOME)/bin -lR
> 
> 
> 3)  Will all libraries that get loaded into R inside of python require
> this?
> 
> 
> If I try to load other 'recommended' packages that include C code I get
> dyn.load erros, EG:
> 
> >>> RS.call("library","splines")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/local/lib/R/library/splines/libs/splines.so":
>   /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
> R_NaN
> Error in function (package, help, lib.loc = .lib.loc, character.only =
> FALSE,  :
>         .First.lib failed
> In the local error handler
> In the local error handler
> Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
>         missing value where logical needed
> In the local error handler
> In the local error handler
> Error in pos.to.env(pos) : invalid argument
> In the local error handler
> In the local error handler
> Error in objects(lib.pos) : invalid envir= argument
> In the local error handler
> ['RSPython', 'ctest', 'base']
> 
> -Greg
> _______________________________________________
> Omega-remote mailing list  -  Omega-remote@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-remote
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Jul 24 00:40:40 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 16:40:40 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <87y9pf5i4n.fsf@jeeves.blindglobe.net>

>>>>> "DTL" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    DTL>  If you were to start afresh (e.g. make distclean) and then
    DTL> configure with shared library support ( configure
    DTL> --enable-R-shlib make ) all should be well and all the .so's
    DTL> that R attempts to load will also be linked against libR.so
    DTL> and so the symbols within R on which they depend will be
    DTL> located.

And just to comment, with respect to Debian, this appears to have been
done by Doug.


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Jul 25 11:22:14 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 25 Jul 2001 12:22:14 +0200 (MET DST)
Subject: [Rd] glm.control() is not properly documented.. (PR#1031)
Message-ID: <200107251022.MAA03711@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu> writes:

on R-help and the Subject  "Log likelihood from glm"

    TL> On Mon, 9 Jul 2001, Phil wrote:
    >> 
    >> Is there any way of getting log likelihood values for each iteration from
    >> poisson glm model?
    >> 

    TL> Yes, the trace=TRUE option.

    TL> This doesn't seem to be documented properly, though it is in the "Usage"
    TL> section of help(glm)

glm.control should get it's own help page; on the above mentioned
glm.Rd it even says

 >>  control: a list of parameters for controlling the fitting process. 
 >>           See the documentation for `glm.control' for details.

--> I'm about to commit a fix for R 1.3.1

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jul 25 16:08:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 25 Jul 2001 11:08:28 -0400
Subject: [Rd] empty drop=F in [
References: <Pine.OSF.3.96.1010725150958.19828G-100000@ija.csic.es>
Message-ID: <3B5EE0EC.7B45F328@bank-banque-canada.ca>

Making a typo in the last help response I noticed:

a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
   1.4722996, 1.408512, 0.3768964,
   1.2737683, 1.811588, 1.9108336,
   1.8235127, 1.260909, 1.5995097 ), 3,4))

> dim(a[a[,1]<0,, drop=F])
[1] 0 3

Is that right? In Splus 3.3 I get

> dim(a[a[,1]<0,, drop=F])
NULL

Paul Gilbert
using
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status   Patched
major    1
minor    3.0
year     2001
month    07
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 16:41:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 25 Jul 2001 16:41:17 +0100 (GMT Daylight Time)
Subject: [Rd] empty drop=F in [
In-Reply-To: <3B5EE0EC.7B45F328@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0107251637150.1080-100000@tern.stats>

On Wed, 25 Jul 2001, Paul Gilbert wrote:

> Making a typo in the last help response I noticed:
>
> a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
>    1.4722996, 1.408512, 0.3768964,
>    1.2737683, 1.811588, 1.9108336,
>    1.8235127, 1.260909, 1.5995097 ), 3,4))
>
> > dim(a[a[,1]<0,, drop=F])
> [1] 0 3
>
> Is that right? In Splus 3.3 I get
>
> > dim(a[a[,1]<0,, drop=F])
> NULL

Really?  Current versions of S-PLUS behave like R, and I'd be surprised if
a 1994 version was different, but of course do not have it running.
I did check 3.4, though, and that behaves as 2000, 6.0 and R do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Wed Jul 25 18:06:50 2001
From: deepayan@stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Wed, 25 Jul 2001 19:06:50 +0200 (MET DST)
Subject: [Rd] bug in pretty() (PR#1032)
Message-ID: <200107251706.TAA06210@pubhealth.ku.dk>




I have the following output from pretty():


> pretty(c(-.1, 1)) # note 2nd element
[1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
[6]  8.000000e-01  1.000000e+00
> as.character(pretty(c(-.1, 1)))
[1] "-0.2"                  "-2.77555756156289e-17" "0.2"                  
[4] "0.4"                   "0.6"                   "0.8"                  
[7] "1"                    


The root cause seems to be here:


> 1.2/6 - .2
[1] -2.775558e-17


(It seems that this is not a problem in all installations.)


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 20:41:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 25 Jul 2001 20:41:34 +0100 (BST)
Subject: [Rd] bug in pretty() (PR#1032)
In-Reply-To: <200107251706.TAA06210@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0107252038150.2501-100000@gannet.stats>

On Wed, 25 Jul 2001 deepayan@stat.wisc.edu wrote:

>
>
>
> I have the following output from pretty():
>
>
> > pretty(c(-.1, 1)) # note 2nd element
> [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
> [6]  8.000000e-01  1.000000e+00
> > as.character(pretty(c(-.1, 1)))
> [1] "-0.2"                  "-2.77555756156289e-17" "0.2"
> [4] "0.4"                   "0.6"                   "0.8"
> [7] "1"
>
>
> The root cause seems to be here:
>
>
> > 1.2/6 - .2
> [1] -2.775558e-17

You can't expect exact arithmetic.  Using as.character is almost never a
good idea.  I don't think this is a bug, but you should be doing something
more complex if you want to make labels here.

> (It seems that this is not a problem in all installations.)
>
>
> <<insert bug report here>>

!!
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.pesl@arcs.ac.at  Thu Jul 26 07:57:17 2001
From: thomas.pesl@arcs.ac.at (thomas.pesl@arcs.ac.at)
Date: Thu, 26 Jul 2001 08:57:17 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260657.IAA08479@pubhealth.ku.dk>

i don't know, whether this is a bug or it is intended:

when using winedt and R together it works perfectly, as long as R is run in
mdi (multiple window mode). When you switch to sdi (single window mode)
winedt, sends no command at all: no history, paste, source or script.

Thomas Pesl

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jul 26 08:16:59 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 26 Jul 2001 09:16:59 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260716.JAA08671@pubhealth.ku.dk>

On Thu, 26 Jul 2001 thomas.pesl@arcs.ac.at wrote:

> i don't know, whether this is a bug or it is intended:
>
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

rw1030 does work in SDI mode, so this is not an R bug.
Please send it to the R-Winedt mode maintainer (if that is what you are
using).

>
> Thomas Pesl
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jul 26 08:27:07 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 26 Jul 2001 09:27:07 +0200
Subject: [Rd] winedt (PR#1033)
References: <200107260657.IAA08479@pubhealth.ku.dk>
Message-ID: <3B5FC64B.C3B2D751@statistik.uni-dortmund.de>



thomas.pesl@arcs.ac.at wrote:
> 
> i don't know, whether this is a bug or it is intended:
> 
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

That's NOT a bug of R, also NOT a bug of WinEdt and also NOT a bug of
the R-WinEdt interface.
Please report bugs or questions related to R-WinEdt directly to the
author.

In the current version of R-WinEdt, just click on "Set R --sdi mode" at
the bottom of the menu "R".
To switch back, you have to click on "Set R --mdi mode".


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 08:41:31 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 08:41:31 +0100
Subject: [Rd] Why not in Debian distro?
Message-ID: <20010726084131.B3409@caligola.econ.ucl.ac.uk>

Hi,

I am using Debian and get R from CRAN just fine, but could not find it in the
Debian distribution. Did I overlook something? If not, is it hard to put it
there?
I am not concerned with this really, but there are things that are based on
that particular tree, such as the autobuilding process for the Hurd (for which
R was working at least once):
http://people.debian.org/~jbailey/oasis/group/Debian/index.html

?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Thu Jul 26 10:32:13 2001
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Thu, 26 Jul 2001 10:32:13 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <20010726084131.B3409@caligola.econ.ucl.ac.uk>
Message-ID: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>

On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:

> I am using Debian and get R from CRAN just fine, but could not find it in the
> Debian distribution. Did I overlook something? If not, is it hard to put it
> there?

It is in potato (stable)in the math section: r-base 0.90.1-2 . 

Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
r-base 1.3.0-1 .  

People like me who  are still running stable can get up-to-date R
packages by sticking the following line in /etc/apt/sources.list:

deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

HTH

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Department of Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 09:48:51 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 09:48:51 +0100
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <20010726094851.C3409@caligola.econ.ucl.ac.uk>

On Thu, Jul 26, 2001 at 10:32:13AM +0100, H C Pumphrey wrote:
> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> > Debian distribution. Did I overlook something? If not, is it hard to put it

Yes I did, again. The package is r-base and not R. Obviously. Sorry.

> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  

Funny. So r-base was just not taken up by Turtle.

Thanks, anyway,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 26 11:16:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jul 2001 12:16:50 +0200
Subject: [Rd] Why not in Debian distro?
In-Reply-To: H C Pumphrey's message of "Thu, 26 Jul 2001 10:32:13 +0100 (BST)"
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>

H C Pumphrey <hcp@met.ed.ac.uk> writes:

> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> 
> > I am using Debian and get R from CRAN just fine, but could not find it in the
> > Debian distribution. Did I overlook something? If not, is it hard to put it
> > there?
> 
> It is in potato (stable)in the math section: r-base 0.90.1-2 . 
> 
> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  
> 
> People like me who  are still running stable can get up-to-date R
> packages by sticking the following line in /etc/apt/sources.list:
> 
> deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

The version skew between "stable" debian releases and current status
is becoming grotesque! 0.90.1 is from December 1999. It is quite
worrying because people are still receiving this ageing version on
CDs and our memories re. problems with that version are rapidly
fading 10 (yes, ten) releases later. Whatever happened to the
internal Debian discussions on creating a faster upgrade path for
applications?  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 15:04:42 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 07:04:42 -0700
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0bjdbwl.fsf@jeeves.blindglobe.net>

>>>>> "PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
    PD> later. Whatever happened to the internal Debian discussions on
    PD> creating a faster upgrade path for applications?

They created Woody/testing, which is a broken nightmare.

Sid/unstable isn't bad -- in fact, it's about as high-quality a
release as an average RedHat one, for the most part.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Thu Jul 26 15:59:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Thu, 26 Jul 2001 10:59:46 -0400
Subject: [Rd] Why not in Debian distro?
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>	<x2wv4wf10t.fsf@blueberry.kubism.ku.dk> <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <3B603062.4010709@keittlab.bio.sunysb.edu>

A.J. Rossini wrote:

>>>>>>"PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>>>>>>
>    PD> later. Whatever happened to the internal Debian discussions on
>    PD> creating a faster upgrade path for applications?
>
>They created Woody/testing, which is a broken nightmare.
>
>Sid/unstable isn't bad -- in fact, it's about as high-quality a
>release as an average RedHat one, for the most part.
>
That hasn't been my experience (although I haven't used RH for awhile). 
 Sid is high-quality until it randomly blows up in your face after an 
apt-get.  Debian has a bad case of SADD (stable attention deficit 
disorder).  None of the developers care much about updating stable.  Its 
too much fun crashing unstable.  I switched to Progeny and never looked 
back.  (I can still 'apt-get -b source <pkg>' from Sid for 
non-system-critical packages.)

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 23:22:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 15:22:14 -0700
Subject: [Rd] marshalling/serializing of R objects for later execution?
Message-ID: <87k80vpbzd.fsf@jeeves.blindglobe.net>


I know that this was a topic in March at DSC, but I was suffering from
a nasty migraine that prevented me from paying as much attention as I
ought to.  What's the current state-of-the-art regarding
packaging/serialization of R objects?  Or is it still vaporish
(i.e. nothing built)? 

I'm a bit more interested in functions/closures than "ordinary data".

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jul 27 22:38:29 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 28 Jul 2001 09:38:29 +1200
Subject: [Rd] angle/density in barplots/polygon
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <3B61DF55.403D99E0@stat.auckland.ac.nz>

Tom Cook wrote:
> 
> I'm trying to convert some S-Plus code which generates barplots and
> other shaded area plots to R.  If I specify that I want hatching
> using the angle and density arguments, the messages
> 
> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE)
> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE)
> 
> so apparently these features have yet to be implemented.  Is there a
> newer version of R in which hatching has been implemented?  If not, is
> there a timetable for implementing them?
> 
> Thanks,


I have just found a student vict^H^H^H^H volunteer to do this.  I will
know more about how long this will take in about a week.  (Its not a
huge task, but the student make take while to up to speed on graphics.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Sun Jul 29 17:28:27 2001
From: vogels@cmu.edu (vogels@cmu.edu)
Date: Sun, 29 Jul 2001 18:28:27 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291628.SAA24371@pubhealth.ku.dk>

Hi,

This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
(R 1.3.0) and comes from trying to compile R on AIX 4.3.

1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
is terminated with a double quote: ".  (This leads to the weird error
message that configure can't execute 'shared' on line 4060.)
     The fix is simply to use single quotes both times:
allow_undefined_flag='${wl}-berok'

2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
are passed on to ld correctly.  Which I know that you know...)
  The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
patching configure yet...

3) Rd2contents.pl:  this perl script fails in the base library!  There are
too many files in the man directory and perl reports 'glob failed'.  When I
try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
don't know whether this limitation comes from AIX, bash or perl and why it
doesn't happen with, say, Linux.
The fix is to replace the simple while loop (line 6):
  while(<$ARGV[0]/man/*.Rd>){ &do_one; }

with a loop over the contents of the directory using readdir:

if (opendir RD, "$ARGV[0]/man") {
    my $f;
    while (defined ($f = readdir RD)) {
     $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
    }
    closedir RD;
}

A) tkConfig.sh contains a line like this:
   TK_XINCLUDES='# no special path needed'
This has nothing to do with R proper but this bug which is either in AIX or
the local installation of X shows up during the compilation of R.  Anyhow,
this line is plain stupid since when passed on to the compiler _comments
out_ the rest of the line!  (Think about:
  gcc fine_program.c #no special path needed -lX11 -Xm
)  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
Again, I know this is not a problem with R but I'm adding it here for people
to find if they use the mailing list archive.

After these changes R compiles (producing warnings about duplicate
symbols...) and installs.  'make check' fails in mva--report to follow.

Regards,
  -tom

--
Email: vogels@cmu.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul 29 20:17:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291917.VAA24794@pubhealth.ku.dk>

On Sun, 29 Jul 2001 vogels@cmu.edu wrote:

> Hi,
>
> This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> (R 1.3.0) and comes from trying to compile R on AIX 4.3.

Would that be 2001-07-27?  Not all of us live in countries that flout ISO
standards!

> 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> is terminated with a double quote: ".  (This leads to the weird error
> message that configure can't execute 'shared' on line 4060.)
>      The fix is simply to use single quotes both times:
> allow_undefined_flag='${wl}-berok'

That is a generated file.  It coems from m4/libtool.m4.

> 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> are passed on to ld correctly.  Which I know that you know...)
>   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> patching configure yet...
>
> 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> too many files in the man directory and perl reports 'glob failed'.  When I
> try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I

(! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
have no line length limits.)

> don't know whether this limitation comes from AIX, bash or perl and why it
> doesn't happen with, say, Linux.

Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
already using it.

> The fix is to replace the simple while loop (line 6):
>   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
>
> with a loop over the contents of the directory using readdir:
>
> if (opendir RD, "$ARGV[0]/man") {
>     my $f;
>     while (defined ($f = readdir RD)) {
>      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
>     }
>     closedir RD;
> }

(slower and less portable if it is not needed.)

Your perl version is ?


> A) tkConfig.sh contains a line like this:
>    TK_XINCLUDES='# no special path needed'
> This has nothing to do with R proper but this bug which is either in AIX or
> the local installation of X shows up during the compilation of R.  Anyhow,
> this line is plain stupid since when passed on to the compiler _comments
> out_ the rest of the line!  (Think about:
>   gcc fine_program.c #no special path needed -lX11 -Xm
> )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> Again, I know this is not a problem with R but I'm adding it here for people
> to find if they use the mailing list archive.
>
> After these changes R compiles (producing warnings about duplicate
> symbols...) and installs.  'make check' fails in mva--report to follow.
>
> Regards,
>   -tom
>
> --
> Email: vogels@cmu.edu
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Jul 29 21:10:47 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 29 Jul 2001 16:10:47 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)"
References: <200107291917.VAA24794@pubhealth.ku.dk>
Message-ID: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
> 
> > Hi,
> >
> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
> 
> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
> standards!

Oops.  Should have used the contents of the date stamp file...

> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> > is terminated with a double quote: ".  (This leads to the weird error
> > message that configure can't execute 'shared' on line 4060.)
> >      The fix is simply to use single quotes both times:
> > allow_undefined_flag='${wl}-berok'
> 
> That is a generated file.  It coems from m4/libtool.m4.

...which means I should have said...
 Line 1473 in m4/libtool.m4 contains the unterminated string.

Hmm, should the name of the file suggest to me that it's part of some
other package, like 'libtool', and I should file a bug report with
it's maintainer?

> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> > are passed on to ld correctly.  Which I know that you know...)
> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> > patching configure yet...
> >
> > 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> > too many files in the man directory and perl reports 'glob failed'.  When I
> > try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
> 
> (! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
> have no line length limits.)

Guilty as suspected.  My bash and perl is rather old...  

> > don't know whether this limitation comes from AIX, bash or perl and why it
> > doesn't happen with, say, Linux.
> 
> Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
> in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
> and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
> already using it.

I'm not and I won't.  I'll live with my old perl since I don't want to
download and compile perl and bash...  I have a work around and if the
installation fails for somebody else they might have a hack available
when they search the r-bugs/r-devel archive.  Should I encounter the
problem again with a current installation (on a different system),
I'll let you know, otherwise I'll shut up.


> > The fix is to replace the simple while loop (line 6):
> >   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
> >
> > with a loop over the contents of the directory using readdir:
> >
> > if (opendir RD, "$ARGV[0]/man") {
> >     my $f;
> >     while (defined ($f = readdir RD)) {
> >      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
> >     }
> >     closedir RD;
> > }
> 
> (slower and less portable if it is not needed.)

True (especially the portability argument) if globbing is handled in
C in Perl nowadays.  I'd challenge the "slower" if Perl had to use the
shell since the shell would sort the file list which readdir won't.
 
> Your perl version is ?

Too embarassed to tell ;-)  Mea culpa, I'll bring up Perl issues in
the future only when I know I have a recent version...


> > A) tkConfig.sh contains a line like this:
> >    TK_XINCLUDES='# no special path needed'
> > This has nothing to do with R proper but this bug which is either in AIX or
> > the local installation of X shows up during the compilation of R.  Anyhow,
> > this line is plain stupid since when passed on to the compiler _comments
> > out_ the rest of the line!  (Think about:
> >   gcc fine_program.c #no special path needed -lX11 -Xm
> > )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> > Again, I know this is not a problem with R but I'm adding it here for people
> > to find if they use the mailing list archive.
> >
> > After these changes R compiles (producing warnings about duplicate
> > symbols...) and installs.  'make check' fails in mva--report to follow.
> >
> > Regards,
> >   -tom
> >
> > --
> > Email: vogels@cmu.edu
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 29 21:42:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 29 Jul 2001 22:42:41 +0200
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net>
 <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <15204.30017.481370.721345@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> Hi Greg.

>   What you are seeing is probably a result of using R embedded within another
> application/system (Python in this case) but having R originally compiled
> without support for R as a shared library. If you were to build R in the default
> manner, i.e.
>     configure
>     make
> and then re-configure to build as a shared library
>     configure --enable-R-shlib
>     make
> the shared objects that make up the modules and package libraries
> will not be rebuilt. Perhaps they should, but that is not currently
> what happens.

>  If you were to start afresh (e.g. make distclean) 
> and then configure with shared library support
> (
>     configure --enable-R-shlib
>     make
> )
> all should be well and all the .so's that R attempts to load will
> also be linked against libR.so and so the symbols within R on which
> they depend will be located.

>   Hope this is the correct diagnosis of the problem.

Corrent.  However, according to my understanding, re-configuring with a
different set of arguments is not guaranteed to work unless preceded by
make distclean ...

[Argh.  In any case, this means that when checking for the existence of
-lR at package configure time we cannot safely assume that the standard
modules were linked against -lR ... terrible.]

Btw, looking at RSPython's configure.in,

	if test -f "${R_HOME}/bin/libR.so" ; then
	  R_SHARED_LIBRARY="-lR"
	fi

has the `.so' hard-wired which it should not.  The quick solution would
be something like getting the value of LIBR from R_HOME/etc/Makeconf.
Longer term, ideally we should get this info via something like R CMD
config --libs ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Mon Jul 30 03:48:41 2001
From: buhr@stat.wisc.edu (Kevin Buhr)
Date: 29 Jul 2001 21:48:41 -0500
Subject: [Rd] Re: forwarded message from Ross Ihaka
In-Reply-To: Tom Cook's message of "Sun, 29 Jul 2001 20:48:29 -0500"
References: <15204.48365.943424.701549@polaris.biostat.wisc.edu>
Message-ID: <vbay9p7f7xy.fsf@mozart.stat.wisc.edu>

Ross Ihaka wrote to Tom Cook (who CCed it to me):
> 
[ regarding "density" and "angle" for polygon hatching ]
> 
> I have just found a student volunteer to do this.  I will
> know more about how long this will take in about a week.  (Its not a
> huge task, but the student make take while to up to speed on graphics.)

Ross:

You move fast!  However, I'm in Tom's group and have already done some
work on this.

I have what I believe is a pretty good polygon hatching algorithm
written and running in R.  It's robust when implemented in floating
point arithmetic, runs in time at worst linear in the diameter of the
area and O(n log n) in the number of sides of the polygon, and works
well on my ugly testcases (like 500-point random starbursts,
self-intersecting polygons, and so on).  I don't expect any difficulty
in implementing it as a part of R's "graphics.c".

Unless your student is really, really excited about polygon hatching
(and who wouldn't be!), maybe there's something else you want to force
him or her to volunteer to do.  ;)

With a couple days to clean up the code and write some interface glue,
I should be able to send a pure R implementation to the list for
people to play with and critique, if that sounds okay.

Thanks.

Kevin <buhr@stat.wisc.edu>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 08:35:17 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 09:35:17 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.3637.903902.962867@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> ripley@stats.ox.ac.uk writes:

>> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
>> 
>> > Hi,
>> >
>> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
>> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
>> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
>> 
>> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
>> standards!

> Oops.  Should have used the contents of the date stamp file...

>> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
>> > is terminated with a double quote: ".  (This leads to the weird error
>> > message that configure can't execute 'shared' on line 4060.)
>> >      The fix is simply to use single quotes both times:
>> > allow_undefined_flag='${wl}-berok'
>> 
>> That is a generated file.  It coems from m4/libtool.m4.

> ...which means I should have said...
>  Line 1473 in m4/libtool.m4 contains the unterminated string.

> Hmm, should the name of the file suggest to me that it's part of some
> other package, like 'libtool', and I should file a bug report with
> it's maintainer?

Fixed now.  The file comes from libtool 1.4.  Unfortunately, we have to
patch it ourselves, as the libtool 1.4 `patch release' suddenly requires
autoconf 2.50 ...

>> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
>> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
>> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
>> > are passed on to ld correctly.  Which I know that you know...)
>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
>> > patching configure yet...

Very strange.  Configure has

  *aix4.[2-9]*)
    EXPORTFILE="\$(top_builddir)/etc/R.exp"
    cpicflags=
    cxxpicflags=
    fpicflags=
    wl="-Wl,"
    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
    SHLIB_LIBADD="\$(LIBM)"
    ;;

so unless I am missing something obvious all linker flages are protected
via `-Wl,' (which should also work if the C compiler is not gcc).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jul 30 15:18:35 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jul 2001 10:18:35 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Thomas Vogels's message of "29 Jul 2001 16:10:47 -0400"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>


Excerpt from Kurt's email this morning:

>>> > 2) after configure (with CC=gcc but using AIX's linker
>/usr/bin/ld), the
>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>flags
>-bI
>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>linker flags
>>> > are passed on to ld correctly.  Which I know that you know...)
>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>looked into
>>> > patching configure yet...
>
>Very strange.  Configure has
>
>  *aix4.[2-9]*)
>    EXPORTFILE="\$(top_builddir)/etc/R.exp"
>    cpicflags=
>    cxxpicflags=
>    fpicflags=
>    wl="-Wl,"
>    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>    SHLIB_LIBADD="\$(LIBM)"
>    ;;
>
>so unless I am missing something obvious all linker flages are
>protected
>via `-Wl,' (which should also work if the C compiler is not gcc).
>

Sorry, should have been more explicit, I guess: the problem is with
PKG_LIBS (which is the only variable in that Makefile using linker
flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
used AIX's 'cc' compiler, you get in trouble with later using gcc
(e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

There is the question, why configure didn't "see" this coming.  What
would be nice is a warning to the effect that tkConfig.sh is broken
when R can't compile tcltk.c.  (Currently I get messages about libc.a
not found...)

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 18:19:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 19:19:43 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.38703.553276.335905@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Excerpt from Kurt's email this morning:

>>>> > 2) after configure (with CC=gcc but using AIX's linker
>> /usr/bin/ld), the
>>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> flags
>> -bI
>>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> linker flags
>>>> > are passed on to ld correctly.  Which I know that you know...)
>>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> looked into
>>>> > patching configure yet...
>> 
>> Very strange.  Configure has
>> 
>> *aix4.[2-9]*)
>> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> cpicflags=
>> cxxpicflags=
>> fpicflags=
>> wl="-Wl,"
>> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> SHLIB_LIBADD="\$(LIBM)"
>> ;;
>> 
>> so unless I am missing something obvious all linker flages are
>> protected
>> via `-Wl,' (which should also work if the C compiler is not gcc).
>> 

> Sorry, should have been more explicit, I guess: the problem is with
> PKG_LIBS (which is the only variable in that Makefile using linker
> flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> used AIX's 'cc' compiler, you get in trouble with later using gcc
> (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

> There is the question, why configure didn't "see" this coming.  What
> would be nice is a warning to the effect that tkConfig.sh is broken
> when R can't compile tcltk.c.  (Currently I get messages about libc.a
> not found...)

This is asking for a bit much, I think.  How would configure know for
sure that tkConfig.sh is broken?

On second thought: the comment in tkConfig.sh says

	# String to pass to linker to pick up the Tk library from its
	# installed directory.
	TK_LIB_SPEC='@TK_LIB_SPEC@'

so maybe this assumes to be called by ld directly ...

What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Jul 31 16:00:36 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 31 Jul 2001 11:00:36 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Kurt Hornik's message of "Mon, 30 Jul 2001 19:19:43 +0200"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
Message-ID: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Thomas Vogels writes:
> 
> > Excerpt from Kurt's email this morning:
> 
> >>>> > 2) after configure (with CC=gcc but using AIX's linker
> >> /usr/bin/ld), the
> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
> >> flags
> >> -bI
> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
> >> linker flags
> >>>> > are passed on to ld correctly.  Which I know that you know...)
> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
> >> looked into
> >>>> > patching configure yet...
> >> 
> >> Very strange.  Configure has
> >> 
> >> *aix4.[2-9]*)
> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
> >> cpicflags=
> >> cxxpicflags=
> >> fpicflags=
> >> wl="-Wl,"
> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
> >> SHLIB_LIBADD="\$(LIBM)"
> >> ;;
> >> 
> >> so unless I am missing something obvious all linker flages are
> >> protected
> >> via `-Wl,' (which should also work if the C compiler is not gcc).
> >> 
> 
> > Sorry, should have been more explicit, I guess: the problem is with
> > PKG_LIBS (which is the only variable in that Makefile using linker
> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> > used AIX's 'cc' compiler, you get in trouble with later using gcc
> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
> 
> > There is the question, why configure didn't "see" this coming.  What
> > would be nice is a warning to the effect that tkConfig.sh is broken
> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
> > not found...)
> 
> This is asking for a bit much, I think.  How would configure know for
> sure that tkConfig.sh is broken?

I promise to get more sleep soon... 'What would be nice is a warning
to the effect that the Tcl/Tk configuration failed, like:
checking how to compile and link tcl/tk.... failed
'  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
threre are other factors that can cause the fail (config.site...).

What this would boil down to is trying to compile e.g. tkAppInit.c and
see whether compilation and linking works.  But even this may
be asking  fortoo much, this is just one architecture.  Things like these
will continue to happen with AIX as long as there are those '.exp'
files around...


> On second thought: the comment in tkConfig.sh says
> 
> 	# String to pass to linker to pick up the Tk library from its
> 	# installed directory.
> 	TK_LIB_SPEC='@TK_LIB_SPEC@'
> 
> so maybe this assumes to be called by ld directly ...
> 
> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
which is needed badly when linking on AIX.

Thanks!
  -tom

> 
> -k
> 
> 

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 16:47:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107311547.RAA10368@pubhealth.ku.dk>

I found that predict.gnls failed with a wierd error message about a
non-numeric argument to a binary vector in one of three nearly identical
uses.

Error in Inh/Ki : non-numeric argument to binary operator

(Inh and Ki are arguments to the function used in the formula for the
object whose predictions were requested).

It turns out that the problem is in getCovariateFormula().

The final line in getCovariateFormula() in the nlme package (version
3.1-16) is:
    eval(parse(text = paste("~", deparse(form))))

however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
this results in inappropriately placed "~" signs:
For example, in my application with the error, form is

UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)

the result of the paste() operation in the last line of getCovariateFormula
is:

> paste("~",deparse(form))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
[2] "~     Ki)"

extending width.cutoff gives the intended value:

> paste("~",deparse(form,width.cutoff=500))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"

Seems a bit risky for an enforced cutoff in deparse, though.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 31 16:55:48 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 31 Jul 2001 11:55:48 -0400
Subject: [Rd] Problems with RPython when stdin is not a terminal
Message-ID: <5429125E11E4D411AF7300805FE603A8014CECE2@groexmbcr02.pfizer.com>

 
Hi, I've been trying to work with the RPython interface and noticed a
strange problem.  When
stdin is not a terminal the R part of the RPython interface complains.

EG,

	$ python RPython.py
	Initialized R-Python interface package.

works fine, but

	$ python < RPython.py
	


This particular strangeness isn't a problem in this context, but it does
become a problem when I try to use the python-mode of xemacs.  If I do
<Control-c><Control-c> to submit my python code I get the same error:

	Fatal error: you must specify `--save', `--no-save' or
`--vanilla'

Is there a way to fix this?

-Greg

(BTW: I've crossposted this to omega-remote and R-devel.  What list
_should_ I be sending this type of message to?  I also considered R-help
and omega-bugs...)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 17:21:46 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 18:21:46 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)"
References: <200107311547.RAA10368@pubhealth.ku.dk>
Message-ID: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> The final line in getCovariateFormula() in the nlme package (version
> 3.1-16) is:
>     eval(parse(text = paste("~", deparse(form))))
> 
> however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> this results in inappropriately placed "~" signs:
> For example, in my application with the error, form is
> 
> UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> 
> the result of the paste() operation in the last line of getCovariateFormula
> is:
> 
> > paste("~",deparse(form))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> [2] "~     Ki)"
> 
> extending width.cutoff gives the intended value:
> 
> > paste("~",deparse(form,width.cutoff=500))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> 
> Seems a bit risky for an enforced cutoff in deparse, though.

parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
use something like

f <- ~1
f[[2]] <- form
eval(f)

or 

eval(as.call(list(as.name("~"),form)))

or

eval(substitute(~form)) # that's not going to work in S, though...

??

(What is the eval for? Doesn't usually do anything to a
formula argument.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Jul 31 18:46:46 2001
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: Tue, 31 Jul 2001 13:46:46 -0400
Subject: [Rd] "internal" keyword
Message-ID: <3B66EF06.10109@StonyBrook.Edu>

I seem to remember something about an "internal" keyword for R doc 
files.  How do we use it?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 31 19:08:19 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Jul 2001 19:08:19 +0100 (GMT Daylight Time)
Subject: [Rd] "internal" keyword
In-Reply-To: <3B66EF06.10109@StonyBrook.Edu>
Message-ID: <Pine.WNT.4.31.0107311906430.608-100000@tern.stats>

On Tue, 31 Jul 2001, Timothy H. Keitt wrote:

> I seem to remember something about an "internal" keyword for R doc
> files.  How do we use it?

as in src/library/ts/man/ts-internal.Rd

It's documented in `Writing R Extensions': search for `internal' there.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jul 31 19:55:47 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 31 Jul 2001 13:55:47 -0500
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
References: <200107311547.RAA10368@pubhealth.ku.dk>
 <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
Message-ID: <6relqxorm4.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> > 
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> > 
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> > 
> > the result of the paste() operation in the last line of getCovariateFormula
> > is:
> > 
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> > 
> > extending width.cutoff gives the intended value:
> > 
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> > 
> > Seems a bit risky for an enforced cutoff in deparse, though.
> 
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
> 
> f <- ~1
> f[[2]] <- form
> eval(f)
> 
> or 
> 
> eval(as.call(list(as.name("~"),form)))

> or
> 
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
> 
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:10:54 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 16:10:54 -0400
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <OF7528A682.B9E78D2C-ON85256A9A.006E9C38@rtp.epa.gov>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:19:26 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 22:19:26 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312019.WAA11406@pubhealth.ku.dk>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:16:41 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Jul 2001 23:16:41 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312116.XAA11594@pubhealth.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:26:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 23:26:04 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Douglas Bates's message of "31 Jul 2001 13:55:47 -0500"
References: <200107311547.RAA10368@pubhealth.ku.dk> <x2d76h6pd1.fsf@blueberry.kubism.ku.dk> <6relqxorm4.fsf@franz.stat.wisc.edu>
Message-ID: <x2ae1k23kj.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcdowella@mcdowella.demon.co.uk  Sun Jul  1 06:53:54 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Sun, 1 Jul 2001 07:53:54 +0200 (MET DST)
Subject: [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data (PR#1007)
Message-ID: <200107010553.HAA05244@pubhealth.ku.dk>

Full_Name: Andrew Grant McDowell
Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
OS: Windows 2K Professional (Consumer)
Submission from: (NULL) (194.222.243.209)


In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
johnt@tman.dnsalias.com writes
>Can someone help?  In R, I am generating a vector of 1000 samples from 
>Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the 
>vector has been drawn from a population of Bin (1000, 0.25).  I would
>expect a reasonably high p-value.....
>
>Either I am doing something wrong in R, or I am misunderstanding how this
>test should work (both quite possible)...
>
>
>Thanks,
>JT..
>
>
>
>> #### 1000 random samples from binomial dist with mean =.25, n=100...
>> o<-rbinom (1000, 100, .25)
>> mean (o);
>[1] 25.178
>> var (o);
>[1] 19.61193
>> ks.test (o, "pbinom", 100, .25);
>
>        One-sample Kolmogorov-Smirnov test 
>
>data:  o 
>D = 0.0967, p-value = 1.487e-08 
>alternative hypothesis: two.sided
>
>
>
>p-value is mighty small, leading me to reject the null hypothesis that
>the sample has been drawn from the Bin(100, 0.25) distribution!!!
>
>
>

Some more oddities:

> o<-rbinom(10000, 1, 0.25)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 7491
> length(o[o==1])
[1] 2509
> o<-rep(0,10000)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 10000
> length(o[o==1])
[1] 0

Here zeroing out the data does not change the reported D value

After playing about with
ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
for a bit I conjecture that ks.test() takes no account
whatsoever of ties, but merely sorts the input values
and looks for max (position/N - pbinom(value, 1, p)).
Anybody got the source handy?
-- 
A. G. McDowell

After 30 minutes of download, the relevant part of ks.test.R would appear to be

        METHOD <- "One-sample Kolmogorov-Smirnov test"
        n <- length(x)
        x <- y(sort(x), ...) - (0 : (n-1)) / n
        STATISTIC <- switch(alternative,
                            "two.sided" = max(c(x, 1/n - x)),
                            "greater" = max(1/n - x),
                            "less" = max(x))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul  1 07:50:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 1 Jul 2001 08:50:39 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107010650.IAA05352@pubhealth.ku.dk>

On Sun, 1 Jul 2001 mcdowella@mcdowella.demon.co.uk wrote:

> Full_Name: Andrew Grant McDowell
> Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
> OS: Windows 2K Professional (Consumer)
> Submission from: (NULL) (194.222.243.209)

Please upgrade: we've found a number of Win2k bugs and worked around them
since then, let alone teh bug fixes and improvements in R ....


> In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
> johnt@tman.dnsalias.com writes
> >Can someone help?  In R, I am generating a vector of 1000 samples from
> >Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the
> >vector has been drawn from a population of Bin (1000, 0.25).  I would
> >expect a reasonably high p-value.....

You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
extension) assume continuous distributions, so the distribution theory
is not valid in this case?

S-PLUS does stop you doing this:

> ks.gof(o, dist="binomial", size=100, prob=0.25)
Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
discrete distributions when sample size > 50, use the
       Chi-square test


> >Either I am doing something wrong in R, or I am misunderstanding how this
> >test should work (both quite possible)...
> >
> >
> >Thanks,
> >JT..
> >
> >
> >
> >> #### 1000 random samples from binomial dist with mean =.25, n=100...
> >> o<-rbinom (1000, 100, .25)
> >> mean (o);
> >[1] 25.178
> >> var (o);
> >[1] 19.61193
> >> ks.test (o, "pbinom", 100, .25);
> >
> >        One-sample Kolmogorov-Smirnov test
> >
> >data:  o
> >D = 0.0967, p-value = 1.487e-08
> >alternative hypothesis: two.sided
> >
> >
> >
> >p-value is mighty small, leading me to reject the null hypothesis that
> >the sample has been drawn from the Bin(100, 0.25) distribution!!!

That's OK.  That's not what you tested (see above).

An S language point: the `;' are unnecessary.


> Some more oddities:
>
> > o<-rbinom(10000, 1, 0.25)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 7491
> > length(o[o==1])
> [1] 2509
> > o<-rep(0,10000)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 10000
> > length(o[o==1])
> [1] 0
>
> Here zeroing out the data does not change the reported D value

Nor does it change the maximum discrepancy.

> ks.test(rep(1,10000), "pbinom", 1, 0.25)

        One-sample Kolmogorov-Smirnov test

data:  rep(1, 10000)
D = 1, p-value = < 2.2e-16
alternative hypothesis: two.sided

shows 0 is special here.

>
> After playing about with
> ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
> for a bit I conjecture that ks.test() takes no account
> whatsoever of ties, but merely sorts the input values
> and looks for max (position/N - pbinom(value, 1, p)).
> Anybody got the source handy?
>
> After 30 minutes of download, the relevant part of ks.test.R would appear to be

Eh? Just type ks.test in your R session for the source ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jul  1 16:00:01 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 1 Jul 2001 11:00:01 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107011056260.19217-100000@eno.Princeton.EDU>


  Don't know if this is useful to anyone, but here's a "poor man's"
solution I came up with to the CRAN indexing problem ... not as good as
having a full-text web link, but it does have some advantages. (1) it's
already done.  (2) it's relatively easy to download and store this
information off-line, and to update it periodically.  (3) it doesn't (now)
require any extra software.
  I'm sure it could be improved in many ways.
  Sorry if it duplicates existing or developing functionality.
  I haven't actually tested "create.index" below, but I've done all the
component pieces.

  Ben Bolker

get.ind <- function(pkg,CRAN=getOption("CRAN"),
                    descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                    local.ext=".INDEX.tmp") {
  download.file(paste(descrip,"/",pkg,".INDEX",sep=""),
                paste(pkg,local.ext,sep=""))
}

## strsplit produces zero-length chars if there are leading spaces
dropz <- function(x) {
  x[nchar(x)>0]
}

nwords <- function(x) {
  sapply(strsplit.words(x),function(z)length(dropz(z)))
}

strsplit.words <- function(x) {
  strsplit(gsub("[ \t]*"," ",x)," ")
}

tr.index <- function(fn) {
  ##  cat(fn,"\n")
  lines <- scan(fn,what=character(),sep="\n",quiet=TRUE)
  ret <- NULL
  if (length(lines)>0) {
    ## paste continuation lines together
    ## look for initial whitespace; might miss funny formats
    tablines <- grep("^[ \t]",lines)
    lines <- sub("^[\t ]*","",lines) ## now delete initial whitespace
    ## join "continuation sets" (sets of consecutive lines with leading whitespace)
    if (length(tablines)>0) {
      v <- 1:length(lines)
      csets <- v-cumsum(v %in% tablines)
      lines <- sapply(split(lines,csets),paste,collapse=" ")
    }
    pkgname <- gsub("/INDEX","",gsub("[\* ]*","",lines[1]))
    lines <- lines[-1]
    pkg <- rep(pkgname,length(lines))
    fun <- sapply(strsplit.words(lines),"[",1)
    descr <- sapply(strsplit.words(lines),function(z)paste(z[-1],collapse=" "))
    ret <- cbind(pkg,fun,descr)
    dimnames(ret) <- list(NULL,c("Package","Function","Description"))
  }
  ret
}

create.index <- function(CRAN=getOptions("CRAN"),
                         contrib.url=contriburl(CRAN),
                         descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index") {
  pkglist <- CRAN.packages(contrib.url=contrib.url)
  sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
                    local.ext=local.ext)
  indfiles <- list.files(pattern=paste("*",local.ext))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
  noquote(all.ind[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
                     grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()
search.ind("integrat?")
search.ind("adapt")
search.ind("permute")
search.ind("Durbin")

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon Jul  2 14:27:56 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 2 Jul 2001 15:27:56 +0200 (MET DST)
Subject: [Rd] ReleaseLargeFreeVectors SIGSEGV (?) (PR#1008)
Message-ID: <200107021327.PAA13094@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.3.0
OS: GNU/Linux RH6.2, 7.0, Debian 2.2
Submission from: (NULL) (158.37.100.64)


I'm working on interfacing ANN: A Library for Approximate Nearest Neighbor
Searching (http://www.cs.umd.edu/~mount/ANN/) to R, following up a prototype
package I tried in May 2000. ANN is written in C++; my C++ is very weak. Last
year
I didn't experience any problems with memory management, C++ did
its thing, and R did its. I have today recompiled R 1.1.1, and the original
trial
package installs OK, and all the examples can be run repeatedly with no crash.

Could I please ask for confirmation that this problem is on my package's
side and is not a result of the 1.2.0 and later memory handling changes?

I'm now getting replicable segmentation faults in the following context:

(ftp://reclus.nhh.no/pub/R) ann_0.2-2.tar.gz is the old trial package,
ann_0.2-2.pre3.tar.gz is the same with a single change to the shared libs flag
in
the Makefile, and ann_0.2-3.tar.gz is a revision dropping the makefile, since
R now includes C++ in Makeconf.

ann_0.2-3.tar.gz ran through (1.3.0) R CMD check & R CMD build cleanly. 
The examples now trigger the segfault, or it can be triggered in the older 
version by doing in 1.3.0:

> for (i in 1:100) example(ann)

or

> for (i in 1:100) example(nspairs)

or just by:

for (i in 1:100) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)


The typical gdb listing (shortened) is:

(in this case from)

> for (i in 1:100) example(nspairs)

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 311

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 304

....


Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x94727d0) at malloc.c:3023
#2  0x80a6b60 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a82b2 in RunGenCollect (size_needed=2000) at memory.c:1079
#4  0x80a9365 in R_gc_internal (size_needed=2000) at memory.c:1669
#5  0x80a9027 in Rf_allocVector (type=14, length=2000) at memory.c:1541
#6  0x808cb58 in Rf_duplicate (s=0x9548498) at duplicate.c:140
#7  0x80660fa in do_makelist (call=0x8a3f7c0, op=0x81a7c00, args=0x8239258, 
    rho=0x824e510) at builtin.c:367
#8  0x809136f in Rf_eval (e=0x8a3f7c0, rho=0x824e510) at eval.c:424
#9  0x8092cf1 in Rf_evalList (el=0x8a3ee30, rho=0x824e510) at eval.c:1171
#10 0x80912f8 in Rf_eval (e=0x8a3f750, rho=0x824e510) at eval.c:422
#11 0x8091089 in Rf_eval (e=0x824037c, rho=0x8240670) at eval.c:368
#12 0x8090ff4 in Rf_eval (e=0x88211a0, rho=0x8240670) at eval.c:345
#13 0x8092cf1 in Rf_evalList (el=0x8821ddc, rho=0x8240670) at eval.c:1171
#14 0x80912f8 in Rf_eval (e=0x8821dc0, rho=0x8240670) at eval.c:422
#15 0x80a4a9d in do_logic2 (call=0x8821c00, op=0x819f3e8, args=0x8821c1c, 
    env=0x8240670) at logic.c:192
#16 0x809119b in Rf_eval (e=0x8821c00, rho=0x8240670) at eval.c:401
#17 0x8091a64 in do_if (call=0x882292c, op=0x8198d74, args=0x8822948, 
    rho=0x8240670) at eval.c:665
#18 0x809119b in Rf_eval (e=0x882292c, rho=0x8240670) at eval.c:401
#19 0x8092394 in do_begin (call=0x8821820, op=0x819e81c, args=0x8821804, 
) at eval.c:887
...

I have also seen:

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8ab0b18) at malloc.c:3023
#2  0x40312204 in __builtin_vec_delete (ptr=0x8ab0b18)
   from /usr/local/lib/R/library/ann/libs/ann.so
#3  0x40307b5e in annDeallocPts (pa=@0xbfffd7a0) at ANN.cc:124
#4  0x4030733d in ANN_interface (xp=0x8cd8280, eps=@0x8e2a550, qp=0x8e2a5c8, 
    dnn=0x8d727f0, n_pts=@0x8dc7be8, k=@0x8dc7c08, dim=@0x8dc7c28, 
    q_pts=@0x8dc7c48, bucket_size=@0x8dc7c68, insplit=@0x8dc7c88, 
    inshrink=@0x8dc7ca8, priority=@0x8dc7cc8, maxpts=@0x8dc7ce8, nn=0x8ace0d0)
    at ANN_interface.cc:133
#5  0x808a557 in do_dotCode (call=0x8a3f098, op=0x81a7a5c, args=0x8a3d388, 
    env=0x8a4326c) at dotcode.c:1310
#6  0x809136f in Rf_eval (e=0x8a3f098, rho=0x8a4326c) at eval.c:424
#7  0x8092a67 in do_set (call=0x8a3f044, op=0x819e8c4, args=0x8a3f060, 
    rho=0x8a4326c) at eval.c:1092
....


and annDeallocPts() is the C++ deconstructor where:

void annDeallocPts(ANNpointArray &pa)		// deallocate points
{
    delete [] pa[0];				// dealloc coordinate storage
    delete [] pa;				// dealloc points
    pa = NULL;
}


platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    3.0              
year     2001             
month    06               
day      22     
language R
 
[rsb@reclus rsb]$ gcc -v
Reading specs from /usr/lib/gcc-lib/i586-mandrake-linux/2.95.3/specs
gcc version 2.95.3 19991030 (prerelease)
[rsb@reclus rsb]$ rpm -q gcc
gcc-2.95.2-7mdk
[rsb@reclus rsb]$ 

(Same on R 1.3.0 on RH70, gcc 2.96-85, Debian 2.2, gcc 2.95.2)

Debian gdb output:

> for (i in 1:10) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x400fbb69 in free () from /lib/libc.so.6
(gdb) bt
#0  0x400fbb69 in free () from /lib/libc.so.6
#1  0x400fb9fd in free () from /lib/libc.so.6
#2  0x80a3210 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a4932 in RunGenCollect (size_needed=20000) at memory.c:1079
#4  0x80a59bd in R_gc_internal (size_needed=20000) at memory.c:1669
#5  0x80a5687 in Rf_allocVector (type=14, length=20000) at memory.c:1541
#6  0x808a095 in Rf_duplicate (s=0x8fab148) at duplicate.c:140
#7  0x806a479 in ascommon (call=0x8268740, u=0x8fab148, type=18)
    at coerce.c:954


                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sherwin@nlm.nih.gov  Mon Jul  2 20:58:16 2001
From: sherwin@nlm.nih.gov (sherwin@nlm.nih.gov)
Date: Mon, 2 Jul 2001 21:58:16 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107021958.VAA15770@pubhealth.ku.dk>

Prof. Ripley,

Thanks for the tip on how to compile R. We successfully compiled the R until we
met another error:

Underfull \hbox (badness 10000) has occurred while \output is active
[]\T1/aer/m/n/10 null null null 
[881] [882] [883]
Underfull \vbox (badness 10000) has occurred while \output is active [884] 
Underfull \vbox (badness 10000) has occurred while \output is active [885]
[886] [887]
Underfull \vbox (badness 10000) has occurred while \output is active [888] 
[889] [890] [891]) [892]
No file refman.ind.
(refman.aux) )
(see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
enc><cmbsy7.pfb>
! Warning: pdftex (file cmbsy7.pfb):
Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
The name specified in map file was ignored
<cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
fb
! Warning: pdftex (file cmitt10.pfb):
glyph `quotedblright' undefined
><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
<cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
.pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
10.pfb> 
Output written on refman.pdf (897 pages, 3551555 bytes).
Transcript written on refman.log.
*** Error code 1
make: Fatal error: Command failed for target `refman.pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
*** Error code 1
make: Fatal error: Command failed for target `pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
*** Error code 1 (ignored)

Do you have any ideas about what might be wrong?

Thanks.
Ziying Sherwin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jul  2 21:26:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Jul 2001 22:26:14 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107022026.WAA15859@pubhealth.ku.dk>

On Mon, 2 Jul 2001, Ziying Sherwin wrote:

> Prof. Ripley,
>
> Thanks for the tip on how to compile R. We successfully compiled the R until we
> met another error:
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\T1/aer/m/n/10 null null null
> [881] [882] [883]
> Underfull \vbox (badness 10000) has occurred while \output is active [884]
> Underfull \vbox (badness 10000) has occurred while \output is active [885]
> [886] [887]
> Underfull \vbox (badness 10000) has occurred while \output is active [888]
> [889] [890] [891]) [892]
> No file refman.ind.
> (refman.aux) )
> (see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
> enc><cmbsy7.pfb>
> ! Warning: pdftex (file cmbsy7.pfb):
> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
> The name specified in map file was ignored
> <cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
> fb
> ! Warning: pdftex (file cmitt10.pfb):
> glyph `quotedblright' undefined
> ><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
> <cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
> .pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
> 10.pfb>
> Output written on refman.pdf (897 pages, 3551555 bytes).
> Transcript written on refman.log.
> *** Error code 1
> make: Fatal error: Command failed for target `refman.pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
> *** Error code 1
> make: Fatal error: Command failed for target `pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
> *** Error code 1 (ignored)
>
> Do you have any ideas about what might be wrong?


Yes. Your pdftex installation is corrupt.  Is the error message

> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map
file)!

not clear enough?  Get a correct pdftex installation, with a correct
psfonts.map file!

Looks like there might be more wrong than that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jul  2 23:31:51 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 3 Jul 2001 00:31:51 +0200 (MET DST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
Message-ID: <200107022231.AAA16296@pubhealth.ku.dk>

Brian
The following (which is new to rw1030) occurs with both
Windows 98 & Windows ME.  I have not tested behaviour
under Unix or Linux, but I expect it is no different.

text.rpart() prints unwanted NAs (presumably in the
splitting criterion position) on terminal nodes.

          Criterion <- factor(paste("Leaf", 1:5))
          Node <- factor(1:5)
          assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
          nobs <- dim(tree.df)[[1]]
          u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F, 
control = list(minsplit = 2, minbucket
                   = 1, cp = 9.999999999999998e-008))
          plot(u.tree, uniform=T)
          text(u.tree)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 3.0
  year = 2001
  month = 06
  day = 22
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcdowella@mcdowella.demon.co.uk  Tue Jul  3 05:45:52 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Tue, 3 Jul 2001 06:45:52 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data
Message-ID: <200107030445.GAA17035@pubhealth.ku.dk>

In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
Brian D Ripley <ripley@stats.ox.ac.uk> writes
>
>You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
>extension) assume continuous distributions, so the distribution theory
>is not valid in this case?
>
>S-PLUS does stop you doing this:
>
>> ks.gof(o, dist="binomial", size=100, prob=0.25)
>Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
>discrete distributions when sample size > 50, use the
>       Chi-square test
>

Thank you for your prompt reply to my bug report. While I agree that
the distribution theory for the Kolmogorov tests assumes a continuous
distribution, I would like to request a modification to the 
existing routines. The purpose of this would be to provide a result 
that would represent a conservative test in the case when the underlying
distribution is discrete.

This would be in accord with P 432 of the 3rd edition of "Practical
Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
and Arnold, both of which refer to Noether (1963) "Note on the
Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
reared on these and similar textbooks would be less surprised at the
behaviour of R if this modification was made, whereas users who do
not attempt to apply the Kolmogorov-Smirnov test to discrete
distributions would not notice any difference.

It would also be in accord with the behaviour of R in the two-sample
case, where the effect of the existing code seems to be to provide
a conservative test (since the statistic returned is no larger than
might be returned in any possible tie-breaking) coupled with a warning,
(to which I would have no objection in the one-sample case).

It seems to me that the following modification would suffice: replace

        x <- y(sort(x), ...) - (0 : (n-1)) / n

with

        x <- sort(x)
        untied <- c(x[1:n-1] != x[2:n], TRUE)
        x <- y(x, ...) - (0 : (n-1)) / n
        x <- x[untied]

Users dealing with data derived from continuous distributions would
not see any difference, because (except with very small probability 
due to floating point inaccuracy) they would never produce tied data.
-- 
A. G. McDowell

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:18:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 3 Jul 2001 07:18:26 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107030518.HAA17101@pubhealth.ku.dk>

On Tue, 3 Jul 2001, A. G. McDowell wrote:

> In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
> Brian D Ripley <ripley@stats.ox.ac.uk> writes
> >
> >You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
> >extension) assume continuous distributions, so the distribution theory
> >is not valid in this case?
> >
> >S-PLUS does stop you doing this:
> >
> >> ks.gof(o, dist="binomial", size=100, prob=0.25)
> >Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
> >discrete distributions when sample size > 50, use the
> >       Chi-square test
> >
>
> Thank you for your prompt reply to my bug report. While I agree that
> the distribution theory for the Kolmogorov tests assumes a continuous
> distribution, I would like to request a modification to the
> existing routines. The purpose of this would be to provide a result
> that would represent a conservative test in the case when the underlying
> distribution is discrete.
>
> This would be in accord with P 432 of the 3rd edition of "Practical
> Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
> Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
> and Arnold, both of which refer to Noether (1963) "Note on the
> Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
> reared on these and similar textbooks would be less surprised at the
> behaviour of R if this modification was made, whereas users who do
> not attempt to apply the Kolmogorov-Smirnov test to discrete
> distributions would not notice any difference.

(Hopefully readers of those textbooks would understand that the results you
reported as a bug *are* the behaviour of KS test.  Nowhere does R
say it has implemented a modified KS test.  The one data point we have
suggests otherwise ....)

> It would also be in accord with the behaviour of R in the two-sample
> case, where the effect of the existing code seems to be to provide
> a conservative test (since the statistic returned is no larger than
> might be returned in any possible tie-breaking) coupled with a warning,
> (to which I would have no objection in the one-sample case).
>
> It seems to me that the following modification would suffice: replace
>
>         x <- y(sort(x), ...) - (0 : (n-1)) / n
>
> with
>
>         x <- sort(x)
>         untied <- c(x[1:n-1] != x[2:n], TRUE)
>         x <- y(x, ...) - (0 : (n-1)) / n
>         x <- x[untied]

In your original examples, this reduces a sample of size 10000 to one of
size 101 or 2.  Conservative - yes.   Useful - very unlikely!

> Users dealing with data derived from continuous distributions would
> not see any difference, because (except with very small probability
> due to floating point inaccuracy) they would never produce tied data.

There are circumstances in which one would want the original KS definition
for all data sets, where one wnats the test value and not the p value.

I've added a warning, but I do not think we should be implementing a
different definition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:30:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 3 Jul 2001 06:30:27 +0100 (BST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
In-Reply-To: <200107022231.AAA16296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0107030622470.20830-100000@auk.stats>

On Tue, 3 Jul 2001 john.maindonald@anu.edu.au wrote:

> Brian
> The following (which is new to rw1030) occurs with both
> Windows 98 & Windows ME.  I have not tested behaviour
> under Unix or Linux, but I expect it is no different.

I think you mean this is a change from rpart 2.0-2 to 3.0-0: packages have
version numbers too!

It's a R/S difference (I would say an R bug) for which the workaround got
lost.  At the top of text.rpart insert

    FUN1 <- function(x, y, lab,...){
        ind <- lab != "NA"
        FUN(x[ind], y[ind], lab[ind], ...)
    }

and replace FUN by FUN1 inside if(splits) {} (but not at the end).

Fixed in rpart 3.0-1, so update.packages() will give this to you shortly.

The difference can be seen in

> plot(1:3)
> text(2, 3, NA)

S's behaviour is much more convenient and logical.


> text.rpart() prints unwanted NAs (presumably in the
> splitting criterion position) on terminal nodes.
>
>           Criterion <- factor(paste("Leaf", 1:5))
>           Node <- factor(1:5)
>           assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
>           nobs <- dim(tree.df)[[1]]
>           u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F,
> control = list(minsplit = 2, minbucket
>                    = 1, cp = 9.999999999999998e-008))
>           plot(u.tree, uniform=T)
>           text(u.tree)
>
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 3.0
>   year = 2001
>   month = 06
>   day = 22
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 09:42:30 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 10:42:30 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV began at 1.2.0
Message-ID: <200107030842.KAA18671@pubhealth.ku.dk>

This behaviour is confirmed for RH70, RH62, Debian 2.2 on 3 different
Pentium-class i386. I've checked back and package ann_0.2-2 works on
1.1.1, but fails with seg. faults on 1.2.0 (ann_0.2-2.pre3.tar.gz to
accommodate the change in Makeconf) and subsequent (1.2.0 checked today on
RH62 with gcc 2.95.3 19991030 (prerelease)).

It is most likely that 1.1.1 was too forgiving, and that better memory
management from 1.2.0 is uncovering bad code in the *.so, but could there
be an interaction between dynamic memory management in R >= 1.2 and C++
(g++)? (namespace???). It strikes me as odd that the SIGSEGV sometimes
comes from the C++ side (annDeallocPts - __builtin_vec_delete), and
sometimes from the R side (ReleaseLargeFreeVectors), with no pattern that
I can see.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 14:19:34 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 15:19:34 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV under 1.1.1 too
Message-ID: <200107031319.PAA22626@pubhealth.ku.dk>

It looks as though the problem isn't in R - I provoked a SIGSEGV under R
1.1.1 on RH62:

> for (i in 1:100) an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)
> for (i in 1:100) an1 <- ann(cbind(runif(1001), runif(1001)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at malloc.c:3111
3111    malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at
malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8849a38) at malloc.c:3023
#2  0x4002c814 in _rl_free_history_entry () from /usr/lib/libreadline.so.3
#3  0x4002ac0f in readline_internal_teardown () from
/usr/lib/libreadline.so.3
#4  0x4003a07e in rl_callback_read_char () from /usr/lib/libreadline.so.3
#5  0x80e4a8f in Rstd_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at sys-std.c:376
#6  0x80e2b6e in R_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at system.c:66
#7  0x8093618 in R_ReplConsole (rho=0x402dc338, savestack=0,
browselevel=0)
    at main.c:128
#8  0x8093e86 in run_Rmainloop () at main.c:454
#9  0x8093ec4 in Rf_mainloop () at main.c:468
#10 0x80e319a in main (ac=0, av=0xbffff934) at system.c:222

The first 100 calls went OK (as did 100 prior to that), but increasing the
number of points by one triggered the fault. It looks like memory
allocation on the C++ side, to which R >= 1.2.0 is more sensitive than
before. 

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Jul  3 21:36:00 2001
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 3 Jul 2001 22:36:00 +0200 (MET DST)
Subject: [Rd] plot.mts() with type="p" (PR#1010)
Message-ID: <200107032036.WAA25029@pubhealth.ku.dk>

There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
do a multiple point plot (this worked in 1.2.2).

Reproduce by:
> version
	 _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   
> plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  : 
        formal argument "type" matched by multiple actual arguments
> traceback()
3: plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, 
       col = col, bg = bg, pch = pch, ann = ann, type = "n", ...)
2: plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, col = col, 
       bg = bg, pch = pch, ann = ann, type = "n", ...)
1: plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> 
The problem is that plot.mts calls plot() with an explicit type = "n"
as well as ..., so the type argument is sent twice.

My short-term solution is to change plot.mts() so that:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = col, bg = bg, pch = pch, ann = ann, type = "n",
            ...)
becomes:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = 0, bg = bg, pch = pch, ann = ann, 
            ...)

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pauljohn@ukans.edu  Tue Jul  3 21:55:22 2001
From: pauljohn@ukans.edu (pauljohn@ukans.edu)
Date: Tue, 3 Jul 2001 22:55:22 +0200 (MET DST)
Subject: [Rd] R-intro suggestions part II (PR#1011)
Message-ID: <200107032055.WAA25430@pubhealth.ku.dk>

Brian Ripley said that, if I sent these here, they might find their way
to the R-intro team.  So, here is another installment:


Concerning this section:

Data permanency and removing objects.

This is the first place R-intro discusses objects.  I was thinking a
better discussion of objects and syntax is needed, perhaps here, or in
the later section "Objects, their modes and attributes."  I suggest
this:


The fact that R is an object-oriented approach to programming for
statistical analysis has pervasive implications.  If one has studied a
programming language like Java or C++, the notions of object and
method are not new.  For readers who have not studied languages like
that, perhaps we can offer a brief explanation.  An object is a "self
contained data holder" that can follow instructions (do calculations,
provide values).  One intention of this design is to keep things
separate if they belong that way, to reduce the risk that one
calculation accidentally influences the result of another.
Object-orientation also has important implications for the way the
different parts of a program fit together.  Since an object is
supposed to be able to carry out a certain set of actions (which are
called methods, but in R one often says "functions" or "procedures"),
then both the user and the programmer understand what the object can
be expected to do.  There are numerous implications of object
orientation that come into play "under the hood" of the R statistical
engine, but it is not important to delve into them from a user's point
of view.


There is one wrinkle about the syntax of R that we hasten to
emphasize.  In object-oriented computer languages, syntax typically
puts the object first, followed by the instruction, followed any needed
parameters.  In Java, to tell the object "regression" to calculate
estimates for vectors y and x, one would write something like:

   regression.estimate(y,x);

Assuming that object's class has an "estimate" method which knows how
to handle the input, we would be in business.

In R, the syntax is totally different.  Instead of thinking of the
object itself as the primary thing, the syntax in R is designed to use
the method name--the instruction--as the leading concept, and then the
object that is being acted upon is given as a parameter.

When a model gives a result in R, the result is almost invariably an
object, which can then be "poked and prodded" with other methods.
If a linear regression is calculated, for example:

resultObject <- lm(y~x)

the return value is an object.  But, unlike other object-oriented
languages, in R one would write summary(resultObject), or
coefficients(resultObject), rather than the Java style
result_object.summary() or some such thing, in order to investigate the
result.


Paul E. Johnson
Political Science
University of Kansas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Wed Jul  4 10:09:08 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Wed, 04 Jul 2001 11:09:08 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
References: <200107032036.WAA25029@pubhealth.ku.dk>
Message-ID: <3B42DD34.97377CA7@ci.tuwien.ac.at>

Ray.Brownrigg@mcs.vuw.ac.nz wrote:
> 
> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
> do a multiple point plot (this worked in 1.2.2).
>
> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>         formal argument "type" matched by multiple actual arguments

Yes, this seems to be a bug. The reason is the new panel argument in
plot.mts. Every single plot in plot.mts is set up by:

        plot(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             type="n", ...)
        panel(x[, i], col = col, bg = bg, pch = pch, ...)

And I suspect you don't really need to pass the ... argument to
plot(type="n") because what you really see is what panel produces after
that. If you remove the ... in plot the example above works. It also
works, if both commands are replaced by a single

        panel(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             ...)

Hope this helps
Achim


---------------------------
Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From canjels@yahoo.com  Wed Jul  4 12:53:58 2001
From: canjels@yahoo.com (canjels@yahoo.com)
Date: Wed, 4 Jul 2001 13:53:58 +0200 (MET DST)
Subject: [Rd] html help on R language (PR#1012)
Message-ID: <200107041153.NAA00020@pubhealth.ku.dk>

Full_Name: Eugene Canjels
Version: 1.3.0
OS: windows 98
Submission from: (NULL) (24.18.150.226)


Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to 
"..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

Also within file "..\R\rw1030\doc\html\packages.html" links to individual
packages don't work since they refer to the d: drive rather than the c: drive
where R is installed.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul  4 13:49:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Jul 2001 13:49:25 +0100 (GMT Daylight Time)
Subject: [Rd] html help on R language (PR#1012)
In-Reply-To: <200107041153.NAA00020@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0107041341150.932-100000@gannet>

On Wed, 4 Jul 2001 canjels@yahoo.com wrote:

> Full_Name: Eugene Canjels
> Version: 1.3.0
> OS: windows 98
> Submission from: (NULL) (24.18.150.226)
>
>
> Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to
> "..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

That's intentional: that file is only a stub under 1.3.0, as you will see
by looking at it.  Don't assume that all changes are bugs!

> Also within file "..\R\rw1030\doc\html\packages.html" links to individual
> packages don't work since they refer to the d: drive rather than the c: drive
> where R is installed.

You need to run link.html.help() after installation.  Using help.start()
or installing a package does it automatically for you, so most people would
never notice.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 21:47:07 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 16:47:07 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107041644440.2140-100000@eno.Princeton.EDU>



  OK, several boneheaded mistakes -- sorry.
  Replace the last two functions with the following:

create.index <- function(CRAN=getOption("CRAN"),
                         contriburl=contrib.url(CRAN),
                        descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index",
                         download=TRUE) {
  if (download) {
    pkglist <- CRAN.packages(contriburl=contriburl)
    sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
           local.ext=local.ext)
  }
  indfiles <- list.files(pattern=paste("*",local.ext,sep=""))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
noquote(indexmat[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
            grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:05:50 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 4 Jul 2001 23:05:50 +0200 (MET DST)
Subject: [Rd] typos (PR#1013)
Message-ID: <200107042105.XAA03159@pubhealth.ku.dk>


I think these are all current in R 1.3.0 ...

1. xfig: Note: "One" should be "Only" ?

2. package base, scale.html:
"who's default method" -> "whose default method"

3. "wierd" misspelled in base/html/Hershey.html

4. "details" is doubled under the "Details" section of
lib/R/library/base/html/deviance.html

5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

6. "argumetn" in list of arguments in help(complex)



Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:07:32 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 17:07:32 -0400 (EDT)
Subject: [Rd] feature request: readline
Message-ID: <Pine.GSO.4.33.0107041705430.2295-100000@eno.Princeton.EDU>


  Is there a reason that readline still has a 32-character limit for the
prompt, or is this just historical?

  Now that I/O is much expanded (thanks Dr. Ripley), readline() could be
replaced by:

readline <- function(prompt="") {
  cat(prompt)
  readLines(n=1)
}

  Ben Bolker

Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Jul  5 08:51:46 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 5 Jul 2001 09:51:46 +0200 (MET DST)
Subject: [Rd] documentation t.test (PR#1014)
Message-ID: <200107050751.JAA05129@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: R.1.2.3
OS: linux
Submission from: (NULL) (130.225.67.199)


In the package ctest (installed with R by default... it must be, since
I do not find it on the CRAN page listing the contributed packages),
the attribute of the object returned by the function t.test() holding the
degrees of freedom is documented as being parameters, while the attribute
name is parameter (no 's').

I do not feel that good to report such a small thing: I am an enthusiastic
R user for some time now. I hope this will be taken as an humble
contribution (I usually do not like people who only find typos to point out
in my work  =)     ).


All the best,



Laurent


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:12 +0200
Subject: [Rd] typos (PR#1013)
In-Reply-To: <200107042105.XAA03159@pubhealth.ku.dk>
References: <200107042105.XAA03159@pubhealth.ku.dk>
Message-ID: <15172.25640.30672.496758@mithrandir.hornik.net>

>>>>> bolker  writes:

> I think these are all current in R 1.3.0 ...

> 1. xfig: Note: "One" should be "Only" ?

> 2. package base, scale.html:
> "who's default method" -> "whose default method"

> 3. "wierd" misspelled in base/html/Hershey.html

> 4. "details" is doubled under the "Details" section of
> lib/R/library/base/html/deviance.html

> 5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

> 6. "argumetn" in list of arguments in help(complex)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:29 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:29 +0200
Subject: [Rd] documentation t.test (PR#1014)
In-Reply-To: <200107050751.JAA05129@pubhealth.ku.dk>
References: <200107050751.JAA05129@pubhealth.ku.dk>
Message-ID: <15172.25657.751757.892076@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: R.1.2.3
> OS: linux
> Submission from: (NULL) (130.225.67.199)


> In the package ctest (installed with R by default... it must be, since
> I do not find it on the CRAN page listing the contributed packages),
> the attribute of the object returned by the function t.test() holding
> the degrees of freedom is documented as being parameters, while the
> attribute name is parameter (no 's').

> I do not feel that good to report such a small thing: I am an
> enthusiastic R user for some time now. I hope this will be taken as an
> humble contribution (I usually do not like people who only find typos
> to point out in my work =) ).

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From con@maths.uwa.edu.au  Fri Jul  6 09:39:04 2001
From: con@maths.uwa.edu.au (con@maths.uwa.edu.au)
Date: Fri, 6 Jul 2001 10:39:04 +0200 (MET DST)
Subject: [Rd] R 1.3  on iMacs (PR#1015)
Message-ID: <200107060839.KAA14347@pubhealth.ku.dk>

Hi,

I have been trying to run R 1.3 on a Lab of iMacs running system 9.0. It
starts up fine but it wont accept any input from the keyboard. I can
select commands and use the copy and paste menu option and this works.

It works fine on my G4 running 9.04.

Apart from having to install the latest carbonlib, is there anything
else needed to get it running on system 9.0 on iMacs?

If you don't know of any problem then I will try to install 9.04 on one
of these machines and see if that helps.

Thanks for any feedback.
_____________________________________________________________________
Con Savas                                 email: con@maths.uwa.edu.au
Programmer                               http://maths.uwa.edu.au/~con
Department of Mathematics and Statistics                           
The University of Western Australia            Phone + 61 8 9380 3184
35 Stirling Hwy Crawley 6009                   Fax   + 61 8 9380 1028

He shall see the travail of his soul, and be satisfied:     Isaiah 53
_____________________________________________________________________

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jul  6 18:42:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 6 Jul 2001 10:42:10 -0700 (PDT)
Subject: [Rd] read.spss, R 1.3.0, win2k
Message-ID: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu>


read.spss() is giving "Rgui.exe has generated errors and will be
closed..." on all the files I have tried (the same happens with Rterm as
well). This is R1.3.0 and the current `foreign',under Win2k.

The problem doesn't happen under Linux on a different machine and
didn't happen with an earlier version of R and foreign under NT4 on a
different machine.

As I updated to a new computer, new OS and new version of R at the same
time I don't know which component is responsible. Has anyone used
read.spss() with R 1.3.0 under Windows?


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Fri Jul  6 21:23:15 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Fri, 6 Jul 2001 22:23:15 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062023.WAA19640@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.0
OS: Windows Me
Submission from: (NULL) (216.175.122.171)


I realized that the title of packages in the library index when they are in a
bundle is the title of the bundle and not the package. 

It looks like the TITLE file, which apparently is used for generating the
library index, takes the value of the bundle's title and not the package's
title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
the package's DESCRIPTION.in files concatenated), and found that the TITLE file
takes value of the *last* Title field, which happens to be the Title field of
the bundle.

Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
build?

My generated DESCRIPTION file looks like this:

Package: myPackage
Version: 0.1
Date: 2001/07/05
Title: The myBundle bundle - myPackage
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


Bundle: myBundle
Version: 0.6
Date: 2001/06/28
Title: The myBundle bundle
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


>R.version
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.0
year     2001
month    06
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jul  6 21:38:37 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Jul 2001 22:38:37 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062038.WAA19708@pubhealth.ku.dk>

On Fri, 6 Jul 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.0
> OS: Windows Me
> Submission from: (NULL) (216.175.122.171)
>
>
> I realized that the title of packages in the library index when they are in a
> bundle is the title of the bundle and not the package.
>
> It looks like the TITLE file, which apparently is used for generating the
> library index, takes the value of the bundle's title and not the package's
> title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
> the package's DESCRIPTION.in files concatenated), and found that the TITLE file
> takes value of the *last* Title field, which happens to be the Title field of
> the bundle.
>
> Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
> build?

Neither.  Bundles do not have Title nor Description fields, but
BundleDescription fields. In short, the bug is in your bundle.

Look harder at the example in R-exts, or read

  The Title field should give a short description of the package and not
  have any continuation lines.

Note: `the package'.


> My generated DESCRIPTION file looks like this:
>
> Package: myPackage
> Version: 0.1
> Date: 2001/07/05
> Title: The myBundle bundle - myPackage
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> Bundle: myBundle
> Version: 0.6
> Date: 2001/06/28
> Title: The myBundle bundle
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> >R.version
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107070515.HAA16549@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 07:54:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 08:54:41 +0200
Subject: [Rd] Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
References: <OFE06B18BD.552E3547-ONC1256A81.0059F5D8@netia.pl>
 <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
Message-ID: <15176.945.261022.940709@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> The first few errors mean that you don't have xdr support in the
> libraries you included. R checks for the headers rpc/rpc.h and
> rpc/xdr.h so you have those.

> Try man xdr and see if it requires an additional library.

Actually, I think configure is not smart enough about this.

We currently test for the headers but not for any xdr_* library
function.  As we say that only ISO C can be assumed and everything else
must be tested for, I think we must test for the library functions too.
But where?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 09:23:06 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 10:23:06 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
In-Reply-To: <3B42DD34.97377CA7@ci.tuwien.ac.at>
References: <200107032036.WAA25029@pubhealth.ku.dk>
 <3B42DD34.97377CA7@ci.tuwien.ac.at>
Message-ID: <15176.6250.339968.116003@mithrandir.hornik.net>

>>>>> Achim Zeileis writes:

> Ray.Brownrigg@mcs.vuw.ac.nz wrote:
>> 
>> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
>> do a multiple point plot (this worked in 1.2.2).
>> 
>> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
>> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>> formal argument "type" matched by multiple actual arguments

> Yes, this seems to be a bug. The reason is the new panel argument in
> plot.mts. Every single plot in plot.mts is set up by:

>         plot(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              type="n", ...)
>         panel(x[, i], col = col, bg = bg, pch = pch, ...)

> And I suspect you don't really need to pass the ... argument to
> plot(type="n") because what you really see is what panel produces
> after that. If you remove the ... in plot the example above works. It
> also works, if both commands are replaced by a single

>         panel(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              ...)

If this was only about plot.mts(), I'd say that the `...' are graphics
parameters and not additional arguments to the panel function, and hence
the behavior is as expected.  The desired effect can be obtained by
using `panel = points'.

Btw, we get the same for

R> data(USJudgeRatings)
R> pairs(USJudgeRatings, type = "l")
Error in plot.default(x[, j], x[, i], xlab = "", ylab = "", axes = FALSE,  : 
        formal argument "type" matched by multiple actual arguments

Ok but perhaps not too helpful.  In an ideal world, we should perhaps
match the `...' against the possible pars before passing them on.

However, I think there are more problems.

?plot.mts [why would I know to look for this anyway?  We need to do
something along the lines John suggested in Vienna: have a way to find
out about the possible args to plot() when calling it on a specific
object or class ...] says

plot(x, y = NULL, type = "l", xlim = NULL, ylim = NULL,
     xlab = "Time", ylab, log = "",
     col = par("col"), bg = NA, pch = par("pch"), cex = par("cex"),
     lty = par("lty"), lwd = par("lwd"),
     axes = TRUE, frame.plot = axes, ann = par("ann"),
     main = NULL, plot.type = c("multiple", "single"),
     xy.labels = n <= 150, xy.lines = do.lab, panel=lines, ...)

and this even has an explicit `type' argument!

Of course what happens is that what we see is the documentation for the
ts and not the mts method.

The short term fix would be to document plot.mts separately.

However, does plot.mts really need to be a function of its own with an
interface *different* from plot.ts?  We seem to be calling each other
vice versa anyway ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Jul  8 11:22:05 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
Message-ID: <200107081022.MAA23606@pubhealth.ku.dk>

#       r-bugs@r-project.org

The problem occurs when the model matrix has a single
column.

> elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
   distance=c(183,217,189,208,178,150,249))
> elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)

> predict(elastic.lm,se=T)
Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments

The fix is to replace 
  XRinv <- qr.Q(object$qr)[, p1]
with
  XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]

The statement is five lines above XRinv^2 %*% rep(res.var, p)

John Maindonald.

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3473        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 13:05:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jul 2001 14:05:24 +0200
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)"
References: <200107081022.MAA23606@pubhealth.ku.dk>
Message-ID: <x2y9pz7hiz.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

> #       r-bugs@r-project.org
> 
> The problem occurs when the model matrix has a single
> column.
> 
> > elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
>    distance=c(183,217,189,208,178,150,249))
> > elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)
> 
> > predict(elastic.lm,se=T)
> Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments
> 
> The fix is to replace 
>   XRinv <- qr.Q(object$qr)[, p1]
> with
>   XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]
> 
> The statement is five lines above XRinv^2 %*% rep(res.var, p)
> 

Ick! Thanks.

For a workaround, notice that

> predict(elastic.lm,se=T,new=elastic)
$fit
       1        2        3        4        5        6        7 
188.8946 221.7458 197.1074 205.3202 180.6818 172.4690 213.5330 

$se.fit
[1] 6.423642 7.540797 6.702930 6.982219 6.144353 5.865064 7.261508

$df
[1] 6

$residual.scale
[1] 17.79576


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Jul  8 23:00:59 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 08 Jul 2001 18:00:59 -0400
Subject: [Rd] Don't test my example; list of Rd macros?
Message-ID: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>

I'm pretty sure I've read here that it's possible to mark certain
lines in the \examples section so the Rcmd check doesn't run them
during its tests, but I can't find it now.  (I have one function that
takes user input; with no user present, the test stalls.)

More generally, is there a reference list somewhere of all of the Rd
macros?  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 23:35:47 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 00:35:47 +0200
Subject: [Rd] Don't test my example; list of Rd macros?
In-Reply-To: Duncan Murdoch's message of "Sun, 08 Jul 2001 18:00:59 -0400"
References: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>
Message-ID: <x2bsmv3v7g.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> I'm pretty sure I've read here that it's possible to mark certain
> lines in the \examples section so the Rcmd check doesn't run them
> during its tests, but I can't find it now.  (I have one function that
> takes user input; with no user present, the test stalls.)
> 
> More generally, is there a reference list somewhere of all of the Rd
> macros?  

\dontrun{}

Most of the stuff is documented in "Writing R extensions", section
"Writing R documentation"

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jul  9 11:57:31 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 09 Jul 2001 12:57:31 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de>
Message-ID: <3B498E1B.CEFB928@statistik.uni-dortmund.de>

Thomas Lumley wrote:
>
> read.spss() is giving "Rgui.exe has generated errors and will be
> closed..." on all the files I have tried (the same happens with Rterm as
> well). This is R1.3.0 and the current `foreign',under Win2k.
>
> The problem doesn't happen under Linux on a different machine and
> didn't happen with an earlier version of R and foreign under NT4 on a
> different machine.
>
> As I updated to a new computer, new OS and new version of R at the same
> time I don't know which component is responsible. Has anyone used
> read.spss() with R 1.3.0 under Windows?


[R-1.3.0, foreign_0.4-4, WinNT 4.0]

A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
ncol=2)", can be read in:

  read.spss("c:/test.sav")

$VAR00001
[1] 2 3

$VAR00002
[1] 3 5



But trying to read a non existant file crashes R on my machine:

  read.spss("c:/nonexistant.abc")  # R crashes


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul  9 15:07:34 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 16:07:34 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Uwe Ligges's message of "Mon, 09 Jul 2001 12:57:31 +0200"
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de> <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <x2bsmuci1l.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
> 
> 
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
> 
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
> 
>   read.spss("c:/test.sav")
> 
> $VAR00001
> [1] 2 3
> 
> $VAR00002
> [1] 3 5
> 
> 
> 
> But trying to read a non existant file crashes R on my machine:
> 
>   read.spss("c:/nonexistant.abc")  # R crashes

I think this is the difference between foreign_0.4-4 and -5, but not
likely the issue that Thomas had.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 19:41:31 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 11:41:31 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <20010708202636.26286.qmail@web9305.mail.yahoo.com>
Message-ID: <20010709184131.38498.qmail@web13903.mail.yahoo.com>


I'm defining the following functions:

> foo1 <- function(...) print(match.call())
> foo2 <- function(...) foo1(...)

My understanding is that foo2 defined as above should
behave exactly like foo1 (and also that this sort of
usage is quite common). However, what I'm getting is:

> foo1(a = F, b = list()); foo2(a = F, b = list())
foo1(a = F, b = list())
foo1(a = ..1, b = ..2)

However, if the values of the arguments are constants,
there appears to be no problem, e.g.:

> temp <- 10
> foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
+ b = 10, ab = FALSE)
foo1(a = temp, b = 10, ab = FALSE)
foo1(a = ..1, b = 10, ab = FALSE)

Any explanations/suggestions ?

Deepayan


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 20:06:41 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 15:06:41 -0400
Subject: [Rd] The ... argument
References: <20010709184131.38498.qmail@web13903.mail.yahoo.com>
Message-ID: <3B4A00C1.559953AE@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I'm defining the following functions:
> 
> > foo1 <- function(...) print(match.call())
> > foo2 <- function(...) foo1(...)
> 
> My understanding is that foo2 defined as above should
> behave exactly like foo1 (and also that this sort of
> usage is quite common). However, what I'm getting is:
> 
> > foo1(a = F, b = list()); foo2(a = F, b = list())
> foo1(a = F, b = list())
> foo1(a = ..1, b = ..2)
> 
> However, if the values of the arguments are constants,
> there appears to be no problem, e.g.:
> 
> > temp <- 10
> > foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
> + b = 10, ab = FALSE)
> foo1(a = temp, b = 10, ab = FALSE)
> foo1(a = ..1, b = 10, ab = FALSE)
> 
> Any explanations/suggestions ?
> 
> Deepayan

Well, "exactly like" is overstating it a bit.

You should get the same effect in terms of the computed results.

But the evaluator has to ensure that the usual rules of evaluation
apply.  In particular, that arguments only get evaluated when needed,
and (rather important!) only once per argument.

The semantics that does this is to imagine that variables ..1, ..2, etc.
are created in the environment of foo1 corresponding to the actual
arguments that matched ...

These arguments are what actually get passed around, ensuring that the
usual rules for evaluation are followed.  Which also explains why the
pseudo-variables aren't needed if the actual arguments are constants.

As for suggestions, you haven't said what you REALLY wanted to do, but
it sounds like you may want to do some substituting inside foo2.

By the way, this is not R-specific behavior.  It really follows from the
S language semantics, and S-Plus behaves the same way.

John

> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 20:36:51 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 12:36:51 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A00C1.559953AE@research.bell-labs.com>
Message-ID: <20010709193651.19049.qmail@web13904.mail.yahoo.com>


I think my earlier example didn't fully represent my
problem. I'm trying to evaluate the arguments passed
in via ... by:

foo1 <- function(...) {
    eval(as.list(match.call()[-1]))
}

foo2 <- function(...) foo1(...)

So now,

> foo1(a=F)          
$a
F

> foo2(a=F)
$a
..1




__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 21:30:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 16:30:56 -0400
Subject: [Rd] The ... argument
References: <20010709193651.19049.qmail@web13904.mail.yahoo.com>
Message-ID: <3B4A1480.DA7201C6@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I think my earlier example didn't fully represent my
> problem. I'm trying to evaluate the arguments passed
> in via ... by:
> 
> foo1 <- function(...) {
>     eval(as.list(match.call()[-1]))
> 

Why?

The way to get the _evaluated_ ... arguments is
  dotValues <- list(...)

See, for example, under "..." in the index to the "blue book".


> foo2 <- function(...) foo1(...)
> 
> So now,
> 
> > foo1(a=F)
> $a
> F
> 
> > foo2(a=F)
> $a
> ..1
> 
> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 21:48:34 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 13:48:34 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A1480.DA7201C6@research.bell-labs.com>
Message-ID: <20010709204834.59000.qmail@web13905.mail.yahoo.com>



--- John Chambers <jmc@research.bell-labs.com> wrote:
> Deepayan Sarkar wrote:
> > 
> > I think my earlier example didn't fully represent
> my
> > problem. I'm trying to evaluate the arguments
> passed
> > in via ... by:
> > 
> > foo1 <- function(...) {
> >     eval(as.list(match.call()[-1]))
> > 
> 
> Why?
> 
> The way to get the _evaluated_ ... arguments is
>   dotValues <- list(...)


Oops! Thanks a lot, everything works fine now.



__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 21:23:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 22:23:57 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
Message-ID: <15178.4829.208468.904765@mithrandir.hornik.net>

>>>>> Krzysztof Kopera writes:

> Sorry, but my mail program add "ODP" instead "Re" to subject of my
> previous letter.  My last problem is solved but I have new, serious
> problem with making internet module (under src/modules/internet),
> below is output after "make":

>         gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
> nanohttp.o sock.o sockconn.o
> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
> position
>     independent.  Use +z or +Z to recompile.
> collect2: ld returned 1 exit status

> Can you help me? Maybe anyone have experience in building R under
> HP-UX 11.00 or other HP-UX.

Maybe I am getting paranoid or it is too late at night but something
looks awfully wrong ... all modules should compile using PIC.  

This should really be done using .lo in the OBJECTS.  However, for
reasons I cannot remember the GUI modules which have been around for
some time use .o instead.  They get PIC, though, by

  ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

The modules added in 1.3.0 do not do this, which I think is wrong.

I'll be gone for a workshop for the next two days, and will look into
this on Thu.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 22:41:46 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 23:41:46 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <15178.4829.208468.904765@mithrandir.hornik.net>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
 <15178.4829.208468.904765@mithrandir.hornik.net>
Message-ID: <15178.9498.538675.711410@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Krzysztof Kopera writes:
>> Sorry, but my mail program add "ODP" instead "Re" to subject of my
>> previous letter.  My last problem is solved but I have new, serious
>> problem with making internet module (under src/modules/internet),
>> below is output after "make":

>> gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
>> nanohttp.o sock.o sockconn.o
>> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
>> position
>> independent.  Use +z or +Z to recompile.
>> collect2: ld returned 1 exit status

>> Can you help me? Maybe anyone have experience in building R under
>> HP-UX 11.00 or other HP-UX.

> Maybe I am getting paranoid or it is too late at night but something
> looks awfully wrong ... all modules should compile using PIC.  

> This should really be done using .lo in the OBJECTS.  However, for
> reasons I cannot remember the GUI modules which have been around for
> some time use .o instead.  They get PIC, though, by

>   ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

> The modules added in 1.3.0 do not do this, which I think is wrong.

> I'll be gone for a workshop for the next two days, and will look into
> this on Thu.

Actually ... done now.  Pls try again ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 15:32:27 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 16:32:27 +0200
Subject: [Rd] color NA is allowed, but "NA" is not ... (yet)
Message-ID: <15179.4603.473221.604700@gargle.gargle.HOWL>

In several places, we have the convention that col =  NA  means
`` don't draw '', e.g. for points() or rect().

For col = <vector> this only works when the vector is integer (numeric),
but not in other cases.  I think this is a bug, even though not in the
strict sense, since we don't seem to claim it should work..

Example:

   plot(1:10, col = c(1:4,NA,NA,4:1))

## fine

   (cc <- heat.colors(4))
   plot(1:10, col = c(cc, NA,NA,rev(cc)))

## gives error :

Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
	invalid color name

-------

Does anybody see a problem in making  "NA" for character colors behave the
same as NA for integer (numeric) ones ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 18:09:20 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 19:09:20 +0200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
In-Reply-To: <15179.4603.473221.604700@gargle.gargle.HOWL>
References: <15179.4603.473221.604700@gargle.gargle.HOWL>
Message-ID: <15179.14016.810372.917441@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In several places, we have the convention that col = NA means ``
    MM> don't draw '', e.g. for points() or rect().

    MM> For col = <vector> this only works when the vector is integer
    MM> (numeric), but not in other cases.  I think this is a bug, even
    MM> though not in the strict sense, since we don't seem to claim it
    MM> should work..

    MM> Example:

    MM>    plot(1:10, col = c(1:4,NA,NA,4:1))

    MM> ## fine

    MM>    (cc <- heat.colors(4)) plot(1:10, col = c(cc, NA,NA,rev(cc)))

    MM> ## gives error :

    MM> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg =
    MM> bg, lty = lty, : invalid color name

    MM> -------

    MM> Does anybody see a problem in making "NA" for character colors
    MM> behave the same as NA for integer (numeric) ones ?

And I have the patch ready (tested and documented) for this,
to be committed to "R-patched" i.e. to be in 1.3.1,
unless ....


Note however the following `misbehavior' (I think)  of segments() :

 n <- 8
 x <- 1:n
 ep <- 0.2
 cc <- c(1:4,NA,6:n)

   plot(x, col= cc, type='h')
 points(x, col= cc, cex=2)

 segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..

------

i.e. segments does not follow the general idea of 
 ``not drawing when color is NA ''

(note that there is no compatibility issue here, since S-plus
 does not allow NA colors--and vectorized ones in most cases--anyway.)

And this seems to be ``on purpose'' :
in  src/main/plot.c  in do_segments(), around line 1560, we have

	    dd->gp.col = INTEGER(col)[i % ncol];
	    if (dd->gp.col == NA_INTEGER)
		dd->gp.col = dd->dp.col;

which means in S language that col = NA will be translated to col = par("col")
Any reason why this would be a good idea ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jul 10 20:50:24 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 10 Jul 2001 21:50:24 +0200 (MET DST)
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
Message-ID: <200107101950.VAA11054@pubhealth.ku.dk>

This is related to the wishlist item 856 that Paul Gilbert submitted.

If there's a missing closing brace, a whole section can silently
disappear.  It would be nice if the help parser (or CHECK) checked for
matching braces in help files, and reported an error when they don't
match over the whole file, or when one section is started within
another one.

For example:

\name{test}
\alias{test}
\title{test}
\description{
This whole section will go missing, because I forgot
to close a brace on this reference:  \code{\link{test}

There may be more text afterwards, which wasn't supposed to
be included in the "code" section, but will be because of my
oversight; the next brace is supposed to close the description, but
leaves it open. When the parser sees "author", it forgets all about
this whole section.
}

\author{ Duncan Murdoch }

\keyword{test}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 10 23:58:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 10:58:30 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL>
Message-ID: <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>

Hi


> Note however the following `misbehavior' (I think)  of segments() :
>
>  n <- 8
>  x <- 1:n
>  ep <- 0.2
>  cc <- c(1:4,NA,6:n)
>
>    plot(x, col= cc, type='h')
>  points(x, col= cc, cex=2)
>
>  segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..
>
> ------
>
> i.e. segments does not follow the general idea of
>  ``not drawing when color is NA ''
>
> (note that there is no compatibility issue here, since S-plus
>  does not allow NA colors--and vectorized ones in most cases--anyway.)
>
> And this seems to be ``on purpose'' :
> in  src/main/plot.c  in do_segments(), around line 1560, we have
>
>     dd->gp.col = INTEGER(col)[i % ncol];
>     if (dd->gp.col == NA_INTEGER)
> dd->gp.col = dd->dp.col;
>
> which means in S language that col = NA will be translated to col =
par("col")
> Any reason why this would be a good idea ?


>From my memory of these things, this is how col=NA used to be treated in all
sorts of graphics functions.   In other words, segments() behaves like this
only because it hasn't been converted yet to the "new" interpretation of
col=NA (i.e., don't draw anything).

Paul

p.s.  we run into a bit of trouble with this issue for rect() and polygon().
Both use col=NA to indicate that the rect/polygon should not be FILLED, but
will still draw a border.  And its not so easy to just change the meaning of
col=NA -- we need to find a new way of specifying "don't fill, but do draw
the border".  One option would be col=NULL (?)

p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
rectangle.

p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
to use polygon(border=0) NOT to draw a border.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Jul 11 00:24:05 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 10 Jul 2001 19:24:05 -0400
Subject: [Rd] Object finalization
Message-ID: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>

I see some code in R to attach finalizers to external pointer references 
(Register[C]Finalizer).  Anyone have an example of how to code the 
finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
how to get it to operate on the pointer, since the pointer is not passed 
to the function when its called.  RegisterFinalizer takes an R closure, 
but how is it called from R (tried .Internal)?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Wed Jul 11 00:29:32 2001
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Wed, 11 Jul 2001 09:29:32 +1000
Subject: [Rd] stripchart() labels
Message-ID: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>

I propose to replace add a ... argument to stripchart(),
and to modiffy the following code fragment as shown.
[The only changes are the addition of ... arguments
in two calls to axis()]

plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
     box()
     if (vertical) {
         if (n > 1)
             axis(1, at = 1:n, lab = names(groups), ...)  # ... argument added
         axis(2)
     }
     else {
         axis(1)
         if (n > 1)
             axis(2, at = 1:n, lab = names(groups), ...)  # ... argument added
     }

Then one can do the following:
   data(PlantGrowth)
   attach(PlantGrowth)
   stripchart(weight~group, las=2)

or
   stripchart(weight~group, vertical=TRUE, las=2)

This is often the most effective way to deal with the problem
of overlapping labels, so that some labels do not appear.
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3473
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Jul 11 02:26:12 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 10 Jul 2001 20:26:12 -0500
Subject: [Rd] Object finalization
In-Reply-To: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>; from tklistaddr@keittlab.bio.sunysb.edu on Tue, Jul 10, 2001 at 07:24:05PM -0400
References: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>
Message-ID: <20010710202612.A11693@nokomis.stat.umn.edu>

On Tue, Jul 10, 2001 at 07:24:05PM -0400, Timothy H. Keitt wrote:
> I see some code in R to attach finalizers to external pointer references 
> (Register[C]Finalizer).  Anyone have an example of how to code the 
> finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
> how to get it to operate on the pointer, since the pointer is not passed 
> to the function when its called.  RegisterFinalizer takes an R closure, 
> but how is it called from R (tried .Internal)?
> 
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 

There is a writeup on this, including some example code, in

	http://www.stat.umn.edu/~luke/R/simpleref.html

(also available off http://developer.r-project.org/).  For the C
finalizer, the C function you register is of type R_CFinalizer_t,
defined as

	typedef void (*R_CFinalizer_t)(SEXP);

The SEXP it is called with is the external pointer object.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 03:06:39 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Tue, 10 Jul 2001 22:06:39 -0400 (EDT)
Subject: [Rd] Re: [R] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
Message-ID: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>

I have completed some work which allows fairly complete use of Computer
Modern fonts in R.

First, I have a quick bug fix to devPS.c: If an afm file could not be
loaded, R gives a "cannot read afm file" which should be followed by the
name of the file, but instead it is followed by garbage. Here is a patch
to devPS.c that fixes it:

1150c1150
< 	    warning("cannot read afm file %s", buf);
---
> 	    warning("cannot read afm file %s", p);
1156c1156
< 	warning("cannot read afm file %s", buf);
---
> 	warning("cannot read afm file sy______.afm");


my system is:
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

I think there may be similar problems with the error messages of the xfig
and pdf drivers, but I have not tried to understand them.

Before I send the pathches which allow use of CM fonts, I would like to
see whether there is interest in them or whether the changes I made would
be considered unacceptable. These changes allow CM fonts in
straight postscript output only. The basic idea is:

1) Extend the family option in the postscript driver to take a list of
five afm files instead of four. The fifth is for the symbol afm file. The
code changes for this are fairly clear.

2) Manipulate the CM fonts in the postscript file, merging them into new
fonts which are encoded with ISOLatin1 or Symbol encoding. This I
currently implemented by adding two new global variables like .ps.prolog.
One adds additional comments to the postscript file to allow the user
to request more resources in the postscript file, the second allows
the user to add commands to manipulate the fonts. When the second
variable is used, the default font reencoding is not used. This is not
very elegant and it leaves a lot up to the user, but the CM fonts are
really a special case and perhaps a function could be provided which sets
up the system for the CM fonts. The advantage is that this requires very
few changes to the original code.

3) Construct new afm files for the CM fonts which reflect the merged state
of the fonts that exist in the postscript file. I have done this, and
although it is not great to have to distribute customized afms, it is
simple to use now that it is done.

Currently I have this all working, although part (1) breaks old code that
doesn't specify a fifth afm file. This could of course be fixed by making
symbol added on if only four afms are given. Also changes reqired for (1)
may or may not break the other postscript related drivers.

What do you think? If you are interested, what is the best way for me to
package it up to submit it? Although the patches are small, the modified
afms are somewhat bulky to paste into email, but I have no experience with
cvs. Would an attached tarball of stuff be OK?

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Wed Jul 11 05:11:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 16:11:30 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>
Message-ID: <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>

Hi


> I propose to replace add a ... argument to stripchart(),
> and to modiffy the following code fragment as shown.
> [The only changes are the addition of ... arguments
> in two calls to axis()]
>
> plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
>      box()
>      if (vertical) {
>          if (n > 1)
>              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
added
>          axis(2)
>      }
>      else {
>          axis(1)
>          if (n > 1)
>              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
added
>      }
>
> Then one can do the following:
>    data(PlantGrowth)
>    attach(PlantGrowth)
>    stripchart(weight~group, las=2)
>
> or
>    stripchart(weight~group, vertical=TRUE, las=2)
>
> This is often the most effective way to deal with the problem
> of overlapping labels, so that some labels do not appear.


We should probably also pass the "..." to the call(s) to points() so that
you could do things like ...

    stripchart(weight~group, pch=21, col="blue", bg="lightblue")

... and "..." should probably get passed to the call to title() too.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jul 11 11:09:15 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 11 Jul 2001 12:09:15 +0200
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
References: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
 <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
Message-ID: <15180.9675.891306.920609@gargle.gargle.HOWL>

>>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:

    Brian> I have completed some work which allows fairly complete use of Computer
    Brian> Modern fonts in R.

    Brian> First, I have a quick bug fix to devPS.c: If an afm file could
    Brian> not be loaded, R gives a "cannot read afm file" which should be
    Brian> followed by the name of the file, but instead it is followed by
    Brian> garbage. Here is a patch to devPS.c that fixes it:

  1150c1150
  < 	    warning("cannot read afm file %s", buf);
  ---
  > 	    warning("cannot read afm file %s", p);
  1156c1156
  < 	warning("cannot read afm file %s", buf);
  ---
  > 	warning("cannot read afm file sy______.afm");

Thank, I've committed these for R-patched
       (and, could you please use  "diff -u" next time ?)

    ....

    Brian> I think there may be similar problems with the error messages of
    Brian> the xfig and pdf drivers, but I have not tried to understand
    Brian> them.

I've looked for them in devPS.c and fixed them analogously.
Can you tell me how to trigger them ??


    Brian>	<........... (omitted) ..........>

I do not really feel competent to answer your general question about the
usefulness of CM fonts via postscript() graphics.

In principle, I think it's a nice idea, since (La)TeX's default CM fonts
are still used quite a bit, and liked by many, and hence it would be quite 
neat to have the graphics using the same fonts.

As for how to `submit' your changes (*when* there is agreement that they
 are wanted): 
Consider putting up your code as *.tar.gz for FTP (or HTTP) and just
forward the URL to this list. 


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Wed Jul 11 12:25:52 2001
From: alobo@ija.csic.es (Agustin Lobo)
Date: Wed, 11 Jul 2001 13:25:52 +0200 (MET DST)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <3B4967CC.974635C4@bank-banque-canada.ca>
Message-ID: <Pine.OSF.3.96.1010711131757.20936C-100000@paleo.ija.csic.es>


I've seen that:

> min(c(NA,NA,NA),na.rm=T)
[1] 2147483647
Warning message: 
no finite arguments to min/max; returning extreme. in: min(..., na.rm =
na.rm) 

Would not be

numeric(0)

a more logical result? 

(I'm using this function in a program in which the vector
can often include NA's and, sometimes, a subseting can
leave only NA values).

Thanks

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo@ija.csic.es


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lcottret@yahoo.fr  Wed Jul 11 14:34:25 2001
From: lcottret@yahoo.fr (lcottret@yahoo.fr)
Date: Wed, 11 Jul 2001 15:34:25 +0200 (MET DST)
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
Message-ID: <200107111334.PAA16384@pubhealth.ku.dk>

Full_Name: Ludovic Cottret
Version: R 1.3.0
OS: Linux
Submission from: (NULL) (157.136.20.138)


I have a R function which call a C function by the instruction ".Call".
The first time I call the R function in a R session, it perfectly runs. But the
next 
times, R returns this error message :

Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
        .Call function name not in load table

The function name has disappeared !!
This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?

Thanks for your answers...
PS : Excuse my poor english...




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 14:49:31 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 11 Jul 2001 09:49:31 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107110931340.22363-100000@hussle.harvard.edu>

On Wed, 11 Jul 2001, Martin Maechler wrote:

> >>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:
>
>     Brian> First, I have a quick bug fix to devPS.c: If an afm file could
>     Brian> not be loaded, R gives a "cannot read afm file" which should be
>     Brian> followed by the name of the file, but instead it is followed by
>     Brian> garbage. Here is a patch to devPS.c that fixes it:
>
>   1150c1150
>   < 	    warning("cannot read afm file %s", buf);
>   ---
>   > 	    warning("cannot read afm file %s", p);
>   1156c1156
>   < 	warning("cannot read afm file %s", buf);
>   ---
>   > 	warning("cannot read afm file sy______.afm");
>
> Thank, I've committed these for R-patched
>        (and, could you please use  "diff -u" next time ?)
>
>     ....
>
>     Brian> I think there may be similar problems with the error messages of
>     Brian> the xfig and pdf drivers, but I have not tried to understand
>     Brian> them.
>
> I've looked for them in devPS.c and fixed them analogously.
> Can you tell me how to trigger them ??
>

They can be triggered by telling the postscript driver to load an afm file
that doesn't exist, e.g. :

postscript(family=c(doesnotexist1.afm, dne2.afm, dne3.afm, dne4.afm ), etc)

To trigger the problem with the pdf and xfig drivers, remove one of the
afm files from R's afm directory, e.g. hv______.afm and then use
family="Helvetica" in the pdf or xfig driver.


-- Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Jul 11 15:13:07 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 11 Jul 2001 10:13:07 -0400
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
In-Reply-To: <200107111334.PAA16384@pubhealth.ku.dk>; from lcottret@yahoo.fr on Wed, Jul 11, 2001 at 03:34:25PM +0200
References: <200107111334.PAA16384@pubhealth.ku.dk>
Message-ID: <20010711101307.E24919@jessie.research.bell-labs.com>

Hi Ludovic.

 There are at least two possible explanations for this behaviour.

  1)  There is a bug in the recently changed code in R to find 
     routines in C and Fortran libraries.

  2)  The routine that you are .Call()'ing is doing something
  that has confused the R internals and makes the next R commands
  not work, and potentially this is not reproducible.

If this is not proprietary or confidential code, you can send the C
code and instructions as to how to call it from R (that is, provide
simple values for the bankpath, accn, indexpath, key, beg and end
arguments), then I can see if the computations are potentially
writing over other values in memory.

Also, you can try a invoking a very simple .Call() routine 
many times to see if that displays the same failure. For example,
put the following C code in a file named simpleCall.c

#include "Rinternals.h"

SEXP
simpleCall() 
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}

Then, compile this with 
  R CMD SHLIB simpleCall.c

and call it from R in the following way

 > dyn.load("simpleCall.so")
 > for(i in 1:10) { print(.Call("simpleCall")) }

If this works, it won't determine whether it is 1) or 2) (or any other
possible reason), but if it doesn't work, we will have a lot more
information.

 Thanks,
   Duncan


lcottret@yahoo.fr wrote:
> Full_Name: Ludovic Cottret
> Version: R 1.3.0
> OS: Linux
> Submission from: (NULL) (157.136.20.138)
> 
> 
> I have a R function which call a C function by the instruction ".Call".
> The first time I call the R function in a R session, it perfectly runs. But the
> next 
> times, R returns this error message :
> 
> Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
>         .Call function name not in load table
> 
> The function name has disappeared !!
> This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?
> 
> Thanks for your answers...
> PS : Excuse my poor english...
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Jul 11 15:57:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 11 Jul 2001 07:57:35 -0700 (PDT)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <pine.osf.3.96.1010711131757.20936c_100000@paleo.ija.csic.es>
Message-ID: <Pine.LNX.4.33.0107110757350.25476@hymn03.u.washington.edu>

On Wed, 11 Jul 2001, Agustin Lobo wrote:

> 
> I've seen that:
> 
> > min(c(NA,NA,NA),na.rm=T)
> [1] 2147483647
> Warning message: 
> no finite arguments to min/max; returning extreme. in: min(..., na.rm =
> na.rm) 
> 
> Would not be
> 
> numeric(0)
> 
> a more logical result? 

It turns out that both NA and numeric(0) have disadvantages.  The problem with numeric(0) is that min() usually returns a vector of length 1 and doing comparisons like (min(x)<max(y)) would lead to an error if one of them had zero length. In many ways NA is the obvious result and is what S does, but using Inf has the effect that max(c(x,y)) is always the same as max(x,max(y)) and similar things. 

The result is more elegant with real numbers where the result is the IEEE Inf not just the largest number. Another minor advantage is that it automatically gives the correct nonparametric confidence intervals for quantiles as having infinite limits.
 

          -thomas




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:06:14 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:06:14 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL> <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CBFC6.6404FA30@stat.auckland.ac.nz>

Paul Murrell wrote:

> p.s.  we run into a bit of trouble with this issue for rect() and polygon().
> Both use col=NA to indicate that the rect/polygon should not be FILLED, but
> will still draw a border.  And its not so easy to just change the meaning of
> col=NA -- we need to find a new way of specifying "don't fill, but do draw
> the border".  One option would be col=NULL (?)

I'd like to reserve par=NULL to mean "use the current default value for
par".
This would make it possible to avoid ugliness like:
	bg = par("bg")
It would also make it possible to have sensible meanings for
	my.pars = list(...)
	polygon(x, y, col = my.pars$col)
If there was no "col" in the ... we get a sensible efect.

> p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
> rectangle.
> 
> p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
> to use polygon(border=0) NOT to draw a border.

I think the first of these is right and the second is a bug.
IMHO we do need a way of specifying different border and fill colours.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:16:20 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:16:20 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au> <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CC224.45E6752A@stat.auckland.ac.nz>

Paul Murrell wrote:
> 
> Hi
> 
> > I propose to replace add a ... argument to stripchart(),
> > and to modiffy the following code fragment as shown.
> > [The only changes are the addition of ... arguments
> > in two calls to axis()]
> >
> > plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
> >      box()
> >      if (vertical) {
> >          if (n > 1)
> >              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >          axis(2)
> >      }
> >      else {
> >          axis(1)
> >          if (n > 1)
> >              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >      }
> >
> > Then one can do the following:
> >    data(PlantGrowth)
> >    attach(PlantGrowth)
> >    stripchart(weight~group, las=2)
> >
> > or
> >    stripchart(weight~group, vertical=TRUE, las=2)
> >
> > This is often the most effective way to deal with the problem
> > of overlapping labels, so that some labels do not appear.
> 
> We should probably also pass the "..." to the call(s) to points() so that
> you could do things like ...
> 
>     stripchart(weight~group, pch=21, col="blue", bg="lightblue")
> 
> ... and "..." should probably get passed to the call to title() too.

I'd like to suggest a slightly different way of doing this.
There should be a ... in the outer function, but it should be used as
follows.

	outerfun <- function(x, y, ...) {
		pars <- list(...)
		...
		points(x, y, pch = pars$pch, col = pars$col)
		...
		title(main = pars$main, xlab = pars$xlab)
	}

This allows to be explicit about which parameter values get dispatched
to which
graphics functions.

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ce@biostat.ku.dk  Wed Jul 11 22:23:54 2001
From: ce@biostat.ku.dk (ce@biostat.ku.dk)
Date: Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)
Subject: [Rd] Extra lines when bty="n" (PR#1021)
Message-ID: <200107112123.XAA18465@pubhealth.ku.dk>

Full_Name: Claus Ekstrøm
Version: 1.2.0
OS: Linux (RedHat 7.1)
Submission from: (NULL) (212.54.75.68)


For some reason two extra lines keep appearing 
when making graphics with no box, bty="n" (a vertical line
along the leftmost side of the graphics region and a horizonal 
line along the bottom side). The lines are very visible if the 
plot is saved as a postscript file and is later included in 
a document.

Example code:

# postscript("test.ps")
y <- rnorm(100)
par(mar=c(0,0,0,0), bty="n")
plot(y)
# dev.off()


Claus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 12 00:04:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jul 2001 01:04:38 +0200
Subject: [Rd] Extra lines when bty="n" (PR#1021)
In-Reply-To: ce@biostat.ku.dk's message of "Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)"
References: <200107112123.XAA18465@pubhealth.ku.dk>
Message-ID: <x21ynn2hkp.fsf@blueberry.kubism.ku.dk>

ce@biostat.ku.dk writes:

> For some reason two extra lines keep appearing 
> when making graphics with no box, bty="n" (a vertical line
> along the leftmost side of the graphics region and a horizonal 
> line along the bottom side). The lines are very visible if the 
> plot is saved as a postscript file and is later included in 
> a document.
> 
> Example code:
> 
> # postscript("test.ps")
> y <- rnorm(100)
> par(mar=c(0,0,0,0), bty="n")
> plot(y)
> # dev.off()

You're seeing the top of the axes, which the mar=c(0,0,0,0) doesn't
quite chop off. (try it with mar=c(1,1,1,1)). You want axes=F
rather than the bty="n" setting.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jul 12 13:53:43 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 12 Jul 2001 14:53:43 +0200 (MET DST)
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
Message-ID: <200107121253.OAA23793@pubhealth.ku.dk>


`update.packages' fails when a package with incorrect Version field is
found in R_LIBS:

> update.packages()
trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
Content type `text/plain' length 49161 bytes
opened URL
.......... .......... .......... .......... ........
downloaded 48Kb

Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
        missing value where logical needed
In addition: Warning message: 
NAs introduced by coercion 

The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
contains:

Version: 4.13-3 (Gee version 98/1/27)

which after 

b <- as.integer(strsplit(b, "[\\.-]")[[1]]) 

in `newerVersion' looks like "4 13 NA" and thows the error above. 

Torsten


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul 12 17:23:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Jul 2001 18:23:22 +0200
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
In-Reply-To: <200107121253.OAA23793@pubhealth.ku.dk>
References: <200107121253.OAA23793@pubhealth.ku.dk>
Message-ID: <15181.52986.41879.904913@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> `update.packages' fails when a package with incorrect Version field is
> found in R_LIBS:

>> update.packages()
> trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
> Content type `text/plain' length 49161 bytes
> opened URL
> .......... .......... .......... .......... ........
> downloaded 48Kb

> Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
>         missing value where logical needed
> In addition: Warning message: 
> NAs introduced by coercion 

> The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
> contains:

> ...

Thanks.  Should be fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wild@stat.auckland.ac.nz  Fri Jul 13 01:48:55 2001
From: wild@stat.auckland.ac.nz (wild@stat.auckland.ac.nz)
Date: Fri, 13 Jul 2001 02:48:55 +0200 (MET DST)
Subject: [Rd] data function (PR#1023)
Message-ID: <200107130048.CAA26613@pubhealth.ku.dk>

Full_Name: Chris Wild
Version: 1.3
OS: MacOS8.6
Submission from: (NULL) (130.216.1.6)


data() is failing to read some files.
I cannot read in:
    stanford2.rda from survival library
    veteran.rda from survival library
    gehan.rda from MASS library

Problem does not exist in Windows version

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jul 13 09:57:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Jul 2001 09:57:43 +0100
Subject: [Rd] Addition to ?formula
Message-ID: <3B4EB807.BB3BA6E5@durham.ac.uk>

Hi everyone,

May I suggest that the function "all.vars" be added to the See Also
section of ?formula (as a formula object is a call).

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jul 13 10:56:01 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 13 Jul 2001 05:56:01 -0400
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
In-Reply-To: <15181.52415.857097.57828@mithrandir.hornik.net>
References: <200107101950.VAA11054@pubhealth.ku.dk> <15181.52415.857097.57828@mithrandir.hornik.net>
Message-ID: <d2htktoljmk7gtru83c9vnvasbi820a87q@4ax.com>

On Thu, 12 Jul 2001 18:13:51 +0200, you wrote:
>
>Why is this a bug report?

I'd say it's more of a "wishlist" item than a bug report.  It's only a
bug inasmuch as the response to user error is to silently do the wrong
thing.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 11:47:54 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 06:47:54 -0400
Subject: [Rd] AnonCVS
Message-ID: <3B4ED1DA.375070A6@warnes.net>


Hi All,

I would like to use anonymous cvs, but it appears not to be working
(again?).  There was a discussion back in Jan-Feb about whether to
continue supporting it, but it seemed that Tony Rossini got it working
and the discussion left off there.  Did someone decide to disable it, or
is it just not working properly?

Here's the details:


$ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login 
(Logging in to anoncvs@cvs.r-project.org)
CVS password: anoncvs

/home/rcvs/src: no such repository
cvs login: authorization failed: server cvs.r-project.org rejected
access to /home/rcvs/src for user anoncvs


BTW, I would like to see anonymous CVS continue to be available.  I
would like to use it to have an easy mechanism for creating patches that
are up-to date.  (IE, "cvs diff file.c")

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 12:01:56 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 07:01:56 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4ED524.244367EC@warnes.net>


Hi all,

I've just been working with a piece of fortran code (Leo Breiman's
random forest code) that needs a lot of arguments.  When I use .Fortran,
I get the message 'too many arguments in foreign function call'. 
Neither the help page for .Fortran (actually Foreign) nor "Writing R
Extensions" explains how many arguments are too many.  

Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
65.  

While it is possible to work around this limitation, it seems
arbitrary.  I propose increasing the arbitrary value to 255 and adding
appropriate documentation to the Foreign manual page.

Any objections/comments?

-Greg

-----Patch-Starts-Here------

diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
R-1.3.0-patched/src/library/base/man/Foreign.Rd
--- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
 \arguments{
   \item{name}{a character string giving the name of a C function or
     Fortran subroutine.}
-  \item{\dots}{arguments to be passed to the foreign function.}
+  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
     \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
     passed on to the foreign function.  If \code{FALSE}, the presence
of
Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
diff -ur R-1.3.0-orig/src/main/dotcode.c
R-1.3.0-patched/src/main/dotcode.c
--- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
+++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
@@ -372,7 +372,7 @@
     return args;
 }
 
-#define MAX_ARGS 65
+#define MAX_ARGS 255
 
 SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
 {
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Jul 13 12:27:36 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 13 Jul 2001 07:27:36 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <3B4ED524.244367EC@warnes.net>; from greg@warnes.net on Fri, Jul 13, 2001 at 07:01:56AM -0400
References: <3B4ED524.244367EC@warnes.net>
Message-ID: <20010713072736.C20268@jessie.research.bell-labs.com>

Gregory R. Warnes wrote:
> 
> Hi all,
> 
> I've just been working with a piece of fortran code (Leo Breiman's
> random forest code) that needs a lot of arguments.  When I use .Fortran,
> I get the message 'too many arguments in foreign function call'. 
> Neither the help page for .Fortran (actually Foreign) nor "Writing R
> Extensions" explains how many arguments are too many.  
> 
> Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
> 65.  
> 
> While it is possible to work around this limitation, it seems
> arbitrary.  I propose increasing the arbitrary value to 255 and adding
> appropriate documentation to the Foreign manual page.
> 
> Any objections/comments?


Unfortunately, it isn't quite as simple as that.  The code that uses
MAX_ARGS would also need to be extended and that involves adding the
remaining cases to the switch statement in do_dotCode() and
do_dotcall() in src/main/dotcode.c There's no reason why it can't be
done.  Somebody simply has to generate the appropriate code,
presumably programmatically with a little script.  I recall this was
extended in S4, but 64 was adequate for that context.

I imagine that there are some systems limit the number of arguments
one can have to a routine.

 D.


> 
> -Greg
> 
> -----Patch-Starts-Here------
> 
> diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
> R-1.3.0-patched/src/library/base/man/Foreign.Rd
> --- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
> 12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
> Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
>  \arguments{
>    \item{name}{a character string giving the name of a C function or
>      Fortran subroutine.}
> -  \item{\dots}{arguments to be passed to the foreign function.}
> +  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
> function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
>      \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
>      passed on to the foreign function.  If \code{FALSE}, the presence
> of
> Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
> diff -ur R-1.3.0-orig/src/main/dotcode.c
> R-1.3.0-patched/src/main/dotcode.c
> --- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
> +++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
> @@ -372,7 +372,7 @@
>      return args;
>  }
>  
> -#define MAX_ARGS 65
> +#define MAX_ARGS 255
>  
>  SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
>  {
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jul 13 15:09:16 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Jul 2001 16:09:16 +0200 (MET DST)
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
Message-ID: <200107131409.QAA01600@pubhealth.ku.dk>

Not too hard to fix, the following buglet (new in 1.3.0),
but I'm about to leave for one week (of vacation)..

Here is an example (for Linux) :

  lynne{sfs}214> cd /tmp
  lynne{sfs}215> mkdir blue
  lynne{sfs}216> cd blue
  /tmp/blue
  lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

  R : Copyright 2001, The R Development Core Team
  Version 1.3.0  (2001-06-22)

  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
  Type `license()' or `licence()' for distribution details.

  R is a collaborative project with many contributors.
  Type `contributors()' for more information.

  Type `demo()' for some demos, `help()' for on-line help, or
  `help.start()' for a HTML browser interface to help.
  Type `q()' to quit R.

  > data(package = "mva")
  Data sets in package `mva':


  Harman23.cor             Harman Example 2.3
  Harman74.cor             Harman Example 7.4
  ability.cov              Ability and Intelligence Tests

  Warning message: 
  package `blue' contains no datasets in: data(package = "mva") 
  > 
-------------------

See the warning line at the very end.
It's because of the new data() feature of looking for data sets in the
current directory...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 15:29:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 07:29:20 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <3B4ED1DA.375070A6@warnes.net>
References: <3B4ED1DA.375070A6@warnes.net>
Message-ID: <87pub4oqbj.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> Hi All,

    GRW> I would like to use anonymous cvs, but it appears not to be
    GRW> working (again?).  There was a discussion back in Jan-Feb
    GRW> about whether to continue supporting it, but it seemed that
    GRW> Tony Rossini got it working and the discussion left off
    GRW> there.  Did someone decide to disable it, or is it just not
    GRW> working properly?

    GRW> Here's the details:


    GRW> $ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> anoncvs

    GRW> /home/rcvs/src: no such repository cvs login: authorization
    GRW> failed: server cvs.r-project.org rejected access to
    GRW> /home/rcvs/src for user anoncvs

This is a problem with the set up.  It's actually:
        /home/rcvs/src/

Sigh.  I'm to blame.

Greg, I'm also to blame about other things, like not getting back in
touch.  I'll be in contact about various things.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:20:50 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:20:50 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <200107131607.JAA18455@cramer.stat.ucla.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
Message-ID: <87ofqoztp9.fsf@jeeves.blindglobe.net>


(sent to r-devel, in case anyone is interested)
>>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

    JdL> Great. Which modules are available for checkout ?  --- J.

(regarding R's anon cvs archive):

R  R-manuals  R-notes

(R = the "whole thing", and is probably the only one of interest -- at
the anoncvs level, we don't have a sophisticated module structure --
in fact, if there is one for the real archive, I don't know about it).

Looks like it nearly in sync with the main mirror, only 30 minutes of
of (a mirror of the???) main archive.

The modules and the timing of the sync I know; the rest is strictly
conjecture. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plastictyranny@aol.com  Fri Jul 13 17:26:08 2001
From: plastictyranny@aol.com (plastictyranny@aol.com)
Date: Fri, 13 Jul 2001 12:26:08 EDT
Subject: [Rd] AnonCVS
Message-ID: <d7.920102a.28807b20@aol.com>

Hey whats cvs?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:30:07 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:30:07 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <d7.920102a.28807b20@aol.com>
References: <d7.920102a.28807b20@aol.com>
Message-ID: <87d774zt9s.fsf@jeeves.blindglobe.net>

>>>>> "p" == plastictyranny  <plastictyranny@aol.com> writes:

    p> Hey whats cvs?

See http://cvshome.org/



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 17:30:29 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 12:30:29 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4F2225.C0311F18@warnes.net>

Duncan Templ Lang wrote:
> 
> Gregory R. Warnes wrote: 
> > 
> > Hi all, 
> > 
> > 
> > Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to 
> > 65. 
> > 
> > While it is possible to work around this limitation, it seems 
> > arbitrary. I propose increasing the arbitrary value to 255 and adding 
> > appropriate documentation to the Foreign manual page. 
> > 
> > Any objections/comments? 
> 
> Unfortunately, it isn't quite as simple as that. The code that uses 
> MAX_ARGS would also need to be extended and that involves adding the 
> remaining cases to the switch statement in do_dotCode() and 
> do_dotcall() in src/main/dotcode.c There's no reason why it can't be 
> done. Somebody simply has to generate the appropriate code, 
> presumably programmatically with a little script. I recall this was 
> extended in S4, but 64 was adequate for that context. 
> 
> I imagine that there are some systems limit the number of arguments 
> one can have to a routine. 
>

OK.  I wrote a little R script to generate the necessary case
statements.  Since these code chunks are rather large (7140 lines
each!), I modifed src/main/dotcode to #include the case statements from
the (new) files /src/main/dotcode_cases.c and  /src/main/dotcall_cases.c
.   I'm not sure that this is the best way to do this, but including
these code chunks in dotcode.c makes it unmanagable.  

While I was making and (this time) testing the changes, I noticed that
one declaration had the value 65 hardcoded rather than using MAX_ARGS.  

I've uploaded a tgz file containing the patch and the R script that
generated the case statement/call code to
ftp::/cran.r-project.org/incoming/dotcall_255.tgz

With this patch applied, the fortran subroutin I'm using now works fine
with 85 arguments.  I imagine that it should be tested on several
platforms to ensure that there isn't (as Duncan menioned) that a problem
with compilers/platforms restricting the number of arguments.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jul 13 17:59:12 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Jul 2001 11:59:12 -0500
Subject: [Rd] AnonCVS
In-Reply-To: <87ofqoztp9.fsf@jeeves.blindglobe.net>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <6rwv5cahpb.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 

Are there reasons for using anonymous cvs when anonymous rsync access
is available?  Quite frankly I don't understand why one would use
anonymous cvs instead of anonymous rsync.

(I do realize that with anonymous cvs you can read the CVS logs and
you can't do that with anonymous rsync but we make the logs available
in another form on developer.r-project.org.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jul 13 18:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jul 2001 19:06:12 +0200
Subject: [Rd] AnonCVS
In-Reply-To: rossini@blindglobe.net's message of "13 Jul 2001 09:20:50 -0700"
References: <200107131607.JAA18455@cramer.stat.ucla.edu> <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <x2hewgsqrf.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> (sent to r-devel, in case anyone is interested)
> >>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:
> 
>     JdL> Great. Which modules are available for checkout ?  --- J.
> 
> (regarding R's anon cvs archive):
> 
> R  R-manuals  R-notes
> 
> (R = the "whole thing", and is probably the only one of interest -- at
> the anoncvs level, we don't have a sophisticated module structure --
> in fact, if there is one for the real archive, I don't know about it).

[Mostly modules of historical interest, some modules relating to
the web pages on www.r-project.org and developer.r-project.org, course
materials, and the foreign package]

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 
> 
> best,
> -tony

Before people start doing this too much, we should probably get some
guidelines written down. In particular, there are quite a few things
done with CVS tags and a raw checkout of the R module might not be
what you want   .

[ assuming CVSROOT=:pserver:anoncvs@cvs.r-project.org:/home/rcvs/src/ ]

cvs co -r 1-3 R         # gives version 1.3.0
                        # earlier versions are R-1-2-3 etc.
    
cvs co -r 1-releases R  # gives the pre-release of 1.4.0
cvs co -r 1-3-patches R # gives the patched current version (1.3.1pre)

With no tag you get the bleeding-edge/large-changes version that
should eventually become 2.0.0. This was recently opened so there's
not really anything there yet.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 18:25:15 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 10:25:15 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <6rwv5cahpb.fsf@franz.stat.wisc.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
 <6rwv5cahpb.fsf@franz.stat.wisc.edu>
Message-ID: <87wv5cyc5g.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Looks like it nearly in sync with the main mirror, only 30
    >> minutes of of (a mirror of the???) main archive.
    >> 
    >> The modules and the timing of the sync I know; the rest is
    >> strictly conjecture.

    DB> Are there reasons for using anonymous cvs when anonymous rsync
    DB> access is available?  Quite frankly I don't understand why one
    DB> would use anonymous cvs instead of anonymous rsync.

Reason 1: to handle local changes on a bleeding-edge that one wants to
keep for various reasons, but which would be silly to send in as a
patch (you can then merge in upstream changes onto the local copy,
etc).  I've done that twice now with R, and assume that it'll happen
again.  Does rsync tell you which files have conflicts and do the
merge?

Reason 2: I can remember "cvs update" for a subdirectory; I can't
recall the incantation for rsync which would do the same thing.
(sure, it's 5 minutes of reading the manuals, I'd assume, but I don't
have that time).

Note that both of the above are incredibly valid for omegahat, less so
for R (2x isn't much, compared to the on-going major mods I've got
for omegahat).

Maybe more to the point: are there any reasons for sane
users/developers to do this?

:-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:08:13 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:08:13 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713180006.6FD3D36F9@sitemail.everyone.net>
References: <20010713180006.6FD3D36F9@sitemail.everyone.net>
Message-ID: <87sng0ya5u.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Its a bit annoying to specify the "-d ..." every time, but
    GRW> it'll work until you have time to fix it.

Fixed, but please verify.  
        
        /home/rcvs/src

should work, now (no trailing "/").

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:57:22 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:57:22 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713184728.1D63F36F9@sitemail.everyone.net>
References: <20010713184728.1D63F36F9@sitemail.everyone.net>
Message-ID: <87lmlsy7vx.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Now I get an entirely different error: warnes@haplo:~/R/Rcvs$
    GRW> cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> cvs [login aborted]: connect to cvs.r-project.org:2401
    GRW> failed: Connection refused

Fixed and verified, this time.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murphyk@cs.berkeley.edu  Fri Jul 13 23:10:39 2001
From: murphyk@cs.berkeley.edu (murphyk@cs.berkeley.edu)
Date: Sat, 14 Jul 2001 00:10:39 +0200 (MET DST)
Subject: [Rd] ordered factors in tree package - bug? (PR#1025)
Message-ID: <200107132210.AAA03388@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I am new to R, and didn't know which list to send this to, since it is a
bug report about a package, not about core R...

I have created a regression tree using 4 predictors: 3 are unordered
(binary) predictors, and the last is a date (integer), which I declare
to be an ordered factor. However, the tree treats the date as if it were
un-ordered, splitting into non-consecutive subsets.

My code

dat <- read.table("/home/cs/murphyk/R/Eugene/102.dat", header=TRUE)
dat$machine <- factor(dat$machine)
dat$TIM <- factor(dat$TIM)
dat$lid <- factor(dat$lid)
#dat$date <- factor(dat$date, ordered=TRUE)
dat$date <- ordered(dat$date)
tr <- tree(TRES ~ ., dat)

produces

 1) root 100 0.149300 0.2345  
   2) TIM: 111 47 0.020650 0.2011  
     4) date: 9,11 11 0.002673 0.1845 *
     5) date: 6,7,8,10,13,14,15,16,17,18,19 36 0.014060 0.2061 *
   3) TIM: 222 53 0.029490 0.2642  
     6) date: 6,7,11,12,14,15,18,19 28 0.010670 0.2539  
      12) lid: A 6 0.001350 0.2350 *
      13) lid: B 22 0.006582 0.2591 *
     7) date: 8,9,10,13,16,17 25 0.012620 0.2756  
      14) machine: 101 14 0.005750 0.2850 *
      15) machine: 102 11 0.004055 0.2636 *

and yet

> dat$date
  [1] 6  6  6  6  6  7  7  7  7  7  7  7  8  8  8  9  9  9  9  9  9  9 
9  9  10
 [26] 10 10 10 10 10 11 11 11 11 11 11 11 11 12 12 12 13 13 13 13 13 13
13 13 13
 [51] 13 13 14 14 14 14 14 14 14 15 15 15 15 15 15 15 15 15 15 16 16 16
16 16 16
 [76] 16 16 17 17 17 17 17 17 17 17 17 17 17 17 17 18 18 18 18 18 19 19
19 19 19
Levels:  6 < 7 < 8 < 9 < 10 < 11 < 12 < 13 < 14 < 15 < 16 < 17 < 18 < 19 
> is.ordered(dat$date)
[1] TRUE



Also, how do I deal with dates of the form dd/mm/yy, instead of just
integers? (In the above file, I used perl to extract the day, since I
new month and year were constant.)

I have attached the text file 102.dat, so you can easily reproduce the
above bug. I am using R 1.2.3 on linux. For future reference, is it
considered bad form to send attachments?


Kevin
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii;
 name="102.dat"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="102.dat"

date machine TIM lid TRES
6 101 222 B 0.24
6 102 222 B 0.26
6 102 111 B 0.20
6 102 222 B 0.24
6 101 111 A 0.20
7 102 111 A 0.20
7 101 111 B 0.25
7 102 222 B 0.27
7 101 111 A 0.18
7 102 111 A 0.18
7 101 222 B 0.28
7 102 222 B 0.24
8 102 111 B 0.21
8 101 222 B 0.25
8 101 222 B 0.29
9 101 222 B 0.28
9 101 111 A 0.17
9 102 222 A 0.27
9 101 111 A 0.21
9 102 111 A 0.16
9 101 111 A 0.21
9 102 111 A 0.18
9 101 111 A 0.18
9 102 111 A 0.18
10 102 222 B 0.30
10 101 222 B 0.29
10 102 222 A 0.25
10 101 222 B 0.29
10 102 222 B 0.23
10 102 111 A 0.20
11 102 222 B 0.24
11 101 111 A 0.17
11 102 111 A 0.18
11 102 222 A 0.26
11 102 111 A 0.20
11 102 222 B 0.28
11 101 111 A 0.19
11 102 222 A 0.23
12 101 222 B 0.26
12 101 222 B 0.24
12 102 222 B 0.26
13 101 222 B 0.27
13 102 222 B 0.28
13 102 222 B 0.26
13 101 111 A 0.20
13 101 111 A 0.20
13 102 222 B 0.27
13 102 111 A 0.19
13 102 222 A 0.24
13 101 111 A 0.24
13 101 222 B 0.30
13 102 222 B 0.25
14 101 111 B 0.21
14 102 222 B 0.25
14 102 222 B 0.28
14 101 222 B 0.23
14 102 111 A 0.21
14 101 111 A 0.19
14 101 222 B 0.26
15 102 222 A 0.25
15 102 111 A 0.21
15 101 222 B 0.28
15 102 222 A 0.22
15 101 111 A 0.23
15 102 222 A 0.23
15 101 222 B 0.27
15 102 222 B 0.23
15 101 222 B 0.27
15 102 222 B 0.28
16 101 222 A 0.28
16 101 222 B 0.27
16 101 111 A 0.20
16 101 222 B 0.34
16 101 222 B 0.27
16 102 111 A 0.24
16 102 111 A 0.21
16 102 111 B 0.17
17 102 111 A 0.20
17 101 111 A 0.20
17 102 111 A 0.17
17 101 222 A 0.29
17 102 222 B 0.27
17 101 222 B 0.27
17 102 111 B 0.22
17 102 222 B 0.28
17 101 111 A 0.20
17 101 111 A 0.20
17 101 111 B 0.20
17 101 222 B 0.30
17 101 111 A 0.22
18 101 222 B 0.28
18 101 111 B 0.26
18 101 111 A 0.18
18 102 111 B 0.21
18 101 222 A 0.22
19 101 111 B 0.21
19 102 111 A 0.21
19 101 222 B 0.26
19 101 111 A 0.22
19 102 111 A 0.20

--------------FF3F4C9902BE262E184667B2--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 10:40:53 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 11:40:53 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <200107131409.QAA01600@pubhealth.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
Message-ID: <15184.5029.853899.526774@mithrandir.hornik.net>

>>>>> maechler  writes:

> Not too hard to fix, the following buglet (new in 1.3.0),
> but I'm about to leave for one week (of vacation)..

> Here is an example (for Linux) :

>   lynne{sfs}214> cd /tmp
>   lynne{sfs}215> mkdir blue
>   lynne{sfs}216> cd blue
>   /tmp/blue
>   lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

>   R : Copyright 2001, The R Development Core Team
>   Version 1.3.0  (2001-06-22)

>   R is free software and comes with ABSOLUTELY NO WARRANTY.
>   You are welcome to redistribute it under certain conditions.
>   Type `license()' or `licence()' for distribution details.

>   R is a collaborative project with many contributors.
>   Type `contributors()' for more information.

>   Type `demo()' for some demos, `help()' for on-line help, or
>   `help.start()' for a HTML browser interface to help.
>   Type `q()' to quit R.

>> data(package = "mva")
>   Data sets in package `mva':


>   Harman23.cor             Harman Example 2.3
>   Harman74.cor             Harman Example 7.4
>   ability.cov              Ability and Intelligence Tests

>   Warning message: 
>   package `blue' contains no datasets in: data(package = "mva") 
>> 
> -------------------

> See the warning line at the very end.  It's because of the new data()
> feature of looking for data sets in the current directory...

Don't think that this is a new feature ...

Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
in the working directory needs rethinking.  Do we really want this?  If
so, then e.g. we need to fix warnings if there is a data dir but no
index (the working dir is not simply a `package' ...).

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jul 14 15:20:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jul 2001 16:20:27 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: Kurt Hornik's message of "Sat, 14 Jul 2001 11:40:53 +0200"
References: <200107131409.QAA01600@pubhealth.ku.dk> <15184.5029.853899.526774@mithrandir.hornik.net>
Message-ID: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Don't think that this is a new feature ...
> 
> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
> in the working directory needs rethinking.  Do we really want this?  If
> so, then e.g. we need to fix warnings if there is a data dir but no
> index (the working dir is not simply a `package' ...).

Yup. (I have one of those in one of my builddirs, so get reminded
about that from time to time. Just now I can't seem to reproduce it
though.)

I think we do want this feature but then I think I proposed it in the
first place.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 18:46:05 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 19:46:05 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
 <15184.5029.853899.526774@mithrandir.hornik.net>
 <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
Message-ID: <15184.34141.300494.134280@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> Don't think that this is a new feature ...
>> 
>> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
>> in the working directory needs rethinking.  Do we really want this?  If
>> so, then e.g. we need to fix warnings if there is a data dir but no
>> index (the working dir is not simply a `package' ...).

> Yup. (I have one of those in one of my builddirs, so get reminded
> about that from time to time. Just now I can't seem to reproduce it
> though.)

> I think we do want this feature but then I think I proposed it in the
> first place.

Are you happy with the current rules?  If so, I could modify the code to
be more reasonable with its warnings ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 21:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 22:52:51 +0200
Subject: [Rd] unbalanced braces in Rd files
Message-ID: <15184.45347.269756.435369@mithrandir.hornik.net>

Following requests by Duncan Murdoch and Paul Gilbert, I have included
some code for testing for unbalanced braces in Rd files into R CMD
check.  

Out of 147 packages on CRAN it found problems in 50 packages.  The ones
I looked into all were correctly identified, so I hope the code works
reasonably well ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jul 15 19:34:02 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jul 2001 13:34:02 -0500
Subject: [Rd] Access to cran.us.r-project.org
Message-ID: <6relrivy79.fsf@franz.stat.wisc.edu>

I am the maintainer of one of the CRAN mirrors in the U.S.,
cran.us.r-project.org.  It appears that this site has been
inaccessible since Friday.

This has me puzzled because I can connect to the same machine through
ssh and I can see that the http daemon (apache) is running.  In fact I
can make an http connection from this machine to this machine and from
other machines on any of our subnets to this machine.

My only theory is that something has changed at the interface between
our network and external networds so that it no longer forwards
incoming packets to port 80.  I can't check this easily myself because
my outside connection is from a computer running Windows and I don't
know anything about network diagnostics under Windows.

Could someone tell me 
 a) Does this site indeed appear to be down?
 b) If you try to trace the route to this site, where does the
 roadblock appear to be?
 c) Is there a way of finding out if the problem is specific to port
 80?

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Jul 15 19:46:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 Jul 2001 11:46:14 -0700
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: <6relrivy79.fsf@franz.stat.wisc.edu>
References: <6relrivy79.fsf@franz.stat.wisc.edu>
Message-ID: <8766cut4i1.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
    DB> cran.us.r-project.org.  It appears that this site has been
    DB> inaccessible since Friday.

    DB> This has me puzzled because I can connect to the same machine
    DB> through ssh and I can see that the http daemon (apache) is
    DB> running.  In fact I can make an http connection from this
    DB> machine to this machine and from other machines on any of our
    DB> subnets to this machine.

    DB> My only theory is that something has changed at the interface
    DB> between our network and external networds so that it no longer
    DB> forwards incoming packets to port 80.  I can't check this
    DB> easily myself because my outside connection is from a computer
    DB> running Windows and I don't know anything about network
    DB> diagnostics under Windows.

    DB> Could someone tell me a) Does this site indeed appear to be
    DB> down?  b) If you try to trace the route to this site, where
    DB> does the roadblock appear to be?  c) Is there a way of finding
    DB> out if the problem is specific to port 80?

Traceroute gets there. 

16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
108.532 ms
17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
109.648 ms  109.921 ms
18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
109.904 ms
19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
ms
20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
112.534 ms
21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
111.896 ms
root@jeeves:~
# # command used:    traceroute cran.us.r-project.org



telnet'ing to port 80 "hangs".  Lynx doesn't work either.

I could nmap it, but don't want to be viewed as a hacker... (I'd tell
you the ip-address of the machine in advance).

I think it might be a local config problem?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 00:12:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 01:12:54 +0200
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: rossini@blindglobe.net's message of "15 Jul 2001 11:46:14 -0700"
References: <6relrivy79.fsf@franz.stat.wisc.edu> <8766cut4i1.fsf@jeeves.blindglobe.net>
Message-ID: <x2y9pp947d.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:
> 
>     DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
>     DB> cran.us.r-project.org.  It appears that this site has been
>     DB> inaccessible since Friday.
> 
>     DB> This has me puzzled because I can connect to the same machine
>     DB> through ssh and I can see that the http daemon (apache) is
>     DB> running.  In fact I can make an http connection from this
>     DB> machine to this machine and from other machines on any of our
>     DB> subnets to this machine.
> 
>     DB> My only theory is that something has changed at the interface
>     DB> between our network and external networds so that it no longer
>     DB> forwards incoming packets to port 80.  I can't check this
>     DB> easily myself because my outside connection is from a computer
>     DB> running Windows and I don't know anything about network
>     DB> diagnostics under Windows.
> 
>     DB> Could someone tell me a) Does this site indeed appear to be
>     DB> down?  b) If you try to trace the route to this site, where
>     DB> does the roadblock appear to be?  c) Is there a way of finding
>     DB> out if the problem is specific to port 80?
> 
> Traceroute gets there. 
> 
> 16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
> 108.532 ms
> 17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
> 109.648 ms  109.921 ms
> 18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
> 109.904 ms
> 19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
> ms
> 20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
> 112.534 ms
> 21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
> 111.896 ms
> root@jeeves:~
> # # command used:    traceroute cran.us.r-project.org
> 
> 
> 
> telnet'ing to port 80 "hangs".  Lynx doesn't work either.
> 
> I could nmap it, but don't want to be viewed as a hacker... (I'd tell
> you the ip-address of the machine in advance).
> 
> I think it might be a local config problem?

developer.r-project.org is equally dead. For the same reason of
course. It *is* possible to connect locally, e.g.

lynx developer.r-project.org

works fine when issued on Franz. The apache server seems to have been
reset at 06:25 this morning and also at 11.19 yesterday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Mon Jul 16 07:52:14 2001
From: henrikb@braju.com (Henrik Bengtsson)
Date: Sun, 15 Jul 2001 23:52:14 -0700
Subject: [Rd] Function calls and UseMethod.
Message-ID: <KKEGJOGBELBHDIKPINBMCEHFCFAA.henrikb@braju.com>

Maybe the following have already been discussed, if not...

BACKGROUND: I am writing a class which should have the method get(). For
this (and a lot of other things) to work I have to redefine the default
get() like this:

if (!exists("get.default")) get.default <- get;
get <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("get", obj, ...);
}

and still I am not sure if this is bullet proof. Maybe someone else, i.e. in
a previously loaded library, has already modified the get() method.

SUGGESTION I: Would it be possible to have *all* function calls by default
using the UseMethod approach? What I suggest results in that there is no
need for people to actually write the UseMethod function wrappers, but it
should be done within [R]. Example:

myHelloWorld.default <- function() {
  cat("Hello world!\n");
}

and this should be able to be called just as

myHelloWorld()

without having to explicitly write

myHelloWorld <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("myHelloWorld", obj, ...)
}

I think this could clean up a lot of the "mess" of overloading and
redefining functions. It would also definitely remove on risk of overwriting
allready existing functions. I can see some problems how to implement this;
for instance, how would [R] know that myHelloWorld is a function call? I
know too little about the internal structure.

SUGGESTION II: If the first approach is not possible, what about "cleaning
up" the [R] code (base etc) and always write like get.default declarations
and not just get? Is there a reason not to?

Thanks

Henrik Bengtsson

150 Panoramic Way
Berkeley, CA 94704
(510) 647-3572
h e n r i k b @ b r a j u . c o m

PS. For some reason I mailed this message to r-announce-request@lists...
before. Sorry about that. DS.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 10:35:05 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)
Subject: [Rd] polyroot() (PR#751)
Message-ID: <200107160935.LAA10917@pubhealth.ku.dk>

In a bug report from Nov.28 2000, Li Dongfeng writes:

-----
I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.
----- (end Dongfeng)

This was analyzed somewhat, and it was found that polyroot() does
work, sort of, for lower degree polynomials, but becomes numerically
unstable when the degree is large. The exact result is
compiler-dependent, but the problem is still with us:

> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
 [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
[15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
[22] 1.8989308 1.9040403 1.9357768 1.9907273

It has been nagging us from the bug repository ever since.

Last night I got the bright idea of feeding that polynomial to the
TOMS-419 routine off of Netlib, and got results that agree with the
ones stated for S-PLUS. Now this *is* the algorithm that the one in R
is supposed to be a C transcription of, so there would seem to be a
transcription error somewhere...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Mon Jul 16 14:06:18 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Mon, 16 Jul 2001 15:06:18 +0200 (MET DST)
Subject: [Rd] make check failure on SGI-IRIX6.5 (PR#1026)
Message-ID: <200107161306.PAA13252@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched version
OS: SGI's IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


During the 'make check' step of the installation procedure, I had the following
error messages


> make test > rapportMakeTest
/bin/sh: /usr/local/bin//perl: arg list too long

----------
I've seen that already in my former life in the software industry.
It seems the SGI sh shell is rather more limitated by the length
of arg lists than it's linux conterpart (I do not know about the other OSs).

----------
>gmake[3]: *** [modreg-Ex.Rout] Bus error (core dumped)
gmake[3]: *** Deleting file `modreg-Ex.Rout'
gmake[2]: *** [test-Examples] Error 2
gmake[1]: *** [test-Examples] Error 2
gmake: *** [test-all-basics] Error 1
----------
I cannot (or rather I do not dare) make any hypothesis about this one...



Cheers,






Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 16 14:36:47 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Jul 2001 15:36:47 +0200
Subject: [Rd] forwarded message from Inge Monika
Message-ID: <15186.60911.557600.739@mithrandir.hornik.net>


--Hipsgkxbeg
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

This one was sent privately to me.


--Hipsgkxbeg
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from tuvok.kom.tuwien.ac.at (tuvok.kom.tuwien.ac.at [192.35.241.66])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id WAA28632
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:30:30 +0200
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by tuvok.kom.tuwien.ac.at (8.11.3/8.11.3) with ESMTP id f6DKY9i22708
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:34:09 +0200 (MEST)
Received: from postal1.lbl.gov (really [128.3.7.82]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15L9ea-000JL3C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 15:35:12 -0500 (CDT) 
Received: from SpamWall.lbl.gov (localhost [127.0.0.1])
	by postal1.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZA216368
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:11 -0700 (PDT)
Received: from lbl.gov (bugari.lbl.gov [131.243.225.136])
	by SpamWall.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZ9A16349
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:09 -0700 (PDT)
Message-ID: <3B4F5B85.76DDABF1@lbl.gov>
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-UIDL: 696a8ba40a8612f22281868799c93677
From: Inge Monika <imonika@lbl.gov>
Sender: imonika@lbl.gov
To: Kurt.Hornik@r-project.org
Subject: R memory problem
Date: Fri, 13 Jul 2001 13:35:18 -0700

Dear Kurt,

My name is Inge Monika. I'm currently using R version 1.3.0 to do
clustering analysis for my data set. My data set consists of 7 variables
and 21120 observations. Now, I have trouble increasing my vector size to
do the "emclust" function for my data. I only could increase my vector
size up to 2047M which is still too small. I keep getting an error
message "cannot allocate vector of size 82Kb" after I applied the
emclust function.
Could you tell me what's that mean?
And how can I solve that problem? My system administrator already
provide me with 2.5G swap space, but still I cannot increase my vector
size for more than 2047M.

I hope you could help me to solve this problem.
Thank you very much for your time and attention. I hope to hear from you
soon.

Sincerely,
Inge Monika


--Hipsgkxbeg--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Mon Jul 16 15:50:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 10:50:25 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>


I would like to create an R package that will depend on the ability to use
more than 65 parameters.  Would it be reasonable to expect this patch (or
something equivalent) to be part of , say R > 1.3.1 ?

Would it help if I submit an official bug report?

-Greg

 
  From: Gregory R. Warnes [mailto:greg@warnes.net]
  > 
  > Duncan Templ Lang wrote:
  > > 
  > > Gregory R. Warnes wrote: 
  > > > 
  > > > Hi all, 
  > > > 
  > > > 
  > > > Looking at the code in src/main/dotcode.c, I see that 
  > MAX_ARGS is set to 
  > > > 65. 
  > > > 
  > > > While it is possible to work around this limitation, it seems 
  > > > arbitrary. I propose increasing the arbitrary value to 
  > 255 and adding 
  > > > appropriate documentation to the Foreign manual page. 
  > > > 
  > > > Any objections/comments? 
  > > 
  > > Unfortunately, it isn't quite as simple as that. The code 
  > that uses 
  > > MAX_ARGS would also need to be extended and that involves 
  > adding the 
  > > remaining cases to the switch statement in do_dotCode() and 
  > > do_dotcall() in src/main/dotcode.c There's no reason why 
  > it can't be 
  > > done. Somebody simply has to generate the appropriate code, 
  > > presumably programmatically with a little script. I 
  > recall this was 
  > > extended in S4, but 64 was adequate for that context. 
  > > 
  > > I imagine that there are some systems limit the number of 
  > arguments 
  > > one can have to a routine. 
  > >
  > 
  > OK.  I wrote a little R script to generate the necessary case
  > statements.  Since these code chunks are rather large (7140 lines
  > each!), I modifed src/main/dotcode to #include the case 
  > statements from
  > the (new) files /src/main/dotcode_cases.c and  
  > /src/main/dotcall_cases.c
  > .   I'm not sure that this is the best way to do this, but including
  > these code chunks in dotcode.c makes it unmanagable.  
  > 
  > While I was making and (this time) testing the changes, I 
  > noticed that
  > one declaration had the value 65 hardcoded rather than 
  > using MAX_ARGS.  
  > 
  > I've uploaded a tgz file containing the patch and the R script that
  > generated the case statement/call code to
  > ftp::/cran.r-project.org/incoming/dotcall_255.tgz
  > 
  > With this patch applied, the fortran subroutin I'm using 
  > now works fine
  > with 85 arguments.  I imagine that it should be tested on several
  > platforms to ensure that there isn't (as Duncan menioned) 
  > that a problem
  > with compilers/platforms restricting the number of arguments.
  > 
  > -Greg
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-devel mailing list -- Read 
  > http://www.ci.tuwien.ac.at/~hornik/R/R-  > FAQ.html
  > Send 
  > "info", "help", or "[un]subscribe"
  > (in the 
  > "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
  > _._._._._._._._._._
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Jul 16 16:38:35 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Jul 2001 11:38:35 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
Message-ID: <cg26ltsuvfolq5qttamuifafiub2ttlbbk@4ax.com>

On Mon, 16 Jul 2001 10:50:25 -0400, you wrote in message
<5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>:

>
>I would like to create an R package that will depend on the ability to use
>more than 65 parameters.  Would it be reasonable to expect this patch (or
>something equivalent) to be part of , say R > 1.3.1 ?

People are slow to upgrade, so you might be better off in the short
run to somehow reduce the number of parameters below 65.  For example,
write a wrapper function that groups a number of scalar parameters
into one vector.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 17:43:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 18:43:18 +0200
Subject: [Rd] polyroot() (PR#751)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)"
References: <200107160935.LAA10917@pubhealth.ku.dk>
Message-ID: <x2k8189655.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

> In a bug report from Nov.28 2000, Li Dongfeng writes:
> 
> -----
> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.
> ----- (end Dongfeng)
> 
> This was analyzed somewhat, and it was found that polyroot() does
> work, sort of, for lower degree polynomials, but becomes numerically
> unstable when the degree is large. The exact result is
> compiler-dependent, but the problem is still with us:
> 
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
>  [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
> [15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
> [22] 1.8989308 1.9040403 1.9357768 1.9907273
> 
> It has been nagging us from the bug repository ever since.
> 
> Last night I got the bright idea of feeding that polynomial to the
> TOMS-419 routine off of Netlib, and got results that agree with the
> ones stated for S-PLUS. Now this *is* the algorithm that the one in R
> is supposed to be a C transcription of, so there would seem to be a
> transcription error somewhere...

Oops, something went wrong in the copying from the original report.
The test case is

 sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,
                   0,0,0,0,0,0,0,0,0,1,-2,1))))
                                          ^
                                        Fell out.

Anyways, the bug is fixed now. Here's the patch if anyone is in a
hurry:

$ cvs diff -u src/appl/cpoly.c 
Index: src/appl/cpoly.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/appl/cpoly.c,v
retrieving revision 1.23
diff -u -r1.23 cpoly.c
--- src/appl/cpoly.c    26 Apr 2001 15:28:35 -0000      1.23
+++ src/appl/cpoly.c    16 Jul 2001 16:33:59 -0000
@@ -646,7 +646,7 @@
 
     e = hypot(qr[0], qi[0]) * m_re / (a_re + m_re);
     for (i=0; i < n; i++)
-       e *= (ms + hypot(qr[i], qi[i]));
+       e = e*ms + hypot(qr[i], qi[i]);
 
     return e * (a_re + m_re) - mp * m_re;
 }
  
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jul 16 23:59:49 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 17 Jul 2001 10:59:49 +1200
Subject: [Rd] Re: argument ordering (was <blank>)
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
Message-ID: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>

Hi


---snip---
I am trying to change the number of the ticks on each axis, but every time I
can not succeed and receive the error message shown below even I use the
default values:

>plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
   Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
:
        location and label lengths differ, 6 != 3
---snip---


The problem is that the "lab" parameter is being passed down (via plot.ts)
to axis in a "..." argument, but it is being matched to the "labels"
argument in axis().

In other words, axis() thinks you are saying "labels=c(5, 5, 7)".   This is
not your fault;  it is an unfortunate interaction between partial matching
of argument names and the "..." argument.

A simple workaround would be ...

    op <- par(lab=c(5, 5, 7)
    plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
    par(op)

... a more long-term solution will require some more thought ...

[to R-devel:

    (i) could put the labels argument at the end of the list -- i.e.,
axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
using "lab" as an abbreviation for "labels" would then get consumed as a
par() setting (?)

    (ii) could put explicit "lab" argument in the list too -- i.e.,
axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

    (iii) ... ?]

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:30:26 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:30:26 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>


  From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
  > 
  > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
  > 
  > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
  > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
  > >   > >
  > >   > > I would like to create an R package that will depend on
  > >   > > the ability to use
  > >   > > more than 65 parameters.  Would it be reasonable to expect
  > >   > > this patch (or
  > >   > > something equivalent) to be part of , say R > 1.3.1 ?
  > >   >
  > >   > People are slow to upgrade, so you might be better 
  > >   > off in the short
  > >   > run to somehow reduce the number of parameters below 65.
  > >   > For example,
  > >   > write a wrapper function that groups a number of 
  > >   > scalar parameters
  > >   > into one vector.
  > >
  > > Actually, the whole point of the patch was to get out of 
  > > this.  I want to keep the code as close to what was written 
  > > by the original author and as
  > > simple as possible...
  > 
  > 
  > Sorry, but I don't see that.  You want to write the wrapper 
  > in R?  Why is
  > it not as simple to write it in C?  

It is, in fact *not* as simple to write it in C.  Now the user must go from
2 languages (R and FORTRAN) to 3.  

  > I really don't see the need to remove
  > the limitation in R (or even to have it as high as 65) 
  > since R now has
  > .External() which allows an unlimited list of arguments to 
  > be passed to C
  > code.  I can't believe that the natural R representation is 
  > 85 separate
  > objects, 

No the actual R representation isn't anywhere near 85 separate objects.  The
actual R representation is more like 10 objects.  The point is that existing
FORTRAN code---which is used for R, S-Plus, and for a stand alone
program---makes use of some 60 objects which need to be dynamically sized,
hence the other 25 parameters specifying object sizes.  Indeed many of these
objects are merely 'scratch space' for the code to work in.  Still, its
easier for the user to allocate these in R (and have R manage the memory)
than to write the equivalent code in C. 

  > so the natural way looks like a C wrapper 
  > translating between R
  > objects and Fortran pointers.  You can even copy selectively.
  > 
  > The argument is that new code should probably be using .Call (if S
  > compatibility is relevant) or .External rather than .C, at 
  > least provided
  > that a C wrapper is feasible.  Those interfaces seem very 
  > much under-used.
  > (Including by me, for S3-compatibility reasons.)

Brian, do you really expect everyone to get in the habit of writing C code
to translate R SEXP into appropriate C or Fortran objects?   For the large
number of cases where the objects to be passed to and from C/Fortran are
simple scalars and vectors it really makes sense to keep the code to do the
translation in a standard library routine like do_dotcode().  This keeps the
bugs down to a minimum and makes it as easy as possible for people to
interface code.

All I suggested doing was removing the arbitrary restriction to <= 65
parameters.  I even provided the code.  What's the problem?

  > 
  > -- 
  > Brian D. Ripley,                  ripley@stats.ox.ac.uk
  > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
  > University of Oxford,             Tel:  +44 1865 272861 (self)
  > 1 South Parks Road,                     +44 1865 272860 (secr)
  > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
  > 
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:52:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:52:30 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC7B@groexmbcr02.pfizer.com>

  > From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
  > 
  > Greg,
  >   you might be better off writing a wrapper,
  >    
  >   R->foo where foo has less than 65 args and does nothing more than
  >   unpack them and calls bar (the original) with as many args as you
  >   want, not much code change and not much cost...


Hi Rob,

[BTW, sorry about the crosspost to R-help.  Mean't to continue the
discussion on R-devel, but miss-typed.]

Actually, the original author used the function with 85 arguments in S-Plus.
Rather than adding a new wrapper function, I wanted to fix the (in my
opinion) artificial limit of 65 parameters and let them keep the same exact
source file between R and S-Plus.  

-Greg






  > 
  > -- 
  > +-----------------------------------------------------------
  > ----------------+
  > | Robert Gentleman                 phone : (617) 632-5250   
  >                 |
  > | Associate Professor              fax:   (617)  632-2444   
  >                 |
  > | Department of Biostatistics      office: M1B28
  > | Harvard School of Public Health  email: 
  > rgentlem@jimmy.dfci.harvard.edu   |
  > +-----------------------------------------------------------
  > ----------------+
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 01:09:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 02:09:52 +0200
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Mon, 16 Jul 2001 19:30:26 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <x2pub0pga7.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large
> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.
> 
> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

Some anxiety that there might be platforms that really don't allow
many parameters, I suppose. (As opposed to the arbitrary limit imposed
by R, essentially caused by the programmer giving up after

    case 65:
        retval = (SEXP)fun(
            cargs[0],  cargs[1],  cargs[2],  cargs[3],  cargs[4],
            cargs[5],  cargs[6],  cargs[7],  cargs[8],  cargs[9],
            cargs[10], cargs[11], cargs[12], cargs[13], cargs[14],
            cargs[15], cargs[16], cargs[17], cargs[18], cargs[19],
            cargs[20], cargs[21], cargs[22], cargs[23], cargs[24],
            cargs[25], cargs[26], cargs[27], cargs[28], cargs[29],
            cargs[30], cargs[31], cargs[32], cargs[33], cargs[34],
            cargs[35], cargs[36], cargs[37], cargs[38], cargs[39],
            cargs[40], cargs[41], cargs[42], cargs[43], cargs[44],
            cargs[45], cargs[46], cargs[47], cargs[48], cargs[49],
            cargs[50], cargs[51], cargs[52], cargs[53], cargs[54],
            cargs[55], cargs[56], cargs[57], cargs[58], cargs[59],
            cargs[60], cargs[61], cargs[62], cargs[63], cargs[64]);
        break;

There's obviously no portable and neat way of doing variable length
argument lists.)

You don't need to go via SEXPs to solve your problem, and in fact not
even to C. You could for instance use (pardon, my Fortran is getting
rusty): 

      subroutine doit(work, p, i)
      double precision work(1)
      integer p(59), i(25)
      call myfun(work(1),work(p(1)),work(p(2)),....,work(p(59)),
     +           i(1),...,i(25))
      return
      end
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 17 03:32:48 2001
From: paul@stat.auckland.ac.nz (paul@stat.auckland.ac.nz)
Date: Tue, 17 Jul 2001 04:32:48 +0200 (MET DST)
Subject: [Rd] Re: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200107170232.EAA16241@pubhealth.ku.dk>

Hi


> Also,
>       rect()
> fails similarly.
> This gives funny legend()s :
>  plot(1:10)
>  legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  op <- par(xpd = NA)
>  legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  ## pch = 1 also doesn't ?!?? ?? why??  It does here :
>  points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
>  ## and other pch's do here
>  legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
>  par(op)
> ## Note that there seems another peculiar clipping bug
> ##       with pch = 1 in legend


I believe the rect() problem has been fixed by the fix to PR #943 -- Martin,
can you confirm this please?

I believe the pch=1 problem is the same as reported in PR #943

Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 07:45:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 07:45:23 +0100 (BST)
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.31.0107170728290.21400-100000@auk.stats>

On Mon, 16 Jul 2001, Warnes, Gregory R wrote:

>
>   From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
>   >
>   > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
>   >
>   > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
>   > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
>   > >   > >
>   > >   > > I would like to create an R package that will depend on
>   > >   > > the ability to use
>   > >   > > more than 65 parameters.  Would it be reasonable to expect
>   > >   > > this patch (or
>   > >   > > something equivalent) to be part of , say R > 1.3.1 ?
>   > >   >
>   > >   > People are slow to upgrade, so you might be better
>   > >   > off in the short
>   > >   > run to somehow reduce the number of parameters below 65.
>   > >   > For example,
>   > >   > write a wrapper function that groups a number of
>   > >   > scalar parameters
>   > >   > into one vector.
>   > >
>   > > Actually, the whole point of the patch was to get out of
>   > > this.  I want to keep the code as close to what was written
>   > > by the original author and as
>   > > simple as possible...
>   >
>   >
>   > Sorry, but I don't see that.  You want to write the wrapper
>   > in R?  Why is
>   > it not as simple to write it in C?
>
> It is, in fact *not* as simple to write it in C.  Now the user must go from
> 2 languages (R and FORTRAN) to 3.

But the user is you, who knows C.  One can write the wrapper in Fortran
too, as ppr.f exemplifies.

>   > I really don't see the need to remove
>   > the limitation in R (or even to have it as high as 65)
>   > since R now has
>   > .External() which allows an unlimited list of arguments to
>   > be passed to C
>   > code.  I can't believe that the natural R representation is
>   > 85 separate
>   > objects,
>
> No the actual R representation isn't anywhere near 85 separate objects.  The
> actual R representation is more like 10 objects.  The point is that existing
> FORTRAN code---which is used for R, S-Plus, and for a stand alone
> program---makes use of some 60 objects which need to be dynamically sized,
> hence the other 25 parameters specifying object sizes.  Indeed many of these
> objects are merely 'scratch space' for the code to work in.  Still, its
> easier for the user to allocate these in R (and have R manage the memory)
> than to write the equivalent code in C.

Really?  Using R_alloc in C seems exactly equivalent to me.

>   > so the natural way looks like a C wrapper
>   > translating between R
>   > objects and Fortran pointers.  You can even copy selectively.
>   >
>   > The argument is that new code should probably be using .Call (if S
>   > compatibility is relevant) or .External rather than .C, at
>   > least provided
>   > that a C wrapper is feasible.  Those interfaces seem very
>   > much under-used.
>   > (Including by me, for S3-compatibility reasons.)
>
> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large

No, but I am suggesting that most package writers should.

> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.

In most cases it is one or two vectors.  Beyond that, the lack of
type-checking causes a large number of bugs, so I do think using .Call is
the way to keep `bugs down to a minimum'.

> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

1) Your code had as I understand it a different arbitrary restriction.

2) We don't know what the OS-specific limits are.  Certainly in the days of
S-PLUS for Windows 3.3 there were quite low limits on the total size of the
arguments in use.  These days I don't even know how to find out such
information.

3) We always have to weigh the support issues of changing the code to
support a rare case.  (I do believe it is rare: this is the first
instance I have seen in ca 14 years of listening to S and R programmers.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Tue Jul 17 12:36:44 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Tue, 17 Jul 2001 13:36:44 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171136.NAA19217@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


The function La.eigen, called by cmdscale in the package mva behaves an
unexplicable way (for me).

The following lines show what happened.
I tried the very same on linux, and it worked fine.




>a <- matrix(c(1,2,3,2),3,3)
>a
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    1    2
[3,]    3    2    1
>library(mva)
>cmdscale(a)
Error in La.eigen(Tmat, symmetric = TRUE) : 
	On entry to DSYEV  parameter number 8 had an illegal value



Regards,



Laurent



PS: I had trouble during the 'make check' installation step. I was pointed out
it was a known problem with modreg on SGIs. I think both things are
independant,
but, well, one never knows...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 12:48:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 13:48:59 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171136.NAA19217@pubhealth.ku.dk>
References: <200107171136.NAA19217@pubhealth.ku.dk>
Message-ID: <15188.9771.406214.712244@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)


> Hello,

> The function La.eigen, called by cmdscale in the package mva behaves
> an unexplicable way (for me).

> The following lines show what happened.  I tried the very same on
> linux, and it worked fine.

>> a <- matrix(c(1,2,3,2),3,3)
>> a
>      [,1] [,2] [,3]
> [1,]    1    2    3
> [2,]    2    1    2
> [3,]    3    2    1
>> library(mva)
>> cmdscale(a)
> Error in La.eigen(Tmat, symmetric = TRUE) : 
> 	On entry to DSYEV  parameter number 8 had an illegal value

I can confirm this on Naras's IRIX machine (in fact, was just about to
report this myself ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:02:12 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 17 Jul 2001 14:02:12 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171202.OAA19478@pubhealth.ku.dk>

On Tue, 17 Jul 2001, Kurt Hornik wrote:

> >>>>> laurent  writes:
>
> > Full_Name: Laurent Gautier
> > Version: 1.3.0-patched
> > OS: IRIX 6.5
> > Submission from: (NULL) (130.225.67.199)
>
>
> > Hello,
>
> > The function La.eigen, called by cmdscale in the package mva behaves
> > an unexplicable way (for me).
>
> > The following lines show what happened.  I tried the very same on
> > linux, and it worked fine.
>
> >> a <- matrix(c(1,2,3,2),3,3)
> >> a
> >      [,1] [,2] [,3]
> > [1,]    1    2    3
> > [2,]    2    1    2
> > [3,]    3    2    1
> >> library(mva)
> >> cmdscale(a)
> > Error in La.eigen(Tmat, symmetric = TRUE) :
> > 	On entry to DSYEV  parameter number 8 had an illegal value
>
> I can confirm this on Naras's IRIX machine (in fact, was just about to
> report this myself ...)

Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
is returned?  Alternatively, it may fail on the first dsyev call, in which
case I would guess that the wrong LAPACK routine is being found (and that's
a plausible explanation).

I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)

What BLAS is in use?  The intention is that the workspace is chosen large
enough to allow the BLAS to work efficiently: it might just be that
the BLAS is reporting erroneously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 17 13:13:59 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 17 Jul 2001 08:13:59 -0400
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171202.OAA19478@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Tue, Jul 17, 2001 at 02:02:12PM +0200
References: <200107171202.OAA19478@pubhealth.ku.dk>
Message-ID: <20010717081359.D27049@jessie.research.bell-labs.com>


For what it is worth, I saw this problem a few weeks ago but didn't
have time to investigate it in depth and managed to find a work
around.  It arose for me on Solaris, specifically when I was compiling
with the native C compiler cc and f77.  Switching to gcc and f77
removed the problem.  (There is a possibility that I have this
backwards, but I think my memory is correct on this point.)

D.


ripley@stats.ox.ac.uk wrote:
> On Tue, 17 Jul 2001, Kurt Hornik wrote:
> 
> > >>>>> laurent  writes:
> >
> > > Full_Name: Laurent Gautier
> > > Version: 1.3.0-patched
> > > OS: IRIX 6.5
> > > Submission from: (NULL) (130.225.67.199)
> >
> >
> > > Hello,
> >
> > > The function La.eigen, called by cmdscale in the package mva behaves
> > > an unexplicable way (for me).
> >
> > > The following lines show what happened.  I tried the very same on
> > > linux, and it worked fine.
> >
> > >> a <- matrix(c(1,2,3,2),3,3)
> > >> a
> > >      [,1] [,2] [,3]
> > > [1,]    1    2    3
> > > [2,]    2    1    2
> > > [3,]    3    2    1
> > >> library(mva)
> > >> cmdscale(a)
> > > Error in La.eigen(Tmat, symmetric = TRUE) :
> > > 	On entry to DSYEV  parameter number 8 had an illegal value
> >
> > I can confirm this on Naras's IRIX machine (in fact, was just about to
> > report this myself ...)
> 
> Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
> is returned?  Alternatively, it may fail on the first dsyev call, in which
> case I would guess that the wrong LAPACK routine is being found (and that's
> a plausible explanation).
> 
> I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)
> 
> What BLAS is in use?  The intention is that the workspace is chosen large
> enough to allow the BLAS to work efficiently: it might just be that
> the BLAS is reporting erroneously.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:54:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>

I've found the problem.  The read.spss code was free-ing not Free-ing
memory allocated by Calloc.  On most platforms that would work, but not on
Windows where Calloc/Free and calloc/free use separate memory managers.

This explains the randomness of the problems.

I'm solving this (and a few other things) in 0.4-6.
I will put up a pre-compiled version, so update.packages() should fetch it
tomorrow.


On Mon, 9 Jul 2001, Uwe Ligges wrote:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
>
>
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
>
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
>
>   read.spss("c:/test.sav")
>
> $VAR00001
> [1] 2 3
>
> $VAR00002
> [1] 3 5
>
>
>
> But trying to read a non existant file crashes R on my machine:
>
>   read.spss("c:/nonexistant.abc")  # R crashes

This is already solved in 0.4-5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 15:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 16:52:51 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <20010717081359.D27049@jessie.research.bell-labs.com>
References: <200107171202.OAA19478@pubhealth.ku.dk>
 <20010717081359.D27049@jessie.research.bell-labs.com>
Message-ID: <15188.20803.442122.659203@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> For what it is worth, I saw this problem a few weeks ago but didn't
> have time to investigate it in depth and managed to find a work
> around.  It arose for me on Solaris, specifically when I was compiling
> with the native C compiler cc and f77.  Switching to gcc and f77
> removed the problem.  (There is a possibility that I have this
> backwards, but I think my memory is correct on this point.)

Earlier today I tried

	stat.auckland		(solaris)
	rgmiller.stanford	(irix)

both with gcc and g77.  Make check went thru on solaris but irix had the
reported problems ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jul 17 16:41:47 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 17 Jul 2001 11:41:47 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
References: <Pine.WNT.4.31.0107161916001.1056-100000@tern.stats>
Message-ID: <3B545CBB.D9371BD0@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
> 
> >
> >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
> >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
> >   > >
> >   > >I would like to create an R package that will depend on
> >   > the ability to use
> >   > >more than 65 parameters.  Would it be reasonable to expect
> >   > this patch (or
> >   > >something equivalent) to be part of , say R > 1.3.1 ?
> >   >
> >   > People are slow to upgrade, so you might be better off in the short
> >   > run to somehow reduce the number of parameters below 65.
> >   > For example,
> >   > write a wrapper function that groups a number of scalar parameters
> >   > into one vector.
> >
> > Actually, the whole point of the patch was to get out of this.  I want to
> > keep the code as close to what was written by the original author and as
> > simple as possible...
> 
> Sorry, but I don't see that.  You want to write the wrapper in R?  Why is
> it not as simple to write it in C?  I really don't see the need to remove
> the limitation in R (or even to have it as high as 65) since R now has
> .External() which allows an unlimited list of arguments to be passed to C
> code.  I can't believe that the natural R representation is 85 separate
> objects, so the natural way looks like a C wrapper translating between R
> objects and Fortran pointers.  You can even copy selectively.
> 
> The argument is that new code should probably be using .Call (if S
> compatibility is relevant) or .External rather than .C, at least provided
> that a C wrapper is feasible.  Those interfaces seem very much under-used.
> (Including by me, for S3-compatibility reasons.)
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

The limitation to 65 arguments (or at any rate some fixed number) is
imposed by pretty fundamental limitations of C.  It applies to .External
and .Call as well as to .C, and any S language interface will have such
a limit unless it goes around the C calling mechanism (which in turn
would likely be devastating for portability).

It's understandable to want to create as little new C code as possible,
but since there has to be a limit, at some point we're saying "More than
N arguments to a subroutine are too confusing.  Simplify it before you
expose the interface to users."  65 seems a plausible value for N to me.

The example Greg describes with a bunch of scratch arrays is, in my
experience, usually best handled by a .Call to a C wrapper that uses C
macros from Appendix A of the green book to allocate the scratch space
(NEW_NUMERIC and NUMERIC_POINTER, for example).  That is usually only
marginally more work than writing the wrapper in R, is a good deal more
efficient, and hides the grosser ugliness from the end user better.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 16:48:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 17:48:02 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Prof Brian D Ripley's message of "Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>
Message-ID: <x2n1635zgt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> I've found the problem.  The read.spss code was free-ing not Free-ing
> memory allocated by Calloc.  On most platforms that would work, but not on
> Windows where Calloc/Free and calloc/free use separate memory managers.

Odd. The opposite problem (using calloc/Free) did give segfaults
on Linux.... (That's what caused the trouble when the .sav file had
illegal characters in variable names.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 17:03:20 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 18:03:20 +0200
Subject: [Rd] Re: argument ordering (was <blank>)
In-Reply-To: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
 <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
Message-ID: <15188.25032.28517.851384@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> ---snip---
> I am trying to change the number of the ticks on each axis, but every time I
> can not succeed and receive the error message shown below even I use the
> default values:

>> plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
>    Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
> :
>         location and label lengths differ, 6 != 3
> ---snip---


> The problem is that the "lab" parameter is being passed down (via
> plot.ts) to axis in a "..." argument, but it is being matched to the
> "labels" argument in axis().

> In other words, axis() thinks you are saying "labels=c(5, 5, 7)".
> This is not your fault; it is an unfortunate interaction between
> partial matching of argument names and the "..." argument.

What a nightmare ...

> A simple workaround would be ...

>     op <- par(lab=c(5, 5, 7)
>     plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
>     par(op)

[Argh.  Calling a method directly ... ]

> ... a more long-term solution will require some more thought ...

> [to R-devel:

>     (i) could put the labels argument at the end of the list -- i.e.,
> axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
> using "lab" as an abbreviation for "labels" would then get consumed as a
> par() setting (?)

>     (ii) could put explicit "lab" argument in the list too -- i.e.,
> axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

>     (iii) ... ?]

I think we need general guidance for dealing with the ``graphical
parameter'' args to plotting functions.  This includes issues of where
to evaluate and when to vectorize (or even how, ref my question about
recycling e.g. col by cases or variables when plotting a multivariate
time series).

In the above case, ?axis says that its `...' is

     ...: graphical parameters may also be passed as arguments to this
          function.

so we could take the plot.ts `...' list, pmatch its names against
names(par()), and pass the subscripted `...' on to axis().  [Expecting
loud screams.]

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Tue Jul 17 22:35:36 2001
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Tue, 17 Jul 2001 23:35:36 +0200 (MET DST)
Subject: [Rd] bug in the interface of ESS, R for linux, S+6 for linux (PR#1028)
Message-ID: <200107172135.XAA22403@pubhealth.ku.dk>


Object name completion doesn't work on linux.  On S+6 the problem
seems to be that ESS uses the argument `inherits' and S+6 is expecting
`inherit'

       . ".Last.value <- get(\".ess.lvsave\",inherits=T)\n") ; envir=1
       . "assign(\".ess.lvsave\",.Last.value,inherits=T)\n") ;envir=1
  -rw-r--r--   1 544      everyone     7170 Mar  1 13:55 essd-r.el

and

Version 6.0 Release 1 for Linux 2.2.12 : 2000
args(get) 
function(name, where = NULL, frame, inherit = F, immediate = T, meta = 0,
mode = "any")


R uses `inherits'

args(get)
function (x, pos = -1, envir = pos.to.env(pos), mode = "any", 
    inherits = TRUE) 


Andy Liaw <andy_liaw@merck.com> reports
> Actually, I just tried it in R on our Linux box and also had the similar
> problem, namely the completion wasn't able to complete "plo" or "rnor".  The
> info is:
> 
> 	   _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    3.0              
> year     2001             
> month    06               
> day      22               
> language R                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olefc@math.auc.dk  Wed Jul 18 14:14:23 2001
From: olefc@math.auc.dk (olefc@math.auc.dk)
Date: Wed, 18 Jul 2001 15:14:23 +0200 (MET DST)
Subject: [Rd] Rd2dvi - script (PR#1029)
Message-ID: <200107181314.PAA26681@pubhealth.ku.dk>

Full_Name: Ole Christensen
Version: 1.3.0
OS: Solaris
Submission from: (NULL) (130.225.48.2)


I have discovered a problem with script Rd2dvi for R-1.3.0 on our Solaris
machines.
When writing R CMD Rd2dvi Name_of_Package, then things go wrong with the 
conversion to Latex of the DESCRIPTION file in the package.

Having discussed the problem with our system administrator, he constructed a 
script illustrating the problem (see below: script a, and output b). 
It seems that our Solaris machines makes a further expansion in the shell
scripts 
than intended ( \\b  ->  \b  ->  <Backspace> ). 

We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux 2.0.36 
machine, where everything worked fine.

script a:

#!/user/flemming/aa/sh

Rd_DESCRIPTION_to_LaTeX () {
  echo '\\begin{description}'
  echo "\\begin{description}"
  echo "\\raggedright{}"
  echo "\\end{description}"
}

touch b
Rd_DESCRIPTION_to_LaTeX >> b

------

output b:

\begin{description}
egin{description}

aggedright{}
\end{description}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 18 16:47:25 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 18 Jul 2001 11:47:25 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107180933170.32196-100000@hussle.harvard.edu>

I have assembled the changes I have been working on to make TeX Computer
Modern fonts more fully usable in R. I have made the patches and support
files available at:

http://hussle.harvard.edu/~durso/CM_R.tar.gz

The diffs are against R-1.3.0. Let me know if there is a chance of these
changes being included in R or if you have any comments.

Thank you,
Brian D'Urso


My system:
----------
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jul 18 17:23:53 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 18 Jul 2001 12:23:53 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>


OK, to summarize and clarify a bit

1) I downloaded some code that existed in "pure" FORTRAN, FORTRAN+S-Plus,
and FORTRAN+R versions.  

2) I discovered that the primary difference between R and S-Plus version was
the use of a wrapper to reduce the number of arguments from 87 to 65.   When
I inquired why, the author of the code replied

	"R won't take more than 65 arguments to the FORTRAN code 
	(I have no idea why they would have this restriction, it
	seems ludicrous to me. Anyway, the 65 limit is why I combined 
	all those arguments (they were originally explicitly passed)."

He also noted that the 65 argument restriction is not present in Splus 5.

3) I posted a patch to change the limit on the number of parameters to .C,
.Fortran, and .Call from 65 to 255.  

4) I asked if this patch, or something like it would appear in the next
release of R because I wanted to create a package that used the exact same
(simpler) code for R and S-Plus.

5) There was a debate on the merit of using .Fortran to handle a large
number of arguments.  Most people suggested one of 

	- write a wrapper function Fortran C or that accepts some set of
arguments as a single 	vector and that calls the original Fortran function.

	- write a wrapper function using .Call or .External

Several reasons were put forth for *not* extending the number of permissible
arguments.  The core point seemed to be that there have been few reports of
problems with the restriction, and there is uncertainty about the maximum
number of arguments an operating system will support.

6) I still feel that it is a reasonable change to increase the number of
permitted arguments, at least to the same limits (whatever they are) imposed
by S-Plus.  This seems simpler than telling users that as soon as they hit
65 arguments they have to change their code or learn a new interface
mechanism.


-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jul 18 19:26:28 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jul 2001 20:26:28 +0200
Subject: [Rd] Summary:  too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Wed, 18 Jul 2001 12:23:53 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>
Message-ID: <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> 6) I still feel that it is a reasonable change to increase the number of
> permitted arguments, at least to the same limits (whatever they are) imposed
> by S-Plus.  This seems simpler than telling users that as soon as they hit
> 65 arguments they have to change their code or learn a new interface
> mechanism.

I think you missed one point that John was making: "N++". There has to
be a limit to the number of arguments, C does not allow you to code
anything else portably. Whatever limit we choose, someone is going to
bump into it sooner or later, and we can't just increase the limit
every time.  

Then there's the problem of portability between compilers. A little
Web search reveals that the minimum maximum number (sic) of arguments
that a C compiler may impose according to the C standard is 31. So
there may already be standards-compliant C compilers that cannot
compile R. Obviously none of those have appeared within our user
base...

That being said, I think 65 is a pretty weird limit to have. 2^N-1
would be a more obvious guess at a potential hard limit. So, since
we're already past 63, how about having a quick round of testing among
the R-devel readers to check out whether any of their systems would
break from inserting a limit of 127 or 255?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Jul 18 19:52:54 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Jul 2001 14:52:54 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <58mbltcds2jm49kiv533kpv8iqds8r796o@4ax.com>

>That being said, I think 65 is a pretty weird limit to have. 2^N-1 
>would be a more obvious guess at a potential hard limit. So, since 
>we're already past 63, how about having a quick round of testing among 
>the R-devel readers to check out whether any of their systems would 
>break from inserting a limit of 127 or 255? 

I'd guess there are different ways this could fail.  

1. The compiler might have a hard-coded upper limit on the number of
arguments to a function.
2. It might have an upper limit on the number of bytes of code
generated in a function, or in an object file. 

With 255 as the upper limit, the functions do_dotcall and do_dotCode
in dotcode.c will both be huge, so they might trigger the second kind
of failure. (I'd guess that no 16 bit compiler could handle them, for
instance, but nobody is compiling R on one of those.) It's probably
worth putting together a new dotcode.c version for people to test, not
just ask them to test for the first kind of failure.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Jul 18 20:00:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 18 Jul 2001 15:00:56 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com> <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B55DCE8.5E06BE6F@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > 6) I still feel that it is a reasonable change to increase the number of
> > permitted arguments, at least to the same limits (whatever they are) imposed
> > by S-Plus.  This seems simpler than telling users that as soon as they hit
> > 65 arguments they have to change their code or learn a new interface
> > mechanism.
> 
> I think you missed one point that John was making: "N++". There has to
> be a limit to the number of arguments, C does not allow you to code
> anything else portably. Whatever limit we choose, someone is going to
> bump into it sooner or later, and we can't just increase the limit
> every time.
> 
> Then there's the problem of portability between compilers. A little
> Web search reveals that the minimum maximum number (sic) of arguments
> that a C compiler may impose according to the C standard is 31. So
> there may already be standards-compliant C compilers that cannot
> compile R. Obviously none of those have appeared within our user
> base...
> 
> That being said, I think 65 is a pretty weird limit to have. 2^N-1
> would be a more obvious guess at a potential hard limit. So, since
> we're already past 63, how about having a quick round of testing among
> the R-devel readers to check out whether any of their systems would
> break from inserting a limit of 127 or 255?
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Empirical evidence is that the limit in S-Plus is 128.  (The call
manyArgs(N) constructs a .C with N arguments to a C routine (with 200
arguments)).

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(128)
[1] T

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(129)
Problem in .C("many_args",: Sorry, no more than 128 arguments allowed in
dynamic call, while calling subroutine many_args 

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lenn@bullsandbears.com  Thu Jul 19 15:47:28 2001
From: lenn@bullsandbears.com (lenn@bullsandbears.com)
Date: Thu, 19 Jul 2001 07:47:28 -0700
Subject: [Rd] Knowledge is Power cm
Message-ID: <200107190747406.SM00860@stat.math.ethz.ch>

               DON'T BE LEFT IN THE DARK AGES

Info and Data Center is an information-centric company that 
delivers remarkable information pertaining to specific, essential 
subjects as: marketing, education, philosophy, entertainment,
success, stocks and bonds, finances and psychology, as well as 
other subjects that can support your life and well being. This 
email is merely requesting to make such information available to 
you from time to time.

We know two things are truer NOW  more than ever before....

      Information is leverage and knowledge is Power!

Info and data center is committed to putting you in front of the
information curve and keeping you there!

If you would like to be deleted from this free opportunity simply
hit reply and then send, you will immediately be removed from 
our list.

Thank you in Advance
Lennis Fike,
V.P. Technologies
Info and Data Center, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Thu Jul 19 21:51:28 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Thu, 19 Jul 2001 15:51:28 -0500 (CDT)
Subject: [Rd] bug in eval
Message-ID: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>



Is this a bug ?


> foo <- function(a, ...)
+ {
+     tl <- substitute(list(a=a))
+ 
+     ## the foll two should give the same results
+     ## according to defaults for eval
+     
+     print(eval(tl ))
+     print(eval(tl, parent.frame()))
+ }
> 
> 
> foo1 <- function(...)
+ {
+     foo(...)
+ }
> 
> test <- function(a = 6)
+ {
+     foo1(a = a)
+ }
> 
> test(10)
$a
[1] 10

Error in eval(expr, envir, enclos) : Object "a" not found
> 
> str(eval)
function (expr, envir = parent.frame(), enclos = if (is.list(envir) || 
    is.pairlist(envir)) parent.frame())  
> 



I'm having similar problems with 

eval(expr, data, parent.frame()) # doesn't work

and

eval(expr, data) # works

where data is a data frame.

Deepayan

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 19 23:29:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jul 2001 00:29:00 +0200
Subject: [Rd] bug in eval
In-Reply-To: Deepayan Sarkar's message of "Thu, 19 Jul 2001 15:51:28 -0500 (CDT)"
References: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>
Message-ID: <x2elrcbljn.fsf@blueberry.kubism.ku.dk>

Deepayan Sarkar <deepayan@stat.wisc.edu> writes:

> Is this a bug ?
> 
> 
> > foo <- function(a, ...)
> + {
> +     tl <- substitute(list(a=a))
> + 
> +     ## the foll two should give the same results
> +     ## according to defaults for eval
> +     
> +     print(eval(tl ))
> +     print(eval(tl, parent.frame()))
> + }


Nope. This is not a bug, just confusing. The thing to note is that
default expressions are evaluated in the frame of the called function.
I.e. the parent.frame() referred to as the default for envir in eval()
is the caller of eval, whereas in eval(expr, parent.frame()) the
parent.frame() is evaluated in the callers frame, giving you the
grandparent of the eval call.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cook@biostat.wisc.edu  Fri Jul 20 16:56:37 2001
From: cook@biostat.wisc.edu (Tom Cook)
Date: Fri, 20 Jul 2001 10:56:37 -0500
Subject: [Rd] angle/density in barplots/polygon
Message-ID: <15192.21685.275846.586333@polaris.biostat.wisc.edu>

I'm trying to convert some S-Plus code which generates barplots and
other shaded area plots to R.  If I specify that I want hatching
using the angle and density arguments, the messages

1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 
2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

so apparently these features have yet to be implemented.  Is there a
newer version of R in which hatching has been implemented?  If not, is
there a timetable for implementing them?

Thanks,

Thomas Cook, PhD
Department of Biostatistics and Medical Informatics
University of Wisconsin                  email: cook@biostat.wisc.edu
209 WARF Building                           ph: (608) 263-2906
610 Walnut St.                             FAX: (608) 263-0415
Madison, Wisconsin 53705                
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul 21 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107210515.HAA29569@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1029 *
Subject: Rd2dvi - script
From: olefc@math.auc.dk
Date: Wed, 18 Jul 2001 15:14:21 +0200 (MET DST)
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1018 *
Subject: predict.lm(...., se=T), with 1-column model matrix
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 8 Jul 2001 19:35:26 +1000 (EST)
* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1021 *
Subject: Extra lines when bty="n"
From: ce@biostat.ku.dk
Date: Wed, 11 Jul 2001 23:23:53 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
* PR# 1025 *
Subject: ordered factors in tree package - bug?
From: Kevin Murphy <murphyk@cs.berkeley.edu>
Date: Fri, 13 Jul 2001 14:17:01 -0700
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
* PR# 1028 *
Subject: bug in the interface of ESS, R for linux, S+6 for linux
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 17 Jul 2001 17:38:49 -0400 (EDT)
* PR# 1027 *
Subject: cmdscale in package mva
From: laurent@cbs.dtu.dk
Date: Tue, 17 Jul 2001 13:36:43 +0200 (MET DST)
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 22 16:02:04 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 22 Jul 2001 17:02:04 +0200
Subject: [Rd] Rd2dvi - script (PR#1029)
In-Reply-To: <200107181314.PAA26681@pubhealth.ku.dk>
References: <200107181314.PAA26681@pubhealth.ku.dk>
Message-ID: <15194.60140.920991.208147@mithrandir.hornik.net>

>>>>> olefc  writes:

> Full_Name: Ole Christensen
> Version: 1.3.0
> OS: Solaris
> Submission from: (NULL) (130.225.48.2)


> I have discovered a problem with script Rd2dvi for R-1.3.0 on our
> Solaris machines.  When writing R CMD Rd2dvi Name_of_Package, then
> things go wrong with the conversion to Latex of the DESCRIPTION file
> in the package.

> Having discussed the problem with our system administrator, he
> constructed a script illustrating the problem (see below: script a,
> and output b).  It seems that our Solaris machines makes a further
> expansion in the shell scripts than intended ( \\b -> \b ->
> <Backspace> ).

> We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux
> 2.0.36 machine, where everything worked fine.

> ...

Thanks for pointing this out.

As newer versions of the autoconf manual point out

	The simple @code{echo} is probably the most surprising source of
	portability troubles.  It is not possible to use @samp{echo}
	portably unless both options and escape sequences are omitted.
	New applications which are not aiming at portability should use
	@samp{printf} instead of @samp{echo}.

	...

	Do not use backslashes in the arguments, as there is no
	consensus on their handling.

The problem is that Solaris builtin echo and /usr/bin/echo by default
interpret `\b' et al as special backslash-escaped sequences.

The solution is not to use echo for producing LaTeX text but here
documents instead.  Will fix.

[There is similar code in doc/manual/Makefile.in, but it does not use
any `recognized' escape sequences ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sc@paracelsus.fdm.uni-freiburg.de  Mon Jul 23 11:57:59 2001
From: sc@paracelsus.fdm.uni-freiburg.de (sc@paracelsus.fdm.uni-freiburg.de)
Date: Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
Message-ID: <200107231057.MAA19791@pubhealth.ku.dk>

I experienced the following problem with R 1.3.0 which is probably a
bug. The program hangs-up if 1.) a coordinate of segments is outside the
ploting region and 2.) the option log="x" is used.

##
## works fine
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)

##
## hang-up
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)


platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   

Obviously, a work-around is to ensure that segments falls within the
ploting region. 

Best regards,
-- 
Guido Schwarzer         sc@imbi.uni-freiburg.de | Phone: +49 (0)761 203 7702
German Cochrane Centre   http://www.cochrane.de | Fax:   +49 (0)761 203 7700
Institute of Medical Biometry and Medical Informatics
Stefan-Meier-Str. 26, D-79104 Freiburg       http://www.imbi.uni-freiburg.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 23 12:27:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jul 2001 13:27:23 +0200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
In-Reply-To: sc@paracelsus.fdm.uni-freiburg.de's message of "Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)"
References: <200107231057.MAA19791@pubhealth.ku.dk>
Message-ID: <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>

sc@paracelsus.fdm.uni-freiburg.de writes:

> I experienced the following problem with R 1.3.0 which is probably a
> bug. The program hangs-up if 1.) a coordinate of segments is outside the
> ploting region and 2.) the option log="x" is used.
> 
> ##
> ## works fine
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)
> 
> ##
> ## hang-up
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)

Confirmed on Linux, but seems to have disappeared in the patched
version. Not sure what caused the fix, though... My guess would be
that it is this change in CSclipline:

@@ -2464,6 +2466,7 @@
     yb = cr->yb;
     yt = cr->yt;
     if (dd->gp.xlog || dd->gp.ylog) {
+       double temp;
 
        GConvert(x1, y1, coords, NDC, dd);
        GConvert(x2, y2, coords, NDC, dd);
@@ -2475,6 +2478,17 @@
        cr2.yb = yb;
        cr2.yt = yt;
 
+        if (cr2.xr < cr2.xl) {
+            temp = cr2.xl;
+            cr2.xl = cr2.xr;
+            cr2.xr = temp;
+        }
+        if (cr2.yt < cr2.yb) {
+            temp = cr2.yb;
+            cr2.yb = cr2.yt;
+            cr2.yt = temp;
+        }
+
        x = xl;         /* keep -Wall happy */
        y = yb;         /* keep -Wall happy */
        while( c1 || c2 ) {


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jul 23 14:01:10 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 23 Jul 2001 15:01:10 +0200
Subject: [Rd] angle/density in barplots/polygon
In-Reply-To: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <15196.8214.373819.897167@gargle.gargle.HOWL>

>>>>> "Tom" == Tom Cook <cook@biostat.wisc.edu> writes:

    Tom> I'm trying to convert some S-Plus code which generates barplots and
    Tom> other shaded area plots to R.  If I specify that I want hatching
    Tom> using the angle and density arguments, the messages

    Tom> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 

    Tom> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

    Tom> so apparently these features have yet to be implemented.  Is there a
    Tom> newer version of R in which hatching has been implemented?  If not, is
    Tom> there a timetable for implementing them?

not really.  One of us (R core) has had this on his todo list for a while.
But then several of us don't see a big need, since hatching nowadays is
replaced by colors in many (I'd say most) situations.

If you send us the necessary patches to the R source code,
it will be in one of the development versions "real soon".  Note that R is
a GNU project relying on volunteer work from all over the world...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Jul 23 21:34:35 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Tue, 24 Jul 2001 08:34:35 +1200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
References: <200107231057.MAA19791@pubhealth.ku.dk> <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>
Message-ID: <004601c113b6$e2b3e2e0$175dd882@stat.auckland.ac.nz>

Hi


> > I experienced the following problem with R 1.3.0 which is probably a
> > bug. The program hangs-up if 1.) a coordinate of segments is outside the
> > ploting region and 2.) the option log="x" is used.
> >
> > ##
> > ## works fine
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
> >
> > ##
> > ## hang-up
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
>
> Confirmed on Linux, but seems to have disappeared in the patched
> version. Not sure what caused the fix, though... My guess would be
> that it is this change in CSclipline:


Yep, that went in during the fix-so-far to bug#997.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Mon Jul 23 23:25:57 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Mon, 23 Jul 2001 18:25:57 -0400
Subject: [Rd] Installing RSPython with R 1.3.0
References: <3B5CA086.9423C8C7@warnes.net>
Message-ID: <3B5CA475.BFABD484@warnes.net>


To get RSPython installed on my debian test box, I had to make a couple
of changes not listed in
ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 

1) I had to change $R_HOME/src/modules/X11 :

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) 

to

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

2) I had the same link problem with ctest, so I changed

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

to

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
-L$(R_HOME)/bin -lR


3)  Will all libraries that get loaded into R inside of python require
this?


If I try to load other 'recommended' packages that include C code I get
dyn.load erros, EG:

>>> RS.call("library","splines")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/local/lib/R/library/splines/libs/splines.so":
  /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
R_NaN
Error in function (package, help, lib.loc = .lib.loc, character.only =
FALSE,  :
        .First.lib failed
In the local error handler
In the local error handler
Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
        missing value where logical needed
In the local error handler
In the local error handler
Error in pos.to.env(pos) : invalid argument
In the local error handler
In the local error handler
Error in objects(lib.pos) : invalid envir= argument
In the local error handler
['RSPython', 'ctest', 'base']

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jul 23 23:38:51 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 15:38:51 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <87zo9vmft0.fsf@jeeves.blindglobe.net>



I'm not seeing this:

121$ python
Python 1.5.2 (#0, Apr 10 2001, 10:03:44)  [GCC 2.95.3 20010219
(prerelease)] on linux2
Copyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam
>>> import RS
Initialized R-Python interface package.
>>> RS.call("library","splines")
['splines', 'RSPython', 'ctest', 'base']
>>> 


for example.  

I made a slightly different set of changes (I didn't make the ones you
suggested, Greg).

I'd be happy to email a copy of the new version
(RSPython_0.3-1ajr.tar.gz, use as RSPython_0.3-1.tar.gz) which has
configure patched to find the Debian default locations of things; it
would be interesting to see if it works for you (it did for me on 2
Sid/unstable boxes).

best,
-tony



>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> To get RSPython installed on my debian test box, I had to
    GRW> make a couple of changes not listed in
    GRW> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html

    GRW> 1) I had to change $R_HOME/src/modules/X11 :

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS)

    GRW> to

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

    GRW> 2) I had the same link problem with ctest, so I changed

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

    GRW> to

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
    GRW> -L$(R_HOME)/bin -lR


    GRW> 3) Will all libraries that get loaded into R inside of python
    GRW> require this?


    GRW> If I try to load other 'recommended' packages that include C
    GRW> code I get dyn.load erros, EG:

    >>>> RS.call("library","splines")
    GRW> Error in dyn.load(x, as.logical(local), as.logical(now)) :
    GRW> unable to load shared library
    GRW> "/usr/local/lib/R/library/splines/libs/splines.so":
    GRW> /usr/local/lib/R/library/splines/libs/splines.so: undefined
    GRW> symbol: R_NaN Error in function (package, help, lib.loc =
    GRW> .lib.loc, character.only = FALSE, : .First.lib failed In the
    GRW> local error handler In the local error handler Error in if
    GRW> (!is.numeric(name) || name != (pos <- as.integer(name))) { :
    GRW> missing value where logical needed In the local error handler
    GRW> In the local error handler Error in pos.to.env(pos) : invalid
    GRW> argument In the local error handler In the local error
    GRW> handler Error in objects(lib.pos) : invalid envir= argument
    GRW> In the local error handler ['RSPython', 'ctest', 'base']

    GRW> -Greg _______________________________________________
    GRW> Omega-remote mailing list - Omega-remote@www.omegahat.org
    GRW> http://www.omegahat.org/mailman/listinfo/omega-remote




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 24 00:36:30 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 23 Jul 2001 19:36:30 -0400
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>; from greg@warnes.net on Mon, Jul 23, 2001 at 06:25:57PM -0400
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <20010723193625.C6947@jessie.research.bell-labs.com>



Hi Greg.

  What you are seeing is probably a result of using R embedded within another
application/system (Python in this case) but having R originally compiled
without support for R as a shared library. If you were to build R in the default
manner, i.e.
    configure
    make
and then re-configure to build as a shared library
    configure --enable-R-shlib
    make
the shared objects that make up the modules and package libraries
will not be rebuilt. Perhaps they should, but that is not currently
what happens.

 If you were to start afresh (e.g. make distclean) 
and then configure with shared library support
(
    configure --enable-R-shlib
    make
)
all should be well and all the .so's that R attempts to load will
also be linked against libR.so and so the symbols within R on which
they depend will be located.

  Hope this is the correct diagnosis of the problem.

     D.

Gregory R. Warnes wrote:
> 
> To get RSPython installed on my debian test box, I had to make a couple
> of changes not listed in
> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 
> 
> 1) I had to change $R_HOME/src/modules/X11 :
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) 
> 
> to
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR
> 
> 2) I had the same link problem with ctest, so I changed
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> 
> to
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> -L$(R_HOME)/bin -lR
> 
> 
> 3)  Will all libraries that get loaded into R inside of python require
> this?
> 
> 
> If I try to load other 'recommended' packages that include C code I get
> dyn.load erros, EG:
> 
> >>> RS.call("library","splines")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/local/lib/R/library/splines/libs/splines.so":
>   /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
> R_NaN
> Error in function (package, help, lib.loc = .lib.loc, character.only =
> FALSE,  :
>         .First.lib failed
> In the local error handler
> In the local error handler
> Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
>         missing value where logical needed
> In the local error handler
> In the local error handler
> Error in pos.to.env(pos) : invalid argument
> In the local error handler
> In the local error handler
> Error in objects(lib.pos) : invalid envir= argument
> In the local error handler
> ['RSPython', 'ctest', 'base']
> 
> -Greg
> _______________________________________________
> Omega-remote mailing list  -  Omega-remote@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-remote
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Jul 24 00:40:40 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 16:40:40 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <87y9pf5i4n.fsf@jeeves.blindglobe.net>

>>>>> "DTL" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    DTL>  If you were to start afresh (e.g. make distclean) and then
    DTL> configure with shared library support ( configure
    DTL> --enable-R-shlib make ) all should be well and all the .so's
    DTL> that R attempts to load will also be linked against libR.so
    DTL> and so the symbols within R on which they depend will be
    DTL> located.

And just to comment, with respect to Debian, this appears to have been
done by Doug.


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Jul 25 11:22:14 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 25 Jul 2001 12:22:14 +0200 (MET DST)
Subject: [Rd] glm.control() is not properly documented.. (PR#1031)
Message-ID: <200107251022.MAA03711@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu> writes:

on R-help and the Subject  "Log likelihood from glm"

    TL> On Mon, 9 Jul 2001, Phil wrote:
    >> 
    >> Is there any way of getting log likelihood values for each iteration from
    >> poisson glm model?
    >> 

    TL> Yes, the trace=TRUE option.

    TL> This doesn't seem to be documented properly, though it is in the "Usage"
    TL> section of help(glm)

glm.control should get it's own help page; on the above mentioned
glm.Rd it even says

 >>  control: a list of parameters for controlling the fitting process. 
 >>           See the documentation for `glm.control' for details.

--> I'm about to commit a fix for R 1.3.1

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jul 25 16:08:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 25 Jul 2001 11:08:28 -0400
Subject: [Rd] empty drop=F in [
References: <Pine.OSF.3.96.1010725150958.19828G-100000@ija.csic.es>
Message-ID: <3B5EE0EC.7B45F328@bank-banque-canada.ca>

Making a typo in the last help response I noticed:

a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
   1.4722996, 1.408512, 0.3768964,
   1.2737683, 1.811588, 1.9108336,
   1.8235127, 1.260909, 1.5995097 ), 3,4))

> dim(a[a[,1]<0,, drop=F])
[1] 0 3

Is that right? In Splus 3.3 I get

> dim(a[a[,1]<0,, drop=F])
NULL

Paul Gilbert
using
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status   Patched
major    1
minor    3.0
year     2001
month    07
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 16:41:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 25 Jul 2001 16:41:17 +0100 (GMT Daylight Time)
Subject: [Rd] empty drop=F in [
In-Reply-To: <3B5EE0EC.7B45F328@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0107251637150.1080-100000@tern.stats>

On Wed, 25 Jul 2001, Paul Gilbert wrote:

> Making a typo in the last help response I noticed:
>
> a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
>    1.4722996, 1.408512, 0.3768964,
>    1.2737683, 1.811588, 1.9108336,
>    1.8235127, 1.260909, 1.5995097 ), 3,4))
>
> > dim(a[a[,1]<0,, drop=F])
> [1] 0 3
>
> Is that right? In Splus 3.3 I get
>
> > dim(a[a[,1]<0,, drop=F])
> NULL

Really?  Current versions of S-PLUS behave like R, and I'd be surprised if
a 1994 version was different, but of course do not have it running.
I did check 3.4, though, and that behaves as 2000, 6.0 and R do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Wed Jul 25 18:06:50 2001
From: deepayan@stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Wed, 25 Jul 2001 19:06:50 +0200 (MET DST)
Subject: [Rd] bug in pretty() (PR#1032)
Message-ID: <200107251706.TAA06210@pubhealth.ku.dk>




I have the following output from pretty():


> pretty(c(-.1, 1)) # note 2nd element
[1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
[6]  8.000000e-01  1.000000e+00
> as.character(pretty(c(-.1, 1)))
[1] "-0.2"                  "-2.77555756156289e-17" "0.2"                  
[4] "0.4"                   "0.6"                   "0.8"                  
[7] "1"                    


The root cause seems to be here:


> 1.2/6 - .2
[1] -2.775558e-17


(It seems that this is not a problem in all installations.)


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 20:41:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 25 Jul 2001 20:41:34 +0100 (BST)
Subject: [Rd] bug in pretty() (PR#1032)
In-Reply-To: <200107251706.TAA06210@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0107252038150.2501-100000@gannet.stats>

On Wed, 25 Jul 2001 deepayan@stat.wisc.edu wrote:

>
>
>
> I have the following output from pretty():
>
>
> > pretty(c(-.1, 1)) # note 2nd element
> [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
> [6]  8.000000e-01  1.000000e+00
> > as.character(pretty(c(-.1, 1)))
> [1] "-0.2"                  "-2.77555756156289e-17" "0.2"
> [4] "0.4"                   "0.6"                   "0.8"
> [7] "1"
>
>
> The root cause seems to be here:
>
>
> > 1.2/6 - .2
> [1] -2.775558e-17

You can't expect exact arithmetic.  Using as.character is almost never a
good idea.  I don't think this is a bug, but you should be doing something
more complex if you want to make labels here.

> (It seems that this is not a problem in all installations.)
>
>
> <<insert bug report here>>

!!
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.pesl@arcs.ac.at  Thu Jul 26 07:57:17 2001
From: thomas.pesl@arcs.ac.at (thomas.pesl@arcs.ac.at)
Date: Thu, 26 Jul 2001 08:57:17 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260657.IAA08479@pubhealth.ku.dk>

i don't know, whether this is a bug or it is intended:

when using winedt and R together it works perfectly, as long as R is run in
mdi (multiple window mode). When you switch to sdi (single window mode)
winedt, sends no command at all: no history, paste, source or script.

Thomas Pesl

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jul 26 08:16:59 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 26 Jul 2001 09:16:59 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260716.JAA08671@pubhealth.ku.dk>

On Thu, 26 Jul 2001 thomas.pesl@arcs.ac.at wrote:

> i don't know, whether this is a bug or it is intended:
>
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

rw1030 does work in SDI mode, so this is not an R bug.
Please send it to the R-Winedt mode maintainer (if that is what you are
using).

>
> Thomas Pesl
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jul 26 08:27:07 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 26 Jul 2001 09:27:07 +0200
Subject: [Rd] winedt (PR#1033)
References: <200107260657.IAA08479@pubhealth.ku.dk>
Message-ID: <3B5FC64B.C3B2D751@statistik.uni-dortmund.de>



thomas.pesl@arcs.ac.at wrote:
> 
> i don't know, whether this is a bug or it is intended:
> 
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

That's NOT a bug of R, also NOT a bug of WinEdt and also NOT a bug of
the R-WinEdt interface.
Please report bugs or questions related to R-WinEdt directly to the
author.

In the current version of R-WinEdt, just click on "Set R --sdi mode" at
the bottom of the menu "R".
To switch back, you have to click on "Set R --mdi mode".


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 08:41:31 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 08:41:31 +0100
Subject: [Rd] Why not in Debian distro?
Message-ID: <20010726084131.B3409@caligola.econ.ucl.ac.uk>

Hi,

I am using Debian and get R from CRAN just fine, but could not find it in the
Debian distribution. Did I overlook something? If not, is it hard to put it
there?
I am not concerned with this really, but there are things that are based on
that particular tree, such as the autobuilding process for the Hurd (for which
R was working at least once):
http://people.debian.org/~jbailey/oasis/group/Debian/index.html

?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Thu Jul 26 10:32:13 2001
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Thu, 26 Jul 2001 10:32:13 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <20010726084131.B3409@caligola.econ.ucl.ac.uk>
Message-ID: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>

On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:

> I am using Debian and get R from CRAN just fine, but could not find it in the
> Debian distribution. Did I overlook something? If not, is it hard to put it
> there?

It is in potato (stable)in the math section: r-base 0.90.1-2 . 

Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
r-base 1.3.0-1 .  

People like me who  are still running stable can get up-to-date R
packages by sticking the following line in /etc/apt/sources.list:

deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

HTH

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Department of Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 09:48:51 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 09:48:51 +0100
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <20010726094851.C3409@caligola.econ.ucl.ac.uk>

On Thu, Jul 26, 2001 at 10:32:13AM +0100, H C Pumphrey wrote:
> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> > Debian distribution. Did I overlook something? If not, is it hard to put it

Yes I did, again. The package is r-base and not R. Obviously. Sorry.

> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  

Funny. So r-base was just not taken up by Turtle.

Thanks, anyway,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 26 11:16:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jul 2001 12:16:50 +0200
Subject: [Rd] Why not in Debian distro?
In-Reply-To: H C Pumphrey's message of "Thu, 26 Jul 2001 10:32:13 +0100 (BST)"
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>

H C Pumphrey <hcp@met.ed.ac.uk> writes:

> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> 
> > I am using Debian and get R from CRAN just fine, but could not find it in the
> > Debian distribution. Did I overlook something? If not, is it hard to put it
> > there?
> 
> It is in potato (stable)in the math section: r-base 0.90.1-2 . 
> 
> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  
> 
> People like me who  are still running stable can get up-to-date R
> packages by sticking the following line in /etc/apt/sources.list:
> 
> deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

The version skew between "stable" debian releases and current status
is becoming grotesque! 0.90.1 is from December 1999. It is quite
worrying because people are still receiving this ageing version on
CDs and our memories re. problems with that version are rapidly
fading 10 (yes, ten) releases later. Whatever happened to the
internal Debian discussions on creating a faster upgrade path for
applications?  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 15:04:42 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 07:04:42 -0700
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0bjdbwl.fsf@jeeves.blindglobe.net>

>>>>> "PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
    PD> later. Whatever happened to the internal Debian discussions on
    PD> creating a faster upgrade path for applications?

They created Woody/testing, which is a broken nightmare.

Sid/unstable isn't bad -- in fact, it's about as high-quality a
release as an average RedHat one, for the most part.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Thu Jul 26 15:59:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Thu, 26 Jul 2001 10:59:46 -0400
Subject: [Rd] Why not in Debian distro?
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>	<x2wv4wf10t.fsf@blueberry.kubism.ku.dk> <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <3B603062.4010709@keittlab.bio.sunysb.edu>

A.J. Rossini wrote:

>>>>>>"PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>>>>>>
>    PD> later. Whatever happened to the internal Debian discussions on
>    PD> creating a faster upgrade path for applications?
>
>They created Woody/testing, which is a broken nightmare.
>
>Sid/unstable isn't bad -- in fact, it's about as high-quality a
>release as an average RedHat one, for the most part.
>
That hasn't been my experience (although I haven't used RH for awhile). 
 Sid is high-quality until it randomly blows up in your face after an 
apt-get.  Debian has a bad case of SADD (stable attention deficit 
disorder).  None of the developers care much about updating stable.  Its 
too much fun crashing unstable.  I switched to Progeny and never looked 
back.  (I can still 'apt-get -b source <pkg>' from Sid for 
non-system-critical packages.)

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 23:22:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 15:22:14 -0700
Subject: [Rd] marshalling/serializing of R objects for later execution?
Message-ID: <87k80vpbzd.fsf@jeeves.blindglobe.net>


I know that this was a topic in March at DSC, but I was suffering from
a nasty migraine that prevented me from paying as much attention as I
ought to.  What's the current state-of-the-art regarding
packaging/serialization of R objects?  Or is it still vaporish
(i.e. nothing built)? 

I'm a bit more interested in functions/closures than "ordinary data".

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jul 27 22:38:29 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 28 Jul 2001 09:38:29 +1200
Subject: [Rd] angle/density in barplots/polygon
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <3B61DF55.403D99E0@stat.auckland.ac.nz>

Tom Cook wrote:
> 
> I'm trying to convert some S-Plus code which generates barplots and
> other shaded area plots to R.  If I specify that I want hatching
> using the angle and density arguments, the messages
> 
> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE)
> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE)
> 
> so apparently these features have yet to be implemented.  Is there a
> newer version of R in which hatching has been implemented?  If not, is
> there a timetable for implementing them?
> 
> Thanks,


I have just found a student vict^H^H^H^H volunteer to do this.  I will
know more about how long this will take in about a week.  (Its not a
huge task, but the student make take while to up to speed on graphics.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Sun Jul 29 17:28:27 2001
From: vogels@cmu.edu (vogels@cmu.edu)
Date: Sun, 29 Jul 2001 18:28:27 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291628.SAA24371@pubhealth.ku.dk>

Hi,

This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
(R 1.3.0) and comes from trying to compile R on AIX 4.3.

1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
is terminated with a double quote: ".  (This leads to the weird error
message that configure can't execute 'shared' on line 4060.)
     The fix is simply to use single quotes both times:
allow_undefined_flag='${wl}-berok'

2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
are passed on to ld correctly.  Which I know that you know...)
  The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
patching configure yet...

3) Rd2contents.pl:  this perl script fails in the base library!  There are
too many files in the man directory and perl reports 'glob failed'.  When I
try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
don't know whether this limitation comes from AIX, bash or perl and why it
doesn't happen with, say, Linux.
The fix is to replace the simple while loop (line 6):
  while(<$ARGV[0]/man/*.Rd>){ &do_one; }

with a loop over the contents of the directory using readdir:

if (opendir RD, "$ARGV[0]/man") {
    my $f;
    while (defined ($f = readdir RD)) {
     $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
    }
    closedir RD;
}

A) tkConfig.sh contains a line like this:
   TK_XINCLUDES='# no special path needed'
This has nothing to do with R proper but this bug which is either in AIX or
the local installation of X shows up during the compilation of R.  Anyhow,
this line is plain stupid since when passed on to the compiler _comments
out_ the rest of the line!  (Think about:
  gcc fine_program.c #no special path needed -lX11 -Xm
)  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
Again, I know this is not a problem with R but I'm adding it here for people
to find if they use the mailing list archive.

After these changes R compiles (producing warnings about duplicate
symbols...) and installs.  'make check' fails in mva--report to follow.

Regards,
  -tom

--
Email: vogels@cmu.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul 29 20:17:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291917.VAA24794@pubhealth.ku.dk>

On Sun, 29 Jul 2001 vogels@cmu.edu wrote:

> Hi,
>
> This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> (R 1.3.0) and comes from trying to compile R on AIX 4.3.

Would that be 2001-07-27?  Not all of us live in countries that flout ISO
standards!

> 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> is terminated with a double quote: ".  (This leads to the weird error
> message that configure can't execute 'shared' on line 4060.)
>      The fix is simply to use single quotes both times:
> allow_undefined_flag='${wl}-berok'

That is a generated file.  It coems from m4/libtool.m4.

> 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> are passed on to ld correctly.  Which I know that you know...)
>   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> patching configure yet...
>
> 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> too many files in the man directory and perl reports 'glob failed'.  When I
> try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I

(! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
have no line length limits.)

> don't know whether this limitation comes from AIX, bash or perl and why it
> doesn't happen with, say, Linux.

Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
already using it.

> The fix is to replace the simple while loop (line 6):
>   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
>
> with a loop over the contents of the directory using readdir:
>
> if (opendir RD, "$ARGV[0]/man") {
>     my $f;
>     while (defined ($f = readdir RD)) {
>      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
>     }
>     closedir RD;
> }

(slower and less portable if it is not needed.)

Your perl version is ?


> A) tkConfig.sh contains a line like this:
>    TK_XINCLUDES='# no special path needed'
> This has nothing to do with R proper but this bug which is either in AIX or
> the local installation of X shows up during the compilation of R.  Anyhow,
> this line is plain stupid since when passed on to the compiler _comments
> out_ the rest of the line!  (Think about:
>   gcc fine_program.c #no special path needed -lX11 -Xm
> )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> Again, I know this is not a problem with R but I'm adding it here for people
> to find if they use the mailing list archive.
>
> After these changes R compiles (producing warnings about duplicate
> symbols...) and installs.  'make check' fails in mva--report to follow.
>
> Regards,
>   -tom
>
> --
> Email: vogels@cmu.edu
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Jul 29 21:10:47 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 29 Jul 2001 16:10:47 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)"
References: <200107291917.VAA24794@pubhealth.ku.dk>
Message-ID: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
> 
> > Hi,
> >
> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
> 
> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
> standards!

Oops.  Should have used the contents of the date stamp file...

> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> > is terminated with a double quote: ".  (This leads to the weird error
> > message that configure can't execute 'shared' on line 4060.)
> >      The fix is simply to use single quotes both times:
> > allow_undefined_flag='${wl}-berok'
> 
> That is a generated file.  It coems from m4/libtool.m4.

...which means I should have said...
 Line 1473 in m4/libtool.m4 contains the unterminated string.

Hmm, should the name of the file suggest to me that it's part of some
other package, like 'libtool', and I should file a bug report with
it's maintainer?

> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> > are passed on to ld correctly.  Which I know that you know...)
> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> > patching configure yet...
> >
> > 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> > too many files in the man directory and perl reports 'glob failed'.  When I
> > try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
> 
> (! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
> have no line length limits.)

Guilty as suspected.  My bash and perl is rather old...  

> > don't know whether this limitation comes from AIX, bash or perl and why it
> > doesn't happen with, say, Linux.
> 
> Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
> in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
> and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
> already using it.

I'm not and I won't.  I'll live with my old perl since I don't want to
download and compile perl and bash...  I have a work around and if the
installation fails for somebody else they might have a hack available
when they search the r-bugs/r-devel archive.  Should I encounter the
problem again with a current installation (on a different system),
I'll let you know, otherwise I'll shut up.


> > The fix is to replace the simple while loop (line 6):
> >   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
> >
> > with a loop over the contents of the directory using readdir:
> >
> > if (opendir RD, "$ARGV[0]/man") {
> >     my $f;
> >     while (defined ($f = readdir RD)) {
> >      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
> >     }
> >     closedir RD;
> > }
> 
> (slower and less portable if it is not needed.)

True (especially the portability argument) if globbing is handled in
C in Perl nowadays.  I'd challenge the "slower" if Perl had to use the
shell since the shell would sort the file list which readdir won't.
 
> Your perl version is ?

Too embarassed to tell ;-)  Mea culpa, I'll bring up Perl issues in
the future only when I know I have a recent version...


> > A) tkConfig.sh contains a line like this:
> >    TK_XINCLUDES='# no special path needed'
> > This has nothing to do with R proper but this bug which is either in AIX or
> > the local installation of X shows up during the compilation of R.  Anyhow,
> > this line is plain stupid since when passed on to the compiler _comments
> > out_ the rest of the line!  (Think about:
> >   gcc fine_program.c #no special path needed -lX11 -Xm
> > )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> > Again, I know this is not a problem with R but I'm adding it here for people
> > to find if they use the mailing list archive.
> >
> > After these changes R compiles (producing warnings about duplicate
> > symbols...) and installs.  'make check' fails in mva--report to follow.
> >
> > Regards,
> >   -tom
> >
> > --
> > Email: vogels@cmu.edu
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 29 21:42:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 29 Jul 2001 22:42:41 +0200
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net>
 <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <15204.30017.481370.721345@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> Hi Greg.

>   What you are seeing is probably a result of using R embedded within another
> application/system (Python in this case) but having R originally compiled
> without support for R as a shared library. If you were to build R in the default
> manner, i.e.
>     configure
>     make
> and then re-configure to build as a shared library
>     configure --enable-R-shlib
>     make
> the shared objects that make up the modules and package libraries
> will not be rebuilt. Perhaps they should, but that is not currently
> what happens.

>  If you were to start afresh (e.g. make distclean) 
> and then configure with shared library support
> (
>     configure --enable-R-shlib
>     make
> )
> all should be well and all the .so's that R attempts to load will
> also be linked against libR.so and so the symbols within R on which
> they depend will be located.

>   Hope this is the correct diagnosis of the problem.

Corrent.  However, according to my understanding, re-configuring with a
different set of arguments is not guaranteed to work unless preceded by
make distclean ...

[Argh.  In any case, this means that when checking for the existence of
-lR at package configure time we cannot safely assume that the standard
modules were linked against -lR ... terrible.]

Btw, looking at RSPython's configure.in,

	if test -f "${R_HOME}/bin/libR.so" ; then
	  R_SHARED_LIBRARY="-lR"
	fi

has the `.so' hard-wired which it should not.  The quick solution would
be something like getting the value of LIBR from R_HOME/etc/Makeconf.
Longer term, ideally we should get this info via something like R CMD
config --libs ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Mon Jul 30 03:48:41 2001
From: buhr@stat.wisc.edu (Kevin Buhr)
Date: 29 Jul 2001 21:48:41 -0500
Subject: [Rd] Re: forwarded message from Ross Ihaka
In-Reply-To: Tom Cook's message of "Sun, 29 Jul 2001 20:48:29 -0500"
References: <15204.48365.943424.701549@polaris.biostat.wisc.edu>
Message-ID: <vbay9p7f7xy.fsf@mozart.stat.wisc.edu>

Ross Ihaka wrote to Tom Cook (who CCed it to me):
> 
[ regarding "density" and "angle" for polygon hatching ]
> 
> I have just found a student volunteer to do this.  I will
> know more about how long this will take in about a week.  (Its not a
> huge task, but the student make take while to up to speed on graphics.)

Ross:

You move fast!  However, I'm in Tom's group and have already done some
work on this.

I have what I believe is a pretty good polygon hatching algorithm
written and running in R.  It's robust when implemented in floating
point arithmetic, runs in time at worst linear in the diameter of the
area and O(n log n) in the number of sides of the polygon, and works
well on my ugly testcases (like 500-point random starbursts,
self-intersecting polygons, and so on).  I don't expect any difficulty
in implementing it as a part of R's "graphics.c".

Unless your student is really, really excited about polygon hatching
(and who wouldn't be!), maybe there's something else you want to force
him or her to volunteer to do.  ;)

With a couple days to clean up the code and write some interface glue,
I should be able to send a pure R implementation to the list for
people to play with and critique, if that sounds okay.

Thanks.

Kevin <buhr@stat.wisc.edu>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 08:35:17 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 09:35:17 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.3637.903902.962867@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> ripley@stats.ox.ac.uk writes:

>> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
>> 
>> > Hi,
>> >
>> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
>> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
>> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
>> 
>> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
>> standards!

> Oops.  Should have used the contents of the date stamp file...

>> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
>> > is terminated with a double quote: ".  (This leads to the weird error
>> > message that configure can't execute 'shared' on line 4060.)
>> >      The fix is simply to use single quotes both times:
>> > allow_undefined_flag='${wl}-berok'
>> 
>> That is a generated file.  It coems from m4/libtool.m4.

> ...which means I should have said...
>  Line 1473 in m4/libtool.m4 contains the unterminated string.

> Hmm, should the name of the file suggest to me that it's part of some
> other package, like 'libtool', and I should file a bug report with
> it's maintainer?

Fixed now.  The file comes from libtool 1.4.  Unfortunately, we have to
patch it ourselves, as the libtool 1.4 `patch release' suddenly requires
autoconf 2.50 ...

>> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
>> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
>> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
>> > are passed on to ld correctly.  Which I know that you know...)
>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
>> > patching configure yet...

Very strange.  Configure has

  *aix4.[2-9]*)
    EXPORTFILE="\$(top_builddir)/etc/R.exp"
    cpicflags=
    cxxpicflags=
    fpicflags=
    wl="-Wl,"
    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
    SHLIB_LIBADD="\$(LIBM)"
    ;;

so unless I am missing something obvious all linker flages are protected
via `-Wl,' (which should also work if the C compiler is not gcc).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jul 30 15:18:35 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jul 2001 10:18:35 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Thomas Vogels's message of "29 Jul 2001 16:10:47 -0400"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>


Excerpt from Kurt's email this morning:

>>> > 2) after configure (with CC=gcc but using AIX's linker
>/usr/bin/ld), the
>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>flags
>-bI
>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>linker flags
>>> > are passed on to ld correctly.  Which I know that you know...)
>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>looked into
>>> > patching configure yet...
>
>Very strange.  Configure has
>
>  *aix4.[2-9]*)
>    EXPORTFILE="\$(top_builddir)/etc/R.exp"
>    cpicflags=
>    cxxpicflags=
>    fpicflags=
>    wl="-Wl,"
>    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>    SHLIB_LIBADD="\$(LIBM)"
>    ;;
>
>so unless I am missing something obvious all linker flages are
>protected
>via `-Wl,' (which should also work if the C compiler is not gcc).
>

Sorry, should have been more explicit, I guess: the problem is with
PKG_LIBS (which is the only variable in that Makefile using linker
flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
used AIX's 'cc' compiler, you get in trouble with later using gcc
(e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

There is the question, why configure didn't "see" this coming.  What
would be nice is a warning to the effect that tkConfig.sh is broken
when R can't compile tcltk.c.  (Currently I get messages about libc.a
not found...)

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 18:19:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 19:19:43 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.38703.553276.335905@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Excerpt from Kurt's email this morning:

>>>> > 2) after configure (with CC=gcc but using AIX's linker
>> /usr/bin/ld), the
>>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> flags
>> -bI
>>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> linker flags
>>>> > are passed on to ld correctly.  Which I know that you know...)
>>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> looked into
>>>> > patching configure yet...
>> 
>> Very strange.  Configure has
>> 
>> *aix4.[2-9]*)
>> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> cpicflags=
>> cxxpicflags=
>> fpicflags=
>> wl="-Wl,"
>> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> SHLIB_LIBADD="\$(LIBM)"
>> ;;
>> 
>> so unless I am missing something obvious all linker flages are
>> protected
>> via `-Wl,' (which should also work if the C compiler is not gcc).
>> 

> Sorry, should have been more explicit, I guess: the problem is with
> PKG_LIBS (which is the only variable in that Makefile using linker
> flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> used AIX's 'cc' compiler, you get in trouble with later using gcc
> (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

> There is the question, why configure didn't "see" this coming.  What
> would be nice is a warning to the effect that tkConfig.sh is broken
> when R can't compile tcltk.c.  (Currently I get messages about libc.a
> not found...)

This is asking for a bit much, I think.  How would configure know for
sure that tkConfig.sh is broken?

On second thought: the comment in tkConfig.sh says

	# String to pass to linker to pick up the Tk library from its
	# installed directory.
	TK_LIB_SPEC='@TK_LIB_SPEC@'

so maybe this assumes to be called by ld directly ...

What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Jul 31 16:00:36 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 31 Jul 2001 11:00:36 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Kurt Hornik's message of "Mon, 30 Jul 2001 19:19:43 +0200"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
Message-ID: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Thomas Vogels writes:
> 
> > Excerpt from Kurt's email this morning:
> 
> >>>> > 2) after configure (with CC=gcc but using AIX's linker
> >> /usr/bin/ld), the
> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
> >> flags
> >> -bI
> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
> >> linker flags
> >>>> > are passed on to ld correctly.  Which I know that you know...)
> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
> >> looked into
> >>>> > patching configure yet...
> >> 
> >> Very strange.  Configure has
> >> 
> >> *aix4.[2-9]*)
> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
> >> cpicflags=
> >> cxxpicflags=
> >> fpicflags=
> >> wl="-Wl,"
> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
> >> SHLIB_LIBADD="\$(LIBM)"
> >> ;;
> >> 
> >> so unless I am missing something obvious all linker flages are
> >> protected
> >> via `-Wl,' (which should also work if the C compiler is not gcc).
> >> 
> 
> > Sorry, should have been more explicit, I guess: the problem is with
> > PKG_LIBS (which is the only variable in that Makefile using linker
> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> > used AIX's 'cc' compiler, you get in trouble with later using gcc
> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
> 
> > There is the question, why configure didn't "see" this coming.  What
> > would be nice is a warning to the effect that tkConfig.sh is broken
> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
> > not found...)
> 
> This is asking for a bit much, I think.  How would configure know for
> sure that tkConfig.sh is broken?

I promise to get more sleep soon... 'What would be nice is a warning
to the effect that the Tcl/Tk configuration failed, like:
checking how to compile and link tcl/tk.... failed
'  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
threre are other factors that can cause the fail (config.site...).

What this would boil down to is trying to compile e.g. tkAppInit.c and
see whether compilation and linking works.  But even this may
be asking  fortoo much, this is just one architecture.  Things like these
will continue to happen with AIX as long as there are those '.exp'
files around...


> On second thought: the comment in tkConfig.sh says
> 
> 	# String to pass to linker to pick up the Tk library from its
> 	# installed directory.
> 	TK_LIB_SPEC='@TK_LIB_SPEC@'
> 
> so maybe this assumes to be called by ld directly ...
> 
> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
which is needed badly when linking on AIX.

Thanks!
  -tom

> 
> -k
> 
> 

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 16:47:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107311547.RAA10368@pubhealth.ku.dk>

I found that predict.gnls failed with a wierd error message about a
non-numeric argument to a binary vector in one of three nearly identical
uses.

Error in Inh/Ki : non-numeric argument to binary operator

(Inh and Ki are arguments to the function used in the formula for the
object whose predictions were requested).

It turns out that the problem is in getCovariateFormula().

The final line in getCovariateFormula() in the nlme package (version
3.1-16) is:
    eval(parse(text = paste("~", deparse(form))))

however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
this results in inappropriately placed "~" signs:
For example, in my application with the error, form is

UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)

the result of the paste() operation in the last line of getCovariateFormula
is:

> paste("~",deparse(form))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
[2] "~     Ki)"

extending width.cutoff gives the intended value:

> paste("~",deparse(form,width.cutoff=500))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"

Seems a bit risky for an enforced cutoff in deparse, though.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 31 16:55:48 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 31 Jul 2001 11:55:48 -0400
Subject: [Rd] Problems with RPython when stdin is not a terminal
Message-ID: <5429125E11E4D411AF7300805FE603A8014CECE2@groexmbcr02.pfizer.com>

 
Hi, I've been trying to work with the RPython interface and noticed a
strange problem.  When
stdin is not a terminal the R part of the RPython interface complains.

EG,

	$ python RPython.py
	Initialized R-Python interface package.

works fine, but

	$ python < RPython.py
	


This particular strangeness isn't a problem in this context, but it does
become a problem when I try to use the python-mode of xemacs.  If I do
<Control-c><Control-c> to submit my python code I get the same error:

	Fatal error: you must specify `--save', `--no-save' or
`--vanilla'

Is there a way to fix this?

-Greg

(BTW: I've crossposted this to omega-remote and R-devel.  What list
_should_ I be sending this type of message to?  I also considered R-help
and omega-bugs...)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 17:21:46 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 18:21:46 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)"
References: <200107311547.RAA10368@pubhealth.ku.dk>
Message-ID: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> The final line in getCovariateFormula() in the nlme package (version
> 3.1-16) is:
>     eval(parse(text = paste("~", deparse(form))))
> 
> however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> this results in inappropriately placed "~" signs:
> For example, in my application with the error, form is
> 
> UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> 
> the result of the paste() operation in the last line of getCovariateFormula
> is:
> 
> > paste("~",deparse(form))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> [2] "~     Ki)"
> 
> extending width.cutoff gives the intended value:
> 
> > paste("~",deparse(form,width.cutoff=500))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> 
> Seems a bit risky for an enforced cutoff in deparse, though.

parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
use something like

f <- ~1
f[[2]] <- form
eval(f)

or 

eval(as.call(list(as.name("~"),form)))

or

eval(substitute(~form)) # that's not going to work in S, though...

??

(What is the eval for? Doesn't usually do anything to a
formula argument.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Jul 31 18:46:46 2001
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: Tue, 31 Jul 2001 13:46:46 -0400
Subject: [Rd] "internal" keyword
Message-ID: <3B66EF06.10109@StonyBrook.Edu>

I seem to remember something about an "internal" keyword for R doc 
files.  How do we use it?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 31 19:08:19 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Jul 2001 19:08:19 +0100 (GMT Daylight Time)
Subject: [Rd] "internal" keyword
In-Reply-To: <3B66EF06.10109@StonyBrook.Edu>
Message-ID: <Pine.WNT.4.31.0107311906430.608-100000@tern.stats>

On Tue, 31 Jul 2001, Timothy H. Keitt wrote:

> I seem to remember something about an "internal" keyword for R doc
> files.  How do we use it?

as in src/library/ts/man/ts-internal.Rd

It's documented in `Writing R Extensions': search for `internal' there.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jul 31 19:55:47 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 31 Jul 2001 13:55:47 -0500
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
References: <200107311547.RAA10368@pubhealth.ku.dk>
 <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
Message-ID: <6relqxorm4.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> > 
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> > 
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> > 
> > the result of the paste() operation in the last line of getCovariateFormula
> > is:
> > 
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> > 
> > extending width.cutoff gives the intended value:
> > 
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> > 
> > Seems a bit risky for an enforced cutoff in deparse, though.
> 
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
> 
> f <- ~1
> f[[2]] <- form
> eval(f)
> 
> or 
> 
> eval(as.call(list(as.name("~"),form)))

> or
> 
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
> 
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:10:54 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 16:10:54 -0400
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <OF7528A682.B9E78D2C-ON85256A9A.006E9C38@rtp.epa.gov>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:19:26 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 22:19:26 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312019.WAA11406@pubhealth.ku.dk>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:16:41 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Jul 2001 23:16:41 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312116.XAA11594@pubhealth.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:26:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 23:26:04 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Douglas Bates's message of "31 Jul 2001 13:55:47 -0500"
References: <200107311547.RAA10368@pubhealth.ku.dk> <x2d76h6pd1.fsf@blueberry.kubism.ku.dk> <6relqxorm4.fsf@franz.stat.wisc.edu>
Message-ID: <x2ae1k23kj.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcdowella@mcdowella.demon.co.uk  Sun Jul  1 06:53:54 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Sun, 1 Jul 2001 07:53:54 +0200 (MET DST)
Subject: [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data (PR#1007)
Message-ID: <200107010553.HAA05244@pubhealth.ku.dk>

Full_Name: Andrew Grant McDowell
Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
OS: Windows 2K Professional (Consumer)
Submission from: (NULL) (194.222.243.209)


In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
johnt@tman.dnsalias.com writes
>Can someone help?  In R, I am generating a vector of 1000 samples from 
>Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the 
>vector has been drawn from a population of Bin (1000, 0.25).  I would
>expect a reasonably high p-value.....
>
>Either I am doing something wrong in R, or I am misunderstanding how this
>test should work (both quite possible)...
>
>
>Thanks,
>JT..
>
>
>
>> #### 1000 random samples from binomial dist with mean =.25, n=100...
>> o<-rbinom (1000, 100, .25)
>> mean (o);
>[1] 25.178
>> var (o);
>[1] 19.61193
>> ks.test (o, "pbinom", 100, .25);
>
>        One-sample Kolmogorov-Smirnov test 
>
>data:  o 
>D = 0.0967, p-value = 1.487e-08 
>alternative hypothesis: two.sided
>
>
>
>p-value is mighty small, leading me to reject the null hypothesis that
>the sample has been drawn from the Bin(100, 0.25) distribution!!!
>
>
>

Some more oddities:

> o<-rbinom(10000, 1, 0.25)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 7491
> length(o[o==1])
[1] 2509
> o<-rep(0,10000)
> ks.test(o, "pbinom", 1, 0.25)

         One-sample Kolmogorov-Smirnov test 

data:  o 
D = 0.75, p-value = < 2.2e-16 
alternative hypothesis: two.sided 

> length(o[o==0])
[1] 10000
> length(o[o==1])
[1] 0

Here zeroing out the data does not change the reported D value

After playing about with
ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
for a bit I conjecture that ks.test() takes no account
whatsoever of ties, but merely sorts the input values
and looks for max (position/N - pbinom(value, 1, p)).
Anybody got the source handy?
-- 
A. G. McDowell

After 30 minutes of download, the relevant part of ks.test.R would appear to be

        METHOD <- "One-sample Kolmogorov-Smirnov test"
        n <- length(x)
        x <- y(sort(x), ...) - (0 : (n-1)) / n
        STATISTIC <- switch(alternative,
                            "two.sided" = max(c(x, 1/n - x)),
                            "greater" = max(1/n - x),
                            "less" = max(x))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul  1 07:50:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 1 Jul 2001 08:50:39 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107010650.IAA05352@pubhealth.ku.dk>

On Sun, 1 Jul 2001 mcdowella@mcdowella.demon.co.uk wrote:

> Full_Name: Andrew Grant McDowell
> Version: R 1.1.1 (but source in 1.3.0 looks fishy as well)
> OS: Windows 2K Professional (Consumer)
> Submission from: (NULL) (194.222.243.209)

Please upgrade: we've found a number of Win2k bugs and worked around them
since then, let alone teh bug fixes and improvements in R ....


> In article <xeQ_6.1949$xd.353840@typhoon.snet.net>,
> johnt@tman.dnsalias.com writes
> >Can someone help?  In R, I am generating a vector of 1000 samples from
> >Bin (1000, 0.25).  I then do a Kolmogorov Smirnov test to test if the
> >vector has been drawn from a population of Bin (1000, 0.25).  I would
> >expect a reasonably high p-value.....

You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
extension) assume continuous distributions, so the distribution theory
is not valid in this case?

S-PLUS does stop you doing this:

> ks.gof(o, dist="binomial", size=100, prob=0.25)
Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
discrete distributions when sample size > 50, use the
       Chi-square test


> >Either I am doing something wrong in R, or I am misunderstanding how this
> >test should work (both quite possible)...
> >
> >
> >Thanks,
> >JT..
> >
> >
> >
> >> #### 1000 random samples from binomial dist with mean =.25, n=100...
> >> o<-rbinom (1000, 100, .25)
> >> mean (o);
> >[1] 25.178
> >> var (o);
> >[1] 19.61193
> >> ks.test (o, "pbinom", 100, .25);
> >
> >        One-sample Kolmogorov-Smirnov test
> >
> >data:  o
> >D = 0.0967, p-value = 1.487e-08
> >alternative hypothesis: two.sided
> >
> >
> >
> >p-value is mighty small, leading me to reject the null hypothesis that
> >the sample has been drawn from the Bin(100, 0.25) distribution!!!

That's OK.  That's not what you tested (see above).

An S language point: the `;' are unnecessary.


> Some more oddities:
>
> > o<-rbinom(10000, 1, 0.25)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 7491
> > length(o[o==1])
> [1] 2509
> > o<-rep(0,10000)
> > ks.test(o, "pbinom", 1, 0.25)
>
>          One-sample Kolmogorov-Smirnov test
>
> data:  o
> D = 0.75, p-value = < 2.2e-16
> alternative hypothesis: two.sided
>
> > length(o[o==0])
> [1] 10000
> > length(o[o==1])
> [1] 0
>
> Here zeroing out the data does not change the reported D value

Nor does it change the maximum discrepancy.

> ks.test(rep(1,10000), "pbinom", 1, 0.25)

        One-sample Kolmogorov-Smirnov test

data:  rep(1, 10000)
D = 1, p-value = < 2.2e-16
alternative hypothesis: two.sided

shows 0 is special here.

>
> After playing about with
> ks.test(c(rep(0, X), rep(1, 1000-x)), "pbinom", 1, p)
> for a bit I conjecture that ks.test() takes no account
> whatsoever of ties, but merely sorts the input values
> and looks for max (position/N - pbinom(value, 1, p)).
> Anybody got the source handy?
>
> After 30 minutes of download, the relevant part of ks.test.R would appear to be

Eh? Just type ks.test in your R session for the source ....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jul  1 16:00:01 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 1 Jul 2001 11:00:01 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107011056260.19217-100000@eno.Princeton.EDU>


  Don't know if this is useful to anyone, but here's a "poor man's"
solution I came up with to the CRAN indexing problem ... not as good as
having a full-text web link, but it does have some advantages. (1) it's
already done.  (2) it's relatively easy to download and store this
information off-line, and to update it periodically.  (3) it doesn't (now)
require any extra software.
  I'm sure it could be improved in many ways.
  Sorry if it duplicates existing or developing functionality.
  I haven't actually tested "create.index" below, but I've done all the
component pieces.

  Ben Bolker

get.ind <- function(pkg,CRAN=getOption("CRAN"),
                    descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                    local.ext=".INDEX.tmp") {
  download.file(paste(descrip,"/",pkg,".INDEX",sep=""),
                paste(pkg,local.ext,sep=""))
}

## strsplit produces zero-length chars if there are leading spaces
dropz <- function(x) {
  x[nchar(x)>0]
}

nwords <- function(x) {
  sapply(strsplit.words(x),function(z)length(dropz(z)))
}

strsplit.words <- function(x) {
  strsplit(gsub("[ \t]*"," ",x)," ")
}

tr.index <- function(fn) {
  ##  cat(fn,"\n")
  lines <- scan(fn,what=character(),sep="\n",quiet=TRUE)
  ret <- NULL
  if (length(lines)>0) {
    ## paste continuation lines together
    ## look for initial whitespace; might miss funny formats
    tablines <- grep("^[ \t]",lines)
    lines <- sub("^[\t ]*","",lines) ## now delete initial whitespace
    ## join "continuation sets" (sets of consecutive lines with leading whitespace)
    if (length(tablines)>0) {
      v <- 1:length(lines)
      csets <- v-cumsum(v %in% tablines)
      lines <- sapply(split(lines,csets),paste,collapse=" ")
    }
    pkgname <- gsub("/INDEX","",gsub("[\* ]*","",lines[1]))
    lines <- lines[-1]
    pkg <- rep(pkgname,length(lines))
    fun <- sapply(strsplit.words(lines),"[",1)
    descr <- sapply(strsplit.words(lines),function(z)paste(z[-1],collapse=" "))
    ret <- cbind(pkg,fun,descr)
    dimnames(ret) <- list(NULL,c("Package","Function","Description"))
  }
  ret
}

create.index <- function(CRAN=getOptions("CRAN"),
                         contrib.url=contriburl(CRAN),
                         descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index") {
  pkglist <- CRAN.packages(contrib.url=contrib.url)
  sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
                    local.ext=local.ext)
  indfiles <- list.files(pattern=paste("*",local.ext))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
  noquote(all.ind[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
                     grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()
search.ind("integrat?")
search.ind("adapt")
search.ind("permute")
search.ind("Durbin")

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon Jul  2 14:27:56 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 2 Jul 2001 15:27:56 +0200 (MET DST)
Subject: [Rd] ReleaseLargeFreeVectors SIGSEGV (?) (PR#1008)
Message-ID: <200107021327.PAA13094@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.3.0
OS: GNU/Linux RH6.2, 7.0, Debian 2.2
Submission from: (NULL) (158.37.100.64)


I'm working on interfacing ANN: A Library for Approximate Nearest Neighbor
Searching (http://www.cs.umd.edu/~mount/ANN/) to R, following up a prototype
package I tried in May 2000. ANN is written in C++; my C++ is very weak. Last
year
I didn't experience any problems with memory management, C++ did
its thing, and R did its. I have today recompiled R 1.1.1, and the original
trial
package installs OK, and all the examples can be run repeatedly with no crash.

Could I please ask for confirmation that this problem is on my package's
side and is not a result of the 1.2.0 and later memory handling changes?

I'm now getting replicable segmentation faults in the following context:

(ftp://reclus.nhh.no/pub/R) ann_0.2-2.tar.gz is the old trial package,
ann_0.2-2.pre3.tar.gz is the same with a single change to the shared libs flag
in
the Makefile, and ann_0.2-3.tar.gz is a revision dropping the makefile, since
R now includes C++ in Makeconf.

ann_0.2-3.tar.gz ran through (1.3.0) R CMD check & R CMD build cleanly. 
The examples now trigger the segfault, or it can be triggered in the older 
version by doing in 1.3.0:

> for (i in 1:100) example(ann)

or

> for (i in 1:100) example(nspairs)

or just by:

for (i in 1:100) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)


The typical gdb listing (shortened) is:

(in this case from)

> for (i in 1:100) example(nspairs)

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 311

nspars> an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)

nspars> nspairs(an1)
[1] 304

....


Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x94723a8) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x94727d0) at malloc.c:3023
#2  0x80a6b60 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a82b2 in RunGenCollect (size_needed=2000) at memory.c:1079
#4  0x80a9365 in R_gc_internal (size_needed=2000) at memory.c:1669
#5  0x80a9027 in Rf_allocVector (type=14, length=2000) at memory.c:1541
#6  0x808cb58 in Rf_duplicate (s=0x9548498) at duplicate.c:140
#7  0x80660fa in do_makelist (call=0x8a3f7c0, op=0x81a7c00, args=0x8239258, 
    rho=0x824e510) at builtin.c:367
#8  0x809136f in Rf_eval (e=0x8a3f7c0, rho=0x824e510) at eval.c:424
#9  0x8092cf1 in Rf_evalList (el=0x8a3ee30, rho=0x824e510) at eval.c:1171
#10 0x80912f8 in Rf_eval (e=0x8a3f750, rho=0x824e510) at eval.c:422
#11 0x8091089 in Rf_eval (e=0x824037c, rho=0x8240670) at eval.c:368
#12 0x8090ff4 in Rf_eval (e=0x88211a0, rho=0x8240670) at eval.c:345
#13 0x8092cf1 in Rf_evalList (el=0x8821ddc, rho=0x8240670) at eval.c:1171
#14 0x80912f8 in Rf_eval (e=0x8821dc0, rho=0x8240670) at eval.c:422
#15 0x80a4a9d in do_logic2 (call=0x8821c00, op=0x819f3e8, args=0x8821c1c, 
    env=0x8240670) at logic.c:192
#16 0x809119b in Rf_eval (e=0x8821c00, rho=0x8240670) at eval.c:401
#17 0x8091a64 in do_if (call=0x882292c, op=0x8198d74, args=0x8822948, 
    rho=0x8240670) at eval.c:665
#18 0x809119b in Rf_eval (e=0x882292c, rho=0x8240670) at eval.c:401
#19 0x8092394 in do_begin (call=0x8821820, op=0x819e81c, args=0x8821804, 
) at eval.c:887
...

I have also seen:

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
3111	malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8ab0b10) at malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8ab0b18) at malloc.c:3023
#2  0x40312204 in __builtin_vec_delete (ptr=0x8ab0b18)
   from /usr/local/lib/R/library/ann/libs/ann.so
#3  0x40307b5e in annDeallocPts (pa=@0xbfffd7a0) at ANN.cc:124
#4  0x4030733d in ANN_interface (xp=0x8cd8280, eps=@0x8e2a550, qp=0x8e2a5c8, 
    dnn=0x8d727f0, n_pts=@0x8dc7be8, k=@0x8dc7c08, dim=@0x8dc7c28, 
    q_pts=@0x8dc7c48, bucket_size=@0x8dc7c68, insplit=@0x8dc7c88, 
    inshrink=@0x8dc7ca8, priority=@0x8dc7cc8, maxpts=@0x8dc7ce8, nn=0x8ace0d0)
    at ANN_interface.cc:133
#5  0x808a557 in do_dotCode (call=0x8a3f098, op=0x81a7a5c, args=0x8a3d388, 
    env=0x8a4326c) at dotcode.c:1310
#6  0x809136f in Rf_eval (e=0x8a3f098, rho=0x8a4326c) at eval.c:424
#7  0x8092a67 in do_set (call=0x8a3f044, op=0x819e8c4, args=0x8a3f060, 
    rho=0x8a4326c) at eval.c:1092
....


and annDeallocPts() is the C++ deconstructor where:

void annDeallocPts(ANNpointArray &pa)		// deallocate points
{
    delete [] pa[0];				// dealloc coordinate storage
    delete [] pa;				// dealloc points
    pa = NULL;
}


platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    3.0              
year     2001             
month    06               
day      22     
language R
 
[rsb@reclus rsb]$ gcc -v
Reading specs from /usr/lib/gcc-lib/i586-mandrake-linux/2.95.3/specs
gcc version 2.95.3 19991030 (prerelease)
[rsb@reclus rsb]$ rpm -q gcc
gcc-2.95.2-7mdk
[rsb@reclus rsb]$ 

(Same on R 1.3.0 on RH70, gcc 2.96-85, Debian 2.2, gcc 2.95.2)

Debian gdb output:

> for (i in 1:10) an1 <- ann(cbind(runif(5000), runif(5000)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x400fbb69 in free () from /lib/libc.so.6
(gdb) bt
#0  0x400fbb69 in free () from /lib/libc.so.6
#1  0x400fb9fd in free () from /lib/libc.so.6
#2  0x80a3210 in ReleaseLargeFreeVectors () at memory.c:673
#3  0x80a4932 in RunGenCollect (size_needed=20000) at memory.c:1079
#4  0x80a59bd in R_gc_internal (size_needed=20000) at memory.c:1669
#5  0x80a5687 in Rf_allocVector (type=14, length=20000) at memory.c:1541
#6  0x808a095 in Rf_duplicate (s=0x8fab148) at duplicate.c:140
#7  0x806a479 in ascommon (call=0x8268740, u=0x8fab148, type=18)
    at coerce.c:954


                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sherwin@nlm.nih.gov  Mon Jul  2 20:58:16 2001
From: sherwin@nlm.nih.gov (sherwin@nlm.nih.gov)
Date: Mon, 2 Jul 2001 21:58:16 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107021958.VAA15770@pubhealth.ku.dk>

Prof. Ripley,

Thanks for the tip on how to compile R. We successfully compiled the R until we
met another error:

Underfull \hbox (badness 10000) has occurred while \output is active
[]\T1/aer/m/n/10 null null null 
[881] [882] [883]
Underfull \vbox (badness 10000) has occurred while \output is active [884] 
Underfull \vbox (badness 10000) has occurred while \output is active [885]
[886] [887]
Underfull \vbox (badness 10000) has occurred while \output is active [888] 
[889] [890] [891]) [892]
No file refman.ind.
(refman.aux) )
(see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
enc><cmbsy7.pfb>
! Warning: pdftex (file cmbsy7.pfb):
Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
The name specified in map file was ignored
<cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
fb
! Warning: pdftex (file cmitt10.pfb):
glyph `quotedblright' undefined
><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
<cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
.pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
10.pfb> 
Output written on refman.pdf (897 pages, 3551555 bytes).
Transcript written on refman.log.
*** Error code 1
make: Fatal error: Command failed for target `refman.pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
*** Error code 1
make: Fatal error: Command failed for target `pdf'
Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
*** Error code 1 (ignored)

Do you have any ideas about what might be wrong?

Thanks.
Ziying Sherwin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jul  2 21:26:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 2 Jul 2001 22:26:14 +0200 (MET DST)
Subject: [Rd] Fail to build R (PR#1005)
Message-ID: <200107022026.WAA15859@pubhealth.ku.dk>

On Mon, 2 Jul 2001, Ziying Sherwin wrote:

> Prof. Ripley,
>
> Thanks for the tip on how to compile R. We successfully compiled the R until we
> met another error:
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\T1/aer/m/n/10 null null null
> [881] [882] [883]
> Underfull \vbox (badness 10000) has occurred while \output is active [884]
> Underfull \vbox (badness 10000) has occurred while \output is active [885]
> [886] [887]
> Underfull \vbox (badness 10000) has occurred while \output is active [888]
> [889] [890] [891]) [892]
> No file refman.ind.
> (refman.aux) )
> (see the transcript file for additional information)<cmmi.enc><cmmi5.pfb><cmsy.
> enc><cmbsy7.pfb>
> ! Warning: pdftex (file cmbsy7.pfb):
> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map file)!
> The name specified in map file was ignored
> <cmtextit.enc><cmbxti10.pfb><cmmib10.pfb><cmtext.enc><cmitt10.p
> fb
> ! Warning: pdftex (file cmitt10.pfb):
> glyph `quotedblright' undefined
> ><cmr5.pfb><cmex.enc><cmex10.pfb><cmsy7.pfb><cmr7.pfb><cmmi7.pfb><cmmi10.pfb>
> <cmttext.enc><cmtt9.pfb><cmbx10.pfb><cmti10.pfb><cmtt10.pfb><cmtt12.pfb><cmsl10
> .pfb><cmss10.pfb><cmsy10.pfb><cmr12.pfb><cmr17.pfb><cmss17.pfb><cmbx12.pfb><cmr
> 10.pfb>
> Output written on refman.pdf (897 pages, 3551555 bytes).
> Transcript written on refman.log.
> *** Error code 1
> make: Fatal error: Command failed for target `refman.pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc/manual
> *** Error code 1
> make: Fatal error: Command failed for target `pdf'
> Current working directory /site5/R_1.3.0.dir/R-1.3.0/doc
> *** Error code 1 (ignored)
>
> Do you have any ideas about what might be wrong?


Yes. Your pdftex installation is corrupt.  Is the error message

> Base font name mismatch: `CMBSY7' (in font file) and  `cmbsy7' (in map
file)!

not clear enough?  Get a correct pdftex installation, with a correct
psfonts.map file!

Looks like there might be more wrong than that.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Jul  2 23:31:51 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 3 Jul 2001 00:31:51 +0200 (MET DST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
Message-ID: <200107022231.AAA16296@pubhealth.ku.dk>

Brian
The following (which is new to rw1030) occurs with both
Windows 98 & Windows ME.  I have not tested behaviour
under Unix or Linux, but I expect it is no different.

text.rpart() prints unwanted NAs (presumably in the
splitting criterion position) on terminal nodes.

          Criterion <- factor(paste("Leaf", 1:5))
          Node <- factor(1:5)
          assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
          nobs <- dim(tree.df)[[1]]
          u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F, 
control = list(minsplit = 2, minbucket
                   = 1, cp = 9.999999999999998e-008))
          plot(u.tree, uniform=T)
          text(u.tree)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 3.0
  year = 2001
  month = 06
  day = 22
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcdowella@mcdowella.demon.co.uk  Tue Jul  3 05:45:52 2001
From: mcdowella@mcdowella.demon.co.uk (mcdowella@mcdowella.demon.co.uk)
Date: Tue, 3 Jul 2001 06:45:52 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical distribution if there are ties in the data
Message-ID: <200107030445.GAA17035@pubhealth.ku.dk>

In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
Brian D Ripley <ripley@stats.ox.ac.uk> writes
>
>You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
>extension) assume continuous distributions, so the distribution theory
>is not valid in this case?
>
>S-PLUS does stop you doing this:
>
>> ks.gof(o, dist="binomial", size=100, prob=0.25)
>Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
>discrete distributions when sample size > 50, use the
>       Chi-square test
>

Thank you for your prompt reply to my bug report. While I agree that
the distribution theory for the Kolmogorov tests assumes a continuous
distribution, I would like to request a modification to the 
existing routines. The purpose of this would be to provide a result 
that would represent a conservative test in the case when the underlying
distribution is discrete.

This would be in accord with P 432 of the 3rd edition of "Practical
Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
and Arnold, both of which refer to Noether (1963) "Note on the
Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
reared on these and similar textbooks would be less surprised at the
behaviour of R if this modification was made, whereas users who do
not attempt to apply the Kolmogorov-Smirnov test to discrete
distributions would not notice any difference.

It would also be in accord with the behaviour of R in the two-sample
case, where the effect of the existing code seems to be to provide
a conservative test (since the statistic returned is no larger than
might be returned in any possible tie-breaking) coupled with a warning,
(to which I would have no objection in the one-sample case).

It seems to me that the following modification would suffice: replace

        x <- y(sort(x), ...) - (0 : (n-1)) / n

with

        x <- sort(x)
        untied <- c(x[1:n-1] != x[2:n], TRUE)
        x <- y(x, ...) - (0 : (n-1)) / n
        x <- x[untied]

Users dealing with data derived from continuous distributions would
not see any difference, because (except with very small probability 
due to floating point inaccuracy) they would never produce tied data.
-- 
A. G. McDowell

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:18:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 3 Jul 2001 07:18:26 +0200 (MET DST)
Subject: (PR#1007) [Rd] ks.test doesn't compute correct empirical
Message-ID: <200107030518.HAA17101@pubhealth.ku.dk>

On Tue, 3 Jul 2001, A. G. McDowell wrote:

> In message <Pine.GSO.4.31.0107010731110.7616-100000@auk.stats>, Prof
> Brian D Ripley <ripley@stats.ox.ac.uk> writes
> >
> >You do realize that the Kolmogorov tests (and the Kolmogorov-Smirnov
> >extension) assume continuous distributions, so the distribution theory
> >is not valid in this case?
> >
> >S-PLUS does stop you doing this:
> >
> >> ks.gof(o, dist="binomial", size=100, prob=0.25)
> >Problem in not.cont1(ttest = d.test, nx = nx, alt.ex..: For testing
> >discrete distributions when sample size > 50, use the
> >       Chi-square test
> >
>
> Thank you for your prompt reply to my bug report. While I agree that
> the distribution theory for the Kolmogorov tests assumes a continuous
> distribution, I would like to request a modification to the
> existing routines. The purpose of this would be to provide a result
> that would represent a conservative test in the case when the underlying
> distribution is discrete.
>
> This would be in accord with P 432 of the 3rd edition of "Practical
> Nonparametric Statistics", by Conover, and section 25.38 of "Kendall's
> Advanced Theory of Statistics, 6th Edition, Vol 2A", by Stewart, Ord,
> and Arnold, both of which refer to Noether (1963) "Note on the
> Kolmogorov Statistic in the discrete case", Metrika, 7, 115. Users
> reared on these and similar textbooks would be less surprised at the
> behaviour of R if this modification was made, whereas users who do
> not attempt to apply the Kolmogorov-Smirnov test to discrete
> distributions would not notice any difference.

(Hopefully readers of those textbooks would understand that the results you
reported as a bug *are* the behaviour of KS test.  Nowhere does R
say it has implemented a modified KS test.  The one data point we have
suggests otherwise ....)

> It would also be in accord with the behaviour of R in the two-sample
> case, where the effect of the existing code seems to be to provide
> a conservative test (since the statistic returned is no larger than
> might be returned in any possible tie-breaking) coupled with a warning,
> (to which I would have no objection in the one-sample case).
>
> It seems to me that the following modification would suffice: replace
>
>         x <- y(sort(x), ...) - (0 : (n-1)) / n
>
> with
>
>         x <- sort(x)
>         untied <- c(x[1:n-1] != x[2:n], TRUE)
>         x <- y(x, ...) - (0 : (n-1)) / n
>         x <- x[untied]

In your original examples, this reduces a sample of size 10000 to one of
size 101 or 2.  Conservative - yes.   Useful - very unlikely!

> Users dealing with data derived from continuous distributions would
> not see any difference, because (except with very small probability
> due to floating point inaccuracy) they would never produce tied data.

There are circumstances in which one would want the original KS definition
for all data sets, where one wnats the test value and not the p value.

I've added a warning, but I do not think we should be implementing a
different definition.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul  3 06:30:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 3 Jul 2001 06:30:27 +0100 (BST)
Subject: [Rd] text.rpart: Unwanted NA labels on terminal nodes (PR#1009)
In-Reply-To: <200107022231.AAA16296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0107030622470.20830-100000@auk.stats>

On Tue, 3 Jul 2001 john.maindonald@anu.edu.au wrote:

> Brian
> The following (which is new to rw1030) occurs with both
> Windows 98 & Windows ME.  I have not tested behaviour
> under Unix or Linux, but I expect it is no different.

I think you mean this is a change from rpart 2.0-2 to 3.0-0: packages have
version numbers too!

It's a R/S difference (I would say an R bug) for which the workaround got
lost.  At the top of text.rpart insert

    FUN1 <- function(x, y, lab,...){
        ind <- lab != "NA"
        FUN(x[ind], y[ind], lab[ind], ...)
    }

and replace FUN by FUN1 inside if(splits) {} (but not at the end).

Fixed in rpart 3.0-1, so update.packages() will give this to you shortly.

The difference can be seen in

> plot(1:3)
> text(2, 3, NA)

S's behaviour is much more convenient and logical.


> text.rpart() prints unwanted NAs (presumably in the
> splitting criterion position) on terminal nodes.
>
>           Criterion <- factor(paste("Leaf", 1:5))
>           Node <- factor(1:5)
>           assign("tree.df", data.frame(Criterion = Criterion, Node = Node))
>           nobs <- dim(tree.df)[[1]]
>           u.tree <- rpart(Node ~ Criterion, data = tree.df, all = F,
> control = list(minsplit = 2, minbucket
>                    = 1, cp = 9.999999999999998e-008))
>           plot(u.tree, uniform=T)
>           text(u.tree)
>
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 3.0
>   year = 2001
>   month = 06
>   day = 22
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 09:42:30 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 10:42:30 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV began at 1.2.0
Message-ID: <200107030842.KAA18671@pubhealth.ku.dk>

This behaviour is confirmed for RH70, RH62, Debian 2.2 on 3 different
Pentium-class i386. I've checked back and package ann_0.2-2 works on
1.1.1, but fails with seg. faults on 1.2.0 (ann_0.2-2.pre3.tar.gz to
accommodate the change in Makeconf) and subsequent (1.2.0 checked today on
RH62 with gcc 2.95.3 19991030 (prerelease)).

It is most likely that 1.1.1 was too forgiving, and that better memory
management from 1.2.0 is uncovering bad code in the *.so, but could there
be an interaction between dynamic memory management in R >= 1.2 and C++
(g++)? (namespace???). It strikes me as odd that the SIGSEGV sometimes
comes from the C++ side (annDeallocPts - __builtin_vec_delete), and
sometimes from the R side (ReleaseLargeFreeVectors), with no pattern that
I can see.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Tue Jul  3 14:19:34 2001
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Tue, 3 Jul 2001 15:19:34 +0200 (MET DST)
Subject: [Rd] (PR#1008) SIGSEGV under 1.1.1 too
Message-ID: <200107031319.PAA22626@pubhealth.ku.dk>

It looks as though the problem isn't in R - I provoked a SIGSEGV under R
1.1.1 on RH62:

> for (i in 1:100) an1 <- ann(cbind(runif(1000), runif(1000)), k = 4)
> for (i in 1:100) an1 <- ann(cbind(runif(1001), runif(1001)), k = 4)

Program received signal SIGSEGV, Segmentation fault.
0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at malloc.c:3111
3111    malloc.c: No such file or directory.
(gdb) bt
#0  0x40111109 in chunk_free (ar_ptr=0x401a5d40, p=0x8849a30) at
malloc.c:3111
#1  0x40110f9a in __libc_free (mem=0x8849a38) at malloc.c:3023
#2  0x4002c814 in _rl_free_history_entry () from /usr/lib/libreadline.so.3
#3  0x4002ac0f in readline_internal_teardown () from
/usr/lib/libreadline.so.3
#4  0x4003a07e in rl_callback_read_char () from /usr/lib/libreadline.so.3
#5  0x80e4a8f in Rstd_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at sys-std.c:376
#6  0x80e2b6e in R_ReadConsole (prompt=0x40982210 "> ", 
    buf=0xbffff038 "for (i in 1:100) an1 <- ann(cbind(runif(1000),
runif(1000)), k = 4)\n", len=1024, addtohistory=1) at system.c:66
#7  0x8093618 in R_ReplConsole (rho=0x402dc338, savestack=0,
browselevel=0)
    at main.c:128
#8  0x8093e86 in run_Rmainloop () at main.c:454
#9  0x8093ec4 in Rf_mainloop () at main.c:468
#10 0x80e319a in main (ac=0, av=0xbffff934) at system.c:222

The first 100 calls went OK (as did 100 prior to that), but increasing the
number of points by one triggered the fault. It looks like memory
allocation on the C++ side, to which R >= 1.2.0 is more sensitive than
before. 

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Tue Jul  3 21:36:00 2001
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Tue, 3 Jul 2001 22:36:00 +0200 (MET DST)
Subject: [Rd] plot.mts() with type="p" (PR#1010)
Message-ID: <200107032036.WAA25029@pubhealth.ku.dk>

There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
do a multiple point plot (this worked in 1.2.2).

Reproduce by:
> version
	 _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   
> plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  : 
        formal argument "type" matched by multiple actual arguments
> traceback()
3: plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, 
       col = col, bg = bg, pch = pch, ann = ann, type = "n", ...)
2: plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log, col = col, 
       bg = bg, pch = pch, ann = ann, type = "n", ...)
1: plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> 
The problem is that plot.mts calls plot() with an explicit type = "n"
as well as ..., so the type argument is sent twice.

My short-term solution is to change plot.mts() so that:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = col, bg = bg, pch = pch, ann = ann, type = "n",
            ...)
becomes:

    for (i in 1:nser) {
        plot(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,
            col = 0, bg = bg, pch = pch, ann = ann, 
            ...)

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pauljohn@ukans.edu  Tue Jul  3 21:55:22 2001
From: pauljohn@ukans.edu (pauljohn@ukans.edu)
Date: Tue, 3 Jul 2001 22:55:22 +0200 (MET DST)
Subject: [Rd] R-intro suggestions part II (PR#1011)
Message-ID: <200107032055.WAA25430@pubhealth.ku.dk>

Brian Ripley said that, if I sent these here, they might find their way
to the R-intro team.  So, here is another installment:


Concerning this section:

Data permanency and removing objects.

This is the first place R-intro discusses objects.  I was thinking a
better discussion of objects and syntax is needed, perhaps here, or in
the later section "Objects, their modes and attributes."  I suggest
this:


The fact that R is an object-oriented approach to programming for
statistical analysis has pervasive implications.  If one has studied a
programming language like Java or C++, the notions of object and
method are not new.  For readers who have not studied languages like
that, perhaps we can offer a brief explanation.  An object is a "self
contained data holder" that can follow instructions (do calculations,
provide values).  One intention of this design is to keep things
separate if they belong that way, to reduce the risk that one
calculation accidentally influences the result of another.
Object-orientation also has important implications for the way the
different parts of a program fit together.  Since an object is
supposed to be able to carry out a certain set of actions (which are
called methods, but in R one often says "functions" or "procedures"),
then both the user and the programmer understand what the object can
be expected to do.  There are numerous implications of object
orientation that come into play "under the hood" of the R statistical
engine, but it is not important to delve into them from a user's point
of view.


There is one wrinkle about the syntax of R that we hasten to
emphasize.  In object-oriented computer languages, syntax typically
puts the object first, followed by the instruction, followed any needed
parameters.  In Java, to tell the object "regression" to calculate
estimates for vectors y and x, one would write something like:

   regression.estimate(y,x);

Assuming that object's class has an "estimate" method which knows how
to handle the input, we would be in business.

In R, the syntax is totally different.  Instead of thinking of the
object itself as the primary thing, the syntax in R is designed to use
the method name--the instruction--as the leading concept, and then the
object that is being acted upon is given as a parameter.

When a model gives a result in R, the result is almost invariably an
object, which can then be "poked and prodded" with other methods.
If a linear regression is calculated, for example:

resultObject <- lm(y~x)

the return value is an object.  But, unlike other object-oriented
languages, in R one would write summary(resultObject), or
coefficients(resultObject), rather than the Java style
result_object.summary() or some such thing, in order to investigate the
result.


Paul E. Johnson
Political Science
University of Kansas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Wed Jul  4 10:09:08 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Wed, 04 Jul 2001 11:09:08 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
References: <200107032036.WAA25029@pubhealth.ku.dk>
Message-ID: <3B42DD34.97377CA7@ci.tuwien.ac.at>

Ray.Brownrigg@mcs.vuw.ac.nz wrote:
> 
> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
> do a multiple point plot (this worked in 1.2.2).
>
> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>         formal argument "type" matched by multiple actual arguments

Yes, this seems to be a bug. The reason is the new panel argument in
plot.mts. Every single plot in plot.mts is set up by:

        plot(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             type="n", ...)
        panel(x[, i], col = col, bg = bg, pch = pch, ...)

And I suspect you don't really need to pass the ... argument to
plot(type="n") because what you really see is what panel produces after
that. If you remove the ... in plot the example above works. It also
works, if both commands are replaced by a single

        panel(x[, i], axes = FALSE, xlab="", ylab="",
             log = log, col = col, bg = bg, pch = pch, ann = ann,
             ...)

Hope this helps
Achim


---------------------------
Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From canjels@yahoo.com  Wed Jul  4 12:53:58 2001
From: canjels@yahoo.com (canjels@yahoo.com)
Date: Wed, 4 Jul 2001 13:53:58 +0200 (MET DST)
Subject: [Rd] html help on R language (PR#1012)
Message-ID: <200107041153.NAA00020@pubhealth.ku.dk>

Full_Name: Eugene Canjels
Version: 1.3.0
OS: windows 98
Submission from: (NULL) (24.18.150.226)


Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to 
"..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

Also within file "..\R\rw1030\doc\html\packages.html" links to individual
packages don't work since they refer to the d: drive rather than the c: drive
where R is installed.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul  4 13:49:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 4 Jul 2001 13:49:25 +0100 (GMT Daylight Time)
Subject: [Rd] html help on R language (PR#1012)
In-Reply-To: <200107041153.NAA00020@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0107041341150.932-100000@gannet>

On Wed, 4 Jul 2001 canjels@yahoo.com wrote:

> Full_Name: Eugene Canjels
> Version: 1.3.0
> OS: windows 98
> Submission from: (NULL) (24.18.150.226)
>
>
> Help file "..\R\rw1030\doc\html\rwin.html" does not contain link to
> "..\R\rw1030\doc\html\function.html" as it did in R 1.2.3

That's intentional: that file is only a stub under 1.3.0, as you will see
by looking at it.  Don't assume that all changes are bugs!

> Also within file "..\R\rw1030\doc\html\packages.html" links to individual
> packages don't work since they refer to the d: drive rather than the c: drive
> where R is installed.

You need to run link.html.help() after installation.  Using help.start()
or installing a package does it automatically for you, so most people would
never notice.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 21:47:07 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 16:47:07 -0400 (EDT)
Subject: [Rd] indexing
Message-ID: <Pine.GSO.4.33.0107041644440.2140-100000@eno.Princeton.EDU>



  OK, several boneheaded mistakes -- sorry.
  Replace the last two functions with the following:

create.index <- function(CRAN=getOption("CRAN"),
                         contriburl=contrib.url(CRAN),
                        descrip=paste(contrib.url(CRAN),"/Descriptions",sep=""),
                         local.ext=".INDEX.tmp",
                         save=TRUE,savefile="CRAN-index",
                         download=TRUE) {
  if (download) {
    pkglist <- CRAN.packages(contriburl=contriburl)
    sapply(pkglist[,1],get.ind,CRAN=CRAN,descrip=descrip,
           local.ext=local.ext)
  }
  indfiles <- list.files(pattern=paste("*",local.ext,sep=""))
  CRAN.index <- do.call("rbind",lapply(indfiles,tr.index))
  answer <- substr(readline("Delete temporary index files (y/N)? "), 1, 1)
  if (answer == "y" | answer == "Y")
    unlink(indfiles, TRUE)
  if (save) save(CRAN.index,file=savefile)
  CRAN.index
}

search.ind <- function(str,indexmat=CRAN.index,ignore.case=TRUE) {
noquote(indexmat[unique(c(grep(str,indexmat[,"Function"],ignore.case=ignore.case),
            grep(str,indexmat[,"Description"],ignore.case=ignore.case))),])
}

CRAN.index <- create.index()

** NEW ADDRESS as of Aug. 1 ***
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:05:50 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 4 Jul 2001 23:05:50 +0200 (MET DST)
Subject: [Rd] typos (PR#1013)
Message-ID: <200107042105.XAA03159@pubhealth.ku.dk>


I think these are all current in R 1.3.0 ...

1. xfig: Note: "One" should be "Only" ?

2. package base, scale.html:
"who's default method" -> "whose default method"

3. "wierd" misspelled in base/html/Hershey.html

4. "details" is doubled under the "Details" section of
lib/R/library/base/html/deviance.html

5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

6. "argumetn" in list of arguments in help(complex)



Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Jul  4 22:07:32 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 4 Jul 2001 17:07:32 -0400 (EDT)
Subject: [Rd] feature request: readline
Message-ID: <Pine.GSO.4.33.0107041705430.2295-100000@eno.Princeton.EDU>


  Is there a reason that readline still has a 32-character limit for the
prompt, or is this just historical?

  Now that I/O is much expanded (thanks Dr. Ripley), readline() could be
replaced by:

readline <- function(prompt="") {
  cat(prompt)
  readLines(n=1)
}

  Ben Bolker

Permanent address:
Zoology Department, University of Florida
bolker@zoo.ufl.edu
(352) 392-5697

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Jul  5 08:51:46 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 5 Jul 2001 09:51:46 +0200 (MET DST)
Subject: [Rd] documentation t.test (PR#1014)
Message-ID: <200107050751.JAA05129@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: R.1.2.3
OS: linux
Submission from: (NULL) (130.225.67.199)


In the package ctest (installed with R by default... it must be, since
I do not find it on the CRAN page listing the contributed packages),
the attribute of the object returned by the function t.test() holding the
degrees of freedom is documented as being parameters, while the attribute
name is parameter (no 's').

I do not feel that good to report such a small thing: I am an enthusiastic
R user for some time now. I hope this will be taken as an humble
contribution (I usually do not like people who only find typos to point out
in my work  =)     ).


All the best,



Laurent


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:12 +0200
Subject: [Rd] typos (PR#1013)
In-Reply-To: <200107042105.XAA03159@pubhealth.ku.dk>
References: <200107042105.XAA03159@pubhealth.ku.dk>
Message-ID: <15172.25640.30672.496758@mithrandir.hornik.net>

>>>>> bolker  writes:

> I think these are all current in R 1.3.0 ...

> 1. xfig: Note: "One" should be "Only" ?

> 2. package base, scale.html:
> "who's default method" -> "whose default method"

> 3. "wierd" misspelled in base/html/Hershey.html

> 4. "details" is doubled under the "Details" section of
> lib/R/library/base/html/deviance.html

> 5. "it \emph{not}" to "is \emph{not}" in help(matrix) Details

> 6. "argumetn" in list of arguments in help(complex)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul  5 13:57:29 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 5 Jul 2001 14:57:29 +0200
Subject: [Rd] documentation t.test (PR#1014)
In-Reply-To: <200107050751.JAA05129@pubhealth.ku.dk>
References: <200107050751.JAA05129@pubhealth.ku.dk>
Message-ID: <15172.25657.751757.892076@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: R.1.2.3
> OS: linux
> Submission from: (NULL) (130.225.67.199)


> In the package ctest (installed with R by default... it must be, since
> I do not find it on the CRAN page listing the contributed packages),
> the attribute of the object returned by the function t.test() holding
> the degrees of freedom is documented as being parameters, while the
> attribute name is parameter (no 's').

> I do not feel that good to report such a small thing: I am an
> enthusiastic R user for some time now. I hope this will be taken as an
> humble contribution (I usually do not like people who only find typos
> to point out in my work =) ).

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From con@maths.uwa.edu.au  Fri Jul  6 09:39:04 2001
From: con@maths.uwa.edu.au (con@maths.uwa.edu.au)
Date: Fri, 6 Jul 2001 10:39:04 +0200 (MET DST)
Subject: [Rd] R 1.3  on iMacs (PR#1015)
Message-ID: <200107060839.KAA14347@pubhealth.ku.dk>

Hi,

I have been trying to run R 1.3 on a Lab of iMacs running system 9.0. It
starts up fine but it wont accept any input from the keyboard. I can
select commands and use the copy and paste menu option and this works.

It works fine on my G4 running 9.04.

Apart from having to install the latest carbonlib, is there anything
else needed to get it running on system 9.0 on iMacs?

If you don't know of any problem then I will try to install 9.04 on one
of these machines and see if that helps.

Thanks for any feedback.
_____________________________________________________________________
Con Savas                                 email: con@maths.uwa.edu.au
Programmer                               http://maths.uwa.edu.au/~con
Department of Mathematics and Statistics                           
The University of Western Australia            Phone + 61 8 9380 3184
35 Stirling Hwy Crawley 6009                   Fax   + 61 8 9380 1028

He shall see the travail of his soul, and be satisfied:     Isaiah 53
_____________________________________________________________________

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Jul  6 18:42:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 6 Jul 2001 10:42:10 -0700 (PDT)
Subject: [Rd] read.spss, R 1.3.0, win2k
Message-ID: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu>


read.spss() is giving "Rgui.exe has generated errors and will be
closed..." on all the files I have tried (the same happens with Rterm as
well). This is R1.3.0 and the current `foreign',under Win2k.

The problem doesn't happen under Linux on a different machine and
didn't happen with an earlier version of R and foreign under NT4 on a
different machine.

As I updated to a new computer, new OS and new version of R at the same
time I don't know which component is responsible. Has anyone used
read.spss() with R 1.3.0 under Windows?


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Fri Jul  6 21:23:15 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Fri, 6 Jul 2001 22:23:15 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062023.WAA19640@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.0
OS: Windows Me
Submission from: (NULL) (216.175.122.171)


I realized that the title of packages in the library index when they are in a
bundle is the title of the bundle and not the package. 

It looks like the TITLE file, which apparently is used for generating the
library index, takes the value of the bundle's title and not the package's
title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
the package's DESCRIPTION.in files concatenated), and found that the TITLE file
takes value of the *last* Title field, which happens to be the Title field of
the bundle.

Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
build?

My generated DESCRIPTION file looks like this:

Package: myPackage
Version: 0.1
Date: 2001/07/05
Title: The myBundle bundle - myPackage
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


Bundle: myBundle
Version: 0.6
Date: 2001/06/28
Title: The myBundle bundle
Author: Henrik Bengtsson
Maintainer: Henrik Bengtsson
Description: Bla bla bla...
License: GPL version 2 or newer
URL: http://www.braju.com/R/


>R.version
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.0
year     2001
month    06
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jul  6 21:38:37 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Jul 2001 22:38:37 +0200 (MET DST)
Subject: [Rd] Title of bundled packages in the library index (PR#1017)
Message-ID: <200107062038.WAA19708@pubhealth.ku.dk>

On Fri, 6 Jul 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.0
> OS: Windows Me
> Submission from: (NULL) (216.175.122.171)
>
>
> I realized that the title of packages in the library index when they are in a
> bundle is the title of the bundle and not the package.
>
> It looks like the TITLE file, which apparently is used for generating the
> library index, takes the value of the bundle's title and not the package's
> title. I played around with the DESCRIPTION file (the bundle's DESCRIPTION and
> the package's DESCRIPTION.in files concatenated), and found that the TITLE file
> takes value of the *last* Title field, which happens to be the Title field of
> the bundle.
>
> Is this a bug in how the TITLE file is generated or how the DESCRIPTION file is
> build?

Neither.  Bundles do not have Title nor Description fields, but
BundleDescription fields. In short, the bug is in your bundle.

Look harder at the example in R-exts, or read

  The Title field should give a short description of the package and not
  have any continuation lines.

Note: `the package'.


> My generated DESCRIPTION file looks like this:
>
> Package: myPackage
> Version: 0.1
> Date: 2001/07/05
> Title: The myBundle bundle - myPackage
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> Bundle: myBundle
> Version: 0.6
> Date: 2001/06/28
> Title: The myBundle bundle
> Author: Henrik Bengtsson
> Maintainer: Henrik Bengtsson
> Description: Bla bla bla...
> License: GPL version 2 or newer
> URL: http://www.braju.com/R/
>
>
> >R.version
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 7 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107070515.HAA16549@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 07:54:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 08:54:41 +0200
Subject: [Rd] Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
References: <OFE06B18BD.552E3547-ONC1256A81.0059F5D8@netia.pl>
 <Pine.LNX.4.31.0107061741270.1498-100000@gannet.stats>
Message-ID: <15176.945.261022.940709@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> The first few errors mean that you don't have xdr support in the
> libraries you included. R checks for the headers rpc/rpc.h and
> rpc/xdr.h so you have those.

> Try man xdr and see if it requires an additional library.

Actually, I think configure is not smart enough about this.

We currently test for the headers but not for any xdr_* library
function.  As we say that only ISO C can be assumed and everything else
must be tested for, I think we must test for the library functions too.
But where?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul  8 09:23:06 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 8 Jul 2001 10:23:06 +0200
Subject: [Rd] plot.mts() with type="p" (PR#1010)
In-Reply-To: <3B42DD34.97377CA7@ci.tuwien.ac.at>
References: <200107032036.WAA25029@pubhealth.ku.dk>
 <3B42DD34.97377CA7@ci.tuwien.ac.at>
Message-ID: <15176.6250.339968.116003@mithrandir.hornik.net>

>>>>> Achim Zeileis writes:

> Ray.Brownrigg@mcs.vuw.ac.nz wrote:
>> 
>> There appears to be a bug in plot.mts() in R-1.3.0 when attempting to
>> do a multiple point plot (this worked in 1.2.2).
>> 
>> > plot.mts(ts(matrix(runif(10), ncol = 2)), type = "p")
>> Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
>> formal argument "type" matched by multiple actual arguments

> Yes, this seems to be a bug. The reason is the new panel argument in
> plot.mts. Every single plot in plot.mts is set up by:

>         plot(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              type="n", ...)
>         panel(x[, i], col = col, bg = bg, pch = pch, ...)

> And I suspect you don't really need to pass the ... argument to
> plot(type="n") because what you really see is what panel produces
> after that. If you remove the ... in plot the example above works. It
> also works, if both commands are replaced by a single

>         panel(x[, i], axes = FALSE, xlab="", ylab="",
>              log = log, col = col, bg = bg, pch = pch, ann = ann,
>              ...)

If this was only about plot.mts(), I'd say that the `...' are graphics
parameters and not additional arguments to the panel function, and hence
the behavior is as expected.  The desired effect can be obtained by
using `panel = points'.

Btw, we get the same for

R> data(USJudgeRatings)
R> pairs(USJudgeRatings, type = "l")
Error in plot.default(x[, j], x[, i], xlab = "", ylab = "", axes = FALSE,  : 
        formal argument "type" matched by multiple actual arguments

Ok but perhaps not too helpful.  In an ideal world, we should perhaps
match the `...' against the possible pars before passing them on.

However, I think there are more problems.

?plot.mts [why would I know to look for this anyway?  We need to do
something along the lines John suggested in Vienna: have a way to find
out about the possible args to plot() when calling it on a specific
object or class ...] says

plot(x, y = NULL, type = "l", xlim = NULL, ylim = NULL,
     xlab = "Time", ylab, log = "",
     col = par("col"), bg = NA, pch = par("pch"), cex = par("cex"),
     lty = par("lty"), lwd = par("lwd"),
     axes = TRUE, frame.plot = axes, ann = par("ann"),
     main = NULL, plot.type = c("multiple", "single"),
     xy.labels = n <= 150, xy.lines = do.lab, panel=lines, ...)

and this even has an explicit `type' argument!

Of course what happens is that what we see is the documentation for the
ts and not the mts method.

The short term fix would be to document plot.mts separately.

However, does plot.mts really need to be a function of its own with an
interface *different* from plot.ts?  We seem to be calling each other
vice versa anyway ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Jul  8 11:22:05 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
Message-ID: <200107081022.MAA23606@pubhealth.ku.dk>

#       r-bugs@r-project.org

The problem occurs when the model matrix has a single
column.

> elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
   distance=c(183,217,189,208,178,150,249))
> elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)

> predict(elastic.lm,se=T)
Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments

The fix is to replace 
  XRinv <- qr.Q(object$qr)[, p1]
with
  XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]

The statement is five lines above XRinv^2 %*% rep(res.var, p)

John Maindonald.

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3473        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 13:05:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jul 2001 14:05:24 +0200
Subject: [Rd] predict.lm(...., se=T), with 1-column model matrix (PR#1018)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 8 Jul 2001 12:22:05 +0200 (MET DST)"
References: <200107081022.MAA23606@pubhealth.ku.dk>
Message-ID: <x2y9pz7hiz.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

> #       r-bugs@r-project.org
> 
> The problem occurs when the model matrix has a single
> column.
> 
> > elastic <- data.frame(stretch=c(46,54,48,50,44,42,52),
>    distance=c(183,217,189,208,178,150,249))
> > elastic.lm <- lm(distance ~ -1 + stretch, data=elastic)
> 
> > predict(elastic.lm,se=T)
> Error in XRinv^2 %*% rep(res.var, p) : non-conformable arguments
> 
> The fix is to replace 
>   XRinv <- qr.Q(object$qr)[, p1]
> with
>   XRinv <- qr.Q(object$qr)[, p1, drop=FALSE]
> 
> The statement is five lines above XRinv^2 %*% rep(res.var, p)
> 

Ick! Thanks.

For a workaround, notice that

> predict(elastic.lm,se=T,new=elastic)
$fit
       1        2        3        4        5        6        7 
188.8946 221.7458 197.1074 205.3202 180.6818 172.4690 213.5330 

$se.fit
[1] 6.423642 7.540797 6.702930 6.982219 6.144353 5.865064 7.261508

$df
[1] 6

$residual.scale
[1] 17.79576


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Jul  8 23:00:59 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 08 Jul 2001 18:00:59 -0400
Subject: [Rd] Don't test my example; list of Rd macros?
Message-ID: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>

I'm pretty sure I've read here that it's possible to mark certain
lines in the \examples section so the Rcmd check doesn't run them
during its tests, but I can't find it now.  (I have one function that
takes user input; with no user present, the test stalls.)

More generally, is there a reference list somewhere of all of the Rd
macros?  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jul  8 23:35:47 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 00:35:47 +0200
Subject: [Rd] Don't test my example; list of Rd macros?
In-Reply-To: Duncan Murdoch's message of "Sun, 08 Jul 2001 18:00:59 -0400"
References: <7nlhkto4stu0drn8gbrl32um48e3kefa9m@4ax.com>
Message-ID: <x2bsmv3v7g.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <dmurdoch@pair.com> writes:

> I'm pretty sure I've read here that it's possible to mark certain
> lines in the \examples section so the Rcmd check doesn't run them
> during its tests, but I can't find it now.  (I have one function that
> takes user input; with no user present, the test stalls.)
> 
> More generally, is there a reference list somewhere of all of the Rd
> macros?  

\dontrun{}

Most of the stuff is documented in "Writing R extensions", section
"Writing R documentation"

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Jul  9 11:57:31 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 09 Jul 2001 12:57:31 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de>
Message-ID: <3B498E1B.CEFB928@statistik.uni-dortmund.de>

Thomas Lumley wrote:
>
> read.spss() is giving "Rgui.exe has generated errors and will be
> closed..." on all the files I have tried (the same happens with Rterm as
> well). This is R1.3.0 and the current `foreign',under Win2k.
>
> The problem doesn't happen under Linux on a different machine and
> didn't happen with an earlier version of R and foreign under NT4 on a
> different machine.
>
> As I updated to a new computer, new OS and new version of R at the same
> time I don't know which component is responsible. Has anyone used
> read.spss() with R 1.3.0 under Windows?


[R-1.3.0, foreign_0.4-4, WinNT 4.0]

A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
ncol=2)", can be read in:

  read.spss("c:/test.sav")

$VAR00001
[1] 2 3

$VAR00002
[1] 3 5



But trying to read a non existant file crashes R on my machine:

  read.spss("c:/nonexistant.abc")  # R crashes


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul  9 15:07:34 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jul 2001 16:07:34 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Uwe Ligges's message of "Mon, 09 Jul 2001 12:57:31 +0200"
References: <Pine.A41.4.33.0107061029100.90366-100000@homer38.u.washington.edu> <3B461C14.442BB907@statistik.uni-dortmund.de> <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <x2bsmuci1l.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
> 
> 
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
> 
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
> 
>   read.spss("c:/test.sav")
> 
> $VAR00001
> [1] 2 3
> 
> $VAR00002
> [1] 3 5
> 
> 
> 
> But trying to read a non existant file crashes R on my machine:
> 
>   read.spss("c:/nonexistant.abc")  # R crashes

I think this is the difference between foreign_0.4-4 and -5, but not
likely the issue that Thomas had.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 19:41:31 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 11:41:31 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <20010708202636.26286.qmail@web9305.mail.yahoo.com>
Message-ID: <20010709184131.38498.qmail@web13903.mail.yahoo.com>


I'm defining the following functions:

> foo1 <- function(...) print(match.call())
> foo2 <- function(...) foo1(...)

My understanding is that foo2 defined as above should
behave exactly like foo1 (and also that this sort of
usage is quite common). However, what I'm getting is:

> foo1(a = F, b = list()); foo2(a = F, b = list())
foo1(a = F, b = list())
foo1(a = ..1, b = ..2)

However, if the values of the arguments are constants,
there appears to be no problem, e.g.:

> temp <- 10
> foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
+ b = 10, ab = FALSE)
foo1(a = temp, b = 10, ab = FALSE)
foo1(a = ..1, b = 10, ab = FALSE)

Any explanations/suggestions ?

Deepayan


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 20:06:41 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 15:06:41 -0400
Subject: [Rd] The ... argument
References: <20010709184131.38498.qmail@web13903.mail.yahoo.com>
Message-ID: <3B4A00C1.559953AE@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I'm defining the following functions:
> 
> > foo1 <- function(...) print(match.call())
> > foo2 <- function(...) foo1(...)
> 
> My understanding is that foo2 defined as above should
> behave exactly like foo1 (and also that this sort of
> usage is quite common). However, what I'm getting is:
> 
> > foo1(a = F, b = list()); foo2(a = F, b = list())
> foo1(a = F, b = list())
> foo1(a = ..1, b = ..2)
> 
> However, if the values of the arguments are constants,
> there appears to be no problem, e.g.:
> 
> > temp <- 10
> > foo1(a = temp, b = 10, ab = FALSE); foo2(a = temp,
> + b = 10, ab = FALSE)
> foo1(a = temp, b = 10, ab = FALSE)
> foo1(a = ..1, b = 10, ab = FALSE)
> 
> Any explanations/suggestions ?
> 
> Deepayan

Well, "exactly like" is overstating it a bit.

You should get the same effect in terms of the computed results.

But the evaluator has to ensure that the usual rules of evaluation
apply.  In particular, that arguments only get evaluated when needed,
and (rather important!) only once per argument.

The semantics that does this is to imagine that variables ..1, ..2, etc.
are created in the environment of foo1 corresponding to the actual
arguments that matched ...

These arguments are what actually get passed around, ensuring that the
usual rules for evaluation are followed.  Which also explains why the
pseudo-variables aren't needed if the actual arguments are constants.

As for suggestions, you haven't said what you REALLY wanted to do, but
it sounds like you may want to do some substituting inside foo2.

By the way, this is not R-specific behavior.  It really follows from the
S language semantics, and S-Plus behaves the same way.

John

> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 20:36:51 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 12:36:51 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A00C1.559953AE@research.bell-labs.com>
Message-ID: <20010709193651.19049.qmail@web13904.mail.yahoo.com>


I think my earlier example didn't fully represent my
problem. I'm trying to evaluate the arguments passed
in via ... by:

foo1 <- function(...) {
    eval(as.list(match.call()[-1]))
}

foo2 <- function(...) foo1(...)

So now,

> foo1(a=F)          
$a
F

> foo2(a=F)
$a
..1




__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Jul  9 21:30:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 09 Jul 2001 16:30:56 -0400
Subject: [Rd] The ... argument
References: <20010709193651.19049.qmail@web13904.mail.yahoo.com>
Message-ID: <3B4A1480.DA7201C6@research.bell-labs.com>

Deepayan Sarkar wrote:
> 
> I think my earlier example didn't fully represent my
> problem. I'm trying to evaluate the arguments passed
> in via ... by:
> 
> foo1 <- function(...) {
>     eval(as.list(match.call()[-1]))
> 

Why?

The way to get the _evaluated_ ... arguments is
  dotValues <- list(...)

See, for example, under "..." in the index to the "blue book".


> foo2 <- function(...) foo1(...)
> 
> So now,
> 
> > foo1(a=F)
> $a
> F
> 
> > foo2(a=F)
> $a
> ..1
> 
> __________________________________________________
> Do You Yahoo!?
> Get personalized email addresses from Yahoo! Mail
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon Jul  9 21:48:34 2001
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Mon, 9 Jul 2001 13:48:34 -0700 (PDT)
Subject: [Rd] The ... argument
In-Reply-To: <3B4A1480.DA7201C6@research.bell-labs.com>
Message-ID: <20010709204834.59000.qmail@web13905.mail.yahoo.com>



--- John Chambers <jmc@research.bell-labs.com> wrote:
> Deepayan Sarkar wrote:
> > 
> > I think my earlier example didn't fully represent
> my
> > problem. I'm trying to evaluate the arguments
> passed
> > in via ... by:
> > 
> > foo1 <- function(...) {
> >     eval(as.list(match.call()[-1]))
> > 
> 
> Why?
> 
> The way to get the _evaluated_ ... arguments is
>   dotValues <- list(...)


Oops! Thanks a lot, everything works fine now.



__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 21:23:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 22:23:57 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
Message-ID: <15178.4829.208468.904765@mithrandir.hornik.net>

>>>>> Krzysztof Kopera writes:

> Sorry, but my mail program add "ODP" instead "Re" to subject of my
> previous letter.  My last problem is solved but I have new, serious
> problem with making internet module (under src/modules/internet),
> below is output after "make":

>         gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
> nanohttp.o sock.o sockconn.o
> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
> position
>     independent.  Use +z or +Z to recompile.
> collect2: ld returned 1 exit status

> Can you help me? Maybe anyone have experience in building R under
> HP-UX 11.00 or other HP-UX.

Maybe I am getting paranoid or it is too late at night but something
looks awfully wrong ... all modules should compile using PIC.  

This should really be done using .lo in the OBJECTS.  However, for
reasons I cannot remember the GUI modules which have been around for
some time use .o instead.  They get PIC, though, by

  ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

The modules added in 1.3.0 do not do this, which I think is wrong.

I'll be gone for a workshop for the next two days, and will look into
this on Thu.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul  9 22:41:46 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 9 Jul 2001 23:41:46 +0200
Subject: [Rd] Re: Re: [R] How to build R-1.3.0 under HP-UX  11.00
In-Reply-To: <15178.4829.208468.904765@mithrandir.hornik.net>
References: <OF8EAB7863.D7FAD9F7-ONC1256A84.004CD7EE@netia.pl>
 <15178.4829.208468.904765@mithrandir.hornik.net>
Message-ID: <15178.9498.538675.711410@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Krzysztof Kopera writes:
>> Sorry, but my mail program add "ODP" instead "Re" to subject of my
>> previous letter.  My last problem is solved but I have new, serious
>> problem with making internet module (under src/modules/internet),
>> below is output after "make":

>> gcc -shared -fPIC  -o internet.sl  Rsock.o internet.o nanoftp.o
>> nanohttp.o sock.o sockconn.o
>> /usr/bin/ld: DP relative code in file Rsock.o - shared library must be
>> position
>> independent.  Use +z or +Z to recompile.
>> collect2: ld returned 1 exit status

>> Can you help me? Maybe anyone have experience in building R under
>> HP-UX 11.00 or other HP-UX.

> Maybe I am getting paranoid or it is too late at night but something
> looks awfully wrong ... all modules should compile using PIC.  

> This should really be done using .lo in the OBJECTS.  However, for
> reasons I cannot remember the GUI modules which have been around for
> some time use .o instead.  They get PIC, though, by

>   ALL_CFLAGS = $(R_XTRA_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)

> The modules added in 1.3.0 do not do this, which I think is wrong.

> I'll be gone for a workshop for the next two days, and will look into
> this on Thu.

Actually ... done now.  Pls try again ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 15:32:27 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 16:32:27 +0200
Subject: [Rd] color NA is allowed, but "NA" is not ... (yet)
Message-ID: <15179.4603.473221.604700@gargle.gargle.HOWL>

In several places, we have the convention that col =  NA  means
`` don't draw '', e.g. for points() or rect().

For col = <vector> this only works when the vector is integer (numeric),
but not in other cases.  I think this is a bug, even though not in the
strict sense, since we don't seem to claim it should work..

Example:

   plot(1:10, col = c(1:4,NA,NA,4:1))

## fine

   (cc <- heat.colors(4))
   plot(1:10, col = c(cc, NA,NA,rev(cc)))

## gives error :

Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
	invalid color name

-------

Does anybody see a problem in making  "NA" for character colors behave the
same as NA for integer (numeric) ones ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jul 10 18:09:20 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 10 Jul 2001 19:09:20 +0200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
In-Reply-To: <15179.4603.473221.604700@gargle.gargle.HOWL>
References: <15179.4603.473221.604700@gargle.gargle.HOWL>
Message-ID: <15179.14016.810372.917441@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> In several places, we have the convention that col = NA means ``
    MM> don't draw '', e.g. for points() or rect().

    MM> For col = <vector> this only works when the vector is integer
    MM> (numeric), but not in other cases.  I think this is a bug, even
    MM> though not in the strict sense, since we don't seem to claim it
    MM> should work..

    MM> Example:

    MM>    plot(1:10, col = c(1:4,NA,NA,4:1))

    MM> ## fine

    MM>    (cc <- heat.colors(4)) plot(1:10, col = c(cc, NA,NA,rev(cc)))

    MM> ## gives error :

    MM> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg =
    MM> bg, lty = lty, : invalid color name

    MM> -------

    MM> Does anybody see a problem in making "NA" for character colors
    MM> behave the same as NA for integer (numeric) ones ?

And I have the patch ready (tested and documented) for this,
to be committed to "R-patched" i.e. to be in 1.3.1,
unless ....


Note however the following `misbehavior' (I think)  of segments() :

 n <- 8
 x <- 1:n
 ep <- 0.2
 cc <- c(1:4,NA,6:n)

   plot(x, col= cc, type='h')
 points(x, col= cc, cex=2)

 segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..

------

i.e. segments does not follow the general idea of 
 ``not drawing when color is NA ''

(note that there is no compatibility issue here, since S-plus
 does not allow NA colors--and vectorized ones in most cases--anyway.)

And this seems to be ``on purpose'' :
in  src/main/plot.c  in do_segments(), around line 1560, we have

	    dd->gp.col = INTEGER(col)[i % ncol];
	    if (dd->gp.col == NA_INTEGER)
		dd->gp.col = dd->dp.col;

which means in S language that col = NA will be translated to col = par("col")
Any reason why this would be a good idea ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jul 10 20:50:24 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 10 Jul 2001 21:50:24 +0200 (MET DST)
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
Message-ID: <200107101950.VAA11054@pubhealth.ku.dk>

This is related to the wishlist item 856 that Paul Gilbert submitted.

If there's a missing closing brace, a whole section can silently
disappear.  It would be nice if the help parser (or CHECK) checked for
matching braces in help files, and reported an error when they don't
match over the whole file, or when one section is started within
another one.

For example:

\name{test}
\alias{test}
\title{test}
\description{
This whole section will go missing, because I forgot
to close a brace on this reference:  \code{\link{test}

There may be more text afterwards, which wasn't supposed to
be included in the "code" section, but will be because of my
oversight; the next brace is supposed to close the description, but
leaves it open. When the parser sees "author", it forgets all about
this whole section.
}

\author{ Duncan Murdoch }

\keyword{test}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 10 23:58:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 10:58:30 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL>
Message-ID: <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>

Hi


> Note however the following `misbehavior' (I think)  of segments() :
>
>  n <- 8
>  x <- 1:n
>  ep <- 0.2
>  cc <- c(1:4,NA,6:n)
>
>    plot(x, col= cc, type='h')
>  points(x, col= cc, cex=2)
>
>  segments(x+ep, x[1], x+ep, x[n], col = cc)# *does* draw at 5+ep ..
>
> ------
>
> i.e. segments does not follow the general idea of
>  ``not drawing when color is NA ''
>
> (note that there is no compatibility issue here, since S-plus
>  does not allow NA colors--and vectorized ones in most cases--anyway.)
>
> And this seems to be ``on purpose'' :
> in  src/main/plot.c  in do_segments(), around line 1560, we have
>
>     dd->gp.col = INTEGER(col)[i % ncol];
>     if (dd->gp.col == NA_INTEGER)
> dd->gp.col = dd->dp.col;
>
> which means in S language that col = NA will be translated to col =
par("col")
> Any reason why this would be a good idea ?


>From my memory of these things, this is how col=NA used to be treated in all
sorts of graphics functions.   In other words, segments() behaves like this
only because it hasn't been converted yet to the "new" interpretation of
col=NA (i.e., don't draw anything).

Paul

p.s.  we run into a bit of trouble with this issue for rect() and polygon().
Both use col=NA to indicate that the rect/polygon should not be FILLED, but
will still draw a border.  And its not so easy to just change the meaning of
col=NA -- we need to find a new way of specifying "don't fill, but do draw
the border".  One option would be col=NULL (?)

p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
rectangle.

p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
to use polygon(border=0) NOT to draw a border.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Jul 11 00:24:05 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 10 Jul 2001 19:24:05 -0400
Subject: [Rd] Object finalization
Message-ID: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>

I see some code in R to attach finalizers to external pointer references 
(Register[C]Finalizer).  Anyone have an example of how to code the 
finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
how to get it to operate on the pointer, since the pointer is not passed 
to the function when its called.  RegisterFinalizer takes an R closure, 
but how is it called from R (tried .Internal)?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Wed Jul 11 00:29:32 2001
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Wed, 11 Jul 2001 09:29:32 +1000
Subject: [Rd] stripchart() labels
Message-ID: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>

I propose to replace add a ... argument to stripchart(),
and to modiffy the following code fragment as shown.
[The only changes are the addition of ... arguments
in two calls to axis()]

plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
     box()
     if (vertical) {
         if (n > 1)
             axis(1, at = 1:n, lab = names(groups), ...)  # ... argument added
         axis(2)
     }
     else {
         axis(1)
         if (n > 1)
             axis(2, at = 1:n, lab = names(groups), ...)  # ... argument added
     }

Then one can do the following:
   data(PlantGrowth)
   attach(PlantGrowth)
   stripchart(weight~group, las=2)

or
   stripchart(weight~group, vertical=TRUE, las=2)

This is often the most effective way to deal with the problem
of overlapping labels, so that some labels do not appear.
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3473
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Jul 11 02:26:12 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 10 Jul 2001 20:26:12 -0500
Subject: [Rd] Object finalization
In-Reply-To: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>; from tklistaddr@keittlab.bio.sunysb.edu on Tue, Jul 10, 2001 at 07:24:05PM -0400
References: <3B4B8E95.7070307@keittlab.bio.sunysb.edu>
Message-ID: <20010710202612.A11693@nokomis.stat.umn.edu>

On Tue, Jul 10, 2001 at 07:24:05PM -0400, Timothy H. Keitt wrote:
> I see some code in R to attach finalizers to external pointer references 
> (Register[C]Finalizer).  Anyone have an example of how to code the 
> finalizer?  R_RegisterCFinalizer accepts a C function, but I can't see 
> how to get it to operate on the pointer, since the pointer is not passed 
> to the function when its called.  RegisterFinalizer takes an R closure, 
> but how is it called from R (tried .Internal)?
> 
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> 

There is a writeup on this, including some example code, in

	http://www.stat.umn.edu/~luke/R/simpleref.html

(also available off http://developer.r-project.org/).  For the C
finalizer, the C function you register is of type R_CFinalizer_t,
defined as

	typedef void (*R_CFinalizer_t)(SEXP);

The SEXP it is called with is the external pointer object.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 03:06:39 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Tue, 10 Jul 2001 22:06:39 -0400 (EDT)
Subject: [Rd] Re: [R] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
Message-ID: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>

I have completed some work which allows fairly complete use of Computer
Modern fonts in R.

First, I have a quick bug fix to devPS.c: If an afm file could not be
loaded, R gives a "cannot read afm file" which should be followed by the
name of the file, but instead it is followed by garbage. Here is a patch
to devPS.c that fixes it:

1150c1150
< 	    warning("cannot read afm file %s", buf);
---
> 	    warning("cannot read afm file %s", p);
1156c1156
< 	warning("cannot read afm file %s", buf);
---
> 	warning("cannot read afm file sy______.afm");


my system is:
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

I think there may be similar problems with the error messages of the xfig
and pdf drivers, but I have not tried to understand them.

Before I send the pathches which allow use of CM fonts, I would like to
see whether there is interest in them or whether the changes I made would
be considered unacceptable. These changes allow CM fonts in
straight postscript output only. The basic idea is:

1) Extend the family option in the postscript driver to take a list of
five afm files instead of four. The fifth is for the symbol afm file. The
code changes for this are fairly clear.

2) Manipulate the CM fonts in the postscript file, merging them into new
fonts which are encoded with ISOLatin1 or Symbol encoding. This I
currently implemented by adding two new global variables like .ps.prolog.
One adds additional comments to the postscript file to allow the user
to request more resources in the postscript file, the second allows
the user to add commands to manipulate the fonts. When the second
variable is used, the default font reencoding is not used. This is not
very elegant and it leaves a lot up to the user, but the CM fonts are
really a special case and perhaps a function could be provided which sets
up the system for the CM fonts. The advantage is that this requires very
few changes to the original code.

3) Construct new afm files for the CM fonts which reflect the merged state
of the fonts that exist in the postscript file. I have done this, and
although it is not great to have to distribute customized afms, it is
simple to use now that it is done.

Currently I have this all working, although part (1) breaks old code that
doesn't specify a fifth afm file. This could of course be fixed by making
symbol added on if only four afms are given. Also changes reqired for (1)
may or may not break the other postscript related drivers.

What do you think? If you are interested, what is the best way for me to
package it up to submit it? Although the patches are small, the modified
afms are somewhat bulky to paste into email, but I have no experience with
cvs. Would an attached tarball of stuff be OK?

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Wed Jul 11 05:11:30 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Wed, 11 Jul 2001 16:11:30 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au>
Message-ID: <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>

Hi


> I propose to replace add a ... argument to stripchart(),
> and to modiffy the following code fragment as shown.
> [The only changes are the addition of ... arguments
> in two calls to axis()]
>
> plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
>      box()
>      if (vertical) {
>          if (n > 1)
>              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
added
>          axis(2)
>      }
>      else {
>          axis(1)
>          if (n > 1)
>              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
added
>      }
>
> Then one can do the following:
>    data(PlantGrowth)
>    attach(PlantGrowth)
>    stripchart(weight~group, las=2)
>
> or
>    stripchart(weight~group, vertical=TRUE, las=2)
>
> This is often the most effective way to deal with the problem
> of overlapping labels, so that some labels do not appear.


We should probably also pass the "..." to the call(s) to points() so that
you could do things like ...

    stripchart(weight~group, pch=21, col="blue", bg="lightblue")

... and "..." should probably get passed to the call to title() too.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jul 11 11:09:15 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 11 Jul 2001 12:09:15 +0200
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
References: <Pine.LNX.4.31.0106291541590.1238-100000@gannet.stats>
 <Pine.LNX.4.33.0107102118210.22363-100000@hussle.harvard.edu>
Message-ID: <15180.9675.891306.920609@gargle.gargle.HOWL>

>>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:

    Brian> I have completed some work which allows fairly complete use of Computer
    Brian> Modern fonts in R.

    Brian> First, I have a quick bug fix to devPS.c: If an afm file could
    Brian> not be loaded, R gives a "cannot read afm file" which should be
    Brian> followed by the name of the file, but instead it is followed by
    Brian> garbage. Here is a patch to devPS.c that fixes it:

  1150c1150
  < 	    warning("cannot read afm file %s", buf);
  ---
  > 	    warning("cannot read afm file %s", p);
  1156c1156
  < 	warning("cannot read afm file %s", buf);
  ---
  > 	warning("cannot read afm file sy______.afm");

Thank, I've committed these for R-patched
       (and, could you please use  "diff -u" next time ?)

    ....

    Brian> I think there may be similar problems with the error messages of
    Brian> the xfig and pdf drivers, but I have not tried to understand
    Brian> them.

I've looked for them in devPS.c and fixed them analogously.
Can you tell me how to trigger them ??


    Brian>	<........... (omitted) ..........>

I do not really feel competent to answer your general question about the
usefulness of CM fonts via postscript() graphics.

In principle, I think it's a nice idea, since (La)TeX's default CM fonts
are still used quite a bit, and liked by many, and hence it would be quite 
neat to have the graphics using the same fonts.

As for how to `submit' your changes (*when* there is agreement that they
 are wanted): 
Consider putting up your code as *.tar.gz for FTP (or HTTP) and just
forward the URL to this list. 


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alobo@ija.csic.es  Wed Jul 11 12:25:52 2001
From: alobo@ija.csic.es (Agustin Lobo)
Date: Wed, 11 Jul 2001 13:25:52 +0200 (MET DST)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <3B4967CC.974635C4@bank-banque-canada.ca>
Message-ID: <Pine.OSF.3.96.1010711131757.20936C-100000@paleo.ija.csic.es>


I've seen that:

> min(c(NA,NA,NA),na.rm=T)
[1] 2147483647
Warning message: 
no finite arguments to min/max; returning extreme. in: min(..., na.rm =
na.rm) 

Would not be

numeric(0)

a more logical result? 

(I'm using this function in a program in which the vector
can often include NA's and, sometimes, a subseting can
leave only NA values).

Thanks

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo@ija.csic.es


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lcottret@yahoo.fr  Wed Jul 11 14:34:25 2001
From: lcottret@yahoo.fr (lcottret@yahoo.fr)
Date: Wed, 11 Jul 2001 15:34:25 +0200 (MET DST)
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
Message-ID: <200107111334.PAA16384@pubhealth.ku.dk>

Full_Name: Ludovic Cottret
Version: R 1.3.0
OS: Linux
Submission from: (NULL) (157.136.20.138)


I have a R function which call a C function by the instruction ".Call".
The first time I call the R function in a R session, it perfectly runs. But the
next 
times, R returns this error message :

Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
        .Call function name not in load table

The function name has disappeared !!
This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?

Thanks for your answers...
PS : Excuse my poor english...




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 11 14:49:31 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 11 Jul 2001 09:49:31 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107110931340.22363-100000@hussle.harvard.edu>

On Wed, 11 Jul 2001, Martin Maechler wrote:

> >>>>> "Brian" == Brian D'Urso <durso@hussle.harvard.edu> writes:
>
>     Brian> First, I have a quick bug fix to devPS.c: If an afm file could
>     Brian> not be loaded, R gives a "cannot read afm file" which should be
>     Brian> followed by the name of the file, but instead it is followed by
>     Brian> garbage. Here is a patch to devPS.c that fixes it:
>
>   1150c1150
>   < 	    warning("cannot read afm file %s", buf);
>   ---
>   > 	    warning("cannot read afm file %s", p);
>   1156c1156
>   < 	warning("cannot read afm file %s", buf);
>   ---
>   > 	warning("cannot read afm file sy______.afm");
>
> Thank, I've committed these for R-patched
>        (and, could you please use  "diff -u" next time ?)
>
>     ....
>
>     Brian> I think there may be similar problems with the error messages of
>     Brian> the xfig and pdf drivers, but I have not tried to understand
>     Brian> them.
>
> I've looked for them in devPS.c and fixed them analogously.
> Can you tell me how to trigger them ??
>

They can be triggered by telling the postscript driver to load an afm file
that doesn't exist, e.g. :

postscript(family=c(doesnotexist1.afm, dne2.afm, dne3.afm, dne4.afm ), etc)

To trigger the problem with the pdf and xfig drivers, remove one of the
afm files from R's afm directory, e.g. hv______.afm and then use
family="Helvetica" in the pdf or xfig driver.


-- Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Jul 11 15:13:07 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 11 Jul 2001 10:13:07 -0400
Subject: [Rd] .Call and Mandrake 8.0 (PR#1020)
In-Reply-To: <200107111334.PAA16384@pubhealth.ku.dk>; from lcottret@yahoo.fr on Wed, Jul 11, 2001 at 03:34:25PM +0200
References: <200107111334.PAA16384@pubhealth.ku.dk>
Message-ID: <20010711101307.E24919@jessie.research.bell-labs.com>

Hi Ludovic.

 There are at least two possible explanations for this behaviour.

  1)  There is a bug in the recently changed code in R to find 
     routines in C and Fortran libraries.

  2)  The routine that you are .Call()'ing is doing something
  that has confused the R internals and makes the next R commands
  not work, and potentially this is not reproducible.

If this is not proprietary or confidential code, you can send the C
code and instructions as to how to call it from R (that is, provide
simple values for the bankpath, accn, indexpath, key, beg and end
arguments), then I can see if the computations are potentially
writing over other values in memory.

Also, you can try a invoking a very simple .Call() routine 
many times to see if that displays the same failure. For example,
put the following C code in a file named simpleCall.c

#include "Rinternals.h"

SEXP
simpleCall() 
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}

Then, compile this with 
  R CMD SHLIB simpleCall.c

and call it from R in the following way

 > dyn.load("simpleCall.so")
 > for(i in 1:10) { print(.Call("simpleCall")) }

If this works, it won't determine whether it is 1) or 2) (or any other
possible reason), but if it doesn't work, we will have a lot more
information.

 Thanks,
   Duncan


lcottret@yahoo.fr wrote:
> Full_Name: Ludovic Cottret
> Version: R 1.3.0
> OS: Linux
> Submission from: (NULL) (157.136.20.138)
> 
> 
> I have a R function which call a C function by the instruction ".Call".
> The first time I call the R function in a R session, it perfectly runs. But the
> next 
> times, R returns this error message :
> 
> Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
>         .Call function name not in load table
> 
> The function name has disappeared !!
> This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?
> 
> Thanks for your answers...
> PS : Excuse my poor english...
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Jul 11 15:57:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 11 Jul 2001 07:57:35 -0700 (PDT)
Subject: [Rd] Suggestion: min(...,na.rm=T)
In-Reply-To: <pine.osf.3.96.1010711131757.20936c_100000@paleo.ija.csic.es>
Message-ID: <Pine.LNX.4.33.0107110757350.25476@hymn03.u.washington.edu>

On Wed, 11 Jul 2001, Agustin Lobo wrote:

> 
> I've seen that:
> 
> > min(c(NA,NA,NA),na.rm=T)
> [1] 2147483647
> Warning message: 
> no finite arguments to min/max; returning extreme. in: min(..., na.rm =
> na.rm) 
> 
> Would not be
> 
> numeric(0)
> 
> a more logical result? 

It turns out that both NA and numeric(0) have disadvantages.  The problem with numeric(0) is that min() usually returns a vector of length 1 and doing comparisons like (min(x)<max(y)) would lead to an error if one of them had zero length. In many ways NA is the obvious result and is what S does, but using Inf has the effect that max(c(x,y)) is always the same as max(x,max(y)) and similar things. 

The result is more elegant with real numbers where the result is the IEEE Inf not just the largest number. Another minor advantage is that it automatically gives the correct nonparametric confidence intervals for quantiles as having infinite limits.
 

          -thomas




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:06:14 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:06:14 +1200
Subject: [Rd] segments(*, col = c(..,NA,..)) {was "color NA ..."}
References: <15179.4603.473221.604700@gargle.gargle.HOWL> <15179.14016.810372.917441@gargle.gargle.HOWL> <014901c10993$d642f780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CBFC6.6404FA30@stat.auckland.ac.nz>

Paul Murrell wrote:

> p.s.  we run into a bit of trouble with this issue for rect() and polygon().
> Both use col=NA to indicate that the rect/polygon should not be FILLED, but
> will still draw a border.  And its not so easy to just change the meaning of
> col=NA -- we need to find a new way of specifying "don't fill, but do draw
> the border".  One option would be col=NULL (?)

I'd like to reserve par=NULL to mean "use the current default value for
par".
This would make it possible to avoid ugliness like:
	bg = par("bg")
It would also make it possible to have sensible meanings for
	my.pars = list(...)
	polygon(x, y, col = my.pars$col)
If there was no "col" in the ... we get a sensible efect.

> p.p.s.  rect(border=NA) doesn't draw a border, but will still fill the
> rectangle.
> 
> p.p.s. polygon(border=NA) DOES draw a border in border=par(fg) -- you have
> to use polygon(border=0) NOT to draw a border.

I think the first of these is right and the second is a bug.
IMHO we do need a way of specifying different border and fill colours.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jul 11 22:16:20 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 12 Jul 2001 09:16:20 +1200
Subject: [Rd] stripchart() labels
References: <5.0.2.1.1.20010711091841.02233aa0@pophost.anu.edu.au> <027b01c109bf$8ff4e780$175dd882@stat.auckland.ac.nz>
Message-ID: <3B4CC224.45E6752A@stat.auckland.ac.nz>

Paul Murrell wrote:
> 
> Hi
> 
> > I propose to replace add a ... argument to stripchart(),
> > and to modiffy the following code fragment as shown.
> > [The only changes are the addition of ... arguments
> > in two calls to axis()]
> >
> > plot(xlim, ylim, type = "n", ann = FALSE, axes = FALSE)
> >      box()
> >      if (vertical) {
> >          if (n > 1)
> >              axis(1, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >          axis(2)
> >      }
> >      else {
> >          axis(1)
> >          if (n > 1)
> >              axis(2, at = 1:n, lab = names(groups), ...)  # ... argument
> added
> >      }
> >
> > Then one can do the following:
> >    data(PlantGrowth)
> >    attach(PlantGrowth)
> >    stripchart(weight~group, las=2)
> >
> > or
> >    stripchart(weight~group, vertical=TRUE, las=2)
> >
> > This is often the most effective way to deal with the problem
> > of overlapping labels, so that some labels do not appear.
> 
> We should probably also pass the "..." to the call(s) to points() so that
> you could do things like ...
> 
>     stripchart(weight~group, pch=21, col="blue", bg="lightblue")
> 
> ... and "..." should probably get passed to the call to title() too.

I'd like to suggest a slightly different way of doing this.
There should be a ... in the outer function, but it should be used as
follows.

	outerfun <- function(x, y, ...) {
		pars <- list(...)
		...
		points(x, y, pch = pars$pch, col = pars$col)
		...
		title(main = pars$main, xlab = pars$xlab)
	}

This allows to be explicit about which parameter values get dispatched
to which
graphics functions.

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ce@biostat.ku.dk  Wed Jul 11 22:23:54 2001
From: ce@biostat.ku.dk (ce@biostat.ku.dk)
Date: Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)
Subject: [Rd] Extra lines when bty="n" (PR#1021)
Message-ID: <200107112123.XAA18465@pubhealth.ku.dk>

Full_Name: Claus Ekstrøm
Version: 1.2.0
OS: Linux (RedHat 7.1)
Submission from: (NULL) (212.54.75.68)


For some reason two extra lines keep appearing 
when making graphics with no box, bty="n" (a vertical line
along the leftmost side of the graphics region and a horizonal 
line along the bottom side). The lines are very visible if the 
plot is saved as a postscript file and is later included in 
a document.

Example code:

# postscript("test.ps")
y <- rnorm(100)
par(mar=c(0,0,0,0), bty="n")
plot(y)
# dev.off()


Claus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 12 00:04:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jul 2001 01:04:38 +0200
Subject: [Rd] Extra lines when bty="n" (PR#1021)
In-Reply-To: ce@biostat.ku.dk's message of "Wed, 11 Jul 2001 23:23:54 +0200 (MET DST)"
References: <200107112123.XAA18465@pubhealth.ku.dk>
Message-ID: <x21ynn2hkp.fsf@blueberry.kubism.ku.dk>

ce@biostat.ku.dk writes:

> For some reason two extra lines keep appearing 
> when making graphics with no box, bty="n" (a vertical line
> along the leftmost side of the graphics region and a horizonal 
> line along the bottom side). The lines are very visible if the 
> plot is saved as a postscript file and is later included in 
> a document.
> 
> Example code:
> 
> # postscript("test.ps")
> y <- rnorm(100)
> par(mar=c(0,0,0,0), bty="n")
> plot(y)
> # dev.off()

You're seeing the top of the axes, which the mar=c(0,0,0,0) doesn't
quite chop off. (try it with mar=c(1,1,1,1)). You want axes=F
rather than the bty="n" setting.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Thu Jul 12 13:53:43 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten.Hothorn@rzmail.uni-erlangen.de)
Date: Thu, 12 Jul 2001 14:53:43 +0200 (MET DST)
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
Message-ID: <200107121253.OAA23793@pubhealth.ku.dk>


`update.packages' fails when a package with incorrect Version field is
found in R_LIBS:

> update.packages()
trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
Content type `text/plain' length 49161 bytes
opened URL
.......... .......... .......... .......... ........
downloaded 48Kb

Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
        missing value where logical needed
In addition: Warning message: 
NAs introduced by coercion 

The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
contains:

Version: 4.13-3 (Gee version 98/1/27)

which after 

b <- as.integer(strsplit(b, "[\\.-]")[[1]]) 

in `newerVersion' looks like "4 13 NA" and thows the error above. 

Torsten


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jul 12 17:23:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Jul 2001 18:23:22 +0200
Subject: [Rd] update.packages and incorrect "Version" (PR#1022)
In-Reply-To: <200107121253.OAA23793@pubhealth.ku.dk>
References: <200107121253.OAA23793@pubhealth.ku.dk>
Message-ID: <15181.52986.41879.904913@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

> `update.packages' fails when a package with incorrect Version field is
> found in R_LIBS:

>> update.packages()
> trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
> Content type `text/plain' length 49161 bytes
> opened URL
> .......... .......... .......... .......... ........
> downloaded 48Kb

> Error in if (a[k] > b[k]) return(TRUE) else if (a[k] < b[k]) return(FALSE) : 
>         missing value where logical needed
> In addition: Warning message: 
> NAs introduced by coercion 

> The error comes from `newerVersion'. For me, the DESCRIPTION file of gee
> contains:

> ...

Thanks.  Should be fixed now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wild@stat.auckland.ac.nz  Fri Jul 13 01:48:55 2001
From: wild@stat.auckland.ac.nz (wild@stat.auckland.ac.nz)
Date: Fri, 13 Jul 2001 02:48:55 +0200 (MET DST)
Subject: [Rd] data function (PR#1023)
Message-ID: <200107130048.CAA26613@pubhealth.ku.dk>

Full_Name: Chris Wild
Version: 1.3
OS: MacOS8.6
Submission from: (NULL) (130.216.1.6)


data() is failing to read some files.
I cannot read in:
    stanford2.rda from survival library
    veteran.rda from survival library
    gehan.rda from MASS library

Problem does not exist in Windows version

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Jul 13 09:57:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 13 Jul 2001 09:57:43 +0100
Subject: [Rd] Addition to ?formula
Message-ID: <3B4EB807.BB3BA6E5@durham.ac.uk>

Hi everyone,

May I suggest that the function "all.vars" be added to the See Also
section of ?formula (as a formula object is a call).

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jul 13 10:56:01 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 13 Jul 2001 05:56:01 -0400
Subject: [Rd] Mis-matched braces in Rd files (PR#1019)
In-Reply-To: <15181.52415.857097.57828@mithrandir.hornik.net>
References: <200107101950.VAA11054@pubhealth.ku.dk> <15181.52415.857097.57828@mithrandir.hornik.net>
Message-ID: <d2htktoljmk7gtru83c9vnvasbi820a87q@4ax.com>

On Thu, 12 Jul 2001 18:13:51 +0200, you wrote:
>
>Why is this a bug report?

I'd say it's more of a "wishlist" item than a bug report.  It's only a
bug inasmuch as the response to user error is to silently do the wrong
thing.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 11:47:54 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 06:47:54 -0400
Subject: [Rd] AnonCVS
Message-ID: <3B4ED1DA.375070A6@warnes.net>


Hi All,

I would like to use anonymous cvs, but it appears not to be working
(again?).  There was a discussion back in Jan-Feb about whether to
continue supporting it, but it seemed that Tony Rossini got it working
and the discussion left off there.  Did someone decide to disable it, or
is it just not working properly?

Here's the details:


$ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src login 
(Logging in to anoncvs@cvs.r-project.org)
CVS password: anoncvs

/home/rcvs/src: no such repository
cvs login: authorization failed: server cvs.r-project.org rejected
access to /home/rcvs/src for user anoncvs


BTW, I would like to see anonymous CVS continue to be available.  I
would like to use it to have an easy mechanism for creating patches that
are up-to date.  (IE, "cvs diff file.c")

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 12:01:56 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 07:01:56 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4ED524.244367EC@warnes.net>


Hi all,

I've just been working with a piece of fortran code (Leo Breiman's
random forest code) that needs a lot of arguments.  When I use .Fortran,
I get the message 'too many arguments in foreign function call'. 
Neither the help page for .Fortran (actually Foreign) nor "Writing R
Extensions" explains how many arguments are too many.  

Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
65.  

While it is possible to work around this limitation, it seems
arbitrary.  I propose increasing the arbitrary value to 255 and adding
appropriate documentation to the Foreign manual page.

Any objections/comments?

-Greg

-----Patch-Starts-Here------

diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
R-1.3.0-patched/src/library/base/man/Foreign.Rd
--- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
 \arguments{
   \item{name}{a character string giving the name of a C function or
     Fortran subroutine.}
-  \item{\dots}{arguments to be passed to the foreign function.}
+  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
     \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
     passed on to the foreign function.  If \code{FALSE}, the presence
of
Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
diff -ur R-1.3.0-orig/src/main/dotcode.c
R-1.3.0-patched/src/main/dotcode.c
--- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
+++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
@@ -372,7 +372,7 @@
     return args;
 }
 
-#define MAX_ARGS 65
+#define MAX_ARGS 255
 
 SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
 {
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Jul 13 12:27:36 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 13 Jul 2001 07:27:36 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <3B4ED524.244367EC@warnes.net>; from greg@warnes.net on Fri, Jul 13, 2001 at 07:01:56AM -0400
References: <3B4ED524.244367EC@warnes.net>
Message-ID: <20010713072736.C20268@jessie.research.bell-labs.com>

Gregory R. Warnes wrote:
> 
> Hi all,
> 
> I've just been working with a piece of fortran code (Leo Breiman's
> random forest code) that needs a lot of arguments.  When I use .Fortran,
> I get the message 'too many arguments in foreign function call'. 
> Neither the help page for .Fortran (actually Foreign) nor "Writing R
> Extensions" explains how many arguments are too many.  
> 
> Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to
> 65.  
> 
> While it is possible to work around this limitation, it seems
> arbitrary.  I propose increasing the arbitrary value to 255 and adding
> appropriate documentation to the Foreign manual page.
> 
> Any objections/comments?


Unfortunately, it isn't quite as simple as that.  The code that uses
MAX_ARGS would also need to be extended and that involves adding the
remaining cases to the switch statement in do_dotCode() and
do_dotcall() in src/main/dotcode.c There's no reason why it can't be
done.  Somebody simply has to generate the appropriate code,
presumably programmatically with a little script.  I recall this was
extended in S4, but 64 was adequate for that context.

I imagine that there are some systems limit the number of arguments
one can have to a routine.

 D.


> 
> -Greg
> 
> -----Patch-Starts-Here------
> 
> diff -ur R-1.3.0-orig/src/library/base/man/Foreign.Rd
> R-1.3.0-patched/src/library/base/man/Foreign.Rd
> --- R-1.3.0-orig/src/library/base/man/Foreign.Rd        Sun May  6
> 12:14:16 2001+++ R-1.3.0-patched/src/library/base/man/Foreign.Rd     Fri
> Jul 13 06:58:42 2001@@ -20,7 +20,7 @@
>  \arguments{
>    \item{name}{a character string giving the name of a C function or
>      Fortran subroutine.}
> -  \item{\dots}{arguments to be passed to the foreign function.}
> +  \item{\dots}{arguments (maximum of 255) to be passed to the foreign
> function}   \item{NAOK}{if \code{TRUE} then any \code{\link{NA}} or
>      \code{\link{NaN}} or \code{\link{Inf}} values in the arguments are
>      passed on to the foreign function.  If \code{FALSE}, the presence
> of
> Only in R-1.3.0-patched/src/library/base/man: Foreign.Rd~
> diff -ur R-1.3.0-orig/src/main/dotcode.c
> R-1.3.0-patched/src/main/dotcode.c
> --- R-1.3.0-orig/src/main/dotcode.c     Sat Jun  9 19:35:19 2001
> +++ R-1.3.0-patched/src/main/dotcode.c  Fri Jul 13 06:58:56 2001
> @@ -372,7 +372,7 @@
>      return args;
>  }
>  
> -#define MAX_ARGS 65
> +#define MAX_ARGS 255
>  
>  SEXP do_symbol(SEXP call, SEXP op, SEXP args, SEXP env)
>  {
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jul 13 15:09:16 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Jul 2001 16:09:16 +0200 (MET DST)
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
Message-ID: <200107131409.QAA01600@pubhealth.ku.dk>

Not too hard to fix, the following buglet (new in 1.3.0),
but I'm about to leave for one week (of vacation)..

Here is an example (for Linux) :

  lynne{sfs}214> cd /tmp
  lynne{sfs}215> mkdir blue
  lynne{sfs}216> cd blue
  /tmp/blue
  lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

  R : Copyright 2001, The R Development Core Team
  Version 1.3.0  (2001-06-22)

  R is free software and comes with ABSOLUTELY NO WARRANTY.
  You are welcome to redistribute it under certain conditions.
  Type `license()' or `licence()' for distribution details.

  R is a collaborative project with many contributors.
  Type `contributors()' for more information.

  Type `demo()' for some demos, `help()' for on-line help, or
  `help.start()' for a HTML browser interface to help.
  Type `q()' to quit R.

  > data(package = "mva")
  Data sets in package `mva':


  Harman23.cor             Harman Example 2.3
  Harman74.cor             Harman Example 7.4
  ability.cov              Ability and Intelligence Tests

  Warning message: 
  package `blue' contains no datasets in: data(package = "mva") 
  > 
-------------------

See the warning line at the very end.
It's because of the new data() feature of looking for data sets in the
current directory...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 15:29:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 07:29:20 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <3B4ED1DA.375070A6@warnes.net>
References: <3B4ED1DA.375070A6@warnes.net>
Message-ID: <87pub4oqbj.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> Hi All,

    GRW> I would like to use anonymous cvs, but it appears not to be
    GRW> working (again?).  There was a discussion back in Jan-Feb
    GRW> about whether to continue supporting it, but it seemed that
    GRW> Tony Rossini got it working and the discussion left off
    GRW> there.  Did someone decide to disable it, or is it just not
    GRW> working properly?

    GRW> Here's the details:


    GRW> $ cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> anoncvs

    GRW> /home/rcvs/src: no such repository cvs login: authorization
    GRW> failed: server cvs.r-project.org rejected access to
    GRW> /home/rcvs/src for user anoncvs

This is a problem with the set up.  It's actually:
        /home/rcvs/src/

Sigh.  I'm to blame.

Greg, I'm also to blame about other things, like not getting back in
touch.  I'll be in contact about various things.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:20:50 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:20:50 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <200107131607.JAA18455@cramer.stat.ucla.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
Message-ID: <87ofqoztp9.fsf@jeeves.blindglobe.net>


(sent to r-devel, in case anyone is interested)
>>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

    JdL> Great. Which modules are available for checkout ?  --- J.

(regarding R's anon cvs archive):

R  R-manuals  R-notes

(R = the "whole thing", and is probably the only one of interest -- at
the anoncvs level, we don't have a sophisticated module structure --
in fact, if there is one for the real archive, I don't know about it).

Looks like it nearly in sync with the main mirror, only 30 minutes of
of (a mirror of the???) main archive.

The modules and the timing of the sync I know; the rest is strictly
conjecture. 

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plastictyranny@aol.com  Fri Jul 13 17:26:08 2001
From: plastictyranny@aol.com (plastictyranny@aol.com)
Date: Fri, 13 Jul 2001 12:26:08 EDT
Subject: [Rd] AnonCVS
Message-ID: <d7.920102a.28807b20@aol.com>

Hey whats cvs?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 17:30:07 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 09:30:07 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <d7.920102a.28807b20@aol.com>
References: <d7.920102a.28807b20@aol.com>
Message-ID: <87d774zt9s.fsf@jeeves.blindglobe.net>

>>>>> "p" == plastictyranny  <plastictyranny@aol.com> writes:

    p> Hey whats cvs?

See http://cvshome.org/



-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Fri Jul 13 17:30:29 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Fri, 13 Jul 2001 12:30:29 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <3B4F2225.C0311F18@warnes.net>

Duncan Templ Lang wrote:
> 
> Gregory R. Warnes wrote: 
> > 
> > Hi all, 
> > 
> > 
> > Looking at the code in src/main/dotcode.c, I see that MAX_ARGS is set to 
> > 65. 
> > 
> > While it is possible to work around this limitation, it seems 
> > arbitrary. I propose increasing the arbitrary value to 255 and adding 
> > appropriate documentation to the Foreign manual page. 
> > 
> > Any objections/comments? 
> 
> Unfortunately, it isn't quite as simple as that. The code that uses 
> MAX_ARGS would also need to be extended and that involves adding the 
> remaining cases to the switch statement in do_dotCode() and 
> do_dotcall() in src/main/dotcode.c There's no reason why it can't be 
> done. Somebody simply has to generate the appropriate code, 
> presumably programmatically with a little script. I recall this was 
> extended in S4, but 64 was adequate for that context. 
> 
> I imagine that there are some systems limit the number of arguments 
> one can have to a routine. 
>

OK.  I wrote a little R script to generate the necessary case
statements.  Since these code chunks are rather large (7140 lines
each!), I modifed src/main/dotcode to #include the case statements from
the (new) files /src/main/dotcode_cases.c and  /src/main/dotcall_cases.c
.   I'm not sure that this is the best way to do this, but including
these code chunks in dotcode.c makes it unmanagable.  

While I was making and (this time) testing the changes, I noticed that
one declaration had the value 65 hardcoded rather than using MAX_ARGS.  

I've uploaded a tgz file containing the patch and the R script that
generated the case statement/call code to
ftp::/cran.r-project.org/incoming/dotcall_255.tgz

With this patch applied, the fortran subroutin I'm using now works fine
with 85 arguments.  I imagine that it should be tested on several
platforms to ensure that there isn't (as Duncan menioned) that a problem
with compilers/platforms restricting the number of arguments.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jul 13 17:59:12 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Jul 2001 11:59:12 -0500
Subject: [Rd] AnonCVS
In-Reply-To: <87ofqoztp9.fsf@jeeves.blindglobe.net>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <6rwv5cahpb.fsf@franz.stat.wisc.edu>

rossini@blindglobe.net (A.J. Rossini) writes:

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 

Are there reasons for using anonymous cvs when anonymous rsync access
is available?  Quite frankly I don't understand why one would use
anonymous cvs instead of anonymous rsync.

(I do realize that with anonymous cvs you can read the CVS logs and
you can't do that with anonymous rsync but we make the logs available
in another form on developer.r-project.org.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jul 13 18:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jul 2001 19:06:12 +0200
Subject: [Rd] AnonCVS
In-Reply-To: rossini@blindglobe.net's message of "13 Jul 2001 09:20:50 -0700"
References: <200107131607.JAA18455@cramer.stat.ucla.edu> <87ofqoztp9.fsf@jeeves.blindglobe.net>
Message-ID: <x2hewgsqrf.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> (sent to r-devel, in case anyone is interested)
> >>>>> "JdL" == Jan de Leeuw <deleeuw@stat.ucla.edu> writes:
> 
>     JdL> Great. Which modules are available for checkout ?  --- J.
> 
> (regarding R's anon cvs archive):
> 
> R  R-manuals  R-notes
> 
> (R = the "whole thing", and is probably the only one of interest -- at
> the anoncvs level, we don't have a sophisticated module structure --
> in fact, if there is one for the real archive, I don't know about it).

[Mostly modules of historical interest, some modules relating to
the web pages on www.r-project.org and developer.r-project.org, course
materials, and the foreign package]

> Looks like it nearly in sync with the main mirror, only 30 minutes of
> of (a mirror of the???) main archive.
> 
> The modules and the timing of the sync I know; the rest is strictly
> conjecture. 
> 
> best,
> -tony

Before people start doing this too much, we should probably get some
guidelines written down. In particular, there are quite a few things
done with CVS tags and a raw checkout of the R module might not be
what you want   .

[ assuming CVSROOT=:pserver:anoncvs@cvs.r-project.org:/home/rcvs/src/ ]

cvs co -r 1-3 R         # gives version 1.3.0
                        # earlier versions are R-1-2-3 etc.
    
cvs co -r 1-releases R  # gives the pre-release of 1.4.0
cvs co -r 1-3-patches R # gives the patched current version (1.3.1pre)

With no tag you get the bleeding-edge/large-changes version that
should eventually become 2.0.0. This was recently opened so there's
not really anything there yet.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 18:25:15 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 10:25:15 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <6rwv5cahpb.fsf@franz.stat.wisc.edu>
References: <200107131607.JAA18455@cramer.stat.ucla.edu>
 <87ofqoztp9.fsf@jeeves.blindglobe.net>
 <6rwv5cahpb.fsf@franz.stat.wisc.edu>
Message-ID: <87wv5cyc5g.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> rossini@blindglobe.net (A.J. Rossini) writes:
    >> Looks like it nearly in sync with the main mirror, only 30
    >> minutes of of (a mirror of the???) main archive.
    >> 
    >> The modules and the timing of the sync I know; the rest is
    >> strictly conjecture.

    DB> Are there reasons for using anonymous cvs when anonymous rsync
    DB> access is available?  Quite frankly I don't understand why one
    DB> would use anonymous cvs instead of anonymous rsync.

Reason 1: to handle local changes on a bleeding-edge that one wants to
keep for various reasons, but which would be silly to send in as a
patch (you can then merge in upstream changes onto the local copy,
etc).  I've done that twice now with R, and assume that it'll happen
again.  Does rsync tell you which files have conflicts and do the
merge?

Reason 2: I can remember "cvs update" for a subdirectory; I can't
recall the incantation for rsync which would do the same thing.
(sure, it's 5 minutes of reading the manuals, I'd assume, but I don't
have that time).

Note that both of the above are incredibly valid for omegahat, less so
for R (2x isn't much, compared to the on-going major mods I've got
for omegahat).

Maybe more to the point: are there any reasons for sane
users/developers to do this?

:-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:08:13 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:08:13 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713180006.6FD3D36F9@sitemail.everyone.net>
References: <20010713180006.6FD3D36F9@sitemail.everyone.net>
Message-ID: <87sng0ya5u.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Its a bit annoying to specify the "-d ..." every time, but
    GRW> it'll work until you have time to fix it.

Fixed, but please verify.  
        
        /home/rcvs/src

should work, now (no trailing "/").

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Jul 13 19:57:22 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 13 Jul 2001 11:57:22 -0700
Subject: [Rd] AnonCVS
In-Reply-To: <20010713184728.1D63F36F9@sitemail.everyone.net>
References: <20010713184728.1D63F36F9@sitemail.everyone.net>
Message-ID: <87lmlsy7vx.fsf@jeeves.blindglobe.net>

>>>>> "GRW" == Gregory R Warnes <Gregory> writes:

    GRW> Now I get an entirely different error: warnes@haplo:~/R/Rcvs$
    GRW> cvs -d :pserver:anoncvs@cvs.r-project.org:/home/rcvs/src
    GRW> login (Logging in to anoncvs@cvs.r-project.org) CVS password:
    GRW> cvs [login aborted]: connect to cvs.r-project.org:2401
    GRW> failed: Connection refused

Fixed and verified, this time.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murphyk@cs.berkeley.edu  Fri Jul 13 23:10:39 2001
From: murphyk@cs.berkeley.edu (murphyk@cs.berkeley.edu)
Date: Sat, 14 Jul 2001 00:10:39 +0200 (MET DST)
Subject: [Rd] ordered factors in tree package - bug? (PR#1025)
Message-ID: <200107132210.AAA03388@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I am new to R, and didn't know which list to send this to, since it is a
bug report about a package, not about core R...

I have created a regression tree using 4 predictors: 3 are unordered
(binary) predictors, and the last is a date (integer), which I declare
to be an ordered factor. However, the tree treats the date as if it were
un-ordered, splitting into non-consecutive subsets.

My code

dat <- read.table("/home/cs/murphyk/R/Eugene/102.dat", header=TRUE)
dat$machine <- factor(dat$machine)
dat$TIM <- factor(dat$TIM)
dat$lid <- factor(dat$lid)
#dat$date <- factor(dat$date, ordered=TRUE)
dat$date <- ordered(dat$date)
tr <- tree(TRES ~ ., dat)

produces

 1) root 100 0.149300 0.2345  
   2) TIM: 111 47 0.020650 0.2011  
     4) date: 9,11 11 0.002673 0.1845 *
     5) date: 6,7,8,10,13,14,15,16,17,18,19 36 0.014060 0.2061 *
   3) TIM: 222 53 0.029490 0.2642  
     6) date: 6,7,11,12,14,15,18,19 28 0.010670 0.2539  
      12) lid: A 6 0.001350 0.2350 *
      13) lid: B 22 0.006582 0.2591 *
     7) date: 8,9,10,13,16,17 25 0.012620 0.2756  
      14) machine: 101 14 0.005750 0.2850 *
      15) machine: 102 11 0.004055 0.2636 *

and yet

> dat$date
  [1] 6  6  6  6  6  7  7  7  7  7  7  7  8  8  8  9  9  9  9  9  9  9 
9  9  10
 [26] 10 10 10 10 10 11 11 11 11 11 11 11 11 12 12 12 13 13 13 13 13 13
13 13 13
 [51] 13 13 14 14 14 14 14 14 14 15 15 15 15 15 15 15 15 15 15 16 16 16
16 16 16
 [76] 16 16 17 17 17 17 17 17 17 17 17 17 17 17 17 18 18 18 18 18 19 19
19 19 19
Levels:  6 < 7 < 8 < 9 < 10 < 11 < 12 < 13 < 14 < 15 < 16 < 17 < 18 < 19 
> is.ordered(dat$date)
[1] TRUE



Also, how do I deal with dates of the form dd/mm/yy, instead of just
integers? (In the above file, I used perl to extract the day, since I
new month and year were constant.)

I have attached the text file 102.dat, so you can easily reproduce the
above bug. I am using R 1.2.3 on linux. For future reference, is it
considered bad form to send attachments?


Kevin
--------------FF3F4C9902BE262E184667B2
Content-Type: text/plain; charset=us-ascii;
 name="102.dat"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="102.dat"

date machine TIM lid TRES
6 101 222 B 0.24
6 102 222 B 0.26
6 102 111 B 0.20
6 102 222 B 0.24
6 101 111 A 0.20
7 102 111 A 0.20
7 101 111 B 0.25
7 102 222 B 0.27
7 101 111 A 0.18
7 102 111 A 0.18
7 101 222 B 0.28
7 102 222 B 0.24
8 102 111 B 0.21
8 101 222 B 0.25
8 101 222 B 0.29
9 101 222 B 0.28
9 101 111 A 0.17
9 102 222 A 0.27
9 101 111 A 0.21
9 102 111 A 0.16
9 101 111 A 0.21
9 102 111 A 0.18
9 101 111 A 0.18
9 102 111 A 0.18
10 102 222 B 0.30
10 101 222 B 0.29
10 102 222 A 0.25
10 101 222 B 0.29
10 102 222 B 0.23
10 102 111 A 0.20
11 102 222 B 0.24
11 101 111 A 0.17
11 102 111 A 0.18
11 102 222 A 0.26
11 102 111 A 0.20
11 102 222 B 0.28
11 101 111 A 0.19
11 102 222 A 0.23
12 101 222 B 0.26
12 101 222 B 0.24
12 102 222 B 0.26
13 101 222 B 0.27
13 102 222 B 0.28
13 102 222 B 0.26
13 101 111 A 0.20
13 101 111 A 0.20
13 102 222 B 0.27
13 102 111 A 0.19
13 102 222 A 0.24
13 101 111 A 0.24
13 101 222 B 0.30
13 102 222 B 0.25
14 101 111 B 0.21
14 102 222 B 0.25
14 102 222 B 0.28
14 101 222 B 0.23
14 102 111 A 0.21
14 101 111 A 0.19
14 101 222 B 0.26
15 102 222 A 0.25
15 102 111 A 0.21
15 101 222 B 0.28
15 102 222 A 0.22
15 101 111 A 0.23
15 102 222 A 0.23
15 101 222 B 0.27
15 102 222 B 0.23
15 101 222 B 0.27
15 102 222 B 0.28
16 101 222 A 0.28
16 101 222 B 0.27
16 101 111 A 0.20
16 101 222 B 0.34
16 101 222 B 0.27
16 102 111 A 0.24
16 102 111 A 0.21
16 102 111 B 0.17
17 102 111 A 0.20
17 101 111 A 0.20
17 102 111 A 0.17
17 101 222 A 0.29
17 102 222 B 0.27
17 101 222 B 0.27
17 102 111 B 0.22
17 102 222 B 0.28
17 101 111 A 0.20
17 101 111 A 0.20
17 101 111 B 0.20
17 101 222 B 0.30
17 101 111 A 0.22
18 101 222 B 0.28
18 101 111 B 0.26
18 101 111 A 0.18
18 102 111 B 0.21
18 101 222 A 0.22
19 101 111 B 0.21
19 102 111 A 0.21
19 101 222 B 0.26
19 101 111 A 0.22
19 102 111 A 0.20

--------------FF3F4C9902BE262E184667B2--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 10:40:53 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 11:40:53 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <200107131409.QAA01600@pubhealth.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
Message-ID: <15184.5029.853899.526774@mithrandir.hornik.net>

>>>>> maechler  writes:

> Not too hard to fix, the following buglet (new in 1.3.0),
> but I'm about to leave for one week (of vacation)..

> Here is an example (for Linux) :

>   lynne{sfs}214> cd /tmp
>   lynne{sfs}215> mkdir blue
>   lynne{sfs}216> cd blue
>   /tmp/blue
>   lynne{sfs}217> echo 'data(package = "mva")'|R-1.3.0 --vanilla

>   R : Copyright 2001, The R Development Core Team
>   Version 1.3.0  (2001-06-22)

>   R is free software and comes with ABSOLUTELY NO WARRANTY.
>   You are welcome to redistribute it under certain conditions.
>   Type `license()' or `licence()' for distribution details.

>   R is a collaborative project with many contributors.
>   Type `contributors()' for more information.

>   Type `demo()' for some demos, `help()' for on-line help, or
>   `help.start()' for a HTML browser interface to help.
>   Type `q()' to quit R.

>> data(package = "mva")
>   Data sets in package `mva':


>   Harman23.cor             Harman Example 2.3
>   Harman74.cor             Harman Example 7.4
>   ability.cov              Ability and Intelligence Tests

>   Warning message: 
>   package `blue' contains no datasets in: data(package = "mva") 
>> 
> -------------------

> See the warning line at the very end.  It's because of the new data()
> feature of looking for data sets in the current directory...

Don't think that this is a new feature ...

Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
in the working directory needs rethinking.  Do we really want this?  If
so, then e.g. we need to fix warnings if there is a data dir but no
index (the working dir is not simply a `package' ...).

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jul 14 15:20:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jul 2001 16:20:27 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: Kurt Hornik's message of "Sat, 14 Jul 2001 11:40:53 +0200"
References: <200107131409.QAA01600@pubhealth.ku.dk> <15184.5029.853899.526774@mithrandir.hornik.net>
Message-ID: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Don't think that this is a new feature ...
> 
> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
> in the working directory needs rethinking.  Do we really want this?  If
> so, then e.g. we need to fix warnings if there is a data dir but no
> index (the working dir is not simply a `package' ...).

Yup. (I have one of those in one of my builddirs, so get reminded
about that from time to time. Just now I can't seem to reproduce it
though.)

I think we do want this feature but then I think I proposed it in the
first place.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 18:46:05 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 19:46:05 +0200
Subject: [Rd] data(package = "..") gives extraneous warning (PR#1024)
In-Reply-To: <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
References: <200107131409.QAA01600@pubhealth.ku.dk>
 <15184.5029.853899.526774@mithrandir.hornik.net>
 <x2wv5bwq1g.fsf@blueberry.kubism.ku.dk>
Message-ID: <15184.34141.300494.134280@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>> Don't think that this is a new feature ...
>> 
>> Anyway, fixed now.  Nevertheless, the idea of also looking for data sets
>> in the working directory needs rethinking.  Do we really want this?  If
>> so, then e.g. we need to fix warnings if there is a data dir but no
>> index (the working dir is not simply a `package' ...).

> Yup. (I have one of those in one of my builddirs, so get reminded
> about that from time to time. Just now I can't seem to reproduce it
> though.)

> I think we do want this feature but then I think I proposed it in the
> first place.

Are you happy with the current rules?  If so, I could modify the code to
be more reasonable with its warnings ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Jul 14 21:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 14 Jul 2001 22:52:51 +0200
Subject: [Rd] unbalanced braces in Rd files
Message-ID: <15184.45347.269756.435369@mithrandir.hornik.net>

Following requests by Duncan Murdoch and Paul Gilbert, I have included
some code for testing for unbalanced braces in Rd files into R CMD
check.  

Out of 147 packages on CRAN it found problems in 50 packages.  The ones
I looked into all were correctly identified, so I hope the code works
reasonably well ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jul 15 19:34:02 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jul 2001 13:34:02 -0500
Subject: [Rd] Access to cran.us.r-project.org
Message-ID: <6relrivy79.fsf@franz.stat.wisc.edu>

I am the maintainer of one of the CRAN mirrors in the U.S.,
cran.us.r-project.org.  It appears that this site has been
inaccessible since Friday.

This has me puzzled because I can connect to the same machine through
ssh and I can see that the http daemon (apache) is running.  In fact I
can make an http connection from this machine to this machine and from
other machines on any of our subnets to this machine.

My only theory is that something has changed at the interface between
our network and external networds so that it no longer forwards
incoming packets to port 80.  I can't check this easily myself because
my outside connection is from a computer running Windows and I don't
know anything about network diagnostics under Windows.

Could someone tell me 
 a) Does this site indeed appear to be down?
 b) If you try to trace the route to this site, where does the
 roadblock appear to be?
 c) Is there a way of finding out if the problem is specific to port
 80?

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Jul 15 19:46:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 Jul 2001 11:46:14 -0700
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: <6relrivy79.fsf@franz.stat.wisc.edu>
References: <6relrivy79.fsf@franz.stat.wisc.edu>
Message-ID: <8766cut4i1.fsf@jeeves.blindglobe.net>

>>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
    DB> cran.us.r-project.org.  It appears that this site has been
    DB> inaccessible since Friday.

    DB> This has me puzzled because I can connect to the same machine
    DB> through ssh and I can see that the http daemon (apache) is
    DB> running.  In fact I can make an http connection from this
    DB> machine to this machine and from other machines on any of our
    DB> subnets to this machine.

    DB> My only theory is that something has changed at the interface
    DB> between our network and external networds so that it no longer
    DB> forwards incoming packets to port 80.  I can't check this
    DB> easily myself because my outside connection is from a computer
    DB> running Windows and I don't know anything about network
    DB> diagnostics under Windows.

    DB> Could someone tell me a) Does this site indeed appear to be
    DB> down?  b) If you try to trace the route to this site, where
    DB> does the roadblock appear to be?  c) Is there a way of finding
    DB> out if the problem is specific to port 80?

Traceroute gets there. 

16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
108.532 ms
17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
109.648 ms  109.921 ms
18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
109.904 ms
19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
ms
20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
112.534 ms
21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
111.896 ms
root@jeeves:~
# # command used:    traceroute cran.us.r-project.org



telnet'ing to port 80 "hangs".  Lynx doesn't work either.

I could nmap it, but don't want to be viewed as a hacker... (I'd tell
you the ip-address of the machine in advance).

I think it might be a local config problem?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 00:12:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 01:12:54 +0200
Subject: [Rd] Access to cran.us.r-project.org
In-Reply-To: rossini@blindglobe.net's message of "15 Jul 2001 11:46:14 -0700"
References: <6relrivy79.fsf@franz.stat.wisc.edu> <8766cut4i1.fsf@jeeves.blindglobe.net>
Message-ID: <x2y9pp947d.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "DB" == Douglas Bates <bates@stat.wisc.edu> writes:
> 
>     DB> I am the maintainer of one of the CRAN mirrors in the U.S.,
>     DB> cran.us.r-project.org.  It appears that this site has been
>     DB> inaccessible since Friday.
> 
>     DB> This has me puzzled because I can connect to the same machine
>     DB> through ssh and I can see that the http daemon (apache) is
>     DB> running.  In fact I can make an http connection from this
>     DB> machine to this machine and from other machines on any of our
>     DB> subnets to this machine.
> 
>     DB> My only theory is that something has changed at the interface
>     DB> between our network and external networds so that it no longer
>     DB> forwards incoming packets to port 80.  I can't check this
>     DB> easily myself because my outside connection is from a computer
>     DB> running Windows and I don't know anything about network
>     DB> diagnostics under Windows.
> 
>     DB> Could someone tell me a) Does this site indeed appear to be
>     DB> down?  b) If you try to trace the route to this site, where
>     DB> does the roadblock appear to be?  c) Is there a way of finding
>     DB> out if the problem is specific to port 80?
> 
> Traceroute gets there. 
> 
> 16  a0.uwisc.bbnplanet.net (4.24.223.22)  109.324 ms  109.628 ms
> 108.532 ms
> 17  r-peer-WNMadison-gw.net.wisc.edu (216.56.1.18)  110.048 ms
> 109.648 ms  109.921 ms
> 18  r-macc.net.wisc.edu (144.92.128.129)  111.303 ms  109.753 ms
> 109.904 ms
> 19  144.92.128.196 (144.92.128.196)  112.013 ms  112.497 ms  113.195
> ms
> 20  e1-2.foundry2.cs.wisc.edu (128.105.1.6)  111.985 ms  113.530 ms
> 112.534 ms
> 21  franz.stat.wisc.edu (128.105.174.95)  112.077 ms  112.941 ms
> 111.896 ms
> root@jeeves:~
> # # command used:    traceroute cran.us.r-project.org
> 
> 
> 
> telnet'ing to port 80 "hangs".  Lynx doesn't work either.
> 
> I could nmap it, but don't want to be viewed as a hacker... (I'd tell
> you the ip-address of the machine in advance).
> 
> I think it might be a local config problem?

developer.r-project.org is equally dead. For the same reason of
course. It *is* possible to connect locally, e.g.

lynx developer.r-project.org

works fine when issued on Franz. The apache server seems to have been
reset at 06:25 this morning and also at 11.19 yesterday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Mon Jul 16 07:52:14 2001
From: henrikb@braju.com (Henrik Bengtsson)
Date: Sun, 15 Jul 2001 23:52:14 -0700
Subject: [Rd] Function calls and UseMethod.
Message-ID: <KKEGJOGBELBHDIKPINBMCEHFCFAA.henrikb@braju.com>

Maybe the following have already been discussed, if not...

BACKGROUND: I am writing a class which should have the method get(). For
this (and a lot of other things) to work I have to redefine the default
get() like this:

if (!exists("get.default")) get.default <- get;
get <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("get", obj, ...);
}

and still I am not sure if this is bullet proof. Maybe someone else, i.e. in
a previously loaded library, has already modified the get() method.

SUGGESTION I: Would it be possible to have *all* function calls by default
using the UseMethod approach? What I suggest results in that there is no
need for people to actually write the UseMethod function wrappers, but it
should be done within [R]. Example:

myHelloWorld.default <- function() {
  cat("Hello world!\n");
}

and this should be able to be called just as

myHelloWorld()

without having to explicitly write

myHelloWorld <- function(obj, ...) {
  if (missing(obj) obj <- NULL;
  UseMethod("myHelloWorld", obj, ...)
}

I think this could clean up a lot of the "mess" of overloading and
redefining functions. It would also definitely remove on risk of overwriting
allready existing functions. I can see some problems how to implement this;
for instance, how would [R] know that myHelloWorld is a function call? I
know too little about the internal structure.

SUGGESTION II: If the first approach is not possible, what about "cleaning
up" the [R] code (base etc) and always write like get.default declarations
and not just get? Is there a reason not to?

Thanks

Henrik Bengtsson

150 Panoramic Way
Berkeley, CA 94704
(510) 647-3572
h e n r i k b @ b r a j u . c o m

PS. For some reason I mailed this message to r-announce-request@lists...
before. Sorry about that. DS.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 10:35:05 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)
Subject: [Rd] polyroot() (PR#751)
Message-ID: <200107160935.LAA10917@pubhealth.ku.dk>

In a bug report from Nov.28 2000, Li Dongfeng writes:

-----
I have found that the polyroot()
function in R-1.1.1(both solaris
and Win32 version) gives totally
incorrect result. Here is the offending
code:

# Polyroot bug report:
# from R-1.1.1
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
 [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
[15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
[22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
# from Splus 2000
> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
 [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
[11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
[16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
[21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
[26] 1.2439649

>From mathematical theory I know that the Splus result
is correct while the R result is wrong. I would have
checked the source if I had the time.
----- (end Dongfeng)

This was analyzed somewhat, and it was found that polyroot() does
work, sort of, for lower degree polynomials, but becomes numerically
unstable when the degree is large. The exact result is
compiler-dependent, but the problem is still with us:

> sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
 [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
 [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
[15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
[22] 1.8989308 1.9040403 1.9357768 1.9907273

It has been nagging us from the bug repository ever since.

Last night I got the bright idea of feeding that polynomial to the
TOMS-419 routine off of Netlib, and got results that agree with the
ones stated for S-PLUS. Now this *is* the algorithm that the one in R
is supposed to be a C transcription of, so there would seem to be a
transcription error somewhere...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Mon Jul 16 14:06:18 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Mon, 16 Jul 2001 15:06:18 +0200 (MET DST)
Subject: [Rd] make check failure on SGI-IRIX6.5 (PR#1026)
Message-ID: <200107161306.PAA13252@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched version
OS: SGI's IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


During the 'make check' step of the installation procedure, I had the following
error messages


> make test > rapportMakeTest
/bin/sh: /usr/local/bin//perl: arg list too long

----------
I've seen that already in my former life in the software industry.
It seems the SGI sh shell is rather more limitated by the length
of arg lists than it's linux conterpart (I do not know about the other OSs).

----------
>gmake[3]: *** [modreg-Ex.Rout] Bus error (core dumped)
gmake[3]: *** Deleting file `modreg-Ex.Rout'
gmake[2]: *** [test-Examples] Error 2
gmake[1]: *** [test-Examples] Error 2
gmake: *** [test-all-basics] Error 1
----------
I cannot (or rather I do not dare) make any hypothesis about this one...



Cheers,






Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 16 14:36:47 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Jul 2001 15:36:47 +0200
Subject: [Rd] forwarded message from Inge Monika
Message-ID: <15186.60911.557600.739@mithrandir.hornik.net>


--Hipsgkxbeg
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

This one was sent privately to me.


--Hipsgkxbeg
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from tuvok.kom.tuwien.ac.at (tuvok.kom.tuwien.ac.at [192.35.241.66])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.8.5) with ESMTP id WAA28632
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:30:30 +0200
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by tuvok.kom.tuwien.ac.at (8.11.3/8.11.3) with ESMTP id f6DKY9i22708
	for <Kurt.Hornik@ci.tuwien.ac.at>; Fri, 13 Jul 2001 22:34:09 +0200 (MEST)
Received: from postal1.lbl.gov (really [128.3.7.82]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15L9ea-000JL3C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 15:35:12 -0500 (CDT) 
Received: from SpamWall.lbl.gov (localhost [127.0.0.1])
	by postal1.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZA216368
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:11 -0700 (PDT)
Received: from lbl.gov (bugari.lbl.gov [131.243.225.136])
	by SpamWall.lbl.gov (8.11.2/8.11.2) with ESMTP id f6DKZ9A16349
	for <Kurt.Hornik@r-project.org>; Fri, 13 Jul 2001 13:35:09 -0700 (PDT)
Message-ID: <3B4F5B85.76DDABF1@lbl.gov>
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-UIDL: 696a8ba40a8612f22281868799c93677
From: Inge Monika <imonika@lbl.gov>
Sender: imonika@lbl.gov
To: Kurt.Hornik@r-project.org
Subject: R memory problem
Date: Fri, 13 Jul 2001 13:35:18 -0700

Dear Kurt,

My name is Inge Monika. I'm currently using R version 1.3.0 to do
clustering analysis for my data set. My data set consists of 7 variables
and 21120 observations. Now, I have trouble increasing my vector size to
do the "emclust" function for my data. I only could increase my vector
size up to 2047M which is still too small. I keep getting an error
message "cannot allocate vector of size 82Kb" after I applied the
emclust function.
Could you tell me what's that mean?
And how can I solve that problem? My system administrator already
provide me with 2.5G swap space, but still I cannot increase my vector
size for more than 2047M.

I hope you could help me to solve this problem.
Thank you very much for your time and attention. I hope to hear from you
soon.

Sincerely,
Inge Monika


--Hipsgkxbeg--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Mon Jul 16 15:50:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 10:50:25 -0400
Subject: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>


I would like to create an R package that will depend on the ability to use
more than 65 parameters.  Would it be reasonable to expect this patch (or
something equivalent) to be part of , say R > 1.3.1 ?

Would it help if I submit an official bug report?

-Greg

 
  From: Gregory R. Warnes [mailto:greg@warnes.net]
  > 
  > Duncan Templ Lang wrote:
  > > 
  > > Gregory R. Warnes wrote: 
  > > > 
  > > > Hi all, 
  > > > 
  > > > 
  > > > Looking at the code in src/main/dotcode.c, I see that 
  > MAX_ARGS is set to 
  > > > 65. 
  > > > 
  > > > While it is possible to work around this limitation, it seems 
  > > > arbitrary. I propose increasing the arbitrary value to 
  > 255 and adding 
  > > > appropriate documentation to the Foreign manual page. 
  > > > 
  > > > Any objections/comments? 
  > > 
  > > Unfortunately, it isn't quite as simple as that. The code 
  > that uses 
  > > MAX_ARGS would also need to be extended and that involves 
  > adding the 
  > > remaining cases to the switch statement in do_dotCode() and 
  > > do_dotcall() in src/main/dotcode.c There's no reason why 
  > it can't be 
  > > done. Somebody simply has to generate the appropriate code, 
  > > presumably programmatically with a little script. I 
  > recall this was 
  > > extended in S4, but 64 was adequate for that context. 
  > > 
  > > I imagine that there are some systems limit the number of 
  > arguments 
  > > one can have to a routine. 
  > >
  > 
  > OK.  I wrote a little R script to generate the necessary case
  > statements.  Since these code chunks are rather large (7140 lines
  > each!), I modifed src/main/dotcode to #include the case 
  > statements from
  > the (new) files /src/main/dotcode_cases.c and  
  > /src/main/dotcall_cases.c
  > .   I'm not sure that this is the best way to do this, but including
  > these code chunks in dotcode.c makes it unmanagable.  
  > 
  > While I was making and (this time) testing the changes, I 
  > noticed that
  > one declaration had the value 65 hardcoded rather than 
  > using MAX_ARGS.  
  > 
  > I've uploaded a tgz file containing the patch and the R script that
  > generated the case statement/call code to
  > ftp::/cran.r-project.org/incoming/dotcall_255.tgz
  > 
  > With this patch applied, the fortran subroutin I'm using 
  > now works fine
  > with 85 arguments.  I imagine that it should be tested on several
  > platforms to ensure that there isn't (as Duncan menioned) 
  > that a problem
  > with compilers/platforms restricting the number of arguments.
  > 
  > -Greg
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-devel mailing list -- Read 
  > http://www.ci.tuwien.ac.at/~hornik/R/R-  > FAQ.html
  > Send 
  > "info", "help", or "[un]subscribe"
  > (in the 
  > "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
  > _._._._._._._._._._
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Jul 16 16:38:35 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 16 Jul 2001 11:38:35 -0400
Subject: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
References: <5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>
Message-ID: <cg26ltsuvfolq5qttamuifafiub2ttlbbk@4ax.com>

On Mon, 16 Jul 2001 10:50:25 -0400, you wrote in message
<5429125E11E4D411AF7300805FE603A8014CEC74@groexmbcr02.pfizer.com>:

>
>I would like to create an R package that will depend on the ability to use
>more than 65 parameters.  Would it be reasonable to expect this patch (or
>something equivalent) to be part of , say R > 1.3.1 ?

People are slow to upgrade, so you might be better off in the short
run to somehow reduce the number of parameters below 65.  For example,
write a wrapper function that groups a number of scalar parameters
into one vector.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 16 17:43:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jul 2001 18:43:18 +0200
Subject: [Rd] polyroot() (PR#751)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Mon, 16 Jul 2001 11:35:05 +0200 (MET DST)"
References: <200107160935.LAA10917@pubhealth.ku.dk>
Message-ID: <x2k8189655.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

> In a bug report from Nov.28 2000, Li Dongfeng writes:
> 
> -----
> I have found that the polyroot()
> function in R-1.1.1(both solaris
> and Win32 version) gives totally
> incorrect result. Here is the offending
> code:
> 
> # Polyroot bug report:
> # from R-1.1.1
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8758259 0.9486499 0.9731015 1.5419189 1.7466214 1.7535362 1.7589484
>  [8] 2.0216317 2.4421509 2.5098488 2.6615572 2.7717724 2.8444048 2.9147685
> [15] 2.9302278 2.9757159 3.2037151 3.2052962 3.2498510 3.2815881 3.3250881
> [22] 4.6593700 4.7048556 5.2738258 5.7369920 5.9017094
> # from Splus 2000
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8038812 0.8038812 0.8758259 0.8758259 0.9235722
>  [6] 0.9235722 0.9439788 0.9439788 0.9536692 0.9536692
> [11] 0.9582403 0.9582403 0.9596028 1.0420978 1.0435796
> [16] 1.0435796 1.0485816 1.0485816 1.0593458 1.0593458
> [21] 1.0827524 1.0827524 1.1417794 1.1417794 1.2439649
> [26] 1.2439649
> 
> From mathematical theory I know that the Splus result
> is correct while the R result is wrong. I would have
> checked the source if I had the time.
> ----- (end Dongfeng)
> 
> This was analyzed somewhat, and it was found that polyroot() does
> work, sort of, for lower degree polynomials, but becomes numerically
> unstable when the degree is large. The exact result is
> compiler-dependent, but the problem is still with us:
> 
> > sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,0,0,0,0,0,0,0,0,0,1,-2))))
>  [1] 0.8025898 0.8828790 0.9270844 0.9412183 0.9413746 0.9498326 0.9506305
>  [8] 0.9999350 1.0687862 1.0759356 1.2420437 1.2883753 1.3198206 1.4519195
> [15] 1.4768297 1.6330082 1.6838551 1.6970280 1.7250806 1.7471799 1.8787228
> [22] 1.8989308 1.9040403 1.9357768 1.9907273
> 
> It has been nagging us from the bug repository ever since.
> 
> Last night I got the bright idea of feeding that polynomial to the
> TOMS-419 routine off of Netlib, and got results that agree with the
> ones stated for S-PLUS. Now this *is* the algorithm that the one in R
> is supposed to be a C transcription of, so there would seem to be a
> transcription error somewhere...

Oops, something went wrong in the copying from the original report.
The test case is

 sort(abs(polyroot(c(1,-2,1,0,0,0,0,0,0,0,0,0,-2,5,-2,
                   0,0,0,0,0,0,0,0,0,1,-2,1))))
                                          ^
                                        Fell out.

Anyways, the bug is fixed now. Here's the patch if anyone is in a
hurry:

$ cvs diff -u src/appl/cpoly.c 
Index: src/appl/cpoly.c
===================================================================
RCS file: /home/rdevel/CVS-ARCHIVE/R/src/appl/cpoly.c,v
retrieving revision 1.23
diff -u -r1.23 cpoly.c
--- src/appl/cpoly.c    26 Apr 2001 15:28:35 -0000      1.23
+++ src/appl/cpoly.c    16 Jul 2001 16:33:59 -0000
@@ -646,7 +646,7 @@
 
     e = hypot(qr[0], qi[0]) * m_re / (a_re + m_re);
     for (i=0; i < n; i++)
-       e *= (ms + hypot(qr[i], qi[i]));
+       e = e*ms + hypot(qr[i], qi[i]);
 
     return e * (a_re + m_re) - mp * m_re;
 }
  
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jul 16 23:59:49 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 17 Jul 2001 10:59:49 +1200
Subject: [Rd] Re: argument ordering (was <blank>)
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
Message-ID: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>

Hi


---snip---
I am trying to change the number of the ticks on each axis, but every time I
can not succeed and receive the error message shown below even I use the
default values:

>plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
   Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
:
        location and label lengths differ, 6 != 3
---snip---


The problem is that the "lab" parameter is being passed down (via plot.ts)
to axis in a "..." argument, but it is being matched to the "labels"
argument in axis().

In other words, axis() thinks you are saying "labels=c(5, 5, 7)".   This is
not your fault;  it is an unfortunate interaction between partial matching
of argument names and the "..." argument.

A simple workaround would be ...

    op <- par(lab=c(5, 5, 7)
    plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
    par(op)

... a more long-term solution will require some more thought ...

[to R-devel:

    (i) could put the labels argument at the end of the list -- i.e.,
axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
using "lab" as an abbreviation for "labels" would then get consumed as a
par() setting (?)

    (ii) could put explicit "lab" argument in the list too -- i.e.,
axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

    (iii) ... ?]

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:30:26 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:30:26 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>


  From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
  > 
  > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
  > 
  > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
  > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
  > >   > >
  > >   > > I would like to create an R package that will depend on
  > >   > > the ability to use
  > >   > > more than 65 parameters.  Would it be reasonable to expect
  > >   > > this patch (or
  > >   > > something equivalent) to be part of , say R > 1.3.1 ?
  > >   >
  > >   > People are slow to upgrade, so you might be better 
  > >   > off in the short
  > >   > run to somehow reduce the number of parameters below 65.
  > >   > For example,
  > >   > write a wrapper function that groups a number of 
  > >   > scalar parameters
  > >   > into one vector.
  > >
  > > Actually, the whole point of the patch was to get out of 
  > > this.  I want to keep the code as close to what was written 
  > > by the original author and as
  > > simple as possible...
  > 
  > 
  > Sorry, but I don't see that.  You want to write the wrapper 
  > in R?  Why is
  > it not as simple to write it in C?  

It is, in fact *not* as simple to write it in C.  Now the user must go from
2 languages (R and FORTRAN) to 3.  

  > I really don't see the need to remove
  > the limitation in R (or even to have it as high as 65) 
  > since R now has
  > .External() which allows an unlimited list of arguments to 
  > be passed to C
  > code.  I can't believe that the natural R representation is 
  > 85 separate
  > objects, 

No the actual R representation isn't anywhere near 85 separate objects.  The
actual R representation is more like 10 objects.  The point is that existing
FORTRAN code---which is used for R, S-Plus, and for a stand alone
program---makes use of some 60 objects which need to be dynamically sized,
hence the other 25 parameters specifying object sizes.  Indeed many of these
objects are merely 'scratch space' for the code to work in.  Still, its
easier for the user to allocate these in R (and have R manage the memory)
than to write the equivalent code in C. 

  > so the natural way looks like a C wrapper 
  > translating between R
  > objects and Fortran pointers.  You can even copy selectively.
  > 
  > The argument is that new code should probably be using .Call (if S
  > compatibility is relevant) or .External rather than .C, at 
  > least provided
  > that a C wrapper is feasible.  Those interfaces seem very 
  > much under-used.
  > (Including by me, for S3-compatibility reasons.)

Brian, do you really expect everyone to get in the habit of writing C code
to translate R SEXP into appropriate C or Fortran objects?   For the large
number of cases where the objects to be passed to and from C/Fortran are
simple scalars and vectors it really makes sense to keep the code to do the
translation in a standard library routine like do_dotcode().  This keeps the
bugs down to a minimum and makes it as easy as possible for people to
interface code.

All I suggested doing was removing the arbitrary restriction to <= 65
parameters.  I even provided the code.  What's the problem?

  > 
  > -- 
  > Brian D. Ripley,                  ripley@stats.ox.ac.uk
  > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
  > University of Oxford,             Tel:  +44 1865 272861 (self)
  > 1 South Parks Road,                     +44 1865 272860 (secr)
  > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
  > 
  > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
  > -.-.-.-.-.-.-.-.-.-
  > r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 17 00:52:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 16 Jul 2001 19:52:30 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC7B@groexmbcr02.pfizer.com>

  > From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
  > 
  > Greg,
  >   you might be better off writing a wrapper,
  >    
  >   R->foo where foo has less than 65 args and does nothing more than
  >   unpack them and calls bar (the original) with as many args as you
  >   want, not much code change and not much cost...


Hi Rob,

[BTW, sorry about the crosspost to R-help.  Mean't to continue the
discussion on R-devel, but miss-typed.]

Actually, the original author used the function with 85 arguments in S-Plus.
Rather than adding a new wrapper function, I wanted to fix the (in my
opinion) artificial limit of 65 parameters and let them keep the same exact
source file between R and S-Plus.  

-Greg






  > 
  > -- 
  > +-----------------------------------------------------------
  > ----------------+
  > | Robert Gentleman                 phone : (617) 632-5250   
  >                 |
  > | Associate Professor              fax:   (617)  632-2444   
  >                 |
  > | Department of Biostatistics      office: M1B28
  > | Harvard School of Public Health  email: 
  > rgentlem@jimmy.dfci.harvard.edu   |
  > +-----------------------------------------------------------
  > ----------------+
  > 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 01:09:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 02:09:52 +0200
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Mon, 16 Jul 2001 19:30:26 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <x2pub0pga7.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large
> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.
> 
> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

Some anxiety that there might be platforms that really don't allow
many parameters, I suppose. (As opposed to the arbitrary limit imposed
by R, essentially caused by the programmer giving up after

    case 65:
        retval = (SEXP)fun(
            cargs[0],  cargs[1],  cargs[2],  cargs[3],  cargs[4],
            cargs[5],  cargs[6],  cargs[7],  cargs[8],  cargs[9],
            cargs[10], cargs[11], cargs[12], cargs[13], cargs[14],
            cargs[15], cargs[16], cargs[17], cargs[18], cargs[19],
            cargs[20], cargs[21], cargs[22], cargs[23], cargs[24],
            cargs[25], cargs[26], cargs[27], cargs[28], cargs[29],
            cargs[30], cargs[31], cargs[32], cargs[33], cargs[34],
            cargs[35], cargs[36], cargs[37], cargs[38], cargs[39],
            cargs[40], cargs[41], cargs[42], cargs[43], cargs[44],
            cargs[45], cargs[46], cargs[47], cargs[48], cargs[49],
            cargs[50], cargs[51], cargs[52], cargs[53], cargs[54],
            cargs[55], cargs[56], cargs[57], cargs[58], cargs[59],
            cargs[60], cargs[61], cargs[62], cargs[63], cargs[64]);
        break;

There's obviously no portable and neat way of doing variable length
argument lists.)

You don't need to go via SEXPs to solve your problem, and in fact not
even to C. You could for instance use (pardon, my Fortran is getting
rusty): 

      subroutine doit(work, p, i)
      double precision work(1)
      integer p(59), i(25)
      call myfun(work(1),work(p(1)),work(p(2)),....,work(p(59)),
     +           i(1),...,i(25))
      return
      end
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Jul 17 03:32:48 2001
From: paul@stat.auckland.ac.nz (paul@stat.auckland.ac.nz)
Date: Tue, 17 Jul 2001 04:32:48 +0200 (MET DST)
Subject: [Rd] Re: abline() AND rect() do not obey "xpd" (clipping) (PR#750)
Message-ID: <200107170232.EAA16241@pubhealth.ku.dk>

Hi


> Also,
>       rect()
> fails similarly.
> This gives funny legend()s :
>  plot(1:10)
>  legend(1,7.5,  c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  op <- par(xpd = NA)
>  legend(1,11.5, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 1:3)
>  ## pch = 1 also doesn't ?!?? ?? why??  It does here :
>  points(2+ 1:8, rep(11, 8), pch = 1:8, col = "purple")
>  ## and other pch's do here
>  legend(4,11.9, c("1st", "2nd", "third"), col = 1:3, lwd = 1:3, pch = 6:4)
>  par(op)
> ## Note that there seems another peculiar clipping bug
> ##       with pch = 1 in legend


I believe the rect() problem has been fixed by the fix to PR #943 -- Martin,
can you confirm this please?

I believe the pch=1 problem is the same as reported in PR #943

Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 07:45:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 07:45:23 +0100 (BST)
Subject: [R] RE: [Rd] too many arguments in foreign function call
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEC78@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.31.0107170728290.21400-100000@auk.stats>

On Mon, 16 Jul 2001, Warnes, Gregory R wrote:

>
>   From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
>   >
>   > On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
>   >
>   > >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
>   > >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
>   > >   > >
>   > >   > > I would like to create an R package that will depend on
>   > >   > > the ability to use
>   > >   > > more than 65 parameters.  Would it be reasonable to expect
>   > >   > > this patch (or
>   > >   > > something equivalent) to be part of , say R > 1.3.1 ?
>   > >   >
>   > >   > People are slow to upgrade, so you might be better
>   > >   > off in the short
>   > >   > run to somehow reduce the number of parameters below 65.
>   > >   > For example,
>   > >   > write a wrapper function that groups a number of
>   > >   > scalar parameters
>   > >   > into one vector.
>   > >
>   > > Actually, the whole point of the patch was to get out of
>   > > this.  I want to keep the code as close to what was written
>   > > by the original author and as
>   > > simple as possible...
>   >
>   >
>   > Sorry, but I don't see that.  You want to write the wrapper
>   > in R?  Why is
>   > it not as simple to write it in C?
>
> It is, in fact *not* as simple to write it in C.  Now the user must go from
> 2 languages (R and FORTRAN) to 3.

But the user is you, who knows C.  One can write the wrapper in Fortran
too, as ppr.f exemplifies.

>   > I really don't see the need to remove
>   > the limitation in R (or even to have it as high as 65)
>   > since R now has
>   > .External() which allows an unlimited list of arguments to
>   > be passed to C
>   > code.  I can't believe that the natural R representation is
>   > 85 separate
>   > objects,
>
> No the actual R representation isn't anywhere near 85 separate objects.  The
> actual R representation is more like 10 objects.  The point is that existing
> FORTRAN code---which is used for R, S-Plus, and for a stand alone
> program---makes use of some 60 objects which need to be dynamically sized,
> hence the other 25 parameters specifying object sizes.  Indeed many of these
> objects are merely 'scratch space' for the code to work in.  Still, its
> easier for the user to allocate these in R (and have R manage the memory)
> than to write the equivalent code in C.

Really?  Using R_alloc in C seems exactly equivalent to me.

>   > so the natural way looks like a C wrapper
>   > translating between R
>   > objects and Fortran pointers.  You can even copy selectively.
>   >
>   > The argument is that new code should probably be using .Call (if S
>   > compatibility is relevant) or .External rather than .C, at
>   > least provided
>   > that a C wrapper is feasible.  Those interfaces seem very
>   > much under-used.
>   > (Including by me, for S3-compatibility reasons.)
>
> Brian, do you really expect everyone to get in the habit of writing C code
> to translate R SEXP into appropriate C or Fortran objects?   For the large

No, but I am suggesting that most package writers should.

> number of cases where the objects to be passed to and from C/Fortran are
> simple scalars and vectors it really makes sense to keep the code to do the
> translation in a standard library routine like do_dotcode().  This keeps the
> bugs down to a minimum and makes it as easy as possible for people to
> interface code.

In most cases it is one or two vectors.  Beyond that, the lack of
type-checking causes a large number of bugs, so I do think using .Call is
the way to keep `bugs down to a minimum'.

> All I suggested doing was removing the arbitrary restriction to <= 65
> parameters.  I even provided the code.  What's the problem?

1) Your code had as I understand it a different arbitrary restriction.

2) We don't know what the OS-specific limits are.  Certainly in the days of
S-PLUS for Windows 3.3 there were quite low limits on the total size of the
arguments in use.  These days I don't even know how to find out such
information.

3) We always have to weigh the support issues of changing the code to
support a rare case.  (I do believe it is rare: this is the first
instance I have seen in ca 14 years of listening to S and R programmers.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Tue Jul 17 12:36:44 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Tue, 17 Jul 2001 13:36:44 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171136.NAA19217@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)


Hello,


The function La.eigen, called by cmdscale in the package mva behaves an
unexplicable way (for me).

The following lines show what happened.
I tried the very same on linux, and it worked fine.




>a <- matrix(c(1,2,3,2),3,3)
>a
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    1    2
[3,]    3    2    1
>library(mva)
>cmdscale(a)
Error in La.eigen(Tmat, symmetric = TRUE) : 
	On entry to DSYEV  parameter number 8 had an illegal value



Regards,



Laurent



PS: I had trouble during the 'make check' installation step. I was pointed out
it was a known problem with modreg on SGIs. I think both things are
independant,
but, well, one never knows...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 12:48:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 13:48:59 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171136.NAA19217@pubhealth.ku.dk>
References: <200107171136.NAA19217@pubhealth.ku.dk>
Message-ID: <15188.9771.406214.712244@mithrandir.hornik.net>

>>>>> laurent  writes:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)


> Hello,

> The function La.eigen, called by cmdscale in the package mva behaves
> an unexplicable way (for me).

> The following lines show what happened.  I tried the very same on
> linux, and it worked fine.

>> a <- matrix(c(1,2,3,2),3,3)
>> a
>      [,1] [,2] [,3]
> [1,]    1    2    3
> [2,]    2    1    2
> [3,]    3    2    1
>> library(mva)
>> cmdscale(a)
> Error in La.eigen(Tmat, symmetric = TRUE) : 
> 	On entry to DSYEV  parameter number 8 had an illegal value

I can confirm this on Naras's IRIX machine (in fact, was just about to
report this myself ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:02:12 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 17 Jul 2001 14:02:12 +0200 (MET DST)
Subject: [Rd] cmdscale in package mva (PR#1027)
Message-ID: <200107171202.OAA19478@pubhealth.ku.dk>

On Tue, 17 Jul 2001, Kurt Hornik wrote:

> >>>>> laurent  writes:
>
> > Full_Name: Laurent Gautier
> > Version: 1.3.0-patched
> > OS: IRIX 6.5
> > Submission from: (NULL) (130.225.67.199)
>
>
> > Hello,
>
> > The function La.eigen, called by cmdscale in the package mva behaves
> > an unexplicable way (for me).
>
> > The following lines show what happened.  I tried the very same on
> > linux, and it worked fine.
>
> >> a <- matrix(c(1,2,3,2),3,3)
> >> a
> >      [,1] [,2] [,3]
> > [1,]    1    2    3
> > [2,]    2    1    2
> > [3,]    3    2    1
> >> library(mva)
> >> cmdscale(a)
> > Error in La.eigen(Tmat, symmetric = TRUE) :
> > 	On entry to DSYEV  parameter number 8 had an illegal value
>
> I can confirm this on Naras's IRIX machine (in fact, was just about to
> report this myself ...)

Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
is returned?  Alternatively, it may fail on the first dsyev call, in which
case I would guess that the wrong LAPACK routine is being found (and that's
a plausible explanation).

I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)

What BLAS is in use?  The intention is that the workspace is chosen large
enough to allow the BLAS to work efficiently: it might just be that
the BLAS is reporting erroneously.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 17 13:13:59 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 17 Jul 2001 08:13:59 -0400
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <200107171202.OAA19478@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Tue, Jul 17, 2001 at 02:02:12PM +0200
References: <200107171202.OAA19478@pubhealth.ku.dk>
Message-ID: <20010717081359.D27049@jessie.research.bell-labs.com>


For what it is worth, I saw this problem a few weeks ago but didn't
have time to investigate it in depth and managed to find a work
around.  It arose for me on Solaris, specifically when I was compiling
with the native C compiler cc and f77.  Switching to gcc and f77
removed the problem.  (There is a possibility that I have this
backwards, but I think my memory is correct on this point.)

D.


ripley@stats.ox.ac.uk wrote:
> On Tue, 17 Jul 2001, Kurt Hornik wrote:
> 
> > >>>>> laurent  writes:
> >
> > > Full_Name: Laurent Gautier
> > > Version: 1.3.0-patched
> > > OS: IRIX 6.5
> > > Submission from: (NULL) (130.225.67.199)
> >
> >
> > > Hello,
> >
> > > The function La.eigen, called by cmdscale in the package mva behaves
> > > an unexplicable way (for me).
> >
> > > The following lines show what happened.  I tried the very same on
> > > linux, and it worked fine.
> >
> > >> a <- matrix(c(1,2,3,2),3,3)
> > >> a
> > >      [,1] [,2] [,3]
> > > [1,]    1    2    3
> > > [2,]    2    1    2
> > > [3,]    3    2    1
> > >> library(mva)
> > >> cmdscale(a)
> > > Error in La.eigen(Tmat, symmetric = TRUE) :
> > > 	On entry to DSYEV  parameter number 8 had an illegal value
> >
> > I can confirm this on Naras's IRIX machine (in fact, was just about to
> > report this myself ...)
> 
> Can you put a breakpoint at line 72 of Lapack.c and see what value of lwork
> is returned?  Alternatively, it may fail on the first dsyev call, in which
> case I would guess that the wrong LAPACK routine is being found (and that's
> a plausible explanation).
> 
> I get 102 with the built-in BLAS: the answer should be at least max(1, 3*n-1)
> 
> What BLAS is in use?  The intention is that the workspace is chosen large
> enough to allow the BLAS to work efficiently: it might just be that
> the BLAS is reporting erroneously.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 17 13:54:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: <3B498E1B.CEFB928@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>

I've found the problem.  The read.spss code was free-ing not Free-ing
memory allocated by Calloc.  On most platforms that would work, but not on
Windows where Calloc/Free and calloc/free use separate memory managers.

This explains the randomness of the problems.

I'm solving this (and a few other things) in 0.4-6.
I will put up a pre-compiled version, so update.packages() should fetch it
tomorrow.


On Mon, 9 Jul 2001, Uwe Ligges wrote:

> Thomas Lumley wrote:
> >
> > read.spss() is giving "Rgui.exe has generated errors and will be
> > closed..." on all the files I have tried (the same happens with Rterm as
> > well). This is R1.3.0 and the current `foreign',under Win2k.
> >
> > The problem doesn't happen under Linux on a different machine and
> > didn't happen with an earlier version of R and foreign under NT4 on a
> > different machine.
> >
> > As I updated to a new computer, new OS and new version of R at the same
> > time I don't know which component is responsible. Has anyone used
> > read.spss() with R 1.3.0 under Windows?
>
>
> [R-1.3.0, foreign_0.4-4, WinNT 4.0]
>
> A generated test file in SPSS 10, containing a  "matrix(c(2,3,3,5),
> ncol=2)", can be read in:
>
>   read.spss("c:/test.sav")
>
> $VAR00001
> [1] 2 3
>
> $VAR00002
> [1] 3 5
>
>
>
> But trying to read a non existant file crashes R on my machine:
>
>   read.spss("c:/nonexistant.abc")  # R crashes

This is already solved in 0.4-5.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 15:52:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 16:52:51 +0200
Subject: [Rd] cmdscale in package mva (PR#1027)
In-Reply-To: <20010717081359.D27049@jessie.research.bell-labs.com>
References: <200107171202.OAA19478@pubhealth.ku.dk>
 <20010717081359.D27049@jessie.research.bell-labs.com>
Message-ID: <15188.20803.442122.659203@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> For what it is worth, I saw this problem a few weeks ago but didn't
> have time to investigate it in depth and managed to find a work
> around.  It arose for me on Solaris, specifically when I was compiling
> with the native C compiler cc and f77.  Switching to gcc and f77
> removed the problem.  (There is a possibility that I have this
> backwards, but I think my memory is correct on this point.)

Earlier today I tried

	stat.auckland		(solaris)
	rgmiller.stanford	(irix)

both with gcc and g77.  Make check went thru on solaris but irix had the
reported problems ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue Jul 17 16:41:47 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 17 Jul 2001 11:41:47 -0400
Subject: [R] RE: [Rd] too many arguments in foreign function call
References: <Pine.WNT.4.31.0107161916001.1056-100000@tern.stats>
Message-ID: <3B545CBB.D9371BD0@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Mon, 16 Jul 2001, Warnes, Gregory R wrote:
> 
> >
> >   Duncan Murdoch <murdoch@stats.uwo.ca> wrote:
> >   > Gregory R. Warnes <gregory_r_warnes@groton.pfizer.com> wrote
> >   > >
> >   > >I would like to create an R package that will depend on
> >   > the ability to use
> >   > >more than 65 parameters.  Would it be reasonable to expect
> >   > this patch (or
> >   > >something equivalent) to be part of , say R > 1.3.1 ?
> >   >
> >   > People are slow to upgrade, so you might be better off in the short
> >   > run to somehow reduce the number of parameters below 65.
> >   > For example,
> >   > write a wrapper function that groups a number of scalar parameters
> >   > into one vector.
> >
> > Actually, the whole point of the patch was to get out of this.  I want to
> > keep the code as close to what was written by the original author and as
> > simple as possible...
> 
> Sorry, but I don't see that.  You want to write the wrapper in R?  Why is
> it not as simple to write it in C?  I really don't see the need to remove
> the limitation in R (or even to have it as high as 65) since R now has
> .External() which allows an unlimited list of arguments to be passed to C
> code.  I can't believe that the natural R representation is 85 separate
> objects, so the natural way looks like a C wrapper translating between R
> objects and Fortran pointers.  You can even copy selectively.
> 
> The argument is that new code should probably be using .Call (if S
> compatibility is relevant) or .External rather than .C, at least provided
> that a C wrapper is feasible.  Those interfaces seem very much under-used.
> (Including by me, for S3-compatibility reasons.)
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

The limitation to 65 arguments (or at any rate some fixed number) is
imposed by pretty fundamental limitations of C.  It applies to .External
and .Call as well as to .C, and any S language interface will have such
a limit unless it goes around the C calling mechanism (which in turn
would likely be devastating for portability).

It's understandable to want to create as little new C code as possible,
but since there has to be a limit, at some point we're saying "More than
N arguments to a subroutine are too confusing.  Simplify it before you
expose the interface to users."  65 seems a plausible value for N to me.

The example Greg describes with a bunch of scratch arrays is, in my
experience, usually best handled by a .Call to a C wrapper that uses C
macros from Appendix A of the green book to allocate the scratch space
(NEW_NUMERIC and NUMERIC_POINTER, for example).  That is usually only
marginally more work than writing the wrapper in R, is a good deal more
efficient, and hides the grosser ugliness from the end user better.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 17 16:48:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jul 2001 17:48:02 +0200
Subject: [Rd] read.spss, R 1.3.0, win2k
In-Reply-To: Prof Brian D Ripley's message of "Tue, 17 Jul 2001 13:54:05 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.31.0107171341100.1420-100000@gannet>
Message-ID: <x2n1635zgt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> I've found the problem.  The read.spss code was free-ing not Free-ing
> memory allocated by Calloc.  On most platforms that would work, but not on
> Windows where Calloc/Free and calloc/free use separate memory managers.

Odd. The opposite problem (using calloc/Free) did give segfaults
on Linux.... (That's what caused the trouble when the .sav file had
illegal characters in variable names.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jul 17 17:03:20 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 17 Jul 2001 18:03:20 +0200
Subject: [Rd] Re: argument ordering (was <blank>)
In-Reply-To: <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
References: <OE27Vn20lbhsKd6QR7j0001b0c3@hotmail.com>
 <008601c10e4b$04448520$175dd882@stat.auckland.ac.nz>
Message-ID: <15188.25032.28517.851384@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> ---snip---
> I am trying to change the number of the ticks on each axis, but every time I
> can not succeed and receive the error message shown below even I use the
> default values:

>> plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single",lab=c(5,5,7))
>    Error in axis(side, at, labels, tick, line, pos, outer, font, vfont, ...)
> :
>         location and label lengths differ, 6 != 3
> ---snip---


> The problem is that the "lab" parameter is being passed down (via
> plot.ts) to axis in a "..." argument, but it is being matched to the
> "labels" argument in axis().

> In other words, axis() thinks you are saying "labels=c(5, 5, 7)".
> This is not your fault; it is an unfortunate interaction between
> partial matching of argument names and the "..." argument.

What a nightmare ...

> A simple workaround would be ...

>     op <- par(lab=c(5, 5, 7)
>     plot.mts(infldata1[,3:4],lty=c(1:2),plot.type="single")
>     par(op)

[Argh.  Calling a method directly ... ]

> ... a more long-term solution will require some more thought ...

> [to R-devel:

>     (i) could put the labels argument at the end of the list -- i.e.,
> axis(side, at, tick, line, pos, outer, font, vfont, ..., labels) but then
> using "lab" as an abbreviation for "labels" would then get consumed as a
> par() setting (?)

>     (ii) could put explicit "lab" argument in the list too -- i.e.,
> axis(side, at, labels, tick, line, pos, outer, font, vfont, lab, ...) (?)

>     (iii) ... ?]

I think we need general guidance for dealing with the ``graphical
parameter'' args to plotting functions.  This includes issues of where
to evaluate and when to vectorize (or even how, ref my question about
recycling e.g. col by cases or variables when plotting a multivariate
time series).

In the above case, ?axis says that its `...' is

     ...: graphical parameters may also be passed as arguments to this
          function.

so we could take the plot.ts `...' list, pmatch its names against
names(par()), and pass the subscripted `...' on to axis().  [Expecting
loud screams.]

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Tue Jul 17 22:35:36 2001
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Tue, 17 Jul 2001 23:35:36 +0200 (MET DST)
Subject: [Rd] bug in the interface of ESS, R for linux, S+6 for linux (PR#1028)
Message-ID: <200107172135.XAA22403@pubhealth.ku.dk>


Object name completion doesn't work on linux.  On S+6 the problem
seems to be that ESS uses the argument `inherits' and S+6 is expecting
`inherit'

       . ".Last.value <- get(\".ess.lvsave\",inherits=T)\n") ; envir=1
       . "assign(\".ess.lvsave\",.Last.value,inherits=T)\n") ;envir=1
  -rw-r--r--   1 544      everyone     7170 Mar  1 13:55 essd-r.el

and

Version 6.0 Release 1 for Linux 2.2.12 : 2000
args(get) 
function(name, where = NULL, frame, inherit = F, immediate = T, meta = 0,
mode = "any")


R uses `inherits'

args(get)
function (x, pos = -1, envir = pos.to.env(pos), mode = "any", 
    inherits = TRUE) 


Andy Liaw <andy_liaw@merck.com> reports
> Actually, I just tried it in R on our Linux box and also had the similar
> problem, namely the completion wasn't able to complete "plo" or "rnor".  The
> info is:
> 
> 	   _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    3.0              
> year     2001             
> month    06               
> day      22               
> language R                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From olefc@math.auc.dk  Wed Jul 18 14:14:23 2001
From: olefc@math.auc.dk (olefc@math.auc.dk)
Date: Wed, 18 Jul 2001 15:14:23 +0200 (MET DST)
Subject: [Rd] Rd2dvi - script (PR#1029)
Message-ID: <200107181314.PAA26681@pubhealth.ku.dk>

Full_Name: Ole Christensen
Version: 1.3.0
OS: Solaris
Submission from: (NULL) (130.225.48.2)


I have discovered a problem with script Rd2dvi for R-1.3.0 on our Solaris
machines.
When writing R CMD Rd2dvi Name_of_Package, then things go wrong with the 
conversion to Latex of the DESCRIPTION file in the package.

Having discussed the problem with our system administrator, he constructed a 
script illustrating the problem (see below: script a, and output b). 
It seems that our Solaris machines makes a further expansion in the shell
scripts 
than intended ( \\b  ->  \b  ->  <Backspace> ). 

We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux 2.0.36 
machine, where everything worked fine.

script a:

#!/user/flemming/aa/sh

Rd_DESCRIPTION_to_LaTeX () {
  echo '\\begin{description}'
  echo "\\begin{description}"
  echo "\\raggedright{}"
  echo "\\end{description}"
}

touch b
Rd_DESCRIPTION_to_LaTeX >> b

------

output b:

\begin{description}
egin{description}

aggedright{}
\end{description}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Jul 18 16:47:25 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 18 Jul 2001 11:47:25 -0400 (EDT)
Subject: [Rd] Problems using Computer Modern fonts
In-Reply-To: <15180.9675.891306.920609@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.33.0107180933170.32196-100000@hussle.harvard.edu>

I have assembled the changes I have been working on to make TeX Computer
Modern fonts more fully usable in R. I have made the patches and support
files available at:

http://hussle.harvard.edu/~durso/CM_R.tar.gz

The diffs are against R-1.3.0. Let me know if there is a chance of these
changes being included in R or if you have any comments.

Thank you,
Brian D'Urso


My system:
----------
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jul 18 17:23:53 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 18 Jul 2001 12:23:53 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>


OK, to summarize and clarify a bit

1) I downloaded some code that existed in "pure" FORTRAN, FORTRAN+S-Plus,
and FORTRAN+R versions.  

2) I discovered that the primary difference between R and S-Plus version was
the use of a wrapper to reduce the number of arguments from 87 to 65.   When
I inquired why, the author of the code replied

	"R won't take more than 65 arguments to the FORTRAN code 
	(I have no idea why they would have this restriction, it
	seems ludicrous to me. Anyway, the 65 limit is why I combined 
	all those arguments (they were originally explicitly passed)."

He also noted that the 65 argument restriction is not present in Splus 5.

3) I posted a patch to change the limit on the number of parameters to .C,
.Fortran, and .Call from 65 to 255.  

4) I asked if this patch, or something like it would appear in the next
release of R because I wanted to create a package that used the exact same
(simpler) code for R and S-Plus.

5) There was a debate on the merit of using .Fortran to handle a large
number of arguments.  Most people suggested one of 

	- write a wrapper function Fortran C or that accepts some set of
arguments as a single 	vector and that calls the original Fortran function.

	- write a wrapper function using .Call or .External

Several reasons were put forth for *not* extending the number of permissible
arguments.  The core point seemed to be that there have been few reports of
problems with the restriction, and there is uncertainty about the maximum
number of arguments an operating system will support.

6) I still feel that it is a reasonable change to increase the number of
permitted arguments, at least to the same limits (whatever they are) imposed
by S-Plus.  This seems simpler than telling users that as soon as they hit
65 arguments they have to change their code or learn a new interface
mechanism.


-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jul 18 19:26:28 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jul 2001 20:26:28 +0200
Subject: [Rd] Summary:  too many arguments in foreign function call
In-Reply-To: "Warnes, Gregory R"'s message of "Wed, 18 Jul 2001 12:23:53 -0400"
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com>
Message-ID: <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> 6) I still feel that it is a reasonable change to increase the number of
> permitted arguments, at least to the same limits (whatever they are) imposed
> by S-Plus.  This seems simpler than telling users that as soon as they hit
> 65 arguments they have to change their code or learn a new interface
> mechanism.

I think you missed one point that John was making: "N++". There has to
be a limit to the number of arguments, C does not allow you to code
anything else portably. Whatever limit we choose, someone is going to
bump into it sooner or later, and we can't just increase the limit
every time.  

Then there's the problem of portability between compilers. A little
Web search reveals that the minimum maximum number (sic) of arguments
that a C compiler may impose according to the C standard is 31. So
there may already be standards-compliant C compilers that cannot
compile R. Obviously none of those have appeared within our user
base...

That being said, I think 65 is a pretty weird limit to have. 2^N-1
would be a more obvious guess at a potential hard limit. So, since
we're already past 63, how about having a quick round of testing among
the R-devel readers to check out whether any of their systems would
break from inserting a limit of 127 or 255?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed Jul 18 19:52:54 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 18 Jul 2001 14:52:54 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <58mbltcds2jm49kiv533kpv8iqds8r796o@4ax.com>

>That being said, I think 65 is a pretty weird limit to have. 2^N-1 
>would be a more obvious guess at a potential hard limit. So, since 
>we're already past 63, how about having a quick round of testing among 
>the R-devel readers to check out whether any of their systems would 
>break from inserting a limit of 127 or 255? 

I'd guess there are different ways this could fail.  

1. The compiler might have a hard-coded upper limit on the number of
arguments to a function.
2. It might have an upper limit on the number of bytes of code
generated in a function, or in an object file. 

With 255 as the upper limit, the functions do_dotcall and do_dotCode
in dotcode.c will both be huge, so they might trigger the second kind
of failure. (I'd guess that no 16 bit compiler could handle them, for
instance, but nobody is compiling R on one of those.) It's probably
worth putting together a new dotcode.c version for people to test, not
just ask them to test for the first kind of failure.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Jul 18 20:00:56 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 18 Jul 2001 15:00:56 -0400
Subject: [Rd] Summary:  too many arguments in foreign function call
References: <5429125E11E4D411AF7300805FE603A8014CEC87@groexmbcr02.pfizer.com> <x2zoa2w0tn.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B55DCE8.5E06BE6F@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > 6) I still feel that it is a reasonable change to increase the number of
> > permitted arguments, at least to the same limits (whatever they are) imposed
> > by S-Plus.  This seems simpler than telling users that as soon as they hit
> > 65 arguments they have to change their code or learn a new interface
> > mechanism.
> 
> I think you missed one point that John was making: "N++". There has to
> be a limit to the number of arguments, C does not allow you to code
> anything else portably. Whatever limit we choose, someone is going to
> bump into it sooner or later, and we can't just increase the limit
> every time.
> 
> Then there's the problem of portability between compilers. A little
> Web search reveals that the minimum maximum number (sic) of arguments
> that a C compiler may impose according to the C standard is 31. So
> there may already be standards-compliant C compilers that cannot
> compile R. Obviously none of those have appeared within our user
> base...
> 
> That being said, I think 65 is a pretty weird limit to have. 2^N-1
> would be a more obvious guess at a potential hard limit. So, since
> we're already past 63, how about having a quick round of testing among
> the R-devel readers to check out whether any of their systems would
> break from inserting a limit of 127 or 255?
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Empirical evidence is that the limit in S-Plus is 128.  (The call
manyArgs(N) constructs a .C with N arguments to a C routine (with 200
arguments)).

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(128)
[1] T

Splus6
S-PLUS : Copyright (c) 1988, 2000 MathSoft, Inc.
S : Copyright Lucent Technologies, Inc.
Version 6.0 Release 1 for Linux 2.2.12 : 2000 
Working data will be in .Data 
> manyArgs(129)
Problem in .C("many_args",: Sorry, no more than 128 arguments allowed in
dynamic call, while calling subroutine many_args 

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lenn@bullsandbears.com  Thu Jul 19 15:47:28 2001
From: lenn@bullsandbears.com (lenn@bullsandbears.com)
Date: Thu, 19 Jul 2001 07:47:28 -0700
Subject: [Rd] Knowledge is Power cm
Message-ID: <200107190747406.SM00860@stat.math.ethz.ch>

               DON'T BE LEFT IN THE DARK AGES

Info and Data Center is an information-centric company that 
delivers remarkable information pertaining to specific, essential 
subjects as: marketing, education, philosophy, entertainment,
success, stocks and bonds, finances and psychology, as well as 
other subjects that can support your life and well being. This 
email is merely requesting to make such information available to 
you from time to time.

We know two things are truer NOW  more than ever before....

      Information is leverage and knowledge is Power!

Info and data center is committed to putting you in front of the
information curve and keeping you there!

If you would like to be deleted from this free opportunity simply
hit reply and then send, you will immediately be removed from 
our list.

Thank you in Advance
Lennis Fike,
V.P. Technologies
Info and Data Center, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Thu Jul 19 21:51:28 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Thu, 19 Jul 2001 15:51:28 -0500 (CDT)
Subject: [Rd] bug in eval
Message-ID: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>



Is this a bug ?


> foo <- function(a, ...)
+ {
+     tl <- substitute(list(a=a))
+ 
+     ## the foll two should give the same results
+     ## according to defaults for eval
+     
+     print(eval(tl ))
+     print(eval(tl, parent.frame()))
+ }
> 
> 
> foo1 <- function(...)
+ {
+     foo(...)
+ }
> 
> test <- function(a = 6)
+ {
+     foo1(a = a)
+ }
> 
> test(10)
$a
[1] 10

Error in eval(expr, envir, enclos) : Object "a" not found
> 
> str(eval)
function (expr, envir = parent.frame(), enclos = if (is.list(envir) || 
    is.pairlist(envir)) parent.frame())  
> 



I'm having similar problems with 

eval(expr, data, parent.frame()) # doesn't work

and

eval(expr, data) # works

where data is a data frame.

Deepayan

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 19 23:29:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jul 2001 00:29:00 +0200
Subject: [Rd] bug in eval
In-Reply-To: Deepayan Sarkar's message of "Thu, 19 Jul 2001 15:51:28 -0500 (CDT)"
References: <Pine.LNX.4.21.0107191543030.20317-100000@gstat03.stat.wisc.edu>
Message-ID: <x2elrcbljn.fsf@blueberry.kubism.ku.dk>

Deepayan Sarkar <deepayan@stat.wisc.edu> writes:

> Is this a bug ?
> 
> 
> > foo <- function(a, ...)
> + {
> +     tl <- substitute(list(a=a))
> + 
> +     ## the foll two should give the same results
> +     ## according to defaults for eval
> +     
> +     print(eval(tl ))
> +     print(eval(tl, parent.frame()))
> + }


Nope. This is not a bug, just confusing. The thing to note is that
default expressions are evaluated in the frame of the called function.
I.e. the parent.frame() referred to as the default for envir in eval()
is the caller of eval, whereas in eval(expr, parent.frame()) the
parent.frame() is evaluated in the callers frame, giving you the
grandparent of the eval call.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cook@biostat.wisc.edu  Fri Jul 20 16:56:37 2001
From: cook@biostat.wisc.edu (Tom Cook)
Date: Fri, 20 Jul 2001 10:56:37 -0500
Subject: [Rd] angle/density in barplots/polygon
Message-ID: <15192.21685.275846.586333@polaris.biostat.wisc.edu>

I'm trying to convert some S-Plus code which generates barplots and
other shaded area plots to R.  If I specify that I want hatching
using the angle and density arguments, the messages

1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 
2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

so apparently these features have yet to be implemented.  Is there a
newer version of R in which hatching has been implemented?  If not, is
there a timetable for implementing them?

Thanks,

Thomas Cook, PhD
Department of Biostatistics and Medical Informatics
University of Wisconsin                  email: cook@biostat.wisc.edu
209 WARF Building                           ph: (608) 263-2906
610 Walnut St.                             FAX: (608) 263-0415
Madison, Wisconsin 53705                
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sat Jul 21 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Jul 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200107210515.HAA29569@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1005 *
Subject: Fail to build R
From: sherwin@nlm.nih.gov
Date: Fri, 29 Jun 2001 19:16:08 +0200 (MET DST)
---fPIC has been omitted.
--configure should find this, and does on Solaris 2.7.
--What did the submitter do?

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1008 *
Subject: ReleaseLargeFreeVectors SIGSEGV (?)
From: Roger.Bivand@nhh.no
Date: Mon, 2 Jul 2001 15:27:55 +0200 (MET DST)

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1029 *
Subject: Rd2dvi - script
From: olefc@math.auc.dk
Date: Wed, 18 Jul 2001 15:14:21 +0200 (MET DST)
* PR# 1010 *
Subject: plot.mts() with type="p"
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 4 Jul 2001 08:35:43 +1200 (NZST)
* PR# 1012 *
Subject: html help on R language
From: canjels@yahoo.com
Date: Wed, 4 Jul 2001 13:53:55 +0200 (MET DST)
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1016 *
From: B9r5R15Rw@verizon.com
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1018 *
Subject: predict.lm(...., se=T), with 1-column model matrix
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 8 Jul 2001 19:35:26 +1000 (EST)
* PR# 1017 *
Subject: Title of bundled packages in the library index
From: henrikb@braju.com
Date: Fri, 6 Jul 2001 22:23:13 +0200 (MET DST)
Date: 2001/07/05
Date: 2001/06/28
* PR# 1021 *
Subject: Extra lines when bty="n"
From: ce@biostat.ku.dk
Date: Wed, 11 Jul 2001 23:23:53 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
* PR# 1025 *
Subject: ordered factors in tree package - bug?
From: Kevin Murphy <murphyk@cs.berkeley.edu>
Date: Fri, 13 Jul 2001 14:17:01 -0700
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
* PR# 1028 *
Subject: bug in the interface of ESS, R for linux, S+6 for linux
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 17 Jul 2001 17:38:49 -0400 (EDT)
* PR# 1027 *
Subject: cmdscale in package mva
From: laurent@cbs.dtu.dk
Date: Tue, 17 Jul 2001 13:36:43 +0200 (MET DST)
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 22 16:02:04 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 22 Jul 2001 17:02:04 +0200
Subject: [Rd] Rd2dvi - script (PR#1029)
In-Reply-To: <200107181314.PAA26681@pubhealth.ku.dk>
References: <200107181314.PAA26681@pubhealth.ku.dk>
Message-ID: <15194.60140.920991.208147@mithrandir.hornik.net>

>>>>> olefc  writes:

> Full_Name: Ole Christensen
> Version: 1.3.0
> OS: Solaris
> Submission from: (NULL) (130.225.48.2)


> I have discovered a problem with script Rd2dvi for R-1.3.0 on our
> Solaris machines.  When writing R CMD Rd2dvi Name_of_Package, then
> things go wrong with the conversion to Latex of the DESCRIPTION file
> in the package.

> Having discussed the problem with our system administrator, he
> constructed a script illustrating the problem (see below: script a,
> and output b).  It seems that our Solaris machines makes a further
> expansion in the shell scripts than intended ( \\b -> \b ->
> <Backspace> ).

> We have also tested the script on a SunOS 4.1.2 and a Debian/GNU Linux
> 2.0.36 machine, where everything worked fine.

> ...

Thanks for pointing this out.

As newer versions of the autoconf manual point out

	The simple @code{echo} is probably the most surprising source of
	portability troubles.  It is not possible to use @samp{echo}
	portably unless both options and escape sequences are omitted.
	New applications which are not aiming at portability should use
	@samp{printf} instead of @samp{echo}.

	...

	Do not use backslashes in the arguments, as there is no
	consensus on their handling.

The problem is that Solaris builtin echo and /usr/bin/echo by default
interpret `\b' et al as special backslash-escaped sequences.

The solution is not to use echo for producing LaTeX text but here
documents instead.  Will fix.

[There is similar code in doc/manual/Makefile.in, but it does not use
any `recognized' escape sequences ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sc@paracelsus.fdm.uni-freiburg.de  Mon Jul 23 11:57:59 2001
From: sc@paracelsus.fdm.uni-freiburg.de (sc@paracelsus.fdm.uni-freiburg.de)
Date: Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
Message-ID: <200107231057.MAA19791@pubhealth.ku.dk>

I experienced the following problem with R 1.3.0 which is probably a
bug. The program hangs-up if 1.) a coordinate of segments is outside the
ploting region and 2.) the option log="x" is used.

##
## works fine
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)

##
## hang-up
##
plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
segments(0.5 , 1.2, 1, 0.6)
segments(0.25, 1.2, 1, 0.6)
segments(1   , 1.2, 1, 0.6)


platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   

Obviously, a work-around is to ensure that segments falls within the
ploting region. 

Best regards,
-- 
Guido Schwarzer         sc@imbi.uni-freiburg.de | Phone: +49 (0)761 203 7702
German Cochrane Centre   http://www.cochrane.de | Fax:   +49 (0)761 203 7700
Institute of Medical Biometry and Medical Informatics
Stefan-Meier-Str. 26, D-79104 Freiburg       http://www.imbi.uni-freiburg.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jul 23 12:27:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jul 2001 13:27:23 +0200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
In-Reply-To: sc@paracelsus.fdm.uni-freiburg.de's message of "Mon, 23 Jul 2001 12:57:59 +0200 (MET DST)"
References: <200107231057.MAA19791@pubhealth.ku.dk>
Message-ID: <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>

sc@paracelsus.fdm.uni-freiburg.de writes:

> I experienced the following problem with R 1.3.0 which is probably a
> bug. The program hangs-up if 1.) a coordinate of segments is outside the
> ploting region and 2.) the option log="x" is used.
> 
> ##
> ## works fine
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)
> 
> ##
> ## hang-up
> ##
> plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> segments(0.5 , 1.2, 1, 0.6)
> segments(0.25, 1.2, 1, 0.6)
> segments(1   , 1.2, 1, 0.6)

Confirmed on Linux, but seems to have disappeared in the patched
version. Not sure what caused the fix, though... My guess would be
that it is this change in CSclipline:

@@ -2464,6 +2466,7 @@
     yb = cr->yb;
     yt = cr->yt;
     if (dd->gp.xlog || dd->gp.ylog) {
+       double temp;
 
        GConvert(x1, y1, coords, NDC, dd);
        GConvert(x2, y2, coords, NDC, dd);
@@ -2475,6 +2478,17 @@
        cr2.yb = yb;
        cr2.yt = yt;
 
+        if (cr2.xr < cr2.xl) {
+            temp = cr2.xl;
+            cr2.xl = cr2.xr;
+            cr2.xr = temp;
+        }
+        if (cr2.yt < cr2.yb) {
+            temp = cr2.yb;
+            cr2.yb = cr2.yt;
+            cr2.yt = temp;
+        }
+
        x = xl;         /* keep -Wall happy */
        y = yb;         /* keep -Wall happy */
        while( c1 || c2 ) {


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jul 23 14:01:10 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 23 Jul 2001 15:01:10 +0200
Subject: [Rd] angle/density in barplots/polygon
In-Reply-To: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <15196.8214.373819.897167@gargle.gargle.HOWL>

>>>>> "Tom" == Tom Cook <cook@biostat.wisc.edu> writes:

    Tom> I'm trying to convert some S-Plus code which generates barplots and
    Tom> other shaded area plots to R.  If I specify that I want hatching
    Tom> using the angle and density arguments, the messages

    Tom> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE) 

    Tom> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE) 

    Tom> so apparently these features have yet to be implemented.  Is there a
    Tom> newer version of R in which hatching has been implemented?  If not, is
    Tom> there a timetable for implementing them?

not really.  One of us (R core) has had this on his todo list for a while.
But then several of us don't see a big need, since hatching nowadays is
replaced by colors in many (I'd say most) situations.

If you send us the necessary patches to the R source code,
it will be in one of the development versions "real soon".  Note that R is
a GNU project relying on volunteer work from all over the world...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Jul 23 21:34:35 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Tue, 24 Jul 2001 08:34:35 +1200
Subject: [Rd] hang-up with log="x" and segments (PR#1030)
References: <200107231057.MAA19791@pubhealth.ku.dk> <x2ae1vj36s.fsf@blueberry.kubism.ku.dk>
Message-ID: <004601c113b6$e2b3e2e0$175dd882@stat.auckland.ac.nz>

Hi


> > I experienced the following problem with R 1.3.0 which is probably a
> > bug. The program hangs-up if 1.) a coordinate of segments is outside the
> > ploting region and 2.) the option log="x" is used.
> >
> > ##
> > ## works fine
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2))
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
> >
> > ##
> > ## hang-up
> > ##
> > plot(1,1, xlim=c(0.5, 2), ylim=c(0.5, 2), log="x")
> > segments(0.5 , 1.2, 1, 0.6)
> > segments(0.25, 1.2, 1, 0.6)
> > segments(1   , 1.2, 1, 0.6)
>
> Confirmed on Linux, but seems to have disappeared in the patched
> version. Not sure what caused the fix, though... My guess would be
> that it is this change in CSclipline:


Yep, that went in during the fix-so-far to bug#997.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Mon Jul 23 23:25:57 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Mon, 23 Jul 2001 18:25:57 -0400
Subject: [Rd] Installing RSPython with R 1.3.0
References: <3B5CA086.9423C8C7@warnes.net>
Message-ID: <3B5CA475.BFABD484@warnes.net>


To get RSPython installed on my debian test box, I had to make a couple
of changes not listed in
ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 

1) I had to change $R_HOME/src/modules/X11 :

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) 

to

$(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
        $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
$(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

2) I had the same link problem with ctest, so I changed

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

to

PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
-L$(R_HOME)/bin -lR


3)  Will all libraries that get loaded into R inside of python require
this?


If I try to load other 'recommended' packages that include C code I get
dyn.load erros, EG:

>>> RS.call("library","splines")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/local/lib/R/library/splines/libs/splines.so":
  /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
R_NaN
Error in function (package, help, lib.loc = .lib.loc, character.only =
FALSE,  :
        .First.lib failed
In the local error handler
In the local error handler
Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
        missing value where logical needed
In the local error handler
In the local error handler
Error in pos.to.env(pos) : invalid argument
In the local error handler
In the local error handler
Error in objects(lib.pos) : invalid envir= argument
In the local error handler
['RSPython', 'ctest', 'base']

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Jul 23 23:38:51 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 15:38:51 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <87zo9vmft0.fsf@jeeves.blindglobe.net>



I'm not seeing this:

121$ python
Python 1.5.2 (#0, Apr 10 2001, 10:03:44)  [GCC 2.95.3 20010219
(prerelease)] on linux2
Copyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam
>>> import RS
Initialized R-Python interface package.
>>> RS.call("library","splines")
['splines', 'RSPython', 'ctest', 'base']
>>> 


for example.  

I made a slightly different set of changes (I didn't make the ones you
suggested, Greg).

I'd be happy to email a copy of the new version
(RSPython_0.3-1ajr.tar.gz, use as RSPython_0.3-1.tar.gz) which has
configure patched to find the Debian default locations of things; it
would be interesting to see if it works for you (it did for me on 2
Sid/unstable boxes).

best,
-tony



>>>>> "GRW" == Gregory R Warnes <greg@warnes.net> writes:

    GRW> To get RSPython installed on my debian test box, I had to
    GRW> make a couple of changes not listed in
    GRW> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html

    GRW> 1) I had to change $R_HOME/src/modules/X11 :

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS)

    GRW> to

    GRW> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
    GRW> $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
    GRW> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR

    GRW> 2) I had the same link problem with ctest, so I changed

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm

    GRW> to

    GRW> PKG_LIBS = -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
    GRW> -L$(R_HOME)/bin -lR


    GRW> 3) Will all libraries that get loaded into R inside of python
    GRW> require this?


    GRW> If I try to load other 'recommended' packages that include C
    GRW> code I get dyn.load erros, EG:

    >>>> RS.call("library","splines")
    GRW> Error in dyn.load(x, as.logical(local), as.logical(now)) :
    GRW> unable to load shared library
    GRW> "/usr/local/lib/R/library/splines/libs/splines.so":
    GRW> /usr/local/lib/R/library/splines/libs/splines.so: undefined
    GRW> symbol: R_NaN Error in function (package, help, lib.loc =
    GRW> .lib.loc, character.only = FALSE, : .First.lib failed In the
    GRW> local error handler In the local error handler Error in if
    GRW> (!is.numeric(name) || name != (pos <- as.integer(name))) { :
    GRW> missing value where logical needed In the local error handler
    GRW> In the local error handler Error in pos.to.env(pos) : invalid
    GRW> argument In the local error handler In the local error
    GRW> handler Error in objects(lib.pos) : invalid envir= argument
    GRW> In the local error handler ['RSPython', 'ctest', 'base']

    GRW> -Greg _______________________________________________
    GRW> Omega-remote mailing list - Omega-remote@www.omegahat.org
    GRW> http://www.omegahat.org/mailman/listinfo/omega-remote




-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Jul 24 00:36:30 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 23 Jul 2001 19:36:30 -0400
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <3B5CA475.BFABD484@warnes.net>; from greg@warnes.net on Mon, Jul 23, 2001 at 06:25:57PM -0400
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
Message-ID: <20010723193625.C6947@jessie.research.bell-labs.com>



Hi Greg.

  What you are seeing is probably a result of using R embedded within another
application/system (Python in this case) but having R originally compiled
without support for R as a shared library. If you were to build R in the default
manner, i.e.
    configure
    make
and then re-configure to build as a shared library
    configure --enable-R-shlib
    make
the shared objects that make up the modules and package libraries
will not be rebuilt. Perhaps they should, but that is not currently
what happens.

 If you were to start afresh (e.g. make distclean) 
and then configure with shared library support
(
    configure --enable-R-shlib
    make
)
all should be well and all the .so's that R attempts to load will
also be linked against libR.so and so the symbols within R on which
they depend will be located.

  Hope this is the correct diagnosis of the problem.

     D.

Gregory R. Warnes wrote:
> 
> To get RSPython installed on my debian test box, I had to make a couple
> of changes not listed in
> ftp://www.omegahat.org/pub/Omega/RSPython/FAQ.html 
> 
> 1) I had to change $R_HOME/src/modules/X11 :
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) 
> 
> to
> 
> $(R_X11_la): $(R_X11_la_OBJECTS) $(R_X11_la_DEPENDENCIES)
>         $(SHLIB_LINK) -o $@ $(R_X11_la_LDFLAGS) $(R_X11_la_OBJECTS)
> $(R_X11_la_LIBADD) $(LIBS) -L$(R_HOME)/bin -lR
> 
> 2) I had the same link problem with ctest, so I changed
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> 
> to
> 
> PKG_LIBS =  -lg2c -lm -L/usr/lib/gcc-lib/i386-linux/2.95.4 -lm
> -L$(R_HOME)/bin -lR
> 
> 
> 3)  Will all libraries that get loaded into R inside of python require
> this?
> 
> 
> If I try to load other 'recommended' packages that include C code I get
> dyn.load erros, EG:
> 
> >>> RS.call("library","splines")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/local/lib/R/library/splines/libs/splines.so":
>   /usr/local/lib/R/library/splines/libs/splines.so: undefined symbol:
> R_NaN
> Error in function (package, help, lib.loc = .lib.loc, character.only =
> FALSE,  :
>         .First.lib failed
> In the local error handler
> In the local error handler
> Error in if (!is.numeric(name) || name != (pos <- as.integer(name))) { :
>         missing value where logical needed
> In the local error handler
> In the local error handler
> Error in pos.to.env(pos) : invalid argument
> In the local error handler
> In the local error handler
> Error in objects(lib.pos) : invalid envir= argument
> In the local error handler
> ['RSPython', 'ctest', 'base']
> 
> -Greg
> _______________________________________________
> Omega-remote mailing list  -  Omega-remote@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-remote
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Jul 24 00:40:40 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 23 Jul 2001 16:40:40 -0700
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net> <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <87y9pf5i4n.fsf@jeeves.blindglobe.net>

>>>>> "DTL" == Duncan Temple Lang <duncan@research.bell-labs.com> writes:

    DTL>  If you were to start afresh (e.g. make distclean) and then
    DTL> configure with shared library support ( configure
    DTL> --enable-R-shlib make ) all should be well and all the .so's
    DTL> that R attempts to load will also be linked against libR.so
    DTL> and so the symbols within R on which they depend will be
    DTL> located.

And just to comment, with respect to Debian, this appears to have been
done by Doug.


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Jul 25 11:22:14 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 25 Jul 2001 12:22:14 +0200 (MET DST)
Subject: [Rd] glm.control() is not properly documented.. (PR#1031)
Message-ID: <200107251022.MAA03711@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu> writes:

on R-help and the Subject  "Log likelihood from glm"

    TL> On Mon, 9 Jul 2001, Phil wrote:
    >> 
    >> Is there any way of getting log likelihood values for each iteration from
    >> poisson glm model?
    >> 

    TL> Yes, the trace=TRUE option.

    TL> This doesn't seem to be documented properly, though it is in the "Usage"
    TL> section of help(glm)

glm.control should get it's own help page; on the above mentioned
glm.Rd it even says

 >>  control: a list of parameters for controlling the fitting process. 
 >>           See the documentation for `glm.control' for details.

--> I'm about to commit a fix for R 1.3.1

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jul 25 16:08:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 25 Jul 2001 11:08:28 -0400
Subject: [Rd] empty drop=F in [
References: <Pine.OSF.3.96.1010725150958.19828G-100000@ija.csic.es>
Message-ID: <3B5EE0EC.7B45F328@bank-banque-canada.ca>

Making a typo in the last help response I noticed:

a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
   1.4722996, 1.408512, 0.3768964,
   1.2737683, 1.811588, 1.9108336,
   1.8235127, 1.260909, 1.5995097 ), 3,4))

> dim(a[a[,1]<0,, drop=F])
[1] 0 3

Is that right? In Splus 3.3 I get

> dim(a[a[,1]<0,, drop=F])
NULL

Paul Gilbert
using
> version
         _
platform sparc-sun-solaris2.6
arch     sparc
os       solaris2.6
system   sparc, solaris2.6
status   Patched
major    1
minor    3.0
year     2001
month    07
day      22
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 16:41:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 25 Jul 2001 16:41:17 +0100 (GMT Daylight Time)
Subject: [Rd] empty drop=F in [
In-Reply-To: <3B5EE0EC.7B45F328@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0107251637150.1080-100000@tern.stats>

On Wed, 25 Jul 2001, Paul Gilbert wrote:

> Making a typo in the last help response I noticed:
>
> a <- t(matrix(c(0.3249816, 1.184596, 1.0408749,
>    1.4722996, 1.408512, 0.3768964,
>    1.2737683, 1.811588, 1.9108336,
>    1.8235127, 1.260909, 1.5995097 ), 3,4))
>
> > dim(a[a[,1]<0,, drop=F])
> [1] 0 3
>
> Is that right? In Splus 3.3 I get
>
> > dim(a[a[,1]<0,, drop=F])
> NULL

Really?  Current versions of S-PLUS behave like R, and I'd be surprised if
a 1994 version was different, but of course do not have it running.
I did check 3.4, though, and that behaves as 2000, 6.0 and R do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Wed Jul 25 18:06:50 2001
From: deepayan@stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Wed, 25 Jul 2001 19:06:50 +0200 (MET DST)
Subject: [Rd] bug in pretty() (PR#1032)
Message-ID: <200107251706.TAA06210@pubhealth.ku.dk>




I have the following output from pretty():


> pretty(c(-.1, 1)) # note 2nd element
[1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
[6]  8.000000e-01  1.000000e+00
> as.character(pretty(c(-.1, 1)))
[1] "-0.2"                  "-2.77555756156289e-17" "0.2"                  
[4] "0.4"                   "0.6"                   "0.8"                  
[7] "1"                    


The root cause seems to be here:


> 1.2/6 - .2
[1] -2.775558e-17


(It seems that this is not a problem in all installations.)


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jul 25 20:41:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 25 Jul 2001 20:41:34 +0100 (BST)
Subject: [Rd] bug in pretty() (PR#1032)
In-Reply-To: <200107251706.TAA06210@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0107252038150.2501-100000@gannet.stats>

On Wed, 25 Jul 2001 deepayan@stat.wisc.edu wrote:

>
>
>
> I have the following output from pretty():
>
>
> > pretty(c(-.1, 1)) # note 2nd element
> [1] -2.000000e-01 -2.775558e-17  2.000000e-01  4.000000e-01  6.000000e-01
> [6]  8.000000e-01  1.000000e+00
> > as.character(pretty(c(-.1, 1)))
> [1] "-0.2"                  "-2.77555756156289e-17" "0.2"
> [4] "0.4"                   "0.6"                   "0.8"
> [7] "1"
>
>
> The root cause seems to be here:
>
>
> > 1.2/6 - .2
> [1] -2.775558e-17

You can't expect exact arithmetic.  Using as.character is almost never a
good idea.  I don't think this is a bug, but you should be doing something
more complex if you want to make labels here.

> (It seems that this is not a problem in all installations.)
>
>
> <<insert bug report here>>

!!
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.pesl@arcs.ac.at  Thu Jul 26 07:57:17 2001
From: thomas.pesl@arcs.ac.at (thomas.pesl@arcs.ac.at)
Date: Thu, 26 Jul 2001 08:57:17 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260657.IAA08479@pubhealth.ku.dk>

i don't know, whether this is a bug or it is intended:

when using winedt and R together it works perfectly, as long as R is run in
mdi (multiple window mode). When you switch to sdi (single window mode)
winedt, sends no command at all: no history, paste, source or script.

Thomas Pesl

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jul 26 08:16:59 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 26 Jul 2001 09:16:59 +0200 (MET DST)
Subject: [Rd] winedt (PR#1033)
Message-ID: <200107260716.JAA08671@pubhealth.ku.dk>

On Thu, 26 Jul 2001 thomas.pesl@arcs.ac.at wrote:

> i don't know, whether this is a bug or it is intended:
>
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

rw1030 does work in SDI mode, so this is not an R bug.
Please send it to the R-Winedt mode maintainer (if that is what you are
using).

>
> Thomas Pesl
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.0
> year     2001
> month    06
> day      22
> language R
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Jul 26 08:27:07 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 26 Jul 2001 09:27:07 +0200
Subject: [Rd] winedt (PR#1033)
References: <200107260657.IAA08479@pubhealth.ku.dk>
Message-ID: <3B5FC64B.C3B2D751@statistik.uni-dortmund.de>



thomas.pesl@arcs.ac.at wrote:
> 
> i don't know, whether this is a bug or it is intended:
> 
> when using winedt and R together it works perfectly, as long as R is run in
> mdi (multiple window mode). When you switch to sdi (single window mode)
> winedt, sends no command at all: no history, paste, source or script.

That's NOT a bug of R, also NOT a bug of WinEdt and also NOT a bug of
the R-WinEdt interface.
Please report bugs or questions related to R-WinEdt directly to the
author.

In the current version of R-WinEdt, just click on "Set R --sdi mode" at
the bottom of the menu "R".
To switch back, you have to click on "Set R --mdi mode".


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 08:41:31 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 08:41:31 +0100
Subject: [Rd] Why not in Debian distro?
Message-ID: <20010726084131.B3409@caligola.econ.ucl.ac.uk>

Hi,

I am using Debian and get R from CRAN just fine, but could not find it in the
Debian distribution. Did I overlook something? If not, is it hard to put it
there?
I am not concerned with this really, but there are things that are based on
that particular tree, such as the autobuilding process for the Hurd (for which
R was working at least once):
http://people.debian.org/~jbailey/oasis/group/Debian/index.html

?

Thanks,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Thu Jul 26 10:32:13 2001
From: hcp@met.ed.ac.uk (H C Pumphrey)
Date: Thu, 26 Jul 2001 10:32:13 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <20010726084131.B3409@caligola.econ.ucl.ac.uk>
Message-ID: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>

On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:

> I am using Debian and get R from CRAN just fine, but could not find it in the
> Debian distribution. Did I overlook something? If not, is it hard to put it
> there?

It is in potato (stable)in the math section: r-base 0.90.1-2 . 

Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
r-base 1.3.0-1 .  

People like me who  are still running stable can get up-to-date R
packages by sticking the following line in /etc/apt/sources.list:

deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

HTH

Hugh

============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Department of Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From z.cseres-gergely@ucl.ac.uk  Thu Jul 26 09:48:51 2001
From: z.cseres-gergely@ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Thu, 26 Jul 2001 09:48:51 +0100
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <20010726094851.C3409@caligola.econ.ucl.ac.uk>

On Thu, Jul 26, 2001 at 10:32:13AM +0100, H C Pumphrey wrote:
> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> > Debian distribution. Did I overlook something? If not, is it hard to put it

Yes I did, again. The package is r-base and not R. Obviously. Sorry.

> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  

Funny. So r-base was just not taken up by Turtle.

Thanks, anyway,
Zsombor
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jul 26 11:16:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jul 2001 12:16:50 +0200
Subject: [Rd] Why not in Debian distro?
In-Reply-To: H C Pumphrey's message of "Thu, 26 Jul 2001 10:32:13 +0100 (BST)"
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
Message-ID: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>

H C Pumphrey <hcp@met.ed.ac.uk> writes:

> On Thu, 26 Jul 2001, Zsombor Cseres-Gergely wrote:
> 
> > I am using Debian and get R from CRAN just fine, but could not find it in the
> > Debian distribution. Did I overlook something? If not, is it hard to put it
> > there?
> 
> It is in potato (stable)in the math section: r-base 0.90.1-2 . 
> 
> Oddly, woody (testing) still has  r-base 0.90.1-2, but unstable (sid) has 
> r-base 1.3.0-1 .  
> 
> People like me who  are still running stable can get up-to-date R
> packages by sticking the following line in /etc/apt/sources.list:
> 
> deb http://stat.ethz.ch/CRAN/bin/linux/debian potato main

The version skew between "stable" debian releases and current status
is becoming grotesque! 0.90.1 is from December 1999. It is quite
worrying because people are still receiving this ageing version on
CDs and our memories re. problems with that version are rapidly
fading 10 (yes, ten) releases later. Whatever happened to the
internal Debian discussions on creating a faster upgrade path for
applications?  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 15:04:42 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 07:04:42 -0700
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
Message-ID: <87g0bjdbwl.fsf@jeeves.blindglobe.net>

>>>>> "PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
    PD> later. Whatever happened to the internal Debian discussions on
    PD> creating a faster upgrade path for applications?

They created Woody/testing, which is a broken nightmare.

Sid/unstable isn't bad -- in fact, it's about as high-quality a
release as an average RedHat one, for the most part.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Thu Jul 26 15:59:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Thu, 26 Jul 2001 10:59:46 -0400
Subject: [Rd] Why not in Debian distro?
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>	<x2wv4wf10t.fsf@blueberry.kubism.ku.dk> <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <3B603062.4010709@keittlab.bio.sunysb.edu>

A.J. Rossini wrote:

>>>>>>"PD" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>>>>>>
>    PD> later. Whatever happened to the internal Debian discussions on
>    PD> creating a faster upgrade path for applications?
>
>They created Woody/testing, which is a broken nightmare.
>
>Sid/unstable isn't bad -- in fact, it's about as high-quality a
>release as an average RedHat one, for the most part.
>
That hasn't been my experience (although I haven't used RH for awhile). 
 Sid is high-quality until it randomly blows up in your face after an 
apt-get.  Debian has a bad case of SADD (stable attention deficit 
disorder).  None of the developers care much about updating stable.  Its 
too much fun crashing unstable.  I switched to Progeny and never looked 
back.  (I can still 'apt-get -b source <pkg>' from Sid for 
non-system-critical packages.)

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Jul 26 23:22:14 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 26 Jul 2001 15:22:14 -0700
Subject: [Rd] marshalling/serializing of R objects for later execution?
Message-ID: <87k80vpbzd.fsf@jeeves.blindglobe.net>


I know that this was a topic in March at DSC, but I was suffering from
a nasty migraine that prevented me from paying as much attention as I
ought to.  What's the current state-of-the-art regarding
packaging/serialization of R objects?  Or is it still vaporish
(i.e. nothing built)? 

I'm a bit more interested in functions/closures than "ordinary data".

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jul 27 22:38:29 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 28 Jul 2001 09:38:29 +1200
Subject: [Rd] angle/density in barplots/polygon
References: <15192.21685.275846.586333@polaris.biostat.wisc.edu>
Message-ID: <3B61DF55.403D99E0@stat.auckland.ac.nz>

Tom Cook wrote:
> 
> I'm trying to convert some S-Plus code which generates barplots and
> other shaded area plots to R.  If I specify that I want hatching
> using the angle and density arguments, the messages
> 
> 1: argument `density' is not used (yet) in: .NotYetUsed("density", error = FALSE)
> 2: argument `angle' is not used (yet) in: .NotYetUsed("angle", error = FALSE)
> 
> so apparently these features have yet to be implemented.  Is there a
> newer version of R in which hatching has been implemented?  If not, is
> there a timetable for implementing them?
> 
> Thanks,


I have just found a student vict^H^H^H^H volunteer to do this.  I will
know more about how long this will take in about a week.  (Its not a
huge task, but the student make take while to up to speed on graphics.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Sun Jul 29 17:28:27 2001
From: vogels@cmu.edu (vogels@cmu.edu)
Date: Sun, 29 Jul 2001 18:28:27 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291628.SAA24371@pubhealth.ku.dk>

Hi,

This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
(R 1.3.0) and comes from trying to compile R on AIX 4.3.

1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
is terminated with a double quote: ".  (This leads to the weird error
message that configure can't execute 'shared' on line 4060.)
     The fix is simply to use single quotes both times:
allow_undefined_flag='${wl}-berok'

2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
are passed on to ld correctly.  Which I know that you know...)
  The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
patching configure yet...

3) Rd2contents.pl:  this perl script fails in the base library!  There are
too many files in the man directory and perl reports 'glob failed'.  When I
try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
don't know whether this limitation comes from AIX, bash or perl and why it
doesn't happen with, say, Linux.
The fix is to replace the simple while loop (line 6):
  while(<$ARGV[0]/man/*.Rd>){ &do_one; }

with a loop over the contents of the directory using readdir:

if (opendir RD, "$ARGV[0]/man") {
    my $f;
    while (defined ($f = readdir RD)) {
     $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
    }
    closedir RD;
}

A) tkConfig.sh contains a line like this:
   TK_XINCLUDES='# no special path needed'
This has nothing to do with R proper but this bug which is either in AIX or
the local installation of X shows up during the compilation of R.  Anyhow,
this line is plain stupid since when passed on to the compiler _comments
out_ the rest of the line!  (Think about:
  gcc fine_program.c #no special path needed -lX11 -Xm
)  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
Again, I know this is not a problem with R but I'm adding it here for people
to find if they use the mailing list archive.

After these changes R compiles (producing warnings about duplicate
symbols...) and installs.  'make check' fails in mva--report to follow.

Regards,
  -tom

--
Email: vogels@cmu.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jul 29 20:17:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
Message-ID: <200107291917.VAA24794@pubhealth.ku.dk>

On Sun, 29 Jul 2001 vogels@cmu.edu wrote:

> Hi,
>
> This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> (R 1.3.0) and comes from trying to compile R on AIX 4.3.

Would that be 2001-07-27?  Not all of us live in countries that flout ISO
standards!

> 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> is terminated with a double quote: ".  (This leads to the weird error
> message that configure can't execute 'shared' on line 4060.)
>      The fix is simply to use single quotes both times:
> allow_undefined_flag='${wl}-berok'

That is a generated file.  It coems from m4/libtool.m4.

> 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> are passed on to ld correctly.  Which I know that you know...)
>   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> patching configure yet...
>
> 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> too many files in the man directory and perl reports 'glob failed'.  When I
> try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I

(! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
have no line length limits.)

> don't know whether this limitation comes from AIX, bash or perl and why it
> doesn't happen with, say, Linux.

Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
already using it.

> The fix is to replace the simple while loop (line 6):
>   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
>
> with a loop over the contents of the directory using readdir:
>
> if (opendir RD, "$ARGV[0]/man") {
>     my $f;
>     while (defined ($f = readdir RD)) {
>      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
>     }
>     closedir RD;
> }

(slower and less portable if it is not needed.)

Your perl version is ?


> A) tkConfig.sh contains a line like this:
>    TK_XINCLUDES='# no special path needed'
> This has nothing to do with R proper but this bug which is either in AIX or
> the local installation of X shows up during the compilation of R.  Anyhow,
> this line is plain stupid since when passed on to the compiler _comments
> out_ the rest of the line!  (Think about:
>   gcc fine_program.c #no special path needed -lX11 -Xm
> )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> Again, I know this is not a problem with R but I'm adding it here for people
> to find if they use the mailing list archive.
>
> After these changes R compiles (producing warnings about duplicate
> symbols...) and installs.  'make check' fails in mva--report to follow.
>
> Regards,
>   -tom
>
> --
> Email: vogels@cmu.edu
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Jul 29 21:10:47 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 29 Jul 2001 16:10:47 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 29 Jul 2001 21:17:55 +0200 (MET DST)"
References: <200107291917.VAA24794@pubhealth.ku.dk>
Message-ID: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
> 
> > Hi,
> >
> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
> 
> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
> standards!

Oops.  Should have used the contents of the date stamp file...

> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
> > is terminated with a double quote: ".  (This leads to the weird error
> > message that configure can't execute 'shared' on line 4060.)
> >      The fix is simply to use single quotes both times:
> > allow_undefined_flag='${wl}-berok'
> 
> That is a generated file.  It coems from m4/libtool.m4.

...which means I should have said...
 Line 1473 in m4/libtool.m4 contains the unterminated string.

Hmm, should the name of the file suggest to me that it's part of some
other package, like 'libtool', and I should file a bug report with
it's maintainer?

> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
> > are passed on to ld correctly.  Which I know that you know...)
> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
> > patching configure yet...
> >
> > 3) Rd2contents.pl:  this perl script fails in the base library!  There are
> > too many files in the man directory and perl reports 'glob failed'.  When I
> > try 'ls man/*.Rd'  bash also reports that the argument list is too long.  I
> 
> (! That looks like a bash bug.  Your bash version is ?  sh is supposed ot
> have no line length limits.)

Guilty as suspected.  My bash and perl is rather old...  

> > don't know whether this limitation comes from AIX, bash or perl and why it
> > doesn't happen with, say, Linux.
> 
> Do you have a current perl?  Globbing was changed in 5.6.0 to be handled
> in C code, as I recall.  It does not happen on Solaris, Linux or Windows,
> and I suspect a perl upgrade might fix it.  Try 5.6.1, if you are not
> already using it.

I'm not and I won't.  I'll live with my old perl since I don't want to
download and compile perl and bash...  I have a work around and if the
installation fails for somebody else they might have a hack available
when they search the r-bugs/r-devel archive.  Should I encounter the
problem again with a current installation (on a different system),
I'll let you know, otherwise I'll shut up.


> > The fix is to replace the simple while loop (line 6):
> >   while(<$ARGV[0]/man/*.Rd>){ &do_one; }
> >
> > with a loop over the contents of the directory using readdir:
> >
> > if (opendir RD, "$ARGV[0]/man") {
> >     my $f;
> >     while (defined ($f = readdir RD)) {
> >      $_ = "$ARGV[0]/man/$f", &do_one if $f =~ m,.Rd$,;
> >     }
> >     closedir RD;
> > }
> 
> (slower and less portable if it is not needed.)

True (especially the portability argument) if globbing is handled in
C in Perl nowadays.  I'd challenge the "slower" if Perl had to use the
shell since the shell would sort the file list which readdir won't.
 
> Your perl version is ?

Too embarassed to tell ;-)  Mea culpa, I'll bring up Perl issues in
the future only when I know I have a recent version...


> > A) tkConfig.sh contains a line like this:
> >    TK_XINCLUDES='# no special path needed'
> > This has nothing to do with R proper but this bug which is either in AIX or
> > the local installation of X shows up during the compilation of R.  Anyhow,
> > this line is plain stupid since when passed on to the compiler _comments
> > out_ the rest of the line!  (Think about:
> >   gcc fine_program.c #no special path needed -lX11 -Xm
> > )  The fix is to use "TK_XINCLUDES=''" in tkConfig.sh
> > Again, I know this is not a problem with R but I'm adding it here for people
> > to find if they use the mailing list archive.
> >
> > After these changes R compiles (producing warnings about duplicate
> > symbols...) and installs.  'make check' fails in mva--report to follow.
> >
> > Regards,
> >   -tom
> >
> > --
> > Email: vogels@cmu.edu
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jul 29 21:42:41 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 29 Jul 2001 22:42:41 +0200
Subject: [Rd] Re: [Omega-remote] Installing RSPython with R 1.3.0
In-Reply-To: <20010723193625.C6947@jessie.research.bell-labs.com>
References: <3B5CA086.9423C8C7@warnes.net>
 <3B5CA475.BFABD484@warnes.net>
 <20010723193625.C6947@jessie.research.bell-labs.com>
Message-ID: <15204.30017.481370.721345@mithrandir.hornik.net>

>>>>> Duncan Temple Lang writes:

> Hi Greg.

>   What you are seeing is probably a result of using R embedded within another
> application/system (Python in this case) but having R originally compiled
> without support for R as a shared library. If you were to build R in the default
> manner, i.e.
>     configure
>     make
> and then re-configure to build as a shared library
>     configure --enable-R-shlib
>     make
> the shared objects that make up the modules and package libraries
> will not be rebuilt. Perhaps they should, but that is not currently
> what happens.

>  If you were to start afresh (e.g. make distclean) 
> and then configure with shared library support
> (
>     configure --enable-R-shlib
>     make
> )
> all should be well and all the .so's that R attempts to load will
> also be linked against libR.so and so the symbols within R on which
> they depend will be located.

>   Hope this is the correct diagnosis of the problem.

Corrent.  However, according to my understanding, re-configuring with a
different set of arguments is not guaranteed to work unless preceded by
make distclean ...

[Argh.  In any case, this means that when checking for the existence of
-lR at package configure time we cannot safely assume that the standard
modules were linked against -lR ... terrible.]

Btw, looking at RSPython's configure.in,

	if test -f "${R_HOME}/bin/libR.so" ; then
	  R_SHARED_LIBRARY="-lR"
	fi

has the `.so' hard-wired which it should not.  The quick solution would
be something like getting the value of LIBR from R_HOME/etc/Makeconf.
Longer term, ideally we should get this info via something like R CMD
config --libs ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Mon Jul 30 03:48:41 2001
From: buhr@stat.wisc.edu (Kevin Buhr)
Date: 29 Jul 2001 21:48:41 -0500
Subject: [Rd] Re: forwarded message from Ross Ihaka
In-Reply-To: Tom Cook's message of "Sun, 29 Jul 2001 20:48:29 -0500"
References: <15204.48365.943424.701549@polaris.biostat.wisc.edu>
Message-ID: <vbay9p7f7xy.fsf@mozart.stat.wisc.edu>

Ross Ihaka wrote to Tom Cook (who CCed it to me):
> 
[ regarding "density" and "angle" for polygon hatching ]
> 
> I have just found a student volunteer to do this.  I will
> know more about how long this will take in about a week.  (Its not a
> huge task, but the student make take while to up to speed on graphics.)

Ross:

You move fast!  However, I'm in Tom's group and have already done some
work on this.

I have what I believe is a pretty good polygon hatching algorithm
written and running in R.  It's robust when implemented in floating
point arithmetic, runs in time at worst linear in the diameter of the
area and O(n log n) in the number of sides of the polygon, and works
well on my ugly testcases (like 500-point random starbursts,
self-intersecting polygons, and so on).  I don't expect any difficulty
in implementing it as a part of R's "graphics.c".

Unless your student is really, really excited about polygon hatching
(and who wouldn't be!), maybe there's something else you want to force
him or her to volunteer to do.  ;)

With a couple days to clean up the code and write some interface glue,
I should be able to send a pure R implementation to the list for
people to play with and critique, if that sounds okay.

Thanks.

Kevin <buhr@stat.wisc.edu>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 08:35:17 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 09:35:17 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.3637.903902.962867@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> ripley@stats.ox.ac.uk writes:

>> On Sun, 29 Jul 2001 vogels@cmu.edu wrote:
>> 
>> > Hi,
>> >
>> > This email reports bugs in acinclude.m4, src/library/tcltk/src/Makefile,
>> > and share/perl/Rd2contents.pl.  It is based on R-patched.tgz from 07/27/2001
>> > (R 1.3.0) and comes from trying to compile R on AIX 4.3.
>> 
>> Would that be 2001-07-27?  Not all of us live in countries that flout ISO
>> standards!

> Oops.  Should have used the contents of the date stamp file...

>> > 1) acinclude.m4:  A string on line 3096 starts with a single quote: ' but
>> > is terminated with a double quote: ".  (This leads to the weird error
>> > message that configure can't execute 'shared' on line 4060.)
>> >      The fix is simply to use single quotes both times:
>> > allow_undefined_flag='${wl}-berok'
>> 
>> That is a generated file.  It coems from m4/libtool.m4.

> ...which means I should have said...
>  Line 1473 in m4/libtool.m4 contains the unterminated string.

> Hmm, should the name of the file suggest to me that it's part of some
> other package, like 'libtool', and I should file a bug report with
> it's maintainer?

Fixed now.  The file comes from libtool 1.4.  Unfortunately, we have to
patch it ourselves, as the libtool 1.4 `patch release' suddenly requires
autoconf 2.50 ...

>> > 2) after configure (with CC=gcc but using AIX's linker /usr/bin/ld), the
>> > Makefile in src/library/tcltk/src doesn't protect the linker flags -bI
>> > with -Xlinker! (-Xlinker is required when using gcc so that the linker flags
>> > are passed on to ld correctly.  Which I know that you know...)
>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't looked into
>> > patching configure yet...

Very strange.  Configure has

  *aix4.[2-9]*)
    EXPORTFILE="\$(top_builddir)/etc/R.exp"
    cpicflags=
    cxxpicflags=
    fpicflags=
    wl="-Wl,"
    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
    SHLIB_LIBADD="\$(LIBM)"
    ;;

so unless I am missing something obvious all linker flages are protected
via `-Wl,' (which should also work if the C compiler is not gcc).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jul 30 15:18:35 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jul 2001 10:18:35 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Thomas Vogels's message of "29 Jul 2001 16:10:47 -0400"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
Message-ID: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>


Excerpt from Kurt's email this morning:

>>> > 2) after configure (with CC=gcc but using AIX's linker
>/usr/bin/ld), the
>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>flags
>-bI
>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>linker flags
>>> > are passed on to ld correctly.  Which I know that you know...)
>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>looked into
>>> > patching configure yet...
>
>Very strange.  Configure has
>
>  *aix4.[2-9]*)
>    EXPORTFILE="\$(top_builddir)/etc/R.exp"
>    cpicflags=
>    cxxpicflags=
>    fpicflags=
>    wl="-Wl,"
>    main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>    shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>      ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>    SHLIB_LIBADD="\$(LIBM)"
>    ;;
>
>so unless I am missing something obvious all linker flages are
>protected
>via `-Wl,' (which should also work if the C compiler is not gcc).
>

Sorry, should have been more explicit, I guess: the problem is with
PKG_LIBS (which is the only variable in that Makefile using linker
flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
used AIX's 'cc' compiler, you get in trouble with later using gcc
(e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

There is the question, why configure didn't "see" this coming.  What
would be nice is a warning to the effect that tkConfig.sh is broken
when R can't compile tcltk.c.  (Currently I get messages about libc.a
not found...)

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jul 30 18:19:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 30 Jul 2001 19:19:43 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
Message-ID: <15205.38703.553276.335905@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Excerpt from Kurt's email this morning:

>>>> > 2) after configure (with CC=gcc but using AIX's linker
>> /usr/bin/ld), the
>>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> flags
>> -bI
>>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> linker flags
>>>> > are passed on to ld correctly.  Which I know that you know...)
>>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> looked into
>>>> > patching configure yet...
>> 
>> Very strange.  Configure has
>> 
>> *aix4.[2-9]*)
>> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> cpicflags=
>> cxxpicflags=
>> fpicflags=
>> wl="-Wl,"
>> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> SHLIB_LIBADD="\$(LIBM)"
>> ;;
>> 
>> so unless I am missing something obvious all linker flages are
>> protected
>> via `-Wl,' (which should also work if the C compiler is not gcc).
>> 

> Sorry, should have been more explicit, I guess: the problem is with
> PKG_LIBS (which is the only variable in that Makefile using linker
> flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> used AIX's 'cc' compiler, you get in trouble with later using gcc
> (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.

> There is the question, why configure didn't "see" this coming.  What
> would be nice is a warning to the effect that tkConfig.sh is broken
> when R can't compile tcltk.c.  (Currently I get messages about libc.a
> not found...)

This is asking for a bit much, I think.  How would configure know for
sure that tkConfig.sh is broken?

On second thought: the comment in tkConfig.sh says

	# String to pass to linker to pick up the Tk library from its
	# installed directory.
	TK_LIB_SPEC='@TK_LIB_SPEC@'

so maybe this assumes to be called by ld directly ...

What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Jul 31 16:00:36 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 31 Jul 2001 11:00:36 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: Kurt Hornik's message of "Mon, 30 Jul 2001 19:19:43 +0200"
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
Message-ID: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Thomas Vogels writes:
> 
> > Excerpt from Kurt's email this morning:
> 
> >>>> > 2) after configure (with CC=gcc but using AIX's linker
> >> /usr/bin/ld), the
> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
> >> flags
> >> -bI
> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
> >> linker flags
> >>>> > are passed on to ld correctly.  Which I know that you know...)
> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
> >> looked into
> >>>> > patching configure yet...
> >> 
> >> Very strange.  Configure has
> >> 
> >> *aix4.[2-9]*)
> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
> >> cpicflags=
> >> cxxpicflags=
> >> fpicflags=
> >> wl="-Wl,"
> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
> >> SHLIB_LIBADD="\$(LIBM)"
> >> ;;
> >> 
> >> so unless I am missing something obvious all linker flages are
> >> protected
> >> via `-Wl,' (which should also work if the C compiler is not gcc).
> >> 
> 
> > Sorry, should have been more explicit, I guess: the problem is with
> > PKG_LIBS (which is the only variable in that Makefile using linker
> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
> > used AIX's 'cc' compiler, you get in trouble with later using gcc
> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
> 
> > There is the question, why configure didn't "see" this coming.  What
> > would be nice is a warning to the effect that tkConfig.sh is broken
> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
> > not found...)
> 
> This is asking for a bit much, I think.  How would configure know for
> sure that tkConfig.sh is broken?

I promise to get more sleep soon... 'What would be nice is a warning
to the effect that the Tcl/Tk configuration failed, like:
checking how to compile and link tcl/tk.... failed
'  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
threre are other factors that can cause the fail (config.site...).

What this would boil down to is trying to compile e.g. tkAppInit.c and
see whether compilation and linking works.  But even this may
be asking  fortoo much, this is just one architecture.  Things like these
will continue to happen with AIX as long as there are those '.exp'
files around...


> On second thought: the comment in tkConfig.sh says
> 
> 	# String to pass to linker to pick up the Tk library from its
> 	# installed directory.
> 	TK_LIB_SPEC='@TK_LIB_SPEC@'
> 
> so maybe this assumes to be called by ld directly ...
> 
> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
which is needed badly when linking on AIX.

Thanks!
  -tom

> 
> -k
> 
> 

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 16:47:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107311547.RAA10368@pubhealth.ku.dk>

I found that predict.gnls failed with a wierd error message about a
non-numeric argument to a binary vector in one of three nearly identical
uses.

Error in Inh/Ki : non-numeric argument to binary operator

(Inh and Ki are arguments to the function used in the formula for the
object whose predictions were requested).

It turns out that the problem is in getCovariateFormula().

The final line in getCovariateFormula() in the nlme package (version
3.1-16) is:
    eval(parse(text = paste("~", deparse(form))))

however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
this results in inappropriately placed "~" signs:
For example, in my application with the error, form is

UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)

the result of the paste() operation in the last line of getCovariateFormula
is:

> paste("~",deparse(form))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
[2] "~     Ki)"

extending width.cutoff gives the intended value:

> paste("~",deparse(form,width.cutoff=500))
[1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"

Seems a bit risky for an enforced cutoff in deparse, though.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Jul 31 16:55:48 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 31 Jul 2001 11:55:48 -0400
Subject: [Rd] Problems with RPython when stdin is not a terminal
Message-ID: <5429125E11E4D411AF7300805FE603A8014CECE2@groexmbcr02.pfizer.com>

 
Hi, I've been trying to work with the RPython interface and noticed a
strange problem.  When
stdin is not a terminal the R part of the RPython interface complains.

EG,

	$ python RPython.py
	Initialized R-Python interface package.

works fine, but

	$ python < RPython.py
	


This particular strangeness isn't a problem in this context, but it does
become a problem when I try to use the python-mode of xemacs.  If I do
<Control-c><Control-c> to submit my python code I get the same error:

	Fatal error: you must specify `--save', `--no-save' or
`--vanilla'

Is there a way to fix this?

-Greg

(BTW: I've crossposted this to omega-remote and R-devel.  What list
_should_ I be sending this type of message to?  I also considered R-help
and omega-bugs...)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 17:21:46 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 18:21:46 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Tue, 31 Jul 2001 17:47:14 +0200 (MET DST)"
References: <200107311547.RAA10368@pubhealth.ku.dk>
Message-ID: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> The final line in getCovariateFormula() in the nlme package (version
> 3.1-16) is:
>     eval(parse(text = paste("~", deparse(form))))
> 
> however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> this results in inappropriately placed "~" signs:
> For example, in my application with the error, form is
> 
> UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> 
> the result of the paste() operation in the last line of getCovariateFormula
> is:
> 
> > paste("~",deparse(form))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> [2] "~     Ki)"
> 
> extending width.cutoff gives the intended value:
> 
> > paste("~",deparse(form,width.cutoff=500))
> [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> 
> Seems a bit risky for an enforced cutoff in deparse, though.

parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
use something like

f <- ~1
f[[2]] <- form
eval(f)

or 

eval(as.call(list(as.name("~"),form)))

or

eval(substitute(~form)) # that's not going to work in S, though...

??

(What is the eval for? Doesn't usually do anything to a
formula argument.)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Jul 31 18:46:46 2001
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: Tue, 31 Jul 2001 13:46:46 -0400
Subject: [Rd] "internal" keyword
Message-ID: <3B66EF06.10109@StonyBrook.Edu>

I seem to remember something about an "internal" keyword for R doc 
files.  How do we use it?

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jul 31 19:08:19 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Jul 2001 19:08:19 +0100 (GMT Daylight Time)
Subject: [Rd] "internal" keyword
In-Reply-To: <3B66EF06.10109@StonyBrook.Edu>
Message-ID: <Pine.WNT.4.31.0107311906430.608-100000@tern.stats>

On Tue, 31 Jul 2001, Timothy H. Keitt wrote:

> I seem to remember something about an "internal" keyword for R doc
> files.  How do we use it?

as in src/library/ts/man/ts-internal.Rd

It's documented in `Writing R Extensions': search for `internal' there.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jul 31 19:55:47 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 31 Jul 2001 13:55:47 -0500
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
References: <200107311547.RAA10368@pubhealth.ku.dk>
 <x2d76h6pd1.fsf@blueberry.kubism.ku.dk>
Message-ID: <6relqxorm4.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> > 
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to 60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> > 
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> > 
> > the result of the paste() operation in the last line of getCovariateFormula
> > is:
> > 
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> > 
> > extending width.cutoff gives the intended value:
> > 
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)"
> > 
> > Seems a bit risky for an enforced cutoff in deparse, though.
> 
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
> 
> f <- ~1
> f[[2]] <- form
> eval(f)
> 
> or 
> 
> eval(as.call(list(as.name("~"),form)))

> or
> 
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
> 
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:10:54 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 16:10:54 -0400
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <OF7528A682.B9E78D2C-ON85256A9A.006E9C38@rtp.epa.gov>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Tue Jul 31 21:19:26 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Tue, 31 Jul 2001 22:19:26 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312019.WAA11406@pubhealth.ku.dk>


It looks clunky, but you could maintain consistency across S and R forms
with

eval(parse(text=paste("~",paste(deparse(form),collapse=" "))))


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                
                    Douglas Bates                                                                               
                    <bates@stat.wis        To:     Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>                
                    c.edu>                 cc:     Woodrow Setzer/RTP/USEPA/US@EPA, r-devel@stat.math.ethz.ch,  
                    Sent by:               R-bugs@biostat.ku.dk                                                 
                    bates@franz.sta        Subject:     Re: [Rd] nlme: bug in getCovariateFormula (PR#1038)     
                    t.wisc.edu                                                                                  
                                                                                                                
                                                                                                                
                    07/31/01 02:55                                                                              
                    PM                                                                                          
                                                                                                                
                                                                                                                




Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
>
> > The final line in getCovariateFormula() in the nlme package (version
> > 3.1-16) is:
> >     eval(parse(text = paste("~", deparse(form))))
> >
> > however, if deparse(form) exceeds 'width.cutoff (which defaults to
60)',
> > this results in inappropriately placed "~" signs:
> > For example, in my application with the error, form is
> >
> > UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, Ki)
> >
> > the result of the paste() operation in the last line of
getCovariateFormula
> > is:
> >
> > > paste("~",deparse(form))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km, "
> > [2] "~     Ki)"
> >
> > extending width.cutoff gives the intended value:
> >
> > > paste("~",deparse(form,width.cutoff=500))
> > [1] "~ UnCompetitive(MethoxyresorufinConc, InhibitorConc, Vmax, Km,
Ki)"
> >
> > Seems a bit risky for an enforced cutoff in deparse, though.
>
> parse(...deparse(...)) always looks wrong to me anyway. Couldn't one
> use something like
>
> f <- ~1
> f[[2]] <- form
> eval(f)
>
> or
>
> eval(as.call(list(as.name("~"),form)))

> or
>
> eval(substitute(~form)) # that's not going to work in S, though...

Exactly.  The code was originally written for S and ported to R.  Some
of the contorted expressions were things that we found by
experimentation would work in both systems.

> ??
>
> (What is the eval for? Doesn't usually do anything to a
> formula argument.)

In Sv3 at least it assigns a class to the object.

I'll change it to eval(substitute(~form)) for the R package.





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:16:41 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 31 Jul 2001 23:16:41 +0200 (MET DST)
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
Message-ID: <200107312116.XAA11594@pubhealth.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jul 31 22:26:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2001 23:26:04 +0200
Subject: [Rd] nlme: bug in getCovariateFormula (PR#1038)
In-Reply-To: Douglas Bates's message of "31 Jul 2001 13:55:47 -0500"
References: <200107311547.RAA10368@pubhealth.ku.dk> <x2d76h6pd1.fsf@blueberry.kubism.ku.dk> <6relqxorm4.fsf@franz.stat.wisc.edu>
Message-ID: <x2ae1k23kj.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Exactly.  The code was originally written for S and ported to R.  Some
> of the contorted expressions were things that we found by
> experimentation would work in both systems.
> 
> > ??
> > 
> > (What is the eval for? Doesn't usually do anything to a
> > formula argument.)
> 
> In Sv3 at least it assigns a class to the object.

Aha. In R too.

> I'll change it to eval(substitute(~form)) for the R package.

Great. I would have thought that one of the two other forms would be
portable, though. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

