From ggrothendieck at gmail.com  Fri Jul  1 00:19:24 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 30 Jun 2005 18:19:24 -0400
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <da1jlv$et5$1@sea.gmane.org>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
Message-ID: <971536df05063015193e7012a9@mail.gmail.com>

On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> Gabor Grothendieck wrote:
> > On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> >
> ...
> 
> >> I keep a separate directory ...\R\library for nonstandard packages,
> >> with environment variable R_LIBS set to the directory name.
> >
> >
> > Do you mean your R_LIBS has two components: one to look in
> > ..\R\rcurrent\library and a second to look in ..\R\library? What does
> > it look like exactly?
> >
> > When you do install.packages(whatever) does it install to the
> > ..\R\library rather than ..\R\rcurrent\library ?   Also, does
> > updates.packages() work as expected for you?
> >
> My R_LIBS environment variable is just
> 
>   R_LIBS=C:\progs\r\library
> 
> and within R I see
> 
>   > .libPaths()
>   [1] "C:/progs/r/library"          "C:/progs/r/rcurrent/library"
> 
> i.e., the default library is automatically appended.  The help for
> .libPaths explains this.  And yes, install.packages() installs to
> C:\progs\R\library and update.packages() works as expected.
> 
> >
> >>My miktex.ini file specifies ...\R\rcurrent\share\texmf as a place
> >>to look for input files.
> >
> >
> > I think its necessary to rebuild the name data base in miktex too
> >     initexmf -u
> > although ignoring that step may work as long as the filenames
> > have not changed.
> 
> You are probably correct, though I have not yet encountered any problems
> that I could attribute to not running initexmf -- no doubt the filenames
> have not changed recently.
> 
> > I was hoping to continue using a vanilla
> > miktex installation as I do now rather than having a custom miktex.ini
> > file.  At any rate my batch file would continue to work even with your setup
> > so I think I should be ok here.
> >
> >
> >>That should take care of your points 3, 4, and 2, respectively.
> >>Duncan's suggestion of an R_ENVIRON environment variable (which
> >>I didn't know about; thanks, Duncan) should take care of point 1.
> >>
> >>Jon Hosking
> >
> >
> > It occurs to me in reading this that I could keep the *.site files in
> > ..\R and then have my miktex update batch file also copy them
> > to the appropriate etc folder.  Thus keeping an R\library folder
> > and running the batch file after each new installation would
> > address 1, 2 and 4 even without using the same name for the
> > rw... folder.  This still does not handle the shortcut key which
> > I would have to handle manually or determine if there is a way
> > I could also add that to my batch file.
> >
> 
> Jon Hosking
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Fri Jul  1 00:20:50 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 30 Jun 2005 18:20:50 -0400
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <da1jlv$et5$1@sea.gmane.org>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
Message-ID: <971536df050630152014c8f70@mail.gmail.com>

On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> Gabor Grothendieck wrote:
> > On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> >
> ...
> 
> >> I keep a separate directory ...\R\library for nonstandard packages,
> >> with environment variable R_LIBS set to the directory name.
> >
> >
> > Do you mean your R_LIBS has two components: one to look in
> > ..\R\rcurrent\library and a second to look in ..\R\library? What does
> > it look like exactly?
> >
> > When you do install.packages(whatever) does it install to the
> > ..\R\library rather than ..\R\rcurrent\library ?   Also, does
> > updates.packages() work as expected for you?
> >
> My R_LIBS environment variable is just
> 
>   R_LIBS=C:\progs\r\library
> 
> and within R I see
> 
>   > .libPaths()
>   [1] "C:/progs/r/library"          "C:/progs/r/rcurrent/library"
> 
> i.e., the default library is automatically appended.  The help for
> .libPaths explains this.  And yes, install.packages() installs to
> C:\progs\R\library and update.packages() works as expected.
> 
> >
> >>My miktex.ini file specifies ...\R\rcurrent\share\texmf as a place
> >>to look for input files.
> >
> >
> > I think its necessary to rebuild the name data base in miktex too
> >     initexmf -u
> > although ignoring that step may work as long as the filenames
> > have not changed.
> 
> You are probably correct, though I have not yet encountered any problems
> that I could attribute to not running initexmf -- no doubt the filenames
> have not changed recently.
> 
> > I was hoping to continue using a vanilla
> > miktex installation as I do now rather than having a custom miktex.ini
> > file.  At any rate my batch file would continue to work even with your setup
> > so I think I should be ok here.
> >
> >
> >>That should take care of your points 3, 4, and 2, respectively.
> >>Duncan's suggestion of an R_ENVIRON environment variable (which
> >>I didn't know about; thanks, Duncan) should take care of point 1.
> >>
> >>Jon Hosking
> >
> >
> > It occurs to me in reading this that I could keep the *.site files in
> > ..\R and then have my miktex update batch file also copy them
> > to the appropriate etc folder.  Thus keeping an R\library folder
> > and running the batch file after each new installation would
> > address 1, 2 and 4 even without using the same name for the
> > rw... folder.  This still does not handle the shortcut key which
> > I would have to handle manually or determine if there is a way
> > I could also add that to my batch file.
> >

Thanks. I think I have it now.  I have:

- placed my *.site files and library folder in C:\Program Files\R
  and have set the R_LIBS variable in Renviron.site to point to 
  C:\Program Files\R\library .

- I have a batch file which I placed on my desktop which runs rgui.exe
  from the bin subfolder of the current version of R (using the registry
  entry to find it).  That desktop shortcut has the Alt+Ctrl+R shortcut
  key associated with it since the batch file itself does not change even
  when I install new versions of R.

- each time I install a new version of R I run a batch file which
  -- copies the R miktex files to the appropriate miktex folder
  -- refreshes the miktex file name data base
  -- copies the *.site files in \Program Files\R to the etc subfolder
     of the current version of R (using the registry entry to find it)

Getting this right is something I have been putting off for some time
now since I was very concerned that I screw up my entire R installation
but with the advice of the two of you I think I have it now.
If any of this functionality could be taken over by the standard
R installation procedure that would be great but in any case I think
I have a solution that works for me now.  Thanks.


From osklyar at ebi.ac.uk  Fri Jul  1 14:00:25 2005
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Fri, 01 Jul 2005 13:00:25 +0100
Subject: [Rd] C/C++ namespaces
Message-ID: <1120219225.31877.15.camel@localhost.localdomain>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050701/e5800dc1/attachment.pl

From r.hankin at noc.soton.ac.uk  Fri Jul  1 15:41:52 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Fri, 1 Jul 2005 14:41:52 +0100
Subject: [Rd] C code in packages with complex arguments/returned value
Message-ID: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>

Hi

one of my packages has a severe bottleneck at a particular function  
and I
suspect  that replacing the R code with C code would speed it up.
The function takes complex arguments and returns a complex value.

I would like to follow Best Practice here.  None of the C code in my
packages includes the ability to handle complex numbers (this is done  
by R).

Does anyone know of a package that includes C code which manipulates
and returns  complex arguments that I could take a look at?

Yes, there is src/main/complex.c, but I would like to see how complex  
arithmetic is
done in a package (or how it should be done).

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From ripley at stats.ox.ac.uk  Fri Jul  1 15:55:38 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 1 Jul 2005 14:55:38 +0100 (BST)
Subject: [Rd] C/C++ namespaces
In-Reply-To: <1120219225.31877.15.camel@localhost.localdomain>
References: <1120219225.31877.15.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.61.0507011445290.9415@gannet.stats>

On Fri, 1 Jul 2005, Oleg Sklyar wrote:

> Dear community,
>
> this is just a suggestion, but might be useful for the following R
> releases.

It might be useful for future suggestions if you read the relevant manual 
before posting.  The developers are way ahead of you on this one.

> I was programming some C code for R and my compiler constantly showed me
> some crazy messages that a stdc++ macro length() was supplied with 4
> arguments whereas only one was required. The problem could be partially
> resolved by changing the order of includes. However as soon as the file
> was used from another units, the problem reappeared. Finally, it turned
> out that length() with one argument was a macro in Rinternals.h along
> with LENGTH. So I have to use namespace specifications on the rest of my
> code, because R - length() is not protected under a namespace.
>
> The problem is however that length is a pretty common name and as any
> other very common name should be protected by a C namespace to avoid
> confusion.

There is no such thing as a `C namespace': the word does not appear in the 
C99 standard.

> Therefore, the suggestion/question - wouldn't it be
> reasonable just to put the whole R includes into a unique namespace? It
> wouldn't require any modifications in the existing libraries because if
> the code is not conflicting, namespace can be omitted.

> Does it have sense?

No, as R is written in C not C++.  This issue only occurs if

1) you include Rinternals.h (which was designed for C programmers), and
2) do not take notice of the warning in the `Writing R Extensions' manual
and do not define R_NO_REMAP as it suggests.

Using C++ namespaces would be of no help for C extensions to R, and we 
have already provided a solution, in a back-compatible way for both C 
and C++ programmers.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Fri Jul  1 15:58:19 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 1 Jul 2005 14:58:19 +0100 (BST)
Subject: [Rd] C code in packages with complex arguments/returned value
In-Reply-To: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>
References: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>
Message-ID: <Pine.LNX.4.61.0507011456230.9415@gannet.stats>

Search for uses of Rcomplex in package source code.  The only packages on 
CRAN which use it are ifs and rimage.

On Fri, 1 Jul 2005, Robin Hankin wrote:

> Hi
>
> one of my packages has a severe bottleneck at a particular function
> and I
> suspect  that replacing the R code with C code would speed it up.
> The function takes complex arguments and returns a complex value.
>
> I would like to follow Best Practice here.  None of the C code in my
> packages includes the ability to handle complex numbers (this is done
> by R).
>
> Does anyone know of a package that includes C code which manipulates
> and returns  complex arguments that I could take a look at?
>
> Yes, there is src/main/complex.c, but I would like to see how complex
> arithmetic is
> done in a package (or how it should be done).
>
> --
> Robin Hankin
> Uncertainty Analyst
> National Oceanography Centre, Southampton
> European Way, Southampton SO14 3ZH, UK
>  tel  023-8059-7743
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From r.hankin at noc.soton.ac.uk  Fri Jul  1 16:08:37 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Fri, 1 Jul 2005 15:08:37 +0100
Subject: [Rd] C code in packages with complex arguments/returned value
In-Reply-To: <Pine.LNX.4.61.0507011456230.9415@gannet.stats>
References: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>
	<Pine.LNX.4.61.0507011456230.9415@gannet.stats>
Message-ID: <B703B11D-EEB0-4FA0-B5E4-457C41E6A3DC@soc.soton.ac.uk>

Professor Ripley

On Jul 1, 2005, at 02:58 pm, Prof Brian Ripley wrote:

> Search for uses of Rcomplex in package source code.  The only  
> packages on CRAN which use it are ifs and rimage.
>>


Thank you for this: either is perfect for my purposes.  How did you  
search the
packages' source code?  (my best attempt was downloading a random sample
of packages and searching locally).

RSiteSeearch("Rcomplex") gave me nothing useful.

best wishes


rksh


>> Does anyone know of a package that includes C code which manipulates
>> and returns  complex arguments that I could take a look at?
>>
>>
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From Kurt.Hornik at wu-wien.ac.at  Fri Jul  1 16:14:16 2005
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Fri, 1 Jul 2005 16:14:16 +0200
Subject: [Rd] C code in packages with complex arguments/returned value
In-Reply-To: <B703B11D-EEB0-4FA0-B5E4-457C41E6A3DC@soc.soton.ac.uk>
References: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>
	<Pine.LNX.4.61.0507011456230.9415@gannet.stats>
	<B703B11D-EEB0-4FA0-B5E4-457C41E6A3DC@soc.soton.ac.uk>
Message-ID: <17093.20408.261804.274472@mithrandir.hornik.net>

>>>>> Robin Hankin writes:

> Professor Ripley
> On Jul 1, 2005, at 02:58 pm, Prof Brian Ripley wrote:

>> Search for uses of Rcomplex in package source code.  The only  
>> packages on CRAN which use it are ifs and rimage.
>>> 


> Thank you for this: either is perfect for my purposes.  How did you
> search the packages' source code?  (my best attempt was downloading a
> random sample of packages and searching locally).

You mean you don't have a local CRAN mirror on your hard disk?  :-)

-k

> RSiteSeearch("Rcomplex") gave me nothing useful.

> best wishes


> rksh


>>> Does anyone know of a package that includes C code which manipulates
>>> and returns  complex arguments that I could take a look at?
>>> 
>>> 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>> 

> --
> Robin Hankin
> Uncertainty Analyst
> National Oceanography Centre, Southampton
> European Way, Southampton SO14 3ZH, UK
>   tel  023-8059-7743

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Fri Jul  1 16:22:05 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 1 Jul 2005 15:22:05 +0100 (BST)
Subject: [Rd] C code in packages with complex arguments/returned value
In-Reply-To: <17093.20408.261804.274472@mithrandir.hornik.net>
References: <626733E1-D6FF-4B81-8417-D6013B5BBB5B@soc.soton.ac.uk>
	<Pine.LNX.4.61.0507011456230.9415@gannet.stats>
	<B703B11D-EEB0-4FA0-B5E4-457C41E6A3DC@soc.soton.ac.uk>
	<17093.20408.261804.274472@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.61.0507011519210.9903@gannet.stats>

On Fri, 1 Jul 2005, Kurt Hornik wrote:

>>>>>> Robin Hankin writes:
>
>> Professor Ripley
>> On Jul 1, 2005, at 02:58 pm, Prof Brian Ripley wrote:
>
>>> Search for uses of Rcomplex in package source code.  The only
>>> packages on CRAN which use it are ifs and rimage.
>>>>
>
>
>> Thank you for this: either is perfect for my purposes.  How did you
>> search the packages' source code?  (my best attempt was downloading a
>> random sample of packages and searching locally).
>
> You mean you don't have a local CRAN mirror on your hard disk?  :-)

Well, as I do and unpack them regularly for testing proposed code changes, 
I did

grep Rcomplex ~/R/packages/tests/*/src/*

However, I was intending that you should search in the packages I had 
located for you.


>
> -k
>
>> RSiteSeearch("Rcomplex") gave me nothing useful.
>
>> best wishes
>
>
>> rksh
>
>
>>>> Does anyone know of a package that includes C code which manipulates
>>>> and returns  complex arguments that I could take a look at?
>>>>
>>>>
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>
>> --
>> Robin Hankin
>> Uncertainty Analyst
>> National Oceanography Centre, Southampton
>> European Way, Southampton SO14 3ZH, UK
>>   tel  023-8059-7743
>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Fri Jul  1 18:36:54 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 1 Jul 2005 18:36:54 +0200
Subject: [Rd] (PR#7976) split() dropping levels (was "boxplot by factor")
In-Reply-To: <x2aclaskop.fsf@turmalin.kubism.ku.dk>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFA64EA20@usctmx1106.Merck.com>
	<x2aclaskop.fsf@turmalin.kubism.ku.dk>
Message-ID: <17093.28966.102963.959771@stat.math.ethz.ch>

>>>>> "PD" == Peter Dalgaard <p.dalgaard at biostat.ku.dk>
>>>>>     on 28 Jun 2005 14:57:42 +0200 writes:

    PD> "Liaw, Andy" <andy_liaw at merck.com> writes:
    >> The issue is not with boxplot, but with split.  boxplot.formula() 
    >> calls boxplot(split(split(mf[[response]], mf[-response]), ...), 
    >> but look at what split() returns when there are empty levels in
    >> the factor:
    >> 
    >> > f <- factor(gl(3, 6), levels=1:5)
    >> > y <- rnorm(f)
    >> > split(y, f)
    >> $"1"
    >> [1] 0.4832124 1.1924811 0.3657797 1.7400198 0.5577356 0.9889520
    >> 
    >> $"2"
    >> [1] -1.1296642 -0.4808355 -0.2789933  0.1220718  0.1287742 -0.7573801
    >> 
    >> $"3"
    >> [1]  1.2320902  0.5090700 -1.5508074  2.1373780  1.1681297 -0.7151561
    >> 
    >> The "culprit" is the following in split.default():
    >> 
    >> f <- factor(f)
    >> 
    >> which drops empty levels in f, if there are any.  BTW, ?split doesn't
    >> mention what it does in such situation.  Perhaps it should?
    >> 
    >> If this is to be "fixed", I suppose an additional argument, e.g.,
    >> drop=TRUE, can be added, and the corresponding line mentioned
    >> above changed to something like:
    >> 
    >> if (drop || !is.factor(f)) f <- factor(f)
    >> 
    >> Then this additional argument can be pass on from boxplot.formula() to 
    >> split().

    PD> Alternatively, I suspect that the intention was as.factor() rather
    PD> than factor(). 

at first I thought Peter was right; but the real source of
split.default contains a comment (!) and that line is

    f <- factor(f) # drop extraneous levels

so it seems, this was done there very much on purpose.    
OTOH, S(-plus) has implemented it quite a bit differently, and actually
does keep the empty levels in the example

  f <- factor(rep(1:3, each=6), levels=1:5); y <- rnorm(f); split(y, f)

    PD> It does require a bit of care to fix it that way,
    PD> though. There could be problems with empty levels popping up in
    PD> unexpected places. 

Indeed!
Given the new facts, I think we want to go in Andy's direction
with a new argument, 'drop'

A Peter mentioned, the real question is about its default.
"drop = TRUE"   would be fully compatible with previous versions of R.
"drop = FALSE"  would be compatible with S and S-plus.

I'm going to implement it, and try to see if 'drop = FALSE'
gives changes for R and its standard packages;  if 'yes', that
would be an indication that such a R-back-compatibility breaking
change was not a good idea.  If 'no', I could commit it and see
if it has an effect on the CRAN packages....

Of course, since split() and split()<- are S3 generics, and
since there's also unsplit(),  this entails a whole slew of
changes {adding a "drop = FALSE" argument everywhere!}
and I presume will break everyone's code who has written own
split.foobar methods....

great...

Martin


From nakama at ki.rim.or.jp  Fri Jul  1 18:46:46 2005
From: nakama at ki.rim.or.jp (Ei-ji Nakama)
Date: Sat, 02 Jul 2005 01:46:46 +0900 (JST)
Subject: [Rd] Buidling R on Linux (Itanium) fails (PR#7897)
In-Reply-To: <4295A053.50601@univ-paris5.fr>
References: <20050526004329.2A58BA20A@slim.kubism.ku.dk>
	<4295A053.50601@univ-paris5.fr>
Message-ID: <20050702.014646.846939525.nakama@ki.rim.or.jp>

Thu, 26 May 2005 12:09:23 +0200
Christophe Pouzat <christophe.pouzat at univ-paris5.fr> wrote.
> Hi,
> 
> here is the "configure" command line I used for an Intel PIV processor 
> with icc, ifort and the intel mkl:
(snip)
> In my experience using "FPICFLAGS=-shared" is mendatory to get the 
> compilation working. The other options are mainly there to pass almost 
> all the tests (except one) of "make check".

Is not a cause to fail in a problem of FTZ,DAZ?
If there was time because I put
  http://www.nakama.ne.jp/memo/ia32_linux/
     R-2.1.1.iccftzdaz.patch.txt
please try to test it.

--
http://www.nakama.ne.jp, http://r.nakama.ne.jp
e-mail : EIJI Nakama <nakama at ki.rim.or.jp>


From erich.neuwirth at univie.ac.at  Sun Jul  3 02:08:16 2005
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Sun, 03 Jul 2005 02:08:16 +0200
Subject: [Rd] Building R v2.1.1 for Windows
In-Reply-To: <42C00F6D.3070109@maths.lth.se>
References: <42C00F6D.3070109@maths.lth.se>
Message-ID: <42C72C70.3060107@univie.ac.at>

Recently, I notice strange things when I try to build R 2.1.1 on Windows XP.
I downloaded and unpacked. R-2.1.1.tar.gz.
All the tools are in place.

I get as far as building the installer, and then the following happens:

perl JRins.pl rw2011 rw2011
"C:/Program Files/Inno Setup 5/iscc" R.iss > rw2011.log 2>&1
make[2]: Leaving directory
`/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'
make[2]: Entering directory
`/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'

rm -rf R.iss Rsmall.iss *.log rw2011
rm: cannot remove directory `rw2011/library/base/html': Directory not empty
rm: cannot remove directory `rw2011/library/tcltk/Meta': Directory not empty
make[2]: *** [clean] Error 1
make[2]: Leaving directory
`/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'
make[1]: *** [rinstaller] Error 2
make[1]: Leaving directory `/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32'
make: *** [distribution] Error 2

Looking into the two supposedly nonempty directories
I see that in fact that are empty.
Of course, I only can look a little bit later, so this might be a timing
issue.
Has anyone experienced similar problems?
This effect is somewhat random. The supposedly nonempty directories
change from build attempt to build attempt.

So far, this has not happened when I build R-patched and R-devel which
I update from SVN.

Erich Neuwirth


From tolga at coubros.com  Sun Jul  3 13:33:35 2005
From: tolga at coubros.com (Tolga Uzuner)
Date: Sun, 03 Jul 2005 12:33:35 +0100
Subject: [Rd] Small GUI Recommendation
Message-ID: <42C7CD0F.4010501@coubros.com>

Dear R Developers,

Small recommendation: could you please make Vertical Tiling of windows 
an option in the Windows GUI if not a big hassle. For small laptop 
screens, it is easier to tile vertically, as one can see an entire line.

Thanks,
Tolga


From murdoch at stats.uwo.ca  Sun Jul  3 20:55:51 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 03 Jul 2005 14:55:51 -0400
Subject: [Rd] Building R v2.1.1 for Windows
In-Reply-To: <42C72C70.3060107@univie.ac.at>
References: <42C00F6D.3070109@maths.lth.se> <42C72C70.3060107@univie.ac.at>
Message-ID: <42C834B7.50306@stats.uwo.ca>

Erich Neuwirth wrote:
> Recently, I notice strange things when I try to build R 2.1.1 on Windows XP.
> I downloaded and unpacked. R-2.1.1.tar.gz.
> All the tools are in place.
> 
> I get as far as building the installer, and then the following happens:
> 
> perl JRins.pl rw2011 rw2011
> "C:/Program Files/Inno Setup 5/iscc" R.iss > rw2011.log 2>&1
> make[2]: Leaving directory
> `/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'
> make[2]: Entering directory
> `/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'
> 
> rm -rf R.iss Rsmall.iss *.log rw2011
> rm: cannot remove directory `rw2011/library/base/html': Directory not empty
> rm: cannot remove directory `rw2011/library/tcltk/Meta': Directory not empty
> make[2]: *** [clean] Error 1
> make[2]: Leaving directory
> `/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32/installer'
> make[1]: *** [rinstaller] Error 2
> make[1]: Leaving directory `/cygdrive/c/devel/R/R-2.1.1/src/gnuwin32'
> make: *** [distribution] Error 2
> 
> Looking into the two supposedly nonempty directories
> I see that in fact that are empty.
> Of course, I only can look a little bit later, so this might be a timing
> issue.
> Has anyone experienced similar problems?
> This effect is somewhat random. The supposedly nonempty directories
> change from build attempt to build attempt.
> 
> So far, this has not happened when I build R-patched and R-devel which
> I update from SVN.

I haven't seen that error so far during an R build, but I believe you'll 
get it if the directory is busy because it is the current directory for 
some process.  Did you have another window open that was looking at it?

Duncan Murdoch


From jincaijiang at yahoo.com  Mon Jul  4 01:12:46 2005
From: jincaijiang at yahoo.com (jincaijiang@yahoo.com)
Date: Mon,  4 Jul 2005 01:12:46 +0200 (CEST)
Subject: [Rd] Graphics: log="x" plot (PR#7986)
Message-ID: <20050703231246.EB841A226@slim.kubism.ku.dk>

Full_Name: Jincai Jiang
Version: 2.1.1
OS: Red Hat 7/8/9, Windows XP
Submission from: (NULL) (65.103.188.91)



when plot in log="x", and the data has a point with negative x such as
(-1,10000), and when the y for this x is the max of all y's in the data set, the
y scale looks wrong.

p<-cbind(c(-1,10,100,1000),c(100000,1,2,3))
plot(p,log="x")

The data point (-1,100000), not just the x value of it, should be discarded.


Comment on gsub() and sub():

it is illogical to use \ to escape another \ which is for escaping other
characters such as gsub('\\([sS]\\),'\\1', a, extended=F). It should only use \
to escape \ which is literal backslash. Also it should default to extended=F.
The above gsub() should read: gsub('\([sS\)','\1', a).

Thank you all for the great work!

Jincai


From maechler at stat.math.ethz.ch  Mon Jul  4 09:15:59 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 4 Jul 2005 09:15:59 +0200
Subject: [Rd] (PR#7976) split() dropping levels (was "boxplot by factor")
In-Reply-To: <17093.28966.102963.959771@stat.math.ethz.ch>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFA64EA20@usctmx1106.Merck.com>
	<x2aclaskop.fsf@turmalin.kubism.ku.dk>
	<17093.28966.102963.959771@stat.math.ethz.ch>
Message-ID: <17096.57903.116405.259737@stat.math.ethz.ch>


[ Hmm, is everyone of those interested in changes inside R "sleeping" ,
  uninterested, ... 
]

>>>>> "MM" == Martin Maechler <maechler at stat.math.ethz.ch>
>>>>>     on Fri, 1 Jul 2005 18:36:54 +0200 writes:

>>>>> "PD" == Peter Dalgaard <p.dalgaard at biostat.ku.dk>
>>>>>     on 28 Jun 2005 14:57:42 +0200 writes:

    PD> "Liaw, Andy" <andy_liaw at merck.com> writes:
    >>> The issue is not with boxplot, but with split.  boxplot.formula() 
    >>> calls boxplot(split(split(mf[[response]], mf[-response]), ...), 
    >>> but look at what split() returns when there are empty levels in
    >>> the factor:
    >>> 
    >>> > f <- factor(gl(3, 6), levels=1:5)
    >>> > y <- rnorm(f)
    >>> > split(y, f)
    >>> $"1"
    >>> [1] 0.4832124 1.1924811 0.3657797 1.7400198 0.5577356 0.9889520
    >>> 
    >>> $"2"
    >>> [1] -1.1296642 -0.4808355 -0.2789933  0.1220718  0.1287742 -0.7573801
    >>> 
    >>> $"3"
    >>> [1]  1.2320902  0.5090700 -1.5508074  2.1373780  1.1681297 -0.7151561
    >>> 
    >>> The "culprit" is the following in split.default():
    >>> 
    >>> f <- factor(f)
    >>> 
    >>> which drops empty levels in f, if there are any.  BTW, ?split doesn't
    >>> mention what it does in such situation.  Perhaps it should?
    >>> 
    >>> If this is to be "fixed", I suppose an additional argument, e.g.,
    >>> drop=TRUE, can be added, and the corresponding line mentioned
    >>> above changed to something like:
    >>> 
    >>> if (drop || !is.factor(f)) f <- factor(f)
    >>> 
    >>> Then this additional argument can be pass on from boxplot.formula() to 
    >>> split().

    PD> Alternatively, I suspect that the intention was as.factor() rather
    PD> than factor(). 

    MM> at first I thought Peter was right; but the real source of
    MM> split.default contains a comment (!) and that line is

    MM> f <- factor(f) # drop extraneous levels

    MM> so it seems, this was done there very much on purpose.    
    MM> OTOH, S(-plus) has implemented it quite a bit differently, and actually
    MM> does keep the empty levels in the example

    MM> f <- factor(rep(1:3, each=6), levels=1:5); y <- rnorm(f); split(y, f)

    PD> It does require a bit of care to fix it that way,
    PD> though. There could be problems with empty levels popping up in
    PD> unexpected places. 

    MM> Indeed!
    MM> Given the new facts, I think we want to go in Andy's direction
    MM> with a new argument, 'drop'

    MM> A Peter mentioned, the real question is about its default.
    MM> "drop = TRUE"   would be fully compatible with previous versions of R.
    MM> "drop = FALSE"  would be compatible with S and S-plus.

    MM> I'm going to implement it, and try to see if 'drop = FALSE'
    MM> gives changes for R and its standard packages;  if 'yes', that
    MM> would be an indication that such a R-back-compatibility breaking
    MM> change was not a good idea.  If 'no', I could commit it and see
    MM> if it has an effect on the CRAN packages....

    MM> Of course, since split() and split()<- are S3 generics, and
    MM> since there's also unsplit(),  this entails a whole slew of
    MM> changes {adding a "drop = FALSE" argument everywhere!}
    MM> and I presume will break everyone's code who has written own
    MM> split.foobar methods....

    MM> great...

    MM> Martin

The change doesn't seem to affect the "standard" packages at all
which is good.  On CRAN, it seems there are two packages only that
have  split() or split()<-  methods,  namely 'spatstat' and 'compositions'.

If we introduced the extra argument 'drop', 
these and every other user code defining split methods would
have to be updated to be compatible with the changed (S3)
generic having an extra argument 'drop'.

With this in mind, after more thought, I think that Peter's
initial proposal ---just replacing 'factor()' by 'as.factor()'
inside split--- seems to be nicer than introducing 'drop' and
*change* the default behavior to  'drop = FALSE' for the
following reasons : 

1) people who rely on the current behavior would have to change
   their calls to split() anyway;

2) instead of calling  
       split(x, f, drop=TRUE)
   they can as well go for
       split(x, factor(f)) 
   which has identical effect but does not introduce an extra
   argument 'drop'.

3) advantage of slightly higher compatibility with S

---

I intend to change this in R-devel
{with appropriate notes in NEWS !} during this week, unless
someone finds good reasons for a different (or no) change.

Martin


From cajo.terbraak at wur.nl  Mon Jul  4 11:34:56 2005
From: cajo.terbraak at wur.nl (cajo.terbraak@wur.nl)
Date: Mon,  4 Jul 2005 11:34:56 +0200 (CEST)
Subject: [Rd] eigen of a real pd symmetric matrix gives NaNs in $vector
	(PR#7987)
Message-ID: <20050704093456.BB45210B78@slim.kubism.ku.dk>

Full_Name: cajo ter Braak
Version: 2.1.1
OS: Windows
Submission from: (NULL) (137.224.10.105)


# I would like to attach the matrix C in the Rdata file; it is 50x50 and comes
from a geostatistical problem (spherical covariogram)

> rm(list=ls(all=TRUE))
> load(file= "test.eigen.Rdata")
> ls()
[1] "C"  "eW"
> 
> sym.check = max(abs(C - t(C)))    # should be 0 for symmetry
> sym.check
[1] 0
> eW <-eigen(C, symmetric = TRUE)
> l_eW <- eW$values
> print(eW$values)
 [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
 [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
[50] 0.4960220
> #print(eW$vector)
> 
> 
> #library(MASS)
> #n = nrow(C)
> #y = runif(n)
> 
> #lm1 = lm.gls(y~1, W = C)
> #summary(lm1)
> 
> eW <-eigen(C, symmetric = TRUE)
> l_eW <- eW$values
> # the thirdteens eigenvector contrains NaN
> print(eW$values)
 [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
 [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
[50] 0.4960220
> print(eW$vector[,13])
 [1]   0 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
NaN
[20] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
NaN
[39] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>


From r.hankin at noc.soton.ac.uk  Mon Jul  4 12:36:22 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Mon, 4 Jul 2005 11:36:22 +0100
Subject: [Rd] prototypes for z_sin() and z_cos()
Message-ID: <93D4ABFE-69BD-4A20-B35F-19A0996FAF24@soc.soton.ac.uk>

Hi

I have been looking at complex.c and want to access z_cos() and z_sin 
() from
C in one of my packages.

There doesn't seem to be a corresponding header file: there is no  
complex.h file.

Where are the prototypes of z_sin() and z_cos() for these functions?

grepping didn't help me:

                  find ~/downloads/R-2.1.1/  -name "*.h " | xargs  
egrep "z_cos"

returned empty.

How do I access z_sin() from my c code?


--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From pburns at pburns.seanet.com  Mon Jul  4 12:50:47 2005
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Mon, 04 Jul 2005 11:50:47 +0100
Subject: [Rd] eigen of a real pd symmetric matrix gives NaNs in $vector
 (PR#7987)
In-Reply-To: <20050704093456.BB45210B78@slim.kubism.ku.dk>
References: <20050704093456.BB45210B78@slim.kubism.ku.dk>
Message-ID: <42C91487.6080106@pburns.seanet.com>

I would presume this is another manifestation of what I reported
(reproduced below) on 2003-12-01.

cajo.terbraak at wur.nl wrote:

>Full_Name: cajo ter Braak
>Version: 2.1.1
>OS: Windows
>Submission from: (NULL) (137.224.10.105)
>
>
># I would like to attach the matrix C in the Rdata file; it is 50x50 and comes
>from a geostatistical problem (spherical covariogram)
>
>  
>
>>rm(list=ls(all=TRUE))
>>load(file= "test.eigen.Rdata")
>>ls()
>>    
>>
>[1] "C"  "eW"
>  
>
>>sym.check = max(abs(C - t(C)))    # should be 0 for symmetry
>>sym.check
>>    
>>
>[1] 0
>  
>
>>eW <-eigen(C, symmetric = TRUE)
>>l_eW <- eW$values
>>print(eW$values)
>>    
>>
> [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
> [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
>[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
>[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
>[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
>[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
>[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
>[50] 0.4960220
>  
>
>>#print(eW$vector)
>>
>>
>>#library(MASS)
>>#n = nrow(C)
>>#y = runif(n)
>>
>>#lm1 = lm.gls(y~1, W = C)
>>#summary(lm1)
>>
>>eW <-eigen(C, symmetric = TRUE)
>>l_eW <- eW$values
>># the thirdteens eigenvector contrains NaN
>>print(eW$values)
>>    
>>
> [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
> [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
>[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
>[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
>[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
>[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
>[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
>[50] 0.4960220
>  
>
>>print(eW$vector[,13])
>>    
>>
> [1]   0 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>NaN
>[20] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>NaN
>[39] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>  
>

This is undoubtedly a bug, but I doubt that it is really down to R.

Synopsis: a certain matrix causes eigen(symmetric=TRUE)
to produce NaN's in some of the returned eigenvectors.
This happens using SuSe 8.2 Professional and the precompiled
R rpm (happens in both 1.8.1 and 1.7.1).  I don't see it under
Windows.

To reproduce the bug:
The matrix (75 by 75, about 45K) is in
http://www.burns-stat.com/pages/Flotsam/eigenbugmatrix.RData

Load that into R.

sum(is.na(eigen(eigenbugmatrix, symmetric=TRUE)$vectors))

is non-zero (600 in my experience) when the bug is exhibited and
is zero when the bug is not.

It is quite sensitive to the numbers.  The bug is still there with some
scaling of the matrix (from about divide by 2 to multiply by 8).  The
bug disappears if the matrix is dumped and sourced back in again.

The only clue that I can offer is that it is vectors 43:50 (I think) that
are NaN's and the matrix is logically of rank 50.  That is, it is a
covariance matrix on 75 variables using 50 observations.

Hopefully, someone has the experience and tenacity to figure out
what is going on here.


Patrick Burns

Burns Statistics
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>
>  
>


From pburns at pburns.seanet.com  Mon Jul  4 12:51:14 2005
From: pburns at pburns.seanet.com (pburns@pburns.seanet.com)
Date: Mon,  4 Jul 2005 12:51:14 +0200 (CEST)
Subject: [Rd] eigen of a real pd symmetric matrix gives NaNs in $vector
	(PR#7989)
Message-ID: <20050704105114.1CCBBA251@slim.kubism.ku.dk>

I would presume this is another manifestation of what I reported
(reproduced below) on 2003-12-01.

cajo.terbraak at wur.nl wrote:

>Full_Name: cajo ter Braak
>Version: 2.1.1
>OS: Windows
>Submission from: (NULL) (137.224.10.105)
>
>
># I would like to attach the matrix C in the Rdata file; it is 50x50 and comes
>from a geostatistical problem (spherical covariogram)
>
>  
>
>>rm(list=ls(all=TRUE))
>>load(file= "test.eigen.Rdata")
>>ls()
>>    
>>
>[1] "C"  "eW"
>  
>
>>sym.check = max(abs(C - t(C)))    # should be 0 for symmetry
>>sym.check
>>    
>>
>[1] 0
>  
>
>>eW <-eigen(C, symmetric = TRUE)
>>l_eW <- eW$values
>>print(eW$values)
>>    
>>
> [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
> [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
>[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
>[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
>[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
>[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
>[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
>[50] 0.4960220
>  
>
>>#print(eW$vector)
>>
>>
>>#library(MASS)
>>#n = nrow(C)
>>#y = runif(n)
>>
>>#lm1 = lm.gls(y~1, W = C)
>>#summary(lm1)
>>
>>eW <-eigen(C, symmetric = TRUE)
>>l_eW <- eW$values
>># the thirdteens eigenvector contrains NaN
>>print(eW$values)
>>    
>>
> [1] 4.5730646 4.5730646 3.3066738 3.3066738 3.3066738 3.3066738 2.3935268
> [8] 2.3935268 1.9367508 1.9367508 1.9347787 1.9347787 1.4276845 1.4276845
>[15] 1.4276845 1.4276845 0.9858318 0.9858318 0.9858318 0.9858318 0.9123115
>[22] 0.9123115 0.7945283 0.7945283 0.7880493 0.7880493 0.6047920 0.6047920
>[29] 0.6047920 0.6047920 0.5689609 0.5689609 0.5681210 0.5681210 0.5440676
>[36] 0.5440676 0.5440676 0.5440676 0.5224040 0.5224040 0.5139844 0.5139844
>[43] 0.5077485 0.5077485 0.5008249 0.5008249 0.5008249 0.5008249 0.4960220
>[50] 0.4960220
>  
>
>>print(eW$vector[,13])
>>    
>>
> [1]   0 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>NaN
>[20] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>NaN
>[39] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN
>  
>

This is undoubtedly a bug, but I doubt that it is really down to R.

Synopsis: a certain matrix causes eigen(symmetric=TRUE)
to produce NaN's in some of the returned eigenvectors.
This happens using SuSe 8.2 Professional and the precompiled
R rpm (happens in both 1.8.1 and 1.7.1).  I don't see it under
Windows.

To reproduce the bug:
The matrix (75 by 75, about 45K) is in
http://www.burns-stat.com/pages/Flotsam/eigenbugmatrix.RData

Load that into R.

sum(is.na(eigen(eigenbugmatrix, symmetric=TRUE)$vectors))

is non-zero (600 in my experience) when the bug is exhibited and
is zero when the bug is not.

It is quite sensitive to the numbers.  The bug is still there with some
scaling of the matrix (from about divide by 2 to multiply by 8).  The
bug disappears if the matrix is dumped and sourced back in again.

The only clue that I can offer is that it is vectors 43:50 (I think) that
are NaN's and the matrix is logically of rank 50.  That is, it is a
covariance matrix on 75 variables using 50 observations.

Hopefully, someone has the experience and tenacity to figure out
what is going on here.


Patrick Burns

Burns Statistics
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>
>  
>


From tolga.uzuner at csfb.com  Mon Jul  4 15:31:20 2005
From: tolga.uzuner at csfb.com (Uzuner, Tolga)
Date: Mon, 4 Jul 2005 14:31:20 +0100
Subject: [Rd] Compiling R scripts
Message-ID: <BDF571786CAD224F966FEB86BEDED52F1433DF91@elon12p32001.csfp.co.uk>

Dear R Developers,

A recommendation for future development.

It would help if R scripts could be compiled into an executable, or a library. Speed is the main issue (I run a large scale monte carlo in R which is very slow). However, it would also make it easier to link R into other applications, easier at least than the COM infrastructure under Windows.

Finally, it would make it much easier to farm R apps: rather than distributing all of R and necessary libraries onto each client, and making sure each client is always up to date as libraries for a specific script change, it might be easier just to distribute a simple executable across all nodes.

Regards,
Tolga


==============================================================================
Please access the attached hyperlink for an important electronic communications disclaimer: 

http://www.csfb.com/legal_terms/disclaimer_external_email.shtml


From B.Rowlingson at lancaster.ac.uk  Mon Jul  4 16:22:04 2005
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 04 Jul 2005 15:22:04 +0100
Subject: [Rd] Compiling R scripts
In-Reply-To: <BDF571786CAD224F966FEB86BEDED52F1433DF91@elon12p32001.csfp.co.uk>
References: <BDF571786CAD224F966FEB86BEDED52F1433DF91@elon12p32001.csfp.co.uk>
Message-ID: <42C9460C.5030203@lancaster.ac.uk>

Uzuner, Tolga wrote:
> Dear R Developers,

> It would help if R scripts could be compiled into an executable, or a
> library.

  Are you sure it would help? If you do a big matrix operation in R it 
runs at the speed of the underlying C code. It wont get much faster. 
Profile your code, find out where the time is being spent, then optimise 
_that_.

> Speed is the main issue (I run a large scale monte carlo in
> R which is very slow).

  The reason its very slow is not because its 'in R' but because it is a 
'large scale monte carlo'. What was a 'large scale' monte-carlo ten 
years ago runs in no time today. 'large scale' == 'slow' almost by 
definition.

  Unless you've done comparisons with the same code written in some 
other language.

> However, it would also make it easier to link
> R into other applications, easier at least than the COM
> infrastructure under Windows.

  R can be called from C, and there are application links to Python, 
Perl, Java... Easy enough.

> Finally, it would make it much easier to farm R apps: rather than
> distributing all of R and necessary libraries onto each client, and
> making sure each client is always up to date as libraries for a
> specific script change, it might be easier just to distribute a
> simple executable across all nodes.

  Keeping a bunch of clients up to date is as easy as a quick scripted 
rsync command, or completely transparent if you have a shared /usr/local 
filesystem (Unix).

  There is some work going on to produce an R compiler, but I dont think 
these are the reasons.

Baz


From matthias.laabs at web.de  Mon Jul  4 18:29:59 2005
From: matthias.laabs at web.de (matthias.laabs@web.de)
Date: Mon,  4 Jul 2005 18:29:59 +0200 (CEST)
Subject: [Rd] segmentation fault after max level of parenthesis (PR#7990)
Message-ID: <20050704162959.6CF8FA272@slim.kubism.ku.dk>

Full_Name: Matthias Laabs
Version: 2.1.0 (source compiled)
OS: debian linux (sarge)
Submission from: (NULL) (195.143.236.2)


Hi!
R crashes with a segmentation fault when I use more than 85 parenthesis (it
actually happened by accidently hitting a wrong shortcut in emacs ... )

code:
 sum(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((()


cheers from Berlin,

Matthias


From ben.bob at gmail.com  Mon Jul  4 19:01:05 2005
From: ben.bob at gmail.com (Bo Peng)
Date: Mon, 4 Jul 2005 12:01:05 -0500
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
Message-ID: <6ea7b5430507041001273ae498@mail.gmail.com>

Dear list,

I have developed a forward-time population genetics simulation
environment simuPOP, which is a set of C++ (template)
classes/functions wrapped by SWIG as Python libraries. R is used
extensively as plotting and statistical analysis engine through RPy
package.

I use Python to wrap simuPOP since most the following can be easily
done using SWIG or Python C API. However, since Python is less used by
bioinformaticists and geneticists, I am asked again and again why I do
not wrap simuPOP with R (R is also OOP etc...). Although I am a long
time R user, I am not familiar with package writing in R. From what I
read from R website, it is easy to wrap individual C/C++ functions but
not C++ classes. Can anyone take the time to review the following and
tell me if they can be done (easily or need effort) using R? If most
of the answers are yes, it may be a good idea to switch to R.

* Wrap C++ class hierarchy. Virtual functions need to be supported.
(SWIG can generate Python shadow classes that behave almost exactly
like the underlying C++ classes)

* Be able to do this:
    evolve(ops=c(obj1, obj2, obj3))
  Internally, evolve will call virtual function fun() of obj1, obj2, .etc.
  obj1, obj2, ... are objects derived from the same base class. 

* Direct access to C++ data structure. For example, an object may keep
a C array internally. I will need a method (maybe wrap this data into
a R object) to read/write this array directly.

* create and read/write a R list at C++ level. (Need API for R/list read/write)

* pass a user defined R function to C++ function. Call it and obtain result.

* evaluate an R expression (passed as string) from within C++ function
and obtain result.

* pass C++ exceptions to R

* be able to use C++ features like template, STL.

* organize manual by objects, not functions. (I notice that manuals of
R libraries are simple function references.)


Many thanks in advance.

--
Bo Peng
Department of Statistics
Rice University
http://bp6.stat.rice.edu:8080/


From murdoch at stats.uwo.ca  Mon Jul  4 19:37:36 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 04 Jul 2005 13:37:36 -0400
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <6ea7b5430507041001273ae498@mail.gmail.com>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
Message-ID: <42C973E0.1020206@stats.uwo.ca>

On 7/4/2005 1:01 PM, Bo Peng wrote:
> Dear list,
> 
> I have developed a forward-time population genetics simulation
> environment simuPOP, which is a set of C++ (template)
> classes/functions wrapped by SWIG as Python libraries. R is used
> extensively as plotting and statistical analysis engine through RPy
> package.
> 
> I use Python to wrap simuPOP since most the following can be easily
> done using SWIG or Python C API. However, since Python is less used by
> bioinformaticists and geneticists, I am asked again and again why I do
> not wrap simuPOP with R (R is also OOP etc...). Although I am a long
> time R user, I am not familiar with package writing in R. From what I
> read from R website, it is easy to wrap individual C/C++ functions but
> not C++ classes. Can anyone take the time to review the following and
> tell me if they can be done (easily or need effort) using R? If most
> of the answers are yes, it may be a good idea to switch to R.
> 
> * Wrap C++ class hierarchy. Virtual functions need to be supported.
> (SWIG can generate Python shadow classes that behave almost exactly
> like the underlying C++ classes)

This is hard to do in R, because the R object model is quite different 
from that of C++ (whereas Python's is more similar).

> * Be able to do this:
>     evolve(ops=c(obj1, obj2, obj3))
>   Internally, evolve will call virtual function fun() of obj1, obj2, .etc.
>   obj1, obj2, ... are objects derived from the same base class. 

This wouldn't be hard, assuming that the 3 objects have classes, and 
there's a generic function fun() which owns methods supporting those 
classes.  (In R, objects don't have virtual functions, generic functions 
do.)

> * Direct access to C++ data structure. For example, an object may keep
> a C array internally. I will need a method (maybe wrap this data into
> a R object) to read/write this array directly.

That's not too hard provided you use C++ code to do the actual access. 
That is, you write an R function that calls C++ code to do the work. 
It's a lot harder if you want to keep it all in R, because it doesn't 
understand C++ type definitions, alignment conventions, etc.

> * create and read/write a R list at C++ level. (Need API for R/list read/write)

That's not too hard.  There are lots of examples in contributed 
libraries, and it's documented in the R Extensions manual.

> 
> * pass a user defined R function to C++ function. Call it and obtain result.

Ditto.

> 
> * evaluate an R expression (passed as string) from within C++ function
> and obtain result.

Ditto.
> 
> * pass C++ exceptions to R

That's hard, because R won't know what to do with them.  There are ways 
to turn C++ exceptions into R errors, but they are not well documented, 
and I suspect you'll need to do most of the work (i.e. have an exception 
handler that calls an internal R function).

> * be able to use C++ features like template, STL.

In your own C++ code?  If gcc supports them, it'll be easy.  If you need 
a special compiler, it'll be harder.

In R code?  Forget it.

> * organize manual by objects, not functions. (I notice that manuals of
> R libraries are simple function references.)

You can write a vignette organized any way you like.  The code that 
shows up in the printed manuals is just a collection of Rd man pages, 
organized more or less alphabetically.

> Many thanks in advance.
> 
> --
> Bo Peng
> Department of Statistics
> Rice University
> http://bp6.stat.rice.edu:8080/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From spencer.graves at pdf.com  Mon Jul  4 20:08:26 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Mon, 04 Jul 2005 11:08:26 -0700
Subject: [Rd] [R] How to convert "c:\a\b" to "c:/a/b"
In-Reply-To: <42C31B56.1070808@pdf.com>
References: <mailman.13.1119952801.1160.r-help@stat.math.ethz.ch>	<Pine.LNX.4.58.0506291257160.7756@orpheus.qimr.edu.au>
	<Pine.LNX.4.61.0506290732540.6049@gannet.stats>
	<42C31B56.1070808@pdf.com>
Message-ID: <42C97B1A.2030009@pdf.com>

ANOTHER EXAMPLE FOR "gsub"?

	  I would like to suggest that some version of Prof. Ripley's answer to 
my recent post to r-help (subject as above) be added to the "Examples" 
for "gsub":

## CAUTION:  XEmacs may hang on "readLines"
## unless submitted by itself
(x <- readLines(stdin(), n=1))
D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
(x <- gsub("\\\\", "/", x))

ANOTHER OPTION FOR "readLines"?

	  I don't know if this issue is sufficiently important to justify 
adding an argument to have "readLines" to change "\" to "/", but if so, 
it does not seem difficult:

readLines. <-
function (con = stdin(), n = -1, ok = TRUE,
           reverseBackSlash=FALSE)
{
     if (is.character(con)) {
         con <- file(con, "r")
         on.exit(close(con))
     }
     if(reverseBackSlash){
       dat <- .Internal(readLines(con, n, ok))
       return(gsub("\\\\", "/", dat))
     }
     .Internal(readLines(con, n, ok))
}

(x <- readLines.(stdin(), n=1, reverseBackSlash=TRUE))
D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt

	  This has been tested (in this one example) under XEmacs / ESS and 
Rgui for R 2.1.1 patched.

	  Thanks for your great support of the R project and through that 
making it much easier for people to learn and use improved statistical 
methods and to advance the science even further.

	  Best Wishes, 	
	  spencer graves

Spencer Graves wrote:

> Thank You, Prof. Ripley!
> 
>       Both "test1.R" and "test2.R" worked for me just now, as did the 
> following minor modification:
> 
> (x <- readLines(stdin(), n=1))
> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> 
>       Thanks again.
> 
>       spencer graves
> 
> Prof Brian Ripley wrote:
> 
>> On Wed, 29 Jun 2005, David Duffy wrote:
>>
>>
>>> I couldn't resist adding a more literal answer
>>
>>
>>
>> This can only work for escapes which are preserved.  The parser maps
>> \n to a character (LF) and the deparser maps it back to \n.
>> This happens to be true of \a \b \f \n \r \t \v \\ but no others.
>>
>> For example, \s is mapped to s, and there is no difference between \s and
>> s in the parsed input.
>>
>>
>>> unback <- function(x) {
>>> chars <- unlist(strsplit(deparse(x),""))
>>> chars <- chars[-c(1,length(chars))]
>>> paste(gsub("\\\\","/",chars),collapse="")
>>> }
>>>
>>> unback("\n")
>>
>>
>>
>>> unback("\s")
>>
>>
>> [1] "s"
>>
>> Spencer Graves keeps on insisting there is a better way, but all the
>> solutions are to avoid sending the string to the parser, and hence
>> avoiding having the string directly in an R script.  This is common in 
>> shell scripts, which use 'here' documents to avoid 'quoting hell'.
>>
>> We can do that in R too. Here are two variants I have not seen in the 
>> thread
>>
>> test1.R:
>> scan("", "", allowEscapes=FALSE, n=1, quiet=TRUE)
>> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
>> catIx, "\n", sep="")
>>
>> R --slave --vanilla < test1.R
>> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
>>
>> (This one does not allow quoted strings.)
>>
>> test2.R:
>> x <- readLines(stdin(), n=1)
>> "D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt"
>> x <- gsub('^"(.*)"$', "\\1", x)
>> cat(x, "\n")
>>
>> R --slave --vanilla < test2.R
>> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
>>
>> (This one allows surrounding quotes or not.)
>>
> 

-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From ggrothendieck at gmail.com  Mon Jul  4 20:46:32 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 4 Jul 2005 14:46:32 -0400
Subject: [Rd] [R] How to convert "c:\a\b" to "c:/a/b"
In-Reply-To: <42C97B1A.2030009@pdf.com>
References: <mailman.13.1119952801.1160.r-help@stat.math.ethz.ch>
	<Pine.LNX.4.58.0506291257160.7756@orpheus.qimr.edu.au>
	<Pine.LNX.4.61.0506290732540.6049@gannet.stats>
	<42C31B56.1070808@pdf.com> <42C97B1A.2030009@pdf.com>
Message-ID: <971536df050704114682756e8@mail.gmail.com>

The readLines example, as written, does not work in sourced files and therefore
will not work in the Examples section of .Rd pages either. 

Currently readLines does not process its input and I think it would
not be a good idea to change that philosophy.

On 7/4/05, Spencer Graves <spencer.graves at pdf.com> wrote:
> ANOTHER EXAMPLE FOR "gsub"?
> 
>          I would like to suggest that some version of Prof. Ripley's answer to
> my recent post to r-help (subject as above) be added to the "Examples"
> for "gsub":
> 
> ## CAUTION:  XEmacs may hang on "readLines"
> ## unless submitted by itself
> (x <- readLines(stdin(), n=1))
> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> (x <- gsub("\\\\", "/", x))
> 
> ANOTHER OPTION FOR "readLines"?
> 
>          I don't know if this issue is sufficiently important to justify
> adding an argument to have "readLines" to change "\" to "/", but if so,
> it does not seem difficult:
> 
> readLines. <-
> function (con = stdin(), n = -1, ok = TRUE,
>           reverseBackSlash=FALSE)
> {
>     if (is.character(con)) {
>         con <- file(con, "r")
>         on.exit(close(con))
>     }
>     if(reverseBackSlash){
>       dat <- .Internal(readLines(con, n, ok))
>       return(gsub("\\\\", "/", dat))
>     }
>     .Internal(readLines(con, n, ok))
> }
> 
> (x <- readLines.(stdin(), n=1, reverseBackSlash=TRUE))
> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> 
>          This has been tested (in this one example) under XEmacs / ESS and
> Rgui for R 2.1.1 patched.
> 
>          Thanks for your great support of the R project and through that
> making it much easier for people to learn and use improved statistical
> methods and to advance the science even further.
> 
>          Best Wishes,
>          spencer graves
> 
> Spencer Graves wrote:
> 
> > Thank You, Prof. Ripley!
> >
> >       Both "test1.R" and "test2.R" worked for me just now, as did the
> > following minor modification:
> >
> > (x <- readLines(stdin(), n=1))
> > D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> >
> >       Thanks again.
> >
> >       spencer graves
> >
> > Prof Brian Ripley wrote:
> >
> >> On Wed, 29 Jun 2005, David Duffy wrote:
> >>
> >>
> >>> I couldn't resist adding a more literal answer
> >>
> >>
> >>
> >> This can only work for escapes which are preserved.  The parser maps
> >> \n to a character (LF) and the deparser maps it back to \n.
> >> This happens to be true of \a \b \f \n \r \t \v \\ but no others.
> >>
> >> For example, \s is mapped to s, and there is no difference between \s and
> >> s in the parsed input.
> >>
> >>
> >>> unback <- function(x) {
> >>> chars <- unlist(strsplit(deparse(x),""))
> >>> chars <- chars[-c(1,length(chars))]
> >>> paste(gsub("\\\\","/",chars),collapse="")
> >>> }
> >>>
> >>> unback("\n")
> >>
> >>
> >>
> >>> unback("\s")
> >>
> >>
> >> [1] "s"
> >>
> >> Spencer Graves keeps on insisting there is a better way, but all the
> >> solutions are to avoid sending the string to the parser, and hence
> >> avoiding having the string directly in an R script.  This is common in
> >> shell scripts, which use 'here' documents to avoid 'quoting hell'.
> >>
> >> We can do that in R too. Here are two variants I have not seen in the
> >> thread
> >>
> >> test1.R:
> >> scan("", "", allowEscapes=FALSE, n=1, quiet=TRUE)
> >> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> >> catIx, "\n", sep="")
> >>
> >> R --slave --vanilla < test1.R
> >> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> >>
> >> (This one does not allow quoted strings.)
> >>
> >> test2.R:
> >> x <- readLines(stdin(), n=1)
> >> "D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt"
> >> x <- gsub('^"(.*)"$', "\\1", x)
> >> cat(x, "\n")
> >>
> >> R --slave --vanilla < test2.R
> >> D:\spencerg\dataPOWER\stats\Tukey\Boxplot_missing_Tukey2.txt
> >>
> >> (This one allows surrounding quotes or not.)
> >>
> >
> 
> --
> Spencer Graves, PhD
> Senior Development Engineer
> PDF Solutions, Inc.
> 333 West San Carlos Street Suite 700
> San Jose, CA 95110, USA
> 
> spencer.graves at pdf.com
> www.pdf.com <http://www.pdf.com>
> Tel:  408-938-4420
> Fax: 408-280-7915
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Mon Jul  4 21:47:52 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 4 Jul 2005 15:47:52 -0400
Subject: [Rd] installing packages and libraries
Message-ID: <971536df05070412473a72af31@mail.gmail.com>

When I run the following:

  cd \Rpkgs
  rcmd install mypackage -l library

I get a message that it cannot find quadprog which is a library
that mypackage depends on.  

   Error: package 'quadprog' could not be loaded

I previously used C:\Program Files\R\rw2011\library as my library for CRAN
packages and did not have a problem but now that I use 
C:\Program Files\R\library this problem has started.  

I actually can get it to work by doing either of the following:

1. install quadprog into \Program Files\R\rw2011path\library
   instead of in \Program Files\R\library, or

2. install mypackage into \Program Files\R\library via:

   rcmd install mypackage -l c:\PROGRA~1\R\library

However, I can't seem to install mypackage into \Rpkgs\library
like I want due to the error I showed above.  

I have \Program Files\R\rw2011pat\etc\Renviron.site set to my 
library list (its contents are just the single line shown here):

R_LIBS=C:/PROGRA~1/R/library;C:/Rpkgs/library

and normally that works fine, e.g. when doing install.packages
to install a CRAN package, but I assume that it is not being
read by the installation program.  I also tried setting R_LIBS, viz.

C:\Rpkgs>set R_LIBS
R_LIBS="C:\Program Files\R\library;C:\Rpkgs\library;C:\Program Files\R\rw2011pat
\library"

but that does not help.  In fact, if I do that I get this message:

list.files: 'C:/Program Files/R/rw2011pat/library"' is not a readable directory

even though that directory is valid as I double checked it.

I have looked at ?Startup and the Admin Manual and the Writing Extensions
Manual and maybe the answer is there but I have not found it.

Anyone know how to get mypackage to install into \Rpkgs\library ?

Thanks.


From tlumley at u.washington.edu  Mon Jul  4 21:52:00 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 4 Jul 2005 12:52:00 -0700 (PDT)
Subject: [Rd] segmentation fault after max level of parenthesis (PR#7990)
In-Reply-To: <20050704162959.6CF8FA272@slim.kubism.ku.dk>
References: <20050704162959.6CF8FA272@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.61b.0507041251460.296604@homer08.u.washington.edu>


Already fixed, I believe.

 	-thomas

On Mon, 4 Jul 2005 matthias.laabs at web.de wrote:

> Full_Name: Matthias Laabs
> Version: 2.1.0 (source compiled)
> OS: debian linux (sarge)
> Submission from: (NULL) (195.143.236.2)
>
>
> Hi!
> R crashes with a segmentation fault when I use more than 85 parenthesis (it
> actually happened by accidently hitting a wrong shortcut in emacs ... )
>
> code:
> sum(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((()
>
>
> cheers from Berlin,
>
> Matthias
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From ben.bob at gmail.com  Mon Jul  4 22:37:34 2005
From: ben.bob at gmail.com (Bo Peng)
Date: Mon, 4 Jul 2005 15:37:34 -0500
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <42C973E0.1020206@stats.uwo.ca>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
	<42C973E0.1020206@stats.uwo.ca>
Message-ID: <6ea7b543050704133720286db6@mail.gmail.com>

> > * Wrap C++ class hierarchy. Virtual functions need to be supported.
> > (SWIG can generate Python shadow classes that behave almost exactly
> > like the underlying C++ classes)
> 
> This is hard to do in R, because the R object model is quite different
> from that of C++ (whereas Python's is more similar).

I guess I will have to learn R OOP in detail first. It would be
terrible if I will have to re-write every C++ class in R (and without
inheritance)!

> > * Direct access to C++ data structure. For example, an object may keep
> > a C array internally. I will need a method (maybe wrap this data into
> > a R object) to read/write this array directly.
> 
> That's not too hard provided you use C++ code to do the actual access.
> That is, you write an R function that calls C++ code to do the work.
> It's a lot harder if you want to keep it all in R, because it doesn't
> understand C++ type definitions, alignment conventions, etc.

So this has to be done through functions. In Python, I can create an
object to wrap C array that can be accessed just like regular list. I
guess it would be difficult to create a new data type in R.

Anyway, where can I find the most complete information about
implementation of R/OOP at C/C++ level? (Or should I write classes in
R and call C++ functions for every member function?) I have not read
http://cran.r-project.org/doc/manuals/R-exts.pdf in detail but my
impression is that almost everything is done at a function (not
object) level using .C().

Thanks.
Bo


From dmbates at gmail.com  Mon Jul  4 23:08:35 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Mon, 4 Jul 2005 16:08:35 -0500
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <6ea7b543050704133720286db6@mail.gmail.com>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
	<42C973E0.1020206@stats.uwo.ca>
	<6ea7b543050704133720286db6@mail.gmail.com>
Message-ID: <40e66e0b0507041408203f314a@mail.gmail.com>

On 7/4/05, Bo Peng <ben.bob at gmail.com> wrote:
> > > * Wrap C++ class hierarchy. Virtual functions need to be supported.
> > > (SWIG can generate Python shadow classes that behave almost exactly
> > > like the underlying C++ classes)
> >
> > This is hard to do in R, because the R object model is quite different
> > from that of C++ (whereas Python's is more similar).
> 
> I guess I will have to learn R OOP in detail first. It would be
> terrible if I will have to re-write every C++ class in R (and without
> inheritance)!

What makes you think that there is no inheritance of classes in R?
 
> > > * Direct access to C++ data structure. For example, an object may keep
> > > a C array internally. I will need a method (maybe wrap this data into
> > > a R object) to read/write this array directly.
> >
> > That's not too hard provided you use C++ code to do the actual access.
> > That is, you write an R function that calls C++ code to do the work.
> > It's a lot harder if you want to keep it all in R, because it doesn't
> > understand C++ type definitions, alignment conventions, etc.
> 
> So this has to be done through functions. In Python, I can create an
> object to wrap C array that can be accessed just like regular list. I
> guess it would be difficult to create a new data type in R.
> 
> Anyway, where can I find the most complete information about
> implementation of R/OOP at C/C++ level? (Or should I write classes in
> R and call C++ functions for every member function?) I have not read
> http://cran.r-project.org/doc/manuals/R-exts.pdf in detail but my
> impression is that almost everything is done at a function (not
> object) level using .C().

Well the R object model is based on generic functions and methods are
functions.  The S4 class structure differs from the S3 structure in
that there is a formal definition of an S4 class but not for an S3
class.  However, even in S4, methods do not belong to a class. 
Methods are intermediate to classes and generic functions and are
associated with a signature for the arguments of the generic function.

If you want to be able to use S4 classes effectively you should use
the .Call interface to compiled code and not the .C interface.  If you
pass a classed object through the .Call interface to compiled code you
can extract or set the values of slots in the object through the
GET_SLOT and SET_SLOT macros.  Admittedly this is not as convenient
for the C++ programmer as being able to pass a pointer to an object
from a C++ class but it does make it easier to think of objects in R
and the corresponding objects in compiled code.  The Matrix package on
CRAN contains many examples of this use of this technique.

Another technique that you may want to consider is the use of
ExternalPointers.  If you examine the C source file lmer.c from the
aforementioned Matrix package you will see where I create a pointer to
a C struct in the compiled code and pass it back to R so it can later
be passed to the C code and I can extract the struct.  The same could
be done for an instance of a C++ class.


From ggrothendieck at gmail.com  Tue Jul  5 03:15:22 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 4 Jul 2005 21:15:22 -0400
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <6ea7b543050704133720286db6@mail.gmail.com>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
	<42C973E0.1020206@stats.uwo.ca>
	<6ea7b543050704133720286db6@mail.gmail.com>
Message-ID: <971536df05070418151d19179@mail.gmail.com>

On 7/4/05, Bo Peng <ben.bob at gmail.com> wrote:
> > > * Wrap C++ class hierarchy. Virtual functions need to be supported.
> > > (SWIG can generate Python shadow classes that behave almost exactly
> > > like the underlying C++ classes)
> >
> > This is hard to do in R, because the R object model is quite different
> > from that of C++ (whereas Python's is more similar).
> 
> I guess I will have to learn R OOP in detail first. It would be
> terrible if I will have to re-write every C++ class in R (and without
> inheritance)!
> 
> > > * Direct access to C++ data structure. For example, an object may keep
> > > a C array internally. I will need a method (maybe wrap this data into
> > > a R object) to read/write this array directly.
> >
> > That's not too hard provided you use C++ code to do the actual access.
> > That is, you write an R function that calls C++ code to do the work.
> > It's a lot harder if you want to keep it all in R, because it doesn't
> > understand C++ type definitions, alignment conventions, etc.
> 
> So this has to be done through functions. In Python, I can create an
> object to wrap C array that can be accessed just like regular list. I
> guess it would be difficult to create a new data type in R.
> 
> Anyway, where can I find the most complete information about
> implementation of R/OOP at C/C++ level? (Or should I write classes in
> R and call C++ functions for every member function?) I have not read
> http://cran.r-project.org/doc/manuals/R-exts.pdf in detail but my
> impression is that almost everything is done at a function (not
> object) level using .C().
> 

There are two OO models that come out-of-the-box with R namely S3 and S4.
They are inspired by the Dylan OO model.  Others have already mentioned 
these.  There are also two additional models on CRAN in the R.oo and 
proto packages which implement a more conventional class mode (R.oo) 
and the prototype model (proto).  R.oo has a web site (try google) and 
proto has a vignette, i.e. a paper accessible via library(proto);
vignette("proto").


From simon.urbanek at r-project.org  Tue Jul  5 04:48:48 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 4 Jul 2005 22:48:48 -0400
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <6ea7b5430507041001273ae498@mail.gmail.com>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
Message-ID: <475B5735-AE06-465D-8A9D-D16DBA52122C@r-project.org>

On Jul 4, 2005, at 1:01 PM, Bo Peng wrote:

> From what I read from R website, it is easy to wrap individual C/C+ 
> + functions but not C++ classes.

There was a couple of posts about this recently:

https://stat.ethz.ch/pipermail/r-devel/2005-April/subject.html

Look for the posts concerning C++, overloading methods and objects in  
R. If I remember correctly "Ali" had some prototype automatic wrapper  
for large classes (he wasn't happy about the performance, but that's  
another story ;) - see his 'speeding up the library' posts).

Cheers,
Simon


From ggrothendieck at gmail.com  Tue Jul  5 04:52:15 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 4 Jul 2005 22:52:15 -0400
Subject: [Rd] installing packages and libraries
In-Reply-To: <971536df05070412473a72af31@mail.gmail.com>
References: <971536df05070412473a72af31@mail.gmail.com>
Message-ID: <971536df05070419525e51a7c6@mail.gmail.com>

I figured it out.  There were quotes around the semicolon separated path.
When I removed them it worked.

On 7/4/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> When I run the following:
> 
>  cd \Rpkgs
>  rcmd install mypackage -l library
> 
> I get a message that it cannot find quadprog which is a library
> that mypackage depends on.
> 
>   Error: package 'quadprog' could not be loaded
> 
> I previously used C:\Program Files\R\rw2011\library as my library for CRAN
> packages and did not have a problem but now that I use
> C:\Program Files\R\library this problem has started.
> 
> I actually can get it to work by doing either of the following:
> 
> 1. install quadprog into \Program Files\R\rw2011path\library
>   instead of in \Program Files\R\library, or
> 
> 2. install mypackage into \Program Files\R\library via:
> 
>   rcmd install mypackage -l c:\PROGRA~1\R\library
> 
> However, I can't seem to install mypackage into \Rpkgs\library
> like I want due to the error I showed above.
> 
> I have \Program Files\R\rw2011pat\etc\Renviron.site set to my
> library list (its contents are just the single line shown here):
> 
> R_LIBS=C:/PROGRA~1/R/library;C:/Rpkgs/library
> 
> and normally that works fine, e.g. when doing install.packages
> to install a CRAN package, but I assume that it is not being
> read by the installation program.  I also tried setting R_LIBS, viz.
> 
> C:\Rpkgs>set R_LIBS
> R_LIBS="C:\Program Files\R\library;C:\Rpkgs\library;C:\Program Files\R\rw2011pat
> \library"
> 
> but that does not help.  In fact, if I do that I get this message:
> 
> list.files: 'C:/Program Files/R/rw2011pat/library"' is not a readable directory
> 
> even though that directory is valid as I double checked it.
> 
> I have looked at ?Startup and the Admin Manual and the Writing Extensions
> Manual and maybe the answer is there but I have not found it.
> 
> Anyone know how to get mypackage to install into \Rpkgs\library ?
> 
> Thanks.
>


From ben.bob at gmail.com  Tue Jul  5 05:22:02 2005
From: ben.bob at gmail.com (Bo Peng)
Date: Mon, 4 Jul 2005 22:22:02 -0500
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <20050704231340.GG24680@wald.ucdavis.edu>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
	<42C973E0.1020206@stats.uwo.ca>
	<20050704231340.GG24680@wald.ucdavis.edu>
Message-ID: <6ea7b543050704202243a94abb@mail.gmail.com>

> SWIG is a very nice idea. ...

SWIG is a wonderful tool that makes wrapping C++ code super-easy. I
can write pure C++ code and even test them by writing a main()
function. Then, using a simple interface file, all my  C++ classes
becomes Python (shadow) classes like magic. It will take much more
time to develop simuPOP if I had to modify interface files manually
for every change to the  C++ classes.

> I hope to have a prototype of a general mechanism for generating
> bindings  to other code for R sometime over the summer.
> It has been hatching for some time and it is primarily a matter of
> getting the time to implement the existing ideas.

Since you already know how to wrap C++ classes to R classes, maybe it
is a good idea to ask SWIG developers how to use SWIG to bridge them.
After all, SWIG has a mature set of tools to parse C++ code and
generate interfaces to more than a dozen scripting languages.

Personally, if I have to write interfaces manually for my 40+ classes
and a lot more functions, I would rather devote time in adding R
support for SWIG.

Thanks.
Bo


From ben.bob at gmail.com  Tue Jul  5 06:16:57 2005
From: ben.bob at gmail.com (Bo Peng)
Date: Mon, 4 Jul 2005 23:16:57 -0500
Subject: [Rd] How difficult is it to wrap a large C++ library with R?
In-Reply-To: <475B5735-AE06-465D-8A9D-D16DBA52122C@r-project.org>
References: <6ea7b5430507041001273ae498@mail.gmail.com>
	<475B5735-AE06-465D-8A9D-D16DBA52122C@r-project.org>
Message-ID: <6ea7b5430507042116344fbf7b@mail.gmail.com>

> There was a couple of posts about this recently:
> 
> https://stat.ethz.ch/pipermail/r-devel/2005-April/subject.html
> 

I am too new to this list to see these discussions. They are quite interesting!

Certainly I was not aware of the big differences between C++/Python
OOP and S3/S4 OOP. This explains why I skipped the OOP part of the red
S-Plus manual when I was learning S-Plus: I was not able to get the
ideas although I was an experienced C++ programmer. Regardless of the
question of 'which OOP is better', I certainly agree with Nathan's
opinion that R has lost many users/developers who only know C++/Python
OOP.

I think I would better continue to use Python to wrap my C++ code
(until Ali find a good way to automatically wrap C++ code, or SWIG
adds R support). It is simply much easier and more efficient.
Destructing my C++ classes into C pieces and reconstruct them in S4
way would be tedious, and the performance penalty will most possibly
be disastrous for this simulation environment.

Cheers,
Bo


From bxc at steno.dk  Tue Jul  5 09:59:07 2005
From: bxc at steno.dk (BXC (Bendix Carstensen))
Date: Tue, 5 Jul 2005 09:59:07 +0200
Subject: [Rd] Proposals
Message-ID: <40D3930AC1C8EA469E39536E5BC8083570224A@EXDKBA021.corp.novocorp.net>

We just launched the Epi-package for R.

It contains some functions which are not particular to epidemiology,
and which you may consider moving to base/stats/graphics.

They are:

nice()    - an extension for pretty() with some improved control for
            log-axes.
Relevel() - extension of relevel() allowing collapsing oflevels and
            arbitrary reshuffling of ordering
ncut()    - a cut function returning a numerical rather than factor
object.

If you take some of them over, I'll remove them from Epi, and make the
necessary changes should the names be changed.

As a quite separate matter, I often find myself doing:

AAnam <- [some named list]
AA <- array( NA, dim=sapply( AAnam, length ), dimnames=AAnam )

It would be a nice facility to have dim= default to
sapply( dimnames, length ) if dimnames were given as argument.
There really is no other reasonable value possible for dim if dimnames
are given.

Best,
Bendix
----------------------
Bendix Carstensen
Senior Statistician
Steno Diabetes Center
Niels Steensens Vej 2
DK-2820 Gentofte
Denmark
tel: +45 44 43 87 38
mob: +45 30 75 87 38
fax: +45 44 43 07 06
bxc at steno.dk
www.biostat.ku.dk/~bxc


From gilles.guillot at inapg.inra.fr  Tue Jul  5 13:12:48 2005
From: gilles.guillot at inapg.inra.fr (Gilles GUILLOT)
Date: Tue, 5 Jul 2005 13:12:48 +0200
Subject: [Rd] calling fortran functions CHOL and DPOTRF form Fortran
Message-ID: <200507051312.48997.gilles.guillot@inapg.inra.fr>

Hi all,

I'm working out some Fortran code for which 
I want to compute the Choleski decomposition of a covariance matrix
in Fortran.

I tried to do it by two methods :

1) Calling the lapack function DPOTRF.
I can see the source code and check that my call is correct,
but it does not compile with:
system("R CMD SHLIB ~/main.f")
dyn.load("~/main.so")

I get:
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library 
[...]
 undefined symbol: dpotrf_

Could anyone point out how to compile with such a call to lapack?

2) Calling the Fortran function CHOL
The previous combination of R CMD SHLIB  and dyn.load 
compiles fine but  I would like to see the source code of this function 
to check if my call is correct. I've not been able to find it in  the R source 
distribution.
Could anyone point the place of that file? 

Thanks in advance,

Gilles 


-- 
_________________________________________________________________________
Gilles GUILLOT

INRA -D?partement Math?matiques et Informatique Appliqu?es
Unit? Mixte de Recherche INRA - INAPG - ENGREF

Institut National Agronomique de Paris-Grignon
16, rue Claude Bernard
75231 Paris cedex 5 France

phone 33 1 44 08 18 42
fax   33 1 44 08 16 66
http://www.inapg.fr/ens_rech/mathinfo/personnel/guillot/welcome.html


From ligges at statistik.uni-dortmund.de  Tue Jul  5 15:48:18 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 05 Jul 2005 15:48:18 +0200
Subject: [Rd] axTicks on a reverse ylog plot (PR#7973)
In-Reply-To: <20050628005558.25EE2A27A@slim.kubism.ku.dk>
References: <20050628005558.25EE2A27A@slim.kubism.ku.dk>
Message-ID: <42CA8FA2.7010007@statistik.uni-dortmund.de>

mwtoews at sfu.ca wrote:
> There is still issues with the reversed y-log scale plot:
> 
> # Test case A: works as expected
> plot(10:100,log="y",ylim=c(100,11))
> grid()
> par("yaxp")
> 
> # Test case B: grid does not have horizontal lines; par("yaxp") is  
> different
> plot(1:100,log="y",ylim=c(100,10))
> grid()
> par("yaxp")
> 
> In the second test case, axTicks for the horizontal lines (in grid())  
> returns numeric(0) for spacing ... how do the tick marks get drawn in  
> the first place??

We had a problem with reversed log axis in R-2.1.0. There might be 
similar underlying code for grid() I was not aware of when suggesting a 
fix to make reversed log axis work for R-2.1.1 ...
I'll take a closer look later this week.

Uwe Ligges



> -mt
> 
> --please do not edit the information below--
> 
> Version:
> platform = powerpc-apple-darwin8.1.0
> arch = powerpc
> os = darwin8.1.0
> system = powerpc, darwin8.1.0
> status = Patched
> major = 2
> minor = 1.1
> year = 2005
> month = 06
> day = 26
> language = R
> 
> Locale:
> en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> Search Path:
> .GlobalEnv, package:methods, package:stats, package:graphics,  
> package:grDevices, package:utils, package:datasets, Autoloads,  
> package:base
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dmbates at gmail.com  Tue Jul  5 15:58:25 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Tue, 5 Jul 2005 08:58:25 -0500
Subject: [Rd] calling fortran functions CHOL and DPOTRF form Fortran
In-Reply-To: <200507051312.48997.gilles.guillot@inapg.inra.fr>
References: <200507051312.48997.gilles.guillot@inapg.inra.fr>
Message-ID: <40e66e0b05070506582d4702ec@mail.gmail.com>

On 7/5/05, Gilles GUILLOT <gilles.guillot at inapg.inra.fr> wrote:
> Hi all,
> 
> I'm working out some Fortran code for which
> I want to compute the Choleski decomposition of a covariance matrix
> in Fortran.
> 
> I tried to do it by two methods :
> 
> 1) Calling the lapack function DPOTRF.
> I can see the source code and check that my call is correct,
> but it does not compile with:
> system("R CMD SHLIB ~/main.f")
> dyn.load("~/main.so")
> 
> I get:
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> [...]
>  undefined symbol: dpotrf_
> 
> Could anyone point out how to compile with such a call to lapack?

Make a small package from your source code then follow the instructions in

http://tolstoy.newcastle.edu.au/R/devel/05/06/1382.html

> 
> 2) Calling the Fortran function CHOL
> The previous combination of R CMD SHLIB  and dyn.load
> compiles fine but  I would like to see the source code of this function
> to check if my call is correct. I've not been able to find it in  the R source
> distribution.
> Could anyone point the place of that file?

${RSRC}/src/appl/chol.f

> 
> Thanks in advance,
> 
> Gilles
> 
> 
> --
> _________________________________________________________________________
> Gilles GUILLOT
> 
> INRA -D?partement Math?matiques et Informatique Appliqu?es
> Unit? Mixte de Recherche INRA - INAPG - ENGREF
> 
> Institut National Agronomique de Paris-Grignon
> 16, rue Claude Bernard
> 75231 Paris cedex 5 France
> 
> phone 33 1 44 08 18 42
> fax   33 1 44 08 16 66
> http://www.inapg.fr/ens_rech/mathinfo/personnel/guillot/welcome.html
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From conrad.halling at bifx.org  Tue Jul  5 19:08:31 2005
From: conrad.halling at bifx.org (Conrad Halling)
Date: Tue, 05 Jul 2005 13:08:31 -0400
Subject: [Rd] prototypes for z_sin() and z_cos()
In-Reply-To: <93D4ABFE-69BD-4A20-B35F-19A0996FAF24@soc.soton.ac.uk>
References: <93D4ABFE-69BD-4A20-B35F-19A0996FAF24@soc.soton.ac.uk>
Message-ID: <42CABE8F.5000609@bifx.org>

Both z_cos() and z_sin() are defined as static functions in complex.c, 
so they don't appear in the header files.

It would be simple to copy the source code for both functions into your 
own code.

-- Conrad

Robin Hankin wrote:

>Hi
>
>I have been looking at complex.c and want to access z_cos() and z_sin 
>() from
>C in one of my packages.
>
>There doesn't seem to be a corresponding header file: there is no  
>complex.h file.
>
>Where are the prototypes of z_sin() and z_cos() for these functions?
>
>grepping didn't help me:
>
>                  find ~/downloads/R-2.1.1/  -name "*.h " | xargs  
>egrep "z_cos"
>
>returned empty.
>
>How do I access z_sin() from my c code?
>
>
>--
>Robin Hankin
>Uncertainty Analyst
>National Oceanography Centre, Southampton
>European Way, Southampton SO14 3ZH, UK
>  tel  023-8059-7743
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>
>  
>

-- 
Conrad Halling
conrad.halling at bifx.org


From murdoch at stats.uwo.ca  Tue Jul  5 19:22:17 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue,  5 Jul 2005 19:22:17 +0200 (CEST)
Subject: [Rd] lowess output looks wrong (PR#7891)
Message-ID: <20050705172217.13B4BAD65@slim.kubism.ku.dk>

Just noticed nobody has commented on this, so I took a look, and I can't 
see the problem (2.1.0 looks the same as 2.1.1 to me).  What is supposed 
to be wrong?

Duncan Murdoch

On 5/23/2005 2:35 PM, pelzc at ohsu.edu wrote:
> Full_Name: Carl Pelz
> Version: 2.1.0 & 2.0.1
> OS: Windows 2000
> Submission from: (NULL) (137.53.64.158)
> 
> 
> # Paste this all into an R session for a graphical demonstration of BUG...
> # I?ve found a bug in lowess in R versions 2.0.1 & 2.1.0 (Windows binary
> versions).
> # Running on Windows 2000 system.
> # Someone noticed a similar problem and reported it under ID 4459.
> 
> # Data to reproduce...
> R <- c(3.0, 3.5,  4.5,  5.0,  10.0)
> T <- R
> T <- 1.5*T + 0.1*(T^2)
> 
> # Bug in lowess (third y value is wrong in lowess output)...
> xin <- log2(R)
> yin <- log2(T)
> minVal <- min (xin, yin)
> maxVal <- max (xin, yin)
> plot (xin, yin, xlim=c(minVal, maxVal), ylim=c(minVal, maxVal))
> lines (lowess(xin, yin, f = 2/3, iter = 3))
> text(3.5, 2, "3rd lowess point is wrong.", col="red")
> text(3.5, 1.75, "Click for next graph.", col="red")
> locator (n=1, type="n")
> 
> # lowess OK...
> xin <- log2(R)
> yin <- log2(T)
> minVal <- min (xin, yin)
> maxVal <- max (xin, yin)
> plot (xin, yin, xlim=c(minVal, maxVal), ylim=c(minVal, maxVal))
> # f = 1/2
> lines (lowess(xin, yin, f = 1/2, iter = 3))
> text(3.5, 2, "OK with f = 1/2.", col="red")
> text(3.5, 1.75, "Click for next graph.", col="red")
> locator (n=1, type="n")
> 
> # lowess OK...
> xin <- log2(R)
> yin <- log2(T)
> minVal <- min (xin, yin)
> maxVal <- max (xin, yin)
> plot (xin, yin, xlim=c(minVal, maxVal), ylim=c(minVal, maxVal))
> # iter = 0
> lines (lowess(xin, yin, f = 2/3, iter = 0))
> text(3.5, 2, "OK with iter = 0.", col="red")
> text(3.5, 1.75, "Click for next graph.", col="red")
> locator (n=1, type="n")
> 
> # Bug in lowess (forth y value is wrong in lowess output)...
> xin <- log2(R)
> yin <- log2(T)
> # Change xin[3]
> xin[3] <- 2.2
> minVal <- min (xin, yin)
> maxVal <- max (xin, yin)
> plot (xin, yin, xlim=c(minVal, maxVal), ylim=c(minVal, maxVal))
> lines (lowess(xin, yin, f = 2/3, iter = 3))
> text(3.5, 2, "4th lowess point is wrong.", col="red")
> text(3.5, 1.75, "Done.", col="red")
> 
> ______________________________________________
> R-devel at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From w.northcott at unsw.edu.au  Wed Jul  6 02:07:02 2005
From: w.northcott at unsw.edu.au (Bill Northcott)
Date: Wed, 6 Jul 2005 10:07:02 +1000
Subject: [Rd] MacOS 10.4 gcc-4.0 and libcc_dynamic
In-Reply-To: <mailman.7.1120557600.7414.r-devel@r-project.org>
References: <mailman.7.1120557600.7414.r-devel@r-project.org>
Message-ID: <AD569AA7-FC12-4591-95E6-B069EDD93BDC@unsw.edu.au>

Around line 527 of configure.ac in R-2.1.1 appears the following:

   darwin*)
     ## MacOS 10.3 and 10.4 do
     AM_CONDITIONAL(BUILD_DLFCN_DARWIN, false)
     ## SI says we want '-lcc_dynamic' on Darwin, although currently
     ## http://developer.apple.com /documentation/MacOSX/ has nothing
     ## official.
     AC_CHECK_LIB(cc_dynamic, main)
     ;;
   *)
     AM_CONDITIONAL(BUILD_DLFCN_DARWIN, false)
     AC_CHECK_LIB(dl, dlopen)
     ;;

The purpose of this is to add -lcc_dynamic to the link options when  
linking Fortran code built with an FSF g77 with C libraries built  
with Apple's gcc-3.xx compilers.  (see http://www.astro.gla.ac.uk/ 
users/norman/note/2004/restFP/ for the full story.).

The fixed worked because /usr/lib/libcc_dynamic.dylib was a symlink  
to /usr/lib/gcc/powerpc-apple-darwin/$VERSION/libgcc.a.

I write 'was' because as of gcc-4.0 on Tiger (10.4) this has  
changed.  gcc-4.0 is the default compiler for Tiger, and it does not  
have the symlink.  This is for the very good reason that it would not  
work.  I have tried it.  If gcc_select is used to changed the default  
compiler, the symlink is created, but it is destroyed again if the  
default is set back to 4.0.

As far as I can see at this point, there are two ways to build R on  
MacOS X 10.4 Tiger:
1.  use gcc-3.3 with g77 and ensure that -lcc_dynamic is in the link  
options.
or
2. use gcc-4.0 with gfortran in which case -lcc_dynamic is not  
required and the configure.ac test above is redundant.

AFAIK gcc-4.0 cannot be used with g77.

Apple have been adding 'APPLE LOCAL' mods to gfortran and it can now  
be built from current Apple sources simply by adding f95 to the -- 
enable-languages on line 102 of the build_gcc script.  I suspect that  
in the not too distant future gfortran will become part of the Xcode  
packages.

Bill Northcott


From mbrmbr at acm.org  Wed Jul  6 04:06:35 2005
From: mbrmbr at acm.org (mbrmbr@acm.org)
Date: Wed,  6 Jul 2005 04:06:35 +0200 (CEST)
Subject: [Rd] download.file() yields incomplete files with method="internal"
	(PR#7991)
Message-ID: <20050706020635.8BDA6102C7@slim.kubism.ku.dk>

Summary:
When I use method="wget" with download.file(), I consistently get 
a download of the entire file. When I use method="internal", I 
infrequently get the entire file, but usually get only part of the file. This
behavior occurs with .cdf (a weather file format - basically binary)
from a UCAR site.

I am not sure this is a bug, since it could be some internet
inconsistency, or I may be doing something wrong, but given that wget
works and internal doesn't, it might be a bug.

Appended to this message is an example of the output from a download.file
using method="wget" and method="internal", including warnings. After that
are the warnings from looping 10 times using method="internal".

Thank you for your time.

Mark.
=================================================================
******* method="wget" ************
> s<-download.file("ftp://ftp.atd.ucar.edu/pub/archive/weather/foothills/flab.20050619.cdf",destfile="~/boulder/foothills-weather-data/flab.20050619.cdf",mode="wb",method="wget")

--14:10:57--  ftp://ftp.atd.ucar.edu/pub/archive/weather/foothills/flab.20050619.cdf
           => `/export/home/mbr/boulder/foothills-weather-data/flab.20050619.cdf'
Resolving ftp.atd.ucar.edu... 128.117.80.209
Connecting to ftp.atd.ucar.edu[128.117.80.209]:21... connected.
Logging in as anonymous ... Logged in!
==> SYST ... done.    ==> PWD ... done.
==> TYPE I ... done.  ==> CWD /pub/archive/weather/foothills ... done.
==> PASV ... done.    ==> RETR flab.20050619.cdf ... done.
Length: 16,940 (unauthoritative)

100%[====================================>] 16,940        48.51K/s             

14:10:58 (48.43 KB/s) - `/export/home/mbr/boulder/foothills-weather-data/flab.20050619.cdf' saved [16,940]

************** method="internal" ************************
> s<-download.file("ftp://ftp.atd.ucar.edu/pub/archive/weather/foothills/flab.20050619.cdf",destfile="~/boulder/foothills-weather-data/flab.20050619.cdf",mode="wb",method="internal")
trying URL 'ftp://ftp.atd.ucar.edu/pub/archive/weather/foothills/flab.20050619.cdf'
ftp data connection made, file length 16940 bytes
opened URL
==========================================
downloaded 14Kb

There were 33 warnings (use warnings() to see them)
> warnings()
Warning messages:
1: RxmlNanoFTPGetMore : read 82 [0 - 82]
2: 
<<<
220-----------------------------------------------------------------------------

--
3: RxmlNanoFTPGetMore : read 77 [82 - 159]
4: 
<<<
220-malbec.atd.ucar.edu: NCAR/ATD SE host, for official NCAR business only.
---

--
5: RxmlNanoFTPGetMore : read 512 [0 - 512]
6: 
<<<
220-
220-        ***        National Center for Atmospheric Research       ***
220-        ***           Atmospheric Technology Division             ***
220-
220-        ***   Use of this system for unauthorized purposes is a   ***
220-        ***   violation of federal law.  See Public Law 99-474.   ***
220-        ***   Any activity may be logged and monitored.  By       ***
220-        ***   using this system, you consent to such logging and  ***
220-        ***   monitoring.                     
--
7: RxmlNanoFTPGetMore : read 112 [0 - 112]
8: 
<<<
                    ***
220----------------------------------------------------------------------------
220 

--
9: 
---

--
10: Got 220
11: USER anonymous
12: RxmlNanoFTPGetMore : read 23 [0 - 23]
13: 
<<<
230 Login successful.

--
14: 
---

--
15: Got 230
16: RxmlNanoFTPGetMore : read 51 [0 - 51]
17: 
<<<
227 Entering Passive Mode (128,117,80,209,192,27)

--
18: 
---

--
19: Got 227
20: RxmlNanoFTPGetMore : read 31 [0 - 31]
21: 
<<<
200 Switching to Binary mode.

--
22: 
---

--
23: Got 200
24: RxmlNanoFTPGetMore : read 109 [0 - 109]
25: 
<<<
150 Opening BINARY mode data connection for /pub/archive/weather/foothills/flab.20050619.cdf (16940 bytes).

--
26: 
---

--
27: Got 150
28: RxmlNanoFTPGetMore : read 19 [0 - 19]
29: 
<<<
226 File send OK.

--
30: 
---

--
31: Got 226
32: QUIT
33: downloaded length 14480 != reported length 16940

************** method="internal" 10 times ************************
> options(internet.info=2)
> for (i in 1:10) {
s<-download.file("ftp://ftp.atd.ucar.edu/pub/archive/weather/foothills/flab.20050619.cdf",destfile="~/boulder/foothills-weather-data/flab.20050619.cdf",mode="wb",method="internal")
print(s)
}

[verbose output removed]
Warning messages:
1: downloaded length 13032 != reported length 16940 
2: downloaded length 13032 != reported length 16940 
3: downloaded length 11584 != reported length 16940 
4: downloaded length 13032 != reported length 16940 
5: downloaded length 11584 != reported length 16940 
6: downloaded length 8688 != reported length 16940 
7: downloaded length 14480 != reported length 16940 
8: downloaded length 13032 != reported length 16940 
9: downloaded length 13032 != reported length 16940 
10: downloaded length 13032 != reported length 16940 

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    2                
minor    1.1              
year     2005             
month    06               
day      20               
language R                
>


From tyler.smith at mail.mcgill.ca  Wed Jul  6 05:48:01 2005
From: tyler.smith at mail.mcgill.ca (Tyler Smith)
Date: Tue, 05 Jul 2005 23:48:01 -0400
Subject: [Rd] dyn.load in linux: missing libraries?
Message-ID: <42CB5471.5040506@mail.mcgill.ca>

Hi,

I've just about got myself transferred from windowsXP to Linux (Mepis 
3.3.1-1). I've got R 2.1.1, emacs, and ess running from the debian 
repositories. Of course, there is a hitch. I have a bit of C code in one 
of my personal functions. I have, apparently without problem, been able 
to compile it using R CMD SHLIB, but when I try to dyn.load it I get the 
following error:

 > dyn.load("Cfiles/Neutral/Bell2000.dll")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
    unable to load shared library 
'/home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll':
  /home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll: invalid ELF 
header

I take this to mean one of the required libraries is either not loaded 
or not updated. Or, I've overlooked something. Can anyone point me to a 
solution? I tried updating my perl files, and I haven't found anything 
using the R Site Search...

Thanks,

Tyler


From ellis at stat.harvard.edu  Wed Jul  6 08:03:54 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Tue, 5 Jul 2005 23:03:54 -0700
Subject: [Rd] Compiling R scripts
In-Reply-To: <BDF571786CAD224F966FEB86BEDED52F1433DF91@elon12p32001.csfp.co.uk>
References: <BDF571786CAD224F966FEB86BEDED52F1433DF91@elon12p32001.csfp.co.uk>
Message-ID: <2DCDDA61-41EB-4E8B-8982-5ECEA1FA41C9@stat.harvard.edu>


On Jul 4, 2005, at 6:31 AM, Uzuner, Tolga wrote:

> Dear R Developers,
>
> A recommendation for future development.
>
> It would help if R scripts could be compiled into an executable, or  
> a library. Speed is the main issue (I run a large scale monte carlo  
> in R which is very slow). However, it would also make it easier to  
> link R into other applications, easier at least than the COM  
> infrastructure under Windows.
>

1. Easier said than done. Much much easier said than done.
2. Move the bottleneck bits to C. Alternatively, I've found that for  
MCMC at least, employing R's lexical scoping features and using  
sapply to do the iteration can vastly improve performance (as well as  
improving your code's readability). If you're doing pure monte carlo  
the lexical scoping may not be of much help, but using something like  
sapply often helps. R is not C/C++/Java/Fortran and should not be  
programmed as such.
3. Look at the RDCOM stuff at www.omegahat.org.


> Finally, it would make it much easier to farm R apps: rather than  
> distributing all of R and necessary libraries onto each client, and  
> making sure each client is always up to date as libraries for a  
> specific script change, it might be easier just to distribute a  
> simple executable across all nodes.

Put all of that into an R package and then put the package into a  
local library location (i.e. one in your home directory). Unless  
something is odd, your home directory should be distributed to all  
nodes. Unless you're running a Windows cluster, at which point I have  
to ask... why?

>
> Regards,
> Tolga
>
>
> ====================================================================== 
> ========
> Please access the attached hyperlink for an important electronic  
> communications disclaimer:
>
> http://www.csfb.com/legal_terms/disclaimer_external_email.shtml
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From p.dalgaard at biostat.ku.dk  Wed Jul  6 09:37:18 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 06 Jul 2005 09:37:18 +0200
Subject: [Rd] dyn.load in linux: missing libraries?
In-Reply-To: <42CB5471.5040506@mail.mcgill.ca>
References: <42CB5471.5040506@mail.mcgill.ca>
Message-ID: <x2pstw75ch.fsf@turmalin.kubism.ku.dk>

Tyler Smith <tyler.smith at mail.mcgill.ca> writes:

> Hi,
> 
> I've just about got myself transferred from windowsXP to Linux (Mepis 
> 3.3.1-1). I've got R 2.1.1, emacs, and ess running from the debian 
> repositories. Of course, there is a hitch. I have a bit of C code in one 
> of my personal functions. I have, apparently without problem, been able 
> to compile it using R CMD SHLIB, but when I try to dyn.load it I get the 
> following error:
> 
>  > dyn.load("Cfiles/Neutral/Bell2000.dll")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>     unable to load shared library 
> '/home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll':
>   /home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll: invalid ELF 
> header
> 
> I take this to mean one of the required libraries is either not loaded 
> or not updated. Or, I've overlooked something. Can anyone point me to a 
> solution? I tried updating my perl files, and I haven't found anything 
> using the R Site Search...

Nope, the missing library is the one that you're trying to load.
Dynamic libraries are not called .dll on Linux, but rather .so...

You should probably read up on "Writing R Extensions", including the
hints on how to write portable code (use library.dynam).

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ggrothendieck at gmail.com  Wed Jul  6 14:24:49 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 6 Jul 2005 08:24:49 -0400
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <971536df050630152014c8f70@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
Message-ID: <971536df05070605244d022d9e@mail.gmail.com>

On 6/30/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> > Gabor Grothendieck wrote:
> > > On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> > >
> > ...
> >
> > >> I keep a separate directory ...\R\library for nonstandard packages,
> > >> with environment variable R_LIBS set to the directory name.
> > >
> > >
> > > Do you mean your R_LIBS has two components: one to look in
> > > ..\R\rcurrent\library and a second to look in ..\R\library? What does
> > > it look like exactly?
> > >
> > > When you do install.packages(whatever) does it install to the
> > > ..\R\library rather than ..\R\rcurrent\library ?   Also, does
> > > updates.packages() work as expected for you?
> > >
> > My R_LIBS environment variable is just
> >
> >   R_LIBS=C:\progs\r\library
> >
> > and within R I see
> >
> >   > .libPaths()
> >   [1] "C:/progs/r/library"          "C:/progs/r/rcurrent/library"
> >
> > i.e., the default library is automatically appended.  The help for
> > .libPaths explains this.  And yes, install.packages() installs to
> > C:\progs\R\library and update.packages() works as expected.
> >
> > >
> > >>My miktex.ini file specifies ...\R\rcurrent\share\texmf as a place
> > >>to look for input files.
> > >
> > >
> > > I think its necessary to rebuild the name data base in miktex too
> > >     initexmf -u
> > > although ignoring that step may work as long as the filenames
> > > have not changed.
> >
> > You are probably correct, though I have not yet encountered any problems
> > that I could attribute to not running initexmf -- no doubt the filenames
> > have not changed recently.
> >
> > > I was hoping to continue using a vanilla
> > > miktex installation as I do now rather than having a custom miktex.ini
> > > file.  At any rate my batch file would continue to work even with your setup
> > > so I think I should be ok here.
> > >
> > >
> > >>That should take care of your points 3, 4, and 2, respectively.
> > >>Duncan's suggestion of an R_ENVIRON environment variable (which
> > >>I didn't know about; thanks, Duncan) should take care of point 1.
> > >>
> > >>Jon Hosking
> > >
> > >
> > > It occurs to me in reading this that I could keep the *.site files in
> > > ..\R and then have my miktex update batch file also copy them
> > > to the appropriate etc folder.  Thus keeping an R\library folder
> > > and running the batch file after each new installation would
> > > address 1, 2 and 4 even without using the same name for the
> > > rw... folder.  This still does not handle the shortcut key which
> > > I would have to handle manually or determine if there is a way
> > > I could also add that to my batch file.
> > >
> 
> Thanks. I think I have it now.  I have:
> 
> - placed my *.site files and library folder in C:\Program Files\R
>  and have set the R_LIBS variable in Renviron.site to point to
>  C:\Program Files\R\library .
> 
> - I have a batch file which I placed on my desktop which runs rgui.exe
>  from the bin subfolder of the current version of R (using the registry
>  entry to find it).  That desktop shortcut has the Alt+Ctrl+R shortcut
>  key associated with it since the batch file itself does not change even
>  when I install new versions of R.
> 
> - each time I install a new version of R I run a batch file which
>  -- copies the R miktex files to the appropriate miktex folder
>  -- refreshes the miktex file name data base
>  -- copies the *.site files in \Program Files\R to the etc subfolder
>     of the current version of R (using the registry entry to find it)
> 
> Getting this right is something I have been putting off for some time
> now since I was very concerned that I screw up my entire R installation
> but with the advice of the two of you I think I have it now.
> If any of this functionality could be taken over by the standard
> R installation procedure that would be great but in any case I think
> I have a solution that works for me now.  Thanks.
> 

I have cleaned up my batch files (somewhat) and posted them to 
CRAN. See my recent post:
   https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html

If any of this functionality could migrate to R itself that would be great.

1. In particular, if R could automatically look in ../R for *.site files if it
can't find them in .../R/rw..../etc and if it could look for a library
in .../R/library then Rrefresh.bat could be simplified to just refreshing
MiKTeX and makepkg.bat would not have to set the R_LIBS variable.

2. Also if Rcmd CHECK and Rcmd INSTALL were to process .Rbuildignore
like Rcmd BUILD does then makepkg.bat would not have to do a build first.


From tyler.smith at mail.mcgill.ca  Wed Jul  6 14:57:35 2005
From: tyler.smith at mail.mcgill.ca (Tyler Smith)
Date: Wed, 06 Jul 2005 08:57:35 -0400
Subject: [Rd] dyn.load in linux: missing libraries?
In-Reply-To: <x2pstw75ch.fsf@turmalin.kubism.ku.dk>
References: <42CB5471.5040506@mail.mcgill.ca>
	<x2pstw75ch.fsf@turmalin.kubism.ku.dk>
Message-ID: <42CBD53F.8000209@mail.mcgill.ca>

ah, that's better. For an immediate fix I just changed .dll to .so, and 
it appears to work perfectly. I will read through Writing R Extensions 
to make sure I understand what I'm doing!

Thanks!

Tyler

Peter Dalgaard wrote:

>Tyler Smith <tyler.smith at mail.mcgill.ca> writes:
>
>  
>
>>Hi,
>>
>>I've just about got myself transferred from windowsXP to Linux (Mepis 
>>3.3.1-1). I've got R 2.1.1, emacs, and ess running from the debian 
>>repositories. Of course, there is a hitch. I have a bit of C code in one 
>>of my personal functions. I have, apparently without problem, been able 
>>to compile it using R CMD SHLIB, but when I try to dyn.load it I get the 
>>following error:
>>
>> > dyn.load("Cfiles/Neutral/Bell2000.dll")
>>Error in dyn.load(x, as.logical(local), as.logical(now)) :
>>    unable to load shared library 
>>'/home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll':
>>  /home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll: invalid ELF 
>>header
>>
>>I take this to mean one of the required libraries is either not loaded 
>>or not updated. Or, I've overlooked something. Can anyone point me to a 
>>solution? I tried updating my perl files, and I haven't found anything 
>>using the R Site Search...
>>    
>>
>
>Nope, the missing library is the one that you're trying to load.
>Dynamic libraries are not called .dll on Linux, but rather .so...
>
>You should probably read up on "Writing R Extensions", including the
>hints on how to write portable code (use library.dynam).
>
>  
>


From maechler at stat.math.ethz.ch  Wed Jul  6 15:12:11 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 6 Jul 2005 15:12:11 +0200
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS) installation
	..}
In-Reply-To: <971536df05070605244d022d9e@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
Message-ID: <17099.55467.732587.886792@stat.math.ethz.ch>

>>>>> "Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>     on Wed, 6 Jul 2005 08:24:49 -0400 writes:

  .......................
  .......................

    Gabor> I have cleaned up my batch files (somewhat) and posted them to 
    Gabor> CRAN. See my recent post:
    Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html

    Gabor> If any of this functionality could migrate to R
    Gabor> itself that would be great.

    ........


    Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
    Gabor> process .Rbuildignore like Rcmd BUILD does then
    Gabor> makepkg.bat would not have to do a build first.

No!  {We have been here before, and I had explained before that}
this is really undesired:  ".Rbuildignore" should contain what is
ignored by build, but not by "check".
It does make sense to have extra code and / or checks for 'R CMD check'
that I as package developer want to run, but that are
  -- too time consuming
  -- too platform specific
  -- ......
to be run during the daily checks on CRAN (e.g.) /
to be run by others at all.

{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
 of "R CMD" since the latter is portable }

--
Martin


From ggrothendieck at gmail.com  Wed Jul  6 16:08:45 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 6 Jul 2005 10:08:45 -0400
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
	installation ..}
In-Reply-To: <17099.55467.732587.886792@stat.math.ethz.ch>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<17099.55467.732587.886792@stat.math.ethz.ch>
Message-ID: <971536df05070607087c72249f@mail.gmail.com>

On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> >>>>> "Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
> >>>>>     on Wed, 6 Jul 2005 08:24:49 -0400 writes:
> 
>  .......................
>  .......................
> 
>    Gabor> I have cleaned up my batch files (somewhat) and posted them to
>    Gabor> CRAN. See my recent post:
>    Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
> 
>    Gabor> If any of this functionality could migrate to R
>    Gabor> itself that would be great.
> 
>    ........
> 
> 
>    Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
>    Gabor> process .Rbuildignore like Rcmd BUILD does then
>    Gabor> makepkg.bat would not have to do a build first.
> 
> No!  {We have been here before, and I had explained before that}
> this is really undesired:  ".Rbuildignore" should contain what is
> ignored by build, but not by "check".
> It does make sense to have extra code and / or checks for 'R CMD check'
> that I as package developer want to run, but that are
>  -- too time consuming
>  -- too platform specific
>  -- ......
> to be run during the daily checks on CRAN (e.g.) /
> to be run by others at all.
> 
> {And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
>  of "R CMD" since the latter is portable }
> 
> --
> Martin
> 


I think its too heavy handed an approach.  This should be up to the package
developer via a switch.  I like to put partially written code and other things
not intended for distribution in .Rbuildignore and don't want them checked or
installed until I move them out of .Rbuildignore.  That makes it
possible to keep
everything together.  Without this one must 1. keep them elsewhere
(which I am considering as an alternate approach to what I do now although 
it would be a shame) or else 2. write batch files (which I have
written for XP) to do
a prebuild every time one does a check or install.  

One annoying aspect of R CMD is the requirement for capitalization.  Maybe
that's ok on UNIX but on Windows one is used to using upper and lower
case interchangeably.  Its also annoying to have to write two words instead of
one for a frequently issued command.   At any rate I always call it through
my Rcmd.bat batch file so its not really an issue for me.


From Torsten.Hothorn at rzmail.uni-erlangen.de  Wed Jul  6 20:10:28 2005
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 6 Jul 2005 20:10:28 +0200 (CEST)
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
	installation..}
In-Reply-To: <971536df05070607087c72249f@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<17099.55467.732587.886792@stat.math.ethz.ch>
	<971536df05070607087c72249f@mail.gmail.com>
Message-ID: <Pine.LNX.4.51.0507062005170.27957@artemis.imbe.med.uni-erlangen.de>


> >
> > No!  {We have been here before, and I had explained before that}
> > this is really undesired:  ".Rbuildignore" should contain what is
> > ignored by build, but not by "check".
> > It does make sense to have extra code and / or checks for 'R CMD check'
> > that I as package developer want to run, but that are
> >  -- too time consuming
> >  -- too platform specific
> >  -- ......
> > to be run during the daily checks on CRAN (e.g.) /
> > to be run by others at all.
> >
> > {And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
> >  of "R CMD" since the latter is portable }
> >
> > --
> > Martin
> >
>
>
> I think its too heavy handed an approach. This should be up to the package
> developer via a switch.

I usually have something like

.onLoad <- function(lib, pkg) {
    ...
    GCtorture <<- TRUE
    ...
    return(TRUE)
}

in packages and simply

gctorture(on = GCtorture)

in all regression tests which allows me to switch between time consuming
tests and ordinary regression tests easily.

Torsten

> I like to put partially written code and other things
> not intended for distribution in .Rbuildignore and don't want them checked or
> installed until I move them out of .Rbuildignore.  That makes it
> possible to keep
> everything together.  Without this one must 1. keep them elsewhere
> (which I am considering as an alternate approach to what I do now although
> it would be a shame) or else 2. write batch files (which I have
> written for XP) to do
> a prebuild every time one does a check or install.
>
> One annoying aspect of R CMD is the requirement for capitalization.  Maybe
> that's ok on UNIX but on Windows one is used to using upper and lower
> case interchangeably.  Its also annoying to have to write two words instead of
> one for a frequently issued command.   At any rate I always call it through
> my Rcmd.bat batch file so its not really an issue for me.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From gavin.simpson at ucl.ac.uk  Wed Jul  6 20:54:49 2005
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Wed, 06 Jul 2005 19:54:49 +0100
Subject: [Rd] More efficient code?
Message-ID: <1120676089.6814.18.camel@gsimpson.geog.ucl.ac.uk>

Dear List,

I have some code (as part of a larger package I intend to submit to
CRAN) that implements a permutation test of a method known as Co-
correspondence Analysis [1]. The code has to perform n permutations
(default n = 99) for each axis of the method. In the example below,
there are 29 axes that need testing, so c. 2800 permutations. The code
uses a number of calls to LA.svd() and "%*%". The particular function
that is called once per permutation is:

coinertiaI <- function(X, Y)
  {
    A <- t(X) %*% Y
    svdA <- La.svd(A)
    Ksi <- X %*% svdA$u
    Psi <- Y %*% t(svdA$vt)
    L <- diag(svdA$d)^2
    retval <- list(weights = list(X = svdA$u, Y = t(svdA$vt)),
                   scores = list(X = Ksi, Y = Psi),
                   lambda = L, call = match.call())
    class(retval) <- c("coinertiaI", "coinertia")
    return(retval)
  }

On my P4 3GHz, 2GB RAM desktop the following problem takes c. 80 seconds
to complete with 99 permutations for each of 29 axis:

beetles <-  read.csv(url
("http://ecrc3.geog.ucl.ac.uk/download/cocorresp/beetles.csv"),
                     strip.white = TRUE, row.names = 1)
beetles <- log(beetles + 1)
plants <- read.csv(url
("http://ecrc3.geog.ucl.ac.uk/download/cocorresp/plants.csv"),
                   strip.white = TRUE, row.names = 1)
source(url
("http://ecrc3.geog.ucl.ac.uk/download/cocorresp/cocorresp.R"))
beetlesPlants.pred <- predcoca(beetles, plants)
# slow!!!!
system.time(beetlesPlants.perm <- predcoca.perm(beetlesPlants.pred),
TRUE)

I would like to speed up this function if feasible given that I
currently know almost zero C and Fortran. I am willing to invest the
time to learn and if it would make a substantial difference to the
timings for this example then this may the be the right time (and
project) to begin that education.

I have profiled the timed task above (results abbreviated below)
If the full Rprof.out file helps then I have placed this here:
http://ecrc3.geog.ucl.ac.uk/download/cocorresp/Rprof.out

...Which to my naive eye would suggest that a large % of the time is
spent calling compiled code - setting up the calls. As such, if I want
to make any decent speed improvements I would have to look into moving
the functions coinertiaI() and teststat() to C or Fortran (teststat()
can be viewed in the file I source above if needed).

Is this interpretation correct?

If anyone is brave enough to take a look at the sourced file (see above)
and suggest how I might improve my code I would, of course be extremely
grateful - but that is not my motivation for posting. I would be more
than happy to have my interpretation of the profiling results confirmed
or corrected.

Many thanks in advance,

Gav

Ref [1] C.J. ter Braak and A.P. Schaffers (2004) Cocorrespondence
Analysis: a new ordination method to relate two community compositions.
Ecology 85(3), 834-846.

summaryRprof(filename = "Rprof.out")
$by.self
                     self.time self.pct total.time total.pct
".Call"                  50.40     59.6      50.40      59.6
"%*%"                    10.50     12.4      10.50      12.4
".Fortran"                2.78      3.3       2.78       3.3
"La.svd"                  2.52      3.0      57.98      68.6
"^"                       2.48      2.9       2.48       2.9
"t.default"               2.30      2.7       2.30       2.7
"matrix"                  1.92      2.3       1.98       2.3
"as.double"               1.78      2.1       2.70       3.2
"list"                    0.88      1.0       0.88       1.0
"as.double.default"       0.86      1.0       0.86       1.0
"rep.default"             0.74      0.9       0.86       1.0
"sum"                     0.72      0.9       2.58       3.1
"!"                       0.50      0.6       0.50       0.6
"diag"                    0.44      0.5       1.46       1.7
"qr.coef"                 0.42      0.5       6.26       7.4
"permtest"                0.38      0.4      83.60      98.9
"is.finite"               0.38      0.4       0.38       0.4
"storage.mode<-"          0.36      0.4       3.26       3.9
"as.integer"              0.34      0.4       0.40       0.5
"t"                       0.32      0.4       2.62       3.1
"$"                       0.32      0.4       0.32       0.4
"paste"                   0.28      0.3       0.54       0.6
"teststat"                0.24      0.3      83.10      98.3
"residualMatrix"          0.22      0.3      10.32      12.2
"qr"                      0.20      0.2       1.24       1.5
...

$by.total
                     total.time total.pct self.time self.pct
"predcoca.perm"           84.50     100.0      0.00      0.0
"permtest"                83.60      98.9      0.38      0.4
"teststat"                83.10      98.3      0.24      0.3
"coinertiaI"              73.24      86.7      0.18      0.2
"La.svd"                  57.98      68.6      2.52      3.0
".Call"                   50.40      59.6     50.40     59.6
"%*%"                     10.50      12.4     10.50     12.4
"residualMatrix"          10.32      12.2      0.22      0.3
"qr.coef"                  6.26       7.4      0.42      0.5
"storage.mode<-"           3.26       3.9      0.36      0.4
".Fortran"                 2.78       3.3      2.78      3.3
"as.double"                2.70       3.2      1.78      2.1
"t"                        2.62       3.1      0.32      0.4
"eval"                     2.62       3.1      0.14      0.2
"sum"                      2.58       3.1      0.72      0.9
...

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
Gavin Simpson                     [T] +44 (0)20 7679 5522
ENSIS Research Fellow             [F] +44 (0)20 7679 7565
ENSIS Ltd. & ECRC                 [E] gavin.simpsonATNOSPAMucl.ac.uk
UCL Department of Geography       [W] http://www.ucl.ac.uk/~ucfagls/cv/
26 Bedford Way                    [W] http://www.ucl.ac.uk/~ucfagls/
London.  WC1H 0AP.
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From ligges at statistik.uni-dortmund.de  Wed Jul  6 22:33:49 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 06 Jul 2005 22:33:49 +0200
Subject: [Rd] .Rbuildignore {was: ... upgrading an R
 (WINDOWS)	installation ..}
In-Reply-To: <971536df05070607087c72249f@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>	<da15bn$1r5$1@sea.gmane.org>	<971536df05063012166bfa590b@mail.gmail.com>	<da1jlv$et5$1@sea.gmane.org>	<971536df050630152014c8f70@mail.gmail.com>	<971536df05070605244d022d9e@mail.gmail.com>	<17099.55467.732587.886792@stat.math.ethz.ch>
	<971536df05070607087c72249f@mail.gmail.com>
Message-ID: <42CC402D.5010307@statistik.uni-dortmund.de>

Gabor Grothendieck wrote:

> On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> 
>>>>>>>"Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>>>    on Wed, 6 Jul 2005 08:24:49 -0400 writes:
>>
>> .......................
>> .......................
>>
>>   Gabor> I have cleaned up my batch files (somewhat) and posted them to
>>   Gabor> CRAN. See my recent post:
>>   Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
>>
>>   Gabor> If any of this functionality could migrate to R
>>   Gabor> itself that would be great.
>>
>>   ........
>>
>>
>>   Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
>>   Gabor> process .Rbuildignore like Rcmd BUILD does then
>>   Gabor> makepkg.bat would not have to do a build first.
>>
>>No!  {We have been here before, and I had explained before that}
>>this is really undesired:  ".Rbuildignore" should contain what is
>>ignored by build, but not by "check".
>>It does make sense to have extra code and / or checks for 'R CMD check'
>>that I as package developer want to run, but that are
>> -- too time consuming
>> -- too platform specific
>> -- ......
>>to be run during the daily checks on CRAN (e.g.) /
>>to be run by others at all.
>>
>>{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
>> of "R CMD" since the latter is portable }
>>
>>--
>>Martin
>>
> 
> 
> I think its too heavy handed an approach.  This should be up to the package
> developer via a switch.  I like to put partially written code and other things
> not intended for distribution in .Rbuildignore and don't want them checked or
> installed until I move them out of .Rbuildignore.  That makes it
> possible to keep
> everything together.  Without this one must 1. keep them elsewhere
> (which I am considering as an alternate approach to what I do now although 
> it would be a shame) or else 2. write batch files (which I have
> written for XP) to do
> a prebuild every time one does a check or install.  
> 
> One annoying aspect of R CMD is the requirement for capitalization.  Maybe
> that's ok on UNIX but on Windows one is used to using upper and lower
> case interchangeably.  Its also annoying to have to write two words instead of
> one for a frequently issued command.   At any rate I always call it through

Gabor, honestly, this is nonsense.

1. Do you expect that R also changes under Windows because you are used 
to mix upper and lower case and want to say SUMMARY() or rowsums()?
2. Do you really thing it is annoying to type "R CMD" rather than 
"Rcmd"? Hmm, anybody else has a space bar left for Gabor?

Best,
Uwe

> my Rcmd.bat batch file so its not really an issue for me.
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From marie-helene.ouellette at UMontreal.CA  Wed Jul  6 22:42:01 2005
From: marie-helene.ouellette at UMontreal.CA (=?iso-8859-1?b?TWFyaWUtSOls6G5l?= Ouellette)
Date: Wed,  6 Jul 2005 16:42:01 -0400
Subject: [Rd] R_alloc problems in R v1.11
Message-ID: <1120682521.42cc4219af503@www.courrier.umontreal.ca>

Dear Dr. Ripley,

I'm using the R v1.11 on Macintoch and I seem to have a problem with the
function R_alloc. It crashes when using the following .C function (only an
example):

///////////////////////////////
# include <R.h>
void Hello(int *n)
{
int i,x;
for(i=1;1< *n ; i++)
{
	Rprintf('salut!!!\n');
}
x = (int *) R_alloc(5,sizeof(int));
}

///////////////////////////////

I call it in R with this line:

.C('Hello',as.integer(5))

Any idea why and how I can resolve this problem?

Thank you for your time,
Marie-H?l?ne


From marie-helene.ouellette at UMontreal.CA  Wed Jul  6 22:42:04 2005
From: marie-helene.ouellette at UMontreal.CA (=?iso-8859-1?b?TWFyaWUtSOls6G5l?= Ouellette)
Date: Wed,  6 Jul 2005 16:42:04 -0400
Subject: [Rd] R_alloc problems in R v1.11
Message-ID: <1120682524.42cc421c73faf@www.courrier.umontreal.ca>

Dear Dr. Ripley,

I'm using the R v1.11 on Macintoch and I seem to have a problem with the
function R_alloc. It crashes when using the following .C function (only an
example):

///////////////////////////////
# include <R.h>
void Hello(int *n)
{
int i,x;
for(i=1;1< *n ; i++)
{
	Rprintf('salut!!!\n');
}
x = (int *) R_alloc(5,sizeof(int));
}

///////////////////////////////

I call it in R with this line:

.C('Hello',as.integer(5))

Any idea why and how I can resolve this problem?

Thank you for your time,
Marie-H?l?ne


From marie-helene.ouellette at UMontreal.CA  Wed Jul  6 22:42:07 2005
From: marie-helene.ouellette at UMontreal.CA (=?iso-8859-1?b?TWFyaWUtSOls6G5l?= Ouellette)
Date: Wed,  6 Jul 2005 16:42:07 -0400
Subject: [Rd] R_alloc problems in R v1.11
Message-ID: <1120682527.42cc421f34fdc@www.courrier.umontreal.ca>

Dear Dr. Ripley,

I'm using the R v1.11 on Macintoch and I seem to have a problem with the
function R_alloc. It crashes when using the following .C function (only an
example):

///////////////////////////////
# include <R.h>
void Hello(int *n)
{
int i,x;
for(i=1;1< *n ; i++)
{
	Rprintf('salut!!!\n');
}
x = (int *) R_alloc(5,sizeof(int));
}

///////////////////////////////

I call it in R with this line:

.C('Hello',as.integer(5))

Any idea why and how I can resolve this problem?

Thank you for your time,
Marie-H?l?ne


From marie-helene.ouellette at UMontreal.CA  Wed Jul  6 22:42:09 2005
From: marie-helene.ouellette at UMontreal.CA (=?iso-8859-1?b?TWFyaWUtSOls6G5l?= Ouellette)
Date: Wed,  6 Jul 2005 16:42:09 -0400
Subject: [Rd] R_alloc problems in R v1.11
Message-ID: <1120682529.42cc4221e67a7@www.courrier.umontreal.ca>

Dear Dr. Ripley,

I'm using the R v1.11 on Macintoch and I seem to have a problem with the
function R_alloc. It crashes when using the following .C function (only an
example):

///////////////////////////////
# include <R.h>
void Hello(int *n)
{
int i,x;
for(i=1;1< *n ; i++)
{
	Rprintf('salut!!!\n');
}
x = (int *) R_alloc(5,sizeof(int));
}

///////////////////////////////

I call it in R with this line:

.C('Hello',as.integer(5))

Any idea why and how I can resolve this problem?

Thank you for your time,
Marie-H?l?ne


From marie-helene.ouellette at UMontreal.CA  Wed Jul  6 22:42:12 2005
From: marie-helene.ouellette at UMontreal.CA (=?iso-8859-1?b?TWFyaWUtSOls6G5l?= Ouellette)
Date: Wed,  6 Jul 2005 16:42:12 -0400
Subject: [Rd] R_alloc problems in R v1.11
Message-ID: <1120682532.42cc4224beed1@www.courrier.umontreal.ca>

Dear Dr. Ripley,

I'm using the R v1.11 on Macintoch and I seem to have a problem with the
function R_alloc. It crashes when using the following .C function (only an
example):

///////////////////////////////
# include <R.h>
void Hello(int *n)
{
int i,x;
for(i=1;1< *n ; i++)
{
	Rprintf('salut!!!\n');
}
x = (int *) R_alloc(5,sizeof(int));
}

///////////////////////////////

I call it in R with this line:

.C('Hello',as.integer(5))

Any idea why and how I can resolve this problem?

Thank you for your time,
Marie-H?l?ne


From ligges at statistik.uni-dortmund.de  Wed Jul  6 22:49:09 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 06 Jul 2005 22:49:09 +0200
Subject: [Rd] dyn.load in linux: missing libraries?
In-Reply-To: <42CBD53F.8000209@mail.mcgill.ca>
References: <42CB5471.5040506@mail.mcgill.ca>	<x2pstw75ch.fsf@turmalin.kubism.ku.dk>
	<42CBD53F.8000209@mail.mcgill.ca>
Message-ID: <42CC43C5.7050901@statistik.uni-dortmund.de>

Tyler Smith wrote:

> ah, that's better. For an immediate fix I just changed .dll to .so, and 

No, change it to
   .Platform$dynlib.ext
or do as already recommended: use library.dynam()

Uwe Ligges



> it appears to work perfectly. I will read through Writing R Extensions 
> to make sure I understand what I'm doing!
> 
> Thanks!
> 
> Tyler
> 
> Peter Dalgaard wrote:
> 
> 
>>Tyler Smith <tyler.smith at mail.mcgill.ca> writes:
>>
>> 
>>
>>
>>>Hi,
>>>
>>>I've just about got myself transferred from windowsXP to Linux (Mepis 
>>>3.3.1-1). I've got R 2.1.1, emacs, and ess running from the debian 
>>>repositories. Of course, there is a hitch. I have a bit of C code in one 
>>>of my personal functions. I have, apparently without problem, been able 
>>>to compile it using R CMD SHLIB, but when I try to dyn.load it I get the 
>>>following error:
>>>
>>>
>>>>dyn.load("Cfiles/Neutral/Bell2000.dll")
>>>
>>>Error in dyn.load(x, as.logical(local), as.logical(now)) :
>>>   unable to load shared library 
>>>'/home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll':
>>> /home/tyler/RWorkingDirectory/Cfiles/Neutral/Bell2000.dll: invalid ELF 
>>>header
>>>
>>>I take this to mean one of the required libraries is either not loaded 
>>>or not updated. Or, I've overlooked something. Can anyone point me to a 
>>>solution? I tried updating my perl files, and I haven't found anything 
>>>using the R Site Search...
>>>   
>>>
>>
>>Nope, the missing library is the one that you're trying to load.
>>Dynamic libraries are not called .dll on Linux, but rather .so...
>>
>>You should probably read up on "Writing R Extensions", including the
>>hints on how to write portable code (use library.dynam).
>>
>> 
>>
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.uni-dortmund.de  Wed Jul  6 23:06:12 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 06 Jul 2005 23:06:12 +0200
Subject: [Rd] R_alloc problems in R v1.11
In-Reply-To: <1120682524.42cc421c73faf@www.courrier.umontreal.ca>
References: <1120682524.42cc421c73faf@www.courrier.umontreal.ca>
Message-ID: <42CC47C4.1000409@statistik.uni-dortmund.de>

Marie-H?l?ne Ouellette wrote:

> Dear Dr. Ripley,

This is R-devel, among hundreds of other readers, Prof. Ripley is 
perhaps listening as well.

There is no reason to send dozens of messages. Please read the posting 
guide.


> I'm using the R v1.11 on Macintoch and I seem to have a problem with the

There is no version 1.11, and there never was. Current is 2.1.1 anything 
older than 2.x.y is unsupported these days.


> function R_alloc. It crashes when using the following .C function (only an
> example):
> 
> ///////////////////////////////
> # include <R.h>
> void Hello(int *n)
> {
> int i,x;
> for(i=1;1< *n ; i++)

Do you mean
   i < *n
???

> {
> 	Rprintf('salut!!!\n');

What about using double quotes?

> }
> x = (int *) R_alloc(5,sizeof(int));

What is this intended to do???

Uwe Ligges



> }
> 
> ///////////////////////////////
> 
> I call it in R with this line:
> 
> .C('Hello',as.integer(5))
> 
> Any idea why and how I can resolve this problem?
> 
> Thank you for your time,
> Marie-H?l?ne
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tlumley at u.washington.edu  Wed Jul  6 23:04:25 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 6 Jul 2005 14:04:25 -0700 (PDT)
Subject: [Rd] R_alloc problems in R v1.11
In-Reply-To: <1120682529.42cc4221e67a7@www.courrier.umontreal.ca>
References: <1120682529.42cc4221e67a7@www.courrier.umontreal.ca>
Message-ID: <Pine.A41.4.61b.0507061359450.109146@homer05.u.washington.edu>

On Wed, 6 Jul 2005, [iso-8859-1] Marie-H?l?ne Ouellette wrote:

> Dear Dr. Ripley,

Or possibly other people on the list.

> I'm using the R v1.11 on Macintoch

Unlikely. There is no R v1.11, and R 1.1.1 (following the most common 
misspelling) wasn't available for the Mac.

>					and I seem to have a problem with the
> function R_alloc. It crashes when using the following .C function (only an
> example):
>
> ///////////////////////////////
> # include <R.h>
> void Hello(int *n)
> {
> int i,x;
> for(i=1;1< *n ; i++)

This is an infinite loop.  You probably mean i<*n as the second 
expression, or perhaps i<=*n (did you want n or n-1 repeats?)

> {
> 	Rprintf('salut!!!\n');

This is invalid C, as your compiler should have told you. You need double 
quotes.

> }
> x = (int *) R_alloc(5,sizeof(int));

x was declared as int, not int *, so again this is invalid.

> }
>
> ///////////////////////////////
>
> I call it in R with this line:
>
> .C('Hello',as.integer(5))
>
> Any idea why and how I can resolve this problem?

After fixing the C errors and in a version of R that exists (2.0.1) I get
> dyn.load("hello.so")
> .C('Hello',as.integer(5))
salut!!!
salut!!!
salut!!!
salut!!!
[[1]]
[1] 5

 	-thomas

From ligges at statistik.uni-dortmund.de  Wed Jul  6 23:12:24 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 06 Jul 2005 23:12:24 +0200
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <971536df05070605244d022d9e@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>	<da15bn$1r5$1@sea.gmane.org>	<971536df05063012166bfa590b@mail.gmail.com>	<da1jlv$et5$1@sea.gmane.org>	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
Message-ID: <42CC4938.6050605@statistik.uni-dortmund.de>

Gabor Grothendieck wrote:

> On 6/30/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> 
>>On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
>>
>>>Gabor Grothendieck wrote:
>>>
>>>>On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
>>>>
>>>
>>>...
>>>
>>>
>>>>>I keep a separate directory ...\R\library for nonstandard packages,
>>>>>with environment variable R_LIBS set to the directory name.
>>>>
>>>>
>>>>Do you mean your R_LIBS has two components: one to look in
>>>>..\R\rcurrent\library and a second to look in ..\R\library? What does
>>>>it look like exactly?
>>>>
>>>>When you do install.packages(whatever) does it install to the
>>>>..\R\library rather than ..\R\rcurrent\library ?   Also, does
>>>>updates.packages() work as expected for you?
>>>>
>>>
>>>My R_LIBS environment variable is just
>>>
>>>  R_LIBS=C:\progs\r\library
>>>
>>>and within R I see
>>>
>>>  > .libPaths()
>>>  [1] "C:/progs/r/library"          "C:/progs/r/rcurrent/library"
>>>
>>>i.e., the default library is automatically appended.  The help for
>>>.libPaths explains this.  And yes, install.packages() installs to
>>>C:\progs\R\library and update.packages() works as expected.
>>>
>>>
>>>>>My miktex.ini file specifies ...\R\rcurrent\share\texmf as a place
>>>>>to look for input files.
>>>>
>>>>
>>>>I think its necessary to rebuild the name data base in miktex too
>>>>    initexmf -u
>>>>although ignoring that step may work as long as the filenames
>>>>have not changed.
>>>
>>>You are probably correct, though I have not yet encountered any problems
>>>that I could attribute to not running initexmf -- no doubt the filenames
>>>have not changed recently.
>>>
>>>
>>>>I was hoping to continue using a vanilla
>>>>miktex installation as I do now rather than having a custom miktex.ini
>>>>file.  At any rate my batch file would continue to work even with your setup
>>>>so I think I should be ok here.
>>>>
>>>>
>>>>
>>>>>That should take care of your points 3, 4, and 2, respectively.
>>>>>Duncan's suggestion of an R_ENVIRON environment variable (which
>>>>>I didn't know about; thanks, Duncan) should take care of point 1.
>>>>>
>>>>>Jon Hosking
>>>>
>>>>
>>>>It occurs to me in reading this that I could keep the *.site files in
>>>>..\R and then have my miktex update batch file also copy them
>>>>to the appropriate etc folder.  Thus keeping an R\library folder
>>>>and running the batch file after each new installation would
>>>>address 1, 2 and 4 even without using the same name for the
>>>>rw... folder.  This still does not handle the shortcut key which
>>>>I would have to handle manually or determine if there is a way
>>>>I could also add that to my batch file.
>>>>
>>
>>Thanks. I think I have it now.  I have:
>>
>>- placed my *.site files and library folder in C:\Program Files\R
>> and have set the R_LIBS variable in Renviron.site to point to
>> C:\Program Files\R\library .
>>
>>- I have a batch file which I placed on my desktop which runs rgui.exe
>> from the bin subfolder of the current version of R (using the registry
>> entry to find it).  That desktop shortcut has the Alt+Ctrl+R shortcut
>> key associated with it since the batch file itself does not change even
>> when I install new versions of R.
>>
>>- each time I install a new version of R I run a batch file which
>> -- copies the R miktex files to the appropriate miktex folder
>> -- refreshes the miktex file name data base
>> -- copies the *.site files in \Program Files\R to the etc subfolder
>>    of the current version of R (using the registry entry to find it)
>>
>>Getting this right is something I have been putting off for some time
>>now since I was very concerned that I screw up my entire R installation
>>but with the advice of the two of you I think I have it now.
>>If any of this functionality could be taken over by the standard
>>R installation procedure that would be great but in any case I think
>>I have a solution that works for me now.  Thanks.
>>
> 
> 
> I have cleaned up my batch files (somewhat) and posted them to 
> CRAN. See my recent post:
>    https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
> 
> If any of this functionality could migrate to R itself that would be great.
> 
> 1. In particular, if R could automatically look in ../R for *.site files if it
> can't find them in .../R/rw..../etc and if it could look for a library

This is already implemented, just specify the environment variable 
R_PROFILE which points to your global site file. See ?Startup


> in .../R/library then Rrefresh.bat could be simplified to just refreshing
> MiKTeX and makepkg.bat would not have to set the R_LIBS variable.

Well, same as above, just set R_LIBS. You can do this for all sessions 
by using the windows control panel, you don't need to do it in each session.

Why do you expect others are using a setup like yours?
I do not. And I do not want R to look


> 2. Also if Rcmd CHECK and Rcmd INSTALL were to process .Rbuildignore
> like Rcmd BUILD does then makepkg.bat would not have to do a build first.

Martin already pointed out why you should not really want this.

Uwe


> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Wed Jul  6 23:14:31 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 6 Jul 2005 17:14:31 -0400
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
	installation ..}
In-Reply-To: <42CC402D.5010307@statistik.uni-dortmund.de>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<17099.55467.732587.886792@stat.math.ethz.ch>
	<971536df05070607087c72249f@mail.gmail.com>
	<42CC402D.5010307@statistik.uni-dortmund.de>
Message-ID: <971536df050706141429eeaa48@mail.gmail.com>

On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
> Gabor Grothendieck wrote:
> 
> > On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> >
> >>>>>>>"Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
> >>>>>>>    on Wed, 6 Jul 2005 08:24:49 -0400 writes:
> >>
> >> .......................
> >> .......................
> >>
> >>   Gabor> I have cleaned up my batch files (somewhat) and posted them to
> >>   Gabor> CRAN. See my recent post:
> >>   Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
> >>
> >>   Gabor> If any of this functionality could migrate to R
> >>   Gabor> itself that would be great.
> >>
> >>   ........
> >>
> >>
> >>   Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
> >>   Gabor> process .Rbuildignore like Rcmd BUILD does then
> >>   Gabor> makepkg.bat would not have to do a build first.
> >>
> >>No!  {We have been here before, and I had explained before that}
> >>this is really undesired:  ".Rbuildignore" should contain what is
> >>ignored by build, but not by "check".
> >>It does make sense to have extra code and / or checks for 'R CMD check'
> >>that I as package developer want to run, but that are
> >> -- too time consuming
> >> -- too platform specific
> >> -- ......
> >>to be run during the daily checks on CRAN (e.g.) /
> >>to be run by others at all.
> >>
> >>{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
> >> of "R CMD" since the latter is portable }
> >>
> >>--
> >>Martin
> >>
> >
> >
> > I think its too heavy handed an approach.  This should be up to the package
> > developer via a switch.  I like to put partially written code and other things
> > not intended for distribution in .Rbuildignore and don't want them checked or
> > installed until I move them out of .Rbuildignore.  That makes it
> > possible to keep
> > everything together.  Without this one must 1. keep them elsewhere
> > (which I am considering as an alternate approach to what I do now although
> > it would be a shame) or else 2. write batch files (which I have
> > written for XP) to do
> > a prebuild every time one does a check or install.
> >
> > One annoying aspect of R CMD is the requirement for capitalization.  Maybe
> > that's ok on UNIX but on Windows one is used to using upper and lower
> > case interchangeably.  Its also annoying to have to write two words instead of
> > one for a frequently issued command.   At any rate I always call it through
> 
> Gabor, honestly, this is nonsense.
> 
> 1. Do you expect that R also changes under Windows because you are used
> to mix upper and lower case and want to say SUMMARY() or rowsums()?
> 2. Do you really thing it is annoying to type "R CMD" rather than
> "Rcmd"? Hmm, anybody else has a space bar left for Gabor?
> 
> Best,
> Uwe
> 
> > my Rcmd.bat batch file so its not really an issue for me.

It was claimed its portable and that is true in the strictest sense that it
works on both UNIX and Windows but it would be even more
desirable if it were not just portable but also worked the way the target
system worked rather than just acting like a UNIX utility does
on Windows.  Ideally it would work as other Windows utilities work,
e.g. note that we run the following using upper and lower case and
get the same result:

C:> net use ?
The syntax of this command is:
NET USE
[devicename | *] [\\computername\sharename[\volume] [password | *]]
...

C:> NET USE ?
The syntax of this command is:
NET USE
[devicename | *] [\\computername\sharename[\volume] [password | *]]
...

A Windows user does not expect the case sensitive behaviour
since just about all the software one uses does not work that way.
I got tripped up by it myself and obviously others do too.  e.g. see
this recent post:
https://www.stat.math.ethz.ch/pipermail/r-help/2005-June/073154.html

I was just pointing out this undesirable aspect.  It may be a small point
but the sum of small inconsistencies can collectively amount to substantial
difficulty and contribute to the feeling that software is hard to use.

On the other point, I may be spacebar-challenged but Rcmd does address 
these points.


From p.dalgaard at biostat.ku.dk  Wed Jul  6 23:22:17 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 06 Jul 2005 23:22:17 +0200
Subject: [Rd] R_alloc problems in R v1.11
In-Reply-To: <1120682532.42cc4224beed1@www.courrier.umontreal.ca>
References: <1120682532.42cc4224beed1@www.courrier.umontreal.ca>
Message-ID: <x2zmszwrxy.fsf@turmalin.kubism.ku.dk>

Marie-H?l?ne Ouellette <marie-helene.ouellette at umontreal.ca> writes:

> Dear Dr. Ripley,

Believe it or not, there are several people on this list who are not
Dr.Ripley. In fact, I suspect that he is temporarily absent these
days. Had he been present he would likely have explained that none of
us need to read the same message five times over...

> I'm using the R v1.11 on Macintoch and I seem to have a problem with the

Say what? There was never an R version with that number. Is this Mac OS X
or classic Mac?

> function R_alloc. It crashes when using the following .C function (only an
> example):

*How* does it "crash"? R shuts down? Prints an infinite stream of "salut!!!"?
What did you do to compile and did you see any warnings from the compilation?
 
> ///////////////////////////////
> # include <R.h>
> void Hello(int *n)
> {
> int i,x;
> for(i=1;1< *n ; i++)
> {
> 	Rprintf('salut!!!\n');
> }
> x = (int *) R_alloc(5,sizeof(int));
> }
> 
> ///////////////////////////////
> 
> I call it in R with this line:
> 
> .C('Hello',as.integer(5))

and then what happens?

> Any idea why and how I can resolve this problem?


Well, if that is really your code, x is an int that gets an int *
assigned to it, but 1 is never going to be bigger than *n, so I don't
see how you'd get that far.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ligges at statistik.uni-dortmund.de  Wed Jul  6 23:31:25 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 06 Jul 2005 23:31:25 +0200
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
 installation ..}
In-Reply-To: <971536df050706141429eeaa48@mail.gmail.com>
References: <971536df0506300510f6d6ac2@mail.gmail.com>	
	<da15bn$1r5$1@sea.gmane.org>	
	<971536df05063012166bfa590b@mail.gmail.com>	
	<da1jlv$et5$1@sea.gmane.org>	
	<971536df050630152014c8f70@mail.gmail.com>	
	<971536df05070605244d022d9e@mail.gmail.com>	
	<17099.55467.732587.886792@stat.math.ethz.ch>	
	<971536df05070607087c72249f@mail.gmail.com>	
	<42CC402D.5010307@statistik.uni-dortmund.de>
	<971536df050706141429eeaa48@mail.gmail.com>
Message-ID: <42CC4DAD.1000100@statistik.uni-dortmund.de>

Gabor Grothendieck wrote:

> On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
> 
>>Gabor Grothendieck wrote:
>>
>>
>>>On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>>
>>>
>>>>>>>>>"Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>>>>>   on Wed, 6 Jul 2005 08:24:49 -0400 writes:
>>>>
>>>>.......................
>>>>.......................
>>>>
>>>>  Gabor> I have cleaned up my batch files (somewhat) and posted them to
>>>>  Gabor> CRAN. See my recent post:
>>>>  Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
>>>>
>>>>  Gabor> If any of this functionality could migrate to R
>>>>  Gabor> itself that would be great.
>>>>
>>>>  ........
>>>>
>>>>
>>>>  Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
>>>>  Gabor> process .Rbuildignore like Rcmd BUILD does then
>>>>  Gabor> makepkg.bat would not have to do a build first.
>>>>
>>>>No!  {We have been here before, and I had explained before that}
>>>>this is really undesired:  ".Rbuildignore" should contain what is
>>>>ignored by build, but not by "check".
>>>>It does make sense to have extra code and / or checks for 'R CMD check'
>>>>that I as package developer want to run, but that are
>>>>-- too time consuming
>>>>-- too platform specific
>>>>-- ......
>>>>to be run during the daily checks on CRAN (e.g.) /
>>>>to be run by others at all.
>>>>
>>>>{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
>>>>of "R CMD" since the latter is portable }
>>>>
>>>>--
>>>>Martin
>>>>
>>>
>>>
>>>I think its too heavy handed an approach.  This should be up to the package
>>>developer via a switch.  I like to put partially written code and other things
>>>not intended for distribution in .Rbuildignore and don't want them checked or
>>>installed until I move them out of .Rbuildignore.  That makes it
>>>possible to keep
>>>everything together.  Without this one must 1. keep them elsewhere
>>>(which I am considering as an alternate approach to what I do now although
>>>it would be a shame) or else 2. write batch files (which I have
>>>written for XP) to do
>>>a prebuild every time one does a check or install.
>>>
>>>One annoying aspect of R CMD is the requirement for capitalization.  Maybe
>>>that's ok on UNIX but on Windows one is used to using upper and lower
>>>case interchangeably.  Its also annoying to have to write two words instead of
>>>one for a frequently issued command.   At any rate I always call it through
>>
>>Gabor, honestly, this is nonsense.
>>
>>1. Do you expect that R also changes under Windows because you are used
>>to mix upper and lower case and want to say SUMMARY() or rowsums()?
>>2. Do you really thing it is annoying to type "R CMD" rather than
>>"Rcmd"? Hmm, anybody else has a space bar left for Gabor?
>>
>>Best,
>>Uwe
>>
>>
>>>my Rcmd.bat batch file so its not really an issue for me.
> 
> 
> It was claimed its portable and that is true in the strictest sense that it
> works on both UNIX and Windows but it would be even more
> desirable if it were not just portable but also worked the way the target
> system worked rather than just acting like a UNIX utility does
> on Windows.  Ideally it would work as other Windows utilities work,
> e.g. note that we run the following using upper and lower case and
> get the same result:
> 
> C:> net use ?
> The syntax of this command is:
> NET USE
> [devicename | *] [\\computername\sharename[\volume] [password | *]]
> ...
> 
> C:> NET USE ?
> The syntax of this command is:
> NET USE
> [devicename | *] [\\computername\sharename[\volume] [password | *]]
> ...

No! That something completely different: If Windows allows to use "net 
use" and "NET USE" even if only the latter is the documeted way, OK. 
These are, as you mentioned yourself, *Windows utilities* and you don't 
want to port this syntax.

But if you type "R cmd", it is no longer portable, and "Rcmd" for sure 
is not. "R CMD" is an R utility --- and R behaves case senstive.

Uwe Ligges



> A Windows user does not expect the case sensitive behaviour
> since just about all the software one uses does not work that way.
> I got tripped up by it myself and obviously others do too.  e.g. see
> this recent post:
> https://www.stat.math.ethz.ch/pipermail/r-help/2005-June/073154.html
> 
> I was just pointing out this undesirable aspect.  It may be a small point
> but the sum of small inconsistencies can collectively amount to substantial
> difficulty and contribute to the feeling that software is hard to use.
> 
> On the other point, I may be spacebar-challenged but Rcmd does address 
> these points.


From murdoch at stats.uwo.ca  Wed Jul  6 23:38:47 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 06 Jul 2005 17:38:47 -0400
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
 installation ..}
In-Reply-To: <42CC4DAD.1000100@statistik.uni-dortmund.de>
References: <971536df0506300510f6d6ac2@mail.gmail.com>	
	<da15bn$1r5$1@sea.gmane.org>	
	<971536df05063012166bfa590b@mail.gmail.com>	
	<da1jlv$et5$1@sea.gmane.org>	
	<971536df050630152014c8f70@mail.gmail.com>	
	<971536df05070605244d022d9e@mail.gmail.com>	
	<17099.55467.732587.886792@stat.math.ethz.ch>	
	<971536df05070607087c72249f@mail.gmail.com>	
	<42CC402D.5010307@statistik.uni-dortmund.de>
	<971536df050706141429eeaa48@mail.gmail.com>
	<42CC4DAD.1000100@statistik.uni-dortmund.de>
Message-ID: <42CC4F67.8010908@stats.uwo.ca>

Uwe Ligges wrote:
> Gabor Grothendieck wrote:
> 
> 
>>On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
>>
>>
>>>Gabor Grothendieck wrote:
>>>
>>>
>>>
>>>>On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>>>
>>>>
>>>>
>>>>>>>>>>"Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>>>>>>  on Wed, 6 Jul 2005 08:24:49 -0400 writes:
>>>>>
>>>>>.......................
>>>>>.......................
>>>>>
>>>>> Gabor> I have cleaned up my batch files (somewhat) and posted them to
>>>>> Gabor> CRAN. See my recent post:
>>>>> Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
>>>>>
>>>>> Gabor> If any of this functionality could migrate to R
>>>>> Gabor> itself that would be great.
>>>>>
>>>>> ........
>>>>>
>>>>>
>>>>> Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
>>>>> Gabor> process .Rbuildignore like Rcmd BUILD does then
>>>>> Gabor> makepkg.bat would not have to do a build first.
>>>>>
>>>>>No!  {We have been here before, and I had explained before that}
>>>>>this is really undesired:  ".Rbuildignore" should contain what is
>>>>>ignored by build, but not by "check".
>>>>>It does make sense to have extra code and / or checks for 'R CMD check'
>>>>>that I as package developer want to run, but that are
>>>>>-- too time consuming
>>>>>-- too platform specific
>>>>>-- ......
>>>>>to be run during the daily checks on CRAN (e.g.) /
>>>>>to be run by others at all.
>>>>>
>>>>>{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
>>>>>of "R CMD" since the latter is portable }
>>>>>
>>>>>--
>>>>>Martin
>>>>>
>>>>
>>>>
>>>>I think its too heavy handed an approach.  This should be up to the package
>>>>developer via a switch.  I like to put partially written code and other things
>>>>not intended for distribution in .Rbuildignore and don't want them checked or
>>>>installed until I move them out of .Rbuildignore.  That makes it
>>>>possible to keep
>>>>everything together.  Without this one must 1. keep them elsewhere
>>>>(which I am considering as an alternate approach to what I do now although
>>>>it would be a shame) or else 2. write batch files (which I have
>>>>written for XP) to do
>>>>a prebuild every time one does a check or install.
>>>>
>>>>One annoying aspect of R CMD is the requirement for capitalization.  Maybe
>>>>that's ok on UNIX but on Windows one is used to using upper and lower
>>>>case interchangeably.  Its also annoying to have to write two words instead of
>>>>one for a frequently issued command.   At any rate I always call it through
>>>
>>>Gabor, honestly, this is nonsense.
>>>
>>>1. Do you expect that R also changes under Windows because you are used
>>>to mix upper and lower case and want to say SUMMARY() or rowsums()?
>>>2. Do you really thing it is annoying to type "R CMD" rather than
>>>"Rcmd"? Hmm, anybody else has a space bar left for Gabor?
>>>
>>>Best,
>>>Uwe
>>>
>>>
>>>
>>>>my Rcmd.bat batch file so its not really an issue for me.
>>
>>
>>It was claimed its portable and that is true in the strictest sense that it
>>works on both UNIX and Windows but it would be even more
>>desirable if it were not just portable but also worked the way the target
>>system worked rather than just acting like a UNIX utility does
>>on Windows.  Ideally it would work as other Windows utilities work,
>>e.g. note that we run the following using upper and lower case and
>>get the same result:
>>
>>C:> net use ?
>>The syntax of this command is:
>>NET USE
>>[devicename | *] [\\computername\sharename[\volume] [password | *]]
>>...
>>
>>C:> NET USE ?
>>The syntax of this command is:
>>NET USE
>>[devicename | *] [\\computername\sharename[\volume] [password | *]]
>>...
> 
> 
> No! That something completely different: If Windows allows to use "net 
> use" and "NET USE" even if only the latter is the documeted way, OK. 
> These are, as you mentioned yourself, *Windows utilities* and you don't 
> want to port this syntax.
> 
> But if you type "R cmd", it is no longer portable, and "Rcmd" for sure 
> is not. "R CMD" is an R utility --- and R behaves case senstive.
> 
> Uwe Ligges

In fact, on Windows R is not case sensitive in the 1st or 3rd word on 
the line "R CMD install", only in the 2nd, so I can see Gabor's point. 
However, I have to admit I always use "Rcmd install"; I put the "R CMD 
..." version in place to help Unix refugees.

Duncan Murdoch


From konis at stats.ox.ac.uk  Wed Jul  6 23:39:00 2005
From: konis at stats.ox.ac.uk (Kjell Konis)
Date: Wed, 6 Jul 2005 22:39:00 +0100
Subject: [Rd] R_alloc problems in R v1.11
In-Reply-To: <42CC47C4.1000409@statistik.uni-dortmund.de>
References: <1120682524.42cc421c73faf@www.courrier.umontreal.ca>
	<42CC47C4.1000409@statistik.uni-dortmund.de>
Message-ID: <54E5108C-AD58-4BC2-B7DB-EC997AE70DB7@stats.ox.ac.uk>

On 6 Jul 2005, at 22:06, Uwe Ligges wrote:

> Marie-H?l?ne Ouellette wrote:
>
>> I'm using the R v1.11 on Macintoch and I seem to have a problem  
>> with the
>>
>
> There is no version 1.11, and there never was. Current is 2.1.1  
> anything
> older than 2.x.y is unsupported these days.

The latest version of R for OSX available on CRAN (R-2.1.0a.dmg)  
reports itself as "Version 1.11 (1.11)".  This is actually the  
version of the Macintosh GUI and not the underlying R framework  
(which is 2.1.0) but it is found where traditional mac users are  
going to look to find the version information: R -> About R.

I think I may have also stumbled across a tiny little bug in .C.  I  
forgot to capitalize Hello:

 > .C("hello", as.integer(5))
Error in .C("hello", as.integer(5)) : "C" function name not in load  
table

I think it should say '"hello" function name not in load table'.

Kjell


From ggrothendieck at gmail.com  Wed Jul  6 23:42:49 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 6 Jul 2005 17:42:49 -0400
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
	installation ..}
In-Reply-To: <42CC4DAD.1000100@statistik.uni-dortmund.de>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<17099.55467.732587.886792@stat.math.ethz.ch>
	<971536df05070607087c72249f@mail.gmail.com>
	<42CC402D.5010307@statistik.uni-dortmund.de>
	<971536df050706141429eeaa48@mail.gmail.com>
	<42CC4DAD.1000100@statistik.uni-dortmund.de>
Message-ID: <971536df0507061442c2eab06@mail.gmail.com>

On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
> Gabor Grothendieck wrote:
> 
> > On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
> >
> >>Gabor Grothendieck wrote:
> >>
> >>
> >>>On 7/6/05, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> >>>
> >>>
> >>>>>>>>>"Gabor" == Gabor Grothendieck <ggrothendieck at gmail.com>
> >>>>>>>>>   on Wed, 6 Jul 2005 08:24:49 -0400 writes:
> >>>>
> >>>>.......................
> >>>>.......................
> >>>>
> >>>>  Gabor> I have cleaned up my batch files (somewhat) and posted them to
> >>>>  Gabor> CRAN. See my recent post:
> >>>>  Gabor> https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
> >>>>
> >>>>  Gabor> If any of this functionality could migrate to R
> >>>>  Gabor> itself that would be great.
> >>>>
> >>>>  ........
> >>>>
> >>>>
> >>>>  Gabor> 2. Also if Rcmd CHECK and Rcmd INSTALL were to
> >>>>  Gabor> process .Rbuildignore like Rcmd BUILD does then
> >>>>  Gabor> makepkg.bat would not have to do a build first.
> >>>>
> >>>>No!  {We have been here before, and I had explained before that}
> >>>>this is really undesired:  ".Rbuildignore" should contain what is
> >>>>ignored by build, but not by "check".
> >>>>It does make sense to have extra code and / or checks for 'R CMD check'
> >>>>that I as package developer want to run, but that are
> >>>>-- too time consuming
> >>>>-- too platform specific
> >>>>-- ......
> >>>>to be run during the daily checks on CRAN (e.g.) /
> >>>>to be run by others at all.
> >>>>
> >>>>{And BTW, AFAIK,  'Rcmd' is now `somewhat deprecated' in favor
> >>>>of "R CMD" since the latter is portable }
> >>>>
> >>>>--
> >>>>Martin
> >>>>
> >>>
> >>>
> >>>I think its too heavy handed an approach.  This should be up to the package
> >>>developer via a switch.  I like to put partially written code and other things
> >>>not intended for distribution in .Rbuildignore and don't want them checked or
> >>>installed until I move them out of .Rbuildignore.  That makes it
> >>>possible to keep
> >>>everything together.  Without this one must 1. keep them elsewhere
> >>>(which I am considering as an alternate approach to what I do now although
> >>>it would be a shame) or else 2. write batch files (which I have
> >>>written for XP) to do
> >>>a prebuild every time one does a check or install.
> >>>
> >>>One annoying aspect of R CMD is the requirement for capitalization.  Maybe
> >>>that's ok on UNIX but on Windows one is used to using upper and lower
> >>>case interchangeably.  Its also annoying to have to write two words instead of
> >>>one for a frequently issued command.   At any rate I always call it through
> >>
> >>Gabor, honestly, this is nonsense.
> >>
> >>1. Do you expect that R also changes under Windows because you are used
> >>to mix upper and lower case and want to say SUMMARY() or rowsums()?
> >>2. Do you really thing it is annoying to type "R CMD" rather than
> >>"Rcmd"? Hmm, anybody else has a space bar left for Gabor?
> >>
> >>Best,
> >>Uwe
> >>
> >>
> >>>my Rcmd.bat batch file so its not really an issue for me.
> >
> >
> > It was claimed its portable and that is true in the strictest sense that it
> > works on both UNIX and Windows but it would be even more
> > desirable if it were not just portable but also worked the way the target
> > system worked rather than just acting like a UNIX utility does
> > on Windows.  Ideally it would work as other Windows utilities work,
> > e.g. note that we run the following using upper and lower case and
> > get the same result:
> >
> > C:> net use ?
> > The syntax of this command is:
> > NET USE
> > [devicename | *] [\\computername\sharename[\volume] [password | *]]
> > ...
> >
> > C:> NET USE ?
> > The syntax of this command is:
> > NET USE
> > [devicename | *] [\\computername\sharename[\volume] [password | *]]
> > ...
> 
> No! That something completely different: If Windows allows to use "net
> use" and "NET USE" even if only the latter is the documeted way, OK.
> These are, as you mentioned yourself, *Windows utilities* and you don't
> want to port this syntax.
> 
> But if you type "R cmd", it is no longer portable, and "Rcmd" for sure
> is not. "R CMD" is an R utility --- and R behaves case senstive.
> 


The desirable philosophy when it comes to portability is that software
works in the way the host system works, not in a new way that the
software defines for itself for all systems.  The problems I and the
cited poster had in this regard well illustrate the problem with the current
approach.


From ggrothendieck at gmail.com  Thu Jul  7 00:54:50 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 6 Jul 2005 18:54:50 -0400
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <42CC4938.6050605@statistik.uni-dortmund.de>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<42CC4938.6050605@statistik.uni-dortmund.de>
Message-ID: <971536df05070615547d82c801@mail.gmail.com>

On 7/6/05, Uwe Ligges <ligges at statistik.uni-dortmund.de> wrote:
> Gabor Grothendieck wrote:
> 
> > On 6/30/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> >
> >>On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> >>
> >>>Gabor Grothendieck wrote:
> >>>
> >>>>On 6/30/05, J. Hosking <jh910 at juno.com> wrote:
> >>>>
> >>>
> >>>...
> >>>
> >>>
> >>>>>I keep a separate directory ...\R\library for nonstandard packages,
> >>>>>with environment variable R_LIBS set to the directory name.
> >>>>
> >>>>
> >>>>Do you mean your R_LIBS has two components: one to look in
> >>>>..\R\rcurrent\library and a second to look in ..\R\library? What does
> >>>>it look like exactly?
> >>>>
> >>>>When you do install.packages(whatever) does it install to the
> >>>>..\R\library rather than ..\R\rcurrent\library ?   Also, does
> >>>>updates.packages() work as expected for you?
> >>>>
> >>>
> >>>My R_LIBS environment variable is just
> >>>
> >>>  R_LIBS=C:\progs\r\library
> >>>
> >>>and within R I see
> >>>
> >>>  > .libPaths()
> >>>  [1] "C:/progs/r/library"          "C:/progs/r/rcurrent/library"
> >>>
> >>>i.e., the default library is automatically appended.  The help for
> >>>.libPaths explains this.  And yes, install.packages() installs to
> >>>C:\progs\R\library and update.packages() works as expected.
> >>>
> >>>
> >>>>>My miktex.ini file specifies ...\R\rcurrent\share\texmf as a place
> >>>>>to look for input files.
> >>>>
> >>>>
> >>>>I think its necessary to rebuild the name data base in miktex too
> >>>>    initexmf -u
> >>>>although ignoring that step may work as long as the filenames
> >>>>have not changed.
> >>>
> >>>You are probably correct, though I have not yet encountered any problems
> >>>that I could attribute to not running initexmf -- no doubt the filenames
> >>>have not changed recently.
> >>>
> >>>
> >>>>I was hoping to continue using a vanilla
> >>>>miktex installation as I do now rather than having a custom miktex.ini
> >>>>file.  At any rate my batch file would continue to work even with your setup
> >>>>so I think I should be ok here.
> >>>>
> >>>>
> >>>>
> >>>>>That should take care of your points 3, 4, and 2, respectively.
> >>>>>Duncan's suggestion of an R_ENVIRON environment variable (which
> >>>>>I didn't know about; thanks, Duncan) should take care of point 1.
> >>>>>
> >>>>>Jon Hosking
> >>>>
> >>>>
> >>>>It occurs to me in reading this that I could keep the *.site files in
> >>>>..\R and then have my miktex update batch file also copy them
> >>>>to the appropriate etc folder.  Thus keeping an R\library folder
> >>>>and running the batch file after each new installation would
> >>>>address 1, 2 and 4 even without using the same name for the
> >>>>rw... folder.  This still does not handle the shortcut key which
> >>>>I would have to handle manually or determine if there is a way
> >>>>I could also add that to my batch file.
> >>>>
> >>
> >>Thanks. I think I have it now.  I have:
> >>
> >>- placed my *.site files and library folder in C:\Program Files\R
> >> and have set the R_LIBS variable in Renviron.site to point to
> >> C:\Program Files\R\library .
> >>
> >>- I have a batch file which I placed on my desktop which runs rgui.exe
> >> from the bin subfolder of the current version of R (using the registry
> >> entry to find it).  That desktop shortcut has the Alt+Ctrl+R shortcut
> >> key associated with it since the batch file itself does not change even
> >> when I install new versions of R.
> >>
> >>- each time I install a new version of R I run a batch file which
> >> -- copies the R miktex files to the appropriate miktex folder
> >> -- refreshes the miktex file name data base
> >> -- copies the *.site files in \Program Files\R to the etc subfolder
> >>    of the current version of R (using the registry entry to find it)
> >>
> >>Getting this right is something I have been putting off for some time
> >>now since I was very concerned that I screw up my entire R installation
> >>but with the advice of the two of you I think I have it now.
> >>If any of this functionality could be taken over by the standard
> >>R installation procedure that would be great but in any case I think
> >>I have a solution that works for me now.  Thanks.
> >>
> >
> >
> > I have cleaned up my batch files (somewhat) and posted them to
> > CRAN. See my recent post:
> >    https://www.stat.math.ethz.ch/pipermail/r-help/2005-July/073400.html
> >
> > If any of this functionality could migrate to R itself that would be great.
> >
> > 1. In particular, if R could automatically look in ../R for *.site files if it
> > can't find them in .../R/rw..../etc and if it could look for a library
> 
> This is already implemented, just specify the environment variable
> R_PROFILE which points to your global site file. See ?Startup

Thanks.  This is useful to know.   At the same time the (unstated) philosophy
of the batchfiles is that no environment variables need to be explicitly set in
your system other than ones that are required by the package-making 
tools themselves (Perl, MiKTeX).    Also the existence
of R_PROFILE is nice but does not fully address the point I made since it
still requires that you set R_PROFILE. With the point I was
making nothing at all would have to be done.

There is also some question as to whether one wants the same *.site 
files for all versions of R on the system.  The way the batch files currently 
work is that each R version on your system can have its own *.site files 
although that is a potential disadvantage of my suggestion too.

I will think this over but will likely modify the batch files to incorporate
your idea so that they temporarily set R_PROFILE for the duration of their 
run if not already set.  This would simplify the procedure in that one would
not have to run Rrefresh.bat when the *.site files change (but would
still have to run it to update MiKTeX when a new version of R was installed).

> 
> 
> > in .../R/library then Rrefresh.bat could be simplified to just refreshing
> > MiKTeX and makepkg.bat would not have to set the R_LIBS variable.
> 
> Well, same as above, just set R_LIBS. You can do this for all sessions
> by using the windows control panel, you don't need to do it in each session.
> 

Again this is an extra step by the user and it pollutes the system with
yet another environment variable.  Currently the makepkg.bat sets it
for the duration of the build/check/install (unless it was already set).

> Why do you expect others are using a setup like yours?
> I do not. And I do not want R to look

No one need use my setup but it does have the advantage of simplicity.
One can use a vanilla MiKTeX install avoiding significant potential complexity
in using MiKTex, no environment variables need to be set in your system 
other than those needed by the tools themelves and one does not have to do 
any reconfiguration each time one installs a new version of R other than
just run Rrefresh.bat without arguments.  In fact with the addition of the
R_PROFILE idea it will likely work OK even if you forget that step since
it only updates MiKTeX and MiKTeX files probably have not changed 
on a typical new R version anyway.  Also the batch files include Rfind.bat
which locates the various tools needed by R package developers which
helps organize oneself.

> 
> 
> > 2. Also if Rcmd CHECK and Rcmd INSTALL were to process .Rbuildignore
> > like Rcmd BUILD does then makepkg.bat would not have to do a build first.
> 
> Martin already pointed out why you should not really want this.
> 

and, of course, I explained why would want to.  In particular since obviously
this had no impact let me point out that not only is this desirable for one's
own work so that partially done files do not affect the check and install
but it is also desirable when one is working on a package in a group
communicating via svn.  In that case its easiest if one just shares the package
source and can label the incomplete files via .Rbuildignore and share them via 
svn but not have them affect the check and install. 

Its likely that .Rbuildignore is being used for multiple unanticipated
purposes here (those discussed by Martin and those by myself) and one
either needs the flag/switch I suggested or perhaps a more powerful
facility that ecompasses these multiple uses.


From =?iso-8859-1?Q?Marie-H=E9l=E8ne?=  Thu Jul  7 01:20:19 2005
From: =?iso-8859-1?Q?Marie-H=E9l=E8ne?= (=?iso-8859-1?Q?Marie-H=E9l=E8ne?=)
Date: Wed, 06 Jul 2005 19:20:19 -0400
Subject: [Rd] Problem with dyn.load...or else...
Message-ID: <6.2.1.2.1.20050706190146.0234a740@magellan.umontreal.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050706/cdaa20a5/attachment.pl

From tlumley at u.washington.edu  Thu Jul  7 01:43:23 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 6 Jul 2005 16:43:23 -0700 (PDT)
Subject: [Rd] Problem with dyn.load...or else...
In-Reply-To: <6.2.1.2.1.20050706190146.0234a740@magellan.umontreal.ca>
References: <6.2.1.2.1.20050706190146.0234a740@magellan.umontreal.ca>
Message-ID: <Pine.A41.4.61b.0507061636110.109146@homer05.u.washington.edu>

On Wed, 6 Jul 2005, [iso-8859-1] Marie-Hlne  Ouellette wrote:

> And try to use the function:
> > K_MEANSR(tab,centers=c(2,4))
> [1] "AA"
> [1] "AAA"
> [1] "A"
> [1] "B"
> Error in .C("K_MEANSC", xrows = as.integer(xrows), xcols =
> as.integer(xcols),  :
>         "C" function name not in load table
>

Hmm. Strange.  R doesn't think your C function is called K_MEANSC (I 
assume that K_MEANSC *is* actually the name of your C function.)

In a Terminal window you can use
   nm K_MEANSC.so
to see all the names of externally visible objects in your DLL. This would 
narrow down whether the change of names is happening in R or in 
compilation.

 	-thomas


From charlie at stat.umn.edu  Thu Jul  7 02:14:02 2005
From: charlie at stat.umn.edu (Charles Geyer)
Date: Wed, 6 Jul 2005 19:14:02 -0500
Subject: [Rd] still confused about vnsprintf, log1p, exp1m
In-Reply-To: <mailman.9.1120644000.18199.r-devel@r-project.org>
References: <mailman.9.1120644000.18199.r-devel@r-project.org>
Message-ID: <20050707001402.GE7217@stat.umn.edu>

I posted a question quite a while back about vsnprintf and Brian Ripley
replied that R always makes sure it's available, so I needn't worry.
A look at the source code shows the same for log1p and exp1m.  But I am
still confused.  Right now my code compiles and runs fine when using
the approved CFLAGS (no special gcc stuff), but when compiled
with -ansi -pedantic it can't find these functions (because R itself
was compiled with the default CFLAGS).

That's no problem, except the last time I submitted a package
it was kicked back because it didn't compile with -ansi -pedantic (which
Writing R Extensions says it should).  So what do I do?  Or will there
be no problem because KH tests with a version of R compiled
with -ansi -pedantic so R not the C libraries is providing these functions?

Pardon me if this is solved in 2.1.1 (I haven't looked there yet).
-- 
Charles Geyer
Professor, School of Statistics
University of Minnesota
charlie at stat.umn.edu


From arnima at u.washington.edu  Thu Jul  7 05:21:43 2005
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Thu,  7 Jul 2005 05:21:43 +0200 (CEST)
Subject: [Rd] write.csv (PR#7992)
Message-ID: <20050707032143.E6643A2CB@slim.kubism.ku.dk>

The write.csv() function is currently implemented as

   function (..., col.names=NA, sep=",", qmethod="double")
   {
     write.table(..., col.names=NA, sep=",", qmethod="double")
   }

Surely, it should be

   function (..., col.names=NA, sep=",", qmethod="double")
   {
     write.table(..., col.names=col.names, sep=sep, qmethod=qmethod)
   }

so that the user arguments serve a purpose. This notion is reflected in 
the implementation of read.csv(), for example, where sep=sep, quote=quote, 
etc.


Arni

R 2.1.1pat 2005-07-04 on WinXP


From arnima at u.washington.edu  Thu Jul  7 05:40:53 2005
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Thu,  7 Jul 2005 05:40:53 +0200 (CEST)
Subject: [Rd] SSD() documentation (PR#7993)
Message-ID: <20050707034053.1202AA1EE@slim.kubism.ku.dk>

There are a couple of harmless typos in the documentation for the 
stats::SSD function, where

  "varianve" should be "variance"

  "followint" should be "following"


Arni

R 2.1.1pat 2005-07-04 on WinXP


From ligges at statistik.uni-dortmund.de  Thu Jul  7 10:48:31 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 07 Jul 2005 10:48:31 +0200
Subject: [Rd] R_alloc problems in R v1.11
In-Reply-To: <54E5108C-AD58-4BC2-B7DB-EC997AE70DB7@stats.ox.ac.uk>
References: <1120682524.42cc421c73faf@www.courrier.umontreal.ca>	<42CC47C4.1000409@statistik.uni-dortmund.de>
	<54E5108C-AD58-4BC2-B7DB-EC997AE70DB7@stats.ox.ac.uk>
Message-ID: <42CCEC5F.1030407@statistik.uni-dortmund.de>

Kjell Konis wrote:

> On 6 Jul 2005, at 22:06, Uwe Ligges wrote:
> 
> 
>>Marie-H?l?ne Ouellette wrote:
>>
>>
>>>I'm using the R v1.11 on Macintoch and I seem to have a problem  
>>>with the
>>>
>>
>>There is no version 1.11, and there never was. Current is 2.1.1  
>>anything
>>older than 2.x.y is unsupported these days.
> 
> 
> The latest version of R for OSX available on CRAN (R-2.1.0a.dmg)  
> reports itself as "Version 1.11 (1.11)".  This is actually the  
> version of the Macintosh GUI and not the underlying R framework  
> (which is 2.1.0) but it is found where traditional mac users are  
> going to look to find the version information: R -> About R.
> 
> I think I may have also stumbled across a tiny little bug in .C.  I  
> forgot to capitalize Hello:
> 
>  > .C("hello", as.integer(5))
> Error in .C("hello", as.integer(5)) : "C" function name not in load  
> table

No, it is intended to say "C" or "Fortran", AFAICS.

Uwe Ligges

> I think it should say '"hello" function name not in load table'.
> 
> Kjell
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From mkeller at fam.tuwien.ac.at  Thu Jul  7 12:23:23 2005
From: mkeller at fam.tuwien.ac.at (mkeller@fam.tuwien.ac.at)
Date: Thu,  7 Jul 2005 12:23:23 +0200 (CEST)
Subject: [Rd] Sys.timzone() returns NA - problem caused by as.POSIXlt?
	(PR#7994)
Message-ID: <20050707102323.C9057AD65@slim.kubism.ku.dk>

Full_Name: Martin Keller-Ressel
Version: 2.1.1
OS: Windows 2000
Submission from: (NULL) (128.130.51.88)


Sys.timezone() returns NA although the environment variable TZ is set to GMT
and
Sys.time() returns the correct time and date including the right timezone.
The problem is probably due to as.POSIXlt() which is used by Sys.timezone().

The problem has been confirmed by Uwe Ligges for R 2.1.1 on Windows NT 4.0.
See below for a R session outlining the problem:


> Sys.getenv("TZ")
   TZ 
"GMT" 
> Sys.time()
[1] "2005-07-07 10:28:11 GMT"
> Sys.timezone()
[1] NA

> Sys.timezone
function () 
{
    z <- as.POSIXlt(Sys.time())
    attr(z, "tzone")[2 + z$isdst]
}
<environment: namespace:base>

> z <- as.POSIXlt(Sys.time())
> attributes(z)
$names
[1] "sec"   "min"   "hour"  "mday"  "mon"   "year"  "wday"  "yday"  "isdst"

$class
[1] "POSIXt"  "POSIXlt"

$tzone
[1] "GMT"

> attr(z,"tzone")
[1] "GMT"
> z$isdst
[1] 0
> attr(z,"tzone")[2]
[1] NA


From maechler at stat.math.ethz.ch  Thu Jul  7 15:01:40 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu,  7 Jul 2005 15:01:40 +0200 (CEST)
Subject: [Rd] SSD() documentation (PR#7993)
Message-ID: <20050707130140.AAA45A3BF@slim.kubism.ku.dk>

>>>>> "arnima" == arnima  <arnima at u.washington.edu>
>>>>>     on Thu,  7 Jul 2005 05:40:53 +0200 (CEST) writes:

    arnima> There are a couple of harmless typos in the
    arnima> documentation for the stats::SSD function, where

    arnima>   "varianve" should be "variance"

    arnima>   "followint" should be "following"


Thank you,
I will fix these shortly.

Martin       

    arnima> Arni

    arnima> R 2.1.1pat 2005-07-04 on WinXP


From =?iso-8859-1?Q?Marie-H=E9l=E8ne?=  Thu Jul  7 16:16:15 2005
From: =?iso-8859-1?Q?Marie-H=E9l=E8ne?= (=?iso-8859-1?Q?Marie-H=E9l=E8ne?=)
Date: Thu, 07 Jul 2005 10:16:15 -0400
Subject: [Rd] Problem with dyn.load...or else...
In-Reply-To: <42CC6D3F.3020608@stats.uwo.ca>
References: <6.2.1.2.1.20050706190146.0234a740@magellan.umontreal.ca>
	<42CC6D3F.3020608@stats.uwo.ca>
Message-ID: <6.2.1.2.1.20050707101340.02321418@magellan.umontreal.ca>

At 19:46 2005-07-06, you wrote:
>Marie-H?l?ne Ouellette wrote:
>>Hi everybody,
>>I'm working on Mac OS X and R-2.1.0 (by the way, sorry for the multiple 
>>emails last time, had a technical problem, and thanks for the 
>>constructive comments.)
>>I have a .R function which calls a .C function.  The R function's name is 
>>K_MEANSR.R and the other is K_MEANSC.C.
>>I compile it with 'R CMD SHLIB K_MEANSC.C' in the terminal.  I get both 
>>.so and .o files.
>>I use the function
>>  > dyn.load ('K_MEANSC.so')
>>with no error.  We can, I believe, see here that it is loaded:
>>
>>  > getLoadedDLLs()
>> 
>>Filename
>>base base
>>grDevices 
>>/Library/Frameworks/R.framework/Resources/library/grDevices/libs/grDevices.so
>>stats /Library/Frameworks/R.framework/Resources/library/stats/libs/stats.so
>>methods 
>>/Library/Frameworks/R.framework/Resources/library/methods/libs/methods.so
>>K_MEANSC 
>>/Users/admin/Desktop/Marie/Marie_labo_29_juin/K-means_versions/MAC/K_MEANSC.so
>>R_X11 /Library/Frameworks/R.framework/Resources/modules/R_X11.so
>>            Dynamic.Lookup
>>base               FALSE
>>grDevices          FALSE
>>stats              FALSE
>>methods            FALSE
>>K_MEANSC            TRUE
>>R_X11               TRUE
>>
>>I then source the R code:
>>  > source(file.choose())
>>Construct a matrix that I will use for the analysis:
>>  > tab<-c(1,1,3,4,6,6,3,5,7,67,5,6,65,3,5,1,5,42,3,567,6,4,7,7)
>>  > tab<-matrix(tab,6,4)
>>And try to use the function:
>>  > K_MEANSR(tab,centers=c(2,4))
>>[1] "AA"
>>[1] "AAA"
>>[1] "A"
>>[1] "B"
>>Error in .C("K_MEANSC", xrows = as.integer(xrows), xcols = 
>>as.integer(xcols),  :
>>          "C" function name not in load table
>>Everything that is printed on the screen is correct, but why does it says 
>>that 'K_MEANSC' function is not in load table??? It then just stops at 
>>that stage of the .R function.
>
>What does your declaration of the function look like in the K_MEANSC.C 
>file?  R needs to know the name of the exported function, not the name of 
>the .so file.
>
>Duncan Murdoch


It's in the form:

K_MEANSC<- function(arguments...)
{

}
So the name of my .C function is also K_MEANSC...
Marie-H?l?ne



==========================================================
Marie-H?l?ne Ouellette
UNIVERSITE DE MONTR?AL
D?partement de sciences biologiques
T?l. (514) 343-6111 poste 1233


From murdoch at stats.uwo.ca  Thu Jul  7 16:28:26 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 07 Jul 2005 10:28:26 -0400
Subject: [Rd] Problem with dyn.load...or else...
In-Reply-To: <6.2.1.2.1.20050707101340.02321418@magellan.umontreal.ca>
References: <6.2.1.2.1.20050706190146.0234a740@magellan.umontreal.ca>	<42CC6D3F.3020608@stats.uwo.ca>
	<6.2.1.2.1.20050707101340.02321418@magellan.umontreal.ca>
Message-ID: <42CD3C0A.6010609@stats.uwo.ca>

On 7/7/2005 10:16 AM, Marie-H?l?ne Ouellette wrote:
> At 19:46 2005-07-06, you wrote:
>>Marie-H?l?ne Ouellette wrote:
>>>Hi everybody,
>>>I'm working on Mac OS X and R-2.1.0 (by the way, sorry for the multiple 
>>>emails last time, had a technical problem, and thanks for the 
>>>constructive comments.)
>>>I have a .R function which calls a .C function.  The R function's name is 
>>>K_MEANSR.R and the other is K_MEANSC.C.
>>>I compile it with 'R CMD SHLIB K_MEANSC.C' in the terminal.  I get both 
>>>.so and .o files.
>>>I use the function
>>>  > dyn.load ('K_MEANSC.so')
>>>with no error.  We can, I believe, see here that it is loaded:
>>>
>>>  > getLoadedDLLs()
>>> 
>>>Filename
>>>base base
>>>grDevices 
>>>/Library/Frameworks/R.framework/Resources/library/grDevices/libs/grDevices.so
>>>stats /Library/Frameworks/R.framework/Resources/library/stats/libs/stats.so
>>>methods 
>>>/Library/Frameworks/R.framework/Resources/library/methods/libs/methods.so
>>>K_MEANSC 
>>>/Users/admin/Desktop/Marie/Marie_labo_29_juin/K-means_versions/MAC/K_MEANSC.so
>>>R_X11 /Library/Frameworks/R.framework/Resources/modules/R_X11.so
>>>            Dynamic.Lookup
>>>base               FALSE
>>>grDevices          FALSE
>>>stats              FALSE
>>>methods            FALSE
>>>K_MEANSC            TRUE
>>>R_X11               TRUE
>>>
>>>I then source the R code:
>>>  > source(file.choose())
>>>Construct a matrix that I will use for the analysis:
>>>  > tab<-c(1,1,3,4,6,6,3,5,7,67,5,6,65,3,5,1,5,42,3,567,6,4,7,7)
>>>  > tab<-matrix(tab,6,4)
>>>And try to use the function:
>>>  > K_MEANSR(tab,centers=c(2,4))
>>>[1] "AA"
>>>[1] "AAA"
>>>[1] "A"
>>>[1] "B"
>>>Error in .C("K_MEANSC", xrows = as.integer(xrows), xcols = 
>>>as.integer(xcols),  :
>>>          "C" function name not in load table
>>>Everything that is printed on the screen is correct, but why does it says 
>>>that 'K_MEANSC' function is not in load table??? It then just stops at 
>>>that stage of the .R function.
>>
>>What does your declaration of the function look like in the K_MEANSC.C 
>>file?  R needs to know the name of the exported function, not the name of 
>>the .so file.
>>
>>Duncan Murdoch
> 
> 
> It's in the form:
> 
> K_MEANSC<- function(arguments...)
> {
> 
> }
> So the name of my .C function is also K_MEANSC...

No, you misunderstood.  That's R code; I was asking about the C language 
code that you want .C("K_MEANSC", xrows = as.integer(xrows) ... to call.

Duncan Murdoch


From pkleiweg at xs4all.nl  Thu Jul  7 16:32:50 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Thu, 7 Jul 2005 16:32:50 +0200 (CEST)
Subject: [Rd] Brewer colours
Message-ID: <Pine.LNX.4.44.0507071604530.1062-100000@kleigh.nl>


Anyone who is interested in using optimal colour palettes should
look at the work of Cindy Brewer: www.colorbrewer.org

I have written code to use her colour schemes in R. It is
included below. Perhaps someone may find this interesting enough
to work into a package.

Included also is a function showpalette, which was posted here a
while back. I don't remember who wrote it.

I have copied all the palettes from colorbrewer with the maximum
number of colours (which varies per palette). I have written a
function that translates these colours directly to rgb, or
through interpolation if you need a larger (or smaller) palette.
If you need a smaller palette, you may have to go to
www.colorbrewer.org for optimal results.

There are three types of palettes:
- Sequential, from minimal (light) to maximal (dark).
  There is no white in the original palettes. I added white.
- Diverging, from one extreme (dark) through light to another
  extreme (dark, another colour).
- Qualitative, no particular order.

To view a palette with the original colours:

   > showpalette(brewer2rgb(brewerSequential.YlGnBl))

To view the same palette, interpolated to another number of
colours:

   > showpalette(brewer2rgb(brewerSequential.YlGnBl, 19))

Notes:

  1. Interpolating Qualitative palettes does not work. You can't
     get more colours. If you need less, go to www.colorbrewer.org

  2. The palettes are tested to consist of colours that are
     optimally distinguishable to the human eye. Not all
     palettes may be useful in all circumstances or media. See
     www.colorbrewer.org for specs per palette and per number of
     colours. Interpolating to more colours will loose the
     distinction.

The code:

# www.colorbrewer.org

brewerSequential.PuBu <- array(data = c(
255,255,255,
255,247,251,
236,231,242,
208,209,230,
166,189,219,
116,169,207,
54,144,192,
5,112,176,
4,90,141,
2,56,88),
dim = c(3, 10))

brewerSequential.YlGnBl <- array(data = c(
255,255,255,
255,255,217,
237,248,177,
199,233,180,
127,205,187,
65,182,196,
29,145,192,
34,94,168,
37,52,148,
8,29,88),
dim = c(3, 10))

brewerSequential.GnBu <- array(data = c(
255,255,255,
247,252,240,
224,243,219,
204,235,197,
168,221,181,
123,204,196,
78,179,211,
43,140,190,
8,104,172,
8,64,129),
dim = c(3, 10))

brewerSequential.YlGn <- array(data = c(
255,255,255,
255,255,229,
247,252,185,
217,240,163,
173,221,142,
120,198,121,
65,171,93,
35,132,67,
0,104,55,
0,69,41),
dim = c(3, 10))

brewerSequential.BuGn <- array(data = c(
255,255,255,
247,252,253,
229,245,249,
204,236,230,
153,216,201,
102,194,164,
65,174,118,
35,139,69,
0,109,44,
0,68,27),
dim = c(3, 10))

brewerSequential.OrRd <- array(data = c(
255,255,255,
255,247,236,
254,232,200,
253,212,158,
253,187,132,
252,141,89,
239,101,72,
215,48,31,
179,0,0,
127,0,0),
dim = c(3, 10))

brewerSequential.PuBuGn <- array(data = c(
255,255,255,
255,247,251,
236,226,240,
208,209,230,
166,189,219,
103,169,207,
54,144,192,
2,129,138,
1,108,89,
1,70,54),
dim = c(3, 10))

brewerSequential.BuPu <- array(data = c(
255,255,255,
247,252,253,
224,236,244,
191,211,230,
158,188,218,
140,150,198,
140,107,177,
136,65,157,
129,15,124,
77,0,75),
dim = c(3, 10))

brewerSequential.RdPu <- array(data = c(
255,255,255,
255,247,243,
253,224,221,
252,197,192,
250,159,181,
247,104,161,
221,52,151,
174,1,126,
122,1,119,
73,0,106),
dim = c(3, 10))

brewerSequential.PuRd <- array(data = c(
255,255,255,
247,244,249,
231,225,239,
212,185,218,
201,148,199,
223,101,176,
231,41,138,
206,18,86,
152,0,67,
103,0,31),
dim = c(3, 10))

brewerSequential.YlOrRd <- array(data = c(
255,255,255,
255,255,204,
255,237,160,
254,217,118,
254,178,76,
253,141,60,
252,78,42,
227,26,28,
189,0,38,
128,0,38),
dim = c(3, 10))

brewerSequential.YlOrBr <- array(data = c(
255,255,255,
255,255,229,
255,247,188,
254,227,145,
254,196,79,
254,153,41,
236,112,20,
204,76,2,
153,52,4,
102,37,6),
dim = c(3, 10))

brewerSequential.Purples <- array(data = c(
255,255,255,
252,251,253,
239,237,245,
218,218,235,
188,189,220,
158,154,200,
128,125,186,
106,81,163,
84,39,143,
63,0,125),
dim = c(3, 10))

brewerSequential.Blues <- array(data = c(
255,255,255,
247,251,255,
222,235,247,
198,219,239,
158,202,225,
107,174,214,
66,146,198,
33,113,181,
8,81,156,
8,48,107),
dim = c(3, 10))

brewerSequential.Greens <- array(data = c(
255,255,255,
247,252,245,
229,245,224,
199,233,192,
161,217,155,
116,196,118,
65,171,93,
35,139,69,
0,109,44,
0,68,27),
dim = c(3, 10))

brewerSequential.Oranges <- array(data = c(
255,255,255,
255,245,235,
254,230,206,
253,208,162,
253,174,107,
253,141,60,
241,105,19,
217,72,1,
166,54,3,
127,39,4),
dim = c(3, 10))

brewerSequential.Reds <- array(data = c(
255,255,255,
255,245,240,
254,224,210,
252,187,161,
252,146,114,
251,106,74,
239,59,44,
203,24,29,
165,15,21,
103,0,13),
dim = c(3, 10))

brewerSequential.Greys <- array(data = c(
255,255,255,
240,240,240,
217,217,217,
189,189,189,
150,150,150,
115,115,115,
82,82,82,
37,37,37,
0,0,0),
dim = c(3, 9))

brewerDiverging.PuOr <- array(data = c(
127,59,8,
179,88,6,
224,130,20,
253,184,99,
254,224,182,
247,247,247,
216,218,235,
178,171,210,
128,115,172,
84,39,136,
45,0,75),
dim = c(3, 11))

brewerDiverging.BrGr <- array(data = c(
84,48,5,
140,81,10,
191,129,45,
223,194,125,
246,232,195,
245,245,245,
199,234,229,
128,205,193,
53,151,143,
1,102,94,
0,60,48),
dim = c(3, 11))

brewerDiverging.PRGr <- array(data = c(
64,0,75,
118,42,131,
153,112,171,
194,165,207,
231,212,232,
247,247,247,
217,244,211,
168,216,183,
90,174,97,
27,120,55,
0,68,27),
dim = c(3, 11))

brewerDiverging.PiYG <- array(data = c(
142,1,82,
197,27,125,
222,119,174,
241,182,218,
253,224,239,
247,247,247,
230,245,208,
184,225,134,
127,188,65,
77,146,33,
39,100,25),
dim = c(3, 11))

brewerDiverging.RdBu <- array(data = c(
103,0,31,
178,24,43,
214,96,77,
244,165,130,
253,219,199,
247,247,247,
209,229,240,
146,197,222,
67,147,195,
33,102,172,
5,48,97),
dim = c(3, 11))

brewerDiverging.RdGy <- array(data = c(
103,0,31,
178,24,43,
214,96,77,
244,165,130,
253,219,199,
255,255,255,
224,224,224,
186,186,186,
135,135,135,
77,77,77,
26,26,26),
dim = c(3, 11))

brewerDiverging.RYB <- array(data = c(
165,0,38,
215,48,39,
244,109,67,
253,174,97,
254,224,144,
255,255,191,
224,243,248,
171,217,233,
116,173,209,
69,117,180,
49,54,149),
dim = c(3, 11))

brewerDiverging.spectral <- array(data = c(
158,1,66,
213,62,79,
244,109,67,
253,174,97,
254,224,139,
255,255,191,
230,245,152,
171,221,164,
102,194,165,
50,136,189,
94,79,162),
dim = c(3, 11))

brewerDiverging.RYG <- array(data = c(
165,0,38,
215,48,39,
244,109,67,
253,174,97,
254,224,139,
255,255,191,
217,239,139,
166,217,106,
102,189,99,
26,152,80,
0,104,55),
dim = c(3, 11))

brewerQualitative.Set3 <- array(data = c(
141,211,199,
255,255,179,
190,186,218,
251,128,114,
128,177,211,
253,180,98,
179,222,105,
252,205,229,
217,217,217,
188,128,189,
204,235,197,
255,237,111),
dim = c(3, 12))

brewerQualitative.Pastel1 <- array(data = c(
251,180,174,
179,205,227,
204,235,197,
222,203,228,
254,217,166,
255,255,204,
229,216,189,
253,218,236,
242,242,242),
dim = c(3, 9))

brewerQualitative.Set1 <- array(data = c(
228,26,28,
55,126,184,
77,175,74,
152,78,163,
255,127,0,
255,255,51,
166,86,40,
247,129,191,
153,153,153),
dim = c(3, 9))

brewerQualitative.Paired <- array(data = c(
166,206,227,
31,120,180,
178,223,138,
51,160,44,
251,154,153,
227,26,28,
253,191,111,
255,127,0,
202,178,214,
106,61,154,
255,255,153),
dim = c(3, 11))

brewerQualitative.Pastel2 <- array(data = c(
179,226,205,
253,205,172,
203,213,232,
244,202,228,
230,245,201,
255,242,174,
241,226,204,
204,204,204),
dim = c(3, 8))

brewerQualitative.Set2 <- array(data = c(
102,194,165,
252,141,98,
141,160,203,
231,138,195,
166,216,84,
255,217,47,
229,196,148,
179,179,179),
dim = c(3, 8))

brewerQualitative.Dark2 <- array(data = c(
27,158,119,
217,95,2,
117,112,179,
231,41,138,
102,166,30,
230,171,2,
166,118,29,
102,102,102),
dim = c(3, 8))

brewerQualitative.Accents <- array(data = c(
127,201,127,
190,174,212,
253,192,134,
255,255,153,
56,108,176,
240,2,127,
191,91,23,
102,102,102),
dim = c(3, 8))

brewer2rgb <- function(col, n = NA) {
  if (is.na(n)) {
    rgb(col[1, ] / 255, col[2, ] / 255, col[3, ] / 255)
  } else {
    seqin  <- seq(0, 1, length = ncol(col))
    seqout <- seq(0, 1, length = n)
    r <- predict(smooth.spline(seqin, col[1, ] / 255), seqout)$y
    g <- predict(smooth.spline(seqin, col[2, ] / 255), seqout)$y
    b <- predict(smooth.spline(seqin, col[3, ] / 255), seqout)$y
    r[r < 0] <- 0 ; r[r > 1] <- 1
    g[g < 0] <- 0 ; g[g > 1] <- 1
    b[b < 0] <- 0 ; b[b > 1] <- 1
    rgb(r, g, b)
  }
}

brewerRemap1 <- function(col, n) {
  seqin  <- seq(0, 1, length = ncol(col))
  seqout <- seq(0, 1, length = n)
  r <- predict(smooth.spline(seqin, col[1, ] / 255), seqout)$y
  g <- predict(smooth.spline(seqin, col[2, ] / 255), seqout)$y
  b <- predict(smooth.spline(seqin, col[3, ] / 255), seqout)$y
  r[r < 0] <- 0 ; r[r > 1] <- 1
  g[g < 0] <- 0 ; g[g > 1] <- 1
  b[b < 0] <- 0 ; b[b > 1] <- 1
  for (i in 1:n) {
    cat(r[i], g[i], b[i], "\n")
  }
}

brewerRemap255 <- function(col, n) {
  seqin  <- seq(0, 255, length = ncol(col))
  seqout <- seq(0, 255, length = n)
  r <- as.integer(predict(smooth.spline(seqin, col[1, ]), seqout)$y + .5)
  g <- as.integer(predict(smooth.spline(seqin, col[2, ]), seqout)$y + .5)
  b <- as.integer(predict(smooth.spline(seqin, col[3, ]), seqout)$y + .5)
  r[r < 0] <- 0 ; r[r > 255] <- 255
  g[g < 0] <- 0 ; g[g > 255] <- 255
  b[b < 0] <- 0 ; b[b > 255] <- 255
  for (i in 1:n) {
    cat(r[i], g[i], b[i], "\n")
  }
}

showpalette <- function (palette) {
  n <- length(palette)
  rgb2hsv <- function(v) rgb(v[1], v[2], v[3])
  x <- seq(0, 1, length=n)
  rgb.m <- matrix(col2rgb(palette) / 255, ncol=3,, byrow=TRUE,
                  dimnames=list(as.character(seq(length=n)),
                    c("red","green","blue")))
  hsv.v <- apply(rgb.m, 1, rgb2hsv)

  opar <- par("fig", "plt")
  par(fig=c(0,1,0,0.7), plt=c(0.15,0.9,0.2,0.95))
  plot(NA, xlim=c(-0.01,1.01), ylim=c(-0.01,1.01), xlab="Spectrum",
       ylab="", xaxs="i", yaxs="i", axes=FALSE)
  title(ylab="Value", mgp=c(3.5,0,0))
  matlines(x, rgb.m, col=colnames(rgb.m), lty=1, lwd=3)
  matpoints(x, rgb.m, col=colnames(rgb.m), pch=16)
  axis(1, at=0:1)
  axis(2, at=0:1, las=1)
  par(fig=c(0,1,0.75,0.9), plt=c(0.08,0.97,0,1), new=TRUE)
  midpoints <- barplot(rep(1,n), col=hsv.v, border=FALSE, space=FALSE,
                       axes=FALSE)
  axis(1, at=midpoints, labels=1:n, lty=0, cex.axis=0.6)
  par(opar)
}


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From andy_liaw at merck.com  Thu Jul  7 16:38:44 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 7 Jul 2005 10:38:44 -0400
Subject: [Rd] Brewer colours
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFA64EA73@usctmx1106.Merck.com>

Do you mean something like:
http://cran.r-project.org/src/contrib/Descriptions/RColorBrewer.html
?

Andy

> From: Peter Kleiweg
> 
> 
> Anyone who is interested in using optimal colour palettes should
> look at the work of Cindy Brewer: www.colorbrewer.org
> 
> I have written code to use her colour schemes in R. It is
> included below. Perhaps someone may find this interesting enough
> to work into a package.
> 
> Included also is a function showpalette, which was posted here a
> while back. I don't remember who wrote it.
> 
> I have copied all the palettes from colorbrewer with the maximum
> number of colours (which varies per palette). I have written a
> function that translates these colours directly to rgb, or
> through interpolation if you need a larger (or smaller) palette.
> If you need a smaller palette, you may have to go to
> www.colorbrewer.org for optimal results.
> 
> There are three types of palettes:
> - Sequential, from minimal (light) to maximal (dark).
>   There is no white in the original palettes. I added white.
> - Diverging, from one extreme (dark) through light to another
>   extreme (dark, another colour).
> - Qualitative, no particular order.
> 
> To view a palette with the original colours:
> 
>    > showpalette(brewer2rgb(brewerSequential.YlGnBl))
> 
> To view the same palette, interpolated to another number of
> colours:
> 
>    > showpalette(brewer2rgb(brewerSequential.YlGnBl, 19))
> 
> Notes:
> 
>   1. Interpolating Qualitative palettes does not work. You can't
>      get more colours. If you need less, go to www.colorbrewer.org
> 
>   2. The palettes are tested to consist of colours that are
>      optimally distinguishable to the human eye. Not all
>      palettes may be useful in all circumstances or media. See
>      www.colorbrewer.org for specs per palette and per number of
>      colours. Interpolating to more colours will loose the
>      distinction.
> 
> The code:
> 
> # www.colorbrewer.org
> 
> brewerSequential.PuBu <- array(data = c(
> 255,255,255,
> 255,247,251,
> 236,231,242,
> 208,209,230,
> 166,189,219,
> 116,169,207,
> 54,144,192,
> 5,112,176,
> 4,90,141,
> 2,56,88),
> dim = c(3, 10))
> 
> brewerSequential.YlGnBl <- array(data = c(
> 255,255,255,
> 255,255,217,
> 237,248,177,
> 199,233,180,
> 127,205,187,
> 65,182,196,
> 29,145,192,
> 34,94,168,
> 37,52,148,
> 8,29,88),
> dim = c(3, 10))
> 
> brewerSequential.GnBu <- array(data = c(
> 255,255,255,
> 247,252,240,
> 224,243,219,
> 204,235,197,
> 168,221,181,
> 123,204,196,
> 78,179,211,
> 43,140,190,
> 8,104,172,
> 8,64,129),
> dim = c(3, 10))
> 
> brewerSequential.YlGn <- array(data = c(
> 255,255,255,
> 255,255,229,
> 247,252,185,
> 217,240,163,
> 173,221,142,
> 120,198,121,
> 65,171,93,
> 35,132,67,
> 0,104,55,
> 0,69,41),
> dim = c(3, 10))
> 
> brewerSequential.BuGn <- array(data = c(
> 255,255,255,
> 247,252,253,
> 229,245,249,
> 204,236,230,
> 153,216,201,
> 102,194,164,
> 65,174,118,
> 35,139,69,
> 0,109,44,
> 0,68,27),
> dim = c(3, 10))
> 
> brewerSequential.OrRd <- array(data = c(
> 255,255,255,
> 255,247,236,
> 254,232,200,
> 253,212,158,
> 253,187,132,
> 252,141,89,
> 239,101,72,
> 215,48,31,
> 179,0,0,
> 127,0,0),
> dim = c(3, 10))
> 
> brewerSequential.PuBuGn <- array(data = c(
> 255,255,255,
> 255,247,251,
> 236,226,240,
> 208,209,230,
> 166,189,219,
> 103,169,207,
> 54,144,192,
> 2,129,138,
> 1,108,89,
> 1,70,54),
> dim = c(3, 10))
> 
> brewerSequential.BuPu <- array(data = c(
> 255,255,255,
> 247,252,253,
> 224,236,244,
> 191,211,230,
> 158,188,218,
> 140,150,198,
> 140,107,177,
> 136,65,157,
> 129,15,124,
> 77,0,75),
> dim = c(3, 10))
> 
> brewerSequential.RdPu <- array(data = c(
> 255,255,255,
> 255,247,243,
> 253,224,221,
> 252,197,192,
> 250,159,181,
> 247,104,161,
> 221,52,151,
> 174,1,126,
> 122,1,119,
> 73,0,106),
> dim = c(3, 10))
> 
> brewerSequential.PuRd <- array(data = c(
> 255,255,255,
> 247,244,249,
> 231,225,239,
> 212,185,218,
> 201,148,199,
> 223,101,176,
> 231,41,138,
> 206,18,86,
> 152,0,67,
> 103,0,31),
> dim = c(3, 10))
> 
> brewerSequential.YlOrRd <- array(data = c(
> 255,255,255,
> 255,255,204,
> 255,237,160,
> 254,217,118,
> 254,178,76,
> 253,141,60,
> 252,78,42,
> 227,26,28,
> 189,0,38,
> 128,0,38),
> dim = c(3, 10))
> 
> brewerSequential.YlOrBr <- array(data = c(
> 255,255,255,
> 255,255,229,
> 255,247,188,
> 254,227,145,
> 254,196,79,
> 254,153,41,
> 236,112,20,
> 204,76,2,
> 153,52,4,
> 102,37,6),
> dim = c(3, 10))
> 
> brewerSequential.Purples <- array(data = c(
> 255,255,255,
> 252,251,253,
> 239,237,245,
> 218,218,235,
> 188,189,220,
> 158,154,200,
> 128,125,186,
> 106,81,163,
> 84,39,143,
> 63,0,125),
> dim = c(3, 10))
> 
> brewerSequential.Blues <- array(data = c(
> 255,255,255,
> 247,251,255,
> 222,235,247,
> 198,219,239,
> 158,202,225,
> 107,174,214,
> 66,146,198,
> 33,113,181,
> 8,81,156,
> 8,48,107),
> dim = c(3, 10))
> 
> brewerSequential.Greens <- array(data = c(
> 255,255,255,
> 247,252,245,
> 229,245,224,
> 199,233,192,
> 161,217,155,
> 116,196,118,
> 65,171,93,
> 35,139,69,
> 0,109,44,
> 0,68,27),
> dim = c(3, 10))
> 
> brewerSequential.Oranges <- array(data = c(
> 255,255,255,
> 255,245,235,
> 254,230,206,
> 253,208,162,
> 253,174,107,
> 253,141,60,
> 241,105,19,
> 217,72,1,
> 166,54,3,
> 127,39,4),
> dim = c(3, 10))
> 
> brewerSequential.Reds <- array(data = c(
> 255,255,255,
> 255,245,240,
> 254,224,210,
> 252,187,161,
> 252,146,114,
> 251,106,74,
> 239,59,44,
> 203,24,29,
> 165,15,21,
> 103,0,13),
> dim = c(3, 10))
> 
> brewerSequential.Greys <- array(data = c(
> 255,255,255,
> 240,240,240,
> 217,217,217,
> 189,189,189,
> 150,150,150,
> 115,115,115,
> 82,82,82,
> 37,37,37,
> 0,0,0),
> dim = c(3, 9))
> 
> brewerDiverging.PuOr <- array(data = c(
> 127,59,8,
> 179,88,6,
> 224,130,20,
> 253,184,99,
> 254,224,182,
> 247,247,247,
> 216,218,235,
> 178,171,210,
> 128,115,172,
> 84,39,136,
> 45,0,75),
> dim = c(3, 11))
> 
> brewerDiverging.BrGr <- array(data = c(
> 84,48,5,
> 140,81,10,
> 191,129,45,
> 223,194,125,
> 246,232,195,
> 245,245,245,
> 199,234,229,
> 128,205,193,
> 53,151,143,
> 1,102,94,
> 0,60,48),
> dim = c(3, 11))
> 
> brewerDiverging.PRGr <- array(data = c(
> 64,0,75,
> 118,42,131,
> 153,112,171,
> 194,165,207,
> 231,212,232,
> 247,247,247,
> 217,244,211,
> 168,216,183,
> 90,174,97,
> 27,120,55,
> 0,68,27),
> dim = c(3, 11))
> 
> brewerDiverging.PiYG <- array(data = c(
> 142,1,82,
> 197,27,125,
> 222,119,174,
> 241,182,218,
> 253,224,239,
> 247,247,247,
> 230,245,208,
> 184,225,134,
> 127,188,65,
> 77,146,33,
> 39,100,25),
> dim = c(3, 11))
> 
> brewerDiverging.RdBu <- array(data = c(
> 103,0,31,
> 178,24,43,
> 214,96,77,
> 244,165,130,
> 253,219,199,
> 247,247,247,
> 209,229,240,
> 146,197,222,
> 67,147,195,
> 33,102,172,
> 5,48,97),
> dim = c(3, 11))
> 
> brewerDiverging.RdGy <- array(data = c(
> 103,0,31,
> 178,24,43,
> 214,96,77,
> 244,165,130,
> 253,219,199,
> 255,255,255,
> 224,224,224,
> 186,186,186,
> 135,135,135,
> 77,77,77,
> 26,26,26),
> dim = c(3, 11))
> 
> brewerDiverging.RYB <- array(data = c(
> 165,0,38,
> 215,48,39,
> 244,109,67,
> 253,174,97,
> 254,224,144,
> 255,255,191,
> 224,243,248,
> 171,217,233,
> 116,173,209,
> 69,117,180,
> 49,54,149),
> dim = c(3, 11))
> 
> brewerDiverging.spectral <- array(data = c(
> 158,1,66,
> 213,62,79,
> 244,109,67,
> 253,174,97,
> 254,224,139,
> 255,255,191,
> 230,245,152,
> 171,221,164,
> 102,194,165,
> 50,136,189,
> 94,79,162),
> dim = c(3, 11))
> 
> brewerDiverging.RYG <- array(data = c(
> 165,0,38,
> 215,48,39,
> 244,109,67,
> 253,174,97,
> 254,224,139,
> 255,255,191,
> 217,239,139,
> 166,217,106,
> 102,189,99,
> 26,152,80,
> 0,104,55),
> dim = c(3, 11))
> 
> brewerQualitative.Set3 <- array(data = c(
> 141,211,199,
> 255,255,179,
> 190,186,218,
> 251,128,114,
> 128,177,211,
> 253,180,98,
> 179,222,105,
> 252,205,229,
> 217,217,217,
> 188,128,189,
> 204,235,197,
> 255,237,111),
> dim = c(3, 12))
> 
> brewerQualitative.Pastel1 <- array(data = c(
> 251,180,174,
> 179,205,227,
> 204,235,197,
> 222,203,228,
> 254,217,166,
> 255,255,204,
> 229,216,189,
> 253,218,236,
> 242,242,242),
> dim = c(3, 9))
> 
> brewerQualitative.Set1 <- array(data = c(
> 228,26,28,
> 55,126,184,
> 77,175,74,
> 152,78,163,
> 255,127,0,
> 255,255,51,
> 166,86,40,
> 247,129,191,
> 153,153,153),
> dim = c(3, 9))
> 
> brewerQualitative.Paired <- array(data = c(
> 166,206,227,
> 31,120,180,
> 178,223,138,
> 51,160,44,
> 251,154,153,
> 227,26,28,
> 253,191,111,
> 255,127,0,
> 202,178,214,
> 106,61,154,
> 255,255,153),
> dim = c(3, 11))
> 
> brewerQualitative.Pastel2 <- array(data = c(
> 179,226,205,
> 253,205,172,
> 203,213,232,
> 244,202,228,
> 230,245,201,
> 255,242,174,
> 241,226,204,
> 204,204,204),
> dim = c(3, 8))
> 
> brewerQualitative.Set2 <- array(data = c(
> 102,194,165,
> 252,141,98,
> 141,160,203,
> 231,138,195,
> 166,216,84,
> 255,217,47,
> 229,196,148,
> 179,179,179),
> dim = c(3, 8))
> 
> brewerQualitative.Dark2 <- array(data = c(
> 27,158,119,
> 217,95,2,
> 117,112,179,
> 231,41,138,
> 102,166,30,
> 230,171,2,
> 166,118,29,
> 102,102,102),
> dim = c(3, 8))
> 
> brewerQualitative.Accents <- array(data = c(
> 127,201,127,
> 190,174,212,
> 253,192,134,
> 255,255,153,
> 56,108,176,
> 240,2,127,
> 191,91,23,
> 102,102,102),
> dim = c(3, 8))
> 
> brewer2rgb <- function(col, n = NA) {
>   if (is.na(n)) {
>     rgb(col[1, ] / 255, col[2, ] / 255, col[3, ] / 255)
>   } else {
>     seqin  <- seq(0, 1, length = ncol(col))
>     seqout <- seq(0, 1, length = n)
>     r <- predict(smooth.spline(seqin, col[1, ] / 255), seqout)$y
>     g <- predict(smooth.spline(seqin, col[2, ] / 255), seqout)$y
>     b <- predict(smooth.spline(seqin, col[3, ] / 255), seqout)$y
>     r[r < 0] <- 0 ; r[r > 1] <- 1
>     g[g < 0] <- 0 ; g[g > 1] <- 1
>     b[b < 0] <- 0 ; b[b > 1] <- 1
>     rgb(r, g, b)
>   }
> }
> 
> brewerRemap1 <- function(col, n) {
>   seqin  <- seq(0, 1, length = ncol(col))
>   seqout <- seq(0, 1, length = n)
>   r <- predict(smooth.spline(seqin, col[1, ] / 255), seqout)$y
>   g <- predict(smooth.spline(seqin, col[2, ] / 255), seqout)$y
>   b <- predict(smooth.spline(seqin, col[3, ] / 255), seqout)$y
>   r[r < 0] <- 0 ; r[r > 1] <- 1
>   g[g < 0] <- 0 ; g[g > 1] <- 1
>   b[b < 0] <- 0 ; b[b > 1] <- 1
>   for (i in 1:n) {
>     cat(r[i], g[i], b[i], "\n")
>   }
> }
> 
> brewerRemap255 <- function(col, n) {
>   seqin  <- seq(0, 255, length = ncol(col))
>   seqout <- seq(0, 255, length = n)
>   r <- as.integer(predict(smooth.spline(seqin, col[1, ]), 
> seqout)$y + .5)
>   g <- as.integer(predict(smooth.spline(seqin, col[2, ]), 
> seqout)$y + .5)
>   b <- as.integer(predict(smooth.spline(seqin, col[3, ]), 
> seqout)$y + .5)
>   r[r < 0] <- 0 ; r[r > 255] <- 255
>   g[g < 0] <- 0 ; g[g > 255] <- 255
>   b[b < 0] <- 0 ; b[b > 255] <- 255
>   for (i in 1:n) {
>     cat(r[i], g[i], b[i], "\n")
>   }
> }
> 
> showpalette <- function (palette) {
>   n <- length(palette)
>   rgb2hsv <- function(v) rgb(v[1], v[2], v[3])
>   x <- seq(0, 1, length=n)
>   rgb.m <- matrix(col2rgb(palette) / 255, ncol=3,, byrow=TRUE,
>                   dimnames=list(as.character(seq(length=n)),
>                     c("red","green","blue")))
>   hsv.v <- apply(rgb.m, 1, rgb2hsv)
> 
>   opar <- par("fig", "plt")
>   par(fig=c(0,1,0,0.7), plt=c(0.15,0.9,0.2,0.95))
>   plot(NA, xlim=c(-0.01,1.01), ylim=c(-0.01,1.01), xlab="Spectrum",
>        ylab="", xaxs="i", yaxs="i", axes=FALSE)
>   title(ylab="Value", mgp=c(3.5,0,0))
>   matlines(x, rgb.m, col=colnames(rgb.m), lty=1, lwd=3)
>   matpoints(x, rgb.m, col=colnames(rgb.m), pch=16)
>   axis(1, at=0:1)
>   axis(2, at=0:1, las=1)
>   par(fig=c(0,1,0.75,0.9), plt=c(0.08,0.97,0,1), new=TRUE)
>   midpoints <- barplot(rep(1,n), col=hsv.v, border=FALSE, space=FALSE,
>                        axes=FALSE)
>   axis(1, at=midpoints, labels=1:n, lty=0, cex.axis=0.6)
>   par(opar)
> }
> 
> 
> -- 
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
>


From pkleiweg at xs4all.nl  Thu Jul  7 16:51:05 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Thu, 7 Jul 2005 16:51:05 +0200 (CEST)
Subject: [Rd] Brewer colours
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFA64EA73@usctmx1106.Merck.com>
Message-ID: <Pine.LNX.4.44.0507071649270.5185-100000@kleigh.nl>

Liaw, Andy schreef op de 7e dag van de hooimaand van het jaar 2005:

> Do you mean something like:
> http://cran.r-project.org/src/contrib/Descriptions/RColorBrewer.html
> ?

Now I feel silly. Well, it was a nice exercise.


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From maechler at stat.math.ethz.ch  Thu Jul  7 18:27:56 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu,  7 Jul 2005 18:27:56 +0200 (CEST)
Subject: [Rd] write.csv (PR#7992)
Message-ID: <20050707162756.E6D97A49F@slim.kubism.ku.dk>

This topic already came up about a week ago on R-devel
 Subject: write.csv suggestion

 [ too bad that "R-devel" is not available via  RSiteSearch() ...
    {I could send you the back archives, Jon, if you are interested} ]

There, Brian Ripley, explained why this is not a bug, since
it works as documented, "CSV" files are well defined entities
and you can always use write.table() if you want to be flexible.

Brian also changed things for R-devel {to be R 2.2.x} such that
its help page, see
   http://stat.ethz.ch/R-manual/R-devel/library/base/html/write.table.html ,
now  has

> Usage:
> 	 . . . .
>
>      write.csv(...)
>      write.csv2(...)
>
> . . . .
>
>
> Arguments:
> 	 . . . .
>
>      ...: arguments to 'write.table': 'col.names', 'sep', 'dec' and
>           'qmethod' cannot be altered. 

which should make the intention of the write.csv*() wrapper
functions a bit more clear.

Regards,
Martin Maechler, ETH Zurich

>>>>> "arnima" == arnima  <arnima at u.washington.edu>
>>>>>     on Thu,  7 Jul 2005 05:21:43 +0200 (CEST) writes:

    arnima> The write.csv() function is currently implemented as
    arnima> function (..., col.names=NA, sep=",", qmethod="double")
    arnima> {
    arnima> write.table(..., col.names=NA, sep=",", qmethod="double")
    arnima> }

    arnima> Surely, it should be

    arnima> function (..., col.names=NA, sep=",", qmethod="double")
    arnima> {
    arnima> write.table(..., col.names=col.names, sep=sep, qmethod=qmethod)
    arnima> }

    arnima> so that the user arguments serve a purpose. This notion is reflected in 
    arnima> the implementation of read.csv(), for example, where sep=sep, quote=quote, 
    arnima> etc.


    arnima> Arni

    arnima> R 2.1.1pat 2005-07-04 on WinXP


From ggrothendieck at gmail.com  Thu Jul  7 18:38:30 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 7 Jul 2005 12:38:30 -0400
Subject: [Rd] write.csv (PR#7992)
In-Reply-To: <20050707162756.E6D97A49F@slim.kubism.ku.dk>
References: <20050707162756.E6D97A49F@slim.kubism.ku.dk>
Message-ID: <971536df05070709387b3f64d6@mail.gmail.com>

This may not be inconsistent with the documentation but it is 
inconsistent with good practice.  Wrappers should, in general,
set the default values, as the poster rightly indicated, and not the 
values themselves.  Its not a coincidence that multiple people 
have mentioned this.

On 7/7/05, maechler at stat.math.ethz.ch <maechler at stat.math.ethz.ch> wrote:
> This topic already came up about a week ago on R-devel
>  Subject: write.csv suggestion
> 
>  [ too bad that "R-devel" is not available via  RSiteSearch() ...
>    {I could send you the back archives, Jon, if you are interested} ]
> 
> There, Brian Ripley, explained why this is not a bug, since
> it works as documented, "CSV" files are well defined entities
> and you can always use write.table() if you want to be flexible.
> 
> Brian also changed things for R-devel {to be R 2.2.x} such that
> its help page, see
>   http://stat.ethz.ch/R-manual/R-devel/library/base/html/write.table.html ,
> now  has
> 
> > Usage:
> >        . . . .
> >
> >      write.csv(...)
> >      write.csv2(...)
> >
> > . . . .
> >
> >
> > Arguments:
> >        . . . .
> >
> >      ...: arguments to 'write.table': 'col.names', 'sep', 'dec' and
> >           'qmethod' cannot be altered.
> 
> which should make the intention of the write.csv*() wrapper
> functions a bit more clear.
> 
> Regards,
> Martin Maechler, ETH Zurich
> 
> >>>>> "arnima" == arnima  <arnima at u.washington.edu>
> >>>>>     on Thu,  7 Jul 2005 05:21:43 +0200 (CEST) writes:
> 
>    arnima> The write.csv() function is currently implemented as
>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
>    arnima> {
>    arnima> write.table(..., col.names=NA, sep=",", qmethod="double")
>    arnima> }
> 
>    arnima> Surely, it should be
> 
>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
>    arnima> {
>    arnima> write.table(..., col.names=col.names, sep=sep, qmethod=qmethod)
>    arnima> }
> 
>    arnima> so that the user arguments serve a purpose. This notion is reflected in
>    arnima> the implementation of read.csv(), for example, where sep=sep, quote=quote,
>    arnima> etc.
> 
> 
>    arnima> Arni
> 
>    arnima> R 2.1.1pat 2005-07-04 on WinXP
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Thu Jul  7 20:22:53 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 07 Jul 2005 14:22:53 -0400
Subject: [Rd] write.csv (PR#7992)
In-Reply-To: <971536df05070709387b3f64d6@mail.gmail.com>
References: <20050707162756.E6D97A49F@slim.kubism.ku.dk>
	<971536df05070709387b3f64d6@mail.gmail.com>
Message-ID: <42CD72FD.6010401@stats.uwo.ca>

On 7/7/2005 12:38 PM, Gabor Grothendieck wrote:
> This may not be inconsistent with the documentation but it is 
> inconsistent with good practice.  Wrappers should, in general,
> set the default values, as the poster rightly indicated, and not the 
> values themselves.  Its not a coincidence that multiple people 
> have mentioned this.

The old header (which teasingly displayed some parameters and then 
ignored them) was clearly wrong, but the new one doesn't display the 
parameters.

This is pretty reasonable practice.  It's a wrapper that provides a 
subset of the functionality, but is guaranteed to produce a legal file 
of the type it claims to produce.  I don't see anything wrong with it.

Duncan Murdoch


> 
> On 7/7/05, maechler at stat.math.ethz.ch <maechler at stat.math.ethz.ch> wrote:
>> This topic already came up about a week ago on R-devel
>>  Subject: write.csv suggestion
>> 
>>  [ too bad that "R-devel" is not available via  RSiteSearch() ...
>>    {I could send you the back archives, Jon, if you are interested} ]
>> 
>> There, Brian Ripley, explained why this is not a bug, since
>> it works as documented, "CSV" files are well defined entities
>> and you can always use write.table() if you want to be flexible.
>> 
>> Brian also changed things for R-devel {to be R 2.2.x} such that
>> its help page, see
>>   http://stat.ethz.ch/R-manual/R-devel/library/base/html/write.table.html ,
>> now  has
>> 
>> > Usage:
>> >        . . . .
>> >
>> >      write.csv(...)
>> >      write.csv2(...)
>> >
>> > . . . .
>> >
>> >
>> > Arguments:
>> >        . . . .
>> >
>> >      ...: arguments to 'write.table': 'col.names', 'sep', 'dec' and
>> >           'qmethod' cannot be altered.
>> 
>> which should make the intention of the write.csv*() wrapper
>> functions a bit more clear.
>> 
>> Regards,
>> Martin Maechler, ETH Zurich
>> 
>> >>>>> "arnima" == arnima  <arnima at u.washington.edu>
>> >>>>>     on Thu,  7 Jul 2005 05:21:43 +0200 (CEST) writes:
>> 
>>    arnima> The write.csv() function is currently implemented as
>>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
>>    arnima> {
>>    arnima> write.table(..., col.names=NA, sep=",", qmethod="double")
>>    arnima> }
>> 
>>    arnima> Surely, it should be
>> 
>>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
>>    arnima> {
>>    arnima> write.table(..., col.names=col.names, sep=sep, qmethod=qmethod)
>>    arnima> }
>> 
>>    arnima> so that the user arguments serve a purpose. This notion is reflected in
>>    arnima> the implementation of read.csv(), for example, where sep=sep, quote=quote,
>>    arnima> etc.
>> 
>> 
>>    arnima> Arni
>> 
>>    arnima> R 2.1.1pat 2005-07-04 on WinXP
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Thu Jul  7 20:44:18 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 7 Jul 2005 14:44:18 -0400
Subject: [Rd] write.csv (PR#7992)
In-Reply-To: <42CD72FD.6010401@stats.uwo.ca>
References: <20050707162756.E6D97A49F@slim.kubism.ku.dk>
	<971536df05070709387b3f64d6@mail.gmail.com>
	<42CD72FD.6010401@stats.uwo.ca>
Message-ID: <971536df050707114429187846@mail.gmail.com>

I just checked the svn.  I did not realize it had been changed that way
so you are right, its better and possibly marginally acceptable although
I do think it would be preferable to set the defaults rather than the
values though I would no longer argue as strongly.

On 7/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> On 7/7/2005 12:38 PM, Gabor Grothendieck wrote:
> > This may not be inconsistent with the documentation but it is
> > inconsistent with good practice.  Wrappers should, in general,
> > set the default values, as the poster rightly indicated, and not the
> > values themselves.  Its not a coincidence that multiple people
> > have mentioned this.
> 
> The old header (which teasingly displayed some parameters and then
> ignored them) was clearly wrong, but the new one doesn't display the
> parameters.
> 
> This is pretty reasonable practice.  It's a wrapper that provides a
> subset of the functionality, but is guaranteed to produce a legal file
> of the type it claims to produce.  I don't see anything wrong with it.
> 
> Duncan Murdoch
> 
> 
> >
> > On 7/7/05, maechler at stat.math.ethz.ch <maechler at stat.math.ethz.ch> wrote:
> >> This topic already came up about a week ago on R-devel
> >>  Subject: write.csv suggestion
> >>
> >>  [ too bad that "R-devel" is not available via  RSiteSearch() ...
> >>    {I could send you the back archives, Jon, if you are interested} ]
> >>
> >> There, Brian Ripley, explained why this is not a bug, since
> >> it works as documented, "CSV" files are well defined entities
> >> and you can always use write.table() if you want to be flexible.
> >>
> >> Brian also changed things for R-devel {to be R 2.2.x} such that
> >> its help page, see
> >>   http://stat.ethz.ch/R-manual/R-devel/library/base/html/write.table.html ,
> >> now  has
> >>
> >> > Usage:
> >> >        . . . .
> >> >
> >> >      write.csv(...)
> >> >      write.csv2(...)
> >> >
> >> > . . . .
> >> >
> >> >
> >> > Arguments:
> >> >        . . . .
> >> >
> >> >      ...: arguments to 'write.table': 'col.names', 'sep', 'dec' and
> >> >           'qmethod' cannot be altered.
> >>
> >> which should make the intention of the write.csv*() wrapper
> >> functions a bit more clear.
> >>
> >> Regards,
> >> Martin Maechler, ETH Zurich
> >>
> >> >>>>> "arnima" == arnima  <arnima at u.washington.edu>
> >> >>>>>     on Thu,  7 Jul 2005 05:21:43 +0200 (CEST) writes:
> >>
> >>    arnima> The write.csv() function is currently implemented as
> >>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
> >>    arnima> {
> >>    arnima> write.table(..., col.names=NA, sep=",", qmethod="double")
> >>    arnima> }
> >>
> >>    arnima> Surely, it should be
> >>
> >>    arnima> function (..., col.names=NA, sep=",", qmethod="double")
> >>    arnima> {
> >>    arnima> write.table(..., col.names=col.names, sep=sep, qmethod=qmethod)
> >>    arnima> }
> >>
> >>    arnima> so that the user arguments serve a purpose. This notion is reflected in
> >>    arnima> the implementation of read.csv(), for example, where sep=sep, quote=quote,
> >>    arnima> etc.
> >>
> >>
> >>    arnima> Arni
> >>
> >>    arnima> R 2.1.1pat 2005-07-04 on WinXP
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From sethfalcon at gmail.com  Fri Jul  8 06:06:33 2005
From: sethfalcon at gmail.com (Seth Falcon)
Date: Thu, 07 Jul 2005 21:06:33 -0700
Subject: [Rd] .Rbuildignore {was: ... upgrading an R (WINDOWS)
	installation ..}
In-Reply-To: <42CC4F67.8010908@stats.uwo.ca> (Duncan Murdoch's message of
	"Wed, 06 Jul 2005 17:38:47 -0400")
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<da15bn$1r5$1@sea.gmane.org>
	<971536df05063012166bfa590b@mail.gmail.com>
	<da1jlv$et5$1@sea.gmane.org>
	<971536df050630152014c8f70@mail.gmail.com>
	<971536df05070605244d022d9e@mail.gmail.com>
	<17099.55467.732587.886792@stat.math.ethz.ch>
	<971536df05070607087c72249f@mail.gmail.com>
	<42CC402D.5010307@statistik.uni-dortmund.de>
	<971536df050706141429eeaa48@mail.gmail.com>
	<42CC4DAD.1000100@statistik.uni-dortmund.de>
	<42CC4F67.8010908@stats.uwo.ca>
Message-ID: <m2slyq7xh2.fsf@macaroni.local>

On  6 Jul 2005, murdoch at stats.uwo.ca wrote:
> In fact, on Windows R is not case sensitive in the 1st or 3rd word
> on the line "R CMD install", only in the 2nd, so I can see Gabor's
> point.  However, I have to admit I always use "Rcmd install"; I put
> the "R CMD ..." version in place to help Unix refugees.

And this is appreciated by those of us that want to build packages on
different platforms in an automated fashion :-)

Although I agree with other posters in this thread that ports
generally work best when they behave as natively as possible, it is
the case that many R users use R on *both* Windows and Linux and
because of this, the consistency is very helpful.

+ seth


From gavin.simpson at ucl.ac.uk  Fri Jul  8 13:07:26 2005
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Fri, 08 Jul 2005 12:07:26 +0100
Subject: [Rd] Interpretting R profiling output (was More efficient code?)
In-Reply-To: <1120676089.6814.18.camel@gsimpson.geog.ucl.ac.uk>
References: <1120676089.6814.18.camel@gsimpson.geog.ucl.ac.uk>
Message-ID: <1120820846.10211.18.camel@gsimpson.geog.ucl.ac.uk>

On Wed, 2005-07-06 at 19:54 +0100, Gavin Simpson wrote:
> Dear List,
> 

I fixed up the code in coinertiaI to only return the bits I needed from
La.svd() within the permutations - thus producing a 10% speed up. I am
still a little unclear about the results from Rprof() (below).

Do the timings under self time for .Call and .Fortran include the time
spent actually running the called compiled code or are they the overhead
of setting up the calls to the compiled code?

Many thanks,

Gav

> 
> summaryRprof(filename = "Rprof.out")
> $by.self
>                      self.time self.pct total.time total.pct
> ".Call"                  50.40     59.6      50.40      59.6
> "%*%"                    10.50     12.4      10.50      12.4
> ".Fortran"                2.78      3.3       2.78       3.3
> "La.svd"                  2.52      3.0      57.98      68.6
> "^"                       2.48      2.9       2.48       2.9
> "t.default"               2.30      2.7       2.30       2.7
> "matrix"                  1.92      2.3       1.98       2.3
> "as.double"               1.78      2.1       2.70       3.2
> "list"                    0.88      1.0       0.88       1.0
> "as.double.default"       0.86      1.0       0.86       1.0
> "rep.default"             0.74      0.9       0.86       1.0
> "sum"                     0.72      0.9       2.58       3.1
> "!"                       0.50      0.6       0.50       0.6
> "diag"                    0.44      0.5       1.46       1.7
> "qr.coef"                 0.42      0.5       6.26       7.4
> "permtest"                0.38      0.4      83.60      98.9
> "is.finite"               0.38      0.4       0.38       0.4
> "storage.mode<-"          0.36      0.4       3.26       3.9
> "as.integer"              0.34      0.4       0.40       0.5
> "t"                       0.32      0.4       2.62       3.1
> "$"                       0.32      0.4       0.32       0.4
> "paste"                   0.28      0.3       0.54       0.6
> "teststat"                0.24      0.3      83.10      98.3
> "residualMatrix"          0.22      0.3      10.32      12.2
> "qr"                      0.20      0.2       1.24       1.5
> ...
> 
> $by.total
>                      total.time total.pct self.time self.pct
> "predcoca.perm"           84.50     100.0      0.00      0.0
> "permtest"                83.60      98.9      0.38      0.4
> "teststat"                83.10      98.3      0.24      0.3
> "coinertiaI"              73.24      86.7      0.18      0.2
> "La.svd"                  57.98      68.6      2.52      3.0
> ".Call"                   50.40      59.6     50.40     59.6
> "%*%"                     10.50      12.4     10.50     12.4
> "residualMatrix"          10.32      12.2      0.22      0.3
> "qr.coef"                  6.26       7.4      0.42      0.5
> "storage.mode<-"           3.26       3.9      0.36      0.4
> ".Fortran"                 2.78       3.3      2.78      3.3
> "as.double"                2.70       3.2      1.78      2.1
> "t"                        2.62       3.1      0.32      0.4
> "eval"                     2.62       3.1      0.14      0.2
> "sum"                      2.58       3.1      0.72      0.9
> ...
> 
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
Gavin Simpson                     [T] +44 (0)20 7679 5522
ENSIS Research Fellow             [F] +44 (0)20 7679 7565
ENSIS Ltd. & ECRC                 [E] gavin.simpsonATNOSPAMucl.ac.uk
UCL Department of Geography       [W] http://www.ucl.ac.uk/~ucfagls/cv/
26 Bedford Way                    [W] http://www.ucl.ac.uk/~ucfagls/
London.  WC1H 0AP.
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From murdoch at stats.uwo.ca  Fri Jul  8 13:31:37 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 08 Jul 2005 07:31:37 -0400
Subject: [Rd] Interpretting R profiling output (was More efficient code?)
In-Reply-To: <1120820846.10211.18.camel@gsimpson.geog.ucl.ac.uk>
References: <1120676089.6814.18.camel@gsimpson.geog.ucl.ac.uk>
	<1120820846.10211.18.camel@gsimpson.geog.ucl.ac.uk>
Message-ID: <42CE6419.1060104@stats.uwo.ca>

Gavin Simpson wrote:
> On Wed, 2005-07-06 at 19:54 +0100, Gavin Simpson wrote:
> 
>>Dear List,
>>
> 
> 
> I fixed up the code in coinertiaI to only return the bits I needed from
> La.svd() within the permutations - thus producing a 10% speed up. I am
> still a little unclear about the results from Rprof() (below).
> 
> Do the timings under self time for .Call and .Fortran include the time
> spent actually running the called compiled code or are they the overhead
> of setting up the calls to the compiled code?

They include both.  The profiler only sees R calls, it doesn't know what 
goes on within functions.  .Call() is an R call which internally calls 
some C function, but the profiler just sees the call to .Call.

Duncan Murdoch
> 
> Many thanks,
> 
> Gav
> 
> 
>>summaryRprof(filename = "Rprof.out")
>>$by.self
>>                     self.time self.pct total.time total.pct
>>".Call"                  50.40     59.6      50.40      59.6
>>"%*%"                    10.50     12.4      10.50      12.4
>>".Fortran"                2.78      3.3       2.78       3.3
>>"La.svd"                  2.52      3.0      57.98      68.6
>>"^"                       2.48      2.9       2.48       2.9
>>"t.default"               2.30      2.7       2.30       2.7
>>"matrix"                  1.92      2.3       1.98       2.3
>>"as.double"               1.78      2.1       2.70       3.2
>>"list"                    0.88      1.0       0.88       1.0
>>"as.double.default"       0.86      1.0       0.86       1.0
>>"rep.default"             0.74      0.9       0.86       1.0
>>"sum"                     0.72      0.9       2.58       3.1
>>"!"                       0.50      0.6       0.50       0.6
>>"diag"                    0.44      0.5       1.46       1.7
>>"qr.coef"                 0.42      0.5       6.26       7.4
>>"permtest"                0.38      0.4      83.60      98.9
>>"is.finite"               0.38      0.4       0.38       0.4
>>"storage.mode<-"          0.36      0.4       3.26       3.9
>>"as.integer"              0.34      0.4       0.40       0.5
>>"t"                       0.32      0.4       2.62       3.1
>>"$"                       0.32      0.4       0.32       0.4
>>"paste"                   0.28      0.3       0.54       0.6
>>"teststat"                0.24      0.3      83.10      98.3
>>"residualMatrix"          0.22      0.3      10.32      12.2
>>"qr"                      0.20      0.2       1.24       1.5
>>...
>>
>>$by.total
>>                     total.time total.pct self.time self.pct
>>"predcoca.perm"           84.50     100.0      0.00      0.0
>>"permtest"                83.60      98.9      0.38      0.4
>>"teststat"                83.10      98.3      0.24      0.3
>>"coinertiaI"              73.24      86.7      0.18      0.2
>>"La.svd"                  57.98      68.6      2.52      3.0
>>".Call"                   50.40      59.6     50.40     59.6
>>"%*%"                     10.50      12.4     10.50     12.4
>>"residualMatrix"          10.32      12.2      0.22      0.3
>>"qr.coef"                  6.26       7.4      0.42      0.5
>>"storage.mode<-"           3.26       3.9      0.36      0.4
>>".Fortran"                 2.78       3.3      2.78      3.3
>>"as.double"                2.70       3.2      1.78      2.1
>>"t"                        2.62       3.1      0.32      0.4
>>"eval"                     2.62       3.1      0.14      0.2
>>"sum"                      2.58       3.1      0.72      0.9
>>...
>>


From ligges at statistik.uni-dortmund.de  Fri Jul  8 13:47:18 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri,  8 Jul 2005 13:47:18 +0200 (CEST)
Subject: [Rd] axTicks on a reverse ylog plot (PR#7973)
Message-ID: <20050708114718.DD259103C4@slim.kubism.ku.dk>

Here we go:

the quick fix is really easy, just sorting stuff in axTicks() 
(.../src/library/graphics/R/axis.R, diff'ed against R-release) is 
sufficient:


--- axis.R
+++ axis-fix.R
@@ -29,7 +29,8 @@
              stop("invalid positive 'axp[3]'")
          if(is.null(usr)) usr <- par("usr")[if(is.x) 1:2 else 3:4]
          else if(!is.numeric(usr) || length(usr) != 2) stop("invalid 
'usr'")
-        ii <- round(log10(axp[1:2]))
+        ii <- round(log10(sort(axp[1:2])))
+        usr <- sort(usr)
          x10 <- 10^((ii[1] - (iC >= 2)):ii[2])
      r <- switch(iC,             ## axp[3]
              x10,            ## 1



BTW: In your R code below, you have to use (as documented)
   grid(equilogs = FALSE)


We might want to consider to change axTicks anyway:
We could return values from the internal axis() calculations
and therefore replace axTicks calculations by stuff that is much more 
reliable. Opinions?

The current equilogs default argument setting is inconvinient anyway,
because it does not fit with the current device setting for real axis 
ticks  (which can also be done in R, of course).

Uwe Ligges





mwtoews at sfu.ca wrote:

> There is still issues with the reversed y-log scale plot:
> 
> # Test case A: works as expected
> plot(10:100,log="y",ylim=c(100,11))
> grid()
> par("yaxp")
> 
> # Test case B: grid does not have horizontal lines; par("yaxp") is  
> different
> plot(1:100,log="y",ylim=c(100,10))
> grid()
> par("yaxp")
> 
> In the second test case, axTicks for the horizontal lines (in grid())  
> returns numeric(0) for spacing ... how do the tick marks get drawn in  
> the first place??
> -mt
> 
> --please do not edit the information below--
> 
> Version:
> platform = powerpc-apple-darwin8.1.0
> arch = powerpc
> os = darwin8.1.0
> system = powerpc, darwin8.1.0
> status = Patched
> major = 2
> minor = 1.1
> year = 2005
> month = 06
> day = 26
> language = R
> 
> Locale:
> en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> Search Path:
> .GlobalEnv, package:methods, package:stats, package:graphics,  
> package:grDevices, package:utils, package:datasets, Autoloads,  
> package:base
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Fri Jul  8 14:56:02 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 8 Jul 2005 08:56:02 -0400
Subject: [Rd] Error message using Packages | Install | Cancel
Message-ID: <971536df05070805564bd5de12@mail.gmail.com>

If we click on the Cancel button after the Packages | Install menu items in 
Windows 2.1.1 (dated 2005-06-23) it gives an error message.   There
really should
be no error here since we intended not to install anything -- that is why
we pressed Cancel.  This is what appears on the console:

> utils:::menuInstallPkgs()
Error in install.packages(NULL, .libPaths()[1], dependencies = TRUE,
type = type) :
        no packages were specified


From murdoch at stats.uwo.ca  Fri Jul  8 15:26:00 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Fri,  8 Jul 2005 15:26:00 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7998)
Message-ID: <20050708132600.0F61510406@slim.kubism.ku.dk>

Harold, I've taken a closer look at your example and I'd call this an 
Sweave bug.  It creates tempfiles each time you run it, and doesn't 
delete them at the end.  For example:

 > list.files(tempdir())
character(0)
 > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package = "utils")
 > Sweave(testfile, out="junk.tex")
Writing to file junk.tex
Processing code chunks ...
  1 : print term verbatim
  2 : term hide
  3 : echo print term verbatim
  4 : term verbatim
  5 : echo term verbatim
  6 : echo term verbatim eps pdf
  7 : echo term verbatim eps pdf

You can now run LaTeX on 'junk.tex'
 > list.files(tempdir())
  [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"  "Rf27095"
  [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"
 > Sweave(testfile, out="C:/temp/junk.tex")
Writing to file C:/temp/junk.tex
Processing code chunks ...
  1 : print term verbatim
  2 : term hide
  3 : echo print term verbatim
  4 : term verbatim
  5 : echo term verbatim
  6 : echo term verbatim eps pdf
  7 : echo term verbatim eps pdf

You can now run LaTeX on 'C:/temp/junk.tex'
 > list.files(tempdir())
  [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129" "Rf17288"
  [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095" "Rf2892"
[15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"  "Rf5551"
[22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"   "Rf7673"
 > unlink(list.files(tempdir(),full=T))
 > list.files(tempdir())
character(0)

Harold:  a workaround for this would be to wrap your Sweave call in 
something like this:

keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files

... Call Sweave here ...

temps <- list.files(tempdir(), full=TRUE)
unlink(temps[!(temps %in% keep)])  # delete the newly created ones


From HDoran at air.org  Fri Jul  8 15:36:30 2005
From: HDoran at air.org (HDoran@air.org)
Date: Fri,  8 Jul 2005 15:36:30 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7999)
Message-ID: <20050708133630.3F642103DA@slim.kubism.ku.dk>

This is great. Thank you for your help, but let me make sure I fully
understand. Here is the looping file I use to subset the data frame,
create a tex file, and Sweave it. This results in N number of tex files
where N is equal to the number of rows in the data frame.

list <- unique(wide$stuid)
master = "master.tex"
for (i in list){
     tmp1 <- subset(wide, stuid==i)
     tmp2 <- paste(i, "tex", sep=".")
     Sweave("fam_template.Rnw", output=tmp2)
     file.append("fam_master.tex", tmp2) 
}

If I follow correctly, I would need to place these commands inside the
loop as follows: 

list <- unique(wide$stuid)
master = "master.tex"
for (i in list){
     tmp1 <- subset(wide, stuid==i)
     tmp2 <- paste(i, "tex", sep=".")
     keep <- list.files(tempdir(), full=TRUE)  # keep previous temp
files
     Sweave("fam_template.Rnw", output=tmp2)
     file.append("fam_master.tex", tmp2)
     temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
keep)])  # delete the newly created ones 
}


Thank you for taking the time to look at this.

Harold

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch at stats.uwo.ca] 
Sent: Friday, July 08, 2005 9:28 AM
To: Duncan Murdoch
Cc: Doran, Harold; r-bugs at r-project.org; Uwe Ligges; Sean O'Riordain
Subject: Sweave resource leak: leftover temp files

Harold, I've taken a closer look at your example and I'd call this an
Sweave bug.  It creates tempfiles each time you run it, and doesn't
delete them at the end.  For example:

 > list.files(tempdir())
character(0)
 > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package =
"utils")  > Sweave(testfile, out="junk.tex") Writing to file junk.tex
Processing code chunks ...
  1 : print term verbatim
  2 : term hide
  3 : echo print term verbatim
  4 : term verbatim
  5 : echo term verbatim
  6 : echo term verbatim eps pdf
  7 : echo term verbatim eps pdf

You can now run LaTeX on 'junk.tex'
 > list.files(tempdir())
  [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"
"Rf27095"
  [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"
"Rf724"
 > Sweave(testfile, out="C:/temp/junk.tex") Writing to file
C:/temp/junk.tex Processing code chunks ...
  1 : print term verbatim
  2 : term hide
  3 : echo print term verbatim
  4 : term verbatim
  5 : echo term verbatim
  6 : echo term verbatim eps pdf
  7 : echo term verbatim eps pdf

You can now run LaTeX on 'C:/temp/junk.tex'
 > list.files(tempdir())
  [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129"
"Rf17288"
  [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095"
"Rf2892"
[15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"
"Rf5551"
[22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"
"Rf7673"
 > unlink(list.files(tempdir(),full=T))
 > list.files(tempdir())
character(0)

Harold:  a workaround for this would be to wrap your Sweave call in
something like this:

keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files

... Call Sweave here ...

temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
keep)])  # delete the newly created ones


From murdoch at stats.uwo.ca  Fri Jul  8 15:59:45 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 08 Jul 2005 09:59:45 -0400
Subject: [Rd] Sweave resource leak: leftover temp files
In-Reply-To: <88EAF3512A55DF46B06B1954AEF73F7409748D66@dc1ex2.air.org>
References: <88EAF3512A55DF46B06B1954AEF73F7409748D66@dc1ex2.air.org>
Message-ID: <42CE86D1.4010205@stats.uwo.ca>

On 7/8/2005 9:36 AM, Doran, Harold wrote:
> This is great. Thank you for your help, but let me make sure I fully
> understand. Here is the looping file I use to subset the data frame,
> create a tex file, and Sweave it. This results in N number of tex files
> where N is equal to the number of rows in the data frame.
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2) 
> }
> 
> If I follow correctly, I would need to place these commands inside the
> loop as follows: 
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      keep <- list.files(tempdir(), full=TRUE)  # keep previous temp
> files
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2)
>      temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
> keep)])  # delete the newly created ones 
> }

There's a wordwrapping error there:  the temps <- list.files(...) and 
unlink(temps...) should be on separate lines.

I'd also put them immediately after the Sweave call, but they should be 
fine where you have them.  (The advantage of putting them immediately 
after Sweave is that you don't need to think about the next line.  If it 
created a temp file and you wanted to keep it, you'd need the extra 
lines first.  But it doesn't, so it doesn't really matter.)

Duncan Murdoch
> 
> 
> Thank you for taking the time to look at this.
> 
> Harold
> 
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch at stats.uwo.ca] 
> Sent: Friday, July 08, 2005 9:28 AM
> To: Duncan Murdoch
> Cc: Doran, Harold; r-bugs at r-project.org; Uwe Ligges; Sean O'Riordain
> Subject: Sweave resource leak: leftover temp files
> 
> Harold, I've taken a closer look at your example and I'd call this an
> Sweave bug.  It creates tempfiles each time you run it, and doesn't
> delete them at the end.  For example:
> 
>  > list.files(tempdir())
> character(0)
>  > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package =
> "utils")  > Sweave(testfile, out="junk.tex") Writing to file junk.tex
> Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"
> "Rf27095"
>   [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"
> "Rf724"
>  > Sweave(testfile, out="C:/temp/junk.tex") Writing to file
> C:/temp/junk.tex Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'C:/temp/junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129"
> "Rf17288"
>   [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095"
> "Rf2892"
> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"
> "Rf5551"
> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"
> "Rf7673"
>  > unlink(list.files(tempdir(),full=T))
>  > list.files(tempdir())
> character(0)
> 
> Harold:  a workaround for this would be to wrap your Sweave call in
> something like this:
> 
> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
> 
> ... Call Sweave here ...
> 
> temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
> keep)])  # delete the newly created ones
> 
>


From murdoch at stats.uwo.ca  Fri Jul  8 16:09:52 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 08 Jul 2005 10:09:52 -0400
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7999)
In-Reply-To: <20050708133630.3F642103DA@slim.kubism.ku.dk>
References: <20050708133630.3F642103DA@slim.kubism.ku.dk>
Message-ID: <42CE8930.4060009@stats.uwo.ca>

One additional note:  followups should only go to R-bugs if they have 
the bug number on them (like this message does).  Otherwise you end up 
generating a separate bug report (PR#7999 was created in your reply to 
my submission of PR#7998).  Usually it's best just to cc R-devel, unless 
you really have additional information to add to the bug report.

We're planning (or in the process of?) changing the bug reporting 
system, so this is only a temporary inconvenience.

Duncan Murdoch

On 7/8/2005 9:36 AM, HDoran at air.org wrote:
> This is great. Thank you for your help, but let me make sure I fully
> understand. Here is the looping file I use to subset the data frame,
> create a tex file, and Sweave it. This results in N number of tex files
> where N is equal to the number of rows in the data frame.
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2) 
> }
> 
> If I follow correctly, I would need to place these commands inside the
> loop as follows: 
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      keep <- list.files(tempdir(), full=TRUE)  # keep previous temp
> files
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2)
>      temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
> keep)])  # delete the newly created ones 
> }
> 
> 
> Thank you for taking the time to look at this.
> 
> Harold
> 
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch at stats.uwo.ca] 
> Sent: Friday, July 08, 2005 9:28 AM
> To: Duncan Murdoch
> Cc: Doran, Harold; r-bugs at r-project.org; Uwe Ligges; Sean O'Riordain
> Subject: Sweave resource leak: leftover temp files
> 
> Harold, I've taken a closer look at your example and I'd call this an
> Sweave bug.  It creates tempfiles each time you run it, and doesn't
> delete them at the end.  For example:
> 
>  > list.files(tempdir())
> character(0)
>  > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package =
> "utils")  > Sweave(testfile, out="junk.tex") Writing to file junk.tex
> Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"
> "Rf27095"
>   [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"
> "Rf724"
>  > Sweave(testfile, out="C:/temp/junk.tex") Writing to file
> C:/temp/junk.tex Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'C:/temp/junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129"
> "Rf17288"
>   [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095"
> "Rf2892"
> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"
> "Rf5551"
> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"
> "Rf7673"
>  > unlink(list.files(tempdir(),full=T))
>  > list.files(tempdir())
> character(0)
> 
> Harold:  a workaround for this would be to wrap your Sweave call in
> something like this:
> 
> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
> 
> ... Call Sweave here ...
> 
> temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
> keep)])  # delete the newly created ones
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Fri Jul  8 16:17:33 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 8 Jul 2005 10:17:33 -0400
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7999)
In-Reply-To: <42CE8930.4060009@stats.uwo.ca>
References: <20050708133630.3F642103DA@slim.kubism.ku.dk>
	<42CE8930.4060009@stats.uwo.ca>
Message-ID: <971536df05070807172138a570@mail.gmail.com>

On 7/8/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:

> We're planning (or in the process of?) changing the bug reporting
> system, so this is only a temporary inconvenience.
> 

I think these points have been raised before but, just in case, some
aspects of this, if its changing anyways, that would be nice to see
would be:

- integration with svn
- expansion from bug tracking to issue, change and wishlist tracking

Also it would be nice to have a consistent standard way to:

- track issues, changes and wishlists in individual packages, not just in R


From murdoch at stats.uwo.ca  Fri Jul  8 16:28:02 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 08 Jul 2005 10:28:02 -0400
Subject: [Rd] [R] pairs() uses col argument for axes coloring
In-Reply-To: <d386700a05070805526a2f8164@mail.gmail.com>
References: <d386700a05070719276e6c3013@mail.gmail.com>	
	<42CE68CE.9040305@stats.uwo.ca>
	<d386700a05070805526a2f8164@mail.gmail.com>
Message-ID: <42CE8D72.9080806@stats.uwo.ca>

On 7/8/2005 8:52 AM, Olaf Mersmann wrote:
> Hi Duncan,
> 
> On 7/8/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
>> Olaf Mersmann wrote:
> *snip*
>> > Looking at the source for pairs() suggests, that this is the case
>> > because col is part of the ... argument list which is passed on to
>> > localAxis (and from there to axis). Wouldn't it be more approptiate to
>> > use the same color box() uses to draw the border around each
>> > scatterplot? If yes, should I open a bug for this or how would such a
>> > feature request be handled?
>> 
>> The best way is to get the source to pairs() (from the SVN repository
>> in https://svn.r-project.org/R/trunk/src/library/graphics/R/pairs.R not
>> from looking at it in R), work out what changes are needed, and submit
>> them as a patch.  You can post the patch in the R-bugs list, or just
>> send it to me.   Thanks!
> 
> I attached my patch to pairs.R to fix the problem. They way I 'solved'
> the issue is by simply ignoring any col argument that is passed to
> localAxis and from there to axis. At first I had thought about adding
> col explicitly to the argument list of pairs() and then only passing
> it on to the panel functions, but that would possibly break existing
> code (for example the example panel.cor() in the pairs() man page).

I like your fix.  It makes pairs() act like plot() in its treatment of 
col and col.axis parameters.

I do find the col.axis treatment a little weird (affecting the labels, 
but not the axis), but that's a different issue.

I'll commit your patch to R-devel and R-patched.

Duncan Murdoch


From p.dalgaard at biostat.ku.dk  Fri Jul  8 17:00:56 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 08 Jul 2005 17:00:56 +0200
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7999)
In-Reply-To: <971536df05070807172138a570@mail.gmail.com>
References: <20050708133630.3F642103DA@slim.kubism.ku.dk>
	<42CE8930.4060009@stats.uwo.ca>
	<971536df05070807172138a570@mail.gmail.com>
Message-ID: <x2pstt2vh3.fsf@biostat.ku.dk>

Gabor Grothendieck <ggrothendieck at gmail.com> writes:

> On 7/8/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> 
> > We're planning (or in the process of?) changing the bug reporting
> > system, so this is only a temporary inconvenience.
> > 
> 
> I think these points have been raised before but, just in case, some
> aspects of this, if its changing anyways, that would be nice to see
> would be:
> 
> - integration with svn
> - expansion from bug tracking to issue, change and wishlist tracking
> 
> Also it would be nice to have a consistent standard way to:
> 
> - track issues, changes and wishlists in individual packages, not just in R

Well, since I'm going on vacation as of *now*, it's not going to
happen until August...

Re. the last point, it does require that package maintainers play
along. They have not been very good at closing issues in the Add-on
section of the current bug repo, which is why we currently recommend
users to approach the maintainer directly.

As a general matter, nobody is going to do bug repository maintenance
as a full-time job, so we need to go with a turnkey solution like
Bugzilla. We're likely going to lose the mailing list integration as
we know it -- we can probably send a copy of all bug reports to
r-devel, but there's not going to be a nice way to save the followups
automagically. Users will also likely be requested to obtain a
password and login before submitting a bug.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From murdoch at stats.uwo.ca  Fri Jul  8 17:23:37 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 08 Jul 2005 11:23:37 -0400
Subject: [Rd] Error message using Packages | Install | Cancel
In-Reply-To: <971536df05070805564bd5de12@mail.gmail.com>
References: <971536df05070805564bd5de12@mail.gmail.com>
Message-ID: <42CE9A79.3040909@stats.uwo.ca>

On 7/8/2005 8:56 AM, Gabor Grothendieck wrote:
> If we click on the Cancel button after the Packages | Install menu items in 
> Windows 2.1.1 (dated 2005-06-23) it gives an error message.   There
> really should
> be no error here since we intended not to install anything -- that is why
> we pressed Cancel.  This is what appears on the console:
> 
>> utils:::menuInstallPkgs()
> Error in install.packages(NULL, .libPaths()[1], dependencies = TRUE,
> type = type) :
>         no packages were specified

I'd consider a patch to fix this, but it doesn't look serious enough to 
make it onto my list of things to do myself.

Duncan Murdoch


From HDoran at air.org  Fri Jul  8 17:25:50 2005
From: HDoran at air.org (Doran, Harold)
Date: Fri, 8 Jul 2005 11:25:50 -0400
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7999)
Message-ID: <88EAF3512A55DF46B06B1954AEF73F7409748DDD@dc1ex2.air.org>

Duncan and d-level

Your proposed solution works well and seems to resolve the issue. I
previously noted to you that it seemed to run slower, but this is not
true. I restarted R and it is equally as fast. Thank you for your
attention to this matter.

-Harold

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch at stats.uwo.ca] 
Sent: Friday, July 08, 2005 10:10 AM
To: Doran, Harold
Cc: r-devel at stat.math.ethz.ch
Subject: Re: [Rd] Sweave resource leak: leftover temp files (PR#7999)

One additional note:  followups should only go to R-bugs if they have
the bug number on them (like this message does).  Otherwise you end up
generating a separate bug report (PR#7999 was created in your reply to
my submission of PR#7998).  Usually it's best just to cc R-devel, unless
you really have additional information to add to the bug report.

We're planning (or in the process of?) changing the bug reporting
system, so this is only a temporary inconvenience.

Duncan Murdoch

On 7/8/2005 9:36 AM, HDoran at air.org wrote:
> This is great. Thank you for your help, but let me make sure I fully 
> understand. Here is the looping file I use to subset the data frame, 
> create a tex file, and Sweave it. This results in N number of tex 
> files where N is equal to the number of rows in the data frame.
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2) }
> 
> If I follow correctly, I would need to place these commands inside the

> loop as follows:
> 
> list <- unique(wide$stuid)
> master = "master.tex"
> for (i in list){
>      tmp1 <- subset(wide, stuid==i)
>      tmp2 <- paste(i, "tex", sep=".")
>      keep <- list.files(tempdir(), full=TRUE)  # keep previous temp 
> files
>      Sweave("fam_template.Rnw", output=tmp2)
>      file.append("fam_master.tex", tmp2)
>      temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps 
> %in%
> keep)])  # delete the newly created ones }
> 
> 
> Thank you for taking the time to look at this.
> 
> Harold
> 
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch at stats.uwo.ca]
> Sent: Friday, July 08, 2005 9:28 AM
> To: Duncan Murdoch
> Cc: Doran, Harold; r-bugs at r-project.org; Uwe Ligges; Sean O'Riordain
> Subject: Sweave resource leak: leftover temp files
> 
> Harold, I've taken a closer look at your example and I'd call this an 
> Sweave bug.  It creates tempfiles each time you run it, and doesn't 
> delete them at the end.  For example:
> 
>  > list.files(tempdir())
> character(0)
>  > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package =
> "utils")  > Sweave(testfile, out="junk.tex") Writing to file junk.tex 
> Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"
> "Rf27095"
>   [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"
> "Rf724"
>  > Sweave(testfile, out="C:/temp/junk.tex") Writing to file 
> C:/temp/junk.tex Processing code chunks ...
>   1 : print term verbatim
>   2 : term hide
>   3 : echo print term verbatim
>   4 : term verbatim
>   5 : echo term verbatim
>   6 : echo term verbatim eps pdf
>   7 : echo term verbatim eps pdf
> 
> You can now run LaTeX on 'C:/temp/junk.tex'
>  > list.files(tempdir())
>   [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129"
> "Rf17288"
>   [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095"
> "Rf2892"
> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"
> "Rf5551"
> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"
> "Rf7673"
>  > unlink(list.files(tempdir(),full=T))
>  > list.files(tempdir())
> character(0)
> 
> Harold:  a workaround for this would be to wrap your Sweave call in 
> something like this:
> 
> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
> 
> ... Call Sweave here ...
> 
> temps <- list.files(tempdir(), full=TRUE) unlink(temps[!(temps %in%
> keep)])  # delete the newly created ones
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Fri Jul  8 17:39:30 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 8 Jul 2005 11:39:30 -0400
Subject: [Rd] Error message using Packages | Install | Cancel
In-Reply-To: <42CE9A79.3040909@stats.uwo.ca>
References: <971536df05070805564bd5de12@mail.gmail.com>
	<42CE9A79.3040909@stats.uwo.ca>
Message-ID: <971536df050708083965b75096@mail.gmail.com>

On 7/8/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> On 7/8/2005 8:56 AM, Gabor Grothendieck wrote:
> > If we click on the Cancel button after the Packages | Install menu items in
> > Windows 2.1.1 (dated 2005-06-23) it gives an error message.   There
> > really should
> > be no error here since we intended not to install anything -- that is why
> > we pressed Cancel.  This is what appears on the console:
> >
> >> utils:::menuInstallPkgs()
> > Error in install.packages(NULL, .libPaths()[1], dependencies = TRUE,
> > type = type) :
> >         no packages were specified
> 
> I'd consider a patch to fix this, but it doesn't look serious enough to
> make it onto my list of things to do myself.
> 
> Duncan Murdoch
> 

Sure. I will file a bug report so it does not get lost.


From ggrothendieck at gmail.com  Fri Jul  8 17:46:40 2005
From: ggrothendieck at gmail.com (ggrothendieck@gmail.com)
Date: Fri,  8 Jul 2005 17:46:40 +0200 (CEST)
Subject: [Rd] Packages | Install >Cancel gives error msg in Windows GUI
	(PR#8000)
Message-ID: <20050708154640.8770310406@slim.kubism.ku.dk>

Full_Name: G. Grothendieck
Version: R version 2.1.1, 2005-06-23
OS: Windows XP
Submission from: (NULL) (216.59.244.202)



In the Windows GUI, choosing the Packages Menu, then Install and then 
clicking on Cancel gives an error message saying that nothing was specified
to be installed:

> utils:::menuInstallPkgs()
Error in install.packages(NULL, .libPaths()[1], dependencies = TRUE, type =
type) : 
        no packages were specified

however, its not erroneous -- we intended not to install anything.  That
is why we pressed Cancel.

This was discussed on r-devel.  See:

https://www.stat.math.ethz.ch/pipermail/r-devel/2005-July/033923.html


From ligges at statistik.uni-dortmund.de  Fri Jul  8 17:53:29 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri,  8 Jul 2005 17:53:29 +0200 (CEST)
Subject: [Rd] pgamma(Inf, 1.1, 1.1) (PR#8001)
Message-ID: <20050708155329.81F10103D3@slim.kubism.ku.dk>

The call of

    pgamma(Inf, 1.1, 1.1)

does not finish on my machines within 5 minutes...
(both under Linux and Windows). Haven't looked in the sources yet.

Thanks to Dietrich Trenkler for bringing this up in a private discussion.

Uwe Ligges



--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = i386
  os = mingw32
  system = i386, mingw32
  status =
  major = 2
  minor = 1.1
  year = 2005
  month = 06
  day = 20
  language = R

Windows NT 4.0 (build 1381) Service Pack 6

Locale:
LC_COLLATE=German_Germany.1252;LC_CTYPE=German_Germany.1252;LC_MONETARY=German_Germany.1252;LC_NUMERIC=C;LC_TIME=German_Germany.1252

Search Path:
  .GlobalEnv, package:methods, package:stats, package:graphics, 
package:grDevices, package:datasets, package:utils, package:fortunes, 
Autoloads, package:base


From murdoch at stats.uwo.ca  Fri Jul  8 18:55:50 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Fri,  8 Jul 2005 18:55:50 +0200 (CEST)
Subject: [Rd] Packages | Install >Cancel gives error msg in Windows GUI
	(PR#8002)
Message-ID: <20050708165550.AF5BA103D3@slim.kubism.ku.dk>

On 7/8/2005 11:46 AM, ggrothendieck at gmail.com wrote:
> Full_Name: G. Grothendieck
> Version: R version 2.1.1, 2005-06-23
> OS: Windows XP
> Submission from: (NULL) (216.59.244.202)
> 
> 
> 
> In the Windows GUI, choosing the Packages Menu, then Install and then 
> clicking on Cancel gives an error message saying that nothing was specified
> to be installed:
> 
>> utils:::menuInstallPkgs()
> Error in install.packages(NULL, .libPaths()[1], dependencies = TRUE, type =
> type) : 
>         no packages were specified
> 
> however, its not erroneous -- we intended not to install anything.  That
> is why we pressed Cancel.
> 
> This was discussed on r-devel.  See:
> 
> https://www.stat.math.ethz.ch/pipermail/r-devel/2005-July/033923.html

My conclusion there was that this error message should not be appearing, 
but it's not worth my time to fix.  I'll move this bug report to the 
wishlist.

If someone wants to submit a patch to fix it, I'll look at it.

Duncan Murdoch


From kwright at eskimo.com  Fri Jul  8 21:15:15 2005
From: kwright at eskimo.com (kwright@eskimo.com)
Date: Fri, 8 Jul 2005 12:15:15 -0700 (PDT)
Subject: [Rd] Suggestion: Help users sort data frames
Message-ID: <28597.170.54.59.167.1120850115.squirrel@170.54.59.167>


I've noticed that a frequently asked question on R-help is how to sort a
data frame by multiple columns.  Since this question is asked so often,
making this task easier for users seems a worthwhile goal.

At a minimum, the following changes to the documentation would surely be
helpful and reduce email postings to R-help:

1. In the "See Also" section of the help page for 'sort' it currently says:
"order for sorting on or reordering multiple variables".
Appending the phrase "(including data frames)" could be helpful.

2. Include a simple example on sorting a data frame in the 'sort' help. 
In an ideal world this example should belong in the help for 'order', but
people are going to be reading the 'sort' page first.  Here's one example:

# Sort a data frame by multiple columns
d = data.frame(b=factor(c("Hi","Med","Hi","Low"),levels=c("Low","Med","Hi"),
               ordered=TRUE),
               x=c("A","D","A","C"),y=c(8,3,9,9),z=c(1,1,1,2))
d[order(d$b,d$z,d$y),]

3. It looks like the help page for 'order' only shows sorting of matrices
(and row-wise sorting at that!).  Since column-wise sorting is may be more
common, the example above might beneficially be included in the 'order'
help page as well.

A minor bug-report here: The help for 'order' includes this example:
  ## For character vectors we can make use of rank:
  cy <- as.character(y)
  rbind(x,y,z)[, order(x, -rank(y), z)]
I'm not sure what the intention was, but 'cy' is not used, so something
seems to be amis.



Alternatively, I wrote a formula-based function for sorting data frames
via calls like: sort.data.frame(~ -x +y +z, dat)
The function can be found here:
  http://tolstoy.newcastle.edu.au/R/help/04/09/4300.html
When emails to R-help ask how to sort data frames, responses often
reference this function so it seems to have been very helpful for people. 
I showed the function to Thomas Lumley and he said it looked nice but that
using a minus sign for reverse sorting is a bit anti-R flavored since a
minus sign usually means to omit terms from a formula.


Sincerely,

Kevin Wright


From ggrothendieck at gmail.com  Sat Jul  9 02:06:19 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 8 Jul 2005 20:06:19 -0400
Subject: [Rd] Suggestion: Help users sort data frames
In-Reply-To: <28597.170.54.59.167.1120850115.squirrel@170.54.59.167>
References: <28597.170.54.59.167.1120850115.squirrel@170.54.59.167>
Message-ID: <971536df05070817067f5165ad@mail.gmail.com>

This functionality does seem needed in base R to me too but
in the interim you could create a package to make it available on 
CRAN or if that seems excessive for just one function you could 
contact the author of one of the multi-author packages and see if 
they would include it in their package.  

On 7/8/05, kwright at eskimo.com <kwright at eskimo.com> wrote:
> 
> I've noticed that a frequently asked question on R-help is how to sort a
> data frame by multiple columns.  Since this question is asked so often,
> making this task easier for users seems a worthwhile goal.
> 
> At a minimum, the following changes to the documentation would surely be
> helpful and reduce email postings to R-help:
> 
> 1. In the "See Also" section of the help page for 'sort' it currently says:
> "order for sorting on or reordering multiple variables".
> Appending the phrase "(including data frames)" could be helpful.
> 
> 2. Include a simple example on sorting a data frame in the 'sort' help.
> In an ideal world this example should belong in the help for 'order', but
> people are going to be reading the 'sort' page first.  Here's one example:
> 
> # Sort a data frame by multiple columns
> d = data.frame(b=factor(c("Hi","Med","Hi","Low"),levels=c("Low","Med","Hi"),
>               ordered=TRUE),
>               x=c("A","D","A","C"),y=c(8,3,9,9),z=c(1,1,1,2))
> d[order(d$b,d$z,d$y),]
> 
> 3. It looks like the help page for 'order' only shows sorting of matrices
> (and row-wise sorting at that!).  Since column-wise sorting is may be more
> common, the example above might beneficially be included in the 'order'
> help page as well.
> 
> A minor bug-report here: The help for 'order' includes this example:
>  ## For character vectors we can make use of rank:
>  cy <- as.character(y)
>  rbind(x,y,z)[, order(x, -rank(y), z)]
> I'm not sure what the intention was, but 'cy' is not used, so something
> seems to be amis.
> 
> 
> 
> Alternatively, I wrote a formula-based function for sorting data frames
> via calls like: sort.data.frame(~ -x +y +z, dat)
> The function can be found here:
>  http://tolstoy.newcastle.edu.au/R/help/04/09/4300.html
> When emails to R-help ask how to sort data frames, responses often
> reference this function so it seems to have been very helpful for people.
> I showed the function to Thomas Lumley and he said it looked nice but that
> using a minus sign for reverse sorting is a bit anti-R flavored since a
> minus sign usually means to omit terms from a formula.
> 
> 
> Sincerely,
> 
> Kevin Wright
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jh910 at juno.com  Sat Jul  9 21:27:00 2005
From: jh910 at juno.com (J. Hosking)
Date: Sat, 09 Jul 2005 15:27:00 -0400
Subject: [Rd] qgamma with first argument 1
Message-ID: <dap8e5$7iu$1@sea.gmane.org>

   > qgamma(1,1.1)
   [1] Inf

as expected.  But for shape parameter between 0.16 and 1:

   > qgamma(1,.5)
   [1] NaN
   Warning message:
   NaNs produced in: qgamma(p, shape, scale, lower.tail, log.p)

and for shape parameter 0.16 or less:

   > qgamma(1,.1)
   [1] 99.42507

Arguments close to 1 give approximately correct results:

   > qgamma(1-1e-15,.5)
   [1] 32.05055
   > qgamma(1-1e-15,.1)
   [1] 28.8129





R version is the R 2.1.1 binary from CRAN:
   platform i386-pc-mingw32
   arch     i386
   os       mingw32
   system   i386, mingw32
   status
   major    2
   minor    1.1
   year     2005
   month    06
   day      20
   language R


From ripley at stats.ox.ac.uk  Mon Jul 11 08:59:06 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 11 Jul 2005 08:59:06 +0200 (CEST)
Subject: [Rd] Sys.timzone() returns NA - problem caused by as.POSIXlt?
	(PR#8003)
Message-ID: <20050711065906.5B36EA75A@slim.kubism.ku.dk>

This is not a bug in R: the documentation does say the result is 
OS-specific.

`GMT' is a not a proper timezone on Windows, so NA is a valid answer.
(Windows seems to use GMT to refer to the timezone of the UK, e.g.

> Sys.time()
[1] "2005-07-11 07:49:56 GMT Daylight Time"
> Sys.timezone()
[1] "GMT Daylight Time"

although I am in British Summer Time not GMT.)

I'll add yet another workaround for R-patched.


On Thu, 7 Jul 2005 mkeller at fam.tuwien.ac.at wrote:

> Full_Name: Martin Keller-Ressel
> Version: 2.1.1
> OS: Windows 2000
> Submission from: (NULL) (128.130.51.88)
>
>
> Sys.timezone() returns NA although the environment variable TZ is set to GMT
> and
> Sys.time() returns the correct time and date including the right timezone.
> The problem is probably due to as.POSIXlt() which is used by Sys.timezone().
>
> The problem has been confirmed by Uwe Ligges for R 2.1.1 on Windows NT 4.0.
> See below for a R session outlining the problem:
>
>
>> Sys.getenv("TZ")
>   TZ
> "GMT"
>> Sys.time()
> [1] "2005-07-07 10:28:11 GMT"
>> Sys.timezone()
> [1] NA
>
>> Sys.timezone
> function ()
> {
>    z <- as.POSIXlt(Sys.time())
>    attr(z, "tzone")[2 + z$isdst]
> }
> <environment: namespace:base>
>
>> z <- as.POSIXlt(Sys.time())
>> attributes(z)
> $names
> [1] "sec"   "min"   "hour"  "mday"  "mon"   "year"  "wday"  "yday"  "isdst"
>
> $class
> [1] "POSIXt"  "POSIXlt"
>
> $tzone
> [1] "GMT"
>
>> attr(z,"tzone")
> [1] "GMT"
>> z$isdst
> [1] 0
>> attr(z,"tzone")[2]
> [1] NA

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Mon Jul 11 09:36:27 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 11 Jul 2005 09:36:27 +0200
Subject: [Rd] qgamma with first argument 1
In-Reply-To: <dap8e5$7iu$1@sea.gmane.org>
References: <dap8e5$7iu$1@sea.gmane.org>
Message-ID: <17106.8571.506104.670879@stat.math.ethz.ch>

Thank you, Mr Hosking,

yes, this is a buglet.

I had started to fix this (and similar cases) 
--  using a C Macro based approach in src/nmath/dpq.h  --

For this reason, the fix will probably only appear in R-devel
i.e., from R-2.2.0 on, and not yet in [R 2.1.1]-patched.

Regards,
Martin Maechler, ETH Zurich

>>>>> "J" == J Hosking <jh910 at juno.com>
>>>>>     on Sat, 09 Jul 2005 15:27:00 -0400 writes:

    >> qgamma(1,1.1)
    J> [1] Inf

    J> as expected.  But for shape parameter between 0.16 and 1:

    >> qgamma(1,.5)
    J> [1] NaN
    J> Warning message:
    J> NaNs produced in: qgamma(p, shape, scale, lower.tail, log.p)

    J> and for shape parameter 0.16 or less:

    >> qgamma(1,.1)
    J> [1] 99.42507

    J> Arguments close to 1 give approximately correct results:

    >> qgamma(1-1e-15,.5)
    J> [1] 32.05055
    >> qgamma(1-1e-15,.1)
    J> [1] 28.8129


From kanglin at gmail.com  Mon Jul 11 09:47:37 2005
From: kanglin at gmail.com (D0c)
Date: Mon, 11 Jul 2005 02:47:37 -0500
Subject: [Rd] Rserve Startup problems
Message-ID: <2667b21305071100473306a68@mail.gmail.com>

I've having intermittent initialization of Rserve. Every now and again
it fails to start.
Hey Simon  any luck on finding that class?
What exactly does Rserve do on initialization ?


From Gregor.Gorjanc at bfro.uni-lj.si  Mon Jul 11 14:30:25 2005
From: Gregor.Gorjanc at bfro.uni-lj.si (Gorjanc Gregor)
Date: Mon, 11 Jul 2005 14:30:25 +0200
Subject: [Rd] ActiveState Perl, cygwin and R (was:  cygwin tar?)
Message-ID: <7FFEE688B57D7346BC6241C55900E730F318F1@pollux.bfro.uni-lj.si>

Hello!

I have just read mails in thread

<http://tolstoy.newcastle.edu.au/R/devel/04a/0583.html>

about problems with Cygwin and Rtools. I had the same problems and kept 
just the newest cygwin1.dll and things seem OK now. However I
currently hit the problem with Perl (I have ActiveState and Cygwin Perl
installed). When I tried to work with 'Rdconv' in Cygwin I get the following:

$ R CMD Rdconv --help
Can't locate R/Rdconv.pm in @INC (@INC contains:
c \Programs\R\rw2011beta\share\perl; /usr/lib/perl5/5.8/cygwin
/usr/lib/perl5/5.8 /usr/lib/perl5/site_perl/5.8/cygwin
/usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/site_perl/5.8
/usr/lib/perl5/vendor_perl/5.8/cygwin /usr/lib/perl5/vendor_perl/5.8
/usr/lib/perl5/vendor_perl/5.8 .) at c:\Programs\R\rw2011beta/bin/Rdconv
line 25.
BEGIN failed--compilation aborted at c:\Programs\R\rw2011beta/bin/Rdconv line 25.

As far as I understand there is a problem since Cygwins perl does not
have things properly setup. I did not touch anything yet. But I can see the
problem in first entry of @INC. There should be /cygdrive/c/.. or c:/ (I do
not know if the last one actually works with Cygwins perl) and therefore
things are broken.

If I modified PATH such that ActiveState Perl was before Cygwins Perl, 
everyting was as expected. 

Is there a way to overcome this with Cygwins Perl?

Thanks!

Lep pozdrav / With regards,
    Gregor Gorjanc

----------------------------------------------------------------------
University of Ljubljana
Biotechnical Faculty        URI: http://www.bfro.uni-lj.si/MR/ggorjan
Zootechnical Department     mail: gregor.gorjanc <at> bfro.uni-lj.si
Groblje 3                   tel: +386 (0)1 72 17 861
SI-1230 Domzale             fax: +386 (0)1 72 17 888
Slovenia, Europe
----------------------------------------------------------------------
"One must learn by doing the thing; for though you think you know it,
 you have no certainty until you try." Sophocles ~ 450 B.C.


From ripley at stats.ox.ac.uk  Mon Jul 11 14:50:27 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 11 Jul 2005 13:50:27 +0100 (BST)
Subject: [Rd] ActiveState Perl, cygwin and R (was:  cygwin tar?)
In-Reply-To: <7FFEE688B57D7346BC6241C55900E730F318F1@pollux.bfro.uni-lj.si>
References: <7FFEE688B57D7346BC6241C55900E730F318F1@pollux.bfro.uni-lj.si>
Message-ID: <Pine.LNX.4.61.0507111348380.12531@gannet.stats>

On Mon, 11 Jul 2005, Gorjanc Gregor wrote:

> Hello!
>
> I have just read mails in thread
>
> <http://tolstoy.newcastle.edu.au/R/devel/04a/0583.html>
>
> about problems with Cygwin and Rtools. I had the same problems and kept
> just the newest cygwin1.dll and things seem OK now. However I
> currently hit the problem with Perl (I have ActiveState and Cygwin Perl
> installed). When I tried to work with 'Rdconv' in Cygwin I get the following:
>
> $ R CMD Rdconv --help
> Can't locate R/Rdconv.pm in @INC (@INC contains:
> c \Programs\R\rw2011beta\share\perl; /usr/lib/perl5/5.8/cygwin
> /usr/lib/perl5/5.8 /usr/lib/perl5/site_perl/5.8/cygwin
> /usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/site_perl/5.8
> /usr/lib/perl5/vendor_perl/5.8/cygwin /usr/lib/perl5/vendor_perl/5.8
> /usr/lib/perl5/vendor_perl/5.8 .) at c:\Programs\R\rw2011beta/bin/Rdconv
> line 25.
> BEGIN failed--compilation aborted at c:\Programs\R\rw2011beta/bin/Rdconv line 25.
>
> As far as I understand there is a problem since Cygwins perl does not
> have things properly setup. I did not touch anything yet. But I can see the
> problem in first entry of @INC. There should be /cygdrive/c/.. or c:/ (I do
> not know if the last one actually works with Cygwins perl) and therefore
> things are broken.

The problem is earlier: the path separator is ; on Windows and : on 
Cygwin.

> If I modified PATH such that ActiveState Perl was before Cygwins Perl,
> everyting was as expected.
>
> Is there a way to overcome this with Cygwins Perl?

No.  It is very clearly documented that a Windows Perl is required.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch at stats.uwo.ca  Mon Jul 11 14:56:21 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 11 Jul 2005 08:56:21 -0400
Subject: [Rd] ActiveState Perl, cygwin and R (was:  cygwin tar?)
In-Reply-To: <7FFEE688B57D7346BC6241C55900E730F318F1@pollux.bfro.uni-lj.si>
References: <7FFEE688B57D7346BC6241C55900E730F318F1@pollux.bfro.uni-lj.si>
Message-ID: <42D26C75.5010400@stats.uwo.ca>

On 7/11/2005 8:30 AM, Gorjanc Gregor wrote:
> Hello!
> 
> I have just read mails in thread
> 
> <http://tolstoy.newcastle.edu.au/R/devel/04a/0583.html>
> 
> about problems with Cygwin and Rtools. I had the same problems and kept 
> just the newest cygwin1.dll and things seem OK now. However I
> currently hit the problem with Perl (I have ActiveState and Cygwin Perl
> installed). When I tried to work with 'Rdconv' in Cygwin I get the following:
> 
> $ R CMD Rdconv --help
> Can't locate R/Rdconv.pm in @INC (@INC contains:
> c \Programs\R\rw2011beta\share\perl; /usr/lib/perl5/5.8/cygwin
> /usr/lib/perl5/5.8 /usr/lib/perl5/site_perl/5.8/cygwin
> /usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/site_perl/5.8
> /usr/lib/perl5/vendor_perl/5.8/cygwin /usr/lib/perl5/vendor_perl/5.8
> /usr/lib/perl5/vendor_perl/5.8 .) at c:\Programs\R\rw2011beta/bin/Rdconv
> line 25.
> BEGIN failed--compilation aborted at c:\Programs\R\rw2011beta/bin/Rdconv line 25.
> 
> As far as I understand there is a problem since Cygwins perl does not
> have things properly setup. I did not touch anything yet. But I can see the
> problem in first entry of @INC. There should be /cygdrive/c/.. or c:/ (I do
> not know if the last one actually works with Cygwins perl) and therefore
> things are broken.
> 
> If I modified PATH such that ActiveState Perl was before Cygwins Perl, 
> everyting was as expected. 
> 
> Is there a way to overcome this with Cygwins Perl?

I think you need to ask on a Cygwin list, but my guess is that it won't 
be easy.  Rcmd puts $R_HOME\share\perl in the PERL5LIB environment 
variable.  Cygwin programs tend not to understand Windows paths like 
that.  There may be a way to write a wrapper to convert the variable so 
that Cygwin's perl understands it, or a configuration flag, but I'd say 
it's easier to use the ActiveState perl.

Rgui is a Windows program, not a Cygwin one.

Duncan Murdoch


From roebuck at odin.mdacc.tmc.edu  Mon Jul 11 19:35:24 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Mon, 11 Jul 2005 12:35:24 -0500 (CDT)
Subject: [Rd] Packaging and Optional BioC Capabilities
Message-ID: <Pine.OSF.4.58.0507111139260.59847@odin.mdacc.tmc.edu>

I am currently involved with a package that has certain
raw capabilities that enable it to be used without external
package dependencies. However, there are certain
Bioconductor packages containing classes from which I can
extract data to pass along to my current code.

Since my code is not really dependent on these external
packages but merely augmented by their presence, how best
is that relationship "packaged"?

1) Build second package dependent on external packages
that imports original methods and adds additional methods
to S4 generic functions for those BioC classes.

2) Keep single package with external packages suggested
and conditionally add additional methods to S4 generic
functions based on the presence of BioC packages.

If the latter approach is acceptable, something like this
perhaps?

biocpkg <- "whatever"
if (!inherits(try(library(biocpkg), silent = TRUE),
              'try-error')) {
    # SetMethod call using class from Bioconductor
}


----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From horevguy at post.tau.ac.il  Tue Jul 12 09:46:13 2005
From: horevguy at post.tau.ac.il (horevguy@post.tau.ac.il)
Date: Tue, 12 Jul 2005 09:46:13 +0200 (CEST)
Subject: [Rd] Hmisc_3.0-1.zip (PR#8005)
Message-ID: <20050712074613.CEADCA1EE@slim.kubism.ku.dk>

Full_Name: Guy Horev
Version: 2.0.1
OS: WinXP
Submission from: (NULL) (192.114.161.178)


It seems that the file Hmisc_3.0-1.zip in CRAN is corrupted, it should be 1.8M
but only 1.47M are saved, when trying to install localy or from the net the
following message apears:
Error in file(file, "r") : unable to open connection
In addition: Warning messages: 
1: error 1 in extracting from zip file 
2: cannot open file `Hmisc/DESCRIPTION' 

other packages works fine


From ligges at statistik.uni-dortmund.de  Tue Jul 12 10:01:49 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 12 Jul 2005 10:01:49 +0200
Subject: [Rd] Hmisc_3.0-1.zip (PR#8005)
In-Reply-To: <20050712074613.CEADCA1EE@slim.kubism.ku.dk>
References: <20050712074613.CEADCA1EE@slim.kubism.ku.dk>
Message-ID: <42D378ED.6070403@statistik.uni-dortmund.de>

horevguy at post.tau.ac.il wrote:

> Full_Name: Guy Horev
> Version: 2.0.1
> OS: WinXP
> Submission from: (NULL) (192.114.161.178)
> 
> 
> It seems that the file Hmisc_3.0-1.zip in CRAN is corrupted, it should be 1.8M

And it is, at least on the CRAN master in Vienna.

Uwe Ligges


> but only 1.47M are saved, when trying to install localy or from the net the
> following message apears:
> Error in file(file, "r") : unable to open connection
> In addition: Warning messages: 
> 1: error 1 in extracting from zip file 
> 2: cannot open file `Hmisc/DESCRIPTION' 
> 
> other packages works fine
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Tue Jul 12 12:54:46 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 12 Jul 2005 12:54:46 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7998)
Message-ID: <20050712105446.27C33A26B@slim.kubism.ku.dk>

This is actually a Windows bug.  Those files are unlink()ed, and it seems 
Windows is not respecting that (not an unknown phenomenon).  I have tried 
a few workarounds, and am about to commit one that seems to work.

No files are left over on a decent operating system, e.g. Solaris or FC3 
Linux.

On Fri, 8 Jul 2005 murdoch at stats.uwo.ca wrote:

> Harold, I've taken a closer look at your example and I'd call this an
> Sweave bug.  It creates tempfiles each time you run it, and doesn't
> delete them at the end.  For example:
>
> > list.files(tempdir())
> character(0)
> > testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package = "utils")
> > Sweave(testfile, out="junk.tex")
> Writing to file junk.tex
> Processing code chunks ...
>  1 : print term verbatim
>  2 : term hide
>  3 : echo print term verbatim
>  4 : term verbatim
>  5 : echo term verbatim
>  6 : echo term verbatim eps pdf
>  7 : echo term verbatim eps pdf
>
> You can now run LaTeX on 'junk.tex'
> > list.files(tempdir())
>  [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"  "Rf27095"
>  [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"
> > Sweave(testfile, out="C:/temp/junk.tex")
> Writing to file C:/temp/junk.tex
> Processing code chunks ...
>  1 : print term verbatim
>  2 : term hide
>  3 : echo print term verbatim
>  4 : term verbatim
>  5 : echo term verbatim
>  6 : echo term verbatim eps pdf
>  7 : echo term verbatim eps pdf
>
> You can now run LaTeX on 'C:/temp/junk.tex'
> > list.files(tempdir())
>  [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129" "Rf17288"
>  [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095" "Rf2892"
> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"  "Rf5551"
> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"   "Rf7673"
> > unlink(list.files(tempdir(),full=T))
> > list.files(tempdir())
> character(0)
>
> Harold:  a workaround for this would be to wrap your Sweave call in
> something like this:
>
> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
>
> ... Call Sweave here ...
>
> temps <- list.files(tempdir(), full=TRUE)
> unlink(temps[!(temps %in% keep)])  # delete the newly created ones
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Soren.Hojsgaard at agrsci.dk  Tue Jul 12 13:19:48 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Tue, 12 Jul 2005 13:19:48 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC0308400F@DJFPOST01.djf.agrsci.dk>

>From time to time people request symbolic computations beyond what D() and deriv() etc can provide. A brief look at the internet shows that there are many more or less developed computer algebra packages freely available. Therefore, I wondered if it would be an idea to try to 'integrate' one of these packages in R, which I guess can be done in more or less elegant ways... I do not know any of the computer algebra people around the World, but perhaps some other people from the R-community do and would be able to/interested in establishing such a connection...

Just and idea; comments appreciated :-)
S?ren

============================================================================================= 
S?ren H?jsgaard,  MSc, PhD (Statistics),                Phone: +45 8999 1703 
Head of Statistics and Decision Theory Research Group,  Fax:   +45 8999 1300 
Danish Institute of Agricultural Sciences               sorenh at agrsci.dk 
Research Centre Foulum, DK-8830 Tjele, Denmark          http://genetics.agrsci.dk/~sorenh 
.... Time flies like an arrow, fruit flies like a banana ....


From murdoch at stats.uwo.ca  Tue Jul 12 14:32:26 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 12 Jul 2005 14:32:26 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7998)
Message-ID: <20050712123226.A7293A208@slim.kubism.ku.dk>

Prof Brian Ripley wrote:
> This is actually a Windows bug.  Those files are unlink()ed, and it seems 
> Windows is not respecting that (not an unknown phenomenon).  I have tried 
> a few workarounds, and am about to commit one that seems to work.

I guess you mean the C unlink, since I don't see the R unlink being 
called.

Generally deletes fail on Windows when files are locked, e.g. open for 
reading or writing.  I haven't seen Windows file deletes fail in other 
circumstances, so I suspect this was an R, MinGW or MSVCRT bug rather 
than a Windows bug.

Duncan Murdoch
> 
> No files are left over on a decent operating system, e.g. Solaris or FC3 
> Linux.
> 
> On Fri, 8 Jul 2005 murdoch at stats.uwo.ca wrote:
> 
> 
>>Harold, I've taken a closer look at your example and I'd call this an
>>Sweave bug.  It creates tempfiles each time you run it, and doesn't
>>delete them at the end.  For example:
>>
>>
>>>list.files(tempdir())
>>
>>character(0)
>>
>>>testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package = "utils")
>>>Sweave(testfile, out="junk.tex")
>>
>>Writing to file junk.tex
>>Processing code chunks ...
>> 1 : print term verbatim
>> 2 : term hide
>> 3 : echo print term verbatim
>> 4 : term verbatim
>> 5 : echo term verbatim
>> 6 : echo term verbatim eps pdf
>> 7 : echo term verbatim eps pdf
>>
>>You can now run LaTeX on 'junk.tex'
>>
>>>list.files(tempdir())
>>
>> [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"  "Rf27095"
>> [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"
>>
>>>Sweave(testfile, out="C:/temp/junk.tex")
>>
>>Writing to file C:/temp/junk.tex
>>Processing code chunks ...
>> 1 : print term verbatim
>> 2 : term hide
>> 3 : echo print term verbatim
>> 4 : term verbatim
>> 5 : echo term verbatim
>> 6 : echo term verbatim eps pdf
>> 7 : echo term verbatim eps pdf
>>
>>You can now run LaTeX on 'C:/temp/junk.tex'
>>
>>>list.files(tempdir())
>>
>> [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129" "Rf17288"
>> [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095" "Rf2892"
>>[15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"  "Rf5551"
>>[22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"   "Rf7673"
>>
>>>unlink(list.files(tempdir(),full=T))
>>>list.files(tempdir())
>>
>>character(0)
>>
>>Harold:  a workaround for this would be to wrap your Sweave call in
>>something like this:
>>
>>keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
>>
>>... Call Sweave here ...
>>
>>temps <- list.files(tempdir(), full=TRUE)
>>unlink(temps[!(temps %in% keep)])  # delete the newly created ones
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
> 
>


From ripley at stats.ox.ac.uk  Tue Jul 12 14:58:30 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 12 Jul 2005 14:58:30 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7998)
Message-ID: <20050712125830.EEE2FA1F1@slim.kubism.ku.dk>

On Tue, 12 Jul 2005, Duncan Murdoch wrote:

> Prof Brian Ripley wrote:
>> This is actually a Windows bug.  Those files are unlink()ed, and it seems 
>> Windows is not respecting that (not an unknown phenomenon).  I have tried a 
>> few workarounds, and am about to commit one that seems to work.
>
> I guess you mean the C unlink, since I don't see the R unlink being called.

Yes, I do, but the R unlink calls the C unlink and so has the same 
problem.

> Generally deletes fail on Windows when files are locked, e.g. open for 
> reading or writing.  I haven't seen Windows file deletes fail in other 
> circumstances, so I suspect this was an R, MinGW or MSVCRT bug rather than a 
> Windows bug.

But unlink() is required by POSIX to work when files are open, so it is a 
MSVCRT `feature' (and that is part of Windows since Win95 OSR2).  Indeed, 
there is nothing in the MSDN documentation on unlink() that says anything 
about not working if files are `locked'.

If people use the same name and arg sequence of a standard library call 
and partially implement it without saying so or mentioning the 
restrictions I believe it is perfectly reasonable to call that a bug.

>
> Duncan Murdoch
>> 
>> No files are left over on a decent operating system, e.g. Solaris or FC3 
>> Linux.
>> 
>> On Fri, 8 Jul 2005 murdoch at stats.uwo.ca wrote:
>> 
>> 
>>> Harold, I've taken a closer look at your example and I'd call this an
>>> Sweave bug.  It creates tempfiles each time you run it, and doesn't
>>> delete them at the end.  For example:
>>> 
>>> 
>>>> list.files(tempdir())
>>> 
>>> character(0)
>>> 
>>>> testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package = "utils")
>>>> Sweave(testfile, out="junk.tex")
>>> 
>>> Writing to file junk.tex
>>> Processing code chunks ...
>>> 1 : print term verbatim
>>> 2 : term hide
>>> 3 : echo print term verbatim
>>> 4 : term verbatim
>>> 5 : echo term verbatim
>>> 6 : echo term verbatim eps pdf
>>> 7 : echo term verbatim eps pdf
>>> 
>>> You can now run LaTeX on 'junk.tex'
>>> 
>>>> list.files(tempdir())
>>> 
>>> [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"  "Rf27095"
>>> [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"
>>> 
>>>> Sweave(testfile, out="C:/temp/junk.tex")
>>> 
>>> Writing to file C:/temp/junk.tex
>>> Processing code chunks ...
>>> 1 : print term verbatim
>>> 2 : term hide
>>> 3 : echo print term verbatim
>>> 4 : term verbatim
>>> 5 : echo term verbatim
>>> 6 : echo term verbatim eps pdf
>>> 7 : echo term verbatim eps pdf
>>> 
>>> You can now run LaTeX on 'C:/temp/junk.tex'
>>> 
>>>> list.files(tempdir())
>>> 
>>> [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129" "Rf17288"
>>> [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095" "Rf2892"
>>> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"  "Rf5551"
>>> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"   "Rf7673"
>>> 
>>>> unlink(list.files(tempdir(),full=T))
>>>> list.files(tempdir())
>>> 
>>> character(0)
>>> 
>>> Harold:  a workaround for this would be to wrap your Sweave call in
>>> something like this:
>>> 
>>> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
>>> 
>>> ... Call Sweave here ...
>>> 
>>> temps <- list.files(tempdir(), full=TRUE)
>>> unlink(temps[!(temps %in% keep)])  # delete the newly created ones
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>>> 
>> 
>> 
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch at stats.uwo.ca  Tue Jul 12 15:41:48 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 12 Jul 2005 15:41:48 +0200 (CEST)
Subject: [Rd] Sweave resource leak: leftover temp files (PR#7998)
Message-ID: <20050712134148.2FCD4A1F9@slim.kubism.ku.dk>

On 7/12/2005 8:58 AM, Prof Brian Ripley wrote:
> On Tue, 12 Jul 2005, Duncan Murdoch wrote:
> 
>> Prof Brian Ripley wrote:
>>> This is actually a Windows bug.  Those files are unlink()ed, and it seems 
>>> Windows is not respecting that (not an unknown phenomenon).  I have tried a 
>>> few workarounds, and am about to commit one that seems to work.
>>
>> I guess you mean the C unlink, since I don't see the R unlink being called.
> 
> Yes, I do, but the R unlink calls the C unlink and so has the same 
> problem.
> 
>> Generally deletes fail on Windows when files are locked, e.g. open for 
>> reading or writing.  I haven't seen Windows file deletes fail in other 
>> circumstances, so I suspect this was an R, MinGW or MSVCRT bug rather than a 
>> Windows bug.
> 
> But unlink() is required by POSIX to work when files are open, so it is a 
> MSVCRT `feature' (and that is part of Windows since Win95 OSR2).  Indeed, 
> there is nothing in the MSDN documentation on unlink() that says anything 
> about not working if files are `locked'.
> 
> If people use the same name and arg sequence of a standard library call 
> and partially implement it without saying so or mentioning the 
> restrictions I believe it is perfectly reasonable to call that a bug.

This is documented in the API call DeleteFile.  I wouldn't call MSVCRT 
part of Windows, but I guess this is the same thing as saying that Linux 
is the kernel, not the whole collection of things you get in a Linux 
distribution.

Windows provides a different mechanism for this, the 
FILE_FLAG_DELETE_ON_CLOSE flag to CreateFile().  Your patch has solved 
the problem, so I can't see that it would be worthwhile using this, but 
one way to implement the POSIX behaviour would be to open a file with 
this flag, then immediately close it.  As long as all other handles to 
the file are eventually closed the file should be deleted.

Duncan


> 
>>
>> Duncan Murdoch
>>> 
>>> No files are left over on a decent operating system, e.g. Solaris or FC3 
>>> Linux.
>>> 
>>> On Fri, 8 Jul 2005 murdoch at stats.uwo.ca wrote:
>>> 
>>> 
>>>> Harold, I've taken a closer look at your example and I'd call this an
>>>> Sweave bug.  It creates tempfiles each time you run it, and doesn't
>>>> delete them at the end.  For example:
>>>> 
>>>> 
>>>>> list.files(tempdir())
>>>> 
>>>> character(0)
>>>> 
>>>>> testfile <- system.file("Sweave", "Sweave-test-1.Rnw", package = "utils")
>>>>> Sweave(testfile, out="junk.tex")
>>>> 
>>>> Writing to file junk.tex
>>>> Processing code chunks ...
>>>> 1 : print term verbatim
>>>> 2 : term hide
>>>> 3 : echo print term verbatim
>>>> 4 : term verbatim
>>>> 5 : echo term verbatim
>>>> 6 : echo term verbatim eps pdf
>>>> 7 : echo term verbatim eps pdf
>>>> 
>>>> You can now run LaTeX on 'junk.tex'
>>>> 
>>>>> list.files(tempdir())
>>>> 
>>>> [1] "Rf10523" "Rf13872" "Rf17129" "Rf2055"  "Rf2203"  "Rf2403"  "Rf27095"
>>>> [8] "Rf2892"  "Rf31415" "Rf5290"  "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"
>>>> 
>>>>> Sweave(testfile, out="C:/temp/junk.tex")
>>>> 
>>>> Writing to file C:/temp/junk.tex
>>>> Processing code chunks ...
>>>> 1 : print term verbatim
>>>> 2 : term hide
>>>> 3 : echo print term verbatim
>>>> 4 : term verbatim
>>>> 5 : echo term verbatim
>>>> 6 : echo term verbatim eps pdf
>>>> 7 : echo term verbatim eps pdf
>>>> 
>>>> You can now run LaTeX on 'C:/temp/junk.tex'
>>>> 
>>>>> list.files(tempdir())
>>>> 
>>>> [1] "Rf10523" "Rf12679" "Rf1311"  "Rf13484" "Rf13872" "Rf17129" "Rf17288"
>>>> [8] "Rf2055"  "Rf21774" "Rf2203"  "Rf23417" "Rf2403"  "Rf27095" "Rf2892"
>>>> [15] "Rf29444" "Rf31128" "Rf31415" "Rf32520" "Rf3338"  "Rf5290"  "Rf5551"
>>>> [22] "Rf6251"  "Rf6482"  "Rf7055"  "Rf724"   "Rf7543"  "Rf758"   "Rf7673"
>>>> 
>>>>> unlink(list.files(tempdir(),full=T))
>>>>> list.files(tempdir())
>>>> 
>>>> character(0)
>>>> 
>>>> Harold:  a workaround for this would be to wrap your Sweave call in
>>>> something like this:
>>>> 
>>>> keep <- list.files(tempdir(), full=TRUE)  # keep previous temp files
>>>> 
>>>> ... Call Sweave here ...
>>>> 
>>>> temps <- list.files(tempdir(), full=TRUE)
>>>> unlink(temps[!(temps %in% keep)])  # delete the newly created ones
>>>> 
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>> 
>>>> 
>>> 
>>> 
>>
>>
>


From ggrothendieck at gmail.com  Tue Jul 12 16:57:49 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 12 Jul 2005 10:57:49 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC0308400F@DJFPOST01.djf.agrsci.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC0308400F@DJFPOST01.djf.agrsci.dk>
Message-ID: <971536df0507120757503c9a71@mail.gmail.com>

On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> >From time to time people request symbolic computations beyond what D() and deriv() etc can provide. A brief look at the internet shows that there are many more or less developed computer algebra packages freely available. Therefore, I wondered if it would be an idea to try to 'integrate' one of these packages in R, which I guess can be done in more or less elegant ways... I do not know any of the computer algebra people around the World, but perhaps some other people from the R-community do and would be able to/interested in establishing such a connection...
 

Coincidentally I asked the yacas developer about this just yesterday:
  http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216


From murdoch at stats.uwo.ca  Tue Jul 12 17:25:26 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Jul 2005 11:25:26 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df0507120757503c9a71@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC0308400F@DJFPOST01.djf.agrsci.dk>
	<971536df0507120757503c9a71@mail.gmail.com>
Message-ID: <42D3E0E6.4090702@stats.uwo.ca>

On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>> >From time to time people request symbolic computations beyond what D() and deriv() etc can provide. A brief look at the internet shows that there are many more or less developed computer algebra packages freely available. Therefore, I wondered if it would be an idea to try to 'integrate' one of these packages in R, which I guess can be done in more or less elegant ways... I do not know any of the computer algebra people around the World, but perhaps some other people from the R-community do and would be able to/interested in establishing such a connection...
>  
> 
> Coincidentally I asked the yacas developer about this just yesterday:
>   http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216

It sounds like developing an R package to act as a wrapper would be the 
best approach.  I didn't see documentation for their API (the exports of 
their DLL), but I didn't spend long looking.

Duncan Murdoch


From bullard at berkeley.edu  Tue Jul 12 23:05:27 2005
From: bullard at berkeley.edu (James Bullard)
Date: Tue, 12 Jul 2005 14:05:27 -0700
Subject: [Rd] allocation of large matrix failing
Message-ID: <42D43097.9080508@berkeley.edu>

Hello, this is probably something silly which I am doing, but I cannot
understand why this allocation is not happening.

Here is a my C code which tries to allocate a list of size  333559, and
then a matrix of size 8*333559
I thought I might be running into memory problems, but R is not even
using that much (I start R with
more memory and it stays constant) Also, I start R as I normally do and
I allocate a matrix of that size
and it returns instantly, so I am inclined to think that this is not a
memory/GC issue, but I submit it
may be.
 
<code>
int numHits = seq.GetNumberHits();

Rprintf("numHits:%d\n", numHits);
Rprintf("before allocation...\n");

SEXP oligos, matrix;
PROTECT(oligos = NEW_LIST(numHits));
Rprintf("allocated oligo list...\n");

PROTECT(matrix = NEW_INTEGER(numHits*8));
Rprintf("entering looop...\n");


<output>
entering sequence loop.
numHits:333559
before allocation...
allocated oligo list...

It hangs here everytime (never printing "entering loop..." - i have
waited like 10 minutes). If I remove the 8 then it completes.
Essentially I want to allocate a vector of that length and then
dimension it into a matrix, but I cannot see why this does not work.

debian 2.6
R 2.1.0

Thanks as always for any insight.

jim


From dmbates at gmail.com  Wed Jul 13 00:16:35 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Tue, 12 Jul 2005 17:16:35 -0500
Subject: [Rd] Spurious output like <environment: namespace:base> in R-devel
Message-ID: <40e66e0b0507121516230a148d@mail.gmail.com>

I have noticed spurious message of the form
<environment: namespace:base>
when developing code for the Matrix package and testing under R-devel.
 These messages are not present when testing under R-2.1.1

I have not reported this because I didn't know if it was caused by my
code in the Matrix package or some other code.  Today I checked the
newly uploaded vcd package under R-devel and got the same symptoms.

Try

library('vcd')
example(mosaic')

to reproduce the problem.  If you want to see the same problem in the
Matrix package run

R-devel CMD check Matrix

and look at the output in Matrix.Rcheck/tests/lmer.Rout


From simon.urbanek at r-project.org  Wed Jul 13 00:36:15 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 12 Jul 2005 18:36:15 -0400
Subject: [Rd] allocation of large matrix failing
In-Reply-To: <42D43097.9080508@berkeley.edu>
References: <42D43097.9080508@berkeley.edu>
Message-ID: <7E4D1FF1-1C1D-451F-B52E-74B02386E4E0@r-project.org>

James,

On Jul 12, 2005, at 5:05 PM, James Bullard wrote:

> Hello, this is probably something silly which I am doing, but I  
> cannot understand why this allocation is not happening.

I suspect it's something else -  the code  you sent us works without  
problems for me:

 > .C("foo",as.integer(333559))
numHits:333559
before allocation...
allocated oligo list...
entering looop...
[[1]]
[1] 333559

 > gc()
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells 162348  4.4     350000  9.4   350000  9.4
Vcells  60528  0.5    1453055 11.1  1562032 12.0

I have also tested it with 100-times larger vector and it works as well:

 > .C("foo",as.integer(33355900))
numHits:33355900
before allocation...
allocated oligo list...
entering looop...
[[1]]
[1] 33355900

 > gc()
          used (Mb) gc trigger  (Mb)  max used   (Mb)
Ncells 162526  4.4     350000   9.4    350000    9.4
Vcells  60536  0.5  120333512 918.1 150162111 1145.7

This was on both Debian Linux and OS X, but that shouldn't really  
matter I suppose... (and I don't see why it should fail). If you  
overdo it with the size you can get "Error: cannot allocate vector of  
size xxx", but it won't hang, either.

Cheers,
Simon


From dmbates at gmail.com  Wed Jul 13 00:59:26 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Tue, 12 Jul 2005 17:59:26 -0500
Subject: [Rd] Spurious output like <environment: namespace:base> in
	R-devel
In-Reply-To: <20050712223256.GA3414@wald.ucdavis.edu>
References: <40e66e0b0507121516230a148d@mail.gmail.com>
	<20050712223256.GA3414@wald.ucdavis.edu>
Message-ID: <40e66e0b050712155983d1944@mail.gmail.com>

On 7/12/05, Duncan Temple Lang <duncan at wald.ucdavis.edu> wrote:
> Hi Doug.
> 
>   I noticed this also after the recent change to the
> code to handle missing PACKAGE arguments for
> .C/.Call/.Fortran routines.
>   There is a line in the dotcode.c (1510) that
> has a call to Rf_PrintValue(env)  and that is
> what is causing it.
> 
>     I haven't had a chance to get to this for the last week or so but
> am doing so now.

Thanks Duncan.  In my code it turns out that the two .Call calls that
were producing the spurious output did not have PACKAGE = "Matrix".
Once I fixed that I no longer got the spurious output.


From Simon.Blomberg at anu.edu.au  Wed Jul 13 01:52:17 2005
From: Simon.Blomberg at anu.edu.au (Simon Blomberg)
Date: Wed, 13 Jul 2005 09:52:17 +1000
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <42D3E0E6.4090702@stats.uwo.ca>
References: <C83C5E3DEEE97E498B74729A33F6EAEC0308400F@DJFPOST01.djf.agrsci.dk>
	<971536df0507120757503c9a71@mail.gmail.com>
	<42D3E0E6.4090702@stats.uwo.ca>
Message-ID: <6.2.1.2.0.20050713092434.01bd38e0@anumail.anu.edu.au>

I would use such a symbolic math package for R. I have dreamt of an 
open-source solution with functionality similar to mathStatica. 
http://www.mathstatica.com/ Is yacas the best system to consider? What 
about  Maxima http://maxima.sourceforge.net/, which is also GPL, or maybe 
Axiom http://savannah.nongnu.org/projects/axiom, which has a modified BSD 
license?

Cheers,

Simon.

At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
>On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> > On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> >> >From time to time people request symbolic computations beyond what 
> D() and deriv() etc can provide. A brief look at the internet shows that 
> there are many more or less developed computer algebra packages freely 
> available. Therefore, I wondered if it would be an idea to try to 
> 'integrate' one of these packages in R, which I guess can be done in more 
> or less elegant ways... I do not know any of the computer algebra people 
> around the World, but perhaps some other people from the R-community do 
> and would be able to/interested in establishing such a connection...
> >
> >
> > Coincidentally I asked the yacas developer about this just yesterday:
> > 
> http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216
>
>It sounds like developing an R package to act as a wrapper would be the
>best approach.  I didn't see documentation for their API (the exports of
>their DLL), but I didn't spend long looking.
>
>Duncan Murdoch
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel

Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
Centre for Resource and Environmental Studies
The Australian National University
Canberra ACT 0200
Australia
T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
F: +61 2 6125 0757
CRICOS Provider # 00120C


From Soren.Hojsgaard at agrsci.dk  Wed Jul 13 02:45:28 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Wed, 13 Jul 2005 02:45:28 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>

Personally, I like Maxima better than Yacas, but in both cases the solution (at least a minimal one) should be doable: A small program which pipes R commands into a terminal running Maxima/Yacas and taking the output back into R. I am not much into the technical details, but isn't that what can be done with the COM automatation server on Windows?? (I don't know what the equivalent would be on unix?).
Best regards
S?ren

________________________________

Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
Sendt: on 13-07-2005 01:52
Til: Duncan Murdoch; Gabor Grothendieck
Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
Emne: Re: [Rd] Computer algebra in R - would that be an idea??



I would use such a symbolic math package for R. I have dreamt of an
open-source solution with functionality similar to mathStatica.
http://www.mathstatica.com/ Is yacas the best system to consider? What
about  Maxima http://maxima.sourceforge.net/, which is also GPL, or maybe
Axiom http://savannah.nongnu.org/projects/axiom, which has a modified BSD
license?

Cheers,

Simon.

At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
>On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> > On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> >> >From time to time people request symbolic computations beyond what
> D() and deriv() etc can provide. A brief look at the internet shows that
> there are many more or less developed computer algebra packages freely
> available. Therefore, I wondered if it would be an idea to try to
> 'integrate' one of these packages in R, which I guess can be done in more
> or less elegant ways... I do not know any of the computer algebra people
> around the World, but perhaps some other people from the R-community do
> and would be able to/interested in establishing such a connection...
> >
> >
> > Coincidentally I asked the yacas developer about this just yesterday:
> >
> http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216
>
>It sounds like developing an R package to act as a wrapper would be the
>best approach.  I didn't see documentation for their API (the exports of
>their DLL), but I didn't spend long looking.
>
>Duncan Murdoch
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel

Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
Centre for Resource and Environmental Studies
The Australian National University
Canberra ACT 0200
Australia
T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
F: +61 2 6125 0757
CRICOS Provider # 00120C


From ggrothendieck at gmail.com  Wed Jul 13 03:36:12 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 12 Jul 2005 21:36:12 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>
Message-ID: <971536df05071218366de965e2@mail.gmail.com>

I don't know which free system is best.  I have mainly used Yacas
but my needs to date have been pretty minimal so I suspect
any of them would have worked.

Eric's COM solution, once I have it figured out, will likely get me
to the next step on Windows.  I did some googling around and
found this:

http://www.koders.com/python/fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx

which is a python interface to Yacas which may give some ideas
on how to interface it to R.


On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> Personally, I like Maxima better than Yacas, but in both cases the solution (at least a minimal one) should be doable: A small program which pipes R commands into a terminal running Maxima/Yacas and taking the output back into R. I am not much into the technical details, but isn't that what can be done with the COM automatation server on Windows?? (I don't know what the equivalent would be on unix?).
> Best regards
> S?ren
> 
> ________________________________
> 
> Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
> Sendt: on 13-07-2005 01:52
> Til: Duncan Murdoch; Gabor Grothendieck
> Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
> Emne: Re: [Rd] Computer algebra in R - would that be an idea??
> 
> 
> 
> I would use such a symbolic math package for R. I have dreamt of an
> open-source solution with functionality similar to mathStatica.
> http://www.mathstatica.com/ Is yacas the best system to consider? What
> about  Maxima http://maxima.sourceforge.net/, which is also GPL, or maybe
> Axiom http://savannah.nongnu.org/projects/axiom, which has a modified BSD
> license?
> 
> Cheers,
> 
> Simon.
> 
> At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
> >On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> > > On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> > >> >From time to time people request symbolic computations beyond what
> > D() and deriv() etc can provide. A brief look at the internet shows that
> > there are many more or less developed computer algebra packages freely
> > available. Therefore, I wondered if it would be an idea to try to
> > 'integrate' one of these packages in R, which I guess can be done in more
> > or less elegant ways... I do not know any of the computer algebra people
> > around the World, but perhaps some other people from the R-community do
> > and would be able to/interested in establishing such a connection...
> > >
> > >
> > > Coincidentally I asked the yacas developer about this just yesterday:
> > >
> > http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216
> >
> >It sounds like developing an R package to act as a wrapper would be the
> >best approach.  I didn't see documentation for their API (the exports of
> >their DLL), but I didn't spend long looking.
> >
> >Duncan Murdoch
> >
> >______________________________________________
> >R-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> Centre for Resource and Environmental Studies
> The Australian National University
> Canberra ACT 0200
> Australia
> T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
> F: +61 2 6125 0757
> CRICOS Provider # 00120C
> 
> 
> 
> 
>


From Simon.Blomberg at anu.edu.au  Wed Jul 13 04:42:13 2005
From: Simon.Blomberg at anu.edu.au (Simon Blomberg)
Date: Wed, 13 Jul 2005 12:42:13 +1000
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df05071218366de965e2@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>
	<971536df05071218366de965e2@mail.gmail.com>
Message-ID: <6.2.1.2.0.20050713122701.01cb4338@anumail.anu.edu.au>

Another approach might be to construct a wrapper for Aldor code, along the 
lines of .Fortran and .C. Aldor is the extension language for AXIOM 
http://www.aldor.org/, and there is a symbolic algebra library available 
for Aldor http://www-sop.inria.fr/cafe/Manuel.Bronstein/algebra, which 
ships with the Aldor compiler. Of course, I am much better at thinking up 
these ideas than implementing them myself. :-)

Simon.


At 11:36 AM 13/07/2005, Gabor Grothendieck wrote:
>I don't know which free system is best.  I have mainly used Yacas
>but my needs to date have been pretty minimal so I suspect
>any of them would have worked.
>
>Eric's COM solution, once I have it figured out, will likely get me
>to the next step on Windows.  I did some googling around and
>found this:
>
>http://www.koders.com/python/fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx
>
>which is a python interface to Yacas which may give some ideas
>on how to interface it to R.
>
>
>On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> > Personally, I like Maxima better than Yacas, but in both cases the 
> solution (at least a minimal one) should be doable: A small program which 
> pipes R commands into a terminal running Maxima/Yacas and taking the 
> output back into R. I am not much into the technical details, but isn't 
> that what can be done with the COM automatation server on Windows?? (I 
> don't know what the equivalent would be on unix?).
> > Best regards
> > S?ren
> >
> > ________________________________
> >
> > Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
> > Sendt: on 13-07-2005 01:52
> > Til: Duncan Murdoch; Gabor Grothendieck
> > Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
> > Emne: Re: [Rd] Computer algebra in R - would that be an idea??
> >
> >
> >
> > I would use such a symbolic math package for R. I have dreamt of an
> > open-source solution with functionality similar to mathStatica.
> > http://www.mathstatica.com/ Is yacas the best system to consider? What
> > about  Maxima http://maxima.sourceforge.net/, which is also GPL, or maybe
> > Axiom http://savannah.nongnu.org/projects/axiom, which has a modified BSD
> > license?
> >
> > Cheers,
> >
> > Simon.
> >
> > At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
> > >On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> > > > On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> > > >> >From time to time people request symbolic computations beyond what
> > > D() and deriv() etc can provide. A brief look at the internet shows that
> > > there are many more or less developed computer algebra packages freely
> > > available. Therefore, I wondered if it would be an idea to try to
> > > 'integrate' one of these packages in R, which I guess can be done in more
> > > or less elegant ways... I do not know any of the computer algebra people
> > > around the World, but perhaps some other people from the R-community do
> > > and would be able to/interested in establishing such a connection...
> > > >
> > > >
> > > > Coincidentally I asked the yacas developer about this just yesterday:
> > > >
> > > 
> http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216
> > >
> > >It sounds like developing an R package to act as a wrapper would be the
> > >best approach.  I didn't see documentation for their API (the exports of
> > >their DLL), but I didn't spend long looking.
> > >
> > >Duncan Murdoch
> > >
> > >______________________________________________
> > >R-devel at r-project.org mailing list
> > >https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> > Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> > Centre for Resource and Environmental Studies
> > The Australian National University
> > Canberra ACT 0200
> > Australia
> > T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
> > F: +61 2 6125 0757
> > CRICOS Provider # 00120C
> >
> >
> >
> >
> >


From r.hankin at noc.soton.ac.uk  Wed Jul 13 09:04:08 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Wed, 13 Jul 2005 08:04:08 +0100
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df05071218366de965e2@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>
	<971536df05071218366de965e2@mail.gmail.com>
Message-ID: <164695F6-B36F-4DFC-8685-EF7A2E78509C@soc.soton.ac.uk>

Hi guys

another option would be David Gillespie's  "calc", which is written  
in emacs lisp.

This is a stable system with (AFAICS) as large user base.

Unfortunately, it doesn't seem to be actively developed, as the last  
stable version (2.02f)
appears to be 1996.  I don't know if this would be a contraindication.


Robin



On 13 Jul 2005, at 02:36, Gabor Grothendieck wrote:

> I don't know which free system is best.  I have mainly used Yacas
> but my needs to date have been pretty minimal so I suspect
> any of them would have worked.
>
> Eric's COM solution, once I have it figured out, will likely get me
> to the next step on Windows.  I did some googling around and
> found this:
>
> http://www.koders.com/python/ 
> fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx
>
> which is a python interface to Yacas which may give some ideas
> on how to interface it to R.
>
>
> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>
>> Personally, I like Maxima better than Yacas, but in both cases the  
>> solution (at least a minimal one) should be doable: A small  
>> program which pipes R commands into a terminal running Maxima/ 
>> Yacas and taking the output back into R. I am not much into the  
>> technical details, but isn't that what can be done with the COM  
>> automatation server on Windows?? (I don't know what the equivalent  
>> would be on unix?).
>> Best regards
>> S?ren
>>
>> ________________________________
>>
>> Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
>> Sendt: on 13-07-2005 01:52
>> Til: Duncan Murdoch; Gabor Grothendieck
>> Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
>> Emne: Re: [Rd] Computer algebra in R - would that be an idea??
>>
>>
>>
>> I would use such a symbolic math package for R. I have dreamt of an
>> open-source solution with functionality similar to mathStatica.
>> http://www.mathstatica.com/ Is yacas the best system to consider?  
>> What
>> about  Maxima http://maxima.sourceforge.net/, which is also GPL,  
>> or maybe
>> Axiom http://savannah.nongnu.org/projects/axiom, which has a  
>> modified BSD
>> license?
>>
>> Cheers,
>>
>> Simon.
>>
>> At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
>>
>>> On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
>>>
>>>> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>>>>
>>>>>> From time to time people request symbolic computations beyond  
>>>>>> what
>>>>>>
>>> D() and deriv() etc can provide. A brief look at the internet  
>>> shows that
>>> there are many more or less developed computer algebra packages  
>>> freely
>>> available. Therefore, I wondered if it would be an idea to try to
>>> 'integrate' one of these packages in R, which I guess can be done  
>>> in more
>>> or less elegant ways... I do not know any of the computer algebra  
>>> people
>>> around the World, but perhaps some other people from the R- 
>>> community do
>>> and would be able to/interested in establishing such a connection...
>>>
>>>>
>>>>
>>>> Coincidentally I asked the yacas developer about this just  
>>>> yesterday:
>>>>
>>>>
>>> http://sourceforge.net/mailarchive/forum.php? 
>>> thread_id=7711431&forum_id=2216
>>>
>>> It sounds like developing an R package to act as a wrapper would  
>>> be the
>>> best approach.  I didn't see documentation for their API (the  
>>> exports of
>>> their DLL), but I didn't spend long looking.
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
>> Centre for Resource and Environmental Studies
>> The Australian National University
>> Canberra ACT 0200
>> Australia
>> T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
>> F: +61 2 6125 0757
>> CRICOS Provider # 00120C
>>
>>
>>
>>
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From w.northcott at unsw.edu.au  Wed Jul 13 10:17:30 2005
From: w.northcott at unsw.edu.au (Bill Northcott)
Date: Wed, 13 Jul 2005 18:17:30 +1000
Subject: [Rd] Building R sources on Windows
In-Reply-To: <Pine.GSO.4.31.0506280740110.14145-100000@markov.stats>
References: <Pine.GSO.4.31.0506280740110.14145-100000@markov.stats>
Message-ID: <BE56A6B6-4788-400C-A379-BF1F3A2DBA0C@unsw.edu.au>

Following considerable off list discussion, I will post this on the  
list in the hope that it may help others who experience the same  
grief I did getting R sources to build on Windows.

Firstly there is just no way that, starting with a clean version of  
Windows 2003 server, and following the instructions provided in the  
Admin and Installation manual, web sites and various FAQs, I could  
get a working build setup.  I can only conclude that all the users  
actually building R on Windows have some software installed that is  
not in the documentation.

The following recipe does work repeatably for me.

Install the following third party packages as mentioned in the  
install manuals and Duncan Murdoch's Rtools page:
Tcl/tk support
libpng
libjpeg
BLAS (I used ATLAS)
ActiveState PERL
Microsoft HTML Help Workshop
MikTek
Inno Setup 5
iconv.dll
MinGW-4.1.0

Duncan Murdoch's page on using MikTek is good but but more  
complicated than it needs to be.  The only problem with the default e- 
TeX enhanced mode seems to be with the texinfo sources.  So only the  
tex and pdftex commands need to be reset to use e-TeX compatibility  
mode.  latex and pdflatex are only used to process the tex sources  
for the Reference manual and these have no problem with the current  
MikTek defaults.

The issue with MikTek finding the Rd.sty file is more easily fixed by  
minor changes to doc/manual/Makefile.win.
Change lines 21 - 24 of doc/manual/Makefile.win to read:
> RTEX=
> ifeq ($(strip $(MIKTEX)),YES)
> # Setup MikTEX search path
> RTEX=-include-directory=$(RHOME)/share/texmf
> endif
>
> PDFLATEX = pdflatex $(RTEX)
> LATEX = latex $(RTEX)
> PDFTEX = pdftex $(RTEX)
> TEX = tex $(RTEX)

So far this all fairly much as the instructions.

However, I had no joy getting the Rtools package to provide the rest  
of what I needed.  All my build attempts failed with path errors of  
one sort or another.   Instead I used the Msys 1.0.10 package from  
MinGW.  This provides a minimal set of build tools which includes  
everything needed except zip.exe and unzip.exe.  I used the ones from  
Rtools and put them in the msys\1.0\local\bin.

The only remaining problem was that the makeinfo.exe in Msys is too  
old.  So I used the Msys set up to build makeinfo from texinfo-4.7  
sources.  This also needed wget and libiconv, which I also built from  
current sources.  The binaries need to go in msys\1.0\local so that  
they have precedence over the older ones in the msys package.

When this was done I had a totally MinGW build setup with no Cygwin  
binaries and everything understanding the same MinGW path conventions  
ie C:\foo\bar, C:/foo/bar or /c/foo/bar.  I did not need to make any  
modifications to the Windows PATH other than those made automatically  
by the installers for the various packages.

It all works very nicely to build R from sources using 'make  
distribution' as described in the manual.

If anyone would like a copy of the makeinfo binary to save the  
trouble of building it, please email me.

One final note:  If you install the MinGW Msys-DTK rename the perl  
binaries such as perl.exe which it provides.  Otherwise they will be  
used instead of the ActiveState ones and they don't work.

Cheers
Bill Northcott


From p.dalgaard at biostat.ku.dk  Wed Jul 13 11:56:51 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 13 Jul 2005 11:56:51 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <164695F6-B36F-4DFC-8685-EF7A2E78509C@soc.soton.ac.uk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A27@DJFPOST01.djf.agrsci.dk>
	<971536df05071218366de965e2@mail.gmail.com>
	<164695F6-B36F-4DFC-8685-EF7A2E78509C@soc.soton.ac.uk>
Message-ID: <x2br57c9lo.fsf@turmalin.kubism.ku.dk>

Robin Hankin <r.hankin at noc.soton.ac.uk> writes:

> Hi guys
> 
> another option would be David Gillespie's  "calc", which is written  
> in emacs lisp.
> 
> This is a stable system with (AFAICS) as large user base.
> 
> Unfortunately, it doesn't seem to be actively developed, as the last  
> stable version (2.02f)
> appears to be 1996.  I don't know if this would be a contraindication.

Heh. I remember trying calc when it was still relatively new. Never
got to be very productive with it. I suppose that's sort of a
contraindication (it might just be the user of course). 

The two ideas that Simon and Gabor brought up bouth sound like they
might fly. Especially the existence of something with a Python
interface sounds attractive, since that might not be too hard to clone
or paraphrase in R.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From Soren.Hojsgaard at agrsci.dk  Wed Jul 13 12:04:35 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Wed, 13 Jul 2005 12:04:35 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>

I think it is essential that the program which 'we' are trying to interface from R is under active development. I guess that it would also be 'politically wise' (and potentially useful) to ensure that the people behind Maxima and/or Yacas and/or ... find that it would be a good idea to interface their program from R (I don't see why they should not, though...)
 
Some time ago, I developed the mimR package which is essentially a wrapper to a statistical program called mim. The interfacing was made possible by that the creator of mim (David Edwards) made some small changes to his program such that it could be accessed programatically. I am not sure what the details were, but as I understood it at that time, it was not at whole lot of things that needed to be done. (And that was for Windows platforms only). Perhaps Yacas/Maxima/... - people could be talked into such changes of their packages??? Yet, it would require that R-people who know some details about such communications contact them..
 
Best regards
S?ren
 

________________________________

Fra: Robin Hankin [mailto:r.hankin at noc.soton.ac.uk]
Sendt: on 13-07-2005 09:04
Til: Gabor Grothendieck
Cc: S?ren H?jsgaard; Duncan Murdoch; r-devel at stat.math.ethz.ch
Emne: Re: [Rd] Computer algebra in R - would that be an idea??



Hi guys

another option would be David Gillespie's  "calc", which is written 
in emacs lisp.

This is a stable system with (AFAICS) as large user base.

Unfortunately, it doesn't seem to be actively developed, as the last 
stable version (2.02f)
appears to be 1996.  I don't know if this would be a contraindication.


Robin



On 13 Jul 2005, at 02:36, Gabor Grothendieck wrote:

> I don't know which free system is best.  I have mainly used Yacas
> but my needs to date have been pretty minimal so I suspect
> any of them would have worked.
>
> Eric's COM solution, once I have it figured out, will likely get me
> to the next step on Windows.  I did some googling around and
> found this:
>
> http://www.koders.com/python/
> fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx
>
> which is a python interface to Yacas which may give some ideas
> on how to interface it to R.
>
>
> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>
>> Personally, I like Maxima better than Yacas, but in both cases the 
>> solution (at least a minimal one) should be doable: A small 
>> program which pipes R commands into a terminal running Maxima/
>> Yacas and taking the output back into R. I am not much into the 
>> technical details, but isn't that what can be done with the COM 
>> automatation server on Windows?? (I don't know what the equivalent 
>> would be on unix?).
>> Best regards
>> S?ren
>>
>> ________________________________
>>
>> Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
>> Sendt: on 13-07-2005 01:52
>> Til: Duncan Murdoch; Gabor Grothendieck
>> Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
>> Emne: Re: [Rd] Computer algebra in R - would that be an idea??
>>
>>
>>
>> I would use such a symbolic math package for R. I have dreamt of an
>> open-source solution with functionality similar to mathStatica.
>> http://www.mathstatica.com/ Is yacas the best system to consider? 
>> What
>> about  Maxima http://maxima.sourceforge.net/, which is also GPL, 
>> or maybe
>> Axiom http://savannah.nongnu.org/projects/axiom, which has a 
>> modified BSD
>> license?
>>
>> Cheers,
>>
>> Simon.
>>
>> At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
>>
>>> On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
>>>
>>>> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>>>>
>>>>>> From time to time people request symbolic computations beyond 
>>>>>> what
>>>>>>
>>> D() and deriv() etc can provide. A brief look at the internet 
>>> shows that
>>> there are many more or less developed computer algebra packages 
>>> freely
>>> available. Therefore, I wondered if it would be an idea to try to
>>> 'integrate' one of these packages in R, which I guess can be done 
>>> in more
>>> or less elegant ways... I do not know any of the computer algebra 
>>> people
>>> around the World, but perhaps some other people from the R-
>>> community do
>>> and would be able to/interested in establishing such a connection...
>>>
>>>>
>>>>
>>>> Coincidentally I asked the yacas developer about this just 
>>>> yesterday:
>>>>
>>>>
>>> http://sourceforge.net/mailarchive/forum.php?
>>> thread_id=7711431&forum_id=2216
>>>
>>> It sounds like developing an R package to act as a wrapper would 
>>> be the
>>> best approach.  I didn't see documentation for their API (the 
>>> exports of
>>> their DLL), but I didn't spend long looking.
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
>> Centre for Resource and Environmental Studies
>> The Australian National University
>> Canberra ACT 0200
>> Australia
>> T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
>> F: +61 2 6125 0757
>> CRICOS Provider # 00120C
>>
>>
>>
>>
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From Heather.Turner at warwick.ac.uk  Wed Jul 13 13:26:17 2005
From: Heather.Turner at warwick.ac.uk (Heather.Turner@warwick.ac.uk)
Date: Wed, 13 Jul 2005 13:26:17 +0200 (CEST)
Subject: [Rd] as.data.frame.table responseName argument (PR#8006)
Message-ID: <20050713112617.3F282A270@slim.kubism.ku.dk>

Full_Name: Heather Turner
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (137.205.240.44)


I get an error when trying to use the responseName argument of
as.data.frame.table, e.g.

> ## Create table
> f <- gl(3, 3)
> tab <- table(f)
> tab
f
1 2 3 
3 3 3 
> ## Convert to data.frame - works fine
> dat1 <- as.data.frame(tab)
> dat1
  f Freq
1 1    3
2 2    3
3 3    3
> ## As above with responseName - get error
> dat2 <- as.data.frame(tab, responseName = "count")
Error in as.data.frame(tab, responseName = "count") : 
	unused argument(s) (responseName ...)

I have checked the arguments of as.data.frame.table and responseName is there:
> args(as.data.frame.table)
function (x, row.names = NULL, optional = FALSE, responseName = "Freq", 
    ...) 
NULL
but I notice as.data.frame has no dots argument
> args(as.data.frame)
function (x, row.names = NULL, optional = FALSE) 
NULL
which would (I think) explain the error,

Heather


From ripley at stats.ox.ac.uk  Wed Jul 13 13:49:10 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Jul 2005 13:49:10 +0200 (CEST)
Subject: [Rd] as.data.frame.table responseName argument (PR#8006)
Message-ID: <20050713114910.616A0A25B@slim.kubism.ku.dk>

You need to call as.data.frame.table directly here.

If we alter the generic we would need to alter all the many methods too 
(including those in various CRAN packages), and I am not sure this would 
be worth it (rather than clarifying the documentation).

This was a user-contributed enhancement that seems to have caused more 
problem that its value.

On Wed, 13 Jul 2005 Heather.Turner at warwick.ac.uk wrote:

> Full_Name: Heather Turner
> Version: 2.1.1
> OS: Windows XP
> Submission from: (NULL) (137.205.240.44)
>
>
> I get an error when trying to use the responseName argument of
> as.data.frame.table, e.g.
>
>> ## Create table
>> f <- gl(3, 3)
>> tab <- table(f)
>> tab
> f
> 1 2 3
> 3 3 3
>> ## Convert to data.frame - works fine
>> dat1 <- as.data.frame(tab)
>> dat1
>  f Freq
> 1 1    3
> 2 2    3
> 3 3    3
>> ## As above with responseName - get error
>> dat2 <- as.data.frame(tab, responseName = "count")
> Error in as.data.frame(tab, responseName = "count") :
> 	unused argument(s) (responseName ...)
>
> I have checked the arguments of as.data.frame.table and responseName is there:
>> args(as.data.frame.table)
> function (x, row.names = NULL, optional = FALSE, responseName = "Freq",
>    ...)
> NULL
> but I notice as.data.frame has no dots argument
>> args(as.data.frame)
> function (x, row.names = NULL, optional = FALSE)
> NULL
> which would (I think) explain the error,
>
> Heather
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Wed Jul 13 18:08:11 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 13 Jul 2005 18:08:11 +0200
Subject: [Rd] (PR#7976) split() dropping levels (was "boxplot by factor")
In-Reply-To: <17096.57903.116405.259737@stat.math.ethz.ch>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFA64EA20@usctmx1106.Merck.com>
	<x2aclaskop.fsf@turmalin.kubism.ku.dk>
	<17093.28966.102963.959771@stat.math.ethz.ch>
	<17096.57903.116405.259737@stat.math.ethz.ch>
Message-ID: <17109.15467.403899.887623@stat.math.ethz.ch>

I have now committed the new     split(x, f, drop = FALSE)
to R-devel --- entailing non-backward compatible behavior,
but consistency with factor indexing (and with S-plus) ---
split() and "split<-" and unsplit() functions and methods to
R-devel.

This does automatically fix the original posters "boxplot by
factor" bug.


>>>>> "MM" == Martin Maechler <maechler at stat.math.ethz.ch>
>>>>>     on Mon, 4 Jul 2005 09:15:59 +0200 writes:


>>>>> "PD" == Peter Dalgaard <p.dalgaard at biostat.ku.dk>
>>>>>     on 28 Jun 2005 14:57:42 +0200 writes:

    PD> "Liaw, Andy" <andy_liaw at merck.com> writes:
    >>>> The issue is not with boxplot, but with split.  boxplot.formula() 
    >>>> calls boxplot(split(split(mf[[response]], mf[-response]), ...), 
    >>>> but look at what split() returns when there are empty levels in
    >>>> the factor:
    >>>> 
    >>>> > f <- factor(gl(3, 6), levels=1:5)
    >>>> > y <- rnorm(f)
    >>>> > split(y, f)
    >>>> $"1"
    >>>> [1] 0.4832124 1.1924811 0.3657797 1.7400198 0.5577356 0.9889520
    >>>> 
    >>>> $"2"
    >>>> [1] -1.1296642 -0.4808355 -0.2789933  0.1220718  0.1287742 -0.7573801
    >>>> 
    >>>> $"3"
    >>>> [1]  1.2320902  0.5090700 -1.5508074  2.1373780  1.1681297 -0.7151561
    >>>> 
    >>>> The "culprit" is the following in split.default():
    >>>> 
    >>>> f <- factor(f)
    >>>> 
    >>>> which drops empty levels in f, if there are any.  BTW, ?split doesn't
    >>>> mention what it does in such situation.  Perhaps it should?
    >>>> 
    >>>> If this is to be "fixed", I suppose an additional argument, e.g.,
    >>>> drop=TRUE, can be added, and the corresponding line mentioned
    >>>> above changed to something like:
    >>>> 
    >>>> if (drop || !is.factor(f)) f <- factor(f)
    >>>> 
    >>>> Then this additional argument can be pass on from boxplot.formula() to 
    >>>> split().

    PD> Alternatively, I suspect that the intention was as.factor() rather
    PD> than factor(). 

    MM> at first I thought Peter was right; but the real source of
    MM> split.default contains a comment (!) and that line is

    MM> f <- factor(f) # drop extraneous levels

    MM> so it seems, this was done there very much on purpose.    
    MM> OTOH, S(-plus) has implemented it quite a bit differently, and actually
    MM> does keep the empty levels in the example

    MM> f <- factor(rep(1:3, each=6), levels=1:5); y <- rnorm(f); split(y, f)

    PD> It does require a bit of care to fix it that way,
    PD> though. There could be problems with empty levels popping up in
    PD> unexpected places. 

    MM> Indeed!
    MM> Given the new facts, I think we want to go in Andy's direction
    MM> with a new argument, 'drop'

    MM> A Peter mentioned, the real question is about its default.
    MM> "drop = TRUE"   would be fully compatible with previous versions of R.
    MM> "drop = FALSE"  would be compatible with S and S-plus.

    MM> I'm going to implement it, and try to see if 'drop = FALSE'
    MM> gives changes for R and its standard packages;  if 'yes', that
    MM> would be an indication that such a R-back-compatibility breaking
    MM> change was not a good idea.  If 'no', I could commit it and see
    MM> if it has an effect on the CRAN packages....

    MM> Of course, since split() and split()<- are S3 generics, and
    MM> since there's also unsplit(),  this entails a whole slew of
    MM> changes {adding a "drop = FALSE" argument everywhere!}
    MM> and I presume will break everyone's code who has written own
    MM> split.foobar methods....

    MM> great...

    MM> Martin

    MM> The change doesn't seem to affect the "standard" packages at all
    MM> which is good.  On CRAN, it seems there are two packages only that
    MM> have  split() or split()<-  methods,  namely 'spatstat' and 'compositions'.

    MM> If we introduced the extra argument 'drop', 
    MM> these and every other user code defining split methods would
    MM> have to be updated to be compatible with the changed (S3)
    MM> generic having an extra argument 'drop'.

    MM> With this in mind, after more thought, I think that Peter's
    MM> initial proposal ---just replacing 'factor()' by 'as.factor()'
    MM> inside split--- seems to be nicer than introducing 'drop' and
    MM> *change* the default behavior to  'drop = FALSE' for the
    MM> following reasons : 

    MM> 1) people who rely on the current behavior would have to change
    MM> their calls to split() anyway;

    MM> 2) instead of calling  
    MM> split(x, f, drop=TRUE)
    MM> they can as well go for
    MM> split(x, factor(f)) 
    MM> which has identical effect but does not introduce an extra
    MM> argument 'drop'.

    MM> 3) advantage of slightly higher compatibility with S

    MM> ---

    MM> I intend to change this in R-devel
    MM> {with appropriate notes in NEWS !} during this week, unless
    MM> someone finds good reasons for a different (or no) change.

    MM> Martin

    MM> ______________________________________________
    MM> R-devel at r-project.org mailing list
    MM> https://stat.ethz.ch/mailman/listinfo/r-devel


    MM> !DSPAM:42c8e272288132092019954!


From ggrothendieck at gmail.com  Thu Jul 14 16:55:06 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 14 Jul 2005 10:55:06 -0400
Subject: [Rd] upgrading an R installation to next versoin
In-Reply-To: <42C3ED74.7030905@stats.uwo.ca>
References: <971536df0506300510f6d6ac2@mail.gmail.com>
	<42C3ED74.7030905@stats.uwo.ca>
Message-ID: <971536df0507140755550ab795@mail.gmail.com>

I have been thinking a bit more about the Windows R installation
upgrade discussion below and there are really two cases:

1. one wants to upgrade R and is no longer interested in preserving
the old versions of R

In this case one could configure R to have a ..\R\library folder that 
contains the library and *.site files so that they do not have to be 
moved each time that one upgrades R.  (The old versions of R still 
access the same library and *.site files as the new versions of R 
and over time its likely that they won't work any more with the old
versions of R as we start using the features of the newer R
but in this case we don't really care.)  The problem here is that
the defaults do not support this and one must set environment
variables which complicates setup.   I have some batch files
which will automatically set them although if R would automatically:
1. look into ...\R\library if it cannot find ...\R\rw...\library and 
2. look for ...\R\etc\*.site if it cannot find them in ...\R\rw...\etc\*.site
this could be streamlined substantially.  The only danger in
supporting this is that anyone who used this facility would
not be preserving the identity of different versions on his
system -- although that is already true if they use R_PROFILE,
etc. since that applies to all versions too.

2. one wants to upgrade R but wants to maintain the old versions
in working order.

In this case we need to snapshot the library and *.site files so
we might as well keep them in a version-specific area, viz.
...\R\rw...\library and ...\R\rw...\etc\*.site
and then copy them over to the new version of R when that
new version is installed (so that as they change over time
with the new version the old version of R still has its older
ones).

Thus I would suggest that we:

1. by default search for ..\R\library and \R\*.site if those are not
otherwise found

2. have an option to allow or disallow the installation program to
copy over *.site
and library files from the old version to the new version (or else provide 
registry information on what the old and new versions are so that one can 
write a program to do it oneself)




On 6/30/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> On 6/30/2005 8:10 AM, Gabor Grothendieck wrote:
> > When I install a new version of R (Windows XP) I have to:
> >
> > 1. copy my rw....\etc\Rprofile.site file to the new installation
> >
> > 2. copy the rw....\share\texmf files to the tex subfolder of the
> >    miktex root directory and then refresh the miktex name database
> >    (I have a batch file that does this for me which I run
> >    whenever I install a new version of R.)
> >
> > 3. setup the shortcut key using 'properties' on my R desktop icon so
> >    that ctrl-alt-R brings up the new rather than the old R.  (This one
> >    really had me confused once since I did not realize I was still
> >    using the old version of R after installing the new one.)
> >
> > 4. reinstall the packages I use or else setup etc\Renviron.site with
> >    an R_LIBS to point to include the old library or perhaps one can
> >    copy the libraries over being careful not to overwrite new versions
> >    of the standard libraries.
> >
> > Many other windows program automatically transfer the settings when
> > you upgrade them.
> >
> > I wonder if the installation process could optionally transfer
> > such settings from an old installation to a new one to make it
> > easier to install R.
> 
> I think a couple of these could be handled by not applying so many
> modifications to the R installation, do more locally.  For example, #1
> needn't be copied, you can just use the R_ENVIRON environment variable
> to point to it and both versions will see it.
> 
> I'd call #2 a bug in MikTeX, but it's probably one we'll have to work
> around one of these days.  (The bug is dropping support for the
> environment variable specification of extra include directories.)
> 
> #3 might be something we could do, but I don't see how.  The installer
> could know what hotkey you used the last time you installed R, but if
> you changed it in the meantime, how would it know about that?  And how
> would it remove the hotkey from the old shortcut?  (A little
> experimentation suggests that XP is buggy in handling multiple shortcuts
> with the same hotkey.  I'd rather stay away from this.)
> 
> #4 is another case where you can put your libraries outside R_HOME.
> 
> Duncan Murdoch
>


From lars at predict.com  Fri Jul 15 01:26:50 2005
From: lars at predict.com (lars@predict.com)
Date: Fri, 15 Jul 2005 01:26:50 +0200 (CEST)
Subject: [Rd] (PR#7951) DispatchOrEval missing in do_isfinite and
	do_isinfinite
Message-ID: <20050714232650.632EFA2CB@slim.kubism.ku.dk>

Hi,

I ran into another internal function that is missing S4 dispatch. It is 
the binary operator ":". Looking at the code, I see that it is actually 
a common problem. Other candidates are operators like "~", "&&", "||" 
and functions like: "length<-", "row", "col", "unlist", "cbind", etc. It 
would for instance be nice to be able to write a matrix class that has 
the same operators and functions as the built-in class. In general, I 
think that all the operators and functions associates with built-in 
types like vectors, lists, matrices and data frames should have S4 dispatch.

Thanks,
Lars

lars wrote:

> Hi,
>
> OK, if you try to explicitly make them generic, you are told that they 
> are implicitly already generic:
>
> > setGeneric("is.finite", function(from, ...) 
> standardGeneric("is.finite"))
> Error in setGeneric("is.finite", function(from, ...) 
> standardGeneric("is.finite")) :
>    "is.finite" is a primitive function;  methods can be defined, but 
> the generic function is implicit, and can't be changed.
>
> If you query about its genericness before you define you own generic, 
> you get:
>
> > isGeneric("is.finite")
> [1] FALSE
>
> But after you define you own generic, you get:
>
> > setMethod("is.finite", signature(x="TS"),
> +           function(x) {
> +              Data(x) = callNextMethod()
> +              x
> +           })
> [1] "is.finite"
>
> > isGeneric("is.finite")
> [1] TRUE
>
> This all makes some sense, but I am not familiar enough with he 
> internals to explain exactly why it is done this way. I think you will 
> fine that 'is.nan' behave exactly the same way.
>
> Thanks,
> Lars
>
>
> Prof Brian Ripley wrote:
>
>> These functions are not generic according to the help page.
>> The same page says explicitly that is.nan is generic.
>>
>> Where did you get the (false) idea that they were generic?
>>
>> On Thu, 16 Jun 2005 lars at predict.com wrote:
>>
>>> Full_Name: Lars Hansen
>>> Version: 2.1.0
>>> OS: SunOS 5.8
>>> Submission from: (NULL) (207.66.36.189)
>>>
>>>
>>> Hi,
>>>
>>> S4 method displacth does not work for the two generic functions 
>>> 'is.finite' and 'is.infinite'. It turns out that the C functions 
>>> 'do_isfinite' and 'do_isinfinite' in src/main/coerce.c are missing a 
>>> call to 'DispatchOrEval' (see do_isnan). Added in the call fixed the 
>>> problem. My functions no look like this:
>>>
>>> Form coerce.c:
>>>
>>> SEXP do_isfinite(SEXP call, SEXP op, SEXP args, SEXP rho)
>>> {
>>>    SEXP ans, x, names, dims;
>>>    int i, n;
>>>
>>>    if (DispatchOrEval(call, op, "is.finite", args, rho, &ans, 1, 1))
>>>        return(ans);
>>>
>>>    checkArity(op, args);
>>>    ...
>>>
>>> SEXP do_isinfinite(SEXP call, SEXP op, SEXP args, SEXP rho)
>>> {
>>>    SEXP ans, x, names, dims;
>>>    double xr, xi;
>>>    int i, n;
>>>
>>>    if (DispatchOrEval(call, op, "is.infinite", args, rho, &ans, 1, 1))
>>>        return(ans);
>>>
>>>    checkArity(op, args);
>>>    ...
>>
>>
>>
>


From Soren.Hojsgaard at agrsci.dk  Fri Jul 15 02:21:00 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Fri, 15 Jul 2005 02:21:00 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>

Perhaps, this is the wrong mailing list, but I've been thinking about calling e.g. maxima from R through some kind of wrapper. On windows, maxima can be invoked through a file called maxima.bat which opens a simple 'dos terminal' in which maxima is running. A simple way of interfacing R and maxima would be through a function which 'copies' a text string into such a dos terminal with maxima running and copies the output back into R. That particular task is something which one might want to be able to do with several other programs too... A way of doing this would be through the system() and/or shell() functions where input and output can be redirected to/from the program called, e.g. maxima. The problem is, that system()/shell() will start maxima, execute the submitted code and terminate maxima. As I understand it, RDCOMClient provides a way of getting a 'handle' on such a program provided that the program is written in a specific way - something to do with COM. However, I wonder if it would be possible to write a general R function, (e.g. called dynamicshell()) which would provide a handle on such an application and to which one could send commands and retrieve output without shutting the application down. That is, essentially, a programatic form of 'copy and paste' in two directions... Is there anything in the way R is constructed that prevents that such a function could be written, and if so can anyone explain to me why and/or point me to a reference explaining why. 
 
Best regards
S?ren

________________________________

Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
Sendt: on 13-07-2005 04:42
Til: Gabor Grothendieck; S?ren H?jsgaard
Cc: Duncan Murdoch; r-devel at stat.math.ethz.ch
Emne: Re: [Rd] Computer algebra in R - would that be an idea??



Another approach might be to construct a wrapper for Aldor code, along the
lines of .Fortran and .C. Aldor is the extension language for AXIOM
http://www.aldor.org/, and there is a symbolic algebra library available
for Aldor http://www-sop.inria.fr/cafe/Manuel.Bronstein/algebra, which
ships with the Aldor compiler. Of course, I am much better at thinking up
these ideas than implementing them myself. :-)

Simon.


At 11:36 AM 13/07/2005, Gabor Grothendieck wrote:
>I don't know which free system is best.  I have mainly used Yacas
>but my needs to date have been pretty minimal so I suspect
>any of them would have worked.
>
>Eric's COM solution, once I have it figured out, will likely get me
>to the next step on Windows.  I did some googling around and
>found this:
>
>http://www.koders.com/python/fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx
>
>which is a python interface to Yacas which may give some ideas
>on how to interface it to R.
>
>
>On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> > Personally, I like Maxima better than Yacas, but in both cases the
> solution (at least a minimal one) should be doable: A small program which
> pipes R commands into a terminal running Maxima/Yacas and taking the
> output back into R. I am not much into the technical details, but isn't
> that what can be done with the COM automatation server on Windows?? (I
> don't know what the equivalent would be on unix?).
> > Best regards
> > S?ren
> >
> > ________________________________
> >
> > Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
> > Sendt: on 13-07-2005 01:52
> > Til: Duncan Murdoch; Gabor Grothendieck
> > Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
> > Emne: Re: [Rd] Computer algebra in R - would that be an idea??
> >
> >
> >
> > I would use such a symbolic math package for R. I have dreamt of an
> > open-source solution with functionality similar to mathStatica.
> > http://www.mathstatica.com/ Is yacas the best system to consider? What
> > about  Maxima http://maxima.sourceforge.net/, which is also GPL, or maybe
> > Axiom http://savannah.nongnu.org/projects/axiom, which has a modified BSD
> > license?
> >
> > Cheers,
> >
> > Simon.
> >
> > At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
> > >On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
> > > > On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
> > > >> >From time to time people request symbolic computations beyond what
> > > D() and deriv() etc can provide. A brief look at the internet shows that
> > > there are many more or less developed computer algebra packages freely
> > > available. Therefore, I wondered if it would be an idea to try to
> > > 'integrate' one of these packages in R, which I guess can be done in more
> > > or less elegant ways... I do not know any of the computer algebra people
> > > around the World, but perhaps some other people from the R-community do
> > > and would be able to/interested in establishing such a connection...
> > > >
> > > >
> > > > Coincidentally I asked the yacas developer about this just yesterday:
> > > >
> > >
> http://sourceforge.net/mailarchive/forum.php?thread_id=7711431&forum_id=2216
> > >
> > >It sounds like developing an R package to act as a wrapper would be the
> > >best approach.  I didn't see documentation for their API (the exports of
> > >their DLL), but I didn't spend long looking.
> > >
> > >Duncan Murdoch
> > >
> > >______________________________________________
> > >R-devel at r-project.org mailing list
> > >https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> > Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> > Centre for Resource and Environmental Studies
> > The Australian National University
> > Canberra ACT 0200
> > Australia
> > T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
> > F: +61 2 6125 0757
> > CRICOS Provider # 00120C
> >
> >
> >
> >
> >


From feferraz at ime.usp.br  Fri Jul 15 03:31:02 2005
From: feferraz at ime.usp.br (Fernando Henrique Ferraz P. da Rosa)
Date: Thu, 14 Jul 2005 22:31:02 -0300
Subject: [Rd] Other mailing lists about R
Message-ID: <20050715013102.GA9716@ime.usp.br>

       I'd like to suggest an addition to the 'Mailing Lists' page on
the R-project site: [1]. There could be a section 'Non-official mailing
lists', with links to other mailing lists about R, not maitained by the
R-core group, potentially including mailing lists in other languages. 

        As a suggestion of a mailling list which could be added to this
new section is 'R_STAT' [2], a brazilian list on R and statistics,
in portuguese. I think there must be other such localized lists,
probably in other languages, and there would be the natural place to
look for them. Alternatively, they could be added to the
Documentation section, under the Other -> Non-english material
subsection.

        I did a search for other lists but couldn't find any. This
naturally doesn't mean there aren't any others, so if anyone on the list
knows of such a list please send a reply to this message.


References
[1] http://www.r-project.org/mail.html 
[2] http://br.groups.yahoo.com/group/R_STAT/

--
Fernando Henrique Ferraz P. da Rosa
http://www.ime.usp.br/~feferraz


From goedman at mac.com  Fri Jul 15 06:39:01 2005
From: goedman at mac.com (Rob J Goedman)
Date: Thu, 14 Jul 2005 21:39:01 -0700
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>
Message-ID: <86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>

A really simple way to play with R & yacas is by using the examples  
in the subdir
'embed' of yacas-1.0.57.

After building yacas (on Mac OS in my case):

 > res<-system("~/Projects/yacas-1.0.57/embed/example2", intern=T)
 > res
[1] "Cos(x);"

or

 > res<-system("~/Projects/yacas-1.0.57/embed/example1 'D(x){{Sin 
(x),Cos(x)}, {Sin(2*x),-Cos(x)}}'", intern=T)
 > res
[1] "Input> D(x){{Sin(x),Cos(x)}, {Sin(2*x),-Cos(x)}}"
[2] "Output> {{Cos(x),-Sin(x)},{2*Cos(2*x),Sin(x)}};"

or

 > system("yacas -pc --execute '[Echo(D(x)Sin(x));Exit();]'")
Cos(x)

or

 > system("echo 'Example()' | yacas_client")
In> Example()
Current example : Integrate(x,a,b)Sin(x);

Integrate a function.

Out> Cos(a)-Cos(b)
In>
 > system("echo 'Type(%)' | yacas_client")
In> Type(%)
Out> "-"
In>

This last example does show the yacas server stays alive between  
calls from R. yacas_client is a script.
Maybe that approach also works for maxima?

I wonder how difficult it would be to translate expressions back and  
forth from R to yacas in either R
or C++. And maybe strip 'In>' and 'Out>' like parts.

Rob

On Jul 14, 2005, at 5:21 PM, S?ren H?jsgaard wrote:

> Perhaps, this is the wrong mailing list, but I've been thinking  
> about calling e.g. maxima from R through some kind of wrapper. On  
> windows, maxima can be invoked through a file called maxima.bat  
> which opens a simple 'dos terminal' in which maxima is running. A  
> simple way of interfacing R and maxima would be through a function  
> which 'copies' a text string into such a dos terminal with maxima  
> running and copies the output back into R. That particular task is  
> something which one might want to be able to do with several other  
> programs too... A way of doing this would be through the system()  
> and/or shell() functions where input and output can be redirected  
> to/from the program called, e.g. maxima. The problem is, that system 
> ()/shell() will start maxima, execute the submitted code and  
> terminate maxima. As I understand it, RDCOMClient provides a way of  
> getting a 'handle' on such a program provided that the program is  
> written in a specific way - something to do with COM. However, I  
> wonder if it would be possible to write a general R function, (e.g.  
> called dynamicshell()) which would provide a handle on such an  
> application and to which one could send commands and retrieve  
> output without shutting the application down. That is, essentially,  
> a programatic form of 'copy and paste' in two directions... Is  
> there anything in the way R is constructed that prevents that such  
> a function could be written, and if so can anyone explain to me why  
> and/or point me to a reference explaining why.
>
> Best regards
> S?ren
>
> ________________________________
>
> Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
> Sendt: on 13-07-2005 04:42
> Til: Gabor Grothendieck; S?ren H?jsgaard
> Cc: Duncan Murdoch; r-devel at stat.math.ethz.ch
> Emne: Re: [Rd] Computer algebra in R - would that be an idea??
>
>
>
> Another approach might be to construct a wrapper for Aldor code,  
> along the
> lines of .Fortran and .C. Aldor is the extension language for AXIOM
> http://www.aldor.org/, and there is a symbolic algebra library  
> available
> for Aldor http://www-sop.inria.fr/cafe/Manuel.Bronstein/algebra, which
> ships with the Aldor compiler. Of course, I am much better at  
> thinking up
> these ideas than implementing them myself. :-)
>
> Simon.
>
>
> At 11:36 AM 13/07/2005, Gabor Grothendieck wrote:
>
>> I don't know which free system is best.  I have mainly used Yacas
>> but my needs to date have been pretty minimal so I suspect
>> any of them would have worked.
>>
>> Eric's COM solution, once I have it figured out, will likely get me
>> to the next step on Windows.  I did some googling around and
>> found this:
>>
>> http://www.koders.com/python/ 
>> fidDCC1B0FBFABC770277A28835D5FFADC9D25FF54E.aspx
>>
>> which is a python interface to Yacas which may give some ideas
>> on how to interface it to R.
>>
>>
>> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>>
>>> Personally, I like Maxima better than Yacas, but in both cases the
>>>
>> solution (at least a minimal one) should be doable: A small  
>> program which
>> pipes R commands into a terminal running Maxima/Yacas and taking the
>> output back into R. I am not much into the technical details, but  
>> isn't
>> that what can be done with the COM automatation server on  
>> Windows?? (I
>> don't know what the equivalent would be on unix?).
>>
>>> Best regards
>>> S?ren
>>>
>>> ________________________________
>>>
>>> Fra: Simon Blomberg [mailto:Simon.Blomberg at anu.edu.au]
>>> Sendt: on 13-07-2005 01:52
>>> Til: Duncan Murdoch; Gabor Grothendieck
>>> Cc: S?ren H?jsgaard; r-devel at stat.math.ethz.ch
>>> Emne: Re: [Rd] Computer algebra in R - would that be an idea??
>>>
>>>
>>>
>>> I would use such a symbolic math package for R. I have dreamt of an
>>> open-source solution with functionality similar to mathStatica.
>>> http://www.mathstatica.com/ Is yacas the best system to consider?  
>>> What
>>> about  Maxima http://maxima.sourceforge.net/, which is also GPL,  
>>> or maybe
>>> Axiom http://savannah.nongnu.org/projects/axiom, which has a  
>>> modified BSD
>>> license?
>>>
>>> Cheers,
>>>
>>> Simon.
>>>
>>> At 01:25 AM 13/07/2005, Duncan Murdoch wrote:
>>>
>>>> On 7/12/2005 10:57 AM, Gabor Grothendieck wrote:
>>>>
>>>>> On 7/12/05, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk> wrote:
>>>>>
>>>>>>> From time to time people request symbolic computations beyond  
>>>>>>> what
>>>>>>>
>>>> D() and deriv() etc can provide. A brief look at the internet  
>>>> shows that
>>>> there are many more or less developed computer algebra packages  
>>>> freely
>>>> available. Therefore, I wondered if it would be an idea to try to
>>>> 'integrate' one of these packages in R, which I guess can be  
>>>> done in more
>>>> or less elegant ways... I do not know any of the computer  
>>>> algebra people
>>>> around the World, but perhaps some other people from the R- 
>>>> community do
>>>> and would be able to/interested in establishing such a  
>>>> connection...
>>>>
>>>>>
>>>>>
>>>>> Coincidentally I asked the yacas developer about this just  
>>>>> yesterday:
>>>>>
>>>>>
>>>>
>>>>
>> http://sourceforge.net/mailarchive/forum.php? 
>> thread_id=7711431&forum_id=2216
>>
>>>>
>>>> It sounds like developing an R package to act as a wrapper would  
>>>> be the
>>>> best approach.  I didn't see documentation for their API (the  
>>>> exports of
>>>> their DLL), but I didn't spend long looking.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>
>>> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
>>> Centre for Resource and Environmental Studies
>>> The Australian National University
>>> Canberra ACT 0200
>>> Australia
>>> T: +61 2 6125 7800 email: Simon.Blomberg_at_anu.edu.au
>>> F: +61 2 6125 0757
>>> CRICOS Provider # 00120C
>>>
>>>
>>>
>>>
>>>
>>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From feferraz at ime.usp.br  Fri Jul 15 08:49:43 2005
From: feferraz at ime.usp.br (Fernando Henrique Ferraz P. da Rosa)
Date: Fri, 15 Jul 2005 03:49:43 -0300
Subject: [Rd] Adjusted p-values with TukeyHSD (patch)
Message-ID: <20050715064943.GA5748@ime.usp.br>

        Dear R-developeRs,

        Attached follows a patch against svn 34959 that adds the
printing of p-values to the TukeyHSD.aov function in stats package. I
also updated the corresponding documentation file and added a 'see also'
reference to the simint function of the multcomp package.

        As it was already brought up in a previous thread [1] in R-help,
one can obtain the adjusted p-values using the multcomp package and its
simint function. The problem is that currently the simint function
scales very badly for a large number of contrasts (> 15). While the output
of TukeyHSD is almost instantaneous, simint may take more than half an
hour to process 19 contrasts.

        As a toy example, try:

        y <- rnorm(500)
        A <- gl(5,100)
        system.time(h1 <- TukeyHSD((aov(y ~ A))))
        system.time(h2 <- simint(y ~ A,type="Tukey"))

        Here I got:
        [1] 0.09 0.01 0.10 0.00 0.00
        [1] 26.87  0.03 27.10  0.00  0.00

        For a small number of contrasts they're equivalent, for example:

        data(warpbreaks)
        fm1 <- aov(breaks ~ wool + tension, data = warpbreaks)
        tHSD <- TukeyHSD(fm1, "tension", ordered = FALSE)
        print(tHSD)
        mcHSD <- simint(breaks ~ wool + tension, data = warpbreaks,
                     whichf="tension", type="Tukey")
        summary(mcHSD)

        I also attached the complete function (mTukeyHSD.R) to this
message, in case the patch is not accepted and someone else needs to do
the same thing. In any case, I think the reference to the multcomp
package in the TukeyHSD help page should be considered even if the patch
to the function is not accepted. 

       Thank you, 

References
[1] http://tolstoy.newcastle.edu.au/R/help/05/05/4599.html

--
Fernando Henrique Ferraz P. da Rosa
http://www.ime.usp.br/~feferraz
-------------- next part --------------
diff -ru r-devel/R/ r-local/R
diff -ru r-devel/R/src/library/stats/R/TukeyHSD.R r-local/R/src/library/stats/R/TukeyHSD.R
--- r-devel/R/src/library/stats/R/TukeyHSD.R	2005-07-14 23:13:49.000000000 -0300
+++ r-local/R/src/library/stats/R/TukeyHSD.R	2005-07-15 02:43:25.055207448 -0300
@@ -66,10 +66,12 @@
         center <- center[keep]
         width <- qtukey(conf.level, length(means), x$df.residual) *
             sqrt((MSE/2) * outer(1/n, 1/n, "+"))[keep]
-        dnames <- list(NULL, c("diff", "lwr", "upr"))
+        est <- center/(sqrt((MSE/2) * outer(1/n, 1/n, "+"))[keep])
+        pvals <- ptukey(abs(est),length(means),x$df.residual,lower.tail=FALSE)
+        dnames <- list(NULL, c("diff", "lwr", "upr","p adj"))
         if (!is.null(nms)) dnames[[1]] <- outer(nms, nms, paste, sep = "-")[keep]
-        out[[nm]] <- array(c(center, center - width, center + width),
-                           c(length(width), 3), dnames)
+        out[[nm]] <- array(c(center, center - width, center + width,pvals),
+                           c(length(width), 4), dnames)
     }
     class(out) <- c("multicomp", "TukeyHSD")
     attr(out, "orig.call") <- x$call
diff -ru r-devel/R/src/library/stats/man/TukeyHSD.Rd r-local/R/src/library/stats/man/TukeyHSD.Rd
--- r-devel/R/src/library/stats/man/TukeyHSD.Rd	2005-07-14 23:14:39.380653872 -0300
+++ r-local/R/src/library/stats/man/TukeyHSD.Rd	2005-07-15 03:14:36.520277744 -0300
@@ -55,7 +55,8 @@
   A list with one component for each term requested in \code{which}.
   Each component is a matrix with columns \code{diff} giving the
   difference in the observed means, \code{lwr} giving the lower
-  end point of the interval, and \code{upr} giving the upper end point.
+  end point of the interval, \code{upr} giving the upper end point
+  and \code{p adj} giving the p-value. 
 }
 \references{
   Miller, R. G. (1981)
@@ -69,7 +70,8 @@
   Douglas Bates
 }
 \seealso{
-  \code{\link{aov}}, \code{\link{qtukey}}, \code{\link{model.tables}}
+  \code{\link{aov}}, \code{\link{qtukey}}, \code{\link{model.tables}},
+  \code{\link[multcomp]{simint}}
 }
 \examples{
 summary(fm1 <- aov(breaks ~ wool + tension, data = warpbreaks))
-------------- next part --------------
###
###               Tukey multiple comparisons for R
###
### Copyright 2000-2001  Douglas M. Bates <bates at stat.wisc.edu>
### Modified for base R 2002 B. D. Ripley
###
### This file is made available under the terms of the GNU General
### Public License, version 2, or at your option, any later version,
### incorporated herein by reference.
###
### This program is distributed in the hope that it will be
### useful, but WITHOUT ANY WARRANTY; without even the implied
### warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
### PURPOSE.  See the GNU General Public License for more
### details.
###
### You should have received a copy of the GNU General Public
### License along with this program; if not, write to the Free
### Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,
### MA 02111-1307, USA

TukeyHSD <-
    function(x, which, ordered = FALSE, conf.level = 0.95, ...)
    UseMethod("TukeyHSD")

TukeyHSD.aov <-
    function(x, which = seq(along = tabs), ordered = FALSE,
             conf.level = 0.95, ...)
{
    mm <- model.tables(x, "means")
    if(is.null(mm$n))
        stop("no factors in the fitted model")
    tabs <- mm$tables[-1]
    tabs <- tabs[which]
    ## mm$n need not be complete -- factors only -- so index by names
    nn <- mm$n[names(tabs)]
    nn_na <- is.na(nn)
    if(all(nn_na))
        stop("'which' specified no factors")
    if(any(nn_na)) {
        warning("'which' specified some non-factors which will be dropped")
        tabs <- tabs[!nn_na]
        nn <- nn[!nn_na]
    }
    out <- vector("list", length(tabs))
    names(out) <- names(tabs)
    MSE <- sum(resid(x)^2)/x$df.residual
    for (nm in names(tabs)) {
        tab <- tabs[[nm]]
        means <- as.vector(tab)
        nms <- if(length(d <- dim(tab)) > 1) {
            dn <- dimnames(tab)
            apply(do.call("expand.grid", dn), 1, paste, collapse=":")
        } else names(tab)
        n <- nn[[nm]]
        ## expand n to the correct length if necessary
        if (length(n) < length(means)) n <- rep.int(n, length(means))
        if (as.logical(ordered)) {
            ord <- order(means)
            means <- means[ord]
            n <- n[ord]
            if (!is.null(nms)) nms <- nms[ord]
        }
        center <- outer(means, means, "-")
        keep <- lower.tri(center)
        center <- center[keep]
        width <- qtukey(conf.level, length(means), x$df.residual) *
            sqrt((MSE/2) * outer(1/n, 1/n, "+"))[keep]
        est <- center/(sqrt((MSE/2) * outer(1/n, 1/n, "+"))[keep])
        pvals <- ptukey(abs(est),length(means),x$df.residual,lower.tail=FALSE)
        dnames <- list(NULL, c("diff", "lwr", "upr","p adj"))
        if (!is.null(nms)) dnames[[1]] <- outer(nms, nms, paste, sep = "-")[keep]
        out[[nm]] <- array(c(center, center - width, center + width,pvals),
                           c(length(width), 4), dnames)
    }
    class(out) <- c("multicomp", "TukeyHSD")
    attr(out, "orig.call") <- x$call
    attr(out, "conf.level") <- conf.level
    attr(out, "ordered") <- ordered
    out
}

print.TukeyHSD <- function(x, ...)
{
    cat("  Tukey multiple comparisons of means\n")
    cat("    ", format(100*attr(x, "conf.level"), 2),
        "% family-wise confidence level\n", sep="")
    if (attr(x, "ordered"))
        cat("    factor levels have been ordered\n")
    cat("\nFit: ", deparse(attr(x, "orig.call"), 500), "\n\n", sep="")
    attr(x, "orig.call") <- attr(x, "conf.level") <- attr(x, "ordered") <- NULL
    print.default(unclass(x), ...)
}

plot.TukeyHSD <- function (x, ...)
{
    for (i in seq(along = x)) {
        xi <- x[[i]]
        yvals <- nrow(xi):1
        plot(c(xi[, "lwr"], xi[, "upr"]), rep.int(yvals, 2), type = "n",
             axes = FALSE, xlab = "", ylab = "", ...)
        axis(1, ...)
        axis(2, at = nrow(xi):1, labels = dimnames(xi)[[1]],
             srt = 0, ...)
        abline(h = yvals, lty = 1, lwd = 0, col = "lightgray")
        abline(v = 0, lty = 2, lwd = 0, ...)
        segments(xi[, "lwr"], yvals, xi[, "upr"], yvals, ...)
        segments(as.vector(xi), rep.int(yvals - 0.1, 3), as.vector(xi),
                 rep.int(yvals + 0.1, 3), ...)
        title(main = paste(format(100 * attr(x, "conf.level"),
              2), "% family-wise confidence level\n", sep = ""),
              xlab = paste("Differences in mean levels of", names(x)[i]))
        box()
    }
}

From hb at maths.lth.se  Fri Jul 15 10:01:05 2005
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri, 15 Jul 2005 10:01:05 +0200
Subject: [Rd] R v2.1.0 patched (>2005-05-09) for Windows?
Message-ID: <42D76D41.6050302@maths.lth.se>

I'm trying to troubleshoot a case where R crashes on Windows.  It does 
not occur at all with my R v2.1.0 patched (2005-05-09), but happens on R 
v2.1.1 (patched or non-patched) in many different cases.  The R 
v2.2.0dev (2005-07-15) also got this problem (although it won't crash on 
the below example).  I previously reported this 
(https://stat.ethz.ch/pipermail/r-devel/2005-June/033772.html) and 
Duncan Murdoch kindly offered to look into the problem, but it is 
tricky.  Now I would like to track down in what patched R v2.1.0 the 
problem first occurs and are now looking for reports from newer version, 
but pre-Rv2.1.1.

If you've got R v2.1.0 patched for Windows *after 2005-05-09*, could you 
please try the following in that version of R?

install.packages("R.oo")
library(R.oo)
author <- "dummy"
rdocFile <- system.file("misc", "Exception.R", package="R.oo")
cat("# Empty example code\n", file="Exception.Rex")
Rdoc$compile(rdocFile, destPath=tempdir())
print("successful!")

If you see "successful!", that version is "ok", otherwise R will crash 
(or alternatively incorrectly complain about an invalid regular 
expression; rerun and it will crash the 2nd time).  I would appreciate a 
lot if you report to me what you get and what is your version of R? 
Thanks a lot!

Note that this is most likely *not* due to R.oo (no native code) - my 
wild guess is that it has to do with a memory leak in the code for 
environments or regular expressions.

Thanks

Henrik Bengtsson


From maechler at stat.math.ethz.ch  Fri Jul 15 11:25:53 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 15 Jul 2005 11:25:53 +0200
Subject: [Rd] R v2.1.0 patched (>2005-05-09) for Windows?
In-Reply-To: <42D76D41.6050302@maths.lth.se>
References: <42D76D41.6050302@maths.lth.se>
Message-ID: <17111.33057.961393.975910@stat.math.ethz.ch>

>>>>> "HenrikB" == Henrik Bengtsson <hb at maths.lth.se>
>>>>>     on Fri, 15 Jul 2005 10:01:05 +0200 writes:

    HenrikB> I'm trying to troubleshoot a case where R crashes on Windows.  It does 
    HenrikB> not occur at all with my R v2.1.0 patched (2005-05-09), but happens on R 
    HenrikB> v2.1.1 (patched or non-patched) in many different cases.  The R 
    HenrikB> v2.2.0dev (2005-07-15) also got this problem (although it won't crash on 
    HenrikB> the below example).  I previously reported this 
    HenrikB> (https://stat.ethz.ch/pipermail/r-devel/2005-June/033772.html) and 
    HenrikB> Duncan Murdoch kindly offered to look into the problem, but it is 
    HenrikB> tricky.  Now I would like to track down in what patched R v2.1.0 the 
    HenrikB> problem first occurs and are now looking for reports from newer version, 
    HenrikB> but pre-Rv2.1.1.


    HenrikB> If you've got R v2.1.0 patched for Windows *after 2005-05-09*, could you 
    HenrikB> please try the following in that version of R?

    HenrikB> install.packages("R.oo")
    HenrikB> library(R.oo)
    HenrikB> author <- "dummy"
    HenrikB> rdocFile <- system.file("misc", "Exception.R", package="R.oo")
    HenrikB> cat("# Empty example code\n", file="Exception.Rex")
    HenrikB> Rdoc$compile(rdocFile, destPath=tempdir())
    HenrikB> print("successful!")

    HenrikB> If you see "successful!", that version is "ok", otherwise R will crash 
    HenrikB> (or alternatively incorrectly complain about an invalid regular 
    HenrikB> expression; rerun and it will crash the 2nd time).  I would appreciate a 
    HenrikB> lot if you report to me what you get and what is your version of R? 
    HenrikB> Thanks a lot!


    HenrikB> Note that this is most likely *not* due to R.oo (no
    HenrikB> native code) - my wild guess is that it has to do
    HenrikB> with a memory leak in the code for environments or
    HenrikB> regular expressions.

but why would that only affect Windows ??

I've tried your example code also in Linux, and indeed I do see
quite some memory growth of the R process, particularly if I run

   for(i in 1:40) Rdoc$compile(rdocFile, destPath=tempdir())
   ## which takes a few minutes

my R process size grows considerably (50% - 100% depending on
the measure I use in 'ps').
So I can confirm that your guess about memory leakage {or
something close} seems quite on target.
But please don't ask me to dig further here - not for the time
being, at least.

BTW, I get 10 warnings, both in R 2.1.0 and in 2.1.1 patched
(see below) --- but that's probably something not really
relevant here.

Martin


From ripley at stats.ox.ac.uk  Fri Jul 15 12:24:44 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Jul 2005 11:24:44 +0100 (BST)
Subject: [Rd] Adjusted p-values with TukeyHSD (patch)
In-Reply-To: <20050715064943.GA5748@ime.usp.br>
References: <20050715064943.GA5748@ime.usp.br>
Message-ID: <Pine.LNX.4.61.0507151117350.7335@gannet.stats>

We will incorporate a version of this in R-devel and hence 2.2.0.

A bit more work needs to be done on printing: whereas the existing three 
columns are in comparable units, the p values are not and so get printed 
to silly accuracies (as can be seen in your example).

You also need to explain what "p adj" is.

On Fri, 15 Jul 2005, Fernando Henrique Ferraz P. da Rosa wrote:

>        Dear R-developeRs,
>
>        Attached follows a patch against svn 34959 that adds the
> printing of p-values to the TukeyHSD.aov function in stats package. I
> also updated the corresponding documentation file and added a 'see also'
> reference to the simint function of the multcomp package.
>
>        As it was already brought up in a previous thread [1] in R-help,
> one can obtain the adjusted p-values using the multcomp package and its
> simint function. The problem is that currently the simint function
> scales very badly for a large number of contrasts (> 15). While the output
> of TukeyHSD is almost instantaneous, simint may take more than half an
> hour to process 19 contrasts.
>
>        As a toy example, try:
>
>        y <- rnorm(500)
>        A <- gl(5,100)
>        system.time(h1 <- TukeyHSD((aov(y ~ A))))
>        system.time(h2 <- simint(y ~ A,type="Tukey"))
>
>        Here I got:
>        [1] 0.09 0.01 0.10 0.00 0.00
>        [1] 26.87  0.03 27.10  0.00  0.00
>
>        For a small number of contrasts they're equivalent, for example:
>
>        data(warpbreaks)
>        fm1 <- aov(breaks ~ wool + tension, data = warpbreaks)
>        tHSD <- TukeyHSD(fm1, "tension", ordered = FALSE)
>        print(tHSD)
>        mcHSD <- simint(breaks ~ wool + tension, data = warpbreaks,
>                     whichf="tension", type="Tukey")
>        summary(mcHSD)
>
>        I also attached the complete function (mTukeyHSD.R) to this
> message, in case the patch is not accepted and someone else needs to do
> the same thing. In any case, I think the reference to the multcomp
> package in the TukeyHSD help page should be considered even if the patch
> to the function is not accepted.
>
>       Thank you,
>
> References
> [1] http://tolstoy.newcastle.edu.au/R/help/05/05/4599.html
>
> --
> Fernando Henrique Ferraz P. da Rosa
> http://www.ime.usp.br/~feferraz
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Fri Jul 15 12:44:38 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 15 Jul 2005 06:44:38 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>
	<86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>
Message-ID: <971536df05071503446c974603@mail.gmail.com>

On 7/15/05, Rob J Goedman <goedman at mac.com> wrote:

> I wonder how difficult it would be to translate expressions back and
> forth from R to yacas in either R
> or C++. And maybe strip 'In>' and 'Out>' like parts.

Not sure how generally this works but see my prior post:

   http://tolstoy.newcastle.edu.au/R/help/04/03/1299.html


From bry at xdocs.dk  Fri Jul 15 14:16:46 2005
From: bry at xdocs.dk (bry@xdocs.dk)
Date: Fri, 15 Jul 2005 14:16:46 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
Message-ID: <1121429806.42d7a92eb6678@horde.scannet.dk>

About a year ago there was a discussion about interfacing R with J on the J
forum, the best method seemed to be that outlined in this vector article 
http://www.vector.org.uk/archive/v194/finn194.htm
and use J instead of APL

http://www.jsoftware.com


From murdoch at stats.uwo.ca  Fri Jul 15 14:22:46 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 15 Jul 2005 08:22:46 -0400
Subject: [Rd] R v2.1.0 patched (>2005-05-09) for Windows?
In-Reply-To: <42D76D41.6050302@maths.lth.se>
References: <42D76D41.6050302@maths.lth.se>
Message-ID: <42D7AA96.30406@stats.uwo.ca>

On 7/15/2005 4:01 AM, Henrik Bengtsson wrote:
> I'm trying to troubleshoot a case where R crashes on Windows.  It does 
> not occur at all with my R v2.1.0 patched (2005-05-09), but happens on R 
> v2.1.1 (patched or non-patched) in many different cases.  The R 
> v2.2.0dev (2005-07-15) also got this problem (although it won't crash on 
> the below example).  I previously reported this 
> (https://stat.ethz.ch/pipermail/r-devel/2005-June/033772.html) and 
> Duncan Murdoch kindly offered to look into the problem, but it is 
> tricky.  Now I would like to track down in what patched R v2.1.0 the 
> problem first occurs and are now looking for reports from newer version, 
> but pre-Rv2.1.1.
> 
> If you've got R v2.1.0 patched for Windows *after 2005-05-09*, could you 
> please try the following in that version of R?
> 
> install.packages("R.oo")
> library(R.oo)
> author <- "dummy"
> rdocFile <- system.file("misc", "Exception.R", package="R.oo")
> cat("# Empty example code\n", file="Exception.Rex")
> Rdoc$compile(rdocFile, destPath=tempdir())
> print("successful!")
> 
> If you see "successful!", that version is "ok", otherwise R will crash 
> (or alternatively incorrectly complain about an invalid regular 
> expression; rerun and it will crash the 2nd time).  I would appreciate a 
> lot if you report to me what you get and what is your version of R? 
> Thanks a lot!
> 
> Note that this is most likely *not* due to R.oo (no native code) - my 
> wild guess is that it has to do with a memory leak in the code for 
> environments or regular expressions.

I'll do a series of builds to try this out and determine the date.

Duncan Murdoch


From maechler at stat.math.ethz.ch  Fri Jul 15 15:14:45 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 15 Jul 2005 15:14:45 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <1121429806.42d7a92eb6678@horde.scannet.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
Message-ID: <17111.46789.226240.355911@stat.math.ethz.ch>

>>>>> "bry" == bry  <bry at xdocs.dk>
>>>>>     on Fri, 15 Jul 2005 14:16:46 +0200 writes:

    bry> About a year ago there was a discussion about interfacing R with J on the J
    bry> forum, the best method seemed to be that outlined in this vector article 
    bry> http://www.vector.org.uk/archive/v194/finn194.htm

(which is interesting to see for me,
 if I had known that my posted functions would make it to an APL
 workshop... 
 BTW: Does one need special plugins / fonts to properly view
     the APL symbols ? )


    bry> and use J instead of APL

    bry> http://www.jsoftware.com

well, I've learned about J as the ASCII-variant of APL, and APL
used to be my first `beloved' computer language (in high school!)
-- but does J really provide computer algebra in the sense of
Maxima , Maple or yacas... ??

(and no, please refrain from flame wars about APL vs .. vs ..,
 it's hard to refrain for me, too...)

Martin Maechler, ETH Zurich


From p.dalgaard at biostat.ku.dk  Fri Jul 15 15:25:01 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 15 Jul 2005 15:25:01 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>
	<86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>
Message-ID: <x2br549p76.fsf@turmalin.kubism.ku.dk>

Rob J Goedman <goedman at mac.com> writes:

> A really simple way to play with R & yacas is by using the examples  
> in the subdir
> 'embed' of yacas-1.0.57.
> 
> After building yacas (on Mac OS in my case):
> 
>  > res<-system("~/Projects/yacas-1.0.57/embed/example2", intern=T)
>  > res
> [1] "Cos(x);"
> 
> or
> 
>  > res<-system("~/Projects/yacas-1.0.57/embed/example1 'D(x){{Sin 
> (x),Cos(x)}, {Sin(2*x),-Cos(x)}}'", intern=T)
>  > res
> [1] "Input> D(x){{Sin(x),Cos(x)}, {Sin(2*x),-Cos(x)}}"
> [2] "Output> {{Cos(x),-Sin(x)},{2*Cos(2*x),Sin(x)}};"
> 
> or
> 
>  > system("yacas -pc --execute '[Echo(D(x)Sin(x));Exit();]'")
> Cos(x)
> 
> or
> 
>  > system("echo 'Example()' | yacas_client")
> In> Example()
> Current example : Integrate(x,a,b)Sin(x);
> 
> Integrate a function.
> 
> Out> Cos(a)-Cos(b)
> In>
>  > system("echo 'Type(%)' | yacas_client")
> In> Type(%)
> Out> "-"
> In>
> 
> This last example does show the yacas server stays alive between  
> calls from R. yacas_client is a script.
> Maybe that approach also works for maxima?
> 
> I wonder how difficult it would be to translate expressions back and  
> forth from R to yacas in either R
> or C++. And maybe strip 'In>' and 'Out>' like parts.

You could also just do what those examples do and embed the whole
enchillada in R. The slightly bad news is that the yacas_eval
interface is text-based, which means that to handle an R expression
via yacas you're going through a deparse-parse-operate-deparse-parse
sequence. It would be nicer if you could just convert parse trees
between the two languages. The good news is that there's a Lisp route
(see example3), which should make the parser/deparser coding somewhat
easier.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From r.hankin at noc.soton.ac.uk  Fri Jul 15 15:30:46 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Fri, 15 Jul 2005 14:30:46 +0100
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <17111.46789.226240.355911@stat.math.ethz.ch>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
Message-ID: <34A3AAD3-0A90-4EB7-A9E3-7B8473C925AC@soc.soton.ac.uk>

Just a note to point out that Martin's R implementation of APL's  
"take" function
was pretty neat.   Could we preserve it for posterity somewhere in the R
distribution?  Failing that, it would complement subsums() of the  
magic package
very nicely.


<mustn't flame APL....[holds head].....no flaming allowed........>


best wishes

Robin

On 15 Jul 2005, at 14:14, Martin Maechler wrote:

>>>>>> "bry" == bry  <bry at xdocs.dk>
>>>>>>     on Fri, 15 Jul 2005 14:16:46 +0200 writes:
>>>>>>
>
>     bry> About a year ago there was a discussion about interfacing  
> R with J on the J
>     bry> forum, the best method seemed to be that outlined in this  
> vector article
>     bry> http://www.vector.org.uk/archive/v194/finn194.htm
>
> (which is interesting to see for me,
>  if I had known that my posted functions would make it to an APL
>  workshop...
>  BTW: Does one need special plugins / fonts to properly view
>      the APL symbols ? )
>
>
>     bry> and use J instead of APL
>
>     bry> http://www.jsoftware.com
>
> well, I've learned about J as the ASCII-variant of APL, and APL
> used to be my first `beloved' computer language (in high school!)
> -- but does J really provide computer algebra in the sense of
> Maxima , Maple or yacas... ??
>
> (and no, please refrain from flame wars about APL vs .. vs ..,
>  it's hard to refrain for me, too...)
>
> Martin Maechler, ETH Zurich
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From pburns at pburns.seanet.com  Fri Jul 15 15:58:14 2005
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Fri, 15 Jul 2005 14:58:14 +0100
Subject: [Rd] help.search of precedence is empty
Message-ID: <42D7C0F6.7090303@pburns.seanet.com>

Doing

help.search('precedence')

comes up empty.  A fix would be to have the title:

Operator Syntax and Precedence

instead of

Operator Syntax

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")


From maechler at stat.math.ethz.ch  Fri Jul 15 16:58:38 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 15 Jul 2005 16:58:38 +0200
Subject: [Rd] help.search of precedence is empty
In-Reply-To: <42D7C0F6.7090303@pburns.seanet.com>
References: <42D7C0F6.7090303@pburns.seanet.com>
Message-ID: <17111.53022.275866.150085@stat.math.ethz.ch>

>>>>> "PatBurns" == Patrick Burns <pburns at pburns.seanet.com>
>>>>>     on Fri, 15 Jul 2005 14:58:14 +0100 writes:

    PatBurns> Doing
    PatBurns> help.search('precedence')

    PatBurns> comes up empty.  A fix would be to have the title:

    PatBurns> Operator Syntax and Precedence

    PatBurns> instead of

    PatBurns> Operator Syntax

very good idea.
Where as in general one should rather use a 
\concept{...}
entry in order to make the page searchable for new `concepts',
in the present case, adding the "and Precedence" seems more
natural and I've just done it to R-devel.

Martin


From ripley at stats.ox.ac.uk  Fri Jul 15 17:10:32 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Jul 2005 16:10:32 +0100 (BST)
Subject: [Rd] [R] Passing character strings from C code to R
In-Reply-To: <CA0BCF3BED56294AB91E3AD74B849FD57F40DA@us-arlington-0668.mail.saic.com>
References: <CA0BCF3BED56294AB91E3AD74B849FD57F40DA@us-arlington-0668.mail.saic.com>
Message-ID: <Pine.LNX.4.61.0507151545480.18749@gannet.stats>

Reading the posting guide would have shown you that R-help was quite 
inappropriate, so I have moved this to R-devel.

allocString does not allocate a character vector, which is what you 
want to set as an attribute (not a 'string', whatever that is).  (It 
creates a CHARSXP, a type that should not be user-visible directly and for 
which STRING_ELT is inappropriate.)

You want something like (PROTECTS omitted):

Str = allocVector(STRSXP, 1);
SET_STRING_ELT(Str, 0, mkChar(comment));

There are many similar examples in the R sources for you to browse.  There 
is even a shortcut that manages the PROTECTS,

Str = mkString(comment);

(That allocString and mkString return different types indicate why I wrote 
`whatever that is': the term is too loose to be useful.)

So you could just have

if(comment && strlen(comment)
    setAttrib(Ret, install("com"), mkString(comment));
if(comment) Free(comment);


On Fri, 15 Jul 2005, Tuszynski, Jaroslaw W. wrote:

> Hi,
>
> I have a C code which produces array of integers and potentially a string,
> and I have problems passing the string out. Here is the relevant part of the
> code:
>
> 1   PROTECT(Ret = allocVector(INTSXP, n));
> 2   ret     = (int*) INTEGER(Ret);  /* get pointer to R's Ret */
> 3   for(i=0; i<n; i++) ret[i] = data[i];
> 4   Free(data);
> 5   i=1;
> 6   if (comment) { // comment was found
> 7     n = strlen(comment);
> 8     if(n>0) {    // and it actually have some length
> 9        Rprintf(" '%s' %i\n", comment, n);
> 10       PROTECT(Str = allocString(n+1));
> 11       str = CHAR(STRING_ELT(Str, 0));
> 12       strcpy(str, comment);
> 13       Rprintf(" '%s' %i\n", str, n);
> 14       setAttrib(Ret, install("comm"), Str);
> 15       i=2;
> 16     }
> 17     Free(comment);
> 18   }
> 20   UNPROTECT(i);
>
> Print statement in line 9 gives right results, but program crashes before
> print statement in line 13.
> Any ideas to what am I doing wrong?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sego at vt.edu  Fri Jul 15 18:12:04 2005
From: sego at vt.edu (sego@vt.edu)
Date: Fri, 15 Jul 2005 18:12:04 +0200 (CEST)
Subject: [Rd] documentation for filter() (PR#8010)
Message-ID: <20050715161204.116CDA208@slim.kubism.ku.dk>

Full_Name: Landon Sego
Version: 2.1.1
OS: Windows
Submission from: (NULL) (128.173.70.25)


In the Details section of the documentation for filter(), it says:

 The convolution filter is

             'y[i] = f[1]*x[i+o] + ... + f[p]*x[i+o-p-1]'

Correct me if I'm wrong, but I think it should be:

             'y[i] = f[1]*x[i+o] + ... + f[p]*x[i+o-p+1]'

For example:  consider a 2 sided convolution with a filter that has length p=3
and the filter is applied to the i=6th observation.  In this case, o=1. Then we
would have

             'y[6] = f[1]*x[6+1] + f[2]*x[6+1-1] + f[3]*x[6+1-3+1]'
                   = f[1]*x[7] + f[2]*x[6] + f[3]*x[5]'


From maechler at stat.math.ethz.ch  Fri Jul 15 19:19:43 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 15 Jul 2005 19:19:43 +0200
Subject: [Rd] S4 generics "missing"
In-Reply-To: <20050714232650.632EFA2CB@slim.kubism.ku.dk>
References: <20050714232650.632EFA2CB@slim.kubism.ku.dk>
Message-ID: <17111.61487.579787.821989@stat.math.ethz.ch>

Thank you, Lars, for persisting on this topic of
missing S4 generics!
[I'm diverting this away from the original bug report; 
 since this is really about future features rather than R bugs.]

Unfortunately it's not as easy as you might think. 
 
o  One reason is the fact that currently it is still necessary 
   for bootstrapping reasons that R "can run" with only the 'base'
   package loaded, i.e. "methods" not available.  This makes
   it sometimes hard to S4-ize base functions. 

o  Then there have been performance issues hindering the
   S4-ification of ``everything''.  
   Note that e.g. S4 classes , functions methods, etc are not really
   proper C-level SEXPs which would speed up (and lead to clean
   up) of the "methods" code base.

o  One other problem is with function like  cbind() which have
   a signature starting with '...' :  The need to be changed
   before you can define methods for them.
   
   We've recently started to discuss this issue within R core,
   with constructive proposals by John Chambers, and I have been
   strongly considering indeed to try the case of
   cbind() and rbind() in particular.

I also hope that some of these issues will be addressed during
this summer and will eventually lead to much improved S4
facilities in R.

Martin Maechler, ETH Zurich


>>>>> "lars" == lars  <lars at predict.com>
>>>>>     on Fri, 15 Jul 2005 01:26:50 +0200 (CEST) writes:

    lars> Hi,
    lars> I ran into another internal function that is missing S4 dispatch. It is 
    lars> the binary operator ":". Looking at the code, I see that it is actually 
    lars> a common problem. Other candidates are operators like "~", "&&", "||" 
    lars> and functions like: "length<-", "row", "col", "unlist", "cbind", etc. It 
    lars> would for instance be nice to be able to write a matrix class that has 
    lars> the same operators and functions as the built-in class. In general, I 
    lars> think that all the operators and functions associates with built-in 
    lars> types like vectors, lists, matrices and data frames should have S4 dispatch.

    lars> Thanks,
    lars> Lars


    lars> lars wrote:

    >> Hi,
    >> 
    >> OK, if you try to explicitly make them generic, you are told that they 
    >> are implicitly already generic:
    >> 
    >> > setGeneric("is.finite", function(from, ...) 
    >> standardGeneric("is.finite"))
    >> Error in setGeneric("is.finite", function(from, ...) 
    >> standardGeneric("is.finite")) :
    >> "is.finite" is a primitive function;  methods can be defined, but 
    >> the generic function is implicit, and can't be changed.
    >> 
    >> If you query about its genericness before you define you own generic, 
    >> you get:
    >> 
    >> > isGeneric("is.finite")
    >> [1] FALSE
    >> 
    >> But after you define you own generic, you get:
    >> 
    >> > setMethod("is.finite", signature(x="TS"),
    >> +           function(x) {
    >> +              Data(x) = callNextMethod()
    >> +              x
    >> +           })
    >> [1] "is.finite"
    >> 
    >> > isGeneric("is.finite")
    >> [1] TRUE
    >> 
    >> This all makes some sense, but I am not familiar enough with he 
    >> internals to explain exactly why it is done this way. I think you will 
    >> fine that 'is.nan' behave exactly the same way.
    >> 
    >> Thanks,
    >> Lars
    >> 
    >> 
    >> Prof Brian Ripley wrote:
    >> 
    >>> These functions are not generic according to the help page.
    >>> The same page says explicitly that is.nan is generic.
    >>> 
    >>> Where did you get the (false) idea that they were generic?
    >>> 
    >>> On Thu, 16 Jun 2005 lars at predict.com wrote:
    >>> 
    >>>> Full_Name: Lars Hansen
    >>>> Version: 2.1.0
    >>>> OS: SunOS 5.8
    >>>> Submission from: (NULL) (207.66.36.189)
    >>>> 
    >>>> 
    >>>> Hi,
    >>>> 
    >>>> S4 method displacth does not work for the two generic functions 
    >>>> 'is.finite' and 'is.infinite'. It turns out that the C functions 
    >>>> 'do_isfinite' and 'do_isinfinite' in src/main/coerce.c are missing a 
    >>>> call to 'DispatchOrEval' (see do_isnan). Added in the call fixed the 
    >>>> problem. My functions no look like this:
    >>>> 
    >>>> Form coerce.c:
    >>>> 
    >>>> SEXP do_isfinite(SEXP call, SEXP op, SEXP args, SEXP rho)
    >>>> {
    >>>> SEXP ans, x, names, dims;
    >>>> int i, n;
    >>>> 
    >>>> if (DispatchOrEval(call, op, "is.finite", args, rho, &ans, 1, 1))
    >>>> return(ans);
    >>>> 
    >>>> checkArity(op, args);
    >>>> ...
    >>>> 
    >>>> SEXP do_isinfinite(SEXP call, SEXP op, SEXP args, SEXP rho)
    >>>> {
    >>>> SEXP ans, x, names, dims;
    >>>> double xr, xi;
    >>>> int i, n;
    >>>> 
    >>>> if (DispatchOrEval(call, op, "is.infinite", args, rho, &ans, 1, 1))
    >>>> return(ans);
    >>>> 
    >>>> checkArity(op, args);
    >>>> ...


From JAROSLAW.W.TUSZYNSKI at saic.com  Fri Jul 15 21:41:46 2005
From: JAROSLAW.W.TUSZYNSKI at saic.com (Tuszynski, Jaroslaw W.)
Date: Fri, 15 Jul 2005 15:41:46 -0400
Subject: [Rd] [R] Passing character strings from C code to R
Message-ID: <CA0BCF3BED56294AB91E3AD74B849FD57F40E1@us-arlington-0668.mail.saic.com>

Thanks,

That fixed the problem.

Jarek 

-----Original Message-----
From: ripley at stats.ox.ac.uk [mailto:ripley at stats.ox.ac.uk] 
Sent: Friday, July 15, 2005 11:11 AM
To: Tuszynski, Jaroslaw W.
Cc: r-devel at stat.math.ethz.ch
Subject: Re: [R] Passing character strings from C code to R

Reading the posting guide would have shown you that R-help was quite
inappropriate, so I have moved this to R-devel.

allocString does not allocate a character vector, which is what you want to
set as an attribute (not a 'string', whatever that is).  (It creates a
CHARSXP, a type that should not be user-visible directly and for which
STRING_ELT is inappropriate.)

You want something like (PROTECTS omitted):

Str = allocVector(STRSXP, 1);
SET_STRING_ELT(Str, 0, mkChar(comment));

There are many similar examples in the R sources for you to browse.  There
is even a shortcut that manages the PROTECTS,

Str = mkString(comment);

(That allocString and mkString return different types indicate why I wrote
`whatever that is': the term is too loose to be useful.)

So you could just have

if(comment && strlen(comment)
    setAttrib(Ret, install("com"), mkString(comment));
if(comment) Free(comment);


On Fri, 15 Jul 2005, Tuszynski, Jaroslaw W. wrote:

> Hi,
>
> I have a C code which produces array of integers and potentially a 
> string, and I have problems passing the string out. Here is the 
> relevant part of the
> code:
>
> 1   PROTECT(Ret = allocVector(INTSXP, n));
> 2   ret     = (int*) INTEGER(Ret);  /* get pointer to R's Ret */
> 3   for(i=0; i<n; i++) ret[i] = data[i];
> 4   Free(data);
> 5   i=1;
> 6   if (comment) { // comment was found
> 7     n = strlen(comment);
> 8     if(n>0) {    // and it actually have some length
> 9        Rprintf(" '%s' %i\n", comment, n);
> 10       PROTECT(Str = allocString(n+1));
> 11       str = CHAR(STRING_ELT(Str, 0));
> 12       strcpy(str, comment);
> 13       Rprintf(" '%s' %i\n", str, n);
> 14       setAttrib(Ret, install("comm"), Str);
> 15       i=2;
> 16     }
> 17     Free(comment);
> 18   }
> 20   UNPROTECT(i);
>
> Print statement in line 9 gives right results, but program crashes 
> before print statement in line 13.
> Any ideas to what am I doing wrong?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From blomsp at ozemail.com.au  Sat Jul 16 05:12:03 2005
From: blomsp at ozemail.com.au (simon blomberg)
Date: Sat, 16 Jul 2005 13:12:03 +1000
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <17111.46789.226240.355911@stat.math.ethz.ch>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
Message-ID: <a06110400befe1c42c158@[203.61.56.151]>

>  >>>>> "bry" == bry  <bry at xdocs.dk>
>>>>>>      on Fri, 15 Jul 2005 14:16:46 +0200 writes:
>
>     bry> About a year ago there was a discussion about interfacing R 
>with J on the J
>     bry> forum, the best method seemed to be that outlined in this 
>vector article
>     bry> http://www.vector.org.uk/archive/v194/finn194.htm
>
>(which is interesting to see for me,
>  if I had known that my posted functions would make it to an APL
>  workshop...
>  BTW: Does one need special plugins / fonts to properly view
>      the APL symbols ? )
>
>
>     bry> and use J instead of APL
>
>     bry> http://www.jsoftware.com
>
>well, I've learned about J as the ASCII-variant of APL, and APL
>used to be my first `beloved' computer language (in high school!)
>-- but does J really provide computer algebra in the sense of
>Maxima , Maple or yacas... ??

I wonder if at this point it would be useful to think about how a 
symbolic algebra system might be used by R users, and whether that 
would affect the choice of system. For example, Maxima and yacas seem 
to be mostly concerned with "getting the job done", which might be 
all that the data analyst or occasional user needs. However, 
mathematical statisticians might be more concerned with developing 
new mathematics. For example, commutative algebra has been found to 
be very useful in the theory of experimental design (e.g. Pistone, 
Riccomagno, Wynn (2000) Algebraic Statistics: Computational 
Commutative Algebra in Statistics. Chapman & Hall). Now, Maxima can 
already do the necessary calculations (ie Groebner bases of 
polynomials), but as far as I know, yacas cannot. But who knows where 
the next breakthrough will come from? In that case Axiom might be 
more useful and appropriate, as it is largely used by research 
mathematicians. We would then need a mechanism for the development of 
new data structures in R that could potentially match Axiom's rich 
and extensible type system. I guess some mechanism that relies on S4 
classes would be necessary. Of course, there is nothing to stop us 
developing packages for more than one system ("We are R. We will 
assimilate you!"). I have no idea how to do any of this: I'm just 
floating ideas here. :-)

Cheers,

Simon.

>
>(and no, please refrain from flame wars about APL vs .. vs ..,
>  it's hard to refrain for me, too...)
>
>Martin Maechler, ETH Zurich
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
Centre for Resource and Environmental Studies
The Australian National University
Canberra ACT 0200
Australia

T: +61 2 6125 7800
F: +61 2 6125 0757

CRICOS Provider # 00120C


From ggrothendieck at gmail.com  Sat Jul 16 12:37:37 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 16 Jul 2005 06:37:37 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df050716033614fd6e77@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
Message-ID: <971536df05071603377ba3304@mail.gmail.com>

On 7/15/05, simon blomberg <blomsp at ozemail.com.au> wrote:
> > >  >>>>> "bry" == bry  <bry at xdocs.dk>
> > >>>>>>      on Fri, 15 Jul 2005 14:16:46 +0200 writes:
> > >
> > >     bry> About a year ago there was a discussion about interfacing R
> > >with J on the J
> > >     bry> forum, the best method seemed to be that outlined in this
> > >vector article
> > >     bry> http://www.vector.org.uk/archive/v194/finn194.htm
> > >
> > >(which is interesting to see for me,
> > >  if I had known that my posted functions would make it to an APL
> > >  workshop...
> > >  BTW: Does one need special plugins / fonts to properly view
> > >      the APL symbols ? )
> > >
> > >
> > >     bry> and use J instead of APL
> > >
> > >     bry> http://www.jsoftware.com
> > >
> > >well, I've learned about J as the ASCII-variant of APL, and APL
> > >used to be my first `beloved' computer language (in high school!)
> > >-- but does J really provide computer algebra in the sense of
> > >Maxima , Maple or yacas... ??
> >
> > I wonder if at this point it would be useful to think about how a
> > symbolic algebra system might be used by R users, and whether that
> > would affect the choice of system. For example, Maxima and yacas seem
> > to be mostly concerned with "getting the job done", which might be
> > all that the data analyst or occasional user needs. However,
> > mathematical statisticians might be more concerned with developing
> > new mathematics. For example, commutative algebra has been found to
> > be very useful in the theory of experimental design (e.g. Pistone,
> > Riccomagno, Wynn (2000) Algebraic Statistics: Computational
> > Commutative Algebra in Statistics. Chapman & Hall). Now, Maxima can
> > already do the necessary calculations (ie Groebner bases of
> > polynomials), but as far as I know, yacas cannot. But who knows where
> 

yacas does have the Groebner function, e.g.
 
In> Groebner({x*(y-1),y*(x-1)})
Out> {x*y-x,x*y-y,y-x,y^2-y};


From bry at xdocs.dk  Sat Jul 16 21:32:47 2005
From: bry at xdocs.dk (bry@xdocs.dk)
Date: Sat, 16 Jul 2005 21:32:47 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <a06110400befe1c42c158@[203.61.56.151]>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@[203.61.56.151]>
Message-ID: <1121542367.42d960df9c0a1@horde.scannet.dk>


> >
> >well, I've learned about J as the ASCII-variant of APL, and APL
> >used to be my first `beloved' computer language (in high school!)
> >-- but does J really provide computer algebra in the sense of
> >Maxima , Maple or yacas... ??
No, but I was seeing this thread as more interest in expanding R's mathematical
capabilities in areas where it is weak, I think J is a good match.


From blomsp at ozemail.com.au  Sun Jul 17 08:11:52 2005
From: blomsp at ozemail.com.au (simon blomberg)
Date: Sun, 17 Jul 2005 16:11:52 +1000
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df050716033614fd6e77@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>	
	<1121429806.42d7a92eb6678@horde.scannet.dk>	
	<17111.46789.226240.355911@stat.math.ethz.ch>	
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
Message-ID: <a06110401beffa70234a8@[10.1.1.4]>

>
>
>yacas does have the Groebner function, e.g.
>
>In> Groebner({x*(y-1),y*(x-1)})
>Out> {x*y-x,x*y-y,y-x,y^2-y};

I stand corrected.

Simon.

-- 
Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
Centre for Resource and Environmental Studies
The Australian National University
Canberra ACT 0200
Australia

T: +61 2 6125 7800
F: +61 2 6125 0757

CRICOS Provider # 00120C


From apinkus at xs4all.nl  Sun Jul 17 12:06:37 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 12:06:37 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <a06110401beffa70234a8@[10.1.1.4]>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>	
	<1121429806.42d7a92eb6678@horde.scannet.dk>	
	<17111.46789.226240.355911@stat.math.ethz.ch>	
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
Message-ID: <670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>


Hi,
I am the maintainer of Yacas. I decided to join this mailing list  
after having heard that
the option of linking R to Yacas was being discussed. Please don't  
hesitate to ask
if you have questions, I will try to find the time to help.
Ayal



On Jul 17, 2005, at 8:11 AM, simon blomberg wrote:

>>
>>
>> yacas does have the Groebner function, e.g.
>>
>> In> Groebner({x*(y-1),y*(x-1)})
>> Out> {x*y-x,x*y-y,y-x,y^2-y};
>>
>
> I stand corrected.
>
> Simon.
>
> -- 
> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> Centre for Resource and Environmental Studies
> The Australian National University
> Canberra ACT 0200
> Australia
>
> T: +61 2 6125 7800
> F: +61 2 6125 0757
>
> CRICOS Provider # 00120C
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From p.dalgaard at biostat.ku.dk  Sun Jul 17 14:55:38 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 17 Jul 2005 14:55:38 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
Message-ID: <x2zmslk2wl.fsf@turmalin.kubism.ku.dk>

Ayal Pinkus <apinkus at xs4all.nl> writes:

> Hi,
> I am the maintainer of Yacas. I decided to join this mailing list  
> after having heard that
> the option of linking R to Yacas was being discussed. Please don't  
> hesitate to ask
> if you have questions, I will try to find the time to help.
> Ayal


Interesting... Nice initiative!

The thing that I wonder is whether it would be possible to embed Yacas
at a lower level than via the parser. E.g. the Tcl embedding has
Tcl_EvalObjEx() and friends, which operate on preparsed Tcl objects.
Using this instead of Tcl_Eval() gives some efficiency gain, but more
importantly, it avoids the "quoting hell" associated with the
construction of the relevant command strings.

Since both R and Yacas are "Lisp under the hood" languages (and Tcl
too for that matter), it is a fairly good guess that their parse trees
are similar, and that it would be a fairly simple task to translate
back and forth between them. Well, between suitable subsets, at least.
R's parse trees can in principle contain arbitrary R objects, but in
this context, we might only need constants, names, operators, and
function calls.

It is probably not quite as easy as it sounds (is it ever?) but it
could be worth it anyway. The main thing that it would require is an
extended Yacas API which allows you to create Yacas objects from C
code.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From apinkus at xs4all.nl  Sun Jul 17 17:29:33 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 17:29:33 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
Message-ID: <0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050717/8071e037/attachment.pl

From apinkus at xs4all.nl  Sun Jul 17 17:42:14 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 17:42:14 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
Message-ID: <43DBA23E-FACE-4EC6-A983-2ED0B3B157AF@xs4all.nl>


I forgot one API call, getting a potential error caused through  
evaluating the object.
And I forgot one argument needed for evaluating, the pointer to the  
environment.
Ayal


On Jul 17, 2005, at 5:29 PM, Ayal Pinkus wrote:

>
> Hi,
>
>
>>
>> The thing that I wonder is whether it would be possible to embed  
>> Yacas
>> at a lower level than via the parser. E.g. the Tcl embedding has
>> Tcl_EvalObjEx() and friends, which operate on preparsed Tcl objects.
>> Using this instead of Tcl_Eval() gives some efficiency gain, but more
>> importantly, it avoids the "quoting hell" associated with the
>> construction of the relevant command strings.
>>
>>
>
> Interesting. You are not the first person asking this, actually.
>
> I chose for the C API as it is nice and clean, no name mangling issues
> while switching to a new gcc compiler, and it allows people to use it
> from C also. Back then, I thought all people would want to do is  
> send a
> string and receive one back.
>
>
>
>> Since both R and Yacas are "Lisp under the hood" languages (and Tcl
>> too for that matter), it is a fairly good guess that their parse  
>> trees
>> are similar, and that it would be a fairly simple task to translate
>> back and forth between them. Well, between suitable subsets, at  
>> least.
>> R's parse trees can in principle contain arbitrary R objects, but in
>> this context, we might only need constants, names, operators, and
>> function calls.
>>
>>
>
>
> Very true. The code to chain up the linked list itself would not be  
> very
> little code, but we could iron out an initial API of course. It could
> even
> be through a C interface that returns void*.
>
> Yacas can Already read a Lisp-style representation, to wit:
>
>      In> FromString("(foo(List a b))")LispRead()
>      Out> foo({a,b})
>
> but that would not help you much as you mention you'd like to avoid
> quoting hell.
>
>  From a C perspective, an API could look like this:
>
>      // Creating objects
>      void* yacas_create_atom(char* atom);
>      void* yacas_create_string(char* string);
>      void* yacas_create_number_from_string(char* string);
>      void* yacas_create_number_from_long(long number);
>      void* yacas_create_number_from_double(double number);
>      void* yacas_create_sublist(void* object);
>
>      // Linking linked lists
>      void yacas_link_objects(void* head, void* tail);
>
>      // executing an object
>      void* yacas_execute(void* object);
>
>      // pulling apart an object again
>      void* yacas_get_sublist(void* object);
>      char* yacas_get_atom(void* object);
>      char* yacas_get_string(void* object);
>      int  yacas_object_is_string(void* object);
>      int  yacas_object_is_atom(void* object);
>      int  yacas_object_is_number(void* object);
>      int  yacas_object_is_integer(void* object);
>      long yacas_get_long(void* object);
>      long yacas_get_double(void* object);
>
> Note in the above list you would only really need get_sublist and
> get_atom,
> but using the others might be more efficient.
>
>
>
>> It is probably not quite as easy as it sounds (is it ever?) but it
>> could be worth it anyway. The main thing that it would require is an
>> extended Yacas API which allows you to create Yacas objects from C
>> code.
>>
>>
>
>
> Apart from the above API, which I could create and would not take too
> long,
> there is of course the task of converting, in the sense that the
> semantics
> of R trees will be different from the semantics of the Yacas tree.
>
> The other alternative is OpenMath, but that is just too verbose. I
> don't like
> xml-like schemes myself, as it is a very inefficient way of doing  
> this.
>
> Do you have cvs, and the possibility to compile under Windows?
> Ayal
>
>
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From Soren.Hojsgaard at agrsci.dk  Sun Jul 17 19:13:33 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Sun, 17 Jul 2005 19:13:33 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A36@DJFPOST01.djf.agrsci.dk>

Sounds really nice... Due to a not-so-particularly-nice summer weather in Denmark, I have started writing a little package called 'yacasR' which communicates with Yacas through a socketConnection (on windows, I don't know how general this communication method is??). I'll try to 'polish' the package a bit more within the next few days and afterwards post it somewhere (not on CRAN, though). If the yacasR idea can fly, I hope more people will contribute to the package...
 
However, it would be really good if some of you who know more about the technical stuff, could find a way of making Yacas communicate with R more smoothly... 
 
Best regards
S?ren

________________________________

Fra: r-devel-bounces at r-project.org p? vegne af Ayal Pinkus
Sendt: s? 17-07-2005 12:06
Til: R-devel at r-project.org
Emne: Re: [Rd] Computer algebra in R - would that be an idea??




Hi,
I am the maintainer of Yacas. I decided to join this mailing list 
after having heard that
the option of linking R to Yacas was being discussed. Please don't 
hesitate to ask
if you have questions, I will try to find the time to help.
Ayal



On Jul 17, 2005, at 8:11 AM, simon blomberg wrote:

>>
>>
>> yacas does have the Groebner function, e.g.
>>
>> In> Groebner({x*(y-1),y*(x-1)})
>> Out> {x*y-x,x*y-y,y-x,y^2-y};
>>
>
> I stand corrected.
>
> Simon.
>
> --
> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> Centre for Resource and Environmental Studies
> The Australian National University
> Canberra ACT 0200
> Australia
>
> T: +61 2 6125 7800
> F: +61 2 6125 0757
>
> CRICOS Provider # 00120C
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From edd at debian.org  Sun Jul 17 20:24:30 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 17 Jul 2005 13:24:30 -0500
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
Message-ID: <17114.41566.753777.845692@basebud.nulle.part>


On 17 July 2005 at 17:29, Ayal Pinkus wrote:
| Do you have cvs, and the possibility to compile under Windows?

Yes on both counts, though CVS got replaced by SVN. 

R builds fine under Windows (though you need to pay attention to the details
which are in the (binary) distribution in the pdf files, in particular: `R
Installation and Administration Manual', a html copy is also on the website;
and the README* and INSTALL files in src/gnuwin32/ ).  These details look
tedious at first, and you may have to install a few things, but it keeps the
sources closely tied between Windoze and the Unixish operating systems on
which many of us prefer to develop.

Allow me to add that this sounds very exciting. On Quantian, the only
'bridge' between Yacas, Maxima, ... and R was in the TeXmacs editor. Getting
the programs to talk directly is a very promising idea. I look forward to
toying with this one day!

Regards, Dirk

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From apinkus at xs4all.nl  Sun Jul 17 20:46:11 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 20:46:11 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <20050717175327.GM26238@wald.ucdavis.edu>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<20050717175327.GM26238@wald.ucdavis.edu>
Message-ID: <584539A3-9004-474F-BC95-46AB47A542B2@xs4all.nl>


Hi,

>
> This looks promising.  Thanks for starting it off
> and being so enthusiastic.
>

It does sound like a fun thing, and I think this will be very little  
work for me.

> Taking a look at the APIs for Perl, Python, R, Tcl, Java, etc.
> would also be good. One thing that all of these provide is
> a specific typedef for an object.  I imagine Yacas does also,
> so rather than returning void *, it would be nicer to
> return that type.
>

Good point to have type safety. But Yacas uses classes. A number will
actually be a different object from a string, but derived from the same
base class. The void* would simply mean a pointer to something
derived from the base class. We can perhaps typedef a YacasObject, to
be a pointer to void. Would that already provide enough safety?

The other option indeed is to allow full access to the internals. For  
this
I would probably need to expose the entire set of header files, not just
the file cyacas.h. To me it feels more elegant to expose just what one
wants to expose, hence the clear API definition. We can export certain
methods of certain classes, so you could actually just call  
LispAtom::New
or LispSubList::New, literally the classes that are already available.

The disadvantage with exposing the full internals is that I would  
basically
be promising that the internals will never change in the future. The API
abstracts away the internals. There are discussions currently going  
on on
changing the representation of the trees internally, to experiment with
different algorithms.

It is a matter of design. I am ok with exposing all the internals,  
but I would
rather not promise that I will not overhaul the internals.

Ayal


From apinkus at xs4all.nl  Sun Jul 17 20:55:55 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 20:55:55 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <17114.41566.753777.845692@basebud.nulle.part>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
Message-ID: <21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>



Hi,

>
> R builds fine under Windows (though you need to pay attention to  
> the details
> which are in the (binary) distribution in the pdf files, in  
> particular: `R
> Installation and Administration Manual', a html copy is also on the  
> website;
> and the README* and INSTALL files in src/gnuwin32/ ).  These  
> details look
> tedious at first, and you may have to install a few things, but it  
> keeps the
> sources closely tied between Windoze and the Unixish operating  
> systems on
> which many of us prefer to develop.
>

Ok. Unfortunately I work on a Mac OS X at home (I have access to  
Windows, MS DevStudio
at work but want to keep work and hobby separate). I do work with  
Xcode (have to
delve deeper in to Cocoa still though). Can integration also be done  
on Mac OS X?
If I understood correctly you go the COM route for integration on  
Windows?

CrystalSpace is a 3d engine that has a COM simulation layer for Unix- 
style platforms
I think (last time I looked was a few years back). It would  
essentially be a thin layer
to implementations of abstract classes.

I did download R for Mac OS X. It is quite a nice package! I wish I  
had looked at it earlier.
You did a very good job on the user interface.


> Allow me to add that this sounds very exciting.

I agree!

I am working on a Java port at the moment. I will try to make some  
time later this evening
or perhaps somewhere this week.

Ayal


From edd at debian.org  Sun Jul 17 21:05:52 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 17 Jul 2005 14:05:52 -0500
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
Message-ID: <17114.44048.89134.301967@basebud.nulle.part>


On 17 July 2005 at 20:55, Ayal Pinkus wrote:
| > R builds fine under Windows (though you need to pay attention to  
[...]
| Ok. Unfortunately I work on a Mac OS X at home (I have access to  
| Windows, MS DevStudio

Why didn't you say so earlier? :)

I don't do Mac OS X, so can't help. There is a special interest group
r-sig-mac with its own mailing list -- ask there. But several R Core members
develop on Mac OS X as well so it seem fair to infer that it is possible.

| If I understood correctly you go the COM route for integration on  
| Windows?

I doubt that.

Dirk

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From ggrothendieck at gmail.com  Sun Jul 17 21:15:42 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 17 Jul 2005 15:15:42 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@10.1.1.4>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
Message-ID: <971536df0507171215eb85e9e@mail.gmail.com>

On 7/17/05, Ayal Pinkus <apinkus at xs4all.nl> wrote:
> 
> 
> Hi,
> 
> >
> > R builds fine under Windows (though you need to pay attention to
> > the details
> > which are in the (binary) distribution in the pdf files, in
> > particular: `R
> > Installation and Administration Manual', a html copy is also on the
> > website;
> > and the README* and INSTALL files in src/gnuwin32/ ).  These
> > details look
> > tedious at first, and you may have to install a few things, but it
> > keeps the
> > sources closely tied between Windoze and the Unixish operating
> > systems on
> > which many of us prefer to develop.
> >
> 
> Ok. Unfortunately I work on a Mac OS X at home (I have access to
> Windows, MS DevStudio
> at work but want to keep work and hobby separate). I do work with
> Xcode (have to
> delve deeper in to Cocoa still though). Can integration also be done
> on Mac OS X?
> If I understood correctly you go the COM route for integration on
> Windows?
> 
> CrystalSpace is a 3d engine that has a COM simulation layer for Unix-
> style platforms
> I think (last time I looked was a few years back). It would
> essentially be a thin layer
> to implementations of abstract classes.
> 
> I did download R for Mac OS X. It is quite a nice package! I wish I
> had looked at it earlier.
> You did a very good job on the user interface.

Note that there are also quite a few addon GUIs that various people have
created for R, as well.  See 
  http://www.sciviews.org/_rgui/ 
where they are listed down the left hand side of the page.  JGR, and possibly
several others on the list, are written in Java.  R can also be accessed
directly online at: 
  http://www.math.montana.edu/Rweb/ 
and other sites.


From ggrothendieck at gmail.com  Sun Jul 17 21:27:39 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 17 Jul 2005 15:27:39 -0400
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <17114.44048.89134.301967@basebud.nulle.part>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@10.1.1.4>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
	<17114.44048.89134.301967@basebud.nulle.part>
Message-ID: <971536df05071712276b94f6e9@mail.gmail.com>

On 7/17/05, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> On 17 July 2005 at 20:55, Ayal Pinkus wrote:
> | > R builds fine under Windows (though you need to pay attention to
> [...]
> | Ok. Unfortunately I work on a Mac OS X at home (I have access to
> | Windows, MS DevStudio
> 
> Why didn't you say so earlier? :)
> 
> I don't do Mac OS X, so can't help. There is a special interest group
> r-sig-mac with its own mailing list -- ask there. But several R Core members
> develop on Mac OS X as well so it seem fair to infer that it is possible.
> 
> | If I understood correctly you go the COM route for integration on
> | Windows?
> 
> I doubt that.
> 

Actually, via addon packages, COM support is very good in R.  In fact there 
are two different roughly comparable packages that provide COM support 
(both client and server).  I have used the client package of both and they both
seem to work well.

1. rcom at:
  http://sunsite.univie.ac.at/rcom/download/
which also has its own mailing list:
  http://mailman.csd.univie.ac.at/pipermail/rcom-l/
and

2. various omegahat packages at:
  http://www.omegahat.org


From goedman at mac.com  Sun Jul 17 21:40:14 2005
From: goedman at mac.com (Rob J Goedman)
Date: Sun, 17 Jul 2005 12:40:14 -0700
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <x2br549p76.fsf@turmalin.kubism.ku.dk>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A34@DJFPOST01.djf.agrsci.dk>
	<86262F64-CB17-4CB4-9281-819EBA83D33E@mac.com>
	<x2br549p76.fsf@turmalin.kubism.ku.dk>
Message-ID: <0F0FD696-C022-488E-8DD8-C01CD0DC0004@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050717/1f9fc559/attachment.pl

From apinkus at xs4all.nl  Sun Jul 17 22:01:25 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 22:01:25 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df0507171215eb85e9e@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@10.1.1.4>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
	<971536df0507171215eb85e9e@mail.gmail.com>
Message-ID: <2D130864-4BAC-462C-BD9C-B6AA7A0B65D8@xs4all.nl>



> where they are listed down the left hand side of the page.  JGR,  
> and possibly
> several others on the list, are written in Java.  R can also be  
> accessed
> directly online at:
>   http://www.math.montana.edu/Rweb/
> and other sites.
>

And as of a week ago or so Yacas can also be accessed through a Java  
applet,
at

     http://www.xs4all.nl/~apinkus/yacasconsole.html

This is work in progress still, as the numeric support is not up to  
par yet for instance.
But in case you feel like taking a look without having to compile  
Yacas, it is now on line :-)
Ayal


From apinkus at xs4all.nl  Sun Jul 17 22:05:49 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 22:05:49 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <971536df0507171215eb85e9e@mail.gmail.com>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@10.1.1.4>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
	<971536df0507171215eb85e9e@mail.gmail.com>
Message-ID: <C2CE5F1E-9A8B-4A57-BEF3-6F97EF78E081@xs4all.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050717/7083ecf9/attachment.pl

From apinkus at xs4all.nl  Sun Jul 17 22:15:35 2005
From: apinkus at xs4all.nl (Ayal Pinkus)
Date: Sun, 17 Jul 2005 22:15:35 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <C2CE5F1E-9A8B-4A57-BEF3-6F97EF78E081@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@10.1.1.4>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
	<971536df0507171215eb85e9e@mail.gmail.com>
	<C2CE5F1E-9A8B-4A57-BEF3-6F97EF78E081@xs4all.nl>
Message-ID: <1200858D-A0AC-4B88-A6B3-7698F07BE14D@xs4all.nl>


Hi,
sorry, I should have given the link below. You can get the latest  
version of Yacas from:

     http://sourceforge.net/cvs/?group_id=2528

I just checked in the change to the API.
Best wishes,
Ayal


From p.dalgaard at biostat.ku.dk  Sun Jul 17 22:57:39 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 17 Jul 2005 22:57:39 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
Message-ID: <x2irz9i20s.fsf@turmalin.kubism.ku.dk>

Ayal Pinkus <apinkus at xs4all.nl> writes:

> Hi,
> 
> >
> > R builds fine under Windows (though you need to pay attention to  
> > the details
> > which are in the (binary) distribution in the pdf files, in  
> > particular: `R
> > Installation and Administration Manual', a html copy is also on the  
> > website;
> > and the README* and INSTALL files in src/gnuwin32/ ).  These  
> > details look
> > tedious at first, and you may have to install a few things, but it  
> > keeps the
> > sources closely tied between Windoze and the Unixish operating  
> > systems on
> > which many of us prefer to develop.
> >
> 
> Ok. Unfortunately I work on a Mac OS X at home (I have access to  
> Windows, MS DevStudio
> at work but want to keep work and hobby separate). I do work with  
> Xcode (have to
> delve deeper in to Cocoa still though). Can integration also be done  
> on Mac OS X?
> If I understood correctly you go the COM route for integration on  
> Windows?

Whoa! Be careful there, there is no collective "you"; this is a
mailing list. 

S?ren, Dirk, Gabor, and I are four quite distinct people, and at least
Dirk and I are Linux people who would rather not touch COM...
Especially not when there's a perfectly fine library embedding method
available. This approach usually works across all platforms although
Windows and Macs tend to require a few extra twists. (I'm not up to
speed on Macs. I gather that OS X managed to mess up dynamic linking
somewhat but I believe it has all been sorted. You should probably
have a peek at the MacOSX FAQ at
http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html and the page
http://www.economia.unimi.it/R)

 
> CrystalSpace is a 3d engine that has a COM simulation layer for Unix- 
> style platforms
> I think (last time I looked was a few years back). It would  
> essentially be a thin layer
> to implementations of abstract classes.
> 
> I did download R for Mac OS X. It is quite a nice package! I wish I  
> had looked at it earlier.
> You did a very good job on the user interface.

...and Stefano and Simon who were the main players in this development
are yet another different "you".

> 
> > Allow me to add that this sounds very exciting.
> 
> I agree!
> 
> I am working on a Java port at the moment. I will try to make some  
> time later this evening
> or perhaps somewhere this week.

Sounds good. I wish I had more time for this, but there's a deadline
approaching... 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From Soren.Hojsgaard at agrsci.dk  Sun Jul 17 23:09:12 2005
From: Soren.Hojsgaard at agrsci.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Sun, 17 Jul 2005 23:09:12 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
Message-ID: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A39@DJFPOST01.djf.agrsci.dk>

On my homepage, http://genetics.agrsci.dk/~sorenh/misc/ there is now a small yacasR package (runs on windows only). Feel free to comment - or laugh!
S?ren

________________________________

Fra: r-devel-bounces at r-project.org p? vegne af Gabor Grothendieck
Sendt: s? 17-07-2005 21:15
Til: Ayal Pinkus
Cc: R-devel at r-project.org
Emne: Re: [Rd] Computer algebra in R - would that be an idea??



On 7/17/05, Ayal Pinkus <apinkus at xs4all.nl> wrote:
>
>
> Hi,
>
> >
> > R builds fine under Windows (though you need to pay attention to
> > the details
> > which are in the (binary) distribution in the pdf files, in
> > particular: `R
> > Installation and Administration Manual', a html copy is also on the
> > website;
> > and the README* and INSTALL files in src/gnuwin32/ ).  These
> > details look
> > tedious at first, and you may have to install a few things, but it
> > keeps the
> > sources closely tied between Windoze and the Unixish operating
> > systems on
> > which many of us prefer to develop.
> >
>
> Ok. Unfortunately I work on a Mac OS X at home (I have access to
> Windows, MS DevStudio
> at work but want to keep work and hobby separate). I do work with
> Xcode (have to
> delve deeper in to Cocoa still though). Can integration also be done
> on Mac OS X?
> If I understood correctly you go the COM route for integration on
> Windows?
>
> CrystalSpace is a 3d engine that has a COM simulation layer for Unix-
> style platforms
> I think (last time I looked was a few years back). It would
> essentially be a thin layer
> to implementations of abstract classes.
>
> I did download R for Mac OS X. It is quite a nice package! I wish I
> had looked at it earlier.
> You did a very good job on the user interface.

Note that there are also quite a few addon GUIs that various people have
created for R, as well.  See
  http://www.sciviews.org/_rgui/
where they are listed down the left hand side of the page.  JGR, and possibly
several others on the list, are written in Java.  R can also be accessed
directly online at:
  http://www.math.montana.edu/Rweb/
and other sites.

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From r.hankin at noc.soton.ac.uk  Mon Jul 18 11:42:26 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Mon, 18 Jul 2005 10:42:26 +0100
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <a06110400befe1c42c158@[203.61.56.151]>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@[203.61.56.151]>
Message-ID: <75078621-1CB1-48AF-8F64-2E6966FCE1A5@soc.soton.ac.uk>

Hi

while everyone is discussing abstract algebra in R,
perhaps it would be good to let the list know about
pari.   From the FAQ

PARI/GP is a widely used computer algebra
system designed for fast computations in
number theory (factorizations, algebraic
number theory, elliptic curves...), but also
contains a large number of other useful
functions to compute with mathematical
entities such as matrices, polynomials,
power series, algebraic numbers, etc., and
a lot of transcendental functions.


My elliptic package has some basic functionality to evaluate
pari/gp statements via system() but I daresay there are better
ways to write a wrapper.

Would anyone on the List be interested in PARI wrapping?


best wishes

Robin




On 16 Jul 2005, at 04:12, simon blomberg wrote:

>>>>>>> "bry" == bry  <bry at xdocs.dk>
>>>>>>>      on Fri, 15 Jul 2005 14:16:46 +0200 writes:
>>>>>>>
>>
>>     bry> About a year ago there was a discussion about interfacing R
>> with J on the J
>>     bry> forum, the best method seemed to be that outlined in this
>> vector article
>>     bry> http://www.vector.org.uk/archive/v194/finn194.htm
>>
>> (which is interesting to see for me,
>>  if I had known that my posted functions would make it to an APL
>>  workshop...
>>  BTW: Does one need special plugins / fonts to properly view
>>      the APL symbols ? )
>>
>>
>>     bry> and use J instead of APL
>>
>>     bry> http://www.jsoftware.com
>>
>> well, I've learned about J as the ASCII-variant of APL, and APL
>> used to be my first `beloved' computer language (in high school!)
>> -- but does J really provide computer algebra in the sense of
>> Maxima , Maple or yacas... ??
>>
>
> I wonder if at this point it would be useful to think about how a
> symbolic algebra system might be used by R users, and whether that
> would affect the choice of system. For example, Maxima and yacas seem
> to be mostly concerned with "getting the job done", which might be
> all that the data analyst or occasional user needs. However,
> mathematical statisticians might be more concerned with developing
> new mathematics. For example, commutative algebra has been found to
> be very useful in the theory of experimental design (e.g. Pistone,
> Riccomagno, Wynn (2000) Algebraic Statistics: Computational
> Commutative Algebra in Statistics. Chapman & Hall). Now, Maxima can
> already do the necessary calculations (ie Groebner bases of
> polynomials), but as far as I know, yacas cannot. But who knows where
> the next breakthrough will come from? In that case Axiom might be
> more useful and appropriate, as it is largely used by research
> mathematicians. We would then need a mechanism for the development of
> new data structures in R that could potentially match Axiom's rich
> and extensible type system. I guess some mechanism that relies on S4
> classes would be necessary. Of course, there is nothing to stop us
> developing packages for more than one system ("We are R. We will
> assimilate you!"). I have no idea how to do any of this: I'm just
> floating ideas here. :-)
>
> Cheers,
>
> Simon.
>
>
>>
>> (and no, please refrain from flame wars about APL vs .. vs ..,
>>  it's hard to refrain for me, too...)
>>
>> Martin Maechler, ETH Zurich
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
> -- 
> Simon Blomberg, B.Sc.(Hons.), Ph.D, M.App.Stat.
> Centre for Resource and Environmental Studies
> The Australian National University
> Canberra ACT 0200
> Australia
>
> T: +61 2 6125 7800
> F: +61 2 6125 0757
>
> CRICOS Provider # 00120C
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From jyzz88 at gmail.com  Tue Jul 19 05:11:21 2005
From: jyzz88 at gmail.com (jyzz88@gmail.com)
Date: Tue, 19 Jul 2005 05:11:21 +0200 (CEST)
Subject: [Rd] a possible bug in svmlight (PR#8012)
Message-ID: <20050719031121.3266BA214@slim.kubism.ku.dk>

When I used svmlight, I got below error:

my command is:
foo <- svmlight(y~., data= myData)

the results:
Error in file(con, "r") : unable to open connection
In addition: Warning messages:
1: svm_learn not found
2: cannot open file '_model_1.txt'

> myData[1:2,]
 y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1

The klaR version is 0.4-1
OS: trying on windows and Linux gives me the same error

-Luke


From ggrothendieck at gmail.com  Tue Jul 19 05:31:34 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 18 Jul 2005 23:31:34 -0400
Subject: [Rd] a possible bug in svmlight (PR#8012)
In-Reply-To: <20050719031121.3266BA214@slim.kubism.ku.dk>
References: <20050719031121.3266BA214@slim.kubism.ku.dk>
Message-ID: <971536df05071820313c7601a5@mail.gmail.com>

The CRAN package does not include the svmlight binaries.
Perhaps you installed klaR but not svmlight binaries?  
You need to place them somewhere on your path.

On 7/18/05, jyzz88 at gmail.com <jyzz88 at gmail.com> wrote:
> When I used svmlight, I got below error:
> 
> my command is:
> foo <- svmlight(y~., data= myData)
> 
> the results:
> Error in file(con, "r") : unable to open connection
> In addition: Warning messages:
> 1: svm_learn not found
> 2: cannot open file '_model_1.txt'
> 
> > myData[1:2,]
>  y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
> 1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
> 2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1
> 
> The klaR version is 0.4-1
> OS: trying on windows and Linux gives me the same error
> 
> -Luke
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jyzz88 at gmail.com  Tue Jul 19 05:41:04 2005
From: jyzz88 at gmail.com (Luke)
Date: Mon, 18 Jul 2005 23:41:04 -0400
Subject: [Rd] a possible bug in svmlight (PR#8012)
In-Reply-To: <971536df05071820313c7601a5@mail.gmail.com>
References: <20050719031121.3266BA214@slim.kubism.ku.dk>
	<971536df05071820313c7601a5@mail.gmail.com>
Message-ID: <27583b40050718204162898fd0@mail.gmail.com>

If it is true, I wonder why the help page of svmlight doesn't mention
this requirement explicitly.

-Luke

On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> The CRAN package does not include the svmlight binaries.
> Perhaps you installed klaR but not svmlight binaries?
> You need to place them somewhere on your path.
> 
> On 7/18/05, jyzz88 at gmail.com <jyzz88 at gmail.com> wrote:
> > When I used svmlight, I got below error:
> >
> > my command is:
> > foo <- svmlight(y~., data= myData)
> >
> > the results:
> > Error in file(con, "r") : unable to open connection
> > In addition: Warning messages:
> > 1: svm_learn not found
> > 2: cannot open file '_model_1.txt'
> >
> > > myData[1:2,]
> >  y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
> > 1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
> > 2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1
> >
> > The klaR version is 0.4-1
> > OS: trying on windows and Linux gives me the same error
> >
> > -Luke
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>


From ggrothendieck at gmail.com  Tue Jul 19 05:46:53 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 18 Jul 2005 23:46:53 -0400
Subject: [Rd] a possible bug in svmlight (PR#8012)
In-Reply-To: <27583b40050718204162898fd0@mail.gmail.com>
References: <20050719031121.3266BA214@slim.kubism.ku.dk>
	<971536df05071820313c7601a5@mail.gmail.com>
	<27583b40050718204162898fd0@mail.gmail.com>
Message-ID: <971536df0507182046581c546@mail.gmail.com>

Actually it does.  Look in the examples section of ?svmlight

On 7/18/05, Luke <jyzz88 at gmail.com> wrote:
> If it is true, I wonder why the help page of svmlight doesn't mention
> this requirement explicitly.
> 
> -Luke
> 
> On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> > The CRAN package does not include the svmlight binaries.
> > Perhaps you installed klaR but not svmlight binaries?
> > You need to place them somewhere on your path.
> >
> > On 7/18/05, jyzz88 at gmail.com <jyzz88 at gmail.com> wrote:
> > > When I used svmlight, I got below error:
> > >
> > > my command is:
> > > foo <- svmlight(y~., data= myData)
> > >
> > > the results:
> > > Error in file(con, "r") : unable to open connection
> > > In addition: Warning messages:
> > > 1: svm_learn not found
> > > 2: cannot open file '_model_1.txt'
> > >
> > > > myData[1:2,]
> > >  y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
> > > 1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
> > > 2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1
> > >
> > > The klaR version is 0.4-1
> > > OS: trying on windows and Linux gives me the same error
> > >
> > > -Luke
> > >
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > >
> >
>


From jyzz88 at gmail.com  Tue Jul 19 06:02:29 2005
From: jyzz88 at gmail.com (Luke)
Date: Tue, 19 Jul 2005 00:02:29 -0400
Subject: [Rd] a possible bug in svmlight (PR#8012)
In-Reply-To: <971536df0507182046581c546@mail.gmail.com>
References: <20050719031121.3266BA214@slim.kubism.ku.dk>
	<971536df05071820313c7601a5@mail.gmail.com>
	<27583b40050718204162898fd0@mail.gmail.com>
	<971536df0507182046581c546@mail.gmail.com>
Message-ID: <27583b4005071821024b0483c0@mail.gmail.com>

Well, it is explicite only for the guru. :)

On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> Actually it does.  Look in the examples section of ?svmlight
> 
> On 7/18/05, Luke <jyzz88 at gmail.com> wrote:
> > If it is true, I wonder why the help page of svmlight doesn't mention
> > this requirement explicitly.
> >
> > -Luke
> >
> > On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> > > The CRAN package does not include the svmlight binaries.
> > > Perhaps you installed klaR but not svmlight binaries?
> > > You need to place them somewhere on your path.
> > >
> > > On 7/18/05, jyzz88 at gmail.com <jyzz88 at gmail.com> wrote:
> > > > When I used svmlight, I got below error:
> > > >
> > > > my command is:
> > > > foo <- svmlight(y~., data= myData)
> > > >
> > > > the results:
> > > > Error in file(con, "r") : unable to open connection
> > > > In addition: Warning messages:
> > > > 1: svm_learn not found
> > > > 2: cannot open file '_model_1.txt'
> > > >
> > > > > myData[1:2,]
> > > >  y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
> > > > 1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
> > > > 2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1
> > > >
> > > > The klaR version is 0.4-1
> > > > OS: trying on windows and Linux gives me the same error
> > > >
> > > > -Luke
> > > >
> > > > ______________________________________________
> > > > R-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > >
> > >
> >
>


From cireeric at alumni.rice.edu  Tue Jul 19 06:34:38 2005
From: cireeric at alumni.rice.edu (cireeric@alumni.rice.edu)
Date: Tue, 19 Jul 2005 06:34:38 +0200 (CEST)
Subject: [Rd] mac os x crashes with bioconductor microarray code (PR#8013)
Message-ID: <20050719043438.A2510A22C@slim.kubism.ku.dk>

Full_Name: Eric Libby
Version: 2.1.1
OS: OS Tiger
Submission from: (NULL) (65.93.158.117)


I am trying to analyze microarray data of 42 human arrays. I typed in the
following instructions:
library(affy)
Data <-ReadAffy()
eset <- expresso(Data, normalize.method="invariantset", bg.correct=FALSE,
pmcorrect.method="pmonly",summary.method="liwong") 

And I get some sort of memory error that crashes the R program. Specifically it
states:
R(1763) malloc: *** vm_allocate(size=346857472) failed (error code=3)
R(1763) malloc: *** error: can't allocate region
R(1763) malloc: *** set a breakpoint in szone_error to debug
R(1763) malloc: *** vm_allocate(size=346857472) failed (error code=3)
R(1763) malloc: *** error: can't allocate region
R(1763) malloc: *** set a breakpoint in szone_error to debug
Error: cannot allocate vector of size 338724 Kb
R(1763) malloc: *** vm_allocate(size=8421376) failed (error code=3)
R(1763) malloc: *** error: can't allocate region
R(1763) malloc: *** set a breakpoint in szone_error to debug


Any ideas? My computer has 2gb of RAM and 100 gb free. I would think that
analyzing 42 microarrays would not be too difficult. Thanks,
Eric


From ligges at statistik.uni-dortmund.de  Tue Jul 19 08:35:00 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 19 Jul 2005 08:35:00 +0200
Subject: [Rd] a possible bug in svmlight (PR#8012)
In-Reply-To: <27583b4005071821024b0483c0@mail.gmail.com>
References: <20050719031121.3266BA214@slim.kubism.ku.dk>	<971536df05071820313c7601a5@mail.gmail.com>	<27583b40050718204162898fd0@mail.gmail.com>	<971536df0507182046581c546@mail.gmail.com>
	<27583b4005071821024b0483c0@mail.gmail.com>
Message-ID: <42DC9F14.60802@statistik.uni-dortmund.de>

Luke wrote:

> Well, it is explicite only for the guru. :)

Let me add a few of points:

1. We already thought about including svmlight, but get stuck there due 
to some licensing issues, AFAIR. We might want to force getting there, 
though.

2. library(help=klaR) says:
       SystemRequirements:   SVMlight
    ?klaR says:
In title: "Interface to SVMlight"
            ^^^ ^^ ^^
In the arguments section (including a typo that should not matter):
"pathsvm  Path to SVMlight binaries (required, if path os unknown by the 
OS)."
Gabor already told about the note in the examples.

I will add an explicit section telling people something like "Can only 
interface to SVMlight if SVMlight is available". Unfortunately, Rd files 
do not have the markup that allows to make it red and blinking. ;-)

3. Please NEVER send bug reports of contributed packages to the bug 
tracking system of R. R Core cannot do anything re. contributed 
packages, and maintainers of contributed packages cannot mark the bug as 
"fixed" in the bug tracking system ...
Instead, please notify the maintainer.


Uwe Ligges





> On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> 
>>Actually it does.  Look in the examples section of ?svmlight
>>
>>On 7/18/05, Luke <jyzz88 at gmail.com> wrote:
>>
>>>If it is true, I wonder why the help page of svmlight doesn't mention
>>>this requirement explicitly.
>>>
>>>-Luke
>>>
>>>On 7/18/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
>>>
>>>>The CRAN package does not include the svmlight binaries.
>>>>Perhaps you installed klaR but not svmlight binaries?
>>>>You need to place them somewhere on your path.
>>>>
>>>>On 7/18/05, jyzz88 at gmail.com <jyzz88 at gmail.com> wrote:
>>>>
>>>>>When I used svmlight, I got below error:
>>>>>
>>>>>my command is:
>>>>>foo <- svmlight(y~., data= myData)
>>>>>
>>>>>the results:
>>>>>Error in file(con, "r") : unable to open connection
>>>>>In addition: Warning messages:
>>>>>1: svm_learn not found
>>>>>2: cannot open file '_model_1.txt'
>>>>>
>>>>>
>>>>>>myData[1:2,]
>>>>>
>>>>> y X1 X2 X3 X4  X5  X6 X7 X8 X9 X10 X11 X12 X13 X14 X15 X16 X17
>>>>>1 1 63  1  0  0 145 233  1  1  0 150   0 2.3   1   0   0   1   0
>>>>>2 0 67  0  1  0 160 286  0  1  0 108   1 1.5   0   1   3   0   1
>>>>>
>>>>>The klaR version is 0.4-1
>>>>>OS: trying on windows and Linux gives me the same error
>>>>>
>>>>>-Luke
>>>>>
>>>>>______________________________________________
>>>>>R-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hb at maths.lth.se  Tue Jul 19 09:16:05 2005
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Tue, 19 Jul 2005 09:16:05 +0200
Subject: [Rd] Minor "bug" in source()
Message-ID: <42DCA8B5.2000808@maths.lth.se>

For R v2.1.1 patched and R v2.2.0 devel:

Calling source(file, chdir=TRUE) with is.character(file) != TRUE, that 
is, with 'file' as a connection, will generate an error. Example:

 > file <- textConnection("cat('Hello world\n')")
 > source(file, chdir=TRUE)
Error in source(file, chdir = TRUE) : Object "ofile" not found

Of course, it does not make sense to change working directory, but 
quietly ignoring 'chdir' is better, I think.

This is due to a simple coding mistake in source() [sorry, 56k modem
=> no R source => no diff]:

<snip></snip>
     if (is.character(file)) {
         ofile <- file
         if (capabilities("iconv")) {
             if (identical(encoding, "unknown")) {
         <snip></snip>
     }
     Ne <- length(exprs <- .Internal(parse(file, n = -1, NULL,
         "?")))
     if (verbose)
         cat("--> parsed", Ne, "expressions; now eval(.)ing them:\n")
     if (Ne == 0)
         return(invisible())
     if (chdir && is.character(ofile)) {        <=== HERE
         isURL <- length(grep("^(ftp|http|file)://", ofile)) >
             0
         if (!isURL && (path <- dirname(ofile)) != ".") {
             owd <- getwd()
             on.exit(setwd(owd), add = TRUE)
             setwd(path)
         }
     }
<snip></snip>

I suggest to either i) do 'ofile <- file' before the first if-clause 
above, or better ii) move the last if-clause inside the first one (and 
remove " && is.character(ofile)").

Best

Henrik


From ripley at stats.ox.ac.uk  Tue Jul 19 10:23:59 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Jul 2005 09:23:59 +0100 (BST)
Subject: [Rd] Minor "bug" in source()
In-Reply-To: <42DCA8B5.2000808@maths.lth.se>
References: <42DCA8B5.2000808@maths.lth.se>
Message-ID: <Pine.LNX.4.61.0507190921460.3594@gannet.stats>

I think at least a warning is appropriate here (and also for a URL), so 
have modified the code to have one in each case.

There is a reason why the chdir code is later, after the parsing, for it 
was thought more important to get an error from parsing than from failing 
to chdir.

On Tue, 19 Jul 2005, Henrik Bengtsson wrote:

> For R v2.1.1 patched and R v2.2.0 devel:
>
> Calling source(file, chdir=TRUE) with is.character(file) != TRUE, that
> is, with 'file' as a connection, will generate an error. Example:
>
> > file <- textConnection("cat('Hello world\n')")
> > source(file, chdir=TRUE)
> Error in source(file, chdir = TRUE) : Object "ofile" not found
>
> Of course, it does not make sense to change working directory, but
> quietly ignoring 'chdir' is better, I think.
>
> This is due to a simple coding mistake in source() [sorry, 56k modem
> => no R source => no diff]:
>
> <snip></snip>
>     if (is.character(file)) {
>         ofile <- file
>         if (capabilities("iconv")) {
>             if (identical(encoding, "unknown")) {
>         <snip></snip>
>     }
>     Ne <- length(exprs <- .Internal(parse(file, n = -1, NULL,
>         "?")))
>     if (verbose)
>         cat("--> parsed", Ne, "expressions; now eval(.)ing them:\n")
>     if (Ne == 0)
>         return(invisible())
>     if (chdir && is.character(ofile)) {        <=== HERE
>         isURL <- length(grep("^(ftp|http|file)://", ofile)) >
>             0
>         if (!isURL && (path <- dirname(ofile)) != ".") {
>             owd <- getwd()
>             on.exit(setwd(owd), add = TRUE)
>             setwd(path)
>         }
>     }
> <snip></snip>
>
> I suggest to either i) do 'ofile <- file' before the first if-clause
> above, or better ii) move the last if-clause inside the first one (and
> remove " && is.character(ofile)").
>
> Best
>
> Henrik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jago at mclink.it  Tue Jul 19 12:16:58 2005
From: jago at mclink.it (stefano iacus)
Date: Tue, 19 Jul 2005 12:16:58 +0200
Subject: [Rd] Computer algebra in R - would that be an idea??
In-Reply-To: <21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
References: <C83C5E3DEEE97E498B74729A33F6EAEC01AD9A2B@DJFPOST01.djf.agrsci.dk>
	<1121429806.42d7a92eb6678@horde.scannet.dk>
	<17111.46789.226240.355911@stat.math.ethz.ch>
	<a06110400befe1c42c158@203.61.56.151>
	<971536df050716033614fd6e77@mail.gmail.com>
	<a06110401beffa70234a8@[10.1.1.4]>
	<670D7252-4A25-4179-AA28-D6974AE9904A@xs4all.nl>
	<x2zmslk2wl.fsf@turmalin.kubism.ku.dk>
	<0EE77E17-94B0-4DDD-A064-4BFD20F52638@xs4all.nl>
	<17114.41566.753777.845692@basebud.nulle.part>
	<21AD8356-9C35-4536-8A77-FED265BBA002@xs4all.nl>
Message-ID: <2AF95E06-7A7C-46CC-976B-BADB49767585@mclink.it>


On 17/lug/05, at 20:55, Ayal Pinkus wrote:

>
>
> Hi,
>
>
>>
>> R builds fine under Windows (though you need to pay attention to
>> the details
>> which are in the (binary) distribution in the pdf files, in
>> particular: `R
>> Installation and Administration Manual', a html copy is also on the
>> website;
>> and the README* and INSTALL files in src/gnuwin32/ ).  These
>> details look
>> tedious at first, and you may have to install a few things, but it
>> keeps the
>> sources closely tied between Windoze and the Unixish operating
>> systems on
>> which many of us prefer to develop.
>>
>>
>
> Ok. Unfortunately I work on a Mac OS X at home (I have access to
> Windows, MS DevStudio
> at work but want to keep work and hobby separate). I do work with
> Xcode (have to
> delve deeper in to Cocoa still though). Can integration also be done
> on Mac OS X?

As Peter said there few r-core members working on OS X me and Simon  
are in charge for the GUI at the moment, but Luke T. and Thomas L.  
have also mac.
I'll be happy to provide any help I can but this summer I'll have  
difficulties with internet connections.
There is no project file for R itself but there is one for R.app. R  
builds with standard ./configure, make etc.
In R.app you'll find a Cocoa class called REngine which you can  
probably look at.
stefano



> If I understood correctly you go the COM route for integration on
> Windows?
>
> CrystalSpace is a 3d engine that has a COM simulation layer for Unix-
> style platforms
> I think (last time I looked was a few years back). It would
> essentially be a thin layer
> to implementations of abstract classes.
>
> I did download R for Mac OS X. It is quite a nice package! I wish I
> had looked at it earlier.
> You did a very good job on the user interface.
>
>
>
>> Allow me to add that this sounds very exciting.
>>
>
> I agree!
>
> I am working on a Java port at the moment. I will try to make some
> time later this evening
> or perhaps somewhere this week.
>
> Ayal
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From jp-www at dcs.gla.ac.uk  Tue Jul 19 12:39:40 2005
From: jp-www at dcs.gla.ac.uk (jp-www@dcs.gla.ac.uk)
Date: Tue, 19 Jul 2005 12:39:40 +0200 (CEST)
Subject: [Rd] segfault with grid and null unit (PR#8014)
Message-ID: <20050719103940.DE0B3A6FD@slim.kubism.ku.dk>

Full_Name: Jonathan Paisley
Version: 2.1.1
OS: Mac OS X 10.4.2
Submission from: (NULL) (81.178.107.67)


I was following an example from library/grid/doc/grid.pdf ("Introduction to
grid") and had the following code, where I'd mis-typed 1,3 instead of 1,2 as the
first arguments to grid.layout.

Sourcing this code causes the R GUI to crash. I've enclosed a partial backtrace
from the crash below.

==============
require(grid)

sometext = "hello there\nthis is a \ntest!"

pushViewport(
        viewport(
                layout=grid.layout(1,3,
                        widths=unit.c(
                                unit(1,"strwidth",sometext) +
                                unit(2,"cm"),
                                unit(1,"null")
                        )
                )
        )
)
==============

Date/Time:      2005-07-19 11:35:30.950 +0100
OS Version:     10.4.2 (Build 8C46)
Report Version: 3

Command: R
Path:    /Volumes/George/MyApplications/R.app/Contents/MacOS/R
Parent:  WindowServer [146]

Version: 1.12 (1622)

PID:    10493
Thread: 0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x68000001

Thread 0 Crashed:
0   libR.dylib               	0x00303d1c Rf_isObject + 0 (util.c:623)
1   grid.so                  	0x060c6240 pureNullUnit + 40 (unit.c:270)
2   grid.so                  	0x060c6284 pureNullUnit + 108 (unit.c:273)
3   grid.so                  	0x060c3894 findRelWidths + 60 (layout.c:69)
4   grid.so                  	0x060c484c calcViewportLayout + 172
(layout.c:464)
5   grid.so                  	0x060ca888 calcViewportTransform + 1296
(viewport.c:356)
6   grid.so                  	0x060be0a0 doSetViewport + 256 (grid.c:200)
7   grid.so                  	0x060be5ac L_setviewport + 76 (grid.c:311)
8   libR.dylib               	0x00249318 do_dotcall + 652 (dotcode.c:770)
9   libR.dylib               	0x0024cc7c do_dotcallgr + 80 (dotcode.c:1450)
10  libR.dylib               	0x00263b24 Rf_eval + 1536 (eval.c:405)
11  libR.dylib               	0x00265b1c do_set + 224 (eval.c:1309)


From wujianyun11 at hotmail.com  Tue Jul 19 14:25:26 2005
From: wujianyun11 at hotmail.com (wujianyun11@hotmail.com)
Date: Tue, 19 Jul 2005 14:25:26 +0200 (CEST)
Subject: [Rd] Statistics (PR#8015)
Message-ID: <20050719122526.9BBB0A6A4@slim.kubism.ku.dk>

Full_Name: Wu,Jianyun
Version: 2.1.1
OS: 
Submission from: (NULL) (139.80.123.40)


When i install the software,it appears a language selection box, which contain
chinese and english. Then i selected english, but after it was installed, the R
is running in Chinese character with some characters are wrong. I dont know what
happens

looking forward to your reply


From ligges at statistik.uni-dortmund.de  Tue Jul 19 14:50:55 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 19 Jul 2005 14:50:55 +0200 (CEST)
Subject: [Rd] Statistics (PR#8015)
Message-ID: <20050719125055.C55A5B6C0@slim.kubism.ku.dk>

wujianyun11 at hotmail.com wrote:

> Full_Name: Wu,Jianyun
> Version: 2.1.1
> OS: 
> Submission from: (NULL) (139.80.123.40)
> 
> 
> When i install the software,it appears a language selection box, which contain

This is not a bug! Before submitting a bug report. Please read what a 
bug is. If you are unsure or have a question, please ask on R-help!

You have not specified your Operating System which is essential for bug 
reports (although we know it is Windows, others don't have any selection 
box).


The selection box aims at setting the language for the installation 
procedure, not for running R.


> chinese and english. Then i selected english, but after it was installed, the R
> is running in Chinese character with some characters are wrong. I dont know what
> happens

You can set the environment variable
LANGUAGE=en

Please look into the archives of the R-help list. This has been 
dicsussed there before.


Uwe Ligges


> looking forward to your reply
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From paulojus at est.ufpr.br  Tue Jul 19 14:53:06 2005
From: paulojus at est.ufpr.br (paulojus@est.ufpr.br)
Date: Tue, 19 Jul 2005 14:53:06 +0200 (CEST)
Subject: [Rd] translation with Rd.sty, Sweave and tex4th (PR#8016)
Message-ID: <20050719125306.ADF48C970@slim.kubism.ku.dk>

Full_Name: Paulo Ribeiro
Version: 2.1-1
OS: Debian Linux
Submission from: (NULL) (200.103.144.24)


I'm using Sweave with tex4th to generate xhtml documents
from documents created using Sweave which include \usepackage{Rd}
in the preamble

However there seems to be a problem with \Link defined in
Rd.sty, since this is also defined in tex4ht.sty

My workaround was to replace the lines with
\newcommand{\Link} by \providecommand{\Link}
in Rd.sty

I'm therefore wondering whether this is the best solution, if there is any
other
and, if so, whether this could be modified in the original Rd.sty shipped with
R.

A possible inconvenient of the suggested above
is that \providecommand seems to be specific to
LaTeX and apparently does not work with TeX.
Another possibility, as suggested by Kurt, would be "emulate" namespaces
with something of the type \Rd at Link 

with best regards


From ripley at stats.ox.ac.uk  Tue Jul 19 15:05:29 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 19 Jul 2005 15:05:29 +0200 (CEST)
Subject: [Rd] translation with Rd.sty, Sweave and tex4th (PR#8016)
Message-ID: <20050719130529.555E2B6BD@slim.kubism.ku.dk>

Why not report this as a bug *in tex4th* that conflicts with R?  LaTeX has 
no namespaces, and unfortunately name conflicts are common.  Doing as you 
suggest and allowing one package to clobber another is much worse.

On Tue, 19 Jul 2005 paulojus at est.ufpr.br wrote:

> Full_Name: Paulo Ribeiro
> Version: 2.1-1
> OS: Debian Linux
> Submission from: (NULL) (200.103.144.24)
>
>
> I'm using Sweave with tex4th to generate xhtml documents
> from documents created using Sweave which include \usepackage{Rd}
> in the preamble
>
> However there seems to be a problem with \Link defined in
> Rd.sty, since this is also defined in tex4ht.sty
>
> My workaround was to replace the lines with
> \newcommand{\Link} by \providecommand{\Link}
> in Rd.sty
>
> I'm therefore wondering whether this is the best solution, if there is any
> other
> and, if so, whether this could be modified in the original Rd.sty shipped with
> R.
>
> A possible inconvenient of the suggested above
> is that \providecommand seems to be specific to
> LaTeX and apparently does not work with TeX.

Nor does \newcommand.  It is part of LaTeX's extra care in finding 
conflicting definitions.

> Another possibility, as suggested by Kurt, would be "emulate" namespaces
> with something of the type \Rd at Link

Really a general-purpose package like tex4th should be doing that, not R. 
As many R installations have lots of prebuilt latex files installed, 
changing R's macros can only be done for 3.0.0.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nikko at hailmail.net  Tue Jul 19 18:15:52 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Tue, 19 Jul 2005 11:15:52 -0500
Subject: [Rd] extracting and manipulating components from nlme and gnls
	objects
Message-ID: <1121789752.13362.238783805@webmail.messagingengine.com>

Hello,
I am writing a set of functions to do prediction and calibration
intervals 
for at least the subset of selfstarting models if not some more general
ones.

I need to be able to extract the varFunction from a fit object
and evaluate it at a predicted point. Are there any examples around?

Also in a self start model, say SSlogis, how would I get the gradient
at a point?

Thanks
Nicholas

PS I am sure I will have more questions


From dmbates at gmail.com  Tue Jul 19 18:48:18 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Tue, 19 Jul 2005 11:48:18 -0500
Subject: [Rd] extracting and manipulating components from nlme and gnls
	objects
In-Reply-To: <1121789752.13362.238783805@webmail.messagingengine.com>
References: <1121789752.13362.238783805@webmail.messagingengine.com>
Message-ID: <40e66e0b050719094815ff1e01@mail.gmail.com>

On 7/19/05, Nicholas Lewin-Koh <nikko at hailmail.net> wrote:
> Hello,
> I am writing a set of functions to do prediction and calibration
> intervals
> for at least the subset of selfstarting models if not some more general
> ones.
> 
> I need to be able to extract the varFunction from a fit object
> and evaluate it at a predicted point. Are there any examples around?
> 
> Also in a self start model, say SSlogis, how would I get the gradient
> at a point?

I think that the output of 

example(SSlogis)

should answer that question for you.


From boycer at u.washington.edu  Tue Jul 19 19:23:06 2005
From: boycer at u.washington.edu (boycer@u.washington.edu)
Date: Tue, 19 Jul 2005 19:23:06 +0200 (CEST)
Subject: [Rd] build of REventLoop package crashes with 2.1 due tosyntax
	error in Defn.h (PR#8017)
Message-ID: <20050719172306.47DE7A6FD@slim.kubism.ku.dk>

Full_Name: Richard Boyce
Version: 2.1.-1
OS: Debian testing/unstable
Submission from: (NULL) (128.95.123.29)


While building a custom package using a modified version of Duncan's REventLoop
with R version 2.1 (Debian package r-base, r-base-dev) and R source from apt-get
source 2.1.1     I get the following error:

$ R CMD build vjREventLoop
* checking for file 'vjREventLoop/DESCRIPTION' ... OK
* preparing 'vjREventLoop':
* cleaning src
* checking whether 'INDEX' is up-to-date ... NO
* use '--force' to overwrite the existing 'INDEX'
* removing junk files
* building 'vjREventLoop_0.2.tar.gz'

$ su
# R CMD INSTALL vjREventLoop_0.2.tar.gz
gcc -I/usr/lib/R/include    -I/usr/src/r-base-2.1.1/src/include -fPIC  -g -O2 
-c Reventloop.c -o Reventloop.o
In file included from /usr/src/r-base-2.1.1/src/include/IOStuff.h:30,
                 from Reventloop.c:8:
/usr/src/r-base-2.1.1/src/include/Defn.h:886: error: syntax error before 
"mbstate_t"
Reventloop.c: In function `R_mainLoop':
Reventloop.c:112: warning: assignment from incompatible pointer type
Reventloop.c:156: warning: assignment from incompatible pointer type
make: *** [Reventloop.o] Error 1
ERROR: compilation failed for package 'vjREventLoop'
** Removing '/usr/local/lib/R/site-library/vjREventLoop'
** Restoring previous '/usr/local/lib/R/site-library/vjREventLoop'

*Build works correctly with R-2.0.0 installed from source* with 
$ ./configure --prefix=/usr/local --enable-R-shlib
$ make
$ su
# make install

Inspection of Defn.h does not identify syntax error but I am not familiar with
all the details. Diff (probably not useful):
$ diff /usr/src/r-base-2.1.1/src/include/Defn.h
/opt/Downloads/r-cran/R-2.0.0/src/include/Defn.h

4c4
<  *  Copyright (C) 1998--2005  The R Development Core Team.
---
>  *  Copyright (C) 1998--2004  The R Development Core Team.
472c472
< LibExtern char*       R_Home;             /* Root of the R tree */
---
> extern char*  R_Home;             /* Root of the R tree */
499c499
< extern int    R_Expressions   INI_as(5000);   /* options(expressions) */
---
> extern int    R_Expressions   INI_as(500);    /* options(expressions) */
514,515c514
< LibExtern char*       R_TempDir       INI_as(NULL);   /* Name of per-session
dir */
< extern char   R_StdinEnc[31]  INI_as("");     /* Encoding assumed for stdin
*/
---
> extern char*  R_TempDir       INI_as(NULL);   /* Name of per-session dir */
530d528
< extern void   R_setupHistory();
541,542c539
< LibExtern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
< LibExtern Rboolean mbcslocale  INI_as(FALSE);  /* is this a MBCS locale? */
---
> extern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
596a594
> # define duplicated           Rf_duplicated
633c631
< # define Mbrtowc              Rf_mbrtowc
---
> # define match                        Rf_match
686a685
> int   R_ShowFile(char*, char*);
799,800c798
< SEXP R_data_class(SEXP , Rboolean);
< SEXP R_data_class2(SEXP);
---
> SEXP R_data_class(SEXP , int);
864,869d861
< typedef enum {
<     Rprt_adj_left = 0,
<     Rprt_adj_right = 1,
<     Rprt_adj_centre = 2
< } Rprt_adj;
<
872,939c864
< char *EncodeString(SEXP, int, int, Rprt_adj);
<
<
< #if defined(HAVE_WCHAR_H) && defined(SUPPORT_MBCS)
< #include <wchar.h>
< #endif
<
< /* main/util.c */
< void UNIMPLEMENTED_TYPE(char *s, SEXP x);
< void UNIMPLEMENTED_TYPEt(char *s, SEXPTYPE t);
< Rboolean utf8strIsASCII(char *str);
< #ifdef SUPPORT_MBCS
< int utf8clen(char c);
< #define mbs_init(x) memset(x, 0, sizeof(mbstate_t))
< size_t Mbrtowc(wchar_t *wc, const char *s, size_t n, mbstate_t *ps);
< void mbcsToLatin1(char *in, char *out);
< Rboolean mbcsValid(char *str);
< char *Rf_strchr(const char *s, int c);
< char *Rf_strrchr(const char *s, int c);
< #else
< #define Rf_strchr(s, c) strchr(s, c)
< #define Rf_strrchr(s, c) strrchr(s, c)
< #endif
< #ifdef Win32
< void R_fixslash(char *s);
< void R_fixbackslash(char *s);
< #endif
< #if defined(Win32) && defined(SUPPORT_UTF8)
< #define mbrtowc(a,b,c,d) Rmbrtowc(a,b)
< #define wcrtomb(a,b,c) Rwcrtomb(a,b)
< #define mbstowcs(a,b,c) Rmbstowcs(a,b,c)
< #define wcstombs(a,b,c) Rwcstombs(a,b,c)
< size_t Rmbrtowc(wchar_t *wc, const char *s);
< size_t Rwcrtomb(char *s, const wchar_t wc);
< size_t Rmbstowcs(wchar_t *wc, const char *s, size_t n);
< size_t Rwcstombs(char *s, const wchar_t *wc, size_t n);
< #endif
<
< /* used in relop.c and sort.c */
< #if defined(Win32) && defined(SUPPORT_UTF8)
< #define STRCOLL Rstrcoll
< #else
<
< #ifdef HAVE_STRCOLL
< #define STRCOLL strcoll
< #else
< #define STRCOLL strcmp
< #endif
<
< #endif
<
< /* Localization */
<
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #ifdef Win32
< #define _(String) libintl_gettext (String)
< #undef gettext /* needed for graphapp */
< #else
< #define _(String) gettext (String)
< #endif
< #define gettext_noop(String) String
< #define N_(String) gettext_noop (String)
< #else /* not NLS */
< #define _(String) (String)
< #define N_(String) String
< #endif
<
---
> char *EncodeString(SEXP, int, int, int);
950,957d874
< /* structure for caching machine accuracy values */
< typedef struct {
<     int ibeta, it, irnd, ngrd, machep, negep, iexp, minexp, maxexp;
<     double eps, epsneg, xmin, xmax;
< } AccuracyInfo;
<
< extern AccuracyInfo R_AccuracyInfo;
<


From nikko at hailmail.net  Tue Jul 19 19:32:40 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Tue, 19 Jul 2005 12:32:40 -0500
Subject: [Rd] extracting and manipulating components from nlme and gnls
 objects
In-Reply-To: <40e66e0b050719094815ff1e01@mail.gmail.com>
References: <1121789752.13362.238783805@webmail.messagingengine.com>
	<40e66e0b050719094815ff1e01@mail.gmail.com>
Message-ID: <1121794360.23735.238789095@webmail.messagingengine.com>

Hi,
Yes, I looked more carefully at the code and realized the parameters
have to be named
and then the gradient is returned so that
SSlogis(3.4,4,5,6) does not return the gradient as an attribute but
Asym<-4
xmid<-5
scal<-6
SSlogis(3.4,Asym,xmid,scal)

does.

However what I am finding more vexing is if I fit a model, say

fit<-gnls(resp~SSlogis(covar,Asym,xmid,scal), data=foo,
weights=varPower())

and I want to evaluate the arbitrary variance function at a new x, x0
then how do i get the variance function from the fit object and evaluate
it
at f(x0,..)?

So far I can predict at x0 using predict(fit, newdata=list(covar=x0)) to
get the fitted value
but how to I plug that in to the varStruct stored in fit$modelStruct?

Thanks
Nicholas
On Tue, 19 Jul 2005 11:48:18 -0500, "Douglas Bates" <dmbates at gmail.com>
said:
> On 7/19/05, Nicholas Lewin-Koh <nikko at hailmail.net> wrote:
> > Hello,
> > I am writing a set of functions to do prediction and calibration
> > intervals
> > for at least the subset of selfstarting models if not some more general
> > ones.
> > 
> > I need to be able to extract the varFunction from a fit object
> > and evaluate it at a predicted point. Are there any examples around?
> > 
> > Also in a self start model, say SSlogis, how would I get the gradient
> > at a point?
> 
> I think that the output of 
> 
> example(SSlogis)
> 
> should answer that question for you.


From simon.urbanek at r-project.org  Tue Jul 19 20:09:58 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 19 Jul 2005 14:09:58 -0400
Subject: [Rd] segfault with grid and null unit (PR#8014)
In-Reply-To: <20050719103940.DE0B3A6FD@slim.kubism.ku.dk>
References: <20050719103940.DE0B3A6FD@slim.kubism.ku.dk>
Message-ID: <7FCAAF89-0CE2-47C2-B23D-A2BBAAEA768C@r-project.org>

On Jul 19, 2005, at 6:39 AM, jp-www at dcs.gla.ac.uk wrote:

> Sourcing this code causes the R GUI to crash. I've enclosed a  
> partial backtrace
> from the crash below.

I can confirm that this crashes both on OS X (current R-devel) and  
Linux (2.1.1). The detailed stack trace (with debug symbols) from OS  
X follows.

However, I can't find any documentation on "null" units (?unit  
doesn't mention them), so I wonder whether this is just a missing  
sanity check or something more profound ...

#0  Rf_isObject (s=0x68000001) at ../../../../R-devel/src/main/util.c: 
616
#1  0x003060e4 in Rf_inherits (s=0x68000001, name=0x966ad80  
"unit.arithmetic") at ../../../../R-devel/src/main/util.c:624
#2  0x096651b8 in pureNullUnit (unit=0x68000001, index=0,  
dd=0x113eff0) at ../../../../../../R-devel/src/library/grid/src/ 
unit.c:270
#3  0x096651fc in pureNullUnit (unit=0x10ff78e8, index=2,  
dd=0x113eff0) at ../../../../../../R-devel/src/library/grid/src/ 
unit.c:273
#4  0x09662768 in findRelWidths (layout=0x108d7528,  
relativeWidths=0x11b0b4f8, dd=0x113eff0) at ../../../../../../R-devel/ 
src/library/grid/src/layout.c:70
#5  0x09663720 in calcViewportLayout (viewport=0x10bfad60,  
parentWidthCM=12.699999999999999, parentHeightCM=12.699999999999999,  
parentContext={xscalemin = 0, xscalemax = 1, yscalemin = 0, yscalemax  
= 1}, parentgc=0xbfff76f0, dd=0x113eff0) at ../../../../../../R-devel/ 
src/library/grid/src/layout.c:463
#6  0x09669888 in calcViewportTransform (vp=0x10bfad60,  
parent=0x10c6af38, incremental=3221190720, dd=0x113eff0)  
at ../../../../../../R-devel/src/library/grid/src/viewport.c:351
#7  0x0965cefc in doSetViewport (vp=0x10bfad60, topLevelVP=157724032,  
pushing=281456440, dd=0x113eff0) at ../../../../../../R-devel/src/ 
library/grid/src/grid.c:185
#8  0x0965d40c in L_setviewport (vp=0x10bfad60, hasParent=0x10d4da68)  
at ../../../../../../R-devel/src/library/grid/src/grid.c:302
#9  0x0024a0b0 in do_dotcall (call=0x119008d8, op=0x966ad80,  
args=0x18681b0, env=0x80808080) at ../../../../R-devel/src/main/ 
dotcode.c:788
#10 0x0024da14 in do_dotcallgr (call=0x119008d8, op=0x18c5794,  
args=0x11902244, env=0x11900ccc) at ../../../../R-devel/src/main/ 
dotcode.c:1468
#11 0x00264964 in Rf_eval (e=0x119008d8, rho=0x11900ccc)  
at ../../../../R-devel/src/main/eval.c:405

Cheers,
Simon


> ==============
> require(grid)
>
> sometext = "hello there\nthis is a \ntest!"
>
> pushViewport(
>         viewport(
>                 layout=grid.layout(1,3,
>                         widths=unit.c(
>                                 unit(1,"strwidth",sometext) +
>                                 unit(2,"cm"),
>                                 unit(1,"null")
>                         )
>                 )
>         )
> )
> ==============
>
> Date/Time:      2005-07-19 11:35:30.950 +0100
> OS Version:     10.4.2 (Build 8C46)
> Report Version: 3
>
> Command: R
> Path:    /Volumes/George/MyApplications/R.app/Contents/MacOS/R
> Parent:  WindowServer [146]
>
> Version: 1.12 (1622)
>
> PID:    10493
> Thread: 0
>
> Exception:  EXC_BAD_ACCESS (0x0001)
> Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x68000001
>
> Thread 0 Crashed:
> 0   libR.dylib                   0x00303d1c Rf_isObject + 0 (util.c: 
> 623)
> 1   grid.so                      0x060c6240 pureNullUnit + 40  
> (unit.c:270)
> 2   grid.so                      0x060c6284 pureNullUnit + 108  
> (unit.c:273)
> 3   grid.so                      0x060c3894 findRelWidths + 60  
> (layout.c:69)
> 4   grid.so                      0x060c484c calcViewportLayout + 172
> (layout.c:464)
> 5   grid.so                      0x060ca888 calcViewportTransform +  
> 1296
> (viewport.c:356)
> 6   grid.so                      0x060be0a0 doSetViewport + 256  
> (grid.c:200)
> 7   grid.so                      0x060be5ac L_setviewport + 76  
> (grid.c:311)
> 8   libR.dylib                   0x00249318 do_dotcall + 652  
> (dotcode.c:770)
> 9   libR.dylib                   0x0024cc7c do_dotcallgr + 80  
> (dotcode.c:1450)
> 10  libR.dylib                   0x00263b24 Rf_eval + 1536 (eval.c: 
> 405)
> 11  libR.dylib                   0x00265b1c do_set + 224 (eval.c:1309)
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>


From jgentry at jimmy.harvard.edu  Tue Jul 19 20:22:37 2005
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Tue, 19 Jul 2005 14:22:37 -0400 (EDT)
Subject: [Rd] Problem building R
Message-ID: <Pine.SOL.4.20.0507191418540.6080-100000@noah.dfci.harvard.edu>

I initially thought this only was the case for me on R-devel, but also
just tested it on the current R-patched and R-2.1.1 (so perhaps this more
belongs on R-help, but ...).

I'm having an odd error with the makefiles in src/library/XXX while
building R.  When it tries to create the 'po' directory, the Makefile
specifies:

	@if test -d $(srcdir)/inst/po; then \
	  $(MKINSTALLDIRS) $(top_builddir)/library/$(pkg)/po; \
	  cp -pr  $(srcdir)/inst/po/* $(top_builddir)/library/$(pkg)/po; \
	  find "$(top_builddir)/library/$(pkg)/po" -name .svn -type d
-prune \
	   -exec rm -rf \{\} \; 2>/dev/null; \
	fi

However, mine dies with the error:
make[3]: Entering directory
`/mnt/disk2/home/jgentry/R-devel/src/library/base'
building package 'base'
all.R is unchanged
make[3]: *** [all] Error 127
make[3]: Leaving directory
`/mnt/disk2/home/jgentry/R-devel/src/library/base'
make[2]: *** [R] Error 1

If I put an echo in between the find and the 'fi', it will no longer throw
an error and go to the next package (where it will fail as I didn't put
the echo in there, presumably I could go and put an echo in all of the
base packages and my install would work though).

Has anyone seen this?

FWIW I'm using an AMD x86_64 machine, running RHEL WS 3.2

Thanks


From p.dalgaard at biostat.ku.dk  Tue Jul 19 21:24:42 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 19 Jul 2005 21:24:42 +0200
Subject: [Rd] Problem building R
In-Reply-To: <Pine.SOL.4.20.0507191418540.6080-100000@noah.dfci.harvard.edu>
References: <Pine.SOL.4.20.0507191418540.6080-100000@noah.dfci.harvard.edu>
Message-ID: <x2br4y4n0l.fsf@turmalin.kubism.ku.dk>

Jeff Gentry <jgentry at jimmy.harvard.edu> writes:

> I initially thought this only was the case for me on R-devel, but also
> just tested it on the current R-patched and R-2.1.1 (so perhaps this more
> belongs on R-help, but ...).
> 
> I'm having an odd error with the makefiles in src/library/XXX while
> building R.  When it tries to create the 'po' directory, the Makefile
> specifies:
> 
> 	@if test -d $(srcdir)/inst/po; then \
> 	  $(MKINSTALLDIRS) $(top_builddir)/library/$(pkg)/po; \
> 	  cp -pr  $(srcdir)/inst/po/* $(top_builddir)/library/$(pkg)/po; \
> 	  find "$(top_builddir)/library/$(pkg)/po" -name .svn -type d
> -prune \
> 	   -exec rm -rf \{\} \; 2>/dev/null; \
> 	fi
> 
> However, mine dies with the error:
> make[3]: Entering directory
> `/mnt/disk2/home/jgentry/R-devel/src/library/base'
> building package 'base'
> all.R is unchanged
> make[3]: *** [all] Error 127
> make[3]: Leaving directory
> `/mnt/disk2/home/jgentry/R-devel/src/library/base'
> make[2]: *** [R] Error 1
> 
> If I put an echo in between the find and the 'fi', it will no longer throw
> an error and go to the next package (where it will fail as I didn't put
> the echo in there, presumably I could go and put an echo in all of the
> base packages and my install would work though).
> 
> Has anyone seen this?
> 
> FWIW I'm using an AMD x86_64 machine, running RHEL WS 3.2
> 
> Thanks

Hi Jeff,

Hmm, it's not happening for me on FC4/x86_64.

You seen to be building in the source directory. Could you try with a
separate builddir? 

Perhaps get rid of the @ in @if and the 2>/dev/null so we get to see a
bit more of the the error messages.

What you're seeing is consistent with an error return from find, I
think. So perhaps look at the permission in the srcdir? Just a
conjecture. 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From roebuck at odin.mdacc.tmc.edu  Tue Jul 19 22:21:10 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Tue, 19 Jul 2005 15:21:10 -0500 (CDT)
Subject: [Rd] S4 Dispatching
Message-ID: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>

Is it possible for S4 to (continue) dispatch to a class
created during dispatching? The code below doesn't work;
is this not possible or have I ommitted something?

Concept was to create a SEXP with R_AllocatePtr, give it
a class attribute, and continue dispatch. Example code
below omits multiple parameters that can be different types.
Essentially, any parameter would be converted to an
internal type "class" and the final dispatch would be
passing EXTPTRSXP objects.


library(methods)

setGeneric("onthefly",
           function(mydata) {
    cat("generic", match.call()[[1]], "\n")
    standardGeneric("onthefly")
})

setMethod("onthefly",
          signature(mydata = "character"),
          function(mydata) {
    cat(match.call()[[1]],
        "(character)\n")

    # Simulating EXTPTRSXP
    mydata <- list(name = "mydata")
    class(mydata) <- "mydata"

    callGeneric(mydata)
})

setMethod("onthefly",
          signature(mydata = "mydata"),
          function(mydata) {
    cat(match.call()[[1]],
        "(mydata)\n")

    str(mydata)
})



> version
         _
platform powerpc-apple-darwin7.9.0
arch     powerpc
os       darwin7.9.0
system   powerpc, darwin7.9.0
status
major    2
minor    1.1
year     2005
month    06
day      20
language R

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From roebuck at odin.mdacc.tmc.edu  Tue Jul 19 23:02:42 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Tue, 19 Jul 2005 16:02:42 -0500 (CDT)
Subject: [Rd] R_AllocatePtr
Message-ID: <Pine.OSF.4.58.0507191522090.84377@odin.mdacc.tmc.edu>

Had been looking into Luke Tierney's R_AllocatePtr() and
was left with a question about exactly when does R reclaim
heap memory. Implication of 'simpleref.nw' is that one can
allocate C data on the R heap, and as long as pointer object
is alive, the data and pointer will remain valid. But it
calls allocString() which is implemented using R_alloc().

'Writing R Extensions" says R will reclaim memory allocated
using R_alloc() at the end of the .Call().

Was the intent that its invocation be restricted to within
a .Call()? Doesn't sound as though it could be used to return
an SEXP from a .Call() with its data intact.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From dmbates at gmail.com  Tue Jul 19 23:13:51 2005
From: dmbates at gmail.com (Douglas Bates)
Date: Tue, 19 Jul 2005 16:13:51 -0500
Subject: [Rd] R_AllocatePtr
In-Reply-To: <Pine.OSF.4.58.0507191522090.84377@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507191522090.84377@odin.mdacc.tmc.edu>
Message-ID: <40e66e0b050719141358cce0be@mail.gmail.com>

On 7/19/05, Paul Roebuck <roebuck at odin.mdacc.tmc.edu> wrote:
> Had been looking into Luke Tierney's R_AllocatePtr() and
> was left with a question about exactly when does R reclaim
> heap memory. Implication of 'simpleref.nw' is that one can
> allocate C data on the R heap, and as long as pointer object
> is alive, the data and pointer will remain valid. But it
> calls allocString() which is implemented using R_alloc().
> 
> 'Writing R Extensions" says R will reclaim memory allocated
> using R_alloc() at the end of the .Call().
> 
> Was the intent that its invocation be restricted to within
> a .Call()? Doesn't sound as though it could be used to return
> an SEXP from a .Call() with its data intact.

Sounds like you may want an R external pointer object, which is also
documented in simpleref.nw


From tlumley at u.washington.edu  Tue Jul 19 23:18:27 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 19 Jul 2005 14:18:27 -0700 (PDT)
Subject: [Rd] R_AllocatePtr
In-Reply-To: <Pine.OSF.4.58.0507191522090.84377@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507191522090.84377@odin.mdacc.tmc.edu>
Message-ID: <Pine.A41.4.61b.0507191416250.33352@homer06.u.washington.edu>

On Tue, 19 Jul 2005, Paul Roebuck wrote:

> Had been looking into Luke Tierney's R_AllocatePtr() and
> was left with a question about exactly when does R reclaim
> heap memory. Implication of 'simpleref.nw' is that one can
> allocate C data on the R heap, and as long as pointer object
> is alive, the data and pointer will remain valid. But it
> calls allocString() which is implemented using R_alloc().

Um, no.  allocString is
SEXP allocString(int length)
{
     return allocVector(CHARSXP, length);
}

In fact the reverse is true, R_alloc is implemented using allocString.

 	-thomas


Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From jp-www at dcs.gla.ac.uk  Wed Jul 20 01:23:19 2005
From: jp-www at dcs.gla.ac.uk (jp-www@dcs.gla.ac.uk)
Date: Wed, 20 Jul 2005 01:23:19 +0200 (CEST)
Subject: [Rd] segfault with grid and null unit (PR#8014)
Message-ID: <20050719232319.1D71BA6FD@slim.kubism.ku.dk>


On 19 Jul 2005, at 23:49, paul murrell wrote:
>
> The issue is that you have specified a layout with three columns,  
> but only two
> column widths.  What should happen is that the widths should be  
> recycled, but
> this was not working for non-trivial units (as in your example).  I  
> have fixed
> this for R 2.2.0.  I have also added a mention of "null" units to ? 
> unit, plus a
> link to the existing mention in ?grid.layout

Thanks for the info, and also for the recent documentation on the  
grid package, which I have been devouring today.

I stumbled across that bug when I was copying (by hand) the "Adding  
lattice to grid" example from "grid.pdf" and mis-typed 3 instead of 2.

Jonathan


From w.northcott at unsw.edu.au  Wed Jul 20 01:25:36 2005
From: w.northcott at unsw.edu.au (Bill Northcott)
Date: Wed, 20 Jul 2005 09:25:36 +1000
Subject: [Rd] Problems in rgl on MacOS X
In-Reply-To: <mailman.5.1121767200.6361.r-devel@r-project.org>
References: <mailman.5.1121767200.6361.r-devel@r-project.org>
Message-ID: <ECD43FC0-6133-4F92-9687-BEFFBA96208B@unsw.edu.au>

I have recently been trying to build rgl on MacOS X 10.4 using  
R-2.1.1 with gcc-4.0 5026 and gfortran.

The R binary I built without problems and it includes libpng and Tcl/ 
Tk on X11.  Rcmdr works correctly.

The rgl build produces a large number of warnings like:
g++ -no-cpp-precomp -I/Library/Frameworks/R.framework/Resources/ 
include -I/System/Library/Frameworks/OpenGL.framework/Headers  -I/usr/ 
X11R6/include -DDarwin -DNO_GL_PREFIX -I/usr/X11R6/include -I/usr/ 
local/include  -Wall -pedantic -fno-exceptions -fno-rtti -fno-common   
-g -O2 -c fps.cpp -o fps.o
types.h:76: warning: 'class DestroyHandler' has virtual functions but  
non-virtual destructor
gui.h:55: warning: 'class gui::WindowImpl' has virtual functions but  
non-virtual destructor
gui.h:89: warning: 'class gui::GUIFactory' has virtual functions but  
non-virtual destructor
pixmap.h:39: warning: 'class PixmapFormat' has virtual functions but  
non-virtual destructor

More seriously it breaks in scene.cpp thus:
g++ -no-cpp-precomp -I/Library/Frameworks/R.framework/Resources/ 
include -I/System/Library/Frameworks/OpenGL.framework/Headers  -I/usr/ 
X11R6/include -DDarwin -DNO_GL_PREFIX -I/usr/X11R6/include -I/usr/ 
local/include  -Wall -pedantic -fno-exceptions -fno-rtti -fno-common   
-g -O2 -c scene.cpp -o scene.o
types.h:76: warning: 'class DestroyHandler' has virtual functions but  
non-virtual destructor
gui.h:55: warning: 'class gui::WindowImpl' has virtual functions but  
non-virtual destructor
gui.h:89: warning: 'class gui::GUIFactory' has virtual functions but  
non-virtual destructor
pixmap.h:39: warning: 'class PixmapFormat' has virtual functions but  
non-virtual destructor
scene.cpp: In member function 'void Texture::beginUse(RenderContext*)':
scene.cpp:1994: error: invalid conversion from 'int*' to 'GLint*'
make: *** [scene.o] Error 1
ERROR: compilation failed for package 'rgl'

The compilers complaint appears to be legitimate in gl.h there is:
......
typedef short GLshort;
typedef long GLint;
typedef long GLsizei;
........
extern void glGetHistogramParameteriv (GLenum target, GLenum pname,  
GLint *params);
extern void glGetIntegerv (GLenum pname, GLint *params);
extern void glGetLightfv (GLenum light, GLenum pname, GLfloat *params);
.............

and in scene.cpp the relevant lines read:
..........
     unsigned int maxSize;
     glGetIntegerv(GL_MAX_TEXTURE_SIZE, (int*) &maxSize);
.......
which seems to give the compiler due cause to barf given the header.

I got it to build by changing the code to:
     GLint maxSize;
     glGetIntegerv(GL_MAX_TEXTURE_SIZE, (GLint*) &maxSize);
but this generates warnings about signed and unsigned further down  
scene.cpp.  The resulting code works but  it is clearly not right.

I can't find an email address for the maintainer and his web site  
seems to be off the air just now.

Bill Northcott


From ripley at stats.ox.ac.uk  Wed Jul 20 08:51:57 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Jul 2005 07:51:57 +0100 (BST)
Subject: [Rd] Regexp update in R-devel
Message-ID: <Pine.LNX.4.61.0507191538070.11527@gannet.stats>

Following the report of Henrik Bengtsson which was traced by Duncan 
Murdoch to a bug in the regexp code from glibc-2.3.3 in R, I have updated 
the code in R-devel to -2.3.5.  This had that bug fixed and about 700 
other changes, most of which seem to be bug fixes.

My tests on Linux (including of all CRAN packages) have detected no 
differences (but then I was not able to reproduce Henrik's problem on 
Linux, only on Windows).  If anyone finds a difference that they think is 
not a bug fix please let me know.

There are also quite a few new optimizations, especially in UTF-8 locales.

It seems somewhat clear that the codes available for multi-byte character 
set regexps are not yet mature.  You might want to remember that if you 
use a GNU/Linux system which is not bang up-to-date (many are older than 
even glinc-2.3.3).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sampo.etelavuori at helsinki.fi  Wed Jul 20 08:54:42 2005
From: sampo.etelavuori at helsinki.fi (sampo.etelavuori@helsinki.fi)
Date: Wed, 20 Jul 2005 08:54:42 +0200 (CEST)
Subject: [Rd] WinXP GUI problem (PR#8018)
Message-ID: <20050720065442.0948CA2C6@slim.kubism.ku.dk>

Full_Name: Sampo Etelavuori
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (130.188.8.10)


After exporting for example jpeg files using the GUI the GUI gives me a default
option of saving even ordinary scripts in jpeg-format and doesn't let me change
the format at least easily.

I have also some strange stability issues on my laptop but I have no idea what's
behind them.


From ripley at stats.ox.ac.uk  Wed Jul 20 09:00:49 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Jul 2005 09:00:49 +0200 (CEST)
Subject: [Rd] (PR#8017) build of REventLoop package crashes with 2.1 due
Message-ID: <20050720070049.2504BA286@slim.kubism.ku.dk>

In what way is this a bug in R?   It looks like a bug in the package, and 
as Defn.h is not part of R's API any packge using it is `at risk' (and 
cannot be installed in a binary-only installation, or even an installed 
version of R).

In particular, Defn,.h depends on config.h, and it seems you installed a 
binary version of R and used separate sources.   I would suggest building 
R from the sources, and then seeing if you can install your package into 
the build tree.

mbstate_t will be defined in wchar.h, and if configure is working 
correctly that will be included by Defn.h.  (And we have heard no reports 
to the contrary.)

On Tue, 19 Jul 2005 boycer at u.washington.edu wrote:

> Full_Name: Richard Boyce
> Version: 2.1.-1
> OS: Debian testing/unstable
> Submission from: (NULL) (128.95.123.29)
>
>
> While building a custom package using a modified version of Duncan's 
> REventLoop with R version 2.1 (Debian package r-base, r-base-dev) and R 
> source from apt-get source 2.1.1 I get the following error:
>
> $ R CMD build vjREventLoop
> * checking for file 'vjREventLoop/DESCRIPTION' ... OK
> * preparing 'vjREventLoop':
> * cleaning src
> * checking whether 'INDEX' is up-to-date ... NO
> * use '--force' to overwrite the existing 'INDEX'
> * removing junk files
> * building 'vjREventLoop_0.2.tar.gz'
>
> $ su
> # R CMD INSTALL vjREventLoop_0.2.tar.gz
> gcc -I/usr/lib/R/include    -I/usr/src/r-base-2.1.1/src/include -fPIC  -g -O2
> -c Reventloop.c -o Reventloop.o
> In file included from /usr/src/r-base-2.1.1/src/include/IOStuff.h:30,
>                 from Reventloop.c:8:
> /usr/src/r-base-2.1.1/src/include/Defn.h:886: error: syntax error before
> "mbstate_t"
> Reventloop.c: In function `R_mainLoop':
> Reventloop.c:112: warning: assignment from incompatible pointer type
> Reventloop.c:156: warning: assignment from incompatible pointer type
> make: *** [Reventloop.o] Error 1
> ERROR: compilation failed for package 'vjREventLoop'
> ** Removing '/usr/local/lib/R/site-library/vjREventLoop'
> ** Restoring previous '/usr/local/lib/R/site-library/vjREventLoop'
>
> *Build works correctly with R-2.0.0 installed from source* with
> $ ./configure --prefix=/usr/local --enable-R-shlib
> $ make
> $ su
> # make install
>
> Inspection of Defn.h does not identify syntax error but I am not familiar with
> all the details. Diff (probably not useful):
> $ diff /usr/src/r-base-2.1.1/src/include/Defn.h
> /opt/Downloads/r-cran/R-2.0.0/src/include/Defn.h
>
> 4c4
> <  *  Copyright (C) 1998--2005  The R Development Core Team.
> ---
>>  *  Copyright (C) 1998--2004  The R Development Core Team.
> 472c472
> < LibExtern char*       R_Home;             /* Root of the R tree */
> ---
>> extern char*  R_Home;             /* Root of the R tree */
> 499c499
> < extern int    R_Expressions   INI_as(5000);   /* options(expressions) */
> ---
>> extern int    R_Expressions   INI_as(500);    /* options(expressions) */
> 514,515c514
> < LibExtern char*       R_TempDir       INI_as(NULL);   /* Name of per-session
> dir */
> < extern char   R_StdinEnc[31]  INI_as("");     /* Encoding assumed for stdin
> */
> ---
>> extern char*  R_TempDir       INI_as(NULL);   /* Name of per-session dir */
> 530d528
> < extern void   R_setupHistory();
> 541,542c539
> < LibExtern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
> < LibExtern Rboolean mbcslocale  INI_as(FALSE);  /* is this a MBCS locale? */
> ---
>> extern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
> 596a594
>> # define duplicated           Rf_duplicated
> 633c631
> < # define Mbrtowc              Rf_mbrtowc
> ---
>> # define match                        Rf_match
> 686a685
>> int   R_ShowFile(char*, char*);
> 799,800c798
> < SEXP R_data_class(SEXP , Rboolean);
> < SEXP R_data_class2(SEXP);
> ---
>> SEXP R_data_class(SEXP , int);
> 864,869d861
> < typedef enum {
> <     Rprt_adj_left = 0,
> <     Rprt_adj_right = 1,
> <     Rprt_adj_centre = 2
> < } Rprt_adj;
> <
> 872,939c864
> < char *EncodeString(SEXP, int, int, Rprt_adj);
> <
> <
> < #if defined(HAVE_WCHAR_H) && defined(SUPPORT_MBCS)
> < #include <wchar.h>
> < #endif
> <
> < /* main/util.c */
> < void UNIMPLEMENTED_TYPE(char *s, SEXP x);
> < void UNIMPLEMENTED_TYPEt(char *s, SEXPTYPE t);
> < Rboolean utf8strIsASCII(char *str);
> < #ifdef SUPPORT_MBCS
> < int utf8clen(char c);
> < #define mbs_init(x) memset(x, 0, sizeof(mbstate_t))
> < size_t Mbrtowc(wchar_t *wc, const char *s, size_t n, mbstate_t *ps);
> < void mbcsToLatin1(char *in, char *out);
> < Rboolean mbcsValid(char *str);
> < char *Rf_strchr(const char *s, int c);
> < char *Rf_strrchr(const char *s, int c);
> < #else
> < #define Rf_strchr(s, c) strchr(s, c)
> < #define Rf_strrchr(s, c) strrchr(s, c)
> < #endif
> < #ifdef Win32
> < void R_fixslash(char *s);
> < void R_fixbackslash(char *s);
> < #endif
> < #if defined(Win32) && defined(SUPPORT_UTF8)
> < #define mbrtowc(a,b,c,d) Rmbrtowc(a,b)
> < #define wcrtomb(a,b,c) Rwcrtomb(a,b)
> < #define mbstowcs(a,b,c) Rmbstowcs(a,b,c)
> < #define wcstombs(a,b,c) Rwcstombs(a,b,c)
> < size_t Rmbrtowc(wchar_t *wc, const char *s);
> < size_t Rwcrtomb(char *s, const wchar_t wc);
> < size_t Rmbstowcs(wchar_t *wc, const char *s, size_t n);
> < size_t Rwcstombs(char *s, const wchar_t *wc, size_t n);
> < #endif
> <
> < /* used in relop.c and sort.c */
> < #if defined(Win32) && defined(SUPPORT_UTF8)
> < #define STRCOLL Rstrcoll
> < #else
> <
> < #ifdef HAVE_STRCOLL
> < #define STRCOLL strcoll
> < #else
> < #define STRCOLL strcmp
> < #endif
> <
> < #endif
> <
> < /* Localization */
> <
> < #ifdef ENABLE_NLS
> < #include <libintl.h>
> < #ifdef Win32
> < #define _(String) libintl_gettext (String)
> < #undef gettext /* needed for graphapp */
> < #else
> < #define _(String) gettext (String)
> < #endif
> < #define gettext_noop(String) String
> < #define N_(String) gettext_noop (String)
> < #else /* not NLS */
> < #define _(String) (String)
> < #define N_(String) String
> < #endif
> <
> ---
>> char *EncodeString(SEXP, int, int, int);
> 950,957d874
> < /* structure for caching machine accuracy values */
> < typedef struct {
> <     int ibeta, it, irnd, ngrd, machep, negep, iexp, minexp, maxexp;
> <     double eps, epsneg, xmin, xmax;
> < } AccuracyInfo;
> <
> < extern AccuracyInfo R_AccuracyInfo;
> <
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Jul 20 09:53:45 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 20 Jul 2005 09:53:45 +0200 (CEST)
Subject: [Rd] (PR#8017) build of REventLoop package crashes with 2.1 due
Message-ID: <20050720075345.A9B58A271@slim.kubism.ku.dk>

Looking at the REventLoop_0.2-3 sources, the problem _is_ in the package. 
It include IOStuff.h (which includes Defn.h) without including config.h, 
which should always be included before R's internal headers. The package 
tries to get around this by defining some entries from config.h, but not 
enough for current R versions.  It seems to work if you add -DHAVE_WCHAR_H 
to the defines.  (I did not spot how SUPPORT_MBCS got defined, but it 
seems it is.)

Incidentally, I was unable to get the package to build unless R was built 
in its source dir, and there is a mismatch between the version of the tar 
file (0.2-3) and declared in the DESCRIPTION and hence in the PACKAGES 
file (0.2).

What Duncan is trying to do here is extremely tricky, so please do not 
file bug reports against R when such things do not work for you: they are 
not deficiencies in R.

On Wed, 20 Jul 2005 ripley at stats.ox.ac.uk wrote:

> In what way is this a bug in R?   It looks like a bug in the package, and
> as Defn.h is not part of R's API any packge using it is `at risk' (and
> cannot be installed in a binary-only installation, or even an installed
> version of R).
>
> In particular, Defn,.h depends on config.h, and it seems you installed a
> binary version of R and used separate sources.   I would suggest building
> R from the sources, and then seeing if you can install your package into
> the build tree.
>
> mbstate_t will be defined in wchar.h, and if configure is working
> correctly that will be included by Defn.h.  (And we have heard no reports
> to the contrary.)
>
> On Tue, 19 Jul 2005 boycer at u.washington.edu wrote:
>
>> Full_Name: Richard Boyce
>> Version: 2.1.-1
>> OS: Debian testing/unstable
>> Submission from: (NULL) (128.95.123.29)
>>
>>
>> While building a custom package using a modified version of Duncan's
>> REventLoop with R version 2.1 (Debian package r-base, r-base-dev) and R
>> source from apt-get source 2.1.1 I get the following error:
>>
>> $ R CMD build vjREventLoop
>> * checking for file 'vjREventLoop/DESCRIPTION' ... OK
>> * preparing 'vjREventLoop':
>> * cleaning src
>> * checking whether 'INDEX' is up-to-date ... NO
>> * use '--force' to overwrite the existing 'INDEX'
>> * removing junk files
>> * building 'vjREventLoop_0.2.tar.gz'
>>
>> $ su
>> # R CMD INSTALL vjREventLoop_0.2.tar.gz
>> gcc -I/usr/lib/R/include    -I/usr/src/r-base-2.1.1/src/include -fPIC  -g -O2
>> -c Reventloop.c -o Reventloop.o
>> In file included from /usr/src/r-base-2.1.1/src/include/IOStuff.h:30,
>>                 from Reventloop.c:8:
>> /usr/src/r-base-2.1.1/src/include/Defn.h:886: error: syntax error before
>> "mbstate_t"
>> Reventloop.c: In function `R_mainLoop':
>> Reventloop.c:112: warning: assignment from incompatible pointer type
>> Reventloop.c:156: warning: assignment from incompatible pointer type
>> make: *** [Reventloop.o] Error 1
>> ERROR: compilation failed for package 'vjREventLoop'
>> ** Removing '/usr/local/lib/R/site-library/vjREventLoop'
>> ** Restoring previous '/usr/local/lib/R/site-library/vjREventLoop'
>>
>> *Build works correctly with R-2.0.0 installed from source* with
>> $ ./configure --prefix=/usr/local --enable-R-shlib
>> $ make
>> $ su
>> # make install
>>
>> Inspection of Defn.h does not identify syntax error but I am not familiar with
>> all the details. Diff (probably not useful):
>> $ diff /usr/src/r-base-2.1.1/src/include/Defn.h
>> /opt/Downloads/r-cran/R-2.0.0/src/include/Defn.h
>>
>> 4c4
>> <  *  Copyright (C) 1998--2005  The R Development Core Team.
>> ---
>>>  *  Copyright (C) 1998--2004  The R Development Core Team.
>> 472c472
>> < LibExtern char*       R_Home;             /* Root of the R tree */
>> ---
>>> extern char*  R_Home;             /* Root of the R tree */
>> 499c499
>> < extern int    R_Expressions   INI_as(5000);   /* options(expressions) */
>> ---
>>> extern int    R_Expressions   INI_as(500);    /* options(expressions) */
>> 514,515c514
>> < LibExtern char*       R_TempDir       INI_as(NULL);   /* Name of per-session
>> dir */
>> < extern char   R_StdinEnc[31]  INI_as("");     /* Encoding assumed for stdin
>> */
>> ---
>>> extern char*  R_TempDir       INI_as(NULL);   /* Name of per-session dir */
>> 530d528
>> < extern void   R_setupHistory();
>> 541,542c539
>> < LibExtern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
>> < LibExtern Rboolean mbcslocale  INI_as(FALSE);  /* is this a MBCS locale? */
>> ---
>>> extern Rboolean utf8locale  INI_as(FALSE);  /* is this a UTF-8 locale? */
>> 596a594
>>> # define duplicated           Rf_duplicated
>> 633c631
>> < # define Mbrtowc              Rf_mbrtowc
>> ---
>>> # define match                        Rf_match
>> 686a685
>>> int   R_ShowFile(char*, char*);
>> 799,800c798
>> < SEXP R_data_class(SEXP , Rboolean);
>> < SEXP R_data_class2(SEXP);
>> ---
>>> SEXP R_data_class(SEXP , int);
>> 864,869d861
>> < typedef enum {
>> <     Rprt_adj_left = 0,
>> <     Rprt_adj_right = 1,
>> <     Rprt_adj_centre = 2
>> < } Rprt_adj;
>> <
>> 872,939c864
>> < char *EncodeString(SEXP, int, int, Rprt_adj);
>> <
>> <
>> < #if defined(HAVE_WCHAR_H) && defined(SUPPORT_MBCS)
>> < #include <wchar.h>
>> < #endif
>> <
>> < /* main/util.c */
>> < void UNIMPLEMENTED_TYPE(char *s, SEXP x);
>> < void UNIMPLEMENTED_TYPEt(char *s, SEXPTYPE t);
>> < Rboolean utf8strIsASCII(char *str);
>> < #ifdef SUPPORT_MBCS
>> < int utf8clen(char c);
>> < #define mbs_init(x) memset(x, 0, sizeof(mbstate_t))
>> < size_t Mbrtowc(wchar_t *wc, const char *s, size_t n, mbstate_t *ps);
>> < void mbcsToLatin1(char *in, char *out);
>> < Rboolean mbcsValid(char *str);
>> < char *Rf_strchr(const char *s, int c);
>> < char *Rf_strrchr(const char *s, int c);
>> < #else
>> < #define Rf_strchr(s, c) strchr(s, c)
>> < #define Rf_strrchr(s, c) strrchr(s, c)
>> < #endif
>> < #ifdef Win32
>> < void R_fixslash(char *s);
>> < void R_fixbackslash(char *s);
>> < #endif
>> < #if defined(Win32) && defined(SUPPORT_UTF8)
>> < #define mbrtowc(a,b,c,d) Rmbrtowc(a,b)
>> < #define wcrtomb(a,b,c) Rwcrtomb(a,b)
>> < #define mbstowcs(a,b,c) Rmbstowcs(a,b,c)
>> < #define wcstombs(a,b,c) Rwcstombs(a,b,c)
>> < size_t Rmbrtowc(wchar_t *wc, const char *s);
>> < size_t Rwcrtomb(char *s, const wchar_t wc);
>> < size_t Rmbstowcs(wchar_t *wc, const char *s, size_t n);
>> < size_t Rwcstombs(char *s, const wchar_t *wc, size_t n);
>> < #endif
>> <
>> < /* used in relop.c and sort.c */
>> < #if defined(Win32) && defined(SUPPORT_UTF8)
>> < #define STRCOLL Rstrcoll
>> < #else
>> <
>> < #ifdef HAVE_STRCOLL
>> < #define STRCOLL strcoll
>> < #else
>> < #define STRCOLL strcmp
>> < #endif
>> <
>> < #endif
>> <
>> < /* Localization */
>> <
>> < #ifdef ENABLE_NLS
>> < #include <libintl.h>
>> < #ifdef Win32
>> < #define _(String) libintl_gettext (String)
>> < #undef gettext /* needed for graphapp */
>> < #else
>> < #define _(String) gettext (String)
>> < #endif
>> < #define gettext_noop(String) String
>> < #define N_(String) gettext_noop (String)
>> < #else /* not NLS */
>> < #define _(String) (String)
>> < #define N_(String) String
>> < #endif
>> <
>> ---
>>> char *EncodeString(SEXP, int, int, int);
>> 950,957d874
>> < /* structure for caching machine accuracy values */
>> < typedef struct {
>> <     int ibeta, it, irnd, ngrd, machep, negep, iexp, minexp, maxexp;
>> <     double eps, epsneg, xmin, xmax;
>> < } AccuracyInfo;
>> <
>> < extern AccuracyInfo R_AccuracyInfo;
>> <
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.uni-dortmund.de  Wed Jul 20 14:28:28 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 20 Jul 2005 14:28:28 +0200 (CEST)
Subject: [Rd] WinXP GUI problem (PR#8018)
Message-ID: <20050720122828.3CDE411378@slim.kubism.ku.dk>

sampo.etelavuori at helsinki.fi wrote:

> Full_Name: Sampo Etelavuori
> Version: 2.1.1
> OS: Windows XP
> Submission from: (NULL) (130.188.8.10)
> 
> 
> After exporting for example jpeg files using the GUI the GUI gives me a default
> option of saving even ordinary scripts in jpeg-format and doesn't let me change
> the format at least easily.
> 
> I have also some strange stability issues on my laptop but I have no idea what's
> behind them.

Can you give a reproducible example, please?

In particular tell us:

- MDI or DSI mode?
- code before clicking stuff
- What menu items have you clicked on exactly?

Uwe Ligges


> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From bgunter at gene.com  Wed Jul 20 17:25:22 2005
From: bgunter at gene.com (bgunter@gene.com)
Date: Wed, 20 Jul 2005 17:25:22 +0200 (CEST)
Subject: [Rd] Default arguments for setMethod() (PR#8021)
Message-ID: <20050720152522.1DD4DC97C@slim.kubism.ku.dk>

Full_Name: Bert Gunter
Version: 2.1.1
OS: Windows 2000
Submission from: (NULL) (192.12.78.250)


There appears to be either a bug or documentation problem in
setMethod/setGeneric with how default arguments are handled. The setMethod Help
says:
******
Method definitions can have default expressions for arguments. If those
arguments are then missing in the call to the generic function, the default
expression in the method is used. If the method definition has no default for
the argument, then the expression (if any) supplied in the definition of the
generic function itself is used.
******
However:

> setGeneric('foo',function(x,y)standardGeneric('foo'))
[1] "foo"
> setMethod('foo','numeric',function(x,y=3)x+y)
[1] "foo"
> foo(10)
Error in foo(10) : argument "y" is missing, with no default

#### BUT adding a NULL default argument in the standardGeneric fixes this:

> setGeneric('foo',function(x,y=NULL)standardGeneric('foo'))
[1] "foo"
> setMethod('foo','numeric',function(x,y=3)x+y)
[1] "foo"
> foo(10)
[1] 13

Cheers,
Bert Gunter


From ligges at statistik.uni-dortmund.de  Wed Jul 20 18:12:17 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 20 Jul 2005 18:12:17 +0200 (CEST)
Subject: [Rd] WinXP GUI problem (PR#8018)
Message-ID: <20050720161217.2871DC97C@slim.kubism.ku.dk>

Sampo Etelavuori wrote:

> Lainaus Uwe Ligges <ligges at statistik.uni-dortmund.de>:
> 
> 
>>sampo.etelavuori at helsinki.fi wrote:
>>
>>
>>>Full_Name: Sampo Etelavuori
>>>Version: 2.1.1
>>>OS: Windows XP
>>>Submission from: (NULL) (130.188.8.10)
>>>
>>>
>>>After exporting for example jpeg files using the GUI the GUI gives me a
>>
>>default
>>
>>>option of saving even ordinary scripts in jpeg-format and doesn't let
>>
>>me change
>>
>>>the format at least easily.
>>>
>>>I have also some strange stability issues on my laptop but I have no
>>
>>idea what's
>>
>>>behind them.
>>
>>Can you give a reproducible example, please?
>>
>>In particular tell us:
>>
>>- MDI or DSI mode?
> 
> 
> The default mode. Not sure which one it is.


It is MDI.


> 
>>- code before clicking stuff
> 
> 
> It happens even after just using the command "plot(1:10)" after starting 
> the program. I didn't notice the bug while still using v. 2.1.0.
> 
> 
>>- What menu items have you clicked on exactly?
> 
> 
> After I have the active plot, clicking File-Save As-Jpeg-100% quality and
> then creating a new script and then trying to save it.
> 
> But I might add that only the extension is wrong (.jpeg instead of .R) not 
> the actual format.

Confirmed for R-2.1.1, WinNT4.0SP6.

Uwe Ligges


From ripley at stats.ox.ac.uk  Wed Jul 20 18:26:55 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Jul 2005 17:26:55 +0100 (BST)
Subject: [Rd] WinXP GUI problem (PR#8018)
In-Reply-To: <20050720161217.2871DC97C@slim.kubism.ku.dk>
References: <20050720161217.2871DC97C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0507201724440.28525@gannet.stats>

Yes, the author of that part of the editor code forgot a call to
setuserfilter, although he has one for opening scripts.

I am about to add one.


On Wed, 20 Jul 2005 ligges at statistik.uni-dortmund.de wrote:

> Sampo Etelavuori wrote:
>
>> Lainaus Uwe Ligges <ligges at statistik.uni-dortmund.de>:
>>
>>
>>> sampo.etelavuori at helsinki.fi wrote:
>>>
>>>
>>>> Full_Name: Sampo Etelavuori
>>>> Version: 2.1.1
>>>> OS: Windows XP
>>>> Submission from: (NULL) (130.188.8.10)
>>>>
>>>>
>>>> After exporting for example jpeg files using the GUI the GUI gives me a
>>>
>>> default
>>>
>>>> option of saving even ordinary scripts in jpeg-format and doesn't let
>>>
>>> me change
>>>
>>>> the format at least easily.
>>>>
>>>> I have also some strange stability issues on my laptop but I have no
>>>
>>> idea what's
>>>
>>>> behind them.
>>>
>>> Can you give a reproducible example, please?
>>>
>>> In particular tell us:
>>>
>>> - MDI or DSI mode?
>>
>>
>> The default mode. Not sure which one it is.
>
>
> It is MDI.
>
>
>>
>>> - code before clicking stuff
>>
>>
>> It happens even after just using the command "plot(1:10)" after starting
>> the program. I didn't notice the bug while still using v. 2.1.0.
>>
>>
>>> - What menu items have you clicked on exactly?
>>
>>
>> After I have the active plot, clicking File-Save As-Jpeg-100% quality and
>> then creating a new script and then trying to save it.
>>
>> But I might add that only the extension is wrong (.jpeg instead of .R) not
>> the actual format.
>
> Confirmed for R-2.1.1, WinNT4.0SP6.
>
> Uwe Ligges
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jfox at mcmaster.ca  Wed Jul 20 21:55:37 2005
From: jfox at mcmaster.ca (John Fox)
Date: Wed, 20 Jul 2005 15:55:37 -0400
Subject: [Rd] Internationalization of the Rcmdr package
Message-ID: <20050720195528.SPKF21470.tomts22-srv.bellnexxia.net@JohnDesktop8300>

Dear r-devel list members,

I've prepared a version of the Rcmdr package that uses the new tools for
internationalization and localization in R 2.1.x. For the present, this is
the development version of the Rcmdr package (1.1-0), available at
<http://socserv.socsci.mcmaster.ca/jfox/Misc/Rcmdr/index.html>. There is
currently a French translation provided with the package, courtesy of
Philippe Grosjean. 

As far as I can tell so far, translations appear to work well, though the
tests have been limited since French uses the same character set as English.
Please let me know if you'd like to provide a translation into another
language. I'm especially interested in a language or languages that use
different character sets.

One problem that I've encountered is that the text for buttons (e.g.,
"Open", "Cancel", "Yes", "No") in the standard Tk dialogs (e.g.,
tk_getOpenFile and tk_messageBox via tkgetOpenFile() and tkmessageBox() in
the tcltk package) is not translated, at least under Windows XP, where I've
tested. I've seen translated buttons in Tk dialogs under Linux, so perhaps
this is a Windows-specific problem.

Regards,
 John

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario
Canada L8S 4M4
905-525-9140x23604
http://socserv.mcmaster.ca/jfox


From jmc at R-project.org  Wed Jul 20 23:09:04 2005
From: jmc at R-project.org (John Chambers)
Date: Wed, 20 Jul 2005 17:09:04 -0400
Subject: [Rd] S4 Dispatching
In-Reply-To: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
Message-ID: <42DEBD70.3020009@R-project.org>

Paul Roebuck wrote:
> Is it possible for S4 to (continue) dispatch to a class
> created during dispatching? The code below doesn't work;
> is this not possible or have I ommitted something?

"doesn't work"?  This is not helpful.  Please show what you got and what 
you expected.  The result below is what I would expect (& get) from your 
code.

R> onthefly("testing")
generic onthefly
onthefly (character)
generic onthefly
onthefly (mydata)
List of 1
  $ name: chr "mydata"
  - attr(*, "class")= chr "mydata"

Since you used an undefined class "mydata" you can't expect very much 
else to work with these objects.  You did not in fact "create" the 
class, you just assigned a class attribute to an object corresponding to 
an undefined class.  There is a warning message to that effect from the 
second setMethod() call.


> 
> Concept was to create a SEXP with R_AllocatePtr, give it
> a class attribute, and continue dispatch. Example code
> below omits multiple parameters that can be different types.
> Essentially, any parameter would be converted to an
> internal type "class" and the final dispatch would be
> passing EXTPTRSXP objects.
> 
> 
> library(methods)
> 
> setGeneric("onthefly",
>            function(mydata) {
>     cat("generic", match.call()[[1]], "\n")
>     standardGeneric("onthefly")
> })
> 
> setMethod("onthefly",
>           signature(mydata = "character"),
>           function(mydata) {
>     cat(match.call()[[1]],
>         "(character)\n")
> 
>     # Simulating EXTPTRSXP
>     mydata <- list(name = "mydata")
>     class(mydata) <- "mydata"
> 
>     callGeneric(mydata)
> })
> 
> setMethod("onthefly",
>           signature(mydata = "mydata"),
>           function(mydata) {
>     cat(match.call()[[1]],
>         "(mydata)\n")
> 
>     str(mydata)
> })
> 
> 
> 
> 
>>version
> 
>          _
> platform powerpc-apple-darwin7.9.0
> arch     powerpc
> os       darwin7.9.0
> system   powerpc, darwin7.9.0
> status
> major    2
> minor    1.1
> year     2005
> month    06
> day      20
> language R
> 
> ----------------------------------------------------------
> SIGSIG -- signature too long (core dumped)
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jmc at R-project.org  Wed Jul 20 23:41:18 2005
From: jmc at R-project.org (John Chambers)
Date: Wed, 20 Jul 2005 17:41:18 -0400
Subject: [Rd] Default arguments for setMethod() (PR#8021)
In-Reply-To: <20050720152522.1DD4DC97C@slim.kubism.ku.dk>
References: <20050720152522.1DD4DC97C@slim.kubism.ku.dk>
Message-ID: <42DEC4FE.7040709@R-project.org>

Quite right.  There is code in the evaluator that copies default values 
from the method into the promise for a missing argument, when the method 
is being evalutated.

The catch seems to be that there is no promise unless SOME default was 
included for the argument in the generic.

So either we need to adjust the generic accordingly, perhaps when the 
setMethod() with a default is done (this could be tricky with multiple 
packages having methods for the same generic), or else admit the 
ugliness in the documentation.

Thanks.

bgunter at gene.com wrote:

> Full_Name: Bert Gunter
> Version: 2.1.1
> OS: Windows 2000
> Submission from: (NULL) (192.12.78.250)
> 
> 
> There appears to be either a bug or documentation problem in
> setMethod/setGeneric with how default arguments are handled. The setMethod Help
> says:
> ******
> Method definitions can have default expressions for arguments. If those
> arguments are then missing in the call to the generic function, the default
> expression in the method is used. If the method definition has no default for
> the argument, then the expression (if any) supplied in the definition of the
> generic function itself is used.
> ******
> However:
> 
> 
>>setGeneric('foo',function(x,y)standardGeneric('foo'))
> 
> [1] "foo"
> 
>>setMethod('foo','numeric',function(x,y=3)x+y)
> 
> [1] "foo"
> 
>>foo(10)
> 
> Error in foo(10) : argument "y" is missing, with no default
> 
> #### BUT adding a NULL default argument in the standardGeneric fixes this:
> 
> 
>>setGeneric('foo',function(x,y=NULL)standardGeneric('foo'))
> 
> [1] "foo"
> 
>>setMethod('foo','numeric',function(x,y=3)x+y)
> 
> [1] "foo"
> 
>>foo(10)
> 
> [1] 13
> 
> Cheers,
> Bert Gunter
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From simon.urbanek at r-project.org  Thu Jul 21 05:41:56 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 20 Jul 2005 23:41:56 -0400
Subject: [Rd] mac os x crashes with bioconductor microarray code
	(PR#8013)
In-Reply-To: <20050719043438.A2510A22C@slim.kubism.ku.dk>
References: <20050719043438.A2510A22C@slim.kubism.ku.dk>
Message-ID: <8EBD0AED-7CB7-4094-9662-93F755810C0E@r-project.org>

On Jul 19, 2005, at 12:34 AM, cireeric at alumni.rice.edu wrote:

> R(1763) malloc: *** vm_allocate(size=346857472) failed (error code=3)
> R(1763) malloc: *** error: can't allocate region

As the error says, you're obviously running out of contiguous wired  
memory (RAM).

> Any ideas? My computer has 2gb of RAM and 100 gb free. I would  
> think that analyzing 42 microarrays would not be too difficult.

You didn't tell us anything about the size of the data - and it seems  
to be of considerable size, because it fails on allocating ca. 350MB  
bytes at once. Whether what you do is difficult or not, that I don't  
know, but obviously you don't have enough memory for what you're  
trying to do. Basically that means you should reconsider your  
approach. Once you provide more information you may want to ask  
Bioconductor users about this issue, but it's definitely not a bug in R.

Cheers,
Simon


From muzenda80 at yahoo.co.uk  Thu Jul 21 10:00:37 2005
From: muzenda80 at yahoo.co.uk (muzenda80@yahoo.co.uk)
Date: Thu, 21 Jul 2005 10:00:37 +0200 (CEST)
Subject: [Rd] =?iso-8859-1?q?Gesch=E4ftliches_Angebot_=28PR=238026=29?=
Message-ID: <20050721080037.56B608E87@slim.kubism.ku.dk>


This is a multi-part message in MIME format
--1bd8977e-fcc9-41cb-b7ef-8eea998ee25f
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Gesch=E4ftliches Angebot

Sie m=F6gen =FCberrascht sein, diesen Brief von mir zu erhalten, da Sie
mich nicht pers=F6nlich kennen. Der Grund meiner Vorstellung ist, dass
ich Simon
Muzenda der =E4lteste Sohn von Paul Muzenda bin , einem Farmer in
Simbabwe, der k=FCrzlich im Landstreit in meinem Land ermordet wurde.
Ich bekam den Kontakt zu Ihnen =FCber das Internet, daher beschloss ich
Ihnen zu schreiben.
Vor dem Tod meines Vaters hatte er mich mit nach Johannesburg genommen,  
um 20,5 Millionen US-$ in einer privaten Sicherheitsfirma zu hinterlegen,  da =
er
die lauernde Gefahr in Simbabwe voraussah, legte er sein Geld in Form  
von Edelsteinen an. Die Summe war gedacht zum Erwerb neuer Maschinen und
Chemikalien f=FCr die Farmen und zur Etablierung einer neuen Farm in
Swaziland.
Die Landprobleme begannen, als unser Pr=E4sident Robert Mugabe eine
Landreform einf=FChrte, die sich vorwiegend auf wei=DFe reiche Farmer und
einige wenige schwarze Farmer auswirkte und in der Ermordung und  
=DCberf=E4llen durch Kriegsveteranen und einige andere Geistesgest=F6rte =
gipfelte.
Tats=E4chlich wurden eine Menge Menschen ermordet, eines der Opfer war
mein Vater.
Wegen dieses Hintergrundes floh ich mit meiner Familie aus Simbabwe, um
unsre Leben zu retten und lebe vor=FCbergehend in den London wo 
wir um politisches Asyl ersuchen und beschlossen haben, das Geld meines =
Vaters   zu
transferieren auf ein besser erreichbares ausl=E4ndisches Konto, da die
Gesetze der British einem Fl=FCchtling verbieten ein Konto zu 
er=F6ffnen oder in irgendwelche finanziellen Transaktionen innerhalb der 
United Kindom involviert zu sein.
Als dem =E4ltesten Sohn meines Vaters bin ich verantwortlich f=FCr die   =
Suche
nach einem geeigneten ausl=E4ndischen Konto, wohin wir unser Geld ohne
Wissen meiner Regierung, die uns alles nehmen will was wir besitzen,
transferieren  k=F6nnen.
Die s=FCdafrikanische Regierung scheint gemeinsame Sache mit ihnen zu
machen. Ich bin konfrontiert mit dem Dilemma, diesen Geldbetrag aus S=FC=
dafrika  
zu holen in der Angst, die gleichen Erfahrungen noch einmal zu machen,
beide L=E4nder haben die gleiche politische Geschichte.
Als Gesch=E4ftsmann suche ich einen Partner, dem ich meine Zukunft
anvertrauen kann und die meiner Familie.
Ich muss Ihnen noch mitteilen, dass diese Transaktion risikolos ist.  
Wenn Sie mir und meiner Familie beistehen wollen, m=F6chte ich von Ihnen nur, =
 
dass Sie ein Arrangement mit der Sicherheitsfirma machen f=FCr die =DCbergabe =
 
(der Fonds) von deren Tochtergesellschaft in London da ich  
bereits die Anweisung f=FCr die =DCberf=FChrung in  London aus S=FCdafrika
gegeben habe.
Vorher m=FCssen die Modalit=E4ten zum Wechsel des Besitzes der Anlagen und   =
noch
wichtiger des Geldes, das ich zu investieren gedachte, stattgefunden
haben. Ich habe zwei Optionen f=FCr Sie, erstens k=F6nnen Sie w=E4hlen, einen =
 
bestimmten Prozentsatz des Geldes f=FCr die Nutzung Ihres Kontos f=FCr die =
Transaktion  
zu bekommen. Oder Sie k=F6nnen zweitens in eine Partnerschaft mit mir treten  =

um das Geld sehr viel profitabler in Ihrem Land zu investieren. Welche  
Option Sie auch w=E4hlen, f=FChlen Sie sich frei, sich bei mir zu melden.
Ich plane 5% des Geldes f=FCr alle Arten von Unkosten im Prozess der
Transaktionen zu verwenden. Sollten Sie keine Partnerschaft bevorzugen,  
bin ich gewillt 10% des Geldes zu bezahlen, w=E4hrend die restlichen 85% f=FC=
r
Investitionen in Ihrem Land gedacht sind.
Nehmen Sie Kontakt mit mir auf =FCber die obige E-mail -Adresse, ich
bitte Sie inst=E4ndig absolutes Stillschweigen =FCber diese Transaktion zu
wahren.

Danke, Gott segne Sie!

Muzenda. 

  
--1bd8977e-fcc9-41cb-b7ef-8eea998ee25f--


From wolfram at fischer-zim.ch  Thu Jul 21 14:15:27 2005
From: wolfram at fischer-zim.ch (Wolfram Fischer)
Date: Thu, 21 Jul 2005 14:15:27 +0200
Subject: [Rd] automated response
Message-ID: <10507211415.AA00266@fischer-zim.ch>

Zu Ihrer Information:

Ihre Post kann im Moment nicht sofort bearbeitet werden,
denn das Buero bleibt geschlossen bis am 7.8.2005.


Buecherbestellungen koennen Sie direkt senden an:
- in der Schweiz: mailto:info at editionpunktuell.ch
- in Deutschland und Oesterreich: mailto:auslieferung at schaltungsdienst.de

Wolfram Fischer - ZIM


From roebuck at odin.mdacc.tmc.edu  Thu Jul 21 19:38:44 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Thu, 21 Jul 2005 12:38:44 -0500 (CDT)
Subject: [Rd] S4 Dispatching
In-Reply-To: <42DEBD70.3020009@R-project.org>
References: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
	<42DEBD70.3020009@R-project.org>
Message-ID: <Pine.OSF.4.58.0507211054440.185403@odin.mdacc.tmc.edu>

On Wed, 20 Jul 2005, John Chambers wrote:

> Paul Roebuck wrote:
>
> > Is it possible for S4 to (continue) dispatch to a class
> > created during dispatching? The code below doesn't work;
> > is this not possible or have I ommitted something?
>
> "doesn't work"?  This is not helpful.  Please show what you got and what
> you expected.  The result below is what I would expect (& get) from your
> code.
>
> R> onthefly("testing")
> generic onthefly
> onthefly (character)
> generic onthefly
> onthefly (mydata)
> List of 1
>   $ name: chr "mydata"
>   - attr(*, "class")= chr "mydata"
>
> Since you used an undefined class "mydata" you can't expect very much
> else to work with these objects.  You did not in fact "create" the
> class, you just assigned a class attribute to an object corresponding to
> an undefined class.  There is a warning message to that effect from the
> second setMethod() call.

In retrospect, that should have been expressed as "doesn't
work as I expected". I was using 'options(warn=2)' and didn't
notice the warning conversion. I expected evaluation of the
class existence would occur when callGeneric() was invoked,
not during setMethod(). Also surprised at the return to
generic prior to the final dispatch (instead of going
straight there) along that same line of thought.

While it's true that all I did was add a class attribute to
the object, I thought that was all that was required for a
trivial S3 class to be "defined". In my case, it is solely
for internal usage as an intermediate data object that
allows R to handle its memory management. Not sure how to
define an S4 class representation for an external pointer.

Thanks for your patience and help.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From ny2005 at ipsiconferences.org  Thu Jul 21 20:54:41 2005
From: ny2005 at ipsiconferences.org (IPSI Conferences)
Date: Thu, 21 Jul 2005 20:54:41 +0200
Subject: [Rd] Invitation to New York, Spain, and Italy; c/ba
Message-ID: <E1DvgBt-0001gq-DC@ipsiconferences.org>

Dear potential Speaker:

On behalf of the organizing committee, I would like to extend a cordial
invitation for you to submit a paper to the IPSI Transactions journal, or
to attend one of the upcoming IPSI BgD multidisciplinary,
interdisciplinary, and transdisciplinary conferences.

------------------------------------------------------------------------

The first one will take place in New York City, NY, USA:

IPS-USA-2006 NEW YORK
Hotel Beacon (arrival: 5 January 06 / departure: 8 January 06)
New Deadlines: 1 August 05 (abstract) & 1 October 05 (full paper)
------------------------------------------------------------------------

The second one will take place in Marbella, Spain:

IPSI-2006 SPAIN
Hotel Puente Romano (arrival: 10 February 06 / departure: 13 February 06)
Deadlines: 1 September 05 (abstract) & 1 November 05 (full paper)
------------------------------------------------------------------------

The third one will take place in Amalfi, Italy:

IPSI-2006 ITALY
Hotel Santa Caterina (arrival: 23 March 06 / departure: 26 March 06)
Deadlines: 1 October 05 (abstract) & 1 December 05 (full paper)
------------------------------------------------------------------------

All IPSI BgD conferences are non-profit. They bring together the elite of
the world science; so far, we have had seven Nobel Laureates speaking at
the opening ceremonies. The conferences always take place in some of the
most attractive places of the world. All those who come to IPSI
conferences once, always love to come back (because of the unique
professional quality and the extremely creative atmosphere); lists of past
participants are on the web, as well as details of future conferences.

These conferences are in line with the newest recommendations of the US
National Science Foundation and of the EU research sponsoring agencies, to
stress multidisciplinary, interdisciplinary, and transdisciplinary
research (M+I+T++ research). The speakers and activities at the
conferences truly support this type of scientific interaction.

Among the main topics of these conferencs are: "E-education and E-business
with Special Emphasis on Semantic Web and Web Datamining"

Other topics of interest include, but are not limited to:

* Internet
* Computer Science and Engineering
* Mobile Communications/Computing for Science and Business
* Management and Business Administration
* Education
* e-Medicine
* e-Oriented Bio Engineering/Science and Molecular Engineering/Science
* Environmental Protection
* e-Economy
* e-Law
* Technology Based Art and Art to Inspire Technology Developments
* Internet Psychology

If you would like more information on either conference, please reply to
this e-mail message.

If you plan to submit an abstract and paper, please let us know
immediately for planning purposes. Remember that you can submit your paper
also to the IPSI Transactions journal.

Sincerely Yours,

Prof. V. Milutinovic, Chairman,
IPSI BgD Conferences


* * * CONTROLLING OUR E-MAILS TO YOU * * *

If you would like to continue to be informed about future IPSI BgD
conferences, please reply to this e-mail message with a subject line of
SUBSCRIBE.

If you would like to be removed from our mailing list, please reply to
this e-mail message with a subject line of REMOVE.


From smyth at wehi.edu.au  Fri Jul 22 06:55:21 2005
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Fri, 22 Jul 2005 14:55:21 +1000
Subject: [Rd]  boxplot() defaults {was "boxplot in extreme cases"}
Message-ID: <6.2.1.2.1.20050722141436.02191938@imaphost.wehi.edu.au>


>[Rd] boxplot() defaults {was "boxplot in extreme cases"}
>Martin Maechler maechler at stat.math.ethz.ch
>Mon Nov 8 10:36:42 CET 2004
>
>     AndyL> Try:
>
>     AndyL> x <- list(x1=rep(c(0,1,2),c(10,20,40)), 
> x2=rep(c(0,1,2),c(10,40,20)))
>     AndyL> boxplot(x, pars=list(medpch=20, medcex=3))
>
>     AndyL> (Cf ?bxp, pointed to from ?boxplot.)
>
>Good! Thank you, Andy.
>
>However,
>this is not the first time it had crossed my mind that R's
>default settings of drawing boxplot()s are not quite ok -- and
>that's why I've diverted to R-devel.
>
>Keeping Tufte's considerations in mind, (and me not really wanting
>to follow S-plus), shouldn't we consider to slightly change R's
>boxplot()ing such that
>
>    boxplot(list(x1=rep(c(0,1,2),c(10,20,40)), x2=rep(c(0,1,2),c(10,40,20))))
>
>will *not* give too identically looking boxplots?
>Also, the median should be emphasized more by default anyway.
>{The lattice function  bwplot() does it by only drawing a large
>  black ball as in Andy's example (and not drawing a line at all)}
>
>One possibility I'd see is to use a default 'medlwd = 3'
>either in boxplot() or in bxp(.) and hence, what you currently get by
>
>    boxplot(list(x1=rep(c(0,1,2),c(10,20,40)), x2=rep(c(0,1,2),c(10,40,20))),
>            medlwd=3)
>
>would become the default plotting in boxplot().
>Of course a smaller value "medlwd=2" would work too, but I'd
>prefer a bit more (3).
>
>Martin

Hi Martin,

I'm not sure this innovation (medlwd=3 default) is a good idea. Boxplots 
are designed to display many samples simultaneously on a graph, and it is 
important they be as clean and as simple as possible. To my eye, and to 
everyone in my lab, the thickened median line is rather distracting and 
makes the boxplots look more cluttered ("ugly" one of my postdocs said). 
The thickened line also goes against Tufte's principle of using minimum ink 
to represent the message.

Yours and Erich's point about distinguishing the median==1st quartile case 
from the median==3rd quartile case is well taken. How about making medlwd=3 
(or medlwd=2) the default behaviour only when the median coincides with one 
of the quartiles? That might satisfy everyone?

I notice that there wasn't any follow up discusssion of this post of the 
r-devel list. Did this suggestion get any support? The boxplots have been 
so well accepted in their current form for many, many years, decades even, 
so one should be especially cautious of making changes without some sort of 
consensus.

Best
Gordon

> > From: Erich Neuwirth
> >
> > I noticed the following:
> > the 2 datasets
> > rep(c(0,1,2),c(10,20,40)) and
> > rep(c(0,1,2),c(10,40,20))
> > produce identical boxplots despite the fact that the medians are
> > different. The reason is that the median in one case
> > coincides with the
> > first quartile, and in the second case with the third quartile.
> > Is there a recommended way of displaying the median visibly in these
> > cases? Setting notch=TRUE displays the median, but does look strange.

---------------------------------------------------------------------------------------
Dr Gordon K Smyth, Senior Research Scientist, Bioinformatics,
Walter and Eliza Hall Institute of Medical Research,
1G Royal Parade, Parkville, Vic 3050, Australia
Tel: (03) 9345 2326, Fax (03) 9347 0852,
Email: smyth at wehi.edu.au, www: http://www.statsci.org


From ripley at stats.ox.ac.uk  Fri Jul 22 13:48:14 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 22 Jul 2005 12:48:14 +0100 (BST)
Subject: [Rd] [R] sequence()
In-Reply-To: <7CBD9E72-0812-47A5-8803-34FFDAB37274@soc.soton.ac.uk>
References: <7CBD9E72-0812-47A5-8803-34FFDAB37274@soc.soton.ac.uk>
Message-ID: <Pine.LNX.4.61.0507221011100.28301@gannet.stats>

R-help is not the list for R development questions: you didn't want help 
did you? --> moved to R-devel.

I do wonder why

> sequence(c(0,-1))
[1]  1  0  1  0 -1

is considered useful.

Given that the definition seems flawed and I could not find any uses of 
this function in any package my reaction was to suggest the function be 
deprecated on the way to removal.  (I also do not understand why anyone 
would expect sequence() to do that and not one of the many things which 
seq() does.)

We certainly do not want to replace a function that works as described at 
a reasonable speed by one that does not work as described, however fast.

 	`Accuracy first, speed second'.


On Fri, 22 Jul 2005, Robin Hankin wrote:

> Function sequence() repeatedly concatenates
> its output, and this is slow.

> It is possible to improve on the performance of sequence by
> defining
>
>  myseq <- function(x){unlist(sapply(x,function(i){1:i}))}

I don't think you want sapply here, but lapply.  Try

> myseq(c(2,2))
      [,1] [,2]
[1,]    1    1
[2,]    2    2

sic!

> The following session compares the  performance of
> myseq(), and sequence(), at least on my G5:
>
>
> > identical(sequence(1:50),myseq(1:50))
> [1] TRUE
> > system.time(ignore <- sequence(1:800))
> [1] 1.16 0.88 2.07 0.00 0.00
> > system.time(ignore <- sequence(1:800))
> [1] 1.14 0.84 1.99 0.00 0.00
> > system.time(ignore <- myseq(1:800))
> [1] 0.02 0.02 0.04 0.00 0.00
> > system.time(ignore <- myseq(1:800))
> [1] 0.03 0.00 0.03 0.00 0.00
> >
>
> (the time differential is even more marked for longer arguments).

and much less for more realistic shorter arguments.

> Is there any reason why we couldn't use  this definition instead?

The fact that it sometimes gives the wrong answer, for one.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jmc at R-project.org  Fri Jul 22 14:39:36 2005
From: jmc at R-project.org (John Chambers)
Date: Fri, 22 Jul 2005 08:39:36 -0400
Subject: [Rd] S4 Dispatching
In-Reply-To: <Pine.OSF.4.58.0507211054440.185403@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
	<42DEBD70.3020009@R-project.org>
	<Pine.OSF.4.58.0507211054440.185403@odin.mdacc.tmc.edu>
Message-ID: <42E0E908.7090607@R-project.org>

Paul Roebuck wrote:
> On Wed, 20 Jul 2005, John Chambers wrote:
> 
> 
>>Paul Roebuck wrote:
>>
>>
>>>Is it possible for S4 to (continue) dispatch to a class
>>>created during dispatching? The code below doesn't work;
>>>is this not possible or have I ommitted something?
>>
>>"doesn't work"?  This is not helpful.  Please show what you got and what
>>you expected.  The result below is what I would expect (& get) from your
>>code.
>>
>>R> onthefly("testing")
>>generic onthefly
>>onthefly (character)
>>generic onthefly
>>onthefly (mydata)
>>List of 1
>>  $ name: chr "mydata"
>>  - attr(*, "class")= chr "mydata"
>>
>>Since you used an undefined class "mydata" you can't expect very much
>>else to work with these objects.  You did not in fact "create" the
>>class, you just assigned a class attribute to an object corresponding to
>>an undefined class.  There is a warning message to that effect from the
>>second setMethod() call.
> 
> 
> In retrospect, that should have been expressed as "doesn't
> work as I expected". I was using 'options(warn=2)' and didn't
> notice the warning conversion. I expected evaluation of the
> class existence would occur when callGeneric() was invoked,
> not during setMethod(). Also surprised at the return to
> generic prior to the final dispatch (instead of going
> straight there) along that same line of thought.
> 
> While it's true that all I did was add a class attribute to
> the object, I thought that was all that was required for a
> trivial S3 class to be "defined". In my case, it is solely
> for internal usage as an intermediate data object that
> allows R to handle its memory management. Not sure how to
> define an S4 class representation for an external pointer.

That is definitely a problem in the current R implementation.

Because external pointers (and environments and some other data types) 
are not duplicated in the way that ordinary vectors are, you cannot 
directly extend them as a class.  You can't for example set the class of 
such an object without affecting all the other code that uses the same 
pointer.

The usual workaround is to define a list of one element that contains 
the external pointer, and make that the object.  Or equivalently set up 
an S4 class with the external pointer as a slot.  That's not a really 
satisfactory workaround, though, since it's not what was intended.

It would be nice if the implementation duplicated the attributes, if 
any, of such objects.  But that appears not to be a simple fix---trying 
out that change causes problems that seem to be related to garbage 
collection or other internals of storage management.  A change for the 
future perhaps ...


> 
> Thanks for your patience and help.
> 
> ----------------------------------------------------------
> SIGSIG -- signature too long (core dumped)
>


From pburns at pburns.seanet.com  Fri Jul 22 15:43:28 2005
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Fri, 22 Jul 2005 14:43:28 +0100
Subject: [Rd] [R] sequence()
In-Reply-To: <Pine.LNX.4.61.0507221011100.28301@gannet.stats>
References: <7CBD9E72-0812-47A5-8803-34FFDAB37274@soc.soton.ac.uk>
	<Pine.LNX.4.61.0507221011100.28301@gannet.stats>
Message-ID: <42E0F800.1050002@pburns.seanet.com>

I definitely agree that 'sequence' is not the right name
for this functionality.  The functionality is occasionally
useful -- I've been asked for it several times. But I do
wonder if it is basic enough that it should be in 'base'.

The function could be rewritten to create the proper
length of the answer at the outset since that is known.
It could then be used as an example (somewhere) of
how not to fragment memory.

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Prof Brian Ripley wrote:

>R-help is not the list for R development questions: you didn't want help 
>did you? --> moved to R-devel.
>
>I do wonder why
>
>  
>
>>sequence(c(0,-1))
>>    
>>
>[1]  1  0  1  0 -1
>
>is considered useful.
>
>Given that the definition seems flawed and I could not find any uses of 
>this function in any package my reaction was to suggest the function be 
>deprecated on the way to removal.  (I also do not understand why anyone 
>would expect sequence() to do that and not one of the many things which 
>seq() does.)
>
>We certainly do not want to replace a function that works as described at 
>a reasonable speed by one that does not work as described, however fast.
>
> 	`Accuracy first, speed second'.
>
>
>On Fri, 22 Jul 2005, Robin Hankin wrote:
>
>  
>
>>Function sequence() repeatedly concatenates
>>its output, and this is slow.
>>    
>>
>
>  
>
>>It is possible to improve on the performance of sequence by
>>defining
>>
>> myseq <- function(x){unlist(sapply(x,function(i){1:i}))}
>>    
>>
>
>I don't think you want sapply here, but lapply.  Try
>
>  
>
>>myseq(c(2,2))
>>    
>>
>      [,1] [,2]
>[1,]    1    1
>[2,]    2    2
>
>sic!
>
>  
>
>>The following session compares the  performance of
>>myseq(), and sequence(), at least on my G5:
>>
>>
>>    
>>
>>>identical(sequence(1:50),myseq(1:50))
>>>      
>>>
>>[1] TRUE
>>    
>>
>>>system.time(ignore <- sequence(1:800))
>>>      
>>>
>>[1] 1.16 0.88 2.07 0.00 0.00
>>    
>>
>>>system.time(ignore <- sequence(1:800))
>>>      
>>>
>>[1] 1.14 0.84 1.99 0.00 0.00
>>    
>>
>>>system.time(ignore <- myseq(1:800))
>>>      
>>>
>>[1] 0.02 0.02 0.04 0.00 0.00
>>    
>>
>>>system.time(ignore <- myseq(1:800))
>>>      
>>>
>>[1] 0.03 0.00 0.03 0.00 0.00
>>    
>>
>>(the time differential is even more marked for longer arguments).
>>    
>>
>
>and much less for more realistic shorter arguments.
>
>  
>
>>Is there any reason why we couldn't use  this definition instead?
>>    
>>
>
>The fact that it sometimes gives the wrong answer, for one.
>
>  
>


From ggrothendieck at gmail.com  Fri Jul 22 16:06:59 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 22 Jul 2005 10:06:59 -0400
Subject: [Rd] [R] sequence()
In-Reply-To: <Pine.LNX.4.61.0507221011100.28301@gannet.stats>
References: <7CBD9E72-0812-47A5-8803-34FFDAB37274@soc.soton.ac.uk>
	<Pine.LNX.4.61.0507221011100.28301@gannet.stats>
Message-ID: <971536df05072207061159aa36@mail.gmail.com>

On 7/22/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> R-help is not the list for R development questions: you didn't want help
> did you? --> moved to R-devel.
> 
> I do wonder why
> 
> > sequence(c(0,-1))
> [1]  1  0  1  0 -1
> 
> is considered useful.
> 
> Given that the definition seems flawed and I could not find any uses of
> this function in any package my reaction was to suggest the function be
> deprecated on the way to removal.  (I also do not understand why anyone
> would expect sequence() to do that and not one of the many things which
> seq() does.)
> 
> We certainly do not want to replace a function that works as described at
> a reasonable speed by one that does not work as described, however fast.
> 
>        `Accuracy first, speed second'.


I would expand this to 'expected behavior first' where expected is
not with respect to the documentation but with respect to 
normal expectations based on using R, the OS and software,
in general.

Some examples that I think could benefit from this are:

- KalmanLike alters its arguments.  Its been improved in r-devel to
add an option to control this and the option provides compatibliity
with the current KalmanLike and although that seems sensible,
I think the best design here would be to start from scratch again
and have the option default to not modifying its args.  Maybe
a new name should be produced and KalmanLike deprecated.

- write.csv, despite the recent improvement, could benefit from being
a wrapper in the usual way where default args are set.  Its not
terrible the way it is in r-devel but its not the best design either.

- italic does not consistently italicize its arguments.  This is
apparently delibertate but its completely unexpected and would
be best changed.

- *.site and libraries do not get copied from one version of R to
the next when one upgrades R.  I can't think of a well known
product that makes you reconfigure from scratch each time
you upgrade like R does   Its possible to come up with
a configuration that works after upgrade but its not dead
simple like it is with many products.

- R CMD ... does not work on Windows if cmd instead of CMD 
is used.  This is quite unexpected if you are a Windows user
where commands are normally case insensitive.  

These are only the examples I can think of off the top of my 
head since they were topics of recent discussions.


From ellis at stat.harvard.edu  Sat Jul 23 03:07:14 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Fri, 22 Jul 2005 18:07:14 -0700
Subject: [Rd] S4 Dispatching
In-Reply-To: <42E0E908.7090607@R-project.org>
References: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
	<42DEBD70.3020009@R-project.org>
	<Pine.OSF.4.58.0507211054440.185403@odin.mdacc.tmc.edu>
	<42E0E908.7090607@R-project.org>
Message-ID: <6BBF2496-BFBC-4F5D-88CC-A089CAB08FC6@stat.harvard.edu>

I'm not sure I understand here... If I do, say...

setClass("id","externalptr")

where classes of that type come back from, effectively, C functions  
that do something like

PROTECT(ret = NEW_OBJECT(MAKE_CLASS("id")));
R_SetExternalPtrAddr(ret,myid);
UNPROTECT(1);
return ret;

am I just asking for an explosion somewhere down the line? (I haven't  
noticed anything in particular so far...) I'm not adding any slots  
since it happens that all of the pointers of interest have  
information that should either a) live on the pointer side or b)  
lives in a meta object of some sort.



On Jul 22, 2005, at 5:39 AM, John Chambers wrote:

> That is definitely a problem in the current R implementation.
>
> Because external pointers (and environments and some other data types)
> are not duplicated in the way that ordinary vectors are, you cannot
> directly extend them as a class.  You can't for example set the  
> class of
> such an object without affecting all the other code that uses the same
> pointer.
>
> The usual workaround is to define a list of one element that contains
> the external pointer, and make that the object.  Or equivalently  
> set up
> an S4 class with the external pointer as a slot.  That's not a really
> satisfactory workaround, though, since it's not what was intended.
>
> It would be nice if the implementation duplicated the attributes, if
> any, of such objects.  But that appears not to be a simple fix--- 
> trying
> out that change causes problems that seem to be related to garbage
> collection or other internals of storage management.  A change for the
> future perhaps ...
>
>
>
>>
>> Thanks for your patience and help.
>>
>> ----------------------------------------------------------
>> SIGSIG -- signature too long (core dumped)
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From ellis at stat.harvard.edu  Sun Jul 24 00:20:25 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Sat, 23 Jul 2005 15:20:25 -0700
Subject: [Rd] S4 Dispatching
In-Reply-To: <6BBF2496-BFBC-4F5D-88CC-A089CAB08FC6@stat.harvard.edu>
References: <Pine.OSF.4.58.0507191505420.84377@odin.mdacc.tmc.edu>
	<42DEBD70.3020009@R-project.org>
	<Pine.OSF.4.58.0507211054440.185403@odin.mdacc.tmc.edu>
	<42E0E908.7090607@R-project.org>
	<6BBF2496-BFBC-4F5D-88CC-A089CAB08FC6@stat.harvard.edu>
Message-ID: <D905C6C1-DE1D-4345-8858-3717424BACC6@stat.harvard.edu>

To answer my own question: Yes, it will explode. I was just getting  
lucky. Right, back to the drawing board :-)

On Jul 22, 2005, at 6:07 PM, Byron Ellis wrote:

> I'm not sure I understand here... If I do, say...
>
> setClass("id","externalptr")
>
> where classes of that type come back from, effectively, C functions
> that do something like
>
> PROTECT(ret = NEW_OBJECT(MAKE_CLASS("id")));
> R_SetExternalPtrAddr(ret,myid);
> UNPROTECT(1);
> return ret;
>
> am I just asking for an explosion somewhere down the line? (I haven't
> noticed anything in particular so far...) I'm not adding any slots
> since it happens that all of the pointers of interest have
> information that should either a) live on the pointer side or b)
> lives in a meta object of some sort.
>
>
>
> On Jul 22, 2005, at 5:39 AM, John Chambers wrote:
>
>
>> That is definitely a problem in the current R implementation.
>>
>> Because external pointers (and environments and some other data  
>> types)
>> are not duplicated in the way that ordinary vectors are, you cannot
>> directly extend them as a class.  You can't for example set the
>> class of
>> such an object without affecting all the other code that uses the  
>> same
>> pointer.
>>
>> The usual workaround is to define a list of one element that contains
>> the external pointer, and make that the object.  Or equivalently
>> set up
>> an S4 class with the external pointer as a slot.  That's not a really
>> satisfactory workaround, though, since it's not what was intended.
>>
>> It would be nice if the implementation duplicated the attributes, if
>> any, of such objects.  But that appears not to be a simple fix---
>> trying
>> out that change causes problems that seem to be related to garbage
>> collection or other internals of storage management.  A change for  
>> the
>> future perhaps ...
>>
>>
>>
>>
>>>
>>> Thanks for your patience and help.
>>>
>>> ----------------------------------------------------------
>>> SIGSIG -- signature too long (core dumped)
>>>
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> ---
> Byron Ellis (ellis at stat.harvard.edu)
> "Oook" -- The Librarian
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From berwin at maths.uwa.edu.au  Sun Jul 24 16:24:51 2005
From: berwin at maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Sun, 24 Jul 2005 16:24:51 +0200 (CEST)
Subject: [Rd] Buglet in src/appl/splines.c (PR#8030)
Message-ID: <20050724142451.474AFA286@slim.kubism.ku.dk>


--AZaLVt6Pw+
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

Dear all,

I was looking at "splinefun" and the underlying C code and believe
that there is a memory access error in the C routine "spline_eval".

Specifically, on line 368 and following the following code appears:

	if(ul < x[i] || x[i+1] < ul) {
	    i = 0;
	    j = *n;
	    do {
		k = (i+j)/2;
		if(ul < x[k]) j = k;
		else i = k;
	    }
	    while(j > i+1);
	}

'ul' is the point at which the spline is to be evaluated and the array
'x' contains the knots.  The variable 'i' points to the knots between
which the previous point, at which the spline was evaluated, lies.
The 'if' clause checks whether the next point lies between the same
knots, if not, the correct pair of knots is searched by a binary
search method.

However, if the previous point was larger than the right most knots,
then 'i' will contain the value n-1.  If the next point is also larger
than the right most knot, then the first part of the logical
expression will be false and, hence, the second part evaluated.  In
that case x[i+1] will access memory beyond the memory that is actually
allocated for this array.  

In an environment in which memory access beyond allocated space is
checked, this should lead to a run time error.  However, it took me
some time to realise that this problem has no impact on the correct
working of the routine.  If the byte patter at x[i+1] is interpreted
as a number larger than ul, then the second part of the logical
expression evaluates to true, we use the 'old' i and everything is
o.k.  If that byte pattern is interpreted as a number smaller than ul,
then the logical expression evaluates to false and the binary search
will end up finding that we should use i=n-1.

Below I attach a small sample program that illustrates the problem.  If
this program is stored in, say, spline.R, then the command 

  R -d "valgrind --tool=memcheck --leak-check=yes" --vanilla < spline.R

produces on my machine the output attached below.  Note that valgrind
complains about the use of an uninitialised value in splines.c.

As far as I can tell, the easiest solution is to safeguard the second
comparison in the logical statement and only do this comparison if i
is smaller than n-1.  I made such a change to the SVN source of the R
development tree that I downloaded (patch is attached).  After
recompiling R with this change, running the above command again
produces an output (attached below) in which valgrind does not
complain anymore about the use of an uninitialised value.

Cheers,

        Berwin


--AZaLVt6Pw+
Content-Type: text/plain
Content-Description: Sample Program
Content-Disposition: inline;
	filename="spline.R"
Content-Transfer-Encoding: 7bit

x <- 0:10/10
y <- (x-0.5)^2

tt <- splinefun(x, y, method="fmm")

x1 <- seq(from=-0.5, to=1.5, length=101)
y1 <- tt(x1)

plot(x1, y1, type="l")
points(x,y)

--AZaLVt6Pw+
Content-Type: text/plain
Content-Description: Output with original splines.c
Content-Disposition: inline;
	filename="Out1.txt"
Content-Transfer-Encoding: 7bit

==5085== Memcheck, a memory error detector for x86-linux.
==5085== Copyright (C) 2002-2005, and GNU GPL'd, by Julian Seward et al.
==5085== Using valgrind-2.4.0, a program supervision framework for x86-linux.
==5085== Copyright (C) 2000-2005, and GNU GPL'd, by Julian Seward et al.
==5085== For more details, rerun with: -v
==5085==

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0 Under development (unstable) (2005-07-21 r35000)
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

> x <- 0:10/10
> y <- (x-0.5)^2
>
> tt <- splinefun(x, y, method="fmm")
>
> x1 <- seq(from=-0.5, to=1.5, length=101)
> y1 <- tt(x1)
==5085== Use of uninitialised value of size 8
==5085==    at 0x8172B72: spline_eval (splines.c:368)
==5085==    by 0x80A690B: do_dotCode (dotcode.c:1674)
==5085==    by 0x80BDA22: Rf_eval (eval.c:405)
==5085==    by 0x80C0EB0: Rf_DispatchOrEval (eval.c:1697)
==5085==    by 0x8157749: do_subset3 (subset.c:921)
==5085==    by 0x80BDAAD: Rf_eval (eval.c:382)
==5085==    by 0x80BF2D4: do_begin (eval.c:1057)
==5085==    by 0x80BDAAD: Rf_eval (eval.c:382)
==5085==    by 0x80BDE02: Rf_applyClosure (eval.c:570)
==5085==    by 0x80BD834: Rf_eval (eval.c:417)
==5085==    by 0x80BFC90: do_set (eval.c:1293)
==5085==    by 0x80BDAAD: Rf_eval (eval.c:382)
>
> plot(x1, y1, type="l")
> points(x,y)
>
==5085==
==5085== ERROR SUMMARY: 24 errors from 1 contexts (suppressed: 41 from 1)
==5085== malloc/free: in use at exit: 12984429 bytes in 6622 blocks.
==5085== malloc/free: 27051 allocs, 20429 frees, 33057360 bytes allocated.
==5085== For counts of detected errors, rerun with: -v
==5085== searching for pointers to 6622 not-freed blocks.
==5085== checked 13843736 bytes.
==5085==
==5085==
==5085== 436 bytes in 20 blocks are definitely lost in loss record 18 of 36
==5085==    at 0x1B90659D: malloc (vg_replace_malloc.c:130)
==5085==    by 0x8060C28: Putenv (Renviron.c:123)
==5085==    by 0x8060DF2: process_Renviron (Renviron.c:181)
==5085==    by 0x8060F31: process_system_Renviron (Renviron.c:203)
==5085==    by 0x816068B: Rf_initialize_R (system.c:160)
==5085==    by 0x805DA1A: main (Rmain.c:30)
==5085==
==5085== LEAK SUMMARY:
==5085==    definitely lost: 436 bytes in 20 blocks.
==5085==      possibly lost: 0 bytes in 0 blocks.
==5085==    still reachable: 12983993 bytes in 6602 blocks.
==5085==         suppressed: 0 bytes in 0 blocks.
==5085== Reachable blocks (those to which a pointer was found) are not shown.
==5085== To see them, rerun with: --show-reachable=yes

--AZaLVt6Pw+
Content-Type: text/plain
Content-Description: Output with modified splines.c
Content-Disposition: inline;
	filename="Out2.txt"
Content-Transfer-Encoding: 7bit

==20221== Memcheck, a memory error detector for x86-linux.
==20221== Copyright (C) 2002-2005, and GNU GPL'd, by Julian Seward et al.
==20221== Using valgrind-2.4.0, a program supervision framework for x86-linux.
==20221== Copyright (C) 2000-2005, and GNU GPL'd, by Julian Seward et al.
==20221== For more details, rerun with: -v
==20221==

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0 Under development (unstable) (2005-07-21 r35000)
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

> x <- 0:10/10
> y <- (x-0.5)^2
>
> tt <- splinefun(x, y, method="fmm")
>
> x1 <- seq(from=-0.5, to=1.5, length=101)
> y1 <- tt(x1)
>
> plot(x1, y1, type="l")
> points(x,y)
>
==20221==
==20221== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 41 from 1)
==20221== malloc/free: in use at exit: 12984429 bytes in 6622 blocks.
==20221== malloc/free: 27051 allocs, 20429 frees, 33057360 bytes allocated.
==20221== For counts of detected errors, rerun with: -v
==20221== searching for pointers to 6622 not-freed blocks.
==20221== checked 13843736 bytes.
==20221==
==20221== 436 bytes in 20 blocks are definitely lost in loss record 18 of 36
==20221==    at 0x1B90659D: malloc (vg_replace_malloc.c:130)
==20221==    by 0x8060C28: Putenv (Renviron.c:123)
==20221==    by 0x8060DF2: process_Renviron (Renviron.c:181)
==20221==    by 0x8060F31: process_system_Renviron (Renviron.c:203)
==20221==    by 0x816068B: Rf_initialize_R (system.c:160)
==20221==    by 0x805DA1A: main (Rmain.c:30)
==20221==
==20221== LEAK SUMMARY:
==20221==    definitely lost: 436 bytes in 20 blocks.
==20221==      possibly lost: 0 bytes in 0 blocks.
==20221==    still reachable: 12983993 bytes in 6602 blocks.
==20221==         suppressed: 0 bytes in 0 blocks.
==20221== Reachable blocks (those to which a pointer was found) are not shown.
==20221== To see them, rerun with: --show-reachable=yes

--AZaLVt6Pw+
Content-Type: text/plain
Content-Description: patch to modify splines.c
Content-Disposition: inline;
	filename="splines.patch"
Content-Transfer-Encoding: 7bit

Index: src/appl/splines.c
===================================================================
--- src/appl/splines.c	(revision 35020)
+++ src/appl/splines.c	(working copy)
@@ -348,6 +348,7 @@
 
     int i, j, k, l;
     double ul, dx, tmp;
+    const int nm1 = *n - 1;
 
     if(*method == 1 && *n > 1) {
 	dx = x[*n - 1] - x[0];
@@ -365,7 +366,7 @@
     i = 0;
     for(l = 0; l < *nu; l++) {
 	ul = v[l];
-	if(ul < x[i] || x[i+1] < ul) {
+	if(ul < x[i] || (i < nm1 && x[i+1] < ul)) {
 	    i = 0;
 	    j = *n;
 	    do {

--AZaLVt6Pw+--


From kjetil at acelerate.com  Mon Jul 25 01:01:56 2005
From: kjetil at acelerate.com (kjetil@acelerate.com)
Date: Mon, 25 Jul 2005 01:01:56 +0200 (CEST)
Subject: [Rd] R CMD problem on windows XP (PR#8031)
Message-ID: <20050724230156.6906CA2CB@slim.kubism.ku.dk>

I get this on windows XP, rw2011, precompiled from CRAN:

C:\R\rw2011\src\gnuwin32>R CMD build -- binary ./../library/tseriesChaos
R CMD build -- binary ./../library/tseriesChaos
* checking for file 'binary/DESCRIPTION' ... NO

and there it stopped, while the following works:

C:\R\rw2011\src\gnuwin32>Rcmd build --binary ./../library/tseriesChaos
Rcmd build --binary ./../library/tseriesChaos
* checking for file './../library/tseriesChaos/DESCRIPTION' ... OK
* preparing './../library/tseriesChaos':
* checking DESCRIPTION meta-information ... OK
* cleaning src
* removing junk

and everyrhing runs to completion.

Kjetil

-- 

Kjetil Halvorsen.

Peace is the most effective weapon of mass construction.
               --  Mahdi Elmandjra




-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.


From murdoch at stats.uwo.ca  Mon Jul 25 01:08:51 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon, 25 Jul 2005 01:08:51 +0200 (CEST)
Subject: [Rd] R CMD problem on windows XP (PR#8031)
Message-ID: <20050724230851.4BDE2A276@slim.kubism.ku.dk>

kjetil at acelerate.com wrote:
> I get this on windows XP, rw2011, precompiled from CRAN:
> 
> C:\R\rw2011\src\gnuwin32>R CMD build -- binary ./../library/tseriesChaos
> R CMD build -- binary ./../library/tseriesChaos
> * checking for file 'binary/DESCRIPTION' ... NO
> 
> and there it stopped, while the following works:

That's not a bug.  You asked it to build two packages: one called 
binary, one called ./../library/tseriesChaos.  The first build failed, 
so it stopped.

Duncan Murdoch

> 
> C:\R\rw2011\src\gnuwin32>Rcmd build --binary ./../library/tseriesChaos
> Rcmd build --binary ./../library/tseriesChaos
> * checking for file './../library/tseriesChaos/DESCRIPTION' ... OK
> * preparing './../library/tseriesChaos':
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * removing junk
> 
> and everyrhing runs to completion.
> 
> Kjetil
>


From roberto at evafunds.com  Mon Jul 25 02:34:54 2005
From: roberto at evafunds.com (roberto@evafunds.com)
Date: Mon, 25 Jul 2005 02:34:54 +0200 (CEST)
Subject: [Rd] R Cocoa GUI 1.12 (R 2.1.1 Framework) crashes on acf() (PR#8032)
Message-ID: <20050725003454.33474A2CB@slim.kubism.ku.dk>

After I upgraded my installation of R for OS X (Tiger) to 1.12, it
consistently crashes when calling the function acf() [stats lib].

Roberto Osorio


From jago at mclink.it  Mon Jul 25 09:04:40 2005
From: jago at mclink.it (stefano iacus)
Date: Mon, 25 Jul 2005 09:04:40 +0200
Subject: [Rd] R Cocoa GUI 1.12 (R 2.1.1 Framework) crashes on acf()
	(PR#8032)
In-Reply-To: <20050725003454.33474A2CB@slim.kubism.ku.dk>
References: <20050725003454.33474A2CB@slim.kubism.ku.dk>
Message-ID: <54D74820-1F62-47B9-BF16-596A0261C10D@mclink.it>

can you send us the crash report? I cannot reproduce it.
stefano

On 25/lug/05, at 02:34, roberto at evafunds.com wrote:

> After I upgraded my installation of R for OS X (Tiger) to 1.12, it
> consistently crashes when calling the function acf() [stats lib].
>
> Roberto Osorio
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From maechler at stat.math.ethz.ch  Mon Jul 25 09:41:05 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 25 Jul 2005 09:41:05 +0200 (CEST)
Subject: [Rd] Buglet in src/appl/splines.c (PR#8030)
Message-ID: <20050725074105.97325A2CB@slim.kubism.ku.dk>


>>>>> "BeT" == Berwin A Turlach <berwin at maths.uwa.edu.au>
>>>>>     on Sun, 24 Jul 2005 16:24:51 +0200 (CEST) writes:

    BeT> I was looking at "splinefun" and the underlying C code
    BeT> and believe that there is a memory access error in the
    BeT> C routine "spline_eval".

...........
...........

Excellent, Berwin!

Specifically the part about why the bug never really triggers
wrong behavior.
Your mail should be saved in  "The Annals of R"  ...

I'm fixing according to your proposal -- for "R-devel" or
(SVN) R/trunk/ only.

Martin Maechler, ETH Zurich


From michael.beer at unifr.ch  Mon Jul 25 15:12:48 2005
From: michael.beer at unifr.ch (michael.beer@unifr.ch)
Date: Mon, 25 Jul 2005 15:12:48 +0200 (CEST)
Subject: [Rd] density() fails if x contains Inf or -Inf (PR#8033)
Message-ID: <20050725131248.5C50CA24F@slim.kubism.ku.dk>

Full_Name: Michael Beer
Version: 2.1.0 and 2.1.1
OS: linux-gnu and mingw32
Submission from: (NULL) (134.21.49.141)


The command "density(c(0.5,0.6,Inf,0.7))" fails saying "Wrong type for argument
2 in call to massdist". This problem can be resolved by replacing "nx = nx" by
"nx = as.integer(nx)" in the call to massdist. When there are infinite values,
the value of sum(x.finite) is attributed to nx before. Thus nx is changed to
class "numeric" instead of "integer".


From Torsten.Hothorn at rzmail.uni-erlangen.de  Mon Jul 25 15:31:56 2005
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 25 Jul 2005 15:31:56 +0200 (CEST)
Subject: [Rd] Buglet in src/appl/splines.c (PR#8030)
In-Reply-To: <20050725074105.97325A2CB@slim.kubism.ku.dk>
References: <20050725074105.97325A2CB@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.51.0507251530450.29913@artemis.imbe.med.uni-erlangen.de>


On Mon, 25 Jul 2005 maechler at stat.math.ethz.ch wrote:

>
> >>>>> "BeT" == Berwin A Turlach <berwin at maths.uwa.edu.au>
> >>>>>     on Sun, 24 Jul 2005 16:24:51 +0200 (CEST) writes:
>
>     BeT> I was looking at "splinefun" and the underlying C code
>     BeT> and believe that there is a memory access error in the
>     BeT> C routine "spline_eval".
>
> ...........
> ...........
>
> Excellent, Berwin!
>
> Specifically the part about why the bug never really triggers
> wrong behavior.
> Your mail should be saved in  "The Annals of R"  ...
>

the next version of the `fortunes' package will have

R> fortune(134)

Excellent, Berwin!
Specifically the part about why the bug never really triggers wrong
behavior. Your mail should be saved in `The Annals of R' ...
   -- Martin Maechler (after Berwin A Turlach reported a buglet in
      `spline_eval')
      R-devel (July 2005)

Best,

Torsten

> I'm fixing according to your proposal -- for "R-devel" or
> (SVN) R/trunk/ only.
>
> Martin Maechler, ETH Zurich
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From ABRI at danicapension.dk  Mon Jul 25 15:36:56 2005
From: ABRI at danicapension.dk (Anders Brix Jensen)
Date: Mon, 25 Jul 2005 15:36:56 +0200
Subject: [Rd] Rmath library problems
Message-ID: <OF188E7454.C4139FDB-ONC1257049.0048A7AB-C1257049.004AD55A@danskebank.dk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050725/f699f74f/attachment.pl

From ripley at stats.ox.ac.uk  Mon Jul 25 16:08:38 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Jul 2005 15:08:38 +0100 (BST)
Subject: [Rd] Rmath library problems
In-Reply-To: <OF188E7454.C4139FDB-ONC1257049.0048A7AB-C1257049.004AD55A@danskebank.dk>
References: <OF188E7454.C4139FDB-ONC1257049.0048A7AB-C1257049.004AD55A@danskebank.dk>
Message-ID: <Pine.LNX.4.61.0507251451150.4311@gannet.stats>

On Mon, 25 Jul 2005, Anders Brix Jensen wrote:

> Has anybody successfully called the Rmath library from C using the MS
> Visual Studio compiler (I am using Visual Studio 6.0)?
>
> I have compiled the Rmath library using gcc, and the 'test.c' program
> (which makes a call to qnorm) works fine when compiled with gcc. However,
> I get a fatal memory error when I run it after compiling it with Visual C.

What is `it'?  No interpretation I can make quite corresponds to the later 
comments.

> Would this memory problem be related to the compiler, or is it because I
> have not used the right compiler and/or linker options?

Probably the last.

> Two things puzzles me regarding compilation of Rmath:
> 1) The gcc compiler only seems to need the Rmath.dll to compile and
> execute. It needs neither Rmath.a nor Rmath.def.

> 2) The VC compiler needs a '.a'-file, but Rmath.a does not work (cannot
> find the symbols isnan and expm1). It compiles fine with libRmath.a
> however, but then it crashes as mentioned above.

These are actually statements about the linkers when linking against 
Rmath.dll, and not about compiling Rmath.  You should be linking a main 
function compiled under VC++ against a VC++ import library (which you can 
make from Rmath.def by lib /def:Rmath.def /out:Rmath.lib).  Then

cl /MT /Ox  /I..\..\include test.c Rmath.lib

works for me without any errors.

You can find all the background and hints in README.packages.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jago at mclink.it  Mon Jul 25 17:22:05 2005
From: jago at mclink.it (stefano iacus)
Date: Mon, 25 Jul 2005 17:22:05 +0200
Subject: [Rd] R Cocoa GUI 1.12 (R 2.1.1 Framework) crashes on acf()
	(PR#8032)
In-Reply-To: <BF09E712.4CDC%roberto@evafunds.com>
References: <BF09E712.4CDC%roberto@evafunds.com>
Message-ID: <7D7F1215-5227-4EFB-B240-D9053C380D12@mclink.it>

Hi Robert,
I'm following this to r-sig-mac and r-devel.
Btw, you said "any"  but do you have any chuck of R code to test as  
well?
example(acf) works for me.
stefano


On 25/lug/05, at 09:47, Roberto Osorio wrote:

> On 7/25/05 12:04 AM, "stefano iacus" <jago at mclink.it> wrote:
>
>
>> can you send us the crash report? I cannot reproduce it.
>> stefano
>>
>> On 25/lug/05, at 02:34, roberto at evafunds.com wrote:
>>
>>
>>> After I upgraded my installation of R for OS X (Tiger) to 1.12, it
>>> consistently crashes when calling the function acf() [stats lib].
>>>
>>> Roberto Osorio
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>>
>>
>>
>
> Here it is. Thanks for looking at it.
>
> Roberto
>
> -------
>
> Date/Time:      2005-07-25 00:43:32.718 -0700
> OS Version:     10.4.2 (Build 8C46)
> Report Version: 3
>
> Command: R
> Path:    /Applications/R.app/Contents/MacOS/R
> Parent:  WindowServer [60]
>
> Version: 1.12 (1622)
>
> PID:    4330
> Thread: 0
>
> Exception:  EXC_BAD_ACCESS (0x0001)
> Codes:      KERN_INVALID_ADDRESS (0x0001) at 0xfdc07000
>
> Thread 0 Crashed:
> 0   libBLAS.dylib                      0x923fca6c ATL_thread_init + 64
> 1   libBLAS.dylib                      0x923f137c ATL_dptgemm + 200
> 2   libBLAS.dylib                      0x91e7f548  
> atl_f77wrap_dgemm__ + 104
> 3   libBLAS.dylib                      0x91e7e72c dgemm_ + 704
> 4   libR.dylib                         0x00214b8c matprod + 548
> (array.c:412)
> 5   libR.dylib                         0x00215418 do_matprod + 944
> (array.c:632)
> 6   libR.dylib                         0x00263b24 Rf_eval + 1536
> (eval.c:405)
> 7   libR.dylib                         0x00265b1c do_set + 224  
> (eval.c:1309)
> 8   libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 9   libR.dylib                         0x002652a4 do_begin + 136
> (eval.c:1058)
> 10  libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 11  libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 12  libR.dylib                         0x002652a4 do_begin + 136
> (eval.c:1058)
> 13  libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 14  libR.dylib                         0x00263fc0 Rf_applyClosure +  
> 952
> (eval.c:576)
> 15  libR.dylib                         0x00263b9c Rf_eval + 1656
> (eval.c:417)
> 16  libR.dylib                         0x00265b1c do_set + 224  
> (eval.c:1309)
> 17  libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 18  libR.dylib                         0x002652a4 do_begin + 136
> (eval.c:1058)
> 19  libR.dylib                         0x00263970 Rf_eval + 1100
> (eval.c:382)
> 20  libR.dylib                         0x00263fc0 Rf_applyClosure +  
> 952
> (eval.c:576)
> 21  libR.dylib                         0x00263b9c Rf_eval + 1656
> (eval.c:417)
> 22  org.R-project.R                    0x00014ff0  
> RGUI_ReplIteration + 500
> (crt.c:300)
> 23  org.R-project.R                    0x00014de0 RGUI_ReplConsole  
> + 148
> (crt.c:300)
> 24  org.R-project.R                    0x00014d34  
> run_REngineRmainloop + 156
> (crt.c:300)
> 25  org.R-project.R                    0x0000e1b4 -[REngine  
> runREPL] + 76
> (crt.c:300)
> 26  com.apple.Foundation               0x9287fcfc __NSFireTimer + 116
> 27  com.apple.CoreFoundation           0x9075edb0  
> __CFRunLoopDoTimer + 184
> 28  com.apple.CoreFoundation           0x9074b728 __CFRunLoopRun +  
> 1680
> 29  com.apple.CoreFoundation           0x9074acdc  
> CFRunLoopRunSpecific + 268
> 30  com.apple.HIToolbox                0x93123be0  
> RunCurrentEventLoopInMode
> + 264
> 31  com.apple.HIToolbox                0x93123274  
> ReceiveNextEventCommon +
> 380
> 32  com.apple.HIToolbox                0x931230e0
> BlockUntilNextEventMatchingListInMode + 96
> 33  com.apple.AppKit                   0x9361e1a4 _DPSNextEvent + 384
> 34  com.apple.AppKit                   0x9361de68 -[NSApplication
> nextEventMatchingMask:untilDate:inMode:dequeue:] + 116
> 35  com.apple.AppKit                   0x9361a3cc -[NSApplication  
> run] + 472
> 36  com.apple.AppKit                   0x9370ac1c NSApplicationMain  
> + 452
> 37  org.R-project.R                    0x00002dd0 _start + 392  
> (crt.c:267)
> 38  dyld                               0x8fe01048 _dyld_start + 60
>
> Thread 1:
> 0   libSystem.B.dylib                  0x9001efec select + 12
> 1   org.R-project.R                    0x0000435c -[RController  
> readThread:]
> + 524 (crt.c:300)
> 2   com.apple.Foundation               0x9287cf34  
> forkThreadForFunction +
> 108
> 3   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 2:
> 0   libSystem.B.dylib                  0x9004ca38  
> syscall_thread_switch + 8
> 1   com.apple.Foundation               0x92895330 +[NSThread
> sleepUntilDate:] + 152
> 2   com.apple.AppKit                   0x936bae60 -[NSUIHeartBeat
> _heartBeatThread:] + 1100
> 3   com.apple.Foundation               0x9287cf34  
> forkThreadForFunction +
> 108
> 4   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 3:
> 0   libSystem.B.dylib                  0x9002f68c kevent + 12
> 1   com.apple.DesktopServices          0x9278cad8
> TFSNotificationTask::FSNotificationTaskProc(void*) + 56
> 2   ...ple.CoreServices.CarbonCore     0x90b39690  
> PrivateMPEntryPoint + 76
> 3   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 4:
> 0   libSystem.B.dylib                  0x9002ca98  
> semaphore_wait_signal_trap
> + 8
> 1   libSystem.B.dylib                  0x9003127c pthread_cond_wait  
> + 508
> 2   ...ple.CoreServices.CarbonCore     0x90b39880 MPWaitOnQueue + 224
> 3   com.apple.DesktopServices          0x9278d330
> TNodeSyncTask::SyncTaskProc(void*) + 108
> 4   ...ple.CoreServices.CarbonCore     0x90b39690  
> PrivateMPEntryPoint + 76
> 5   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 5:
> 0   libSystem.B.dylib                  0x9000a778 mach_msg_trap + 8
> 1   libSystem.B.dylib                  0x9000a6bc mach_msg + 60
> 2   com.apple.CoreFoundation           0x9074b3d8 __CFRunLoopRun + 832
> 3   com.apple.CoreFoundation           0x9074acdc  
> CFRunLoopRunSpecific + 268
> 4   com.apple.Foundation               0x928a43e0
> +[NSURLConnection(NSURLConnectionInternal) _resourceLoadLoop:] + 264
> 5   com.apple.Foundation               0x9287cf34  
> forkThreadForFunction +
> 108
> 6   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 6:
> 0   libSystem.B.dylib                  0x9000a778 mach_msg_trap + 8
> 1   libSystem.B.dylib                  0x9000a6bc mach_msg + 60
> 2   com.apple.CoreFoundation           0x9074b3d8 __CFRunLoopRun + 832
> 3   com.apple.CoreFoundation           0x9074acdc  
> CFRunLoopRunSpecific + 268
> 4   com.apple.Foundation               0x928a5520 +[NSURLCache
> _diskCacheSyncLoop:] + 152
> 5   com.apple.Foundation               0x9287cf34  
> forkThreadForFunction +
> 108
> 6   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 7:
> 0   libSystem.B.dylib                  0x9000a778 mach_msg_trap + 8
> 1   libSystem.B.dylib                  0x9000a6bc mach_msg + 60
> 2   com.apple.CoreFoundation           0x9074b3d8 __CFRunLoopRun + 832
> 3   com.apple.CoreFoundation           0x9074acdc  
> CFRunLoopRunSpecific + 268
> 4   com.apple.Foundation               0x9288bec4 -[NSRunLoop
> runMode:beforeDate:] + 172
> 5   com.apple.Foundation               0x9288bdfc -[NSRunLoop run]  
> + 76
> 6   com.apple.WebKit                   0x958720a0 +[WebFileDatabase
> _syncLoop:] + 176
> 7   com.apple.Foundation               0x9287cf34  
> forkThreadForFunction +
> 108
> 8   libSystem.B.dylib                  0x9002c3d4 _pthread_body + 96
>
> Thread 0 crashed with PPC Thread State 64:
>   srr0: 0x00000000923fca6c srr1: 0x000000000200f030
> vrsave: 0x0000000000000000
>     cr: 0x42082242          xer: 0x0000000000000004   lr:  
> 0x00000000923fca64
> ctr: 0x0000000090030fdc
>     r0: 0x0000000054484441   r1: 0x00000000bfffb260   r2:  
> 0x00000000a1e7ca34
> r3: 0x00000000fdc07000
>     r4: 0x0000000000000001   r5: 0x0000000000000029   r6:  
> 0x0000000000000001
> r7: 0x0000000000000001
>     r8: 0x0000000000000029   r9: 0x00000000bfffb310  r10:  
> 0x000000009002b8b8
> r11: 0x00000000a1e76118
>    r12: 0x0000000090030fdc  r13: 0x0000000000000000  r14:  
> 0x0000000000000001
> r15: 0x00000000bfffb518
>    r16: 0x00000000bfffb57c  r17: 0x00000000bfffb56c  r18:  
> 0x00000000bfffb578
> r19: 0x0000000000000150
>    r20: 0x00000000bfffb56c  r21: 0x0000000000000150  r22:  
> 0x0000000000000010
> r23: 0x0000000014deace8
>    r24: 0x000000000000006f  r25: 0x000000000000006f  r26:  
> 0x0000000000000001
> r27: 0x0000000000000029
>    r28: 0x0000000014deae48  r29: 0x00000000bfffb310  r30:  
> 0x0000000000000001
> r31: 0x00000000923fca34
>
> Binary Images Description:
>     0x1000 -    0x38fff org.R-project.R 1.12 (1622)
> /Applications/R.app/Contents/MacOS/R
>    0x52000 -    0x84fff libreadline.5.0.dylib
> /Library/Frameworks/R.framework/Resources/lib/libreadline.5.0.dylib
>    0x98000 -    0xc3fff libncurses.5.dylib     /usr/lib/libncurses. 
> 5.dylib
>   0x205000 -   0x392fff libR.dylib
> /Library/Frameworks/R.framework/Resources/lib/libR.dylib
>   0x77b000 -   0x77bfff com.kitzkikz.Sogudi Sogudi 0.4.6 (0.4.6)
> /Users/roberto/Library/InputManagers/Sogudi/Sogudi.bundle/Contents/ 
> MacOS/Sog
> udi
>   0x7e5000 -   0x7e6fff tools.so
> /Library/Frameworks/R.framework/Resources/library/tools/libs/tools.so
>  0x5301000 -  0x5307fff com.apple.DictionaryServiceComponent 1.0.0
> /System/Library/Components/DictionaryService.component/Contents/ 
> MacOS/Dictio
> naryService
>  0x530c000 -  0x530ffff methods.so
> /Library/Frameworks/R.framework/Resources/library/methods/libs/ 
> methods.so
>  0x53a0000 -  0x53b5fff grDevices.so
> /Library/Frameworks/R.framework/Resources/library/grDevices/libs/ 
> grDevices.s
> o
>  0x545b000 -  0x5486fff stats.so
> /Library/Frameworks/R.framework/Resources/library/stats/libs/stats.so
>  0x5688000 -  0x568bfff com.apple.CharacterPaletteIM 1.0.2
> /System/Library/Components/CharacterPalette.component/Contents/ 
> MacOS/Charact
> erPalette
> 0x8fe00000 - 0x8fe51fff dyld 43.1    /usr/lib/dyld
> 0x90000000 - 0x901a6fff libSystem.B.dylib     /usr/lib/ 
> libSystem.B.dylib
> 0x901fe000 - 0x90202fff libmathCommon.A.dylib
> /usr/lib/system/libmathCommon.A.dylib
> 0x90204000 - 0x90257fff com.apple.CoreText 1.0.0 (???)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/CoreText.framework/Versions/A/CoreText
> 0x90284000 - 0x90335fff ATS
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ATS.framework/Versions/A/ATS
> 0x90364000 - 0x9069dfff com.apple.CoreGraphics 1.256.14 (???)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/CoreGraphics.framework/Versions/A/CoreGraphics
> 0x90728000 - 0x90801fff com.apple.CoreFoundation 6.4.2 (368.11)
> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
> CoreFoundatio
> n
> 0x9084a000 - 0x9084afff com.apple.CoreServices 10.4 (???)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> CoreServices
> 0x9084c000 - 0x9094efff libicucore.A.dylib     /usr/lib/ 
> libicucore.A.dylib
> 0x909a8000 - 0x90a2cfff libobjc.A.dylib     /usr/lib/libobjc.A.dylib
> 0x90a56000 - 0x90acafff com.apple.framework.IOKit 1.4 (???)
> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
> 0x90ae4000 - 0x90af6fff libauto.dylib     /usr/lib/libauto.dylib
> 0x90afd000 - 0x90dc2fff com.apple.CoreServices.CarbonCore 10.4.1  
> (611.1)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/Carb
> onCore.framework/Versions/A/CarbonCore
> 0x90e25000 - 0x90ea5fff com.apple.CoreServices.OSServices 4.0 (4.0.0)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/OSSe
> rvices.framework/Versions/A/OSServices
> 0x90eef000 - 0x90f2ffff com.apple.CFNetwork 10.4.2 (80)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/CFNe
> twork.framework/Versions/A/CFNetwork
> 0x90f44000 - 0x90f5cfff com.apple.WebServices 1.1.2 (1.1.0)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/WebS
> ervicesCore.framework/Versions/A/WebServicesCore
> 0x90f6c000 - 0x90feafff com.apple.SearchKit 1.0.3
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/Sear
> chKit.framework/Versions/A/SearchKit
> 0x9102f000 - 0x91056fff com.apple.Metadata 1.1 (121.6)
> /System/Library/Frameworks/CoreServices.framework/Versions/A/ 
> Frameworks/Meta
> data.framework/Versions/A/Metadata
> 0x91066000 - 0x91073fff libz.1.dylib     /usr/lib/libz.1.dylib
> 0x91076000 - 0x91238fff com.apple.security 4.0.1 (223)
> /System/Library/Frameworks/Security.framework/Versions/A/Security
> 0x9133a000 - 0x91343fff com.apple.DiskArbitration 2.1
> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/ 
> DiskArbitrat
> ion
> 0x9134a000 - 0x91371fff com.apple.SystemConfiguration 1.8.0
> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/ 
> SystemCo
> nfiguration
> 0x91384000 - 0x9138cfff libbsm.dylib     /usr/lib/libbsm.dylib
> 0x91390000 - 0x9140efff com.apple.audio.CoreAudio 3.0.1
> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
> 0x9144c000 - 0x9144cfff com.apple.ApplicationServices 10.4 (???)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Applicat
> ionServices
> 0x9144e000 - 0x91486fff com.apple.AE 1.5 (297)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/AE.framework/Versions/A/AE
> 0x914a1000 - 0x9156cfff com.apple.ColorSync 4.4
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ColorSync.framework/Versions/A/ColorSync
> 0x915c1000 - 0x91654fff com.apple.print.framework.PrintCore 4.0  
> (172.1)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/PrintCore.framework/Versions/A/PrintCore
> 0x9169a000 - 0x91757fff com.apple.QD 3.8.6 (???)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/QD.framework/Versions/A/QD
> 0x91795000 - 0x917f3fff com.apple.HIServices 1.5.0 (???)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/HIServices.framework/Versions/A/HIServices
> 0x91821000 - 0x91844fff com.apple.LangAnalysis 1.6
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/LangAnalysis.framework/Versions/A/LangAnalysis
> 0x91858000 - 0x9187dfff com.apple.FindByContent 1.5
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/FindByContent.framework/Versions/A/FindByContent
> 0x91890000 - 0x918d1fff com.apple.LaunchServices 10.4.3 (157)
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/LaunchServices.framework/Versions/A/LaunchServices
> 0x918ec000 - 0x91900fff com.apple.speech.synthesis.framework 3.3
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
> 0x9190e000 - 0x91944fff com.apple.ImageIO.framework 1.0.2
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/ImageIO
> 0x91958000 - 0x91a1afff libcrypto.0.9.7.dylib
> /usr/lib/libcrypto.0.9.7.dylib
> 0x91a66000 - 0x91a7bfff libcups.2.dylib     /usr/lib/libcups.2.dylib
> 0x91a80000 - 0x91a9cfff libJPEG.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
> 0x91aa1000 - 0x91b10fff libJP2.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libJP2.dylib
> 0x91b27000 - 0x91b2bfff libGIF.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
> 0x91b2d000 - 0x91b45fff libRaw.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libRaw.dylib
> 0x91b48000 - 0x91b8bfff libTIFF.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
> 0x91b92000 - 0x91babfff libPng.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libPng.dylib
> 0x91bb0000 - 0x91bb3fff libRadiance.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
> 0x91bb5000 - 0x91bb5fff com.apple.Accelerate 1.1.1 (Accelerate 1.1.1)
> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
> 0x91bb7000 - 0x91ca1fff com.apple.vImage 2.0
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vImage
> .framework/Versions/A/vImage
> 0x91ca9000 - 0x91cc8fff com.apple.Accelerate.vecLib 3.1.1 (vecLib  
> 3.1.1)
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib
> .framework/Versions/A/vecLib
> 0x91d34000 - 0x91d54fff libmx.A.dylib     /usr/lib/libmx.A.dylib
> 0x91d5a000 - 0x91dbffff libvMisc.dylib
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib
> .framework/Versions/A/libvMisc.dylib
> 0x91dc9000 - 0x91e5bfff libvDSP.dylib
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib
> .framework/Versions/A/libvDSP.dylib
> 0x91e75000 - 0x92405fff libBLAS.dylib
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib
> .framework/Versions/A/libBLAS.dylib
> 0x9244d000 - 0x9275dfff libLAPACK.dylib
> /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
> Frameworks/vecLib
> .framework/Versions/A/libLAPACK.dylib
> 0x9278a000 - 0x92815fff com.apple.DesktopServices 1.3
> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/ 
> Versions/A/D
> esktopServicesPriv
> 0x92857000 - 0x92a80fff com.apple.Foundation 6.4.1 (567.12)
> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
> 0x92b9e000 - 0x92c7cfff libxml2.2.dylib     /usr/lib/libxml2.2.dylib
> 0x92c9c000 - 0x92d8afff libiconv.2.dylib     /usr/lib/libiconv.2.dylib
> 0x92d9c000 - 0x92dbafff libGL.dylib
> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/ 
> libGL.dylib
> 0x92dc5000 - 0x92e1ffff libGLU.dylib
> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/ 
> libGLU.dyli
> b
> 0x92e3d000 - 0x92e3dfff com.apple.Carbon 10.4 (???)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
> 0x92e3f000 - 0x92e53fff com.apple.ImageCapture 3.0
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> ImageCaptu
> re.framework/Versions/A/ImageCapture
> 0x92e6b000 - 0x92e7bfff com.apple.speech.recognition.framework 3.4
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> SpeechReco
> gnition.framework/Versions/A/SpeechRecognition
> 0x92e87000 - 0x92e9cfff com.apple.securityhi 2.0 (203)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> SecurityHI
> .framework/Versions/A/SecurityHI
> 0x92eae000 - 0x92f35fff com.apple.ink.framework 101.2 (69)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Ink.framew
> ork/Versions/A/Ink
> 0x92f49000 - 0x92f54fff com.apple.help 1.0.3 (32)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Help.frame
> work/Versions/A/Help
> 0x92f5e000 - 0x92f8bfff com.apple.openscripting 1.2.2 (???)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> OpenScript
> ing.framework/Versions/A/OpenScripting
> 0x92fa5000 - 0x92fb5fff com.apple.print.framework.Print 4.0 (187)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Print.fram
> ework/Versions/A/Print
> 0x92fc1000 - 0x93027fff com.apple.htmlrendering 1.1.2
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> HTMLRender
> ing.framework/Versions/A/HTMLRendering
> 0x93058000 - 0x930aafff com.apple.NavigationServices 3.4.1 (3.4)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> Navigation
> Services.framework/Versions/A/NavigationServices
> 0x930d6000 - 0x930f3fff com.apple.audio.SoundManager 3.9
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> CarbonSoun
> d.framework/Versions/A/CarbonSound
> 0x93105000 - 0x93112fff com.apple.CommonPanels 1.2.2 (73)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> CommonPane
> ls.framework/Versions/A/CommonPanels
> 0x9311b000 - 0x9342bfff com.apple.HIToolbox 1.4.2 (???)
> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
> HIToolbox.
> framework/Versions/A/HIToolbox
> 0x93576000 - 0x93582fff com.apple.opengl 1.4.0
> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
> 0x93614000 - 0x93614fff com.apple.Cocoa 6.4 (???)
> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
> 0x93616000 - 0x93c47fff com.apple.AppKit 6.4.1 (824.1)
> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
> 0x93fd3000 - 0x9403dfff com.apple.CoreData 1.0 (46)
> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
> 0x94075000 - 0x9413ffff com.apple.audio.toolbox.AudioToolbox 1.4.1
> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/ 
> AudioToolbox
> 0x94193000 - 0x94193fff com.apple.audio.units.AudioUnit 1.4
> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
> 0x94195000 - 0x942f4fff com.apple.QuartzCore 1.4.1
> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
> 0x9433c000 - 0x94379fff libsqlite3.0.dylib     /usr/lib/ 
> libsqlite3.0.dylib
> 0x94381000 - 0x943ccfff libGLImage.dylib
> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/ 
> libGLImage.
> dylib
> 0x9456c000 - 0x9457bfff libCGATS.A.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
> 0x94583000 - 0x9458ffff libCSync.A.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
> 0x945d4000 - 0x945e8fff libRIP.A.dylib
> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
> Framewor
> ks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
> 0x94923000 - 0x94942fff com.apple.vecLib 3.1.1 (vecLib 3.1.1)
> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
> 0x95870000 - 0x958fafff com.apple.WebKit 412.6
> /System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
> 0x95954000 - 0x95a36fff com.apple.JavaScriptCore 412.3
> /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/ 
> JavaScript
> Core.framework/Versions/A/JavaScriptCore
> 0x95a8a000 - 0x95d78fff com.apple.WebCore 415.11
> /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/ 
> WebCore.fr
> amework/Versions/A/WebCore
> 0x95ef9000 - 0x95f22fff libxslt.1.dylib     /usr/lib/libxslt.1.dylib
> 0x96210000 - 0x96212fff com.apple.ExceptionHandling 1.2 (???)
> /System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ 
> ExceptionH
> andling
>
> Model: PowerBook5,4, BootROM 4.8.6f0, 1 processors, PowerPC G4   
> (1.2), 1.5
> GHz, 1 GB
> Graphics: ATI Mobility Radeon 9700, ATY,RV360M11, AGP, 128 MB
> Memory Module: SODIMM0/J25LOWER, 512 MB, DDR SDRAM, PC2700U-25330
> Memory Module: SODIMM1/J25UPPER, 512 MB, DDR SDRAM, PC2700U-25330
> AirPort: AirPort Extreme, 400.17 (3.90.34.0.p11)
> Modem: Jump, , V.92, Version 1.0,
> Bluetooth: Version 1.6.0f2, 2 service, 1 devices, 1 incoming serial  
> ports
> Network Service: AirPort, AirPort, en1
> PCI Card: TXN,PCIXXXX-00, cardbus, PC Card
> Parallel ATA Device: MATSHITADVD-R   UJ-835F,
> Parallel ATA Device: Hitachi HTS548080M9AT00, 74.53 GB
> USB Device: Bluetooth HCI, , Up to 12 Mb/sec, 500 mA
> USB Device: Apple Optical USB Mouse, Logitech, Up to 1.5 Mb/sec,  
> 500 mA
>
>
>


From jdg3 at CDC.GOV  Mon Jul 25 18:18:25 2005
From: jdg3 at CDC.GOV (Givens, Jimmie D.)
Date: Mon, 25 Jul 2005 12:18:25 -0400
Subject: [Rd] Solaris Installation assstance
Message-ID: <DF8D74DEC0769E4CBE4CF58D2AA3EA13050E0C8E@m-nchs-1.nchs.cdc.gov>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20050725/23669128/attachment.pl

From ripley at stats.ox.ac.uk  Mon Jul 25 19:12:02 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Jul 2005 18:12:02 +0100 (BST)
Subject: [Rd] Solaris Installation assstance
In-Reply-To: <DF8D74DEC0769E4CBE4CF58D2AA3EA13050E0C8E@m-nchs-1.nchs.cdc.gov>
References: <DF8D74DEC0769E4CBE4CF58D2AA3EA13050E0C8E@m-nchs-1.nchs.cdc.gov>
Message-ID: <Pine.LNX.4.61.0507251809350.6312@gannet.stats>

We need to see what happened prior to that message: plaes give the 
previous 20 lines of output.

We do know R 2.1.1 works on Solaris 2.8 out of the box: the see the 
comments in the R-admin manual.  For example, what compilers are you 
using? What make?

On Mon, 25 Jul 2005, Givens, Jimmie D. wrote:

> If anyone has suggestion as to the resolve for the problem described
> below, your assistance is needed and will be greatly appreciated.
>
> After repeated attempts to install R on a Sun Micro System Sunfire 480
> with Solaris 2.8 OS (Unix), I have not been successful in completing the
> installation of R v2.1.1 nor the earlier versions? At the close of
> the "make" command error codes 255 and 1 occur.
>
> Make: Fatal error: command failed for target 'libbz2.a'
>           Working directory /usr/local/R-2.1.1/src/extra/bzip2
>
> Make: Fatal error: command failed for target 'R'
>           Working directory /usr/local/R-2.1.1/src/extra/bzip2
>
> Make: Fatal error: command failed for target 'R'
>           Working directory /usr/local/R-2.1.1/src/extra/bzip2
>
> Make: Fatal error: command failed for target 'R'
>           Working directory /usr/local/R-2.1.1/src/extra
>
> Make: Fatal error: command failed for target 'R"
>           Working directory /usr/local/R-2.1.1/src
>
>
>
> Jimmie Givens
> Centers for Disease Control
> 3311 Toledo Road, Rm 3223
> Hyattsville, Maryland 20782
>
> Phone:  301.458.4236
> Fax:       404.929.2801
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From roebuck at odin.mdacc.tmc.edu  Mon Jul 25 19:40:16 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Mon, 25 Jul 2005 12:40:16 -0500 (CDT)
Subject: [Rd] Vector of S4 Objects
Message-ID: <Pine.OSF.4.58.0507251156430.492475@odin.mdacc.tmc.edu>

Can someone show me how to create a vector of S4 objects
or point me to an example?

Reading Green Book 7.1.5 to me implied I could simply add
"vector" to my object's representation. But it also implied
that would have no change to the implementation of my class,
but I did find a .Data slot defined afterwards (as though
I had used "structure" instead). But I possibly just
misunderstood that section.

Given the following example class:

require(methods)
setClass("Foo",
         representation(id = "character",
                        x = "integer",
                        y = "integer"))
Foo <- function(id = "", x, y) {
    new("Foo",
        id = id,
        x = as.integer(x),
        y = as.integer(y))
}

Would prefer to internalize such that "Foo" contained
a vector of its representation but something like this
would be a compromise if that's easier to implement.

foo.vec <- vector("Foo", 2)
foo.vec[1] <- Foo("first",1,2)
foo.vec[2] <- Foo("second",3,4)


TIA

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From zac at zjbnewton.demon.co.uk  Tue Jul 26 01:24:34 2005
From: zac at zjbnewton.demon.co.uk (zac@zjbnewton.demon.co.uk)
Date: Tue, 26 Jul 2005 01:24:34 +0200 (CEST)
Subject: [Rd] error in text.default (PR#8034)
Message-ID: <20050725232434.3A745A26B@slim.kubism.ku.dk>

Full_Name: roger newton
Version: 2.1.1
OS: SuSe linux 9.2
Submission from: (NULL) (80.176.228.157)


> data(trees)
> plot(trees)
Error in text.default(x, y, txt, cex = cex, font = font) : 
        X11 font at size 16 could not be loaded


Attempting to plot dataframe trees fails with error message as shown. 

Get similar message (but font size 22) when run demo(graphics).

Got same error with rpm of R from CRAN linux/SuSe/9.2 (with and without latest
patch) and with downloaded and compiled source code from CRAN (with and without
latest patch).

Is problem with R or fonts on my PC? Windows 2000 version of R on another
machine works OK


From sholland at napervillegi.com  Tue Jul 26 04:29:23 2005
From: sholland at napervillegi.com (sholland@napervillegi.com)
Date: Tue, 26 Jul 2005 04:29:23 +0200 (CEST)
Subject: [Rd] beginner finds a bug - crash induced. (PR#8035)
Message-ID: <20050726022923.E3F2CA274@slim.kubism.ku.dk>

Full_Name: Stephen Holland M.D.
Version: 2.1.1
OS: Mac OS X
Submission from: (NULL) (67.184.33.112)


I did a bunch of stuff, then did in sequence:

> state <- c("tas", "sa",  "qld", "nsw", "nsw", "nt",  "wa",  "wa",
+                   "qld", "vic", "nsw", "vic", "qld", "qld", "sa",  "tas",
+                   "sa",  "nt",  "wa",  "vic", "qld", "nsw", "nsw", "wa",
+                   "sa",  "act", "nsw", "vic", "vic", "act")
> factor(state)
 [1] tas sa  qld nsw nsw nt  wa  wa  qld vic nsw vic qld qld sa  tas sa  nt  wa

[20] vic qld nsw nsw wa  sa  act nsw vic vic act
Levels: act nsw nt qld sa tas vic wa
> table(state)
state
act nsw  nt qld  sa tas vic  wa 
  2   6   2   5   4   2   5   4 
> barplot(table(state))

And then boom goes the dynamite.

Doing these steps again did not reproduce the error.

Steve Holland  sholland at napervillegi.com

Crash report follows:

Date/Time:      2005-07-25 21:19:23 -0500
OS Version:     10.3.9 (Build 7W98)
Report Version: 2

Command: R
Path:    /Applications/R.app/Contents/MacOS/R
Version: 1.12 (1622)
PID:     639
Thread:  0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000000

Thread 0 Crashed:
0   libR.dylib               	0x010665c8 Rf_eval + 0xa4 (eval.c:300)
1   libR.dylib               	0x0103b218 R_run_onexits + 0xd4 (context.c:142)
2   libR.dylib               	0x01063eb4 jump_to_top_ex + 0x260 (errors.c:682)
3   com.apple.AppKit         	0x92fda908 -[NSToolbarButton sendAction:to:] +
0x4c
4   com.apple.AppKit         	0x92fda8a8 -[NSToolbarButton sendAction] + 0x50
5   com.apple.AppKit         	0x92f5a70c -[NSToolbarItemViewer mouseDown:] +
0x674
6   com.apple.AppKit         	0x92eb2a24 -[NSWindow sendEvent:] + 0x10e4
7   com.apple.AppKit         	0x92ea50d0 -[NSApplication sendEvent:] + 0xebc
8   com.apple.AppKit         	0x92ead500 -[NSApplication run] + 0x240
9   com.apple.AppKit         	0x92f69bec NSApplicationMain + 0x1d0
10  org.R-project.R          	0x00002dd0 _start + 0x188 (crt.c:267)
11  dyld                     	0x8fe1a278 _dyld_start + 0x64

Thread 1:
0   libSystem.B.dylib        	0x9000b42c select + 0xc
1   org.R-project.R          	0x0000435c -[RController readThread:] + 0x20c
2   com.apple.Foundation     	0x90a6a510 forkThreadForFunction + 0x6c
3   libSystem.B.dylib        	0x90024910 _pthread_body + 0x28

Thread 2:
0   libSystem.B.dylib        	0x900127b8 syscall_thread_switch + 0x8
1   com.apple.Foundation     	0x90a33330 +[NSThread sleepUntilDate:] + 0x98
2   com.apple.AppKit         	0x92e7a880 -[NSUIHeartBeat _heartBeatThread:] +
0x494
3   com.apple.Foundation     	0x90a6a510 forkThreadForFunction + 0x6c
4   libSystem.B.dylib        	0x90024910 _pthread_body + 0x28

Thread 3:
0   libSystem.B.dylib        	0x90007878 mach_msg_trap + 0x8
1   libSystem.B.dylib        	0x900073f8 mach_msg + 0x38
2   com.apple.CoreFoundation 	0x901c16e0 __CFRunLoopRun + 0x350
3   com.apple.CoreFoundation 	0x901c5e6c CFRunLoopRunSpecific + 0x148
4   com.apple.Foundation     	0x90a2d1b8 -[NSRunLoop runMode:beforeDate:] +
0xac
5   com.apple.Foundation     	0x90a45dbc -[NSRunLoop run] + 0x4c
6   com.apple.Foundation     	0x90a98054
+[NSURLConnection(NSURLConnectionInternal) _resourceLoadLoop:] + 0x20c
7   com.apple.Foundation     	0x90a6a510 forkThreadForFunction + 0x6c
8   libSystem.B.dylib        	0x90024910 _pthread_body + 0x28

Thread 4:
0   libSystem.B.dylib        	0x90007878 mach_msg_trap + 0x8
1   libSystem.B.dylib        	0x900073f8 mach_msg + 0x38
2   com.apple.CoreFoundation 	0x901c16e0 __CFRunLoopRun + 0x350
3   com.apple.CoreFoundation 	0x901c5e6c CFRunLoopRunSpecific + 0x148
4   com.apple.Foundation     	0x90a2d1b8 -[NSRunLoop runMode:beforeDate:] +
0xac
5   com.apple.Foundation     	0x90a45dbc -[NSRunLoop run] + 0x4c
6   com.apple.Foundation     	0x90a98594 +[NSURLCache _diskCacheSyncLoop:] +
0xa8
7   com.apple.Foundation     	0x90a6a510 forkThreadForFunction + 0x6c
8   libSystem.B.dylib        	0x90024910 _pthread_body + 0x28

Thread 5:
0   libSystem.B.dylib        	0x90007878 mach_msg_trap + 0x8
1   libSystem.B.dylib        	0x900073f8 mach_msg + 0x38
2   com.apple.CoreFoundation 	0x901c16e0 __CFRunLoopRun + 0x350
3   com.apple.CoreFoundation 	0x901c5e6c CFRunLoopRunSpecific + 0x148
4   com.apple.Foundation     	0x90a2d1b8 -[NSRunLoop runMode:beforeDate:] +
0xac
5   com.apple.Foundation     	0x90a45dbc -[NSRunLoop run] + 0x4c
6   com.apple.WebKit         	0x916eb584 +[WebFileDatabase _syncLoop:] + 0xa8
7   com.apple.Foundation     	0x90a6a510 forkThreadForFunction + 0x6c
8   libSystem.B.dylib        	0x90024910 _pthread_body + 0x28

PPC Thread State:
  srr0: 0x010665c8 srr1: 0x0200f030                vrsave: 0x00000000
    cr: 0x44044248  xer: 0x00000004   lr: 0x0106652c  ctr: 0x01066524
    r0: 0x00000001   r1: 0xbfffe790   r2: 0x011eb350   r3: 0x00000000
    r4: 0x0445f718   r5: 0x01847fb0   r6: 0x00000000   r7: 0x636b00ac
    r8: 0x011eafec   r9: 0x00001388  r10: 0x00419000  r11: 0x011993a4
   r12: 0x01066524  r13: 0x00000000  r14: 0x00000100  r15: 0x00000000
   r16: 0xa2ea1940  r17: 0xa2ea1940  r18: 0xa2e91940  r19: 0x00000000
   r20: 0xa2e71940  r21: 0xa2e9a098  r22: 0x011a652c  r23: 0x00000008
   r24: 0x00000000  r25: 0x0445f718  r26: 0x011a652c  r27: 0x011a652c
   r28: 0x00000000  r29: 0x011a6e70  r30: 0xbfffbf10  r31: 0x0106652c

Binary Images Description:
    0x1000 -    0x38fff org.R-project.R 1.12 (1622)
/Applications/R.app/Contents/MacOS/R
   0x97000 -    0xc9fff libreadline.5.0.dylib 
/Library/Frameworks/R.framework/Resources/lib/libreadline.5.0.dylib
  0x7ce000 -   0x7d1fff methods.so 
/Library/Frameworks/R.framework/Resources/library/methods/libs/methods.so
 0x1008000 -  0x1195fff libR.dylib 
/Library/Frameworks/R.framework/Resources/lib/libR.dylib
 0x173f000 -  0x1740fff tools.so 
/Library/Frameworks/R.framework/Resources/library/tools/libs/tools.so
 0x457e000 -  0x4593fff grDevices.so 
/Library/Frameworks/R.framework/Resources/library/grDevices/libs/grDevices.so
 0x46c1000 -  0x46ecfff stats.so 
/Library/Frameworks/R.framework/Resources/library/stats/libs/stats.so
 0x47be000 -  0x47c2fff lapack.so 
/Library/Frameworks/R.framework/Resources/modules/lapack.so
 0x5429000 -  0x5442fff com.epson.print.pde.PrintSetting.SC740 1.29
/Library/Printers/EPSON/SC740.plugin/Contents/PDEs/PrintSetting.plugin/Contents/MacOS/PrintSetting_W
 0x54c3000 -  0x54d8fff com.epson.print.pde.ColorManagement.SC740 1.29
/Library/Printers/EPSON/SC740.plugin/Contents/PDEs/ColorManagement.plugin/Contents/MacOS/ColorManagement_W
 0x555b000 -  0x5595fff vfonts.so 
/Library/Frameworks/R.framework/Resources/modules/vfonts.so
 0x5650000 -  0x5658fff com.apple.print.converter.plugin 3.0
/System/Library/Printers/CVs/Converter.plugin/Contents/MacOS/Converter
0x76c02000 - 0x76c12fff com.apple.Accelerate.vecLib 3.0.3 (vecLib 3.0.3)
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
0x806c0000 - 0x806e9fff libxslt.1.dylib 	/usr/lib/libxslt.1.dylib
0x80830000 - 0x8090efff libxml2.2.dylib 	/usr/lib/libxml2.2.dylib
0x86e30000 - 0x86e52fff libCFilter.A.dylib 
/System/Library//Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Resources/libCFilter.A.dylib
0x880a0000 - 0x880a7fff libLW8Utils.dylib 
/System/Library/Printers/Libraries/libLW8Utils.dylib
0x882a0000 - 0x882c6fff libConverter.dylib 
/System/Library/Printers/Libraries/libConverter.dylib
0x882df000 - 0x8831efff libLW8Converter.dylib 
/System/Library/Printers/Libraries/libLW8Converter.dylib
0x89370000 - 0x8938afff com.epson.print.UIInterpreter 1.41
/Library/Printers/EPSON/Libraries/UI Interpreter.framework/Versions/D/UI
Interpreter
0x89bb0000 - 0x89bb1fff com.epson.print.EPTools 1.41
/Library/Printers/EPSON/Libraries/EPTools.framework/Versions/D/EPTools
0x8c3e4000 - 0x8c51afff com.apple.vImage 1.0.0 (1.2.0)
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
0x8dcb0000 - 0x8dcb2fff com.apple.ExceptionHandling 1.2 (???)
/System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ExceptionHandling
0x8fc90000 - 0x8fc90fff com.apple.Accelerate 1.0.3 (Accelerate 1.0.3)
/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
0x8fe00000 - 0x8fe4ffff dyld 	/usr/lib/dyld
0x90000000 - 0x9014ffff libSystem.B.dylib 	/usr/lib/libSystem.B.dylib
0x901c0000 - 0x9026dfff com.apple.CoreFoundation 6.3.7 (299.35)
/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
0x902b0000 - 0x90529fff com.apple.CoreServices.CarbonCore 10.3.7
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x90584000 - 0x905d4fff com.apple.HIServices 1.4.1 (0.0.1d1)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x90610000 - 0x9069afff com.apple.CoreServices.OSServices 3.0.1
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
0x90700000 - 0x90700fff com.apple.CoreServices 10.3 (???)
/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x90702000 - 0x90769fff com.apple.audio.CoreAudio 2.1.3
/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x907c7000 - 0x907dafff com.apple.speech.synthesis.framework 3.2
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x907f0000 - 0x907f9fff com.apple.DiskArbitration 2.0.5
/System/Library/PrivateFrameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x90810000 - 0x90810fff com.apple.ApplicationServices 1.0 (???)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
0x90830000 - 0x9089ffff libobjc.A.dylib 	/usr/lib/libobjc.A.dylib
0x908c5000 - 0x908fdfff com.apple.AE 1.4
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
0x90940000 - 0x909b3fff com.apple.DesktopServices 1.2.5
/System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
0x909f0000 - 0x90a04fff libCGATS.A.dylib 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x90a20000 - 0x90b7bfff com.apple.Foundation 6.3.7 (500.59)
/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x90c32000 - 0x90c3afff libbsm.dylib 	/usr/lib/libbsm.dylib
0x90c4d000 - 0x90c58fff libCSync.A.dylib 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x90ec0000 - 0x90ec0fff com.apple.Cocoa 6.3 (???)
/System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
0x910b0000 - 0x91101fff com.apple.bom 1.2.5 (63.2)
/System/Library/PrivateFrameworks/Bom.framework/Versions/A/Bom
0x912e0000 - 0x912f7fff com.apple.LangAnalysis 1.5.4
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x91303000 - 0x91372fff com.apple.framework.IOKit 1.3.6 (???)
/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x913a0000 - 0x9145ffff ColorSync 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
0x915e0000 - 0x91699fff com.apple.QD 3.4.67 (???)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
0x916d9000 - 0x9176ffff com.apple.WebKit 312.1
/System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
0x917e0000 - 0x917f0fff com.apple.speech.recognition.framework 3.3
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x91810000 - 0x9182afff com.apple.openscripting 1.2.1 (???)
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
0x91850000 - 0x91860fff com.apple.ImageCapture 2.1.5
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x91890000 - 0x9189cfff com.apple.help 1.0.1
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
0x918c0000 - 0x918cdfff com.apple.CommonPanels 1.2.1 (1.0)
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x918f0000 - 0x9193efff com.apple.print.framework.Print 3.3
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
0x91990000 - 0x9199bfff com.apple.securityhi 1.2 (90)
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
0x91a40000 - 0x91ab3fff com.apple.NavigationServices 3.3.3
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/NavigationServices.framework/Versions/A/NavigationServices
0x91b10000 - 0x91b2afff libPDFRIP.A.dylib 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libPDFRIP.A.dylib
0x91b50000 - 0x91b5ffff libPSRIP.A.dylib 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libPSRIP.A.dylib
0x91b80000 - 0x91b93fff libRIP.A.dylib 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x91ebd000 - 0x91ebdfff com.apple.Carbon 10.3 (???)
/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x92070000 - 0x92096fff com.apple.FindByContent 1.4 (1.2)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/FindByContent.framework/Versions/A/FindByContent
0x920c0000 - 0x922a7fff com.apple.security 2.3 (176)
/System/Library/Frameworks/Security.framework/Versions/A/Security
0x92430000 - 0x92468fff com.apple.LaunchServices 10.3.5 (98.4)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x927b2000 - 0x927e0fff libssl.0.9.7.dylib 	/usr/lib/libssl.0.9.7.dylib
0x927f0000 - 0x92827fff com.apple.CFNetwork 1.2.1 (7)
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
0x92880000 - 0x92c05fff com.apple.HIToolbox 1.3.6 (???)
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x92e70000 - 0x9336ffff com.apple.AppKit 6.3.8 (743.39)
/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x939a0000 - 0x939b4fff libcups.2.dylib 	/usr/lib/libcups.2.dylib
0x939d0000 - 0x939d4fff libmathCommon.A.dylib 
/usr/lib/system/libmathCommon.A.dylib
0x94120000 - 0x9414bfff libncurses.5.dylib 	/usr/lib/libncurses.5.dylib
0x9419b000 - 0x94253fff com.apple.audio.toolbox.AudioToolbox 1.3.3
/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x9450a000 - 0x9450afff com.apple.audio.units.AudioUnit 1.3.3
/System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x945b0000 - 0x945b9fff libz.1.dylib 	/usr/lib/libz.1.dylib
0x94610000 - 0x9462afff libresolv.9.dylib 	/usr/lib/libresolv.9.dylib
0x94650000 - 0x946affff com.apple.SearchKit 1.0.2
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
0x946ed000 - 0x94708fff com.apple.SystemConfiguration 1.7.1 (???)
/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
0x94c57000 - 0x94ceafff com.apple.print.framework.PrintCore 3.3
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x952a8000 - 0x952c0fff com.apple.WebServices 1.1.1 (1.1.0)
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
0x954c0000 - 0x95ac6fff libBLAS.dylib 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
0x95b20000 - 0x95df0fff libLAPACK.dylib 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
0x95e40000 - 0x95eadfff libvDSP.dylib 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
0x95f00000 - 0x95f20fff libvMisc.dylib 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
0x96165000 - 0x96182fff com.apple.audio.SoundManager 3.9
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
0x961b0000 - 0x96292fff com.apple.JavaScriptCore 1.2 (312)
/System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
0x968d0000 - 0x969b2fff libicucore.A.dylib 	/usr/lib/libicucore.A.dylib
0x96a20000 - 0x96ae2fff libcrypto.0.9.7.dylib 	/usr/lib/libcrypto.0.9.7.dylib
0x96b50000 - 0x96bdffff ATS 
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
0x96c00000 - 0x96c8cfff com.apple.ink.framework 101.1.4 (55.12)
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
0x96cb0000 - 0x96d9efff libiconv.2.dylib 	/usr/lib/libiconv.2.dylib
0x96e80000 - 0x96e90fff com.apple.vecLib 3.0.3 (vecLib 3.0.3)
/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
0x96eca000 - 0x971b0fff com.apple.WebCore 315
/System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
0x97335000 - 0x9739efff com.apple.htmlrendering 1.1.2
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
0x973cf000 - 0x976a7fff com.apple.CoreGraphics 1.203.30 (???)
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics


From ripley at stats.ox.ac.uk  Tue Jul 26 08:07:27 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 26 Jul 2005 08:07:27 +0200 (CEST)
Subject: [Rd] error in text.default (PR#8034)
Message-ID: <20050726060727.B6F54A26B@slim.kubism.ku.dk>

This is not an error in R but in your X11 fonts setup.  It is R reporting 
your configuration problem to you.

What dpi is your screen?  If more than 75dpi (very likely these days), do 
you have 100dpi fonts installed and in your path?  We have seen that 
configuration mistake cause this on SuSe before.

On Tue, 26 Jul 2005 zac at zjbnewton.demon.co.uk wrote:

> Full_Name: roger newton
> Version: 2.1.1
> OS: SuSe linux 9.2
> Submission from: (NULL) (80.176.228.157)
>
>
>> data(trees)
>> plot(trees)
> Error in text.default(x, y, txt, cex = cex, font = font) :
>        X11 font at size 16 could not be loaded
>
>
> Attempting to plot dataframe trees fails with error message as shown.
>
> Get similar message (but font size 22) when run demo(graphics).
>
> Got same error with rpm of R from CRAN linux/SuSe/9.2 (with and without latest
> patch) and with downloaded and compiled source code from CRAN (with and without
> latest patch).
>
> Is problem with R or fonts on my PC? Windows 2000 version of R on another
> machine works OK


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jul 26 11:06:22 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Jul 2005 10:06:22 +0100 (BST)
Subject: [Rd] density() fails if x contains Inf or -Inf (PR#8033)
In-Reply-To: <20050725131248.5C50CA24F@slim.kubism.ku.dk>
References: <20050725131248.5C50CA24F@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0507261004190.23862@gannet.stats>

The underlying problem here BTW is that sum is promoting logical to double 
not integer, unlike the rest of its Summary group.  This is an 
unintentional side effect of a bug fix a while back, and I have now 
corrected it.

On Mon, 25 Jul 2005 michael.beer at unifr.ch wrote:

> Full_Name: Michael Beer
> Version: 2.1.0 and 2.1.1
> OS: linux-gnu and mingw32
> Submission from: (NULL) (134.21.49.141)
>
>
> The command "density(c(0.5,0.6,Inf,0.7))" fails saying "Wrong type for argument
> 2 in call to massdist". This problem can be resolved by replacing "nx = nx" by
> "nx = as.integer(nx)" in the call to massdist. When there are infinite values,
> the value of sum(x.finite) is attributed to nx before. Thus nx is changed to
> class "numeric" instead of "integer".

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Tue Jul 26 11:26:14 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 26 Jul 2005 11:26:14 +0200 (CEST)
Subject: [Rd] beginner finds a bug - crash induced. (PR#8035)
Message-ID: <20050726092614.86CAAA258@slim.kubism.ku.dk>

Well,
you say yourself it wasn't reproducible.  So it could have been
anything that "crashed" you R , cosmic radiation, a bolt of
lightning reversing a bit in your computer memory ,...  :-)
many things rather than a bug in R.

But before dropping this report completely,
can you try

for(i in 1:1000) {
    state <- c("tas", "sa",  "qld", "nsw", "nsw", "nt",  "wa",  "wa",
               "qld", "vic", "nsw", "vic", "qld", "qld", "sa",  "tas",
               "sa",  "nt",  "wa",  "vic", "qld", "nsw", "nsw", "wa",
               "sa",  "act", "nsw", "vic", "vic", "act")
    print(factor(state))
    print(table(state))
    barplot(table(state))
}

which does what you did, but 1000 times --- "of course" completely
flawlessly for me..

Martin Maechler, ETH Zurich

>>>>> "sholland" == sholland  <sholland at napervillegi.com>
>>>>>     on Tue, 26 Jul 2005 04:29:23 +0200 (CEST) writes:

    sholland> Full_Name: Stephen Holland M.D.  
    sholland> Version: 2.1.1
    sholland> OS: Mac OS X


From kjetil at acelerate.com  Tue Jul 26 02:59:27 2005
From: kjetil at acelerate.com (Kjetil Brinchmann Halvorsen)
Date: Mon, 25 Jul 2005 20:59:27 -0400
Subject: [Rd] docu buglets for ar and friends
Message-ID: <42E58AEF.60406@acelerate.com>

This is R2.1.1

The documantation opened by
?ar, section for returned value, does not document all the components of 
the returned
list. In addition to the 13 components documented, it also contains the 
component
$frequency
This also applies to the help page opened by
?ar.ols

-- 

Kjetil Halvorsen.

Peace is the most effective weapon of mass construction.
               --  Mahdi Elmandjra





-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.


From ripley at stats.ox.ac.uk  Tue Jul 26 15:55:43 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Jul 2005 14:55:43 +0100 (BST)
Subject: [Rd] docu buglets for ar and friends
In-Reply-To: <42E58AEF.60406@acelerate.com>
References: <42E58AEF.60406@acelerate.com>
Message-ID: <Pine.LNX.4.61.0507261451060.3804@gannet.stats>

On Mon, 25 Jul 2005, Kjetil Brinchmann Halvorsen wrote:

> This is R2.1.1
>
> The documantation opened by
> ?ar, section for returned value, does not document all the components of
> the returned
> list. In addition to the 13 components documented, it also contains the
> component
> $frequency
> This also applies to the help page opened by
> ?ar.ols

There is also $call.  Such lists are not always comprehensive since there 
may be `private' components too.  So I would not consider undocumented 
components to be bugs unless they are things end users might need and are 
not otherwise available.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nikko at hailmail.net  Tue Jul 26 21:56:41 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Tue, 26 Jul 2005 14:56:41 -0500
Subject: [Rd] evaluating variance functions in nlme
Message-ID: <1122407801.26649.239292761@webmail.messagingengine.com>

Hi,
I guess this is a final plea, and maybe this should go to R-help but
here goes.
I am writing a set of functions for calibration and prediction, and to
calculate standard 
errors and intervals I need the variance function to be evaluated at new
prediction points.
So for instance

fit<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower())
fit2<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower(form=~foo))

Now using fit or fit2 I would like to get the variance function
evaluated at new points. 
I have played with getCovariateFormula, and looked at Initialize.gnls,
summary etc.
but it is not clear to me how to evaluate the form component, especially
in the case of fit
above where form=~fitted(.), in any safe way.

I can grep for "fitted" in the formula eg.
grep("fitted",deparse(getCovariateFormula(fit$modelStruct$varFunc)))
and try to calculate predicted values from the model for the new points
but how to substitute back in the new terms?

I don't need this problem solved on a platter, I just need to unedrstand
an approach,
because my stabs are failing.

Thanks

Nicholas


From roebuck at odin.mdacc.tmc.edu  Wed Jul 27 00:16:49 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Tue, 26 Jul 2005 17:16:49 -0500 (CDT)
Subject: [Rd] Error registering finalizer
Message-ID: <Pine.OSF.4.58.0507261702310.390023@odin.mdacc.tmc.edu>

What exactly is a reference object? I'm getting this error
message attempting to register a finalizer:

        can only weakly reference/finalize reference objects

I don't see any problem with the code... Here's what appears
to be the relevant portions.


setClass("PDNNObject",
         representation(handle = "externalptr",
                        id     = "character",
                        "VIRTUAL"),
         prototype=list(handle = NULL))
setClass("ProbesetGE",
         representation("PDNNObject"))

----

static void ProbesetGE_finalizer(SEXP vntData)
{
    Rprintf("In ProbesetGE_finalizer()\n");
    /* Deallocate memory of structure fields */
}

static SEXP AllocateProbesetGEPtr(unsigned count)
{
    return R_AllocatePtr(count,
                         sizeof(ProbesetGE_t),
                         ProbesetGETypeTag));
}

SEXP R_PDNN_newProbesetGE(unsigned count)
{
    SEXP vntObj;
    SEXP vntClassDef;
    SEXP vntData;
    SEXP vntAttr;
    SEXP vntHandle;
    unsigned n = 0;

    PROTECT(vntClassDef = MAKE_CLASS(PROBESET_GE_CLASS_NAME)); n++;
    PROTECT(vntObj      = NEW_OBJECT(vntClassDef)); n++;
    PROTECT(vntHandle   = AllocateProbesetGEPtr(count)); n++;
    SET_SLOT(vntObj, HandleSlotSymbol, vntHandle);

    PROTECT(vntData = R_ExternalPtrProtected(vntHandle)); n++;
    PROTECT(vntAttr = NEW_INTEGER(1)); n++;
    INTEGER(vntAttr)[0] = count;
    SET_COUNT(vntData, vntAttr);

>>>>> Problem comes here <<<<<<
    R_RegisterCFinalizer(vntData, (R_CFinalizer_t)ProbesetGE_finalizer);

    UNPROTECT(n);

    return vntObj;
}


Thanks for any pointers...

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From roebuck at odin.mdacc.tmc.edu  Wed Jul 27 02:54:59 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Tue, 26 Jul 2005 19:54:59 -0500 (CDT)
Subject: [Rd] Error registering finalizer
In-Reply-To: <Pine.OSF.4.58.0507261702310.390023@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507261702310.390023@odin.mdacc.tmc.edu>
Message-ID: <Pine.OSF.4.58.0507261943150.87208@odin.mdacc.tmc.edu>

On Tue, 26 Jul 2005, Paul Roebuck wrote:

> What exactly is a reference object? I'm getting this error
> message attempting to register a finalizer:
>
>         can only weakly reference/finalize reference objects

Still don't have an explanation for the above but the code
now works with the following mods.

-static void ProbesetGE_finalizer(SEXP vntData)
+static void ProbesetGE_finalizer(SEXP vntHandle)

-R_RegisterCFinalizer(vntData, (R_CFinalizer_t)ProbesetGE_finalizer);
+R_RegisterCFinalizer(vntHandle, (R_CFinalizer_t)ProbesetGE_finalizer);

Original thought was that a finalizer was a routine that
ran prior to an object's destruction (like a destructor).
Apparently, only certain objects can have finalizers.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From smyth at wehi.edu.au  Wed Jul 27 04:52:15 2005
From: smyth at wehi.edu.au (smyth@wehi.edu.au)
Date: Wed, 27 Jul 2005 04:52:15 +0200 (CEST)
Subject: [Rd] R 2.1.1: read.table processes C-style escapes (PR#8037)
Message-ID: <20050727025215.D9E9AAF4B@slim.kubism.ku.dk>

In R 2.1.1, the default behaviour of scan() was changed to process all 
C-style escapes, even when a delimiter was specified using the 'sep' 
argument. A new argument 'allowEscapes' was introduced to turn this 
processing off.

Because read.table() calls scan(), read.table() inherits the new default 
behaviour of scan() but without a way to turn it off. For example, reading 
a file testdata.txt' containing

X
A
\0
C

produces

 > read.delim("testdata.txt")
[1] X
<0 rows> (or 0-length row.names)

It seems that all the occurances of scan() within read.table() need to have 
'allowEscapes=FALSE' added to the argument string.

Gordon

 > version
          _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status   Patched
major    2
minor    1.1
year     2005
month    07
day      22
language R
---------------------------------------------------------------------------------------
Dr Gordon K Smyth, Senior Research Scientist, Bioinformatics,
Walter and Eliza Hall Institute of Medical Research,
1G Royal Parade, Parkville, Vic 3050, Australia
Tel: (03) 9345 2326, Fax (03) 9347 0852,
Email: smyth at wehi.edu.au, www: http://www.statsci.org


From smyth at wehi.edu.au  Wed Jul 27 06:20:38 2005
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Wed, 27 Jul 2005 14:20:38 +1000
Subject: [Rd] R 2.1.1: read.table processes C-style escapes  (PR#8037)
Message-ID: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>


>To: r-bugs at biostat.ku.dk
>From: Gordon Smyth <smyth at wehi.edu.au>
>Subject: R 2.1.1: read.table processes C-style escapes
>Date: Wed, 27 Jul 2005 12:51:45 +1000
>
>In R 2.1.1, the default behaviour of scan() was changed to process all 
>C-style escapes, even when a delimiter was specified using the 'sep' 
>argument. A new argument 'allowEscapes' was introduced to turn this 
>processing off.
>
>Because read.table() calls scan(), read.table() inherits the new default 
>behaviour of scan() but without a way to turn it off. For example, reading 
>a file testdata.txt' containing
>
>X
>A
>\0
>C
>
>produces
>
> > read.delim("testdata.txt")
>[1] X
><0 rows> (or 0-length row.names)
>
>It seems that all the occurances of scan() within read.table() need to 
>have 'allowEscapes=FALSE' added to the argument string.

Or, alternatively and perhaps better, scan() could regain some of its 
earlier behaviour, to process C-style escapes by default only when 'sep' is 
NULL or empty. It seems, to me at least, that C-style escape sequences make 
sense only in some sort of source code, and delimited text can't be source 
code.

Gordon

>Gordon
>
> > version
>          _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status   Patched
>major    2
>minor    1.1
>year     2005
>month    07
>day      22
>language R


From ripley at stats.ox.ac.uk  Wed Jul 27 08:59:21 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Jul 2005 07:59:21 +0100 (BST)
Subject: [Rd] R 2.1.1: read.table processes C-style escapes  (PR#8037)
In-Reply-To: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>
References: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>
Message-ID: <Pine.LNX.4.61.0507270757580.21618@gannet.stats>

This seems of historical interest only.

allowEscapes is currently (in R-devel, where development happens) an 
argument to read.table.

We do ask people to check the current version!

On Wed, 27 Jul 2005, Gordon Smyth wrote:

>
>> To: r-bugs at biostat.ku.dk
>> From: Gordon Smyth <smyth at wehi.edu.au>
>> Subject: R 2.1.1: read.table processes C-style escapes
>> Date: Wed, 27 Jul 2005 12:51:45 +1000
>>
>> In R 2.1.1, the default behaviour of scan() was changed to process all
>> C-style escapes, even when a delimiter was specified using the 'sep'
>> argument. A new argument 'allowEscapes' was introduced to turn this
>> processing off.
>>
>> Because read.table() calls scan(), read.table() inherits the new default
>> behaviour of scan() but without a way to turn it off. For example, reading
>> a file testdata.txt' containing
>>
>> X
>> A
>> \0
>> C
>>
>> produces
>>
>>> read.delim("testdata.txt")
>> [1] X
>> <0 rows> (or 0-length row.names)
>>
>> It seems that all the occurances of scan() within read.table() need to
>> have 'allowEscapes=FALSE' added to the argument string.
>
> Or, alternatively and perhaps better, scan() could regain some of its
> earlier behaviour, to process C-style escapes by default only when 'sep' is
> NULL or empty. It seems, to me at least, that C-style escape sequences make
> sense only in some sort of source code, and delimited text can't be source
> code.
>
> Gordon
>
>> Gordon
>>
>>> version
>>          _
>> platform i386-pc-mingw32
>> arch     i386
>> os       mingw32
>> system   i386, mingw32
>> status   Patched
>> major    2
>> minor    1.1
>> year     2005
>> month    07
>> day      22
>> language R
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From smyth at wehi.edu.au  Wed Jul 27 09:12:05 2005
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Wed, 27 Jul 2005 17:12:05 +1000
Subject: [Rd] R 2.1.1: read.table processes C-style escapes   (PR#8037)
In-Reply-To: <Pine.LNX.4.61.0507270757580.21618@gannet.stats>
References: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>
	<Pine.LNX.4.61.0507270757580.21618@gannet.stats>
Message-ID: <6.2.1.2.1.20050727170703.021d08d8@imaphost.wehi.edu.au>

Thanks for the reply. Apologies for checking only R patched rather than 
R-devel.

I guess that this means that someone must have a use for allowEscapes=TRUE 
when read reading a file in table format into a data frame. It is hard to 
imagine.

Gordon

At 04:59 PM 27/07/2005, Prof Brian Ripley wrote:
>This seems of historical interest only.
>
>allowEscapes is currently (in R-devel, where development happens) an 
>argument to read.table.
>
>We do ask people to check the current version!


From ripley at stats.ox.ac.uk  Wed Jul 27 09:13:37 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Jul 2005 08:13:37 +0100 (BST)
Subject: [Rd] Error registering finalizer
In-Reply-To: <Pine.OSF.4.58.0507261943150.87208@odin.mdacc.tmc.edu>
References: <Pine.OSF.4.58.0507261702310.390023@odin.mdacc.tmc.edu>
	<Pine.OSF.4.58.0507261943150.87208@odin.mdacc.tmc.edu>
Message-ID: <Pine.LNX.4.61.0507270811260.21618@gannet.stats>

On Tue, 26 Jul 2005, Paul Roebuck wrote:

> On Tue, 26 Jul 2005, Paul Roebuck wrote:
>
>> What exactly is a reference object? I'm getting this error
>> message attempting to register a finalizer:
>>
>>         can only weakly reference/finalize reference objects
>
> Still don't have an explanation for the above but the code
> now works with the following mods.
>
> -static void ProbesetGE_finalizer(SEXP vntData)
> +static void ProbesetGE_finalizer(SEXP vntHandle)
>
> -R_RegisterCFinalizer(vntData, (R_CFinalizer_t)ProbesetGE_finalizer);
> +R_RegisterCFinalizer(vntHandle, (R_CFinalizer_t)ProbesetGE_finalizer);
>
> Original thought was that a finalizer was a routine that
> ran prior to an object's destruction (like a destructor).

Do you have a reference for where you got that from?

> Apparently, only certain objects can have finalizers.

Yes.  See http://www.stat.uiowa.edu/~luke/R/references.html (linked off 
the developer site).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Jul 27 09:21:41 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Jul 2005 08:21:41 +0100 (BST)
Subject: [Rd] R 2.1.1: read.table processes C-style escapes   (PR#8037)
In-Reply-To: <6.2.1.2.1.20050727170703.021d08d8@imaphost.wehi.edu.au>
References: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>
	<Pine.LNX.4.61.0507270757580.21618@gannet.stats>
	<6.2.1.2.1.20050727170703.021d08d8@imaphost.wehi.edu.au>
Message-ID: <Pine.LNX.4.61.0507270813520.21618@gannet.stats>

On Wed, 27 Jul 2005, Gordon Smyth wrote:

> Thanks for the reply. Apologies for checking only R patched rather than 
> R-devel.
>
> I guess that this means that someone must have a use for allowEscapes=TRUE 
> when read reading a file in table format into a data frame. It is hard to 
> imagine.

Octal and hex escapes are a common way to cope with different encodings.

I would not want R limited by the imagination of a single user, let alone 
a Windows-only user.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lyris-admin at groups.ittoolbox.com  Wed Jul 27 10:56:50 2005
From: lyris-admin at groups.ittoolbox.com (Lyris ListManager)
Date: Wed, 27 Jul 2005 04:56:50 -0400
Subject: [Rd] (no subject)
Message-ID: <LYRIS0-1122454610--2588-lyris-admin@groups.ittoolbox.com>

Sorry, but Lyris ListManager did not find your email address
-> "r-devel at stat.math.ethz.ch"

listed as a member of clarify-l.

Only members of clarify-l are allowed to contribute messages.

Because Lyris ListManager could not confirm that you are a member of clarify-l,
your message was not accepted.

---

Return-Path: <r-devel at stat.math.ethz.ch>
Received: from stat.math.ethz.ch ([83.112.215.205]) by  with SMTP (Lyris ListManager WIN32 version 7.0f); Wed, 27 Jul 2005 04:56:40 -0400
From: r-devel at stat.math.ethz.ch
To: clarify-l at openitx.com
Subject: 
Date: Wed, 27 Jul 2005 10:50:34 +0200
MIME-Version: 1.0
Content-Type: text/plain;
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000

Your message was undeliverable due to the following reason(s):

Your message was not delivered because the destination computer was
unreachable within the allowed queue period. The amount of time
a message is queued before it is returned depends on local configura-
tion parameters.

Most likely there is a network problem that prevented delivery, but
it is also possible that the computer is turned off, or does not
have a mail system running right now.

Your message was not delivered within 3 days:
Host 112.234.51.203 is not responding.

The following recipients did not receive this message:


Please reply to postmaster at stat.math.ethz.ch
if you feel this message to be in error.


From smyth at wehi.edu.au  Wed Jul 27 10:55:02 2005
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Wed, 27 Jul 2005 18:55:02 +1000
Subject: [Rd] R 2.1.1: read.table processes C-style escapes (PR#8037)
In-Reply-To: <Pine.LNX.4.61.0507270813520.21618@gannet.stats>
References: <6.2.1.2.1.20050727141319.021c8c40@imaphost.wehi.edu.au>
	<Pine.LNX.4.61.0507270757580.21618@gannet.stats>
	<6.2.1.2.1.20050727170703.021d08d8@imaphost.wehi.edu.au>
	<Pine.LNX.4.61.0507270813520.21618@gannet.stats>
Message-ID: <6.2.1.2.1.20050727175222.021f8298@imaphost.wehi.edu.au>

At 05:21 PM 27/07/2005, Prof Brian Ripley wrote:
>On Wed, 27 Jul 2005, Gordon Smyth wrote:
>
>>Thanks for the reply. Apologies for checking only R patched rather than 
>>R-devel.
>>
>>I guess that this means that someone must have a use for 
>>allowEscapes=TRUE when read reading a file in table format into a data 
>>frame. It is hard to imagine.
>
>Octal and hex escapes are a common way to cope with different encodings.

Thanks.

>I would not want R limited by the imagination of a single user, let alone 
>a Windows-only user.

Oct and hex escapes are not the only uses of backslashes in the computing 
world, and not only in Windows. TeX markup is one example. In the 
bioinformatics world, a great variety of ways are used to represent gene 
annotation information in text files, some of them including backlashes. I 
find that people find ways to throw all sorts of things at my code.

If 'allowEscapes=FALSE' was the default in read.table, then all legacy code 
using read.table() would continue to behave as in the past. With 
'allowEscapes=TRUE', all code ever written which uses read.table(), and 
which has to cope with backslashes which are not octal or hex escapes, will 
now be broken. This is not in any sense a complaint, nor a wish that R 
should remain static or be limited by my imagination. Just a plea that, 
other things being equal, not breaking legacy code will be a consideration.

Gordon


From spencer.graves at pdf.com  Thu Jul 28 05:58:27 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Wed, 27 Jul 2005 20:58:27 -0700
Subject: [Rd] evaluating variance functions in nlme
In-Reply-To: <1122407801.26649.239292761@webmail.messagingengine.com>
References: <1122407801.26649.239292761@webmail.messagingengine.com>
Message-ID: <42E857E3.6060200@pdf.com>

	  Yes, this probably should go to R-help, and before you do that, I 
suggest you PLEASE do read the posting guide! 
http://www.R-project.org/posting-guide.html.  It can increase the 
likelihood you will get a useful reply relatively quickly.

	  I tried the your two calls to "gnls", which of course produced errors 
for me as I don't have your data.  The help page for "gnls" included an 
example that looked quite similar to me:

 >      fm1 <- gnls(weight ~ SSlogis(Time, Asym, xmid, scal), Soybean,
+                  weights = varPower())
 >      summary(fm1)>      fm1 <- gnls(weight ~ SSlogis(Time, Asym, 
xmid, scal), Soybean,
+                  weights = varPower())
 >      summary(fm1)

	  Those results plus "str(fm1)" looked like they might help answer your 
question.  However, I don't understand enough of what you are asking to 
say.

	  If an answer might still be worth pursuing to you, I suggest you read 
the posting guide and submit a question following that model to r-help.

	  spencer graves

Nicholas Lewin-Koh wrote:

> Hi,
> I guess this is a final plea, and maybe this should go to R-help but
> here goes.
> I am writing a set of functions for calibration and prediction, and to
> calculate standard 
> errors and intervals I need the variance function to be evaluated at new
> prediction points.
> So for instance
> 
> fit<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower())
> fit2<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower(form=~foo))
> 
> Now using fit or fit2 I would like to get the variance function
> evaluated at new points. 
> I have played with getCovariateFormula, and looked at Initialize.gnls,
> summary etc.
> but it is not clear to me how to evaluate the form component, especially
> in the case of fit
> above where form=~fitted(.), in any safe way.
> 
> I can grep for "fitted" in the formula eg.
> grep("fitted",deparse(getCovariateFormula(fit$modelStruct$varFunc)))
> and try to calculate predicted values from the model for the new points
> but how to substitute back in the new terms?
> 
> I don't need this problem solved on a platter, I just need to unedrstand
> an approach,
> because my stabs are failing.
> 
> Thanks
> 
> Nicholas
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From Jordi.Molins at drkw.com  Thu Jul 28 13:21:18 2005
From: Jordi.Molins at drkw.com (Molins, Jordi)
Date: Thu, 28 Jul 2005 13:21:18 +0200
Subject: [Rd] Calling S functions from C routine not called from S?
Message-ID: <C5A76BA0CA4D734CA725124C4D6397AC8BFE37@ibfftce502.de.ad.drkw.net>

Dear R Developers,

In the book "S programming", page 138-9, it is said that "(...) it is only
possible to use call_S to call S functions from within C functions called
from S". However, in "S programming" page 148-9 it is stated:  "It can be
much easier to debug the code while called from a C or FORTRAN main program
(...)".

My question is: is it possible to call S functions from a C routine not
called from S? (what I mean is to use S as an extended library in
independent C++ code). The second statement seems to imply that it is
possible to do so, right?

If it is possible, is there a "Hello, World!" example?

Kind regards

Jordi



--------------------------------------------------------------------------------
The information contained herein is confidential and is inte...{{dropped}}


From nikko at hailmail.net  Thu Jul 28 15:31:35 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Thu, 28 Jul 2005 08:31:35 -0500
Subject: [Rd] evaluating variance functions in nlme
In-Reply-To: <42E857E3.6060200@pdf.com>
References: <1122407801.26649.239292761@webmail.messagingengine.com>
	<42E857E3.6060200@pdf.com>
Message-ID: <1122557495.4035.239434925@webmail.messagingengine.com>

Hi,
The reason I didn't send this to r-help is I am not interested in just
evaluating the variance function
for a particular set of data. That is not a big deal,
for your example,
pp<-predict(fm1,list(weight=c(15,16)))
vf<-pp^2*(coef(fm1$modelStruct$varFunc))

which is not the point. The point is that for any fit when I use my
function
mypredict(fm1,se.fit=TRUE)

To get the standard error I will need to evaluate an arbitrary variance
function,
Which means parsing the formula to get the terms and retriving those
terms from the input
dataframe, evaluating them properly and then assembling the coeficients
in the right way 
for the variance function.

So this was not a how do I evaluate the variance function for model x
question,
but asking help for a generic function to evaluate variance functions
when doing prediction.

Thanks,
Nicholas
On Wed, 27 Jul 2005 20:58:27 -0700, "Spencer Graves"
<spencer.graves at pdf.com> said:
> 	  Yes, this probably should go to R-help, and before you do that, I 
> suggest you PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html.  It can increase the 
> likelihood you will get a useful reply relatively quickly.
> 
> 	  I tried the your two calls to "gnls", which of course produced errors 
> for me as I don't have your data.  The help page for "gnls" included an 
> example that looked quite similar to me:
> 
>  >      fm1 <- gnls(weight ~ SSlogis(Time, Asym, xmid, scal), Soybean,
> +                  weights = varPower())
>  >      summary(fm1)>      fm1 <- gnls(weight ~ SSlogis(Time, Asym, 
> xmid, scal), Soybean,
> +                  weights = varPower())
>  >      summary(fm1)
> 
> 	  Those results plus "str(fm1)" looked like they might help answer your 
> question.  However, I don't understand enough of what you are asking to 
> say.
> 
> 	  If an answer might still be worth pursuing to you, I suggest you read 
> the posting guide and submit a question following that model to r-help.
> 
> 	  spencer graves
> 
> Nicholas Lewin-Koh wrote:
> 
> > Hi,
> > I guess this is a final plea, and maybe this should go to R-help but
> > here goes.
> > I am writing a set of functions for calibration and prediction, and to
> > calculate standard 
> > errors and intervals I need the variance function to be evaluated at new
> > prediction points.
> > So for instance
> > 
> > fit<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower())
> > fit2<-gnls(Y~SSlogis(foo,Asym,xmid,scal),weights=varPower(form=~foo))
> > 
> > Now using fit or fit2 I would like to get the variance function
> > evaluated at new points. 
> > I have played with getCovariateFormula, and looked at Initialize.gnls,
> > summary etc.
> > but it is not clear to me how to evaluate the form component, especially
> > in the case of fit
> > above where form=~fitted(.), in any safe way.
> > 
> > I can grep for "fitted" in the formula eg.
> > grep("fitted",deparse(getCovariateFormula(fit$modelStruct$varFunc)))
> > and try to calculate predicted values from the model for the new points
> > but how to substitute back in the new terms?
> > 
> > I don't need this problem solved on a platter, I just need to unedrstand
> > an approach,
> > because my stabs are failing.
> > 
> > Thanks
> > 
> > Nicholas
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> -- 
> Spencer Graves, PhD
> Senior Development Engineer
> PDF Solutions, Inc.
> 333 West San Carlos Street Suite 700
> San Jose, CA 95110, USA
> 
> spencer.graves at pdf.com
> www.pdf.com <http://www.pdf.com>
> Tel:  408-938-4420
> Fax: 408-280-7915


From cschwartz_gx at neo.rr.com  Fri Jul 29 07:02:58 2005
From: cschwartz_gx at neo.rr.com (Concetta Schwartz)
Date: Fri, 29 Jul 2005 05:02:58 +0000
Subject: [Rd] News for Forward-Thinking Investors
Message-ID: <HMEIALOLEANCJNMCPLNPKLLGJHAB.cschwartz_gx@neo.rr.com>

Epic Media Inc. (OTC: EPMI)
Retains Auditor, Intends to Become Fully Reporting
Shares Outstanding as of July 8, 2005: 22,750,000
Public Float as of July 8, 2005: 4,065,000
(Source: News 7/11/05)

Current Price: 0.70

Is the Price of the St0ck Starting to Move Up? Go
Check for Yourself Now!

RECENT DEVELOPMENTS: (Source: Press Releases)


1)EPIC Media Issued Clean Audit Report from
Independent Auditor & Files 10-SB with SEC for OTCBB
Listing- Announced that it has been issued a clean
audit review from the Company's independent auditor
Moore & Associates, Chtd. (PCAOB Registered) on July
15, 2005. The Company has subsequently prepared a
10-SB Registration Statement for submission to the
SEC. The filing will be uploaded to the SEC Edgar
System on July 22, 2005, at 1:00 PM PST.

2)EPIC Media (OTC:EPMI) Announces Launch of
Zooprize.com to Compete with
Google and Yahoo!-  EPIC Media Inc. (OTC:EPMI - News)
today announced that the launch of Zooprize.com is
scheduled for Oct. 17, 2005.

ZOOPRIZE! - Zooprize.com is an internet 
portal designed to compile
information from Google(TM), Yahoo!, Ask Jeeves and
other data points
throughout the internet and organize it into 
the most relevant search results.

Unlike most metasearch engines, Zooprize is more than
just search.It is a unique way of gathering and packaging
information into a member/portal interface that inspires
users to stay connected to the portal.
This new member/portal interface provides the Company
with an unprecedented opportunity to provide advertisers
with the ability to target consumers that
is far superior to that of Google's Adwords or
Yahoo!'s Overture.

Zooprize.com is a wholly owned subsidiary of EPIC
Media Inc. The Company
will also use the portal as a member registration
point for the Everything magazine titles launching 
early 2006 (please see recent press releases).



3)EPIC Media Incorporated Announces Public Trading of
Common St0ck - Ticker Symbol "EPMI" and Shareholder
Dividend Update- EPIC Media is a multimedia company
founded to gather, understand, translate, and package
information into original marketable print and digital
products. In early 2006, the Company is launching two
new magazine titles, Everything for Men and Everything
for Women. Each will have a rate base of 500,000 and a
final trim size of 10 x 13. The monthly publications
will have editorial units that include:
transportation, home, health, travel, online, money,
fashion, sports, entertainment, and more.

EPIC Media's business model is different from any
other multimedia company or magazine publisher. From
Corporate discounts with the "Everything Card" to
substantial monthly giveaways, the Everything
magazines are the first "mega-magazines" for men and
women with a clear message: an overwhelming amount of
empowering content with meaningful value added
services.

The Company has secured national newsstand
distribution for both magazines. Each title has a $36
annual membership (subscription) fee for home delivery
and all the benefits of membership and a $5 cover
price off the newsstand. According to Nicholas A.
Czuczko, CEO and Publisher, "where else can you win a
million dollars, one of five cars, save $100 on a
plane ticket, receive a $1,200 higher refund on your
taxes because you read our monthly article on tax
strategies in the "Money" section of the magazine and
be entertained all in one month? There just isn't
anything close to what we're doing out there."


Watch This One Trade!

__________________________


Information within this email contains "f0rward
l00kingst4tements" within the meaning of Section
27A of the Securities Act of1933 and Section 21B of
the Securities Exchange Act of 1934. Any statements
that express or involvediscussions with respect to
predictions, expectations,beliefs, plans,projections,
objectives, goals, assumptions or future events or
performance are not statements of historical fact
and may be"f0rwardl00kingst4tements."f0rward
l00kingst4tements are based on expectations, estimates
and projections at the time the st4tements are made
that involve a number of risks and uncertainties which
could cause actual results or events to differ
materially from those presently anticipated. F0rward
l00kingst4tements in this action may be identified
through the use of words such as "projects",
"foresee", "expects", "will," "anticipates,"
"estimates," "believes," "understands" or that
by statements indicating certain actions "may,"
"could," or "might" occur. As with many micr0cap
st0cks, today's company has additional risk factors
that raise doubt about its ability to continue as a
going concern. Today's featured company is n0t currently
a rep0rt1ng company registered under the Securit1es Act 0f
1934. Other factors include an accumulated deficit since
its inception, a negative net worth, nominal cash,
an auditor's going concern opinion and no revenues in
its most recent quarter. The Company has relied on advances from
shareh0lders and officers. There is a note due to a related party.
The company recently filed a form 10 to become fully reporting.
There can be no assurance that this registration
statement will be declared effective by federal
regulators. Do not make your decision to buy the st0ck
based on this.  Please readthe filing in its entirety
now, right now, before you invest.It is not currently
an operating company and has not had business
operations in over seven years. The company is going
to need financing.  If that financing does not
occur,the company may not be able to complete some
proposed transactions and the company may not be able
to continue as a going concern in which case you could
lose your entire 1nvestment. Other risks and
uncertainties include, but are not limited to, the
ability of the Company to complete its business plan,
reliance on key personnel, market conditions, the
general acceptance of the Company's products and
technologies, competitive factors, timing, and other
risks associated with their business. The publisher of
this news letter does not represent that the information
contained in this message states all material facts or
does not omit a material fact necessary to make the statements
therein not misleading.All information provided within
this email pertaining to investing, st0cks, securities
must be understood as information provided and n0tin-vestment
advice. The publisher of this newsletter advises all
readers and subscribers to seek advice from areg1stered
professional securities representative before deciding to
trade in st0cks featured within this email. None of the
material within this report shall be construed as any
kind of investment advice or solicitation.Many of these companies are on
the verge of bankruptcy. You can l0se all your money by investing
in this st0ck. The publisher of this newsletter is n0t areg1stered
in-vestmentadvis0r. Subscribers should not view information herein as
legal, tax, accounting or investment advice. Any reference to past
performance(s) of companies are specially selected to be referenced based on the
favorable performance of these companies. You would need perfect timing to
acheive the results in the examples given. There can be no assurance of that
happening. Remember, as always, past performance is never indicative of future
results and a thorough due diligence effort, including a review of a
company's filings when available, should be completed prior to in
vesting.  In compliance with the Securities Act of 1933, Section17(b), The
publisher of this newsletter is contracted to receive fifteen thousand
d0llars from a third party, not an officer, director or affiliate shareholder for
the circulation of this report. Be aware of an inherent conflict of interest
resulting from such compensation due to the fact that
this is a paid advertisement and is not without bias.The party that
paid us has a position in the st0ck they will sell at anytime without notice.
This could have a negative impact on the price of the st0ck, causing you
to lose m0ney. All factual information in this report was gathered from
public sources, including but not limited to Company Websites, Company
Filings and Company Press Releases. The publisher of this newsletter believes this
information to be reliable but can make no guarantee as to its accuracy or
completeness. Use of the material within this email constitutes your acceptance
of these terms.


Please rem0ve me from em4il datab4se: 
Send a em4il here REM0VEMENOW00 @ Yahoo.com


From r.hankin at noc.soton.ac.uk  Fri Jul 29 13:59:26 2005
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Fri, 29 Jul 2005 12:59:26 +0100
Subject: [Rd] octonions
Message-ID: <245FBCC1-7FA2-4148-8F87-0C5D82D53DE8@soc.soton.ac.uk>

Hi

I  thought it would be fun to develop R functionality for
the octonions (there is  already some work on quaternions).

The octonions are an 8 dimensional algebra over the reals, so an  
octonion
may nicely be represented as a real vector of length 8.  Applications
are many and varied, mostly quantum mechanics.

I would like to develop some R functionality in this area.
My first problem is how to get (eg) a matrix whose entries are  
octonions?
It would  be nice for a %*% b to behave sensibly when a and b are
matrices with octonion elements.

Octonions  are not associative [that is,
x*(y*z) != (x*y)*z ] or commutative [x*y != y*x].
One usually sees an 8-by-8 table that gives the products.

At this stage, I'm polling for ideas on overall structure.
Would a package be the best way forward?  Or
writing an equivalent of complex.c? Or is there
another approach that would be better? The
basic multiplication table is easily implemented in C,
and I now have an (untested) R function OctonionProduct(. , .)
that multiplies two octonions; but I
am struggling to see how to make this play nicely with R: it's not
obvious how to make octonion matrices multiply as they should,
in the same way that (eg) complex matrices do.

Perhaps we could define "*" and "/"  appropriately for vectors of class
"octonion" (if such a thing makes sense):  or is there a better
way?  Also, Mod(), Re(), and perhaps
Conj() would have to be generalized to work with octonions.


comments please!


--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From roebuck at odin.mdacc.tmc.edu  Fri Jul 29 15:04:51 2005
From: roebuck at odin.mdacc.tmc.edu (Paul Roebuck)
Date: Fri, 29 Jul 2005 08:04:51 -0500 (CDT)
Subject: [Rd] documentation for as() typo
Message-ID: <Pine.OSF.4.58.0507290754150.330878@odin.mdacc.tmc.edu>

>Automatic conversion is special, and comes from the
>designer of one class of objects asserting that this
>class extends a another class (see 'setClass' and 'setIs').
              ^^^

> R.version.string
[1] "R version 2.1.1, 2005-06-20"

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From dgrove at fhcrc.org  Fri Jul 29 19:27:39 2005
From: dgrove at fhcrc.org (Douglas Grove)
Date: Fri, 29 Jul 2005 10:27:39 -0700 (PDT)
Subject: [Rd] R_BATCHSAVE setting in config.site
Message-ID: <Pine.LNX.4.58.0507291004080.407@echidna.fhcrc.org>

Hi,

I just downloaded and installed last nights version of R-patched
and decided that I'd set R_BATCHSAVE=--no-save in config.site,
which I haven't done before.

Since the comment above R_BATCHSAVE in config.site says:
  ## The default behavior of R if it encounters EOF in batch mode.
  ## Set this to one of '--save' or '--no-save' depending whether you
  ## want automatic saving of '.RData' or not.
so I assumed it should only affect BATCH mode.  However, I'm finding
the opposite, it only affects interactive mode, and *not* BATCH mode.

I configured and made R two different ways, one with R_BATCHSAVE set
to --no-save and one with it left unset (defaulting to --save).
I compared the resulting scripts to one another.  I found that
there was no difference in the ${R_HOME}/bin/BATCH scripts but there was 
a difference in the ${R_HOME}/bin/R scripts.  When I set R_BATCHSAVE
to --no-save I got:  
  exec "${R_binary}" --no-save ${args}
rather instead of: 
  exec "${R_binary}"  ${args}
one line 175 of /bin/R.

Am I missing something (certainly not an uncommon occurrance) or
is this a mistake?

Thanks,
Doug Grove

Statistical Research Associate
Fred Hutchinson Cancer Center
Seattle, WA


From dgrove at fhcrc.org  Fri Jul 29 19:29:22 2005
From: dgrove at fhcrc.org (Douglas Grove)
Date: Fri, 29 Jul 2005 10:29:22 -0700 (PDT)
Subject: [Rd] R_BATCHSAVE setting in config.site
In-Reply-To: <Pine.LNX.4.58.0507291004080.407@echidna.fhcrc.org>
References: <Pine.LNX.4.58.0507291004080.407@echidna.fhcrc.org>
Message-ID: <Pine.LNX.4.58.0507291028001.521@echidna.fhcrc.org>

Sorry, forgot to provide system info:

I'm running SuSE 9.3 on an AMD Althon4000

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Patched
major    2
minor    1.1
year     2005
month    07
day      29
language R

Doug


On Fri, 29 Jul 2005, Douglas Grove wrote:

> Hi,
> 
> I just downloaded and installed last nights version of R-patched
> and decided that I'd set R_BATCHSAVE=--no-save in config.site,
> which I haven't done before.
> 
> Since the comment above R_BATCHSAVE in config.site says:
>   ## The default behavior of R if it encounters EOF in batch mode.
>   ## Set this to one of '--save' or '--no-save' depending whether you
>   ## want automatic saving of '.RData' or not.
> so I assumed it should only affect BATCH mode.  However, I'm finding
> the opposite, it only affects interactive mode, and *not* BATCH mode.
> 
> I configured and made R two different ways, one with R_BATCHSAVE set
> to --no-save and one with it left unset (defaulting to --save).
> I compared the resulting scripts to one another.  I found that
> there was no difference in the ${R_HOME}/bin/BATCH scripts but there was 
> a difference in the ${R_HOME}/bin/R scripts.  When I set R_BATCHSAVE
> to --no-save I got:  
>   exec "${R_binary}" --no-save ${args}
> rather instead of: 
>   exec "${R_binary}"  ${args}
> one line 175 of /bin/R.
> 
> Am I missing something (certainly not an uncommon occurrance) or
> is this a mistake?
> 
> Thanks,
> Doug Grove
> 
> Statistical Research Associate
> Fred Hutchinson Cancer Center
> Seattle, WA
>


From tplate at blackmesacapital.com  Fri Jul 29 22:12:13 2005
From: tplate at blackmesacapital.com (Tony Plate)
Date: Fri, 29 Jul 2005 14:12:13 -0600
Subject: [Rd] octonions
In-Reply-To: <245FBCC1-7FA2-4148-8F87-0C5D82D53DE8@soc.soton.ac.uk>
References: <245FBCC1-7FA2-4148-8F87-0C5D82D53DE8@soc.soton.ac.uk>
Message-ID: <42EA8D9D.6070000@blackmesacapital.com>

It's reasonably easy to define an S3 class for vectors (e.g., 
"octonion") and then define operator methods (for all operators other 
than matrix operators) to do what you want with that class.  To do this 
you need to define a function Ops.octonion.  All of this is easily done 
in pure R. I just wrote a package that does just that for a vector class 
with a different algebra (I can send you a copy if you could use any 
hints on those aspects).  I'm not sure of the best way of defining a 
method for '%*%'.   I think it's possible to use setMethod() to define a 
method for '%*%', but I haven't played with that much (my initial 
attempts have worked, but warnings have been generated by setMethod).

-- Tony Plate

Robin Hankin wrote:
> Hi
> 
> I  thought it would be fun to develop R functionality for
> the octonions (there is  already some work on quaternions).
> 
> The octonions are an 8 dimensional algebra over the reals, so an  
> octonion
> may nicely be represented as a real vector of length 8.  Applications
> are many and varied, mostly quantum mechanics.
> 
> I would like to develop some R functionality in this area.
> My first problem is how to get (eg) a matrix whose entries are  
> octonions?
> It would  be nice for a %*% b to behave sensibly when a and b are
> matrices with octonion elements.
> 
> Octonions  are not associative [that is,
> x*(y*z) != (x*y)*z ] or commutative [x*y != y*x].
> One usually sees an 8-by-8 table that gives the products.
> 
> At this stage, I'm polling for ideas on overall structure.
> Would a package be the best way forward?  Or
> writing an equivalent of complex.c? Or is there
> another approach that would be better? The
> basic multiplication table is easily implemented in C,
> and I now have an (untested) R function OctonionProduct(. , .)
> that multiplies two octonions; but I
> am struggling to see how to make this play nicely with R: it's not
> obvious how to make octonion matrices multiply as they should,
> in the same way that (eg) complex matrices do.
> 
> Perhaps we could define "*" and "/"  appropriately for vectors of class
> "octonion" (if such a thing makes sense):  or is there a better
> way?  Also, Mod(), Re(), and perhaps
> Conj() would have to be generalized to work with octonions.
> 
> 
> comments please!
> 
> 
> --
> Robin Hankin
> Uncertainty Analyst
> National Oceanography Centre, Southampton
> European Way, Southampton SO14 3ZH, UK
>   tel  023-8059-7743
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ripley at stats.ox.ac.uk  Sat Jul 30 07:52:12 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 30 Jul 2005 06:52:12 +0100 (BST)
Subject: [Rd] Order of options in options()
Message-ID: <Pine.LNX.4.61.0507300648080.26470@gannet.stats>

As the number of options has grown, I have found it harder and harder to 
spot if a particular option is set, as well as to find descriptions in the 
help file.  Currently options() lists them in the order they were first 
set.

I would find it much easier if the options were listed in alphabetical 
order both in the help file and as output.

Does anyone see any reason to retain the current order?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pkapat_nospam at stat.ohio-state.edu  Sun Jul 31 03:53:51 2005
From: pkapat_nospam at stat.ohio-state.edu (pkapat_nospam@stat.ohio-state.edu)
Date: Sun, 31 Jul 2005 03:53:51 +0200 (CEST)
Subject: [Rd] eigen gives NaN in $vectors (PR#8041)
Message-ID: <20050731015351.248AA1132F@slim.kubism.ku.dk>

Full_Name: P Kapat
Version: 2.1.1 (2005-06-20)
OS: GNU/Linux 2.6.8-2-386, Debian testing
Submission from: (NULL) (65.24.56.41)


Relevant Bugs Ids : 7987, 7989

H is a 100x100 singular but symmetric matrix (a matrix defining the
neighbourhood structure for a spatial data) available from..
http://www.stat.ohio-state.edu/~pkapat/miscl/bugMatrix.RData

> load(file="bugMatrix.RData")
> ls()
"H"
> I <- diag(rep(1,100))
> g <- 0.1318467
> M <- I - g*H 
> y <- eigen(M)
> y$vec[,91]
## all NaNs

Interestingly, as suggested in bug id 7989, this is very sensitive to the
scaling factor g. The error dissapears with even a slightly different value of
g, like 0.131846 instead of 0.1318467.

I run a Debian/testing (2.6.8-11 kernel) on Dell P4 i386 arch. This error does
not occur on Windows XP (R 2.1.1) or Red Hat Enterprise GNU/Linux 2.6.9-11
running R 2.1.1. I have tried on both of them. Seems like a wiered bug !!

Kapat
Dept. of Stat. OSU.


From edd at debian.org  Sun Jul 31 04:15:49 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 30 Jul 2005 21:15:49 -0500
Subject: [Rd] eigen gives NaN in $vectors (PR#8041)
In-Reply-To: <20050731015351.248AA1132F@slim.kubism.ku.dk>
References: <20050731015351.248AA1132F@slim.kubism.ku.dk>
Message-ID: <17132.13397.506098.656586@basebud.nulle.part>


On 31 July 2005 at 03:53, pkapat_nospam at stat.ohio-state.edu wrote:
| Full_Name: P Kapat
| Version: 2.1.1 (2005-06-20)
| OS: GNU/Linux 2.6.8-2-386, Debian testing
| Submission from: (NULL) (65.24.56.41)
| 
| 
| Relevant Bugs Ids : 7987, 7989
| 
| H is a 100x100 singular but symmetric matrix (a matrix defining the
| neighbourhood structure for a spatial data) available from..
| http://www.stat.ohio-state.edu/~pkapat/miscl/bugMatrix.RData
| 
| > load(file="bugMatrix.RData")
| > ls()
| "H"
| > I <- diag(rep(1,100))
| > g <- 0.1318467
| > M <- I - g*H 
| > y <- eigen(M)
| > y$vec[,91]
| ## all NaNs
| 
| Interestingly, as suggested in bug id 7989, this is very sensitive to the
| scaling factor g. The error dissapears with even a slightly different value of
| g, like 0.131846 instead of 0.1318467.
| 
| I run a Debian/testing (2.6.8-11 kernel) on Dell P4 i386 arch. This error does
| not occur on Windows XP (R 2.1.1) or Red Hat Enterprise GNU/Linux 2.6.9-11
| running R 2.1.1. I have tried on both of them. Seems like a wiered bug !!

Could you show us the output of 'ldd /usr/lib/R/lib/libR.so' to see which
blas library your are linked to? On my Debian testing (plus my local archive
of things going to Debiin unstable) machine I see

edd at basebud:~> ldd /usr/lib/R/lib/libR.so
        libblas.so.3 => /usr/lib/atlas/3dnow/libblas.so.3 (0xb788b000)
        libg2c.so.0 => /usr/lib/libg2c.so.0 (0xb786d000)
        libm.so.6 => /lib/tls/libm.so.6 (0xb784a000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb783f000)
        libreadline.so.5 => /lib/libreadline.so.5 (0xb7812000)
        libpcre.so.3 => /usr/lib/libpcre.so.3 (0xb77ea000)
        libbz2.so.1.0 => /usr/lib/libbz2.so.1.0 (0xb77db000)
        libz.so.1 => /usr/lib/libz.so.1 (0xb77c9000)
        libdl.so.2 => /lib/tls/libdl.so.2 (0xb77c5000)
        libc.so.6 => /lib/tls/libc.so.6 (0xb7690000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)
        libncurses.so.5 => /lib/libncurses.so.5 (0xb7651000)

where the first line matters -- this Athlon system has the corresponding
Athlon ATLAS libraries installed. With that, I *cannot* reproduce your bug:

> load(url("http://www.stat.ohio-state.edu/~pkapat/miscl/bugMatrix.RData"))
> ls()
[1] "H"
> I <- diag(rep(1,100))
> g <- 0.1318467
> M <- I - g*H 
> y <- eigen(M)
> y$vec[,91]
  [1]  0.064994365  0.095269861  0.093356381  0.093002077  0.117163201
  [6]  0.149338128  0.151908900  0.110123012  0.050293258  0.010859822
 [11]  0.083452682  0.103623840  0.068440931  0.045219013  0.079837036
 [16]  0.141580270  0.158260380  0.100615858  0.017314370 -0.020430745
 [21]  0.060861312  0.037783017 -0.053999270 -0.116936079 -0.084425327
 [26]  0.001884144  0.041081891 -0.009022666 -0.082867040 -0.084354982
 [31]  0.046121709 -0.006589538 -0.137775925 -0.228347114 -0.196939213
 [36] -0.093055786 -0.038154216 -0.083641382 -0.151805832 -0.128662892
 [41]  0.072554437  0.035751182 -0.089922517 -0.176261323 -0.135718368
 [46] -0.022677002  0.030698204 -0.031015693 -0.122266788 -0.117638460
 [51]  0.117638460  0.122266788  0.031015693 -0.030698204  0.022677002
 [56]  0.135718368  0.176261323  0.089922517 -0.035751182 -0.072554437
 [61]  0.128662892  0.151805832  0.083641382  0.038154216  0.093055786
 [66]  0.196939213  0.228347114  0.137775925  0.006589538 -0.046121709
 [71]  0.084354982  0.082867040  0.009022666 -0.041081891 -0.001884144
 [76]  0.084425327  0.116936079  0.053999270 -0.037783017 -0.060861312
 [81]  0.020430745 -0.017314370 -0.100615858 -0.158260380 -0.141580270
 [86] -0.079837036 -0.045219013 -0.068440931 -0.103623840 -0.083452682
 [91] -0.010859822 -0.050293258 -0.110123012 -0.151908900 -0.149338128
 [96] -0.117163201 -0.093002077 -0.093356381 -0.095269861 -0.064994365
> 

No NaNs here.

Kudos for providing a complete bug report. Now let's see it hits you but not
me ...

Cheers,  Dirk

| 
| Kapat
| Dept. of Stat. OSU.
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From ripley at stats.ox.ac.uk  Sun Jul 31 09:33:55 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 31 Jul 2005 08:33:55 +0100 (BST)
Subject: [Rd] R_BATCHSAVE setting in config.site
In-Reply-To: <Pine.LNX.4.58.0507291004080.407@echidna.fhcrc.org>
References: <Pine.LNX.4.58.0507291004080.407@echidna.fhcrc.org>
Message-ID: <Pine.LNX.4.61.0507291833090.12432@gannet.stats>

R is case-sensitive!

'batch mode' does not refer to using the utility `R CMD BATCH' (which you 
called 'BATCH mode' but is not actually running R but running a utility 
that runs R), and which is documented to set --save.

Something like R < input.R is not interactive use, and in Unix parlance is 
'batch' use.  It is the opposite of 'interactive' (see ?interactive). EOF 
is ignored in interactive use of R, but this setting does affect 
interactive use in that you will no longer be asked it you want to save 
the workspace.

This setting should probably be described in the R-admin manual, perhaps 
with a better name.


On Fri, 29 Jul 2005, Douglas Grove wrote:

> Hi,
>
> I just downloaded and installed last nights version of R-patched
> and decided that I'd set R_BATCHSAVE=--no-save in config.site,
> which I haven't done before.
>
> Since the comment above R_BATCHSAVE in config.site says:
>  ## The default behavior of R if it encounters EOF in batch mode.
>  ## Set this to one of '--save' or '--no-save' depending whether you
>  ## want automatic saving of '.RData' or not.
> so I assumed it should only affect BATCH mode.  However, I'm finding
> the opposite, it only affects interactive mode, and *not* BATCH mode.
>
> I configured and made R two different ways, one with R_BATCHSAVE set
> to --no-save and one with it left unset (defaulting to --save).

No, unset is not --save.

> I compared the resulting scripts to one another.  I found that
> there was no difference in the ${R_HOME}/bin/BATCH scripts but there was
> a difference in the ${R_HOME}/bin/R scripts.  When I set R_BATCHSAVE
> to --no-save I got:
>  exec "${R_binary}" --no-save ${args}
> rather instead of:
>  exec "${R_binary}"  ${args}
> one line 175 of /bin/R.
>
> Am I missing something (certainly not an uncommon occurrance) or
> is this a mistake?

A misreading.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


